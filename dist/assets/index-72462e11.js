var bE=Object.defineProperty;var wE=(t,e,n)=>e in t?bE(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ve=(t,e,n)=>(wE(t,typeof e!="symbol"?e+"":e,n),n);function _E(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var xe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Td(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function A1(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var P1={exports:{}},Od={},D1={exports:{}},Ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dl=Symbol.for("react.element"),kE=Symbol.for("react.portal"),SE=Symbol.for("react.fragment"),CE=Symbol.for("react.strict_mode"),jE=Symbol.for("react.profiler"),EE=Symbol.for("react.provider"),NE=Symbol.for("react.context"),AE=Symbol.for("react.forward_ref"),PE=Symbol.for("react.suspense"),DE=Symbol.for("react.memo"),TE=Symbol.for("react.lazy"),Ix=Symbol.iterator;function OE(t){return t===null||typeof t!="object"?null:(t=Ix&&t[Ix]||t["@@iterator"],typeof t=="function"?t:null)}var T1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O1=Object.assign,R1={};function Wo(t,e,n){this.props=t,this.context=e,this.refs=R1,this.updater=n||T1}Wo.prototype.isReactComponent={};Wo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Wo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function F1(){}F1.prototype=Wo.prototype;function Mm(t,e,n){this.props=t,this.context=e,this.refs=R1,this.updater=n||T1}var Lm=Mm.prototype=new F1;Lm.constructor=Mm;O1(Lm,Wo.prototype);Lm.isPureReactComponent=!0;var Mx=Array.isArray,I1=Object.prototype.hasOwnProperty,Bm={current:null},M1={key:!0,ref:!0,__self:!0,__source:!0};function L1(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)I1.call(e,r)&&!M1.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Dl,type:t,key:i,ref:o,props:s,_owner:Bm.current}}function RE(t,e){return{$$typeof:Dl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function $m(t){return typeof t=="object"&&t!==null&&t.$$typeof===Dl}function FE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Lx=/\/+/g;function zh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?FE(""+t.key):e.toString(36)}function du(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Dl:case kE:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+zh(o,0):r,Mx(s)?(n="",t!=null&&(n=t.replace(Lx,"$&/")+"/"),du(s,e,n,"",function(u){return u})):s!=null&&($m(s)&&(s=RE(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Lx,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Mx(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+zh(i,l);o+=du(i,e,n,c,s)}else if(c=OE(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+zh(i,l++),o+=du(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function dc(t,e,n){if(t==null)return t;var r=[],s=0;return du(t,r,"","",function(i){return e.call(n,i,s++)}),r}function IE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Gt={current:null},hu={transition:null},ME={ReactCurrentDispatcher:Gt,ReactCurrentBatchConfig:hu,ReactCurrentOwner:Bm};function B1(){throw Error("act(...) is not supported in production builds of React.")}Ae.Children={map:dc,forEach:function(t,e,n){dc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return dc(t,function(){e++}),e},toArray:function(t){return dc(t,function(e){return e})||[]},only:function(t){if(!$m(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ae.Component=Wo;Ae.Fragment=SE;Ae.Profiler=jE;Ae.PureComponent=Mm;Ae.StrictMode=CE;Ae.Suspense=PE;Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ME;Ae.act=B1;Ae.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=O1({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Bm.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)I1.call(e,c)&&!M1.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Dl,type:t.type,key:s,ref:i,props:r,_owner:o}};Ae.createContext=function(t){return t={$$typeof:NE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:EE,_context:t},t.Consumer=t};Ae.createElement=L1;Ae.createFactory=function(t){var e=L1.bind(null,t);return e.type=t,e};Ae.createRef=function(){return{current:null}};Ae.forwardRef=function(t){return{$$typeof:AE,render:t}};Ae.isValidElement=$m;Ae.lazy=function(t){return{$$typeof:TE,_payload:{_status:-1,_result:t},_init:IE}};Ae.memo=function(t,e){return{$$typeof:DE,type:t,compare:e===void 0?null:e}};Ae.startTransition=function(t){var e=hu.transition;hu.transition={};try{t()}finally{hu.transition=e}};Ae.unstable_act=B1;Ae.useCallback=function(t,e){return Gt.current.useCallback(t,e)};Ae.useContext=function(t){return Gt.current.useContext(t)};Ae.useDebugValue=function(){};Ae.useDeferredValue=function(t){return Gt.current.useDeferredValue(t)};Ae.useEffect=function(t,e){return Gt.current.useEffect(t,e)};Ae.useId=function(){return Gt.current.useId()};Ae.useImperativeHandle=function(t,e,n){return Gt.current.useImperativeHandle(t,e,n)};Ae.useInsertionEffect=function(t,e){return Gt.current.useInsertionEffect(t,e)};Ae.useLayoutEffect=function(t,e){return Gt.current.useLayoutEffect(t,e)};Ae.useMemo=function(t,e){return Gt.current.useMemo(t,e)};Ae.useReducer=function(t,e,n){return Gt.current.useReducer(t,e,n)};Ae.useRef=function(t){return Gt.current.useRef(t)};Ae.useState=function(t){return Gt.current.useState(t)};Ae.useSyncExternalStore=function(t,e,n){return Gt.current.useSyncExternalStore(t,e,n)};Ae.useTransition=function(){return Gt.current.useTransition()};Ae.version="18.3.1";D1.exports=Ae;var S=D1.exports;const X=Td(S),$1=_E({__proto__:null,default:X},[S]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LE=S,BE=Symbol.for("react.element"),$E=Symbol.for("react.fragment"),zE=Object.prototype.hasOwnProperty,UE=LE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,VE={key:!0,ref:!0,__self:!0,__source:!0};function z1(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)zE.call(e,r)&&!VE.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:BE,type:t,key:i,ref:o,props:s,_owner:UE.current}}Od.Fragment=$E;Od.jsx=z1;Od.jsxs=z1;P1.exports=Od;var a=P1.exports,Y0={},U1={exports:{}},jn={},V1={exports:{}},W1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,M){var O=$.length;$.push(M);e:for(;0<O;){var T=O-1>>>1,F=$[T];if(0<s(F,M))$[T]=M,$[O]=F,O=T;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var M=$[0],O=$.pop();if(O!==M){$[0]=O;e:for(var T=0,F=$.length,R=F>>>1;T<R;){var B=2*(T+1)-1,J=$[B],G=B+1,Z=$[G];if(0>s(J,O))G<F&&0>s(Z,J)?($[T]=Z,$[G]=O,T=G):($[T]=J,$[B]=O,T=B);else if(G<F&&0>s(Z,O))$[T]=Z,$[G]=O,T=G;else break e}}return M}function s($,M){var O=$.sortIndex-M.sortIndex;return O!==0?O:$.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,x=!1,m=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b($){for(var M=n(u);M!==null;){if(M.callback===null)r(u);else if(M.startTime<=$)r(u),M.sortIndex=M.expirationTime,e(c,M);else break;M=n(u)}}function _($){if(m=!1,b($),!x)if(n(c)!==null)x=!0,U(C);else{var M=n(u);M!==null&&V(_,M.startTime-$)}}function C($,M){x=!1,m&&(m=!1,y(w),w=-1),p=!0;var O=f;try{for(b(M),h=n(c);h!==null&&(!(h.expirationTime>M)||$&&!P());){var T=h.callback;if(typeof T=="function"){h.callback=null,f=h.priorityLevel;var F=T(h.expirationTime<=M);M=t.unstable_now(),typeof F=="function"?h.callback=F:h===n(c)&&r(c),b(M)}else r(c);h=n(c)}if(h!==null)var R=!0;else{var B=n(u);B!==null&&V(_,B.startTime-M),R=!1}return R}finally{h=null,f=O,p=!1}}var N=!1,j=null,w=-1,k=5,E=-1;function P(){return!(t.unstable_now()-E<k)}function A(){if(j!==null){var $=t.unstable_now();E=$;var M=!0;try{M=j(!0,$)}finally{M?D():(N=!1,j=null)}}else N=!1}var D;if(typeof g=="function")D=function(){g(A)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,W=L.port2;L.port1.onmessage=A,D=function(){W.postMessage(null)}}else D=function(){v(A,0)};function U($){j=$,N||(N=!0,D())}function V($,M){w=v(function(){$(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){x||p||(x=!0,U(C))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function($){switch(f){case 1:case 2:case 3:var M=3;break;default:M=f}var O=f;f=M;try{return $()}finally{f=O}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,M){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var O=f;f=$;try{return M()}finally{f=O}},t.unstable_scheduleCallback=function($,M,O){var T=t.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?T+O:T):O=T,$){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=O+F,$={id:d++,callback:M,priorityLevel:$,startTime:O,expirationTime:F,sortIndex:-1},O>T?($.sortIndex=O,e(u,$),n(c)===null&&$===n(u)&&(m?(y(w),w=-1):m=!0,V(_,O-T))):($.sortIndex=F,e(c,$),x||p||(x=!0,U(C))),$},t.unstable_shouldYield=P,t.unstable_wrapCallback=function($){var M=f;return function(){var O=f;f=M;try{return $.apply(this,arguments)}finally{f=O}}}})(W1);V1.exports=W1;var WE=V1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HE=S,Cn=WE;function re(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var H1=new Set,Za={};function Pi(t,e){No(t,e),No(t+"Capture",e)}function No(t,e){for(Za[t]=e,t=0;t<e.length;t++)H1.add(e[t])}var zr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),X0=Object.prototype.hasOwnProperty,qE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Bx={},$x={};function KE(t){return X0.call($x,t)?!0:X0.call(Bx,t)?!1:qE.test(t)?$x[t]=!0:(Bx[t]=!0,!1)}function GE(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function YE(t,e,n,r){if(e===null||typeof e>"u"||GE(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Yt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Dt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Dt[t]=new Yt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Dt[e]=new Yt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Dt[t]=new Yt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Dt[t]=new Yt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Dt[t]=new Yt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Dt[t]=new Yt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Dt[t]=new Yt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Dt[t]=new Yt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Dt[t]=new Yt(t,5,!1,t.toLowerCase(),null,!1,!1)});var zm=/[\-:]([a-z])/g;function Um(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(zm,Um);Dt[e]=new Yt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(zm,Um);Dt[e]=new Yt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(zm,Um);Dt[e]=new Yt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Dt[t]=new Yt(t,1,!1,t.toLowerCase(),null,!1,!1)});Dt.xlinkHref=new Yt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Dt[t]=new Yt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Vm(t,e,n,r){var s=Dt.hasOwnProperty(e)?Dt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(YE(e,n,s,r)&&(n=null),r||s===null?KE(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Jr=HE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,hc=Symbol.for("react.element"),ro=Symbol.for("react.portal"),so=Symbol.for("react.fragment"),Wm=Symbol.for("react.strict_mode"),J0=Symbol.for("react.profiler"),q1=Symbol.for("react.provider"),K1=Symbol.for("react.context"),Hm=Symbol.for("react.forward_ref"),Q0=Symbol.for("react.suspense"),Z0=Symbol.for("react.suspense_list"),qm=Symbol.for("react.memo"),ls=Symbol.for("react.lazy"),G1=Symbol.for("react.offscreen"),zx=Symbol.iterator;function ra(t){return t===null||typeof t!="object"?null:(t=zx&&t[zx]||t["@@iterator"],typeof t=="function"?t:null)}var it=Object.assign,Uh;function _a(t){if(Uh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Uh=e&&e[1]||""}return`
`+Uh+t}var Vh=!1;function Wh(t,e){if(!t||Vh)return"";Vh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{Vh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?_a(t):""}function XE(t){switch(t.tag){case 5:return _a(t.type);case 16:return _a("Lazy");case 13:return _a("Suspense");case 19:return _a("SuspenseList");case 0:case 2:case 15:return t=Wh(t.type,!1),t;case 11:return t=Wh(t.type.render,!1),t;case 1:return t=Wh(t.type,!0),t;default:return""}}function ep(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case so:return"Fragment";case ro:return"Portal";case J0:return"Profiler";case Wm:return"StrictMode";case Q0:return"Suspense";case Z0:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case K1:return(t.displayName||"Context")+".Consumer";case q1:return(t._context.displayName||"Context")+".Provider";case Hm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case qm:return e=t.displayName||null,e!==null?e:ep(t.type)||"Memo";case ls:e=t._payload,t=t._init;try{return ep(t(e))}catch{}}return null}function JE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ep(e);case 8:return e===Wm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ts(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Y1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function QE(t){var e=Y1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function fc(t){t._valueTracker||(t._valueTracker=QE(t))}function X1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Y1(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Lu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function tp(t,e){var n=e.checked;return it({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ux(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ts(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function J1(t,e){e=e.checked,e!=null&&Vm(t,"checked",e,!1)}function np(t,e){J1(t,e);var n=Ts(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?rp(t,e.type,n):e.hasOwnProperty("defaultValue")&&rp(t,e.type,Ts(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Vx(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function rp(t,e,n){(e!=="number"||Lu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ka=Array.isArray;function xo(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ts(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function sp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(re(91));return it({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Wx(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(re(92));if(ka(n)){if(1<n.length)throw Error(re(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ts(n)}}function Q1(t,e){var n=Ts(e.value),r=Ts(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Hx(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Z1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ip(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Z1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var pc,e_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(pc=pc||document.createElement("div"),pc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=pc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function el(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ta={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ZE=["Webkit","ms","Moz","O"];Object.keys(Ta).forEach(function(t){ZE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ta[e]=Ta[t]})});function t_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ta.hasOwnProperty(t)&&Ta[t]?(""+e).trim():e+"px"}function n_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=t_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var eN=it({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function op(t,e){if(e){if(eN[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(re(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(re(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(re(61))}if(e.style!=null&&typeof e.style!="object")throw Error(re(62))}}function ap(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lp=null;function Km(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var cp=null,yo=null,vo=null;function qx(t){if(t=Rl(t)){if(typeof cp!="function")throw Error(re(280));var e=t.stateNode;e&&(e=Ld(e),cp(t.stateNode,t.type,e))}}function r_(t){yo?vo?vo.push(t):vo=[t]:yo=t}function s_(){if(yo){var t=yo,e=vo;if(vo=yo=null,qx(t),e)for(t=0;t<e.length;t++)qx(e[t])}}function i_(t,e){return t(e)}function o_(){}var Hh=!1;function a_(t,e,n){if(Hh)return t(e,n);Hh=!0;try{return i_(t,e,n)}finally{Hh=!1,(yo!==null||vo!==null)&&(o_(),s_())}}function tl(t,e){var n=t.stateNode;if(n===null)return null;var r=Ld(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(re(231,e,typeof n));return n}var up=!1;if(zr)try{var sa={};Object.defineProperty(sa,"passive",{get:function(){up=!0}}),window.addEventListener("test",sa,sa),window.removeEventListener("test",sa,sa)}catch{up=!1}function tN(t,e,n,r,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var Oa=!1,Bu=null,$u=!1,dp=null,nN={onError:function(t){Oa=!0,Bu=t}};function rN(t,e,n,r,s,i,o,l,c){Oa=!1,Bu=null,tN.apply(nN,arguments)}function sN(t,e,n,r,s,i,o,l,c){if(rN.apply(this,arguments),Oa){if(Oa){var u=Bu;Oa=!1,Bu=null}else throw Error(re(198));$u||($u=!0,dp=u)}}function Di(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function l_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Kx(t){if(Di(t)!==t)throw Error(re(188))}function iN(t){var e=t.alternate;if(!e){if(e=Di(t),e===null)throw Error(re(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Kx(s),t;if(i===r)return Kx(s),e;i=i.sibling}throw Error(re(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(re(189))}}if(n.alternate!==r)throw Error(re(190))}if(n.tag!==3)throw Error(re(188));return n.stateNode.current===n?t:e}function c_(t){return t=iN(t),t!==null?u_(t):null}function u_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=u_(t);if(e!==null)return e;t=t.sibling}return null}var d_=Cn.unstable_scheduleCallback,Gx=Cn.unstable_cancelCallback,oN=Cn.unstable_shouldYield,aN=Cn.unstable_requestPaint,dt=Cn.unstable_now,lN=Cn.unstable_getCurrentPriorityLevel,Gm=Cn.unstable_ImmediatePriority,h_=Cn.unstable_UserBlockingPriority,zu=Cn.unstable_NormalPriority,cN=Cn.unstable_LowPriority,f_=Cn.unstable_IdlePriority,Rd=null,gr=null;function uN(t){if(gr&&typeof gr.onCommitFiberRoot=="function")try{gr.onCommitFiberRoot(Rd,t,void 0,(t.current.flags&128)===128)}catch{}}var tr=Math.clz32?Math.clz32:fN,dN=Math.log,hN=Math.LN2;function fN(t){return t>>>=0,t===0?32:31-(dN(t)/hN|0)|0}var mc=64,gc=4194304;function Sa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Uu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Sa(l):(i&=o,i!==0&&(r=Sa(i)))}else o=n&~s,o!==0?r=Sa(o):i!==0&&(r=Sa(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-tr(e),s=1<<n,r|=t[n],e&=~s;return r}function pN(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mN(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-tr(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=pN(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function hp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function p_(){var t=mc;return mc<<=1,!(mc&4194240)&&(mc=64),t}function qh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Tl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-tr(e),t[e]=n}function gN(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-tr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Ym(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-tr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var $e=0;function m_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var g_,Xm,x_,y_,v_,fp=!1,xc=[],_s=null,ks=null,Ss=null,nl=new Map,rl=new Map,hs=[],xN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Yx(t,e){switch(t){case"focusin":case"focusout":_s=null;break;case"dragenter":case"dragleave":ks=null;break;case"mouseover":case"mouseout":Ss=null;break;case"pointerover":case"pointerout":nl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":rl.delete(e.pointerId)}}function ia(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Rl(e),e!==null&&Xm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function yN(t,e,n,r,s){switch(e){case"focusin":return _s=ia(_s,t,e,n,r,s),!0;case"dragenter":return ks=ia(ks,t,e,n,r,s),!0;case"mouseover":return Ss=ia(Ss,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return nl.set(i,ia(nl.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,rl.set(i,ia(rl.get(i)||null,t,e,n,r,s)),!0}return!1}function b_(t){var e=di(t.target);if(e!==null){var n=Di(e);if(n!==null){if(e=n.tag,e===13){if(e=l_(n),e!==null){t.blockedOn=e,v_(t.priority,function(){x_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function fu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=pp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);lp=r,n.target.dispatchEvent(r),lp=null}else return e=Rl(n),e!==null&&Xm(e),t.blockedOn=n,!1;e.shift()}return!0}function Xx(t,e,n){fu(t)&&n.delete(e)}function vN(){fp=!1,_s!==null&&fu(_s)&&(_s=null),ks!==null&&fu(ks)&&(ks=null),Ss!==null&&fu(Ss)&&(Ss=null),nl.forEach(Xx),rl.forEach(Xx)}function oa(t,e){t.blockedOn===e&&(t.blockedOn=null,fp||(fp=!0,Cn.unstable_scheduleCallback(Cn.unstable_NormalPriority,vN)))}function sl(t){function e(s){return oa(s,t)}if(0<xc.length){oa(xc[0],t);for(var n=1;n<xc.length;n++){var r=xc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(_s!==null&&oa(_s,t),ks!==null&&oa(ks,t),Ss!==null&&oa(Ss,t),nl.forEach(e),rl.forEach(e),n=0;n<hs.length;n++)r=hs[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<hs.length&&(n=hs[0],n.blockedOn===null);)b_(n),n.blockedOn===null&&hs.shift()}var bo=Jr.ReactCurrentBatchConfig,Vu=!0;function bN(t,e,n,r){var s=$e,i=bo.transition;bo.transition=null;try{$e=1,Jm(t,e,n,r)}finally{$e=s,bo.transition=i}}function wN(t,e,n,r){var s=$e,i=bo.transition;bo.transition=null;try{$e=4,Jm(t,e,n,r)}finally{$e=s,bo.transition=i}}function Jm(t,e,n,r){if(Vu){var s=pp(t,e,n,r);if(s===null)nf(t,e,r,Wu,n),Yx(t,r);else if(yN(s,t,e,n,r))r.stopPropagation();else if(Yx(t,r),e&4&&-1<xN.indexOf(t)){for(;s!==null;){var i=Rl(s);if(i!==null&&g_(i),i=pp(t,e,n,r),i===null&&nf(t,e,r,Wu,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else nf(t,e,r,null,n)}}var Wu=null;function pp(t,e,n,r){if(Wu=null,t=Km(r),t=di(t),t!==null)if(e=Di(t),e===null)t=null;else if(n=e.tag,n===13){if(t=l_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Wu=t,null}function w_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lN()){case Gm:return 1;case h_:return 4;case zu:case cN:return 16;case f_:return 536870912;default:return 16}default:return 16}}var ms=null,Qm=null,pu=null;function __(){if(pu)return pu;var t,e=Qm,n=e.length,r,s="value"in ms?ms.value:ms.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return pu=s.slice(t,1<r?1-r:void 0)}function mu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function yc(){return!0}function Jx(){return!1}function En(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?yc:Jx,this.isPropagationStopped=Jx,this}return it(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=yc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=yc)},persist:function(){},isPersistent:yc}),e}var Ho={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zm=En(Ho),Ol=it({},Ho,{view:0,detail:0}),_N=En(Ol),Kh,Gh,aa,Fd=it({},Ol,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:eg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==aa&&(aa&&t.type==="mousemove"?(Kh=t.screenX-aa.screenX,Gh=t.screenY-aa.screenY):Gh=Kh=0,aa=t),Kh)},movementY:function(t){return"movementY"in t?t.movementY:Gh}}),Qx=En(Fd),kN=it({},Fd,{dataTransfer:0}),SN=En(kN),CN=it({},Ol,{relatedTarget:0}),Yh=En(CN),jN=it({},Ho,{animationName:0,elapsedTime:0,pseudoElement:0}),EN=En(jN),NN=it({},Ho,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),AN=En(NN),PN=it({},Ho,{data:0}),Zx=En(PN),DN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},TN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ON={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function RN(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ON[t])?!!e[t]:!1}function eg(){return RN}var FN=it({},Ol,{key:function(t){if(t.key){var e=DN[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=mu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?TN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:eg,charCode:function(t){return t.type==="keypress"?mu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?mu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),IN=En(FN),MN=it({},Fd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ey=En(MN),LN=it({},Ol,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:eg}),BN=En(LN),$N=it({},Ho,{propertyName:0,elapsedTime:0,pseudoElement:0}),zN=En($N),UN=it({},Fd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),VN=En(UN),WN=[9,13,27,32],tg=zr&&"CompositionEvent"in window,Ra=null;zr&&"documentMode"in document&&(Ra=document.documentMode);var HN=zr&&"TextEvent"in window&&!Ra,k_=zr&&(!tg||Ra&&8<Ra&&11>=Ra),ty=String.fromCharCode(32),ny=!1;function S_(t,e){switch(t){case"keyup":return WN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function C_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var io=!1;function qN(t,e){switch(t){case"compositionend":return C_(e);case"keypress":return e.which!==32?null:(ny=!0,ty);case"textInput":return t=e.data,t===ty&&ny?null:t;default:return null}}function KN(t,e){if(io)return t==="compositionend"||!tg&&S_(t,e)?(t=__(),pu=Qm=ms=null,io=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return k_&&e.locale!=="ko"?null:e.data;default:return null}}var GN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ry(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!GN[t.type]:e==="textarea"}function j_(t,e,n,r){r_(r),e=Hu(e,"onChange"),0<e.length&&(n=new Zm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Fa=null,il=null;function YN(t){M_(t,0)}function Id(t){var e=lo(t);if(X1(e))return t}function XN(t,e){if(t==="change")return e}var E_=!1;if(zr){var Xh;if(zr){var Jh="oninput"in document;if(!Jh){var sy=document.createElement("div");sy.setAttribute("oninput","return;"),Jh=typeof sy.oninput=="function"}Xh=Jh}else Xh=!1;E_=Xh&&(!document.documentMode||9<document.documentMode)}function iy(){Fa&&(Fa.detachEvent("onpropertychange",N_),il=Fa=null)}function N_(t){if(t.propertyName==="value"&&Id(il)){var e=[];j_(e,il,t,Km(t)),a_(YN,e)}}function JN(t,e,n){t==="focusin"?(iy(),Fa=e,il=n,Fa.attachEvent("onpropertychange",N_)):t==="focusout"&&iy()}function QN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Id(il)}function ZN(t,e){if(t==="click")return Id(e)}function eA(t,e){if(t==="input"||t==="change")return Id(e)}function tA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var rr=typeof Object.is=="function"?Object.is:tA;function ol(t,e){if(rr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!X0.call(e,s)||!rr(t[s],e[s]))return!1}return!0}function oy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ay(t,e){var n=oy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=oy(n)}}function A_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?A_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function P_(){for(var t=window,e=Lu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Lu(t.document)}return e}function ng(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function nA(t){var e=P_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&A_(n.ownerDocument.documentElement,n)){if(r!==null&&ng(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=ay(n,i);var o=ay(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var rA=zr&&"documentMode"in document&&11>=document.documentMode,oo=null,mp=null,Ia=null,gp=!1;function ly(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;gp||oo==null||oo!==Lu(r)||(r=oo,"selectionStart"in r&&ng(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ia&&ol(Ia,r)||(Ia=r,r=Hu(mp,"onSelect"),0<r.length&&(e=new Zm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=oo)))}function vc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ao={animationend:vc("Animation","AnimationEnd"),animationiteration:vc("Animation","AnimationIteration"),animationstart:vc("Animation","AnimationStart"),transitionend:vc("Transition","TransitionEnd")},Qh={},D_={};zr&&(D_=document.createElement("div").style,"AnimationEvent"in window||(delete ao.animationend.animation,delete ao.animationiteration.animation,delete ao.animationstart.animation),"TransitionEvent"in window||delete ao.transitionend.transition);function Md(t){if(Qh[t])return Qh[t];if(!ao[t])return t;var e=ao[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in D_)return Qh[t]=e[n];return t}var T_=Md("animationend"),O_=Md("animationiteration"),R_=Md("animationstart"),F_=Md("transitionend"),I_=new Map,cy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zs(t,e){I_.set(t,e),Pi(e,[t])}for(var Zh=0;Zh<cy.length;Zh++){var ef=cy[Zh],sA=ef.toLowerCase(),iA=ef[0].toUpperCase()+ef.slice(1);zs(sA,"on"+iA)}zs(T_,"onAnimationEnd");zs(O_,"onAnimationIteration");zs(R_,"onAnimationStart");zs("dblclick","onDoubleClick");zs("focusin","onFocus");zs("focusout","onBlur");zs(F_,"onTransitionEnd");No("onMouseEnter",["mouseout","mouseover"]);No("onMouseLeave",["mouseout","mouseover"]);No("onPointerEnter",["pointerout","pointerover"]);No("onPointerLeave",["pointerout","pointerover"]);Pi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Pi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Pi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Pi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Pi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Pi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ca="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oA=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ca));function uy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,sN(r,e,void 0,t),t.currentTarget=null}function M_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;uy(s,l,u),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;uy(s,l,u),i=c}}}if($u)throw t=dp,$u=!1,dp=null,t}function Ye(t,e){var n=e[wp];n===void 0&&(n=e[wp]=new Set);var r=t+"__bubble";n.has(r)||(L_(e,t,2,!1),n.add(r))}function tf(t,e,n){var r=0;e&&(r|=4),L_(n,t,r,e)}var bc="_reactListening"+Math.random().toString(36).slice(2);function al(t){if(!t[bc]){t[bc]=!0,H1.forEach(function(n){n!=="selectionchange"&&(oA.has(n)||tf(n,!1,t),tf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[bc]||(e[bc]=!0,tf("selectionchange",!1,e))}}function L_(t,e,n,r){switch(w_(e)){case 1:var s=bN;break;case 4:s=wN;break;default:s=Jm}n=s.bind(null,e,n,t),s=void 0,!up||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function nf(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=di(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}a_(function(){var u=i,d=Km(n),h=[];e:{var f=I_.get(t);if(f!==void 0){var p=Zm,x=t;switch(t){case"keypress":if(mu(n)===0)break e;case"keydown":case"keyup":p=IN;break;case"focusin":x="focus",p=Yh;break;case"focusout":x="blur",p=Yh;break;case"beforeblur":case"afterblur":p=Yh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Qx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=SN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=BN;break;case T_:case O_:case R_:p=EN;break;case F_:p=zN;break;case"scroll":p=_N;break;case"wheel":p=VN;break;case"copy":case"cut":case"paste":p=AN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=ey}var m=(e&4)!==0,v=!m&&t==="scroll",y=m?f!==null?f+"Capture":null:f;m=[];for(var g=u,b;g!==null;){b=g;var _=b.stateNode;if(b.tag===5&&_!==null&&(b=_,y!==null&&(_=tl(g,y),_!=null&&m.push(ll(g,_,b)))),v)break;g=g.return}0<m.length&&(f=new p(f,x,null,n,d),h.push({event:f,listeners:m}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==lp&&(x=n.relatedTarget||n.fromElement)&&(di(x)||x[Ur]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(x=n.relatedTarget||n.toElement,p=u,x=x?di(x):null,x!==null&&(v=Di(x),x!==v||x.tag!==5&&x.tag!==6)&&(x=null)):(p=null,x=u),p!==x)){if(m=Qx,_="onMouseLeave",y="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(m=ey,_="onPointerLeave",y="onPointerEnter",g="pointer"),v=p==null?f:lo(p),b=x==null?f:lo(x),f=new m(_,g+"leave",p,n,d),f.target=v,f.relatedTarget=b,_=null,di(d)===u&&(m=new m(y,g+"enter",x,n,d),m.target=b,m.relatedTarget=v,_=m),v=_,p&&x)t:{for(m=p,y=x,g=0,b=m;b;b=zi(b))g++;for(b=0,_=y;_;_=zi(_))b++;for(;0<g-b;)m=zi(m),g--;for(;0<b-g;)y=zi(y),b--;for(;g--;){if(m===y||y!==null&&m===y.alternate)break t;m=zi(m),y=zi(y)}m=null}else m=null;p!==null&&dy(h,f,p,m,!1),x!==null&&v!==null&&dy(h,v,x,m,!0)}}e:{if(f=u?lo(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var C=XN;else if(ry(f))if(E_)C=eA;else{C=QN;var N=JN}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=ZN);if(C&&(C=C(t,u))){j_(h,C,n,d);break e}N&&N(t,f,u),t==="focusout"&&(N=f._wrapperState)&&N.controlled&&f.type==="number"&&rp(f,"number",f.value)}switch(N=u?lo(u):window,t){case"focusin":(ry(N)||N.contentEditable==="true")&&(oo=N,mp=u,Ia=null);break;case"focusout":Ia=mp=oo=null;break;case"mousedown":gp=!0;break;case"contextmenu":case"mouseup":case"dragend":gp=!1,ly(h,n,d);break;case"selectionchange":if(rA)break;case"keydown":case"keyup":ly(h,n,d)}var j;if(tg)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else io?S_(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(k_&&n.locale!=="ko"&&(io||w!=="onCompositionStart"?w==="onCompositionEnd"&&io&&(j=__()):(ms=d,Qm="value"in ms?ms.value:ms.textContent,io=!0)),N=Hu(u,w),0<N.length&&(w=new Zx(w,t,null,n,d),h.push({event:w,listeners:N}),j?w.data=j:(j=C_(n),j!==null&&(w.data=j)))),(j=HN?qN(t,n):KN(t,n))&&(u=Hu(u,"onBeforeInput"),0<u.length&&(d=new Zx("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=j))}M_(h,e)})}function ll(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Hu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=tl(t,n),i!=null&&r.unshift(ll(t,i,s)),i=tl(t,e),i!=null&&r.push(ll(t,i,s))),t=t.return}return r}function zi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function dy(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=tl(n,i),c!=null&&o.unshift(ll(n,c,l))):s||(c=tl(n,i),c!=null&&o.push(ll(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var aA=/\r\n?/g,lA=/\u0000|\uFFFD/g;function hy(t){return(typeof t=="string"?t:""+t).replace(aA,`
`).replace(lA,"")}function wc(t,e,n){if(e=hy(e),hy(t)!==e&&n)throw Error(re(425))}function qu(){}var xp=null,yp=null;function vp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var bp=typeof setTimeout=="function"?setTimeout:void 0,cA=typeof clearTimeout=="function"?clearTimeout:void 0,fy=typeof Promise=="function"?Promise:void 0,uA=typeof queueMicrotask=="function"?queueMicrotask:typeof fy<"u"?function(t){return fy.resolve(null).then(t).catch(dA)}:bp;function dA(t){setTimeout(function(){throw t})}function rf(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),sl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);sl(e)}function Cs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function py(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var qo=Math.random().toString(36).slice(2),fr="__reactFiber$"+qo,cl="__reactProps$"+qo,Ur="__reactContainer$"+qo,wp="__reactEvents$"+qo,hA="__reactListeners$"+qo,fA="__reactHandles$"+qo;function di(t){var e=t[fr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ur]||n[fr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=py(t);t!==null;){if(n=t[fr])return n;t=py(t)}return e}t=n,n=t.parentNode}return null}function Rl(t){return t=t[fr]||t[Ur],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function lo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(re(33))}function Ld(t){return t[cl]||null}var _p=[],co=-1;function Us(t){return{current:t}}function Xe(t){0>co||(t.current=_p[co],_p[co]=null,co--)}function Ke(t,e){co++,_p[co]=t.current,t.current=e}var Os={},Lt=Us(Os),rn=Us(!1),bi=Os;function Ao(t,e){var n=t.type.contextTypes;if(!n)return Os;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function sn(t){return t=t.childContextTypes,t!=null}function Ku(){Xe(rn),Xe(Lt)}function my(t,e,n){if(Lt.current!==Os)throw Error(re(168));Ke(Lt,e),Ke(rn,n)}function B_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(re(108,JE(t)||"Unknown",s));return it({},n,r)}function Gu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Os,bi=Lt.current,Ke(Lt,t),Ke(rn,rn.current),!0}function gy(t,e,n){var r=t.stateNode;if(!r)throw Error(re(169));n?(t=B_(t,e,bi),r.__reactInternalMemoizedMergedChildContext=t,Xe(rn),Xe(Lt),Ke(Lt,t)):Xe(rn),Ke(rn,n)}var Or=null,Bd=!1,sf=!1;function $_(t){Or===null?Or=[t]:Or.push(t)}function pA(t){Bd=!0,$_(t)}function Vs(){if(!sf&&Or!==null){sf=!0;var t=0,e=$e;try{var n=Or;for($e=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Or=null,Bd=!1}catch(s){throw Or!==null&&(Or=Or.slice(t+1)),d_(Gm,Vs),s}finally{$e=e,sf=!1}}return null}var uo=[],ho=0,Yu=null,Xu=0,Pn=[],Dn=0,wi=null,Ir=1,Mr="";function si(t,e){uo[ho++]=Xu,uo[ho++]=Yu,Yu=t,Xu=e}function z_(t,e,n){Pn[Dn++]=Ir,Pn[Dn++]=Mr,Pn[Dn++]=wi,wi=t;var r=Ir;t=Mr;var s=32-tr(r)-1;r&=~(1<<s),n+=1;var i=32-tr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Ir=1<<32-tr(e)+s|n<<s|r,Mr=i+t}else Ir=1<<i|n<<s|r,Mr=t}function rg(t){t.return!==null&&(si(t,1),z_(t,1,0))}function sg(t){for(;t===Yu;)Yu=uo[--ho],uo[ho]=null,Xu=uo[--ho],uo[ho]=null;for(;t===wi;)wi=Pn[--Dn],Pn[Dn]=null,Mr=Pn[--Dn],Pn[Dn]=null,Ir=Pn[--Dn],Pn[Dn]=null}var _n=null,bn=null,et=!1,Yn=null;function U_(t,e){var n=On(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function xy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,_n=t,bn=Cs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,_n=t,bn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=wi!==null?{id:Ir,overflow:Mr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=On(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,_n=t,bn=null,!0):!1;default:return!1}}function kp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Sp(t){if(et){var e=bn;if(e){var n=e;if(!xy(t,e)){if(kp(t))throw Error(re(418));e=Cs(n.nextSibling);var r=_n;e&&xy(t,e)?U_(r,n):(t.flags=t.flags&-4097|2,et=!1,_n=t)}}else{if(kp(t))throw Error(re(418));t.flags=t.flags&-4097|2,et=!1,_n=t}}}function yy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;_n=t}function _c(t){if(t!==_n)return!1;if(!et)return yy(t),et=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!vp(t.type,t.memoizedProps)),e&&(e=bn)){if(kp(t))throw V_(),Error(re(418));for(;e;)U_(t,e),e=Cs(e.nextSibling)}if(yy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(re(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){bn=Cs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}bn=null}}else bn=_n?Cs(t.stateNode.nextSibling):null;return!0}function V_(){for(var t=bn;t;)t=Cs(t.nextSibling)}function Po(){bn=_n=null,et=!1}function ig(t){Yn===null?Yn=[t]:Yn.push(t)}var mA=Jr.ReactCurrentBatchConfig;function la(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(re(309));var r=n.stateNode}if(!r)throw Error(re(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(re(284));if(!n._owner)throw Error(re(290,t))}return t}function kc(t,e){throw t=Object.prototype.toString.call(e),Error(re(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function vy(t){var e=t._init;return e(t._payload)}function W_(t){function e(y,g){if(t){var b=y.deletions;b===null?(y.deletions=[g],y.flags|=16):b.push(g)}}function n(y,g){if(!t)return null;for(;g!==null;)e(y,g),g=g.sibling;return null}function r(y,g){for(y=new Map;g!==null;)g.key!==null?y.set(g.key,g):y.set(g.index,g),g=g.sibling;return y}function s(y,g){return y=As(y,g),y.index=0,y.sibling=null,y}function i(y,g,b){return y.index=b,t?(b=y.alternate,b!==null?(b=b.index,b<g?(y.flags|=2,g):b):(y.flags|=2,g)):(y.flags|=1048576,g)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function l(y,g,b,_){return g===null||g.tag!==6?(g=hf(b,y.mode,_),g.return=y,g):(g=s(g,b),g.return=y,g)}function c(y,g,b,_){var C=b.type;return C===so?d(y,g,b.props.children,_,b.key):g!==null&&(g.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===ls&&vy(C)===g.type)?(_=s(g,b.props),_.ref=la(y,g,b),_.return=y,_):(_=_u(b.type,b.key,b.props,null,y.mode,_),_.ref=la(y,g,b),_.return=y,_)}function u(y,g,b,_){return g===null||g.tag!==4||g.stateNode.containerInfo!==b.containerInfo||g.stateNode.implementation!==b.implementation?(g=ff(b,y.mode,_),g.return=y,g):(g=s(g,b.children||[]),g.return=y,g)}function d(y,g,b,_,C){return g===null||g.tag!==7?(g=xi(b,y.mode,_,C),g.return=y,g):(g=s(g,b),g.return=y,g)}function h(y,g,b){if(typeof g=="string"&&g!==""||typeof g=="number")return g=hf(""+g,y.mode,b),g.return=y,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case hc:return b=_u(g.type,g.key,g.props,null,y.mode,b),b.ref=la(y,null,g),b.return=y,b;case ro:return g=ff(g,y.mode,b),g.return=y,g;case ls:var _=g._init;return h(y,_(g._payload),b)}if(ka(g)||ra(g))return g=xi(g,y.mode,b,null),g.return=y,g;kc(y,g)}return null}function f(y,g,b,_){var C=g!==null?g.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return C!==null?null:l(y,g,""+b,_);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case hc:return b.key===C?c(y,g,b,_):null;case ro:return b.key===C?u(y,g,b,_):null;case ls:return C=b._init,f(y,g,C(b._payload),_)}if(ka(b)||ra(b))return C!==null?null:d(y,g,b,_,null);kc(y,b)}return null}function p(y,g,b,_,C){if(typeof _=="string"&&_!==""||typeof _=="number")return y=y.get(b)||null,l(g,y,""+_,C);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case hc:return y=y.get(_.key===null?b:_.key)||null,c(g,y,_,C);case ro:return y=y.get(_.key===null?b:_.key)||null,u(g,y,_,C);case ls:var N=_._init;return p(y,g,b,N(_._payload),C)}if(ka(_)||ra(_))return y=y.get(b)||null,d(g,y,_,C,null);kc(g,_)}return null}function x(y,g,b,_){for(var C=null,N=null,j=g,w=g=0,k=null;j!==null&&w<b.length;w++){j.index>w?(k=j,j=null):k=j.sibling;var E=f(y,j,b[w],_);if(E===null){j===null&&(j=k);break}t&&j&&E.alternate===null&&e(y,j),g=i(E,g,w),N===null?C=E:N.sibling=E,N=E,j=k}if(w===b.length)return n(y,j),et&&si(y,w),C;if(j===null){for(;w<b.length;w++)j=h(y,b[w],_),j!==null&&(g=i(j,g,w),N===null?C=j:N.sibling=j,N=j);return et&&si(y,w),C}for(j=r(y,j);w<b.length;w++)k=p(j,y,w,b[w],_),k!==null&&(t&&k.alternate!==null&&j.delete(k.key===null?w:k.key),g=i(k,g,w),N===null?C=k:N.sibling=k,N=k);return t&&j.forEach(function(P){return e(y,P)}),et&&si(y,w),C}function m(y,g,b,_){var C=ra(b);if(typeof C!="function")throw Error(re(150));if(b=C.call(b),b==null)throw Error(re(151));for(var N=C=null,j=g,w=g=0,k=null,E=b.next();j!==null&&!E.done;w++,E=b.next()){j.index>w?(k=j,j=null):k=j.sibling;var P=f(y,j,E.value,_);if(P===null){j===null&&(j=k);break}t&&j&&P.alternate===null&&e(y,j),g=i(P,g,w),N===null?C=P:N.sibling=P,N=P,j=k}if(E.done)return n(y,j),et&&si(y,w),C;if(j===null){for(;!E.done;w++,E=b.next())E=h(y,E.value,_),E!==null&&(g=i(E,g,w),N===null?C=E:N.sibling=E,N=E);return et&&si(y,w),C}for(j=r(y,j);!E.done;w++,E=b.next())E=p(j,y,w,E.value,_),E!==null&&(t&&E.alternate!==null&&j.delete(E.key===null?w:E.key),g=i(E,g,w),N===null?C=E:N.sibling=E,N=E);return t&&j.forEach(function(A){return e(y,A)}),et&&si(y,w),C}function v(y,g,b,_){if(typeof b=="object"&&b!==null&&b.type===so&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case hc:e:{for(var C=b.key,N=g;N!==null;){if(N.key===C){if(C=b.type,C===so){if(N.tag===7){n(y,N.sibling),g=s(N,b.props.children),g.return=y,y=g;break e}}else if(N.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===ls&&vy(C)===N.type){n(y,N.sibling),g=s(N,b.props),g.ref=la(y,N,b),g.return=y,y=g;break e}n(y,N);break}else e(y,N);N=N.sibling}b.type===so?(g=xi(b.props.children,y.mode,_,b.key),g.return=y,y=g):(_=_u(b.type,b.key,b.props,null,y.mode,_),_.ref=la(y,g,b),_.return=y,y=_)}return o(y);case ro:e:{for(N=b.key;g!==null;){if(g.key===N)if(g.tag===4&&g.stateNode.containerInfo===b.containerInfo&&g.stateNode.implementation===b.implementation){n(y,g.sibling),g=s(g,b.children||[]),g.return=y,y=g;break e}else{n(y,g);break}else e(y,g);g=g.sibling}g=ff(b,y.mode,_),g.return=y,y=g}return o(y);case ls:return N=b._init,v(y,g,N(b._payload),_)}if(ka(b))return x(y,g,b,_);if(ra(b))return m(y,g,b,_);kc(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,g!==null&&g.tag===6?(n(y,g.sibling),g=s(g,b),g.return=y,y=g):(n(y,g),g=hf(b,y.mode,_),g.return=y,y=g),o(y)):n(y,g)}return v}var Do=W_(!0),H_=W_(!1),Ju=Us(null),Qu=null,fo=null,og=null;function ag(){og=fo=Qu=null}function lg(t){var e=Ju.current;Xe(Ju),t._currentValue=e}function Cp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function wo(t,e){Qu=t,og=fo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(nn=!0),t.firstContext=null)}function Bn(t){var e=t._currentValue;if(og!==t)if(t={context:t,memoizedValue:e,next:null},fo===null){if(Qu===null)throw Error(re(308));fo=t,Qu.dependencies={lanes:0,firstContext:t}}else fo=fo.next=t;return e}var hi=null;function cg(t){hi===null?hi=[t]:hi.push(t)}function q_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,cg(e)):(n.next=s.next,s.next=n),e.interleaved=n,Vr(t,r)}function Vr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var cs=!1;function ug(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function K_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function $r(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function js(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Fe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Vr(t,n)}return s=r.interleaved,s===null?(e.next=e,cg(r)):(e.next=s.next,s.next=e),r.interleaved=e,Vr(t,n)}function gu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ym(t,n)}}function by(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Zu(t,e,n,r){var s=t.updateQueue;cs=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;o=0,d=u=c=null,l=i;do{var f=l.lane,p=l.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=t,m=l;switch(f=e,p=n,m.tag){case 1:if(x=m.payload,typeof x=="function"){h=x.call(p,h,f);break e}h=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=m.payload,f=typeof x=="function"?x.call(p,h,f):x,f==null)break e;h=it({},h,f);break e;case 2:cs=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=p,c=h):d=d.next=p,o|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(1);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ki|=o,t.lanes=o,t.memoizedState=h}}function wy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(re(191,s));s.call(r)}}}var Fl={},xr=Us(Fl),ul=Us(Fl),dl=Us(Fl);function fi(t){if(t===Fl)throw Error(re(174));return t}function dg(t,e){switch(Ke(dl,e),Ke(ul,t),Ke(xr,Fl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ip(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ip(e,t)}Xe(xr),Ke(xr,e)}function To(){Xe(xr),Xe(ul),Xe(dl)}function G_(t){fi(dl.current);var e=fi(xr.current),n=ip(e,t.type);e!==n&&(Ke(ul,t),Ke(xr,n))}function hg(t){ul.current===t&&(Xe(xr),Xe(ul))}var rt=Us(0);function ed(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var of=[];function fg(){for(var t=0;t<of.length;t++)of[t]._workInProgressVersionPrimary=null;of.length=0}var xu=Jr.ReactCurrentDispatcher,af=Jr.ReactCurrentBatchConfig,_i=0,st=null,vt=null,Ct=null,td=!1,Ma=!1,hl=0,gA=0;function Ot(){throw Error(re(321))}function pg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!rr(t[n],e[n]))return!1;return!0}function mg(t,e,n,r,s,i){if(_i=i,st=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,xu.current=t===null||t.memoizedState===null?bA:wA,t=n(r,s),Ma){i=0;do{if(Ma=!1,hl=0,25<=i)throw Error(re(301));i+=1,Ct=vt=null,e.updateQueue=null,xu.current=_A,t=n(r,s)}while(Ma)}if(xu.current=nd,e=vt!==null&&vt.next!==null,_i=0,Ct=vt=st=null,td=!1,e)throw Error(re(300));return t}function gg(){var t=hl!==0;return hl=0,t}function ur(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?st.memoizedState=Ct=t:Ct=Ct.next=t,Ct}function $n(){if(vt===null){var t=st.alternate;t=t!==null?t.memoizedState:null}else t=vt.next;var e=Ct===null?st.memoizedState:Ct.next;if(e!==null)Ct=e,vt=t;else{if(t===null)throw Error(re(310));vt=t,t={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},Ct===null?st.memoizedState=Ct=t:Ct=Ct.next=t}return Ct}function fl(t,e){return typeof e=="function"?e(t):e}function lf(t){var e=$n(),n=e.queue;if(n===null)throw Error(re(311));n.lastRenderedReducer=t;var r=vt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((_i&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=r):c=c.next=h,st.lanes|=d,ki|=d}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=l,rr(r,e.memoizedState)||(nn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,st.lanes|=i,ki|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function cf(t){var e=$n(),n=e.queue;if(n===null)throw Error(re(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);rr(i,e.memoizedState)||(nn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Y_(){}function X_(t,e){var n=st,r=$n(),s=e(),i=!rr(r.memoizedState,s);if(i&&(r.memoizedState=s,nn=!0),r=r.queue,xg(Z_.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ct!==null&&Ct.memoizedState.tag&1){if(n.flags|=2048,pl(9,Q_.bind(null,n,r,s,e),void 0,null),jt===null)throw Error(re(349));_i&30||J_(n,e,s)}return s}function J_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=st.updateQueue,e===null?(e={lastEffect:null,stores:null},st.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Q_(t,e,n,r){e.value=n,e.getSnapshot=r,ek(e)&&tk(t)}function Z_(t,e,n){return n(function(){ek(e)&&tk(t)})}function ek(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!rr(t,n)}catch{return!0}}function tk(t){var e=Vr(t,1);e!==null&&nr(e,t,1,-1)}function _y(t){var e=ur();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fl,lastRenderedState:t},e.queue=t,t=t.dispatch=vA.bind(null,st,t),[e.memoizedState,t]}function pl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=st.updateQueue,e===null?(e={lastEffect:null,stores:null},st.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function nk(){return $n().memoizedState}function yu(t,e,n,r){var s=ur();st.flags|=t,s.memoizedState=pl(1|e,n,void 0,r===void 0?null:r)}function $d(t,e,n,r){var s=$n();r=r===void 0?null:r;var i=void 0;if(vt!==null){var o=vt.memoizedState;if(i=o.destroy,r!==null&&pg(r,o.deps)){s.memoizedState=pl(e,n,i,r);return}}st.flags|=t,s.memoizedState=pl(1|e,n,i,r)}function ky(t,e){return yu(8390656,8,t,e)}function xg(t,e){return $d(2048,8,t,e)}function rk(t,e){return $d(4,2,t,e)}function sk(t,e){return $d(4,4,t,e)}function ik(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function ok(t,e,n){return n=n!=null?n.concat([t]):null,$d(4,4,ik.bind(null,e,t),n)}function yg(){}function ak(t,e){var n=$n();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&pg(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function lk(t,e){var n=$n();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&pg(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ck(t,e,n){return _i&21?(rr(n,e)||(n=p_(),st.lanes|=n,ki|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,nn=!0),t.memoizedState=n)}function xA(t,e){var n=$e;$e=n!==0&&4>n?n:4,t(!0);var r=af.transition;af.transition={};try{t(!1),e()}finally{$e=n,af.transition=r}}function uk(){return $n().memoizedState}function yA(t,e,n){var r=Ns(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},dk(t))hk(e,n);else if(n=q_(t,e,n,r),n!==null){var s=Kt();nr(n,t,r,s),fk(n,e,r)}}function vA(t,e,n){var r=Ns(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(dk(t))hk(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,rr(l,o)){var c=e.interleaved;c===null?(s.next=s,cg(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=q_(t,e,s,r),n!==null&&(s=Kt(),nr(n,t,r,s),fk(n,e,r))}}function dk(t){var e=t.alternate;return t===st||e!==null&&e===st}function hk(t,e){Ma=td=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function fk(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ym(t,n)}}var nd={readContext:Bn,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useInsertionEffect:Ot,useLayoutEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useMutableSource:Ot,useSyncExternalStore:Ot,useId:Ot,unstable_isNewReconciler:!1},bA={readContext:Bn,useCallback:function(t,e){return ur().memoizedState=[t,e===void 0?null:e],t},useContext:Bn,useEffect:ky,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,yu(4194308,4,ik.bind(null,e,t),n)},useLayoutEffect:function(t,e){return yu(4194308,4,t,e)},useInsertionEffect:function(t,e){return yu(4,2,t,e)},useMemo:function(t,e){var n=ur();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ur();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=yA.bind(null,st,t),[r.memoizedState,t]},useRef:function(t){var e=ur();return t={current:t},e.memoizedState=t},useState:_y,useDebugValue:yg,useDeferredValue:function(t){return ur().memoizedState=t},useTransition:function(){var t=_y(!1),e=t[0];return t=xA.bind(null,t[1]),ur().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=st,s=ur();if(et){if(n===void 0)throw Error(re(407));n=n()}else{if(n=e(),jt===null)throw Error(re(349));_i&30||J_(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,ky(Z_.bind(null,r,i,t),[t]),r.flags|=2048,pl(9,Q_.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=ur(),e=jt.identifierPrefix;if(et){var n=Mr,r=Ir;n=(r&~(1<<32-tr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=hl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=gA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},wA={readContext:Bn,useCallback:ak,useContext:Bn,useEffect:xg,useImperativeHandle:ok,useInsertionEffect:rk,useLayoutEffect:sk,useMemo:lk,useReducer:lf,useRef:nk,useState:function(){return lf(fl)},useDebugValue:yg,useDeferredValue:function(t){var e=$n();return ck(e,vt.memoizedState,t)},useTransition:function(){var t=lf(fl)[0],e=$n().memoizedState;return[t,e]},useMutableSource:Y_,useSyncExternalStore:X_,useId:uk,unstable_isNewReconciler:!1},_A={readContext:Bn,useCallback:ak,useContext:Bn,useEffect:xg,useImperativeHandle:ok,useInsertionEffect:rk,useLayoutEffect:sk,useMemo:lk,useReducer:cf,useRef:nk,useState:function(){return cf(fl)},useDebugValue:yg,useDeferredValue:function(t){var e=$n();return vt===null?e.memoizedState=t:ck(e,vt.memoizedState,t)},useTransition:function(){var t=cf(fl)[0],e=$n().memoizedState;return[t,e]},useMutableSource:Y_,useSyncExternalStore:X_,useId:uk,unstable_isNewReconciler:!1};function Hn(t,e){if(t&&t.defaultProps){e=it({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function jp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:it({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var zd={isMounted:function(t){return(t=t._reactInternals)?Di(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Kt(),s=Ns(t),i=$r(r,s);i.payload=e,n!=null&&(i.callback=n),e=js(t,i,s),e!==null&&(nr(e,t,s,r),gu(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Kt(),s=Ns(t),i=$r(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=js(t,i,s),e!==null&&(nr(e,t,s,r),gu(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Kt(),r=Ns(t),s=$r(n,r);s.tag=2,e!=null&&(s.callback=e),e=js(t,s,r),e!==null&&(nr(e,t,r,n),gu(e,t,r))}};function Sy(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!ol(n,r)||!ol(s,i):!0}function pk(t,e,n){var r=!1,s=Os,i=e.contextType;return typeof i=="object"&&i!==null?i=Bn(i):(s=sn(e)?bi:Lt.current,r=e.contextTypes,i=(r=r!=null)?Ao(t,s):Os),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=zd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Cy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&zd.enqueueReplaceState(e,e.state,null)}function Ep(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},ug(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Bn(i):(i=sn(e)?bi:Lt.current,s.context=Ao(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(jp(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&zd.enqueueReplaceState(s,s.state,null),Zu(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Oo(t,e){try{var n="",r=e;do n+=XE(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function uf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Np(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var kA=typeof WeakMap=="function"?WeakMap:Map;function mk(t,e,n){n=$r(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){sd||(sd=!0,Lp=r),Np(t,e)},n}function gk(t,e,n){n=$r(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Np(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Np(t,e),typeof r!="function"&&(Es===null?Es=new Set([this]):Es.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function jy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new kA;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=MA.bind(null,t,e,n),e.then(t,t))}function Ey(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ny(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=$r(-1,1),e.tag=2,js(n,e,1))),n.lanes|=1),t)}var SA=Jr.ReactCurrentOwner,nn=!1;function Wt(t,e,n,r){e.child=t===null?H_(e,null,n,r):Do(e,t.child,n,r)}function Ay(t,e,n,r,s){n=n.render;var i=e.ref;return wo(e,s),r=mg(t,e,n,r,i,s),n=gg(),t!==null&&!nn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Wr(t,e,s)):(et&&n&&rg(e),e.flags|=1,Wt(t,e,r,s),e.child)}function Py(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!jg(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,xk(t,e,i,r,s)):(t=_u(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ol,n(o,r)&&t.ref===e.ref)return Wr(t,e,s)}return e.flags|=1,t=As(i,r),t.ref=e.ref,t.return=e,e.child=t}function xk(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ol(i,r)&&t.ref===e.ref)if(nn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(nn=!0);else return e.lanes=t.lanes,Wr(t,e,s)}return Ap(t,e,n,r,s)}function yk(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ke(mo,pn),pn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ke(mo,pn),pn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ke(mo,pn),pn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ke(mo,pn),pn|=r;return Wt(t,e,s,n),e.child}function vk(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ap(t,e,n,r,s){var i=sn(n)?bi:Lt.current;return i=Ao(e,i),wo(e,s),n=mg(t,e,n,r,i,s),r=gg(),t!==null&&!nn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Wr(t,e,s)):(et&&r&&rg(e),e.flags|=1,Wt(t,e,n,s),e.child)}function Dy(t,e,n,r,s){if(sn(n)){var i=!0;Gu(e)}else i=!1;if(wo(e,s),e.stateNode===null)vu(t,e),pk(e,n,r),Ep(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Bn(u):(u=sn(n)?bi:Lt.current,u=Ao(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&Cy(e,o,r,u),cs=!1;var f=e.memoizedState;o.state=f,Zu(e,r,o,s),c=e.memoizedState,l!==r||f!==c||rn.current||cs?(typeof d=="function"&&(jp(e,n,d,r),c=e.memoizedState),(l=cs||Sy(e,n,l,r,f,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,K_(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Hn(e.type,l),o.props=u,h=e.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Bn(c):(c=sn(n)?bi:Lt.current,c=Ao(e,c));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&Cy(e,o,r,c),cs=!1,f=e.memoizedState,o.state=f,Zu(e,r,o,s);var x=e.memoizedState;l!==h||f!==x||rn.current||cs?(typeof p=="function"&&(jp(e,n,p,r),x=e.memoizedState),(u=cs||Sy(e,n,u,r,f,x,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),o.props=r,o.state=x,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Pp(t,e,n,r,i,s)}function Pp(t,e,n,r,s,i){vk(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&gy(e,n,!1),Wr(t,e,i);r=e.stateNode,SA.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Do(e,t.child,null,i),e.child=Do(e,null,l,i)):Wt(t,e,l,i),e.memoizedState=r.state,s&&gy(e,n,!0),e.child}function bk(t){var e=t.stateNode;e.pendingContext?my(t,e.pendingContext,e.pendingContext!==e.context):e.context&&my(t,e.context,!1),dg(t,e.containerInfo)}function Ty(t,e,n,r,s){return Po(),ig(s),e.flags|=256,Wt(t,e,n,r),e.child}var Dp={dehydrated:null,treeContext:null,retryLane:0};function Tp(t){return{baseLanes:t,cachePool:null,transitions:null}}function wk(t,e,n){var r=e.pendingProps,s=rt.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ke(rt,s&1),t===null)return Sp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Wd(o,r,0,null),t=xi(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Tp(n),e.memoizedState=Dp,t):vg(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return CA(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=As(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=As(l,i):(i=xi(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Tp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Dp,r}return i=t.child,t=i.sibling,r=As(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function vg(t,e){return e=Wd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Sc(t,e,n,r){return r!==null&&ig(r),Do(e,t.child,null,n),t=vg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function CA(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=uf(Error(re(422))),Sc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Wd({mode:"visible",children:r.children},s,0,null),i=xi(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Do(e,t.child,null,o),e.child.memoizedState=Tp(o),e.memoizedState=Dp,i);if(!(e.mode&1))return Sc(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(re(419)),r=uf(i,r,void 0),Sc(t,e,o,r)}if(l=(o&t.childLanes)!==0,nn||l){if(r=jt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Vr(t,s),nr(r,t,s,-1))}return Cg(),r=uf(Error(re(421))),Sc(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=LA.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,bn=Cs(s.nextSibling),_n=e,et=!0,Yn=null,t!==null&&(Pn[Dn++]=Ir,Pn[Dn++]=Mr,Pn[Dn++]=wi,Ir=t.id,Mr=t.overflow,wi=e),e=vg(e,r.children),e.flags|=4096,e)}function Oy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Cp(t.return,e,n)}function df(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function _k(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Wt(t,e,r.children,n),r=rt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Oy(t,n,e);else if(t.tag===19)Oy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ke(rt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&ed(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),df(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ed(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}df(e,!0,n,null,i);break;case"together":df(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function vu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Wr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ki|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(re(153));if(e.child!==null){for(t=e.child,n=As(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=As(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function jA(t,e,n){switch(e.tag){case 3:bk(e),Po();break;case 5:G_(e);break;case 1:sn(e.type)&&Gu(e);break;case 4:dg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ke(Ju,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ke(rt,rt.current&1),e.flags|=128,null):n&e.child.childLanes?wk(t,e,n):(Ke(rt,rt.current&1),t=Wr(t,e,n),t!==null?t.sibling:null);Ke(rt,rt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return _k(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ke(rt,rt.current),r)break;return null;case 22:case 23:return e.lanes=0,yk(t,e,n)}return Wr(t,e,n)}var kk,Op,Sk,Ck;kk=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Op=function(){};Sk=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,fi(xr.current);var i=null;switch(n){case"input":s=tp(t,s),r=tp(t,r),i=[];break;case"select":s=it({},s,{value:void 0}),r=it({},r,{value:void 0}),i=[];break;case"textarea":s=sp(t,s),r=sp(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=qu)}op(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Za.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Za.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ye("scroll",t),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};Ck=function(t,e,n,r){n!==r&&(e.flags|=4)};function ca(t,e){if(!et)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Rt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function EA(t,e,n){var r=e.pendingProps;switch(sg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rt(e),null;case 1:return sn(e.type)&&Ku(),Rt(e),null;case 3:return r=e.stateNode,To(),Xe(rn),Xe(Lt),fg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(_c(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Yn!==null&&(zp(Yn),Yn=null))),Op(t,e),Rt(e),null;case 5:hg(e);var s=fi(dl.current);if(n=e.type,t!==null&&e.stateNode!=null)Sk(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(re(166));return Rt(e),null}if(t=fi(xr.current),_c(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[fr]=e,r[cl]=i,t=(e.mode&1)!==0,n){case"dialog":Ye("cancel",r),Ye("close",r);break;case"iframe":case"object":case"embed":Ye("load",r);break;case"video":case"audio":for(s=0;s<Ca.length;s++)Ye(Ca[s],r);break;case"source":Ye("error",r);break;case"img":case"image":case"link":Ye("error",r),Ye("load",r);break;case"details":Ye("toggle",r);break;case"input":Ux(r,i),Ye("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ye("invalid",r);break;case"textarea":Wx(r,i),Ye("invalid",r)}op(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&wc(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&wc(r.textContent,l,t),s=["children",""+l]):Za.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ye("scroll",r)}switch(n){case"input":fc(r),Vx(r,i,!0);break;case"textarea":fc(r),Hx(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=qu)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Z1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[fr]=e,t[cl]=r,kk(t,e,!1,!1),e.stateNode=t;e:{switch(o=ap(n,r),n){case"dialog":Ye("cancel",t),Ye("close",t),s=r;break;case"iframe":case"object":case"embed":Ye("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ca.length;s++)Ye(Ca[s],t);s=r;break;case"source":Ye("error",t),s=r;break;case"img":case"image":case"link":Ye("error",t),Ye("load",t),s=r;break;case"details":Ye("toggle",t),s=r;break;case"input":Ux(t,r),s=tp(t,r),Ye("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=it({},r,{value:void 0}),Ye("invalid",t);break;case"textarea":Wx(t,r),s=sp(t,r),Ye("invalid",t);break;default:s=r}op(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?n_(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&e_(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&el(t,c):typeof c=="number"&&el(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Za.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ye("scroll",t):c!=null&&Vm(t,i,c,o))}switch(n){case"input":fc(t),Vx(t,r,!1);break;case"textarea":fc(t),Hx(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ts(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?xo(t,!!r.multiple,i,!1):r.defaultValue!=null&&xo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=qu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Rt(e),null;case 6:if(t&&e.stateNode!=null)Ck(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(re(166));if(n=fi(dl.current),fi(xr.current),_c(e)){if(r=e.stateNode,n=e.memoizedProps,r[fr]=e,(i=r.nodeValue!==n)&&(t=_n,t!==null))switch(t.tag){case 3:wc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&wc(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[fr]=e,e.stateNode=r}return Rt(e),null;case 13:if(Xe(rt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(et&&bn!==null&&e.mode&1&&!(e.flags&128))V_(),Po(),e.flags|=98560,i=!1;else if(i=_c(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(re(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(re(317));i[fr]=e}else Po(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Rt(e),i=!1}else Yn!==null&&(zp(Yn),Yn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||rt.current&1?wt===0&&(wt=3):Cg())),e.updateQueue!==null&&(e.flags|=4),Rt(e),null);case 4:return To(),Op(t,e),t===null&&al(e.stateNode.containerInfo),Rt(e),null;case 10:return lg(e.type._context),Rt(e),null;case 17:return sn(e.type)&&Ku(),Rt(e),null;case 19:if(Xe(rt),i=e.memoizedState,i===null)return Rt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)ca(i,!1);else{if(wt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ed(t),o!==null){for(e.flags|=128,ca(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ke(rt,rt.current&1|2),e.child}t=t.sibling}i.tail!==null&&dt()>Ro&&(e.flags|=128,r=!0,ca(i,!1),e.lanes=4194304)}else{if(!r)if(t=ed(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ca(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!et)return Rt(e),null}else 2*dt()-i.renderingStartTime>Ro&&n!==1073741824&&(e.flags|=128,r=!0,ca(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=dt(),e.sibling=null,n=rt.current,Ke(rt,r?n&1|2:n&1),e):(Rt(e),null);case 22:case 23:return Sg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?pn&1073741824&&(Rt(e),e.subtreeFlags&6&&(e.flags|=8192)):Rt(e),null;case 24:return null;case 25:return null}throw Error(re(156,e.tag))}function NA(t,e){switch(sg(e),e.tag){case 1:return sn(e.type)&&Ku(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return To(),Xe(rn),Xe(Lt),fg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return hg(e),null;case 13:if(Xe(rt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(re(340));Po()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Xe(rt),null;case 4:return To(),null;case 10:return lg(e.type._context),null;case 22:case 23:return Sg(),null;case 24:return null;default:return null}}var Cc=!1,It=!1,AA=typeof WeakSet=="function"?WeakSet:Set,ue=null;function po(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){at(t,e,r)}else n.current=null}function Rp(t,e,n){try{n()}catch(r){at(t,e,r)}}var Ry=!1;function PA(t,e){if(xp=Vu,t=P_(),ng(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var p;h!==n||s!==0&&h.nodeType!==3||(l=o+s),h!==i||r!==0&&h.nodeType!==3||(c=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===n&&++u===s&&(l=o),f===i&&++d===r&&(c=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(yp={focusedElem:t,selectionRange:n},Vu=!1,ue=e;ue!==null;)if(e=ue,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ue=t;else for(;ue!==null;){e=ue;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var m=x.memoizedProps,v=x.memoizedState,y=e.stateNode,g=y.getSnapshotBeforeUpdate(e.elementType===e.type?m:Hn(e.type,m),v);y.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(re(163))}}catch(_){at(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,ue=t;break}ue=e.return}return x=Ry,Ry=!1,x}function La(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Rp(e,n,i)}s=s.next}while(s!==r)}}function Ud(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Fp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function jk(t){var e=t.alternate;e!==null&&(t.alternate=null,jk(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[fr],delete e[cl],delete e[wp],delete e[hA],delete e[fA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Ek(t){return t.tag===5||t.tag===3||t.tag===4}function Fy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ek(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ip(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=qu));else if(r!==4&&(t=t.child,t!==null))for(Ip(t,e,n),t=t.sibling;t!==null;)Ip(t,e,n),t=t.sibling}function Mp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Mp(t,e,n),t=t.sibling;t!==null;)Mp(t,e,n),t=t.sibling}var At=null,qn=!1;function Zr(t,e,n){for(n=n.child;n!==null;)Nk(t,e,n),n=n.sibling}function Nk(t,e,n){if(gr&&typeof gr.onCommitFiberUnmount=="function")try{gr.onCommitFiberUnmount(Rd,n)}catch{}switch(n.tag){case 5:It||po(n,e);case 6:var r=At,s=qn;At=null,Zr(t,e,n),At=r,qn=s,At!==null&&(qn?(t=At,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):At.removeChild(n.stateNode));break;case 18:At!==null&&(qn?(t=At,n=n.stateNode,t.nodeType===8?rf(t.parentNode,n):t.nodeType===1&&rf(t,n),sl(t)):rf(At,n.stateNode));break;case 4:r=At,s=qn,At=n.stateNode.containerInfo,qn=!0,Zr(t,e,n),At=r,qn=s;break;case 0:case 11:case 14:case 15:if(!It&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Rp(n,e,o),s=s.next}while(s!==r)}Zr(t,e,n);break;case 1:if(!It&&(po(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){at(n,e,l)}Zr(t,e,n);break;case 21:Zr(t,e,n);break;case 22:n.mode&1?(It=(r=It)||n.memoizedState!==null,Zr(t,e,n),It=r):Zr(t,e,n);break;default:Zr(t,e,n)}}function Iy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new AA),e.forEach(function(r){var s=BA.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Wn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:At=l.stateNode,qn=!1;break e;case 3:At=l.stateNode.containerInfo,qn=!0;break e;case 4:At=l.stateNode.containerInfo,qn=!0;break e}l=l.return}if(At===null)throw Error(re(160));Nk(i,o,s),At=null,qn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){at(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Ak(e,t),e=e.sibling}function Ak(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Wn(e,t),ar(t),r&4){try{La(3,t,t.return),Ud(3,t)}catch(m){at(t,t.return,m)}try{La(5,t,t.return)}catch(m){at(t,t.return,m)}}break;case 1:Wn(e,t),ar(t),r&512&&n!==null&&po(n,n.return);break;case 5:if(Wn(e,t),ar(t),r&512&&n!==null&&po(n,n.return),t.flags&32){var s=t.stateNode;try{el(s,"")}catch(m){at(t,t.return,m)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&J1(s,i),ap(l,o);var u=ap(l,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?n_(s,h):d==="dangerouslySetInnerHTML"?e_(s,h):d==="children"?el(s,h):Vm(s,d,h,u)}switch(l){case"input":np(s,i);break;case"textarea":Q1(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?xo(s,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?xo(s,!!i.multiple,i.defaultValue,!0):xo(s,!!i.multiple,i.multiple?[]:"",!1))}s[cl]=i}catch(m){at(t,t.return,m)}}break;case 6:if(Wn(e,t),ar(t),r&4){if(t.stateNode===null)throw Error(re(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(m){at(t,t.return,m)}}break;case 3:if(Wn(e,t),ar(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{sl(e.containerInfo)}catch(m){at(t,t.return,m)}break;case 4:Wn(e,t),ar(t);break;case 13:Wn(e,t),ar(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(_g=dt())),r&4&&Iy(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(It=(u=It)||d,Wn(e,t),It=u):Wn(e,t),ar(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(ue=t,d=t.child;d!==null;){for(h=ue=d;ue!==null;){switch(f=ue,p=f.child,f.tag){case 0:case 11:case 14:case 15:La(4,f,f.return);break;case 1:po(f,f.return);var x=f.stateNode;if(typeof x.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(m){at(r,n,m)}}break;case 5:po(f,f.return);break;case 22:if(f.memoizedState!==null){Ly(h);continue}}p!==null?(p.return=f,ue=p):Ly(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=t_("display",o))}catch(m){at(t,t.return,m)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(m){at(t,t.return,m)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Wn(e,t),ar(t),r&4&&Iy(t);break;case 21:break;default:Wn(e,t),ar(t)}}function ar(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Ek(n)){var r=n;break e}n=n.return}throw Error(re(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(el(s,""),r.flags&=-33);var i=Fy(t);Mp(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Fy(t);Ip(t,l,o);break;default:throw Error(re(161))}}catch(c){at(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function DA(t,e,n){ue=t,Pk(t)}function Pk(t,e,n){for(var r=(t.mode&1)!==0;ue!==null;){var s=ue,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Cc;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||It;l=Cc;var u=It;if(Cc=o,(It=c)&&!u)for(ue=s;ue!==null;)o=ue,c=o.child,o.tag===22&&o.memoizedState!==null?By(s):c!==null?(c.return=o,ue=c):By(s);for(;i!==null;)ue=i,Pk(i),i=i.sibling;ue=s,Cc=l,It=u}My(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ue=i):My(t)}}function My(t){for(;ue!==null;){var e=ue;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:It||Ud(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!It)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Hn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&wy(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}wy(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&sl(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(re(163))}It||e.flags&512&&Fp(e)}catch(f){at(e,e.return,f)}}if(e===t){ue=null;break}if(n=e.sibling,n!==null){n.return=e.return,ue=n;break}ue=e.return}}function Ly(t){for(;ue!==null;){var e=ue;if(e===t){ue=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ue=n;break}ue=e.return}}function By(t){for(;ue!==null;){var e=ue;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ud(4,e)}catch(c){at(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){at(e,s,c)}}var i=e.return;try{Fp(e)}catch(c){at(e,i,c)}break;case 5:var o=e.return;try{Fp(e)}catch(c){at(e,o,c)}}}catch(c){at(e,e.return,c)}if(e===t){ue=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ue=l;break}ue=e.return}}var TA=Math.ceil,rd=Jr.ReactCurrentDispatcher,bg=Jr.ReactCurrentOwner,In=Jr.ReactCurrentBatchConfig,Fe=0,jt=null,gt=null,Pt=0,pn=0,mo=Us(0),wt=0,ml=null,ki=0,Vd=0,wg=0,Ba=null,Zt=null,_g=0,Ro=1/0,Dr=null,sd=!1,Lp=null,Es=null,jc=!1,gs=null,id=0,$a=0,Bp=null,bu=-1,wu=0;function Kt(){return Fe&6?dt():bu!==-1?bu:bu=dt()}function Ns(t){return t.mode&1?Fe&2&&Pt!==0?Pt&-Pt:mA.transition!==null?(wu===0&&(wu=p_()),wu):(t=$e,t!==0||(t=window.event,t=t===void 0?16:w_(t.type)),t):1}function nr(t,e,n,r){if(50<$a)throw $a=0,Bp=null,Error(re(185));Tl(t,n,r),(!(Fe&2)||t!==jt)&&(t===jt&&(!(Fe&2)&&(Vd|=n),wt===4&&fs(t,Pt)),on(t,r),n===1&&Fe===0&&!(e.mode&1)&&(Ro=dt()+500,Bd&&Vs()))}function on(t,e){var n=t.callbackNode;mN(t,e);var r=Uu(t,t===jt?Pt:0);if(r===0)n!==null&&Gx(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Gx(n),e===1)t.tag===0?pA($y.bind(null,t)):$_($y.bind(null,t)),uA(function(){!(Fe&6)&&Vs()}),n=null;else{switch(m_(r)){case 1:n=Gm;break;case 4:n=h_;break;case 16:n=zu;break;case 536870912:n=f_;break;default:n=zu}n=Lk(n,Dk.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Dk(t,e){if(bu=-1,wu=0,Fe&6)throw Error(re(327));var n=t.callbackNode;if(_o()&&t.callbackNode!==n)return null;var r=Uu(t,t===jt?Pt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=od(t,r);else{e=r;var s=Fe;Fe|=2;var i=Ok();(jt!==t||Pt!==e)&&(Dr=null,Ro=dt()+500,gi(t,e));do try{FA();break}catch(l){Tk(t,l)}while(1);ag(),rd.current=i,Fe=s,gt!==null?e=0:(jt=null,Pt=0,e=wt)}if(e!==0){if(e===2&&(s=hp(t),s!==0&&(r=s,e=$p(t,s))),e===1)throw n=ml,gi(t,0),fs(t,r),on(t,dt()),n;if(e===6)fs(t,r);else{if(s=t.current.alternate,!(r&30)&&!OA(s)&&(e=od(t,r),e===2&&(i=hp(t),i!==0&&(r=i,e=$p(t,i))),e===1))throw n=ml,gi(t,0),fs(t,r),on(t,dt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(re(345));case 2:ii(t,Zt,Dr);break;case 3:if(fs(t,r),(r&130023424)===r&&(e=_g+500-dt(),10<e)){if(Uu(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Kt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=bp(ii.bind(null,t,Zt,Dr),e);break}ii(t,Zt,Dr);break;case 4:if(fs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-tr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=dt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*TA(r/1960))-r,10<r){t.timeoutHandle=bp(ii.bind(null,t,Zt,Dr),r);break}ii(t,Zt,Dr);break;case 5:ii(t,Zt,Dr);break;default:throw Error(re(329))}}}return on(t,dt()),t.callbackNode===n?Dk.bind(null,t):null}function $p(t,e){var n=Ba;return t.current.memoizedState.isDehydrated&&(gi(t,e).flags|=256),t=od(t,e),t!==2&&(e=Zt,Zt=n,e!==null&&zp(e)),t}function zp(t){Zt===null?Zt=t:Zt.push.apply(Zt,t)}function OA(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!rr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function fs(t,e){for(e&=~wg,e&=~Vd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-tr(e),r=1<<n;t[n]=-1,e&=~r}}function $y(t){if(Fe&6)throw Error(re(327));_o();var e=Uu(t,0);if(!(e&1))return on(t,dt()),null;var n=od(t,e);if(t.tag!==0&&n===2){var r=hp(t);r!==0&&(e=r,n=$p(t,r))}if(n===1)throw n=ml,gi(t,0),fs(t,e),on(t,dt()),n;if(n===6)throw Error(re(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ii(t,Zt,Dr),on(t,dt()),null}function kg(t,e){var n=Fe;Fe|=1;try{return t(e)}finally{Fe=n,Fe===0&&(Ro=dt()+500,Bd&&Vs())}}function Si(t){gs!==null&&gs.tag===0&&!(Fe&6)&&_o();var e=Fe;Fe|=1;var n=In.transition,r=$e;try{if(In.transition=null,$e=1,t)return t()}finally{$e=r,In.transition=n,Fe=e,!(Fe&6)&&Vs()}}function Sg(){pn=mo.current,Xe(mo)}function gi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,cA(n)),gt!==null)for(n=gt.return;n!==null;){var r=n;switch(sg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ku();break;case 3:To(),Xe(rn),Xe(Lt),fg();break;case 5:hg(r);break;case 4:To();break;case 13:Xe(rt);break;case 19:Xe(rt);break;case 10:lg(r.type._context);break;case 22:case 23:Sg()}n=n.return}if(jt=t,gt=t=As(t.current,null),Pt=pn=e,wt=0,ml=null,wg=Vd=ki=0,Zt=Ba=null,hi!==null){for(e=0;e<hi.length;e++)if(n=hi[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}hi=null}return t}function Tk(t,e){do{var n=gt;try{if(ag(),xu.current=nd,td){for(var r=st.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}td=!1}if(_i=0,Ct=vt=st=null,Ma=!1,hl=0,bg.current=null,n===null||n.return===null){wt=1,ml=e,gt=null;break}e:{var i=t,o=n.return,l=n,c=e;if(e=Pt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=Ey(o);if(p!==null){p.flags&=-257,Ny(p,o,l,i,e),p.mode&1&&jy(i,u,e),e=p,c=u;var x=e.updateQueue;if(x===null){var m=new Set;m.add(c),e.updateQueue=m}else x.add(c);break e}else{if(!(e&1)){jy(i,u,e),Cg();break e}c=Error(re(426))}}else if(et&&l.mode&1){var v=Ey(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),Ny(v,o,l,i,e),ig(Oo(c,l));break e}}i=c=Oo(c,l),wt!==4&&(wt=2),Ba===null?Ba=[i]:Ba.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=mk(i,c,e);by(i,y);break e;case 1:l=c;var g=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Es===null||!Es.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var _=gk(i,l,e);by(i,_);break e}}i=i.return}while(i!==null)}Fk(n)}catch(C){e=C,gt===n&&n!==null&&(gt=n=n.return);continue}break}while(1)}function Ok(){var t=rd.current;return rd.current=nd,t===null?nd:t}function Cg(){(wt===0||wt===3||wt===2)&&(wt=4),jt===null||!(ki&268435455)&&!(Vd&268435455)||fs(jt,Pt)}function od(t,e){var n=Fe;Fe|=2;var r=Ok();(jt!==t||Pt!==e)&&(Dr=null,gi(t,e));do try{RA();break}catch(s){Tk(t,s)}while(1);if(ag(),Fe=n,rd.current=r,gt!==null)throw Error(re(261));return jt=null,Pt=0,wt}function RA(){for(;gt!==null;)Rk(gt)}function FA(){for(;gt!==null&&!oN();)Rk(gt)}function Rk(t){var e=Mk(t.alternate,t,pn);t.memoizedProps=t.pendingProps,e===null?Fk(t):gt=e,bg.current=null}function Fk(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=NA(n,e),n!==null){n.flags&=32767,gt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{wt=6,gt=null;return}}else if(n=EA(n,e,pn),n!==null){gt=n;return}if(e=e.sibling,e!==null){gt=e;return}gt=e=t}while(e!==null);wt===0&&(wt=5)}function ii(t,e,n){var r=$e,s=In.transition;try{In.transition=null,$e=1,IA(t,e,n,r)}finally{In.transition=s,$e=r}return null}function IA(t,e,n,r){do _o();while(gs!==null);if(Fe&6)throw Error(re(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(re(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(gN(t,i),t===jt&&(gt=jt=null,Pt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||jc||(jc=!0,Lk(zu,function(){return _o(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=In.transition,In.transition=null;var o=$e;$e=1;var l=Fe;Fe|=4,bg.current=null,PA(t,n),Ak(n,t),nA(yp),Vu=!!xp,yp=xp=null,t.current=n,DA(n),aN(),Fe=l,$e=o,In.transition=i}else t.current=n;if(jc&&(jc=!1,gs=t,id=s),i=t.pendingLanes,i===0&&(Es=null),uN(n.stateNode),on(t,dt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(sd)throw sd=!1,t=Lp,Lp=null,t;return id&1&&t.tag!==0&&_o(),i=t.pendingLanes,i&1?t===Bp?$a++:($a=0,Bp=t):$a=0,Vs(),null}function _o(){if(gs!==null){var t=m_(id),e=In.transition,n=$e;try{if(In.transition=null,$e=16>t?16:t,gs===null)var r=!1;else{if(t=gs,gs=null,id=0,Fe&6)throw Error(re(331));var s=Fe;for(Fe|=4,ue=t.current;ue!==null;){var i=ue,o=i.child;if(ue.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(ue=u;ue!==null;){var d=ue;switch(d.tag){case 0:case 11:case 15:La(8,d,i)}var h=d.child;if(h!==null)h.return=d,ue=h;else for(;ue!==null;){d=ue;var f=d.sibling,p=d.return;if(jk(d),d===u){ue=null;break}if(f!==null){f.return=p,ue=f;break}ue=p}}}var x=i.alternate;if(x!==null){var m=x.child;if(m!==null){x.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(m!==null)}}ue=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ue=o;else e:for(;ue!==null;){if(i=ue,i.flags&2048)switch(i.tag){case 0:case 11:case 15:La(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,ue=y;break e}ue=i.return}}var g=t.current;for(ue=g;ue!==null;){o=ue;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,ue=b;else e:for(o=g;ue!==null;){if(l=ue,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ud(9,l)}}catch(C){at(l,l.return,C)}if(l===o){ue=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,ue=_;break e}ue=l.return}}if(Fe=s,Vs(),gr&&typeof gr.onPostCommitFiberRoot=="function")try{gr.onPostCommitFiberRoot(Rd,t)}catch{}r=!0}return r}finally{$e=n,In.transition=e}}return!1}function zy(t,e,n){e=Oo(n,e),e=mk(t,e,1),t=js(t,e,1),e=Kt(),t!==null&&(Tl(t,1,e),on(t,e))}function at(t,e,n){if(t.tag===3)zy(t,t,n);else for(;e!==null;){if(e.tag===3){zy(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Es===null||!Es.has(r))){t=Oo(n,t),t=gk(e,t,1),e=js(e,t,1),t=Kt(),e!==null&&(Tl(e,1,t),on(e,t));break}}e=e.return}}function MA(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Kt(),t.pingedLanes|=t.suspendedLanes&n,jt===t&&(Pt&n)===n&&(wt===4||wt===3&&(Pt&130023424)===Pt&&500>dt()-_g?gi(t,0):wg|=n),on(t,e)}function Ik(t,e){e===0&&(t.mode&1?(e=gc,gc<<=1,!(gc&130023424)&&(gc=4194304)):e=1);var n=Kt();t=Vr(t,e),t!==null&&(Tl(t,e,n),on(t,n))}function LA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Ik(t,n)}function BA(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(re(314))}r!==null&&r.delete(e),Ik(t,n)}var Mk;Mk=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||rn.current)nn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return nn=!1,jA(t,e,n);nn=!!(t.flags&131072)}else nn=!1,et&&e.flags&1048576&&z_(e,Xu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;vu(t,e),t=e.pendingProps;var s=Ao(e,Lt.current);wo(e,n),s=mg(null,e,r,t,s,n);var i=gg();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,sn(r)?(i=!0,Gu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ug(e),s.updater=zd,e.stateNode=s,s._reactInternals=e,Ep(e,r,t,n),e=Pp(null,e,r,!0,i,n)):(e.tag=0,et&&i&&rg(e),Wt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(vu(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=zA(r),t=Hn(r,t),s){case 0:e=Ap(null,e,r,t,n);break e;case 1:e=Dy(null,e,r,t,n);break e;case 11:e=Ay(null,e,r,t,n);break e;case 14:e=Py(null,e,r,Hn(r.type,t),n);break e}throw Error(re(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Hn(r,s),Ap(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Hn(r,s),Dy(t,e,r,s,n);case 3:e:{if(bk(e),t===null)throw Error(re(387));r=e.pendingProps,i=e.memoizedState,s=i.element,K_(t,e),Zu(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Oo(Error(re(423)),e),e=Ty(t,e,r,n,s);break e}else if(r!==s){s=Oo(Error(re(424)),e),e=Ty(t,e,r,n,s);break e}else for(bn=Cs(e.stateNode.containerInfo.firstChild),_n=e,et=!0,Yn=null,n=H_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Po(),r===s){e=Wr(t,e,n);break e}Wt(t,e,r,n)}e=e.child}return e;case 5:return G_(e),t===null&&Sp(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,vp(r,s)?o=null:i!==null&&vp(r,i)&&(e.flags|=32),vk(t,e),Wt(t,e,o,n),e.child;case 6:return t===null&&Sp(e),null;case 13:return wk(t,e,n);case 4:return dg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Do(e,null,r,n):Wt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Hn(r,s),Ay(t,e,r,s,n);case 7:return Wt(t,e,e.pendingProps,n),e.child;case 8:return Wt(t,e,e.pendingProps.children,n),e.child;case 12:return Wt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ke(Ju,r._currentValue),r._currentValue=o,i!==null)if(rr(i.value,o)){if(i.children===s.children&&!rn.current){e=Wr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=$r(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Cp(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(re(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Cp(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Wt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,wo(e,n),s=Bn(s),r=r(s),e.flags|=1,Wt(t,e,r,n),e.child;case 14:return r=e.type,s=Hn(r,e.pendingProps),s=Hn(r.type,s),Py(t,e,r,s,n);case 15:return xk(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Hn(r,s),vu(t,e),e.tag=1,sn(r)?(t=!0,Gu(e)):t=!1,wo(e,n),pk(e,r,s),Ep(e,r,s,n),Pp(null,e,r,!0,t,n);case 19:return _k(t,e,n);case 22:return yk(t,e,n)}throw Error(re(156,e.tag))};function Lk(t,e){return d_(t,e)}function $A(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function On(t,e,n,r){return new $A(t,e,n,r)}function jg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function zA(t){if(typeof t=="function")return jg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Hm)return 11;if(t===qm)return 14}return 2}function As(t,e){var n=t.alternate;return n===null?(n=On(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function _u(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")jg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case so:return xi(n.children,s,i,e);case Wm:o=8,s|=8;break;case J0:return t=On(12,n,e,s|2),t.elementType=J0,t.lanes=i,t;case Q0:return t=On(13,n,e,s),t.elementType=Q0,t.lanes=i,t;case Z0:return t=On(19,n,e,s),t.elementType=Z0,t.lanes=i,t;case G1:return Wd(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case q1:o=10;break e;case K1:o=9;break e;case Hm:o=11;break e;case qm:o=14;break e;case ls:o=16,r=null;break e}throw Error(re(130,t==null?t:typeof t,""))}return e=On(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function xi(t,e,n,r){return t=On(7,t,r,e),t.lanes=n,t}function Wd(t,e,n,r){return t=On(22,t,r,e),t.elementType=G1,t.lanes=n,t.stateNode={isHidden:!1},t}function hf(t,e,n){return t=On(6,t,null,e),t.lanes=n,t}function ff(t,e,n){return e=On(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function UA(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qh(0),this.expirationTimes=qh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qh(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Eg(t,e,n,r,s,i,o,l,c){return t=new UA(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=On(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ug(i),t}function VA(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ro,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Bk(t){if(!t)return Os;t=t._reactInternals;e:{if(Di(t)!==t||t.tag!==1)throw Error(re(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(sn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(re(171))}if(t.tag===1){var n=t.type;if(sn(n))return B_(t,n,e)}return e}function $k(t,e,n,r,s,i,o,l,c){return t=Eg(n,r,!0,t,s,i,o,l,c),t.context=Bk(null),n=t.current,r=Kt(),s=Ns(n),i=$r(r,s),i.callback=e??null,js(n,i,s),t.current.lanes=s,Tl(t,s,r),on(t,r),t}function Hd(t,e,n,r){var s=e.current,i=Kt(),o=Ns(s);return n=Bk(n),e.context===null?e.context=n:e.pendingContext=n,e=$r(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=js(s,e,o),t!==null&&(nr(t,s,o,i),gu(t,s,o)),o}function ad(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Uy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ng(t,e){Uy(t,e),(t=t.alternate)&&Uy(t,e)}function WA(){return null}var zk=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ag(t){this._internalRoot=t}qd.prototype.render=Ag.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(re(409));Hd(t,e,null,null)};qd.prototype.unmount=Ag.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Si(function(){Hd(null,t,null,null)}),e[Ur]=null}};function qd(t){this._internalRoot=t}qd.prototype.unstable_scheduleHydration=function(t){if(t){var e=y_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<hs.length&&e!==0&&e<hs[n].priority;n++);hs.splice(n,0,t),n===0&&b_(t)}};function Pg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Kd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Vy(){}function HA(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=ad(o);i.call(u)}}var o=$k(e,r,t,0,null,!1,!1,"",Vy);return t._reactRootContainer=o,t[Ur]=o.current,al(t.nodeType===8?t.parentNode:t),Si(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=ad(c);l.call(u)}}var c=Eg(t,0,!1,null,null,!1,!1,"",Vy);return t._reactRootContainer=c,t[Ur]=c.current,al(t.nodeType===8?t.parentNode:t),Si(function(){Hd(e,c,n,r)}),c}function Gd(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=ad(o);l.call(c)}}Hd(e,o,t,s)}else o=HA(n,e,t,s,r);return ad(o)}g_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Sa(e.pendingLanes);n!==0&&(Ym(e,n|1),on(e,dt()),!(Fe&6)&&(Ro=dt()+500,Vs()))}break;case 13:Si(function(){var r=Vr(t,1);if(r!==null){var s=Kt();nr(r,t,1,s)}}),Ng(t,1)}};Xm=function(t){if(t.tag===13){var e=Vr(t,134217728);if(e!==null){var n=Kt();nr(e,t,134217728,n)}Ng(t,134217728)}};x_=function(t){if(t.tag===13){var e=Ns(t),n=Vr(t,e);if(n!==null){var r=Kt();nr(n,t,e,r)}Ng(t,e)}};y_=function(){return $e};v_=function(t,e){var n=$e;try{return $e=t,e()}finally{$e=n}};cp=function(t,e,n){switch(e){case"input":if(np(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Ld(r);if(!s)throw Error(re(90));X1(r),np(r,s)}}}break;case"textarea":Q1(t,n);break;case"select":e=n.value,e!=null&&xo(t,!!n.multiple,e,!1)}};i_=kg;o_=Si;var qA={usingClientEntryPoint:!1,Events:[Rl,lo,Ld,r_,s_,kg]},ua={findFiberByHostInstance:di,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},KA={bundleType:ua.bundleType,version:ua.version,rendererPackageName:ua.rendererPackageName,rendererConfig:ua.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Jr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=c_(t),t===null?null:t.stateNode},findFiberByHostInstance:ua.findFiberByHostInstance||WA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ec=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ec.isDisabled&&Ec.supportsFiber)try{Rd=Ec.inject(KA),gr=Ec}catch{}}jn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qA;jn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pg(e))throw Error(re(200));return VA(t,e,null,n)};jn.createRoot=function(t,e){if(!Pg(t))throw Error(re(299));var n=!1,r="",s=zk;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Eg(t,1,!1,null,null,n,!1,r,s),t[Ur]=e.current,al(t.nodeType===8?t.parentNode:t),new Ag(e)};jn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(re(188)):(t=Object.keys(t).join(","),Error(re(268,t)));return t=c_(e),t=t===null?null:t.stateNode,t};jn.flushSync=function(t){return Si(t)};jn.hydrate=function(t,e,n){if(!Kd(e))throw Error(re(200));return Gd(null,t,e,!0,n)};jn.hydrateRoot=function(t,e,n){if(!Pg(t))throw Error(re(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=zk;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=$k(e,null,t,1,n??null,s,!1,i,o),t[Ur]=e.current,al(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new qd(e)};jn.render=function(t,e,n){if(!Kd(e))throw Error(re(200));return Gd(null,t,e,!1,n)};jn.unmountComponentAtNode=function(t){if(!Kd(t))throw Error(re(40));return t._reactRootContainer?(Si(function(){Gd(null,null,t,!1,function(){t._reactRootContainer=null,t[Ur]=null})}),!0):!1};jn.unstable_batchedUpdates=kg;jn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Kd(n))throw Error(re(200));if(t==null||t._reactInternals===void 0)throw Error(re(38));return Gd(t,e,n,!1,r)};jn.version="18.3.1-next-f1338f8080-20240426";function Uk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Uk)}catch(t){console.error(t)}}Uk(),U1.exports=jn;var Il=U1.exports;const GA=Td(Il);var Wy=Il;Y0.createRoot=Wy.createRoot,Y0.hydrateRoot=Wy.hydrateRoot;const YA="modulepreload",XA=function(t){return"/"+t},Hy={},Mn=function(e,n,r){if(!n||n.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(n.map(i=>{if(i=XA(i),i in Hy)return;Hy[i]=!0;const o=i.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!r)for(let d=s.length-1;d>=0;d--){const h=s[d];if(h.href===i&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${l}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":YA,o||(u.as="script",u.crossOrigin=""),u.href=i,document.head.appendChild(u),o)return new Promise((d,h)=>{u.addEventListener("load",d),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})};var JA=Object.freeze({InvalidProxyUrlErrorMessage:"The proxyUrl passed to Clerk is invalid. The expected value for proxyUrl is an absolute URL or a relative path with a leading '/'. (key={{url}})",InvalidPublishableKeyErrorMessage:"The publishableKey passed to Clerk is invalid. You can get your Publishable key at https://dashboard.clerk.com/last-active?path=api-keys. (key={{key}})",MissingPublishableKeyErrorMessage:"Missing publishableKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.",MissingSecretKeyErrorMessage:"Missing secretKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.",MissingClerkProvider:"{{source}} can only be used within the <ClerkProvider /> component. Learn more: https://clerk.com/docs/components/clerk-provider"});function Vk({packageName:t,customMessages:e}){let n=t;function r(i,o){if(!o)return`${n}: ${i}`;let l=i;const c=i.matchAll(/{{([a-zA-Z0-9-_]+)}}/g);for(const u of c){const d=(o[u[1]]||"").toString();l=l.replace(`{{${u[1]}}}`,d)}return`${n}: ${l}`}const s={...JA,...e};return{setPackageName({packageName:i}){return typeof i=="string"&&(n=i),this},setMessages({customMessages:i}){return Object.assign(s,i||{}),this},throwInvalidPublishableKeyError(i){throw new Error(r(s.InvalidPublishableKeyErrorMessage,i))},throwInvalidProxyUrl(i){throw new Error(r(s.InvalidProxyUrlErrorMessage,i))},throwMissingPublishableKeyError(){throw new Error(r(s.MissingPublishableKeyErrorMessage))},throwMissingSecretKeyError(){throw new Error(r(s.MissingSecretKeyErrorMessage))},throwMissingClerkProviderError(i){throw new Error(r(s.MissingClerkProvider,i))},throw(i){throw new Error(r(i))}}}var Wk=class Hk extends Error{constructor(e,{code:n,cause:r}){const s="🔒 Clerk:",i=new RegExp(s.replace(" ","\\s*"),"i"),o=e.replace(i,""),l=`${s} ${o.trim()}

(code="${n}")
`;super(l),this.toString=()=>`[${this.name}]
Message:${this.message}`,Object.setPrototypeOf(this,Hk.prototype),this.cause=r,this.code=n,this.message=l,this.clerkRuntimeError=!0,this.name="ClerkRuntimeError"}},qk=Object.defineProperty,QA=Object.getOwnPropertyDescriptor,ZA=Object.getOwnPropertyNames,e4=Object.prototype.hasOwnProperty,t4=(t,e)=>{for(var n in e)qk(t,n,{get:e[n],enumerable:!0})},qy=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of ZA(e))!e4.call(t,s)&&s!==n&&qk(t,s,{get:()=>e[s],enumerable:!(r=QA(e,s))||r.enumerable});return t},n4=(t,e,n)=>(qy(t,e,"default"),n&&qy(n,e,"default")),Kk=t=>typeof atob<"u"&&typeof atob=="function"?atob(t):typeof global<"u"&&global.Buffer?new global.Buffer(t,"base64").toString():t,r4=[".lcl.dev",".stg.dev",".lclstage.dev",".stgstage.dev",".dev.lclclerk.com",".stg.lclclerk.com",".accounts.lclclerk.com","accountsstage.dev","accounts.dev"],Gk="pk_live_",s4="pk_test_";function Yk(t){if(!t.endsWith("$"))return!1;const e=t.slice(0,-1);return e.includes("$")?!1:e.includes(".")}function Ky(t,e={}){if(t=t||"",!t||!Up(t)){if(e.fatal&&!t)throw new Error("Publishable key is missing. Ensure that your publishable key is correctly configured. Double-check your environment configuration for your keys, or access them here: https://dashboard.clerk.com/last-active?path=api-keys");if(e.fatal&&!Up(t))throw new Error("Publishable key not valid.");return null}const n=t.startsWith(Gk)?"production":"development";let r;try{r=Kk(t.split("_")[2])}catch{if(e.fatal)throw new Error("Publishable key not valid: Failed to decode key.");return null}if(!Yk(r)){if(e.fatal)throw new Error("Publishable key not valid: Decoded key has invalid format.");return null}let s=r.slice(0,-1);return e.proxyUrl?s=e.proxyUrl:n!=="development"&&e.domain&&e.isSatellite&&(s=`clerk.${e.domain}`),{instanceType:n,frontendApi:s}}function Up(t=""){try{if(!(t.startsWith(Gk)||t.startsWith(s4)))return!1;const n=t.split("_");if(n.length!==3)return!1;const r=n[2];if(!r)return!1;const s=Kk(r);return Yk(s)}catch{return!1}}function i4(){const t=new Map;return{isDevOrStagingUrl:e=>{if(!e)return!1;const n=typeof e=="string"?e:e.hostname;let r=t.get(n);return r===void 0&&(r=r4.some(s=>n.endsWith(s)),t.set(n,r)),r}}}var o4="METHOD_CALLED",a4=.1;function l4(t,e){return{event:o4,eventSamplingRate:a4,payload:{method:t,...e}}}var Xk={exports:{}},Jk={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fo=S;function c4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var u4=typeof Object.is=="function"?Object.is:c4,d4=Fo.useState,h4=Fo.useEffect,f4=Fo.useLayoutEffect,p4=Fo.useDebugValue;function m4(t,e){var n=e(),r=d4({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return f4(function(){s.value=n,s.getSnapshot=e,pf(s)&&i({inst:s})},[t,n,e]),h4(function(){return pf(s)&&i({inst:s}),t(function(){pf(s)&&i({inst:s})})},[t]),p4(n),n}function pf(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!u4(t,n)}catch{return!0}}function g4(t,e){return e()}var x4=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?g4:m4;Jk.useSyncExternalStore=Fo.useSyncExternalStore!==void 0?Fo.useSyncExternalStore:x4;Xk.exports=Jk;var Qk=Xk.exports;const Zk=0,e2=1,t2=2,Gy=3;var Yy=Object.prototype.hasOwnProperty;function Vp(t,e){var n,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&Vp(t[r],e[r]););return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(Yy.call(t,n)&&++r&&!Yy.call(e,n)||!(n in e)||!Vp(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}const Qn=new WeakMap,xs=()=>{},bt=xs(),ld=Object,Se=t=>t===bt,Tn=t=>typeof t=="function",Hr=(t,e)=>({...t,...e}),n2=t=>Tn(t.then),mf={},Nc={},Dg="undefined",Ml=typeof window!=Dg,Wp=typeof document!=Dg,y4=Ml&&"Deno"in window,v4=()=>Ml&&typeof window.requestAnimationFrame!=Dg,us=(t,e)=>{const n=Qn.get(t);return[()=>!Se(e)&&t.get(e)||mf,r=>{if(!Se(e)){const s=t.get(e);e in Nc||(Nc[e]=s),n[5](e,Hr(s,r),s||mf)}},n[6],()=>!Se(e)&&e in Nc?Nc[e]:!Se(e)&&t.get(e)||mf]};let Hp=!0;const b4=()=>Hp,[qp,Kp]=Ml&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[xs,xs],w4=()=>{const t=Wp&&document.visibilityState;return Se(t)||t!=="hidden"},_4=t=>(Wp&&document.addEventListener("visibilitychange",t),qp("focus",t),()=>{Wp&&document.removeEventListener("visibilitychange",t),Kp("focus",t)}),k4=t=>{const e=()=>{Hp=!0,t()},n=()=>{Hp=!1};return qp("online",e),qp("offline",n),()=>{Kp("online",e),Kp("offline",n)}},S4={isOnline:b4,isVisible:w4},C4={initFocus:_4,initReconnect:k4},Xy=!X.useId,gl=!Ml||y4,j4=t=>v4()?window.requestAnimationFrame(t):setTimeout(t,1),za=gl?S.useEffect:S.useLayoutEffect,gf=typeof navigator<"u"&&navigator.connection,Jy=!gl&&gf&&(["slow-2g","2g"].includes(gf.effectiveType)||gf.saveData),Ac=new WeakMap,E4=t=>ld.prototype.toString.call(t),xf=(t,e)=>t===`[object ${e}]`;let N4=0;const Gp=t=>{const e=typeof t,n=E4(t),r=xf(n,"Date"),s=xf(n,"RegExp"),i=xf(n,"Object");let o,l;if(ld(t)===t&&!r&&!s){if(o=Ac.get(t),o)return o;if(o=++N4+"~",Ac.set(t,o),Array.isArray(t)){for(o="@",l=0;l<t.length;l++)o+=Gp(t[l])+",";Ac.set(t,o)}if(i){o="#";const c=ld.keys(t).sort();for(;!Se(l=c.pop());)Se(t[l])||(o+=l+":"+Gp(t[l])+",");Ac.set(t,o)}}else o=r?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return o},Io=t=>{if(Tn(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?Gp(t):"",[t,e]};let A4=0;const Yp=()=>++A4;async function r2(...t){const[e,n,r,s]=t,i=Hr({populateCache:!0,throwOnError:!0},typeof s=="boolean"?{revalidate:s}:s||{});let o=i.populateCache;const l=i.rollbackOnError;let c=i.optimisticData;const u=f=>typeof l=="function"?l(f):l!==!1,d=i.throwOnError;if(Tn(n)){const f=n,p=[],x=e.keys();for(const m of x)!/^\$(inf|sub)\$/.test(m)&&f(e.get(m)._k)&&p.push(m);return Promise.all(p.map(h))}return h(n);async function h(f){const[p]=Io(f);if(!p)return;const[x,m]=us(e,p),[v,y,g,b]=Qn.get(e),_=()=>{const L=v[p];return(Tn(i.revalidate)?i.revalidate(x().data,f):i.revalidate!==!1)&&(delete g[p],delete b[p],L&&L[0])?L[0](t2).then(()=>x().data):x().data};if(t.length<3)return _();let C=r,N,j=!1;const w=Yp();y[p]=[w,0];const k=!Se(c),E=x(),P=E.data,A=E._c,D=Se(A)?P:A;if(k&&(c=Tn(c)?c(D,P):c,m({data:c,_c:D})),Tn(C))try{C=C(D)}catch(L){N=L,j=!0}if(C&&n2(C))if(C=await C.catch(L=>{N=L,j=!0}),w!==y[p][0]){if(j)throw N;return C}else j&&k&&u(N)&&(o=!0,m({data:D,_c:bt}));if(o&&!j)if(Tn(o)){const L=o(C,D);m({data:L,error:bt,_c:bt})}else m({data:C,error:bt,_c:bt});if(y[p][1]=Yp(),Promise.resolve(_()).then(()=>{m({_c:bt})}),j){if(d)throw N;return}return C}}const Qy=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},s2=(t,e)=>{if(!Qn.has(t)){const n=Hr(C4,e),r=Object.create(null),s=r2.bind(bt,t);let i=xs;const o=Object.create(null),l=(d,h)=>{const f=o[d]||[];return o[d]=f,f.push(h),()=>f.splice(f.indexOf(h),1)},c=(d,h,f)=>{t.set(d,h);const p=o[d];if(p)for(const x of p)x(h,f)},u=()=>{if(!Qn.has(t)&&(Qn.set(t,[r,Object.create(null),Object.create(null),Object.create(null),s,c,l]),!gl)){const d=n.initFocus(setTimeout.bind(bt,Qy.bind(bt,r,Zk))),h=n.initReconnect(setTimeout.bind(bt,Qy.bind(bt,r,e2)));i=()=>{d&&d(),h&&h(),Qn.delete(t)}}};return u(),[t,s,u,i]}return[t,Qn.get(t)[4]]},P4=(t,e,n,r,s)=>{const i=n.errorRetryCount,o=s.retryCount,l=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;!Se(i)&&o>i||setTimeout(r,l,s)},D4=Vp,[Ll,i2]=s2(new Map),o2=Hr({onLoadingSlow:xs,onSuccess:xs,onError:xs,onErrorRetry:P4,onDiscarded:xs,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:Jy?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:Jy?5e3:3e3,compare:D4,isPaused:()=>!1,cache:Ll,mutate:i2,fallback:{}},S4),a2=(t,e)=>{const n=Hr(t,e);if(e){const{use:r,fallback:s}=t,{use:i,fallback:o}=e;r&&i&&(n.use=r.concat(i)),s&&o&&(n.fallback=Hr(s,o))}return n},Xp=S.createContext({}),T4=t=>{const{value:e}=t,n=S.useContext(Xp),r=Tn(e),s=S.useMemo(()=>r?e(n):e,[r,n,e]),i=S.useMemo(()=>r?s:a2(n,s),[r,n,s]),o=s&&s.provider,l=S.useRef(bt);o&&!l.current&&(l.current=s2(o(i.cache||Ll),s));const c=l.current;return c&&(i.cache=c[0],i.mutate=c[1]),za(()=>{if(c)return c[2]&&c[2](),c[3]},[]),S.createElement(Xp.Provider,Hr(t,{value:i}))},l2="$inf$",c2=Ml&&window.__SWR_DEVTOOLS_USE__,O4=c2?window.__SWR_DEVTOOLS_USE__:[],R4=()=>{c2&&(window.__SWR_DEVTOOLS_REACT__=X)},u2=t=>Tn(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],d2=()=>Hr(o2,S.useContext(Xp)),F4=(t,e)=>{const[n,r]=Io(t),[,,,s]=Qn.get(Ll);if(s[n])return s[n];const i=e(r);return s[n]=i,i},I4=t=>(e,n,r)=>t(e,n&&((...i)=>{const[o]=Io(e),[,,,l]=Qn.get(Ll);if(o.startsWith(l2))return n(...i);const c=l[o];return Se(c)?n(...i):(delete l[o],c)}),r),M4=O4.concat(I4),L4=t=>function(...n){const r=d2(),[s,i,o]=u2(n),l=a2(r,o);let c=t;const{use:u}=l,d=(u||[]).concat(M4);for(let h=d.length;h--;)c=d[h](c);return c(s,i||l.fetcher||null,l)},B4=(t,e,n)=>{const r=e[t]||(e[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s>=0&&(r[s]=r[r.length-1],r.pop())}},$4=(t,e)=>(...n)=>{const[r,s,i]=u2(n),o=(i.use||[]).concat(e);return t(r,s,{...i,use:o})};R4();const z4=()=>{},U4=z4(),Jp=Object,Zy=t=>t===U4,V4=t=>typeof t=="function",Pc=new WeakMap,W4=t=>Jp.prototype.toString.call(t),yf=(t,e)=>t===`[object ${e}]`;let H4=0;const Qp=t=>{const e=typeof t,n=W4(t),r=yf(n,"Date"),s=yf(n,"RegExp"),i=yf(n,"Object");let o,l;if(Jp(t)===t&&!r&&!s){if(o=Pc.get(t),o)return o;if(o=++H4+"~",Pc.set(t,o),Array.isArray(t)){for(o="@",l=0;l<t.length;l++)o+=Qp(t[l])+",";Pc.set(t,o)}if(i){o="#";const c=Jp.keys(t).sort();for(;!Zy(l=c.pop());)Zy(t[l])||(o+=l+":"+Qp(t[l])+",");Pc.set(t,o)}}else o=r?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return o},q4=t=>{if(V4(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?Qp(t):"",[t,e]},K4=t=>q4(t)[0],vf=X.use||(t=>{switch(t.status){case"pending":throw t;case"fulfilled":return t.value;case"rejected":throw t.reason;default:throw t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t}}),bf={dedupe:!0},G4=(t,e,n)=>{const{cache:r,compare:s,suspense:i,fallbackData:o,revalidateOnMount:l,revalidateIfStale:c,refreshInterval:u,refreshWhenHidden:d,refreshWhenOffline:h,keepPreviousData:f}=n,[p,x,m,v]=Qn.get(r),[y,g]=Io(t),b=S.useRef(!1),_=S.useRef(!1),C=S.useRef(y),N=S.useRef(e),j=S.useRef(n),w=()=>j.current,k=()=>w().isVisible()&&w().isOnline(),[E,P,A,D]=us(r,y),L=S.useRef({}).current,W=Se(o)?Se(n.fallback)?bt:n.fallback[y]:o,U=(Q,ne)=>{for(const ie in L){const oe=ie;if(oe==="data"){if(!s(Q[oe],ne[oe])&&(!Se(Q[oe])||!s(J,ne[oe])))return!1}else if(ne[oe]!==Q[oe])return!1}return!0},V=S.useMemo(()=>{const Q=(()=>!y||!e?!1:Se(l)?w().isPaused()||i?!1:c!==!1:l)(),ne=we=>{const Te=Hr(we);return delete Te._k,Q?{isValidating:!0,isLoading:!0,...Te}:Te},ie=E(),oe=D(),be=ne(ie),ge=ie===oe?be:ne(oe);let fe=be;return[()=>{const we=ne(E());return U(we,fe)?(fe.data=we.data,fe.isLoading=we.isLoading,fe.isValidating=we.isValidating,fe.error=we.error,fe):(fe=we,we)},()=>ge]},[r,y]),$=Qk.useSyncExternalStore(S.useCallback(Q=>A(y,(ne,ie)=>{U(ie,ne)||Q()}),[r,y]),V[0],V[1]),M=!b.current,O=p[y]&&p[y].length>0,T=$.data,F=Se(T)?W&&n2(W)?vf(W):W:T,R=$.error,B=S.useRef(F),J=f?Se(T)?Se(B.current)?F:B.current:T:F,G=(()=>O&&!Se(R)?!1:M&&!Se(l)?l:w().isPaused()?!1:i?Se(F)?!1:c:Se(F)||c)(),Z=!!(y&&e&&M&&G),te=Se($.isValidating)?Z:$.isValidating,le=Se($.isLoading)?Z:$.isLoading,he=S.useCallback(async Q=>{const ne=N.current;if(!y||!ne||_.current||w().isPaused())return!1;let ie,oe,be=!0;const ge=Q||{},fe=!m[y]||!ge.dedupe,we=()=>Xy?!_.current&&y===C.current&&b.current:y===C.current,Te={isValidating:!1,isLoading:!1},ze=()=>{P(Te)},ft=()=>{const Ie=m[y];Ie&&Ie[1]===oe&&delete m[y]},Me={isValidating:!0};Se(E().data)&&(Me.isLoading=!0);try{if(fe&&(P(Me),n.loadingTimeout&&Se(E().data)&&setTimeout(()=>{be&&we()&&w().onLoadingSlow(y,n)},n.loadingTimeout),m[y]=[ne(g),Yp()]),[ie,oe]=m[y],ie=await ie,fe&&setTimeout(ft,n.dedupingInterval),!m[y]||m[y][1]!==oe)return fe&&we()&&w().onDiscarded(y),!1;Te.error=bt;const Ie=x[y];if(!Se(Ie)&&(oe<=Ie[0]||oe<=Ie[1]||Ie[1]===0))return ze(),fe&&we()&&w().onDiscarded(y),!1;const Ee=E().data;Te.data=s(Ee,ie)?Ee:ie,fe&&we()&&w().onSuccess(ie,y,n)}catch(Ie){ft();const Ee=w(),{shouldRetryOnError:We}=Ee;Ee.isPaused()||(Te.error=Ie,fe&&we()&&(Ee.onError(Ie,y,Ee),(We===!0||Tn(We)&&We(Ie))&&(!w().revalidateOnFocus||!w().revalidateOnReconnect||k())&&Ee.onErrorRetry(Ie,y,Ee,Ut=>{const cn=p[y];cn&&cn[0]&&cn[0](Gy,Ut)},{retryCount:(ge.retryCount||0)+1,dedupe:!0})))}return be=!1,ze(),!0},[y,r]),de=S.useCallback((...Q)=>r2(r,C.current,...Q),[]);if(za(()=>{N.current=e,j.current=n,Se(T)||(B.current=T)}),za(()=>{if(!y)return;const Q=he.bind(bt,bf);let ne=0;w().revalidateOnFocus&&(ne=Date.now()+w().focusThrottleInterval);const oe=B4(y,p,(be,ge={})=>{if(be==Zk){const fe=Date.now();w().revalidateOnFocus&&fe>ne&&k()&&(ne=fe+w().focusThrottleInterval,Q())}else if(be==e2)w().revalidateOnReconnect&&k()&&Q();else{if(be==t2)return he();if(be==Gy)return he(ge)}});return _.current=!1,C.current=y,b.current=!0,P({_k:g}),G&&(m[y]||(Se(F)||gl?Q():j4(Q))),()=>{_.current=!0,oe()}},[y]),za(()=>{let Q;function ne(){const oe=Tn(u)?u(E().data):u;oe&&Q!==-1&&(Q=setTimeout(ie,oe))}function ie(){!E().error&&(d||w().isVisible())&&(h||w().isOnline())?he(bf).then(ne):ne()}return ne(),()=>{Q&&(clearTimeout(Q),Q=-1)}},[u,d,h,y]),S.useDebugValue(J),i&&Se(F)&&y){if(!Xy&&gl)throw new Error("Fallback data is required when using Suspense in SSR.");N.current=e,j.current=n,_.current=!1;const Q=v[y];if(!Se(Q)){const ne=de(Q);vf(ne)}if(Se(R)){const ne=he(bf);Se(J)||(ne.status="fulfilled",ne.value=!0),vf(ne)}else throw R}return{mutate:de,get data(){return L.data=!0,J},get error(){return L.error=!0,R},get isValidating(){return L.isValidating=!0,te},get isLoading(){return L.isLoading=!0,le}}},Y4=ld.defineProperty(T4,"defaultValue",{value:o2}),Tg=L4(G4),X4=Object.freeze(Object.defineProperty({__proto__:null,SWRConfig:Y4,default:Tg,mutate:i2,preload:F4,unstable_serialize:K4,useSWRConfig:d2},Symbol.toStringTag,{value:"Module"})),J4=()=>{},Q4=J4(),Zp=Object,ev=t=>t===Q4,Z4=t=>typeof t=="function",Dc=new WeakMap,eP=t=>Zp.prototype.toString.call(t),wf=(t,e)=>t===`[object ${e}]`;let tP=0;const em=t=>{const e=typeof t,n=eP(t),r=wf(n,"Date"),s=wf(n,"RegExp"),i=wf(n,"Object");let o,l;if(Zp(t)===t&&!r&&!s){if(o=Dc.get(t),o)return o;if(o=++tP+"~",Dc.set(t,o),Array.isArray(t)){for(o="@",l=0;l<t.length;l++)o+=em(t[l])+",";Dc.set(t,o)}if(i){o="#";const c=Zp.keys(t).sort();for(;!ev(l=c.pop());)ev(t[l])||(o+=l+":"+em(t[l])+",");Dc.set(t,o)}}else o=r?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return o},nP=t=>{if(Z4(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?em(t):"",[t,e]},rP=t=>nP(t?t(0,null):null)[0],_f=Promise.resolve(),sP=t=>(e,n,r)=>{const s=S.useRef(!1),{cache:i,initialSize:o=1,revalidateAll:l=!1,persistSize:c=!1,revalidateFirstPage:u=!0,revalidateOnMount:d=!1,parallel:h=!1}=r,[,,,f]=Qn.get(Ll);let p;try{p=rP(e),p&&(p=l2+p)}catch{}const[x,m,v]=us(i,p),y=S.useCallback(()=>Se(x()._l)?o:x()._l,[i,p,o]);Qk.useSyncExternalStore(S.useCallback(w=>p?v(p,()=>{w()}):()=>{},[i,p]),y,y);const g=S.useCallback(()=>{const w=x()._l;return Se(w)?o:w},[p,o]),b=S.useRef(g());za(()=>{if(!s.current){s.current=!0;return}p&&m({_l:c?b.current:g()})},[p,i]);const _=d&&!s.current,C=t(p,async w=>{const k=x()._i,E=x()._r;m({_r:bt});const P=[],A=g(),[D]=us(i,w),L=D().data,W=[];let U=null;for(let V=0;V<A;++V){const[$,M]=Io(e(V,h?null:U));if(!$)break;const[O,T]=us(i,$);let F=O().data;const R=l||k||Se(F)||u&&!V&&!Se(L)||_||L&&!Se(L[V])&&!r.compare(L[V],F);if(n&&(typeof E=="function"?E(F,M):R)){const B=async()=>{if(!($ in f))F=await n(M);else{const G=f[$];delete f[$],F=await G}T({data:F,_k:M}),P[V]=F};h?W.push(B):await B()}else P[V]=F;h||(U=F)}return h&&await Promise.all(W.map(V=>V())),m({_i:bt}),P},r),N=S.useCallback(function(w,k){const E=typeof k=="boolean"?{revalidate:k}:k||{},P=E.revalidate!==!1;return p?(P&&(Se(w)?m({_i:!0,_r:E.revalidate}):m({_i:!1,_r:E.revalidate})),arguments.length?C.mutate(w,{...E,revalidate:P}):C.mutate()):_f},[p,i]),j=S.useCallback(w=>{if(!p)return _f;const[,k]=us(i,p);let E;if(Tn(w)?E=w(g()):typeof w=="number"&&(E=w),typeof E!="number")return _f;k({_l:E}),b.current=E;const P=[],[A]=us(i,p);let D=null;for(let L=0;L<E;++L){const[W]=Io(e(L,D)),[U]=us(i,W),V=W?U().data:bt;if(Se(V))return N(A().data);P.push(V),D=V}return N(P)},[p,i,N,g]);return{size:g(),setSize:j,mutate:N,get data(){return C.data},get error(){return C.error},get isValidating(){return C.isValidating},get isLoading(){return C.isLoading}}},iP=$4(Tg,sP);var tv=Object.prototype.hasOwnProperty;function nv(t,e,n){for(n of t.keys())if(Ua(n,e))return n}function Ua(t,e){var n,r,s;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&Ua(t[r],e[r]););return r===-1}if(n===Set){if(t.size!==e.size)return!1;for(r of t)if(s=r,s&&typeof s=="object"&&(s=nv(e,s),!s)||!e.has(s))return!1;return!0}if(n===Map){if(t.size!==e.size)return!1;for(r of t)if(s=r[0],s&&typeof s=="object"&&(s=nv(e,s),!s)||!Ua(r[1],e.get(s)))return!1;return!0}if(n===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(n===DataView){if((r=t.byteLength)===e.byteLength)for(;r--&&t.getInt8(r)===e.getInt8(r););return r===-1}if(ArrayBuffer.isView(t)){if((r=t.byteLength)===e.byteLength)for(;r--&&t[r]===e[r];);return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(tv.call(t,n)&&++r&&!tv.call(e,n)||!(n in e)||!Ua(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}function oP(t,e){if(!t)throw typeof e=="string"?new Error(e):new Error(`${e.displayName} not found`)}var kr=(t,e)=>{const{assertCtxFn:n=oP}=e||{},r=X.createContext(void 0);return r.displayName=t,[r,()=>{const o=X.useContext(r);return n(o,`${t} not found`),o.value},()=>{const o=X.useContext(r);return o?o.value:{}}]},Og={};t4(Og,{useSWR:()=>Tg,useSWRInfinite:()=>iP});n4(Og,X4);var[h2,Rg]=kr("ClerkInstanceContext"),[aP,lP]=kr("UserContext"),[cP,j7]=kr("ClientContext"),[uP,E7]=kr("SessionContext");X.createContext({});var[dP,N7]=kr("CheckoutContext"),hP=({children:t,...e})=>X.createElement(dP.Provider,{value:{value:e}},t),[fP,A7]=kr("OrganizationContext"),pP=({children:t,organization:e,swrConfig:n})=>X.createElement(Og.SWRConfig,{value:n},X.createElement(fP.Provider,{value:{value:{organization:e}}},t));function Fg(t){if(!X.useContext(h2)){if(typeof t=="function"){t();return}throw new Error(`${t} can only be used within the <ClerkProvider /> component.

Possible fixes:
1. Ensure that the <ClerkProvider /> is correctly wrapping your application where this component is used.
2. Check for multiple versions of the \`@clerk/shared\` package in your project. Use a tool like \`npm ls @clerk/shared\` to identify multiple versions, and update your dependencies to only rely on one.

Learn more: https://clerk.com/docs/components/clerk-provider`.trim())}}typeof window<"u"?X.useLayoutEffect:X.useEffect;var rv="useUser";function Bl(){var n;Fg(rv);const t=lP();return(n=Rg().telemetry)==null||n.record(l4(rv)),t===void 0?{isLoaded:!1,isSignedIn:void 0,user:void 0}:t===null?{isLoaded:!0,isSignedIn:!1,user:null}:{isLoaded:!0,isSignedIn:!0,user:t}}var mP=()=>(Fg("useClerk"),Rg()),sv=Ua,gP=t=>{const e=S.useRef(t);return S.useEffect(()=>{e.current=t},[t]),e.current},dn=(t,e,n)=>{const r=!!n,s=S.useRef(n);S.useEffect(()=>{s.current=n},[n]),S.useEffect(()=>{if(!r||!t)return()=>{};const i=(...o)=>{s.current&&s.current(...o)};return t.on(e,i),()=>{t.off(e,i)}},[r,e,t,s])},f2=X.createContext(null);f2.displayName="ElementsContext";var xP=(t,e)=>{if(!t)throw new Error(`Could not find Elements context; You need to wrap the part of your app that ${e} in an <Elements> provider.`);return t},cd=t=>t!==null&&typeof t=="object",yP=(t,e,n)=>cd(t)?Object.keys(t).reduce((r,s)=>{const i=!cd(e)||!p2(t[s],e[s]);return n.includes(s)?(i&&console.warn(`Unsupported prop change: options.${s} is not a mutable property.`),r):i?{...r||{},[s]:t[s]}:r},null):null,iv="[object Object]",p2=(t,e)=>{if(!cd(t)||!cd(e))return t===e;const n=Array.isArray(t),r=Array.isArray(e);if(n!==r)return!1;const s=Object.prototype.toString.call(t)===iv,i=Object.prototype.toString.call(e)===iv;if(s!==i)return!1;if(!s&&!n)return t===e;const o=Object.keys(t),l=Object.keys(e);if(o.length!==l.length)return!1;const c={};for(let p=0;p<o.length;p+=1)c[o[p]]=!0;for(let p=0;p<l.length;p+=1)c[l[p]]=!0;const u=Object.keys(c);if(u.length!==o.length)return!1;const d=t,h=e,f=p=>p2(d[p],h[p]);return u.every(f)},ov=t=>{const e=X.useContext(f2);return xP(e,t)},vP=t=>t.charAt(0).toUpperCase()+t.slice(1),bP=(t,e)=>{const n=`${vP(t)}Element`,i=e?o=>{ov(`mounts <${n}>`);const{id:l,className:c}=o;return X.createElement("div",{id:l,className:c})}:({id:o,className:l,fallback:c,options:u={},onBlur:d,onFocus:h,onReady:f,onChange:p,onEscape:x,onClick:m,onLoadError:v,onLoaderStart:y,onNetworksChange:g,onConfirm:b,onCancel:_,onShippingAddressChange:C,onShippingRateChange:N})=>{const j=ov(`mounts <${n}>`),w="elements"in j?j.elements:null,[k,E]=X.useState(null),P=X.useRef(null),A=X.useRef(null),[D,L]=S.useState(!1);dn(k,"blur",d),dn(k,"focus",h),dn(k,"escape",x),dn(k,"click",m),dn(k,"loaderror",v),dn(k,"loaderstart",y),dn(k,"networkschange",g),dn(k,"confirm",b),dn(k,"cancel",_),dn(k,"shippingaddresschange",C),dn(k,"shippingratechange",N),dn(k,"change",p);let W;f&&(W=()=>{L(!0),f(k)}),dn(k,"ready",W),X.useLayoutEffect(()=>{if(P.current===null&&A.current!==null&&w){let V=null;w&&(V=w.create(t,u)),P.current=V,E(V),V&&V.mount(A.current)}},[w,u]);const U=gP(u);return X.useEffect(()=>{if(!P.current)return;const V=yP(u,U,["paymentRequest"]);V&&"update"in P.current&&P.current.update(V)},[u,U]),X.useLayoutEffect(()=>()=>{if(P.current&&typeof P.current.destroy=="function")try{P.current.destroy(),P.current=null}catch{}},[]),X.createElement(X.Fragment,null,!D&&c,X.createElement("div",{id:o,style:{height:D?"unset":"0px",visibility:D?"visible":"hidden"},className:l,ref:A}))};return i.displayName=n,i.__elementType=t,i},wP=typeof window>"u";bP("payment",wP);kr("StripeLibsContext");kr("PaymentElementContext");kr("StripeUtilsContext");var yr=Vk({packageName:"@clerk/clerk-react"});function _P(t){yr.setMessages(t).setPackageName(t)}var[kP,P7]=kr("AuthContext"),SP=h2,CP=Rg,jP="You've added multiple <ClerkProvider> components in your React component tree. Wrap your components in a single <ClerkProvider>.",EP=t=>`You've passed multiple children components to <${t}/>. You can only pass a single child component or text.`,kf="Unsupported usage of isSatellite, domain or proxyUrl. The usage of isSatellite, domain or proxyUrl as function is not supported in non-browser environments.",NP="<UserProfile.Page /> component needs to be a direct child of `<UserProfile />` or `<UserButton />`.",AP="<UserProfile.Link /> component needs to be a direct child of `<UserProfile />` or `<UserButton />`.",PP="<OrganizationProfile.Page /> component needs to be a direct child of `<OrganizationProfile />` or `<OrganizationSwitcher />`.",DP="<OrganizationProfile.Link /> component needs to be a direct child of `<OrganizationProfile />` or `<OrganizationSwitcher />`.",TP=t=>`<${t} /> can only accept <${t}.Page /> and <${t}.Link /> as its children. Any other provided component will be ignored. Additionally, please ensure that the component is rendered in a client component.`,OP=t=>`Missing props. <${t}.Page /> component requires the following props: url, label, labelIcon, alongside with children to be rendered inside the page.`,RP=t=>`Missing props. <${t}.Link /> component requires the following props: url, label and labelIcon.`,FP="<UserButton /> can only accept <UserButton.UserProfilePage />, <UserButton.UserProfileLink /> and <UserButton.MenuItems /> as its children. Any other provided component will be ignored. Additionally, please ensure that the component is rendered in a client component.",IP="<UserButton.MenuItems /> component can only accept <UserButton.Action /> and <UserButton.Link /> as its children. Any other provided component will be ignored. Additionally, please ensure that the component is rendered in a client component.",MP="<UserButton.MenuItems /> component needs to be a direct child of `<UserButton />`.",LP="<UserButton.Action /> component needs to be a direct child of `<UserButton.MenuItems />`.",BP="<UserButton.Link /> component needs to be a direct child of `<UserButton.MenuItems />`.",$P="Missing props. <UserButton.Link /> component requires the following props: href, label and labelIcon.",zP="Missing props. <UserButton.Action /> component requires the following props: label.",UP=t=>{Fg(()=>{yr.throwMissingClerkProviderError({source:t})})},Je=(t,e)=>{const r=(typeof e=="string"?e:e==null?void 0:e.component)||t.displayName||t.name||"Component";t.displayName=r;const s=typeof e=="string"?void 0:e,i=o=>{UP(r||"withClerk");const l=CP();return!l.loaded&&!(s!=null&&s.renderWhileLoading)?null:X.createElement(t,{...o,component:r,clerk:l})};return i.displayName=`withClerk(${r})`,i},VP=()=>{try{return!1}catch{}return!1},WP=()=>{try{return!1}catch{}return!1},HP=()=>{try{return!0}catch{}return!1},av=new Set,Ig=(t,e,n)=>{const r=WP()||HP(),s=n??t;av.has(s)||r||(av.add(s),console.warn(`Clerk - DEPRECATION WARNING: "${t}" is deprecated and will be removed in the next major release.
${e}`))};Je(({clerk:t,...e})=>{const{client:n,session:r}=t,s=n.signedInSessions?n.signedInSessions.length>0:n.activeSessions&&n.activeSessions.length>0;return X.useEffect(()=>{r===null&&s?t.redirectToAfterSignOut():t.redirectToSignIn(e)},[]),null},"RedirectToSignIn");Je(({clerk:t,...e})=>(X.useEffect(()=>{t.redirectToSignUp(e)},[]),null),"RedirectToSignUp");Je(({clerk:t,...e})=>(X.useEffect(()=>{t.redirectToTasks(e)},[]),null),"RedirectToTasks");Je(({clerk:t})=>(X.useEffect(()=>{Ig("RedirectToUserProfile","Use the `redirectToUserProfile()` method instead."),t.redirectToUserProfile()},[]),null),"RedirectToUserProfile");Je(({clerk:t})=>(X.useEffect(()=>{Ig("RedirectToOrganizationProfile","Use the `redirectToOrganizationProfile()` method instead."),t.redirectToOrganizationProfile()},[]),null),"RedirectToOrganizationProfile");Je(({clerk:t})=>(X.useEffect(()=>{Ig("RedirectToCreateOrganization","Use the `redirectToCreateOrganization()` method instead."),t.redirectToCreateOrganization()},[]),null),"RedirectToCreateOrganization");Je(({clerk:t,...e})=>(X.useEffect(()=>{t.handleRedirectCallback(e)},[]),null),"AuthenticateWithRedirectCallback");var qt=t=>{VP()&&console.error(`Clerk: ${t}`)};function Sf(t,e,n){if(typeof t=="function")return t(e);if(typeof t<"u")return t;if(typeof n<"u")return n}var lv=(t,...e)=>{const n={...t};for(const r of e)delete n[r];return n},Yd=t=>e=>{try{return X.Children.only(t)}catch{return yr.throw(EP(e))}},Xd=(t,e)=>(t||(t=e),typeof t=="string"&&(t=X.createElement("button",null,t)),t),Jd=t=>(...e)=>{if(t&&typeof t=="function")return t(...e)};function qP(t){return typeof t=="function"}var Tc=new Map;function KP(t,e,n=1){X.useEffect(()=>{const r=Tc.get(t)||0;return r==n?yr.throw(e):(Tc.set(t,r+1),()=>{Tc.set(t,(Tc.get(t)||1)-1)})},[])}function GP(t,e,n){const r=t.displayName||t.name||e||"Component",s=i=>(KP(e,n),X.createElement(t,{...i}));return s.displayName=`withMaxAllowedInstancesGuard(${r})`,s}var Va=t=>{const[e,n]=S.useState(new Map);return t.map(r=>({id:r.id,mount:s=>n(i=>new Map(i).set(String(r.id),s)),unmount:()=>n(s=>{const i=new Map(s);return i.set(String(r.id),null),i}),portal:()=>{const s=e.get(String(r.id));return s?Il.createPortal(r.component,s):null}}))},Ht=(t,e)=>!!t&&X.isValidElement(t)&&(t==null?void 0:t.type)===e,m2=(t,e)=>y2({children:t,reorderItemsLabels:["account","security"],LinkComponent:zl,PageComponent:$l,MenuItemsComponent:Zd,componentName:"UserProfile"},e),g2=(t,e)=>y2({children:t,reorderItemsLabels:["general","members"],LinkComponent:th,PageComponent:eh,componentName:"OrganizationProfile"},e),x2=t=>{const e=[],n=[th,eh,Zd,$l,zl];return X.Children.forEach(t,r=>{n.some(s=>Ht(r,s))||e.push(r)}),e},y2=(t,e)=>{const{children:n,LinkComponent:r,PageComponent:s,MenuItemsComponent:i,reorderItemsLabels:o,componentName:l}=t,{allowForAnyChildren:c=!1}=e||{},u=[];X.Children.forEach(n,g=>{if(!Ht(g,s)&&!Ht(g,r)&&!Ht(g,i)){g&&!c&&qt(TP(l));return}const{props:b}=g,{children:_,label:C,url:N,labelIcon:j}=b;if(Ht(g,s))if(cv(b,o))u.push({label:C});else if(Cf(b))u.push({label:C,labelIcon:j,children:_,url:N});else{qt(OP(l));return}if(Ht(g,r))if(jf(b))u.push({label:C,labelIcon:j,url:N});else{qt(RP(l));return}});const d=[],h=[],f=[];u.forEach((g,b)=>{if(Cf(g)){d.push({component:g.children,id:b}),h.push({component:g.labelIcon,id:b});return}jf(g)&&f.push({component:g.labelIcon,id:b})});const p=Va(d),x=Va(h),m=Va(f),v=[],y=[];return u.forEach((g,b)=>{if(cv(g,o)){v.push({label:g.label});return}if(Cf(g)){const{portal:_,mount:C,unmount:N}=p.find(E=>E.id===b),{portal:j,mount:w,unmount:k}=x.find(E=>E.id===b);v.push({label:g.label,url:g.url,mount:C,unmount:N,mountIcon:w,unmountIcon:k}),y.push(_),y.push(j);return}if(jf(g)){const{portal:_,mount:C,unmount:N}=m.find(j=>j.id===b);v.push({label:g.label,url:g.url,mountIcon:C,unmountIcon:N}),y.push(_);return}}),{customPages:v,customPagesPortals:y}},cv=(t,e)=>{const{children:n,label:r,url:s,labelIcon:i}=t;return!n&&!s&&!i&&e.some(o=>o===r)},Cf=t=>{const{children:e,label:n,url:r,labelIcon:s}=t;return!!e&&!!r&&!!s&&!!n},jf=t=>{const{children:e,label:n,url:r,labelIcon:s}=t;return!e&&!!r&&!!s&&!!n},YP=(t,e)=>{var n;return XP({children:t,reorderItemsLabels:["manageAccount","signOut"],MenuItemsComponent:Zd,MenuActionComponent:b2,MenuLinkComponent:w2,UserProfileLinkComponent:zl,UserProfilePageComponent:$l,allowForAnyChildren:(n=e==null?void 0:e.allowForAnyChildren)!=null?n:!1})},XP=({children:t,MenuItemsComponent:e,MenuActionComponent:n,MenuLinkComponent:r,UserProfileLinkComponent:s,UserProfilePageComponent:i,reorderItemsLabels:o,allowForAnyChildren:l=!1})=>{const c=[],u=[],d=[];X.Children.forEach(t,m=>{if(!Ht(m,e)&&!Ht(m,s)&&!Ht(m,i)){m&&!l&&qt(FP);return}if(Ht(m,s)||Ht(m,i))return;const{props:v}=m;X.Children.forEach(v.children,y=>{if(!Ht(y,n)&&!Ht(y,r)){y&&qt(IP);return}const{props:g}=y,{label:b,labelIcon:_,href:C,onClick:N,open:j}=g;if(Ht(y,n))if(uv(g,o))c.push({label:b});else if(Ef(g)){const w={label:b,labelIcon:_};if(N!==void 0)c.push({...w,onClick:N});else if(j!==void 0)c.push({...w,open:j.startsWith("/")?j:`/${j}`});else{qt("Custom menu item must have either onClick or open property");return}}else{qt(zP);return}if(Ht(y,r))if(Nf(g))c.push({label:b,labelIcon:_,href:C});else{qt($P);return}})});const h=[],f=[];c.forEach((m,v)=>{Ef(m)&&h.push({component:m.labelIcon,id:v}),Nf(m)&&f.push({component:m.labelIcon,id:v})});const p=Va(h),x=Va(f);return c.forEach((m,v)=>{if(uv(m,o)&&u.push({label:m.label}),Ef(m)){const{portal:y,mount:g,unmount:b}=p.find(C=>C.id===v),_={label:m.label,mountIcon:g,unmountIcon:b};"onClick"in m?_.onClick=m.onClick:"open"in m&&(_.open=m.open),u.push(_),d.push(y)}if(Nf(m)){const{portal:y,mount:g,unmount:b}=x.find(_=>_.id===v);u.push({label:m.label,href:m.href,mountIcon:g,unmountIcon:b}),d.push(y)}}),{customMenuItems:u,customMenuItemsPortals:d}},uv=(t,e)=>{const{children:n,label:r,onClick:s,labelIcon:i}=t;return!n&&!s&&!i&&e.some(o=>o===r)},Ef=t=>{const{label:e,labelIcon:n,onClick:r,open:s}=t;return!!n&&!!e&&(typeof r=="function"||typeof s=="string")},Nf=t=>{const{label:e,href:n,labelIcon:r}=t;return!!n&&!!r&&!!e},JP=t=>{const e=t==null?void 0:t.isReady;return n=>new Promise((r,s)=>{const{root:i=document==null?void 0:document.body,selector:o,timeout:l=0}=n;if(!i){s(new Error("No root element provided"));return}let c=i;if(o&&(c=i==null?void 0:i.querySelector(o)),e(c,o)){r();return}const u=new MutationObserver(d=>{for(const h of d)if(!c&&o&&(c=i==null?void 0:i.querySelector(o)),(t.childList&&h.type==="childList"||t.attributes&&h.type==="attributes")&&e(c,o)){u.disconnect(),r();return}});u.observe(i,t),l>0&&setTimeout(()=>{u.disconnect(),s(new Error(`Timeout waiting for ${o}`))},l)})},QP=JP({childList:!0,subtree:!0,isReady:(t,e)=>{var n;return!!(t!=null&&t.childElementCount)&&((n=t==null?void 0:t.matches)==null?void 0:n.call(t,e))&&t.childElementCount>0}});function ln(t,e){const n=S.useRef(),[r,s]=S.useState("rendering");return S.useEffect(()=>{if(!t)throw new Error("Clerk: no component name provided, unable to detect mount.");if(typeof window<"u"&&!n.current){const i=`[data-clerk-component="${t}"]`,o=e==null?void 0:e.selector;n.current=QP({selector:o?i+o:i}).then(()=>{s("rendered")}).catch(()=>{s("error")})}},[t,e==null?void 0:e.selector]),r}var Oc=t=>"mount"in t,dv=t=>"open"in t,hv=t=>t==null?void 0:t.map(({mountIcon:e,unmountIcon:n,...r})=>r),$t=class extends X.PureComponent{constructor(){super(...arguments),this.rootRef=X.createRef()}componentDidUpdate(t){var e,n,r,s;if(!Oc(t)||!Oc(this.props))return;const i=lv(t.props,"customPages","customMenuItems","children"),o=lv(this.props.props,"customPages","customMenuItems","children"),l=((e=i.customPages)==null?void 0:e.length)!==((n=o.customPages)==null?void 0:n.length),c=((r=i.customMenuItems)==null?void 0:r.length)!==((s=o.customMenuItems)==null?void 0:s.length),u=hv(t.props.customMenuItems),d=hv(this.props.props.customMenuItems);(!sv(i,o)||!sv(u,d)||l||c)&&this.rootRef.current&&this.props.updateProps({node:this.rootRef.current,props:this.props.props})}componentDidMount(){this.rootRef.current&&(Oc(this.props)&&this.props.mount(this.rootRef.current,this.props.props),dv(this.props)&&this.props.open(this.props.props))}componentWillUnmount(){this.rootRef.current&&(Oc(this.props)&&this.props.unmount(this.rootRef.current),dv(this.props)&&this.props.close())}render(){const{hideRootHtmlElement:t=!1}=this.props,e={ref:this.rootRef,...this.props.rootProps,...this.props.component&&{"data-clerk-component":this.props.component}};return X.createElement(X.Fragment,null,!t&&X.createElement("div",{...e}),this.props.children)}},Qd=t=>{var e,n;return X.createElement(X.Fragment,null,(e=t==null?void 0:t.customPagesPortals)==null?void 0:e.map((r,s)=>S.createElement(r,{key:s})),(n=t==null?void 0:t.customMenuItemsPortals)==null?void 0:n.map((r,s)=>S.createElement(r,{key:s})))};Je(({clerk:t,component:e,fallback:n,...r})=>{const i=ln(e)==="rendering"||!t.loaded,o={...i&&n&&{style:{display:"none"}}};return X.createElement(X.Fragment,null,i&&n,t.loaded&&X.createElement($t,{component:e,mount:t.mountSignIn,unmount:t.unmountSignIn,updateProps:t.__unstable__updateProps,props:r,rootProps:o}))},{component:"SignIn",renderWhileLoading:!0});Je(({clerk:t,component:e,fallback:n,...r})=>{const i=ln(e)==="rendering"||!t.loaded,o={...i&&n&&{style:{display:"none"}}};return X.createElement(X.Fragment,null,i&&n,t.loaded&&X.createElement($t,{component:e,mount:t.mountSignUp,unmount:t.unmountSignUp,updateProps:t.__unstable__updateProps,props:r,rootProps:o}))},{component:"SignUp",renderWhileLoading:!0});function $l({children:t}){return qt(NP),X.createElement(X.Fragment,null,t)}function zl({children:t}){return qt(AP),X.createElement(X.Fragment,null,t)}var ZP=Je(({clerk:t,component:e,fallback:n,...r})=>{const i=ln(e)==="rendering"||!t.loaded,o={...i&&n&&{style:{display:"none"}}},{customPages:l,customPagesPortals:c}=m2(r.children);return X.createElement(X.Fragment,null,i&&n,X.createElement($t,{component:e,mount:t.mountUserProfile,unmount:t.unmountUserProfile,updateProps:t.__unstable__updateProps,props:{...r,customPages:l},rootProps:o},X.createElement(Qd,{customPagesPortals:c})))},{component:"UserProfile",renderWhileLoading:!0});Object.assign(ZP,{Page:$l,Link:zl});var v2=S.createContext({mount:()=>{},unmount:()=>{},updateProps:()=>{}}),eD=Je(({clerk:t,component:e,fallback:n,...r})=>{const i=ln(e)==="rendering"||!t.loaded,o={...i&&n&&{style:{display:"none"}}},{customPages:l,customPagesPortals:c}=m2(r.children,{allowForAnyChildren:!!r.__experimental_asProvider}),u=Object.assign(r.userProfileProps||{},{customPages:l}),{customMenuItems:d,customMenuItemsPortals:h}=YP(r.children,{allowForAnyChildren:!!r.__experimental_asProvider}),f=x2(r.children),p={mount:t.mountUserButton,unmount:t.unmountUserButton,updateProps:t.__unstable__updateProps,props:{...r,userProfileProps:u,customMenuItems:d}},x={customPagesPortals:c,customMenuItemsPortals:h};return X.createElement(v2.Provider,{value:p},i&&n,t.loaded&&X.createElement($t,{component:e,...p,hideRootHtmlElement:!!r.__experimental_asProvider,rootProps:o},r.__experimental_asProvider?f:null,X.createElement(Qd,{...x})))},{component:"UserButton",renderWhileLoading:!0});function Zd({children:t}){return qt(MP),X.createElement(X.Fragment,null,t)}function b2({children:t}){return qt(LP),X.createElement(X.Fragment,null,t)}function w2({children:t}){return qt(BP),X.createElement(X.Fragment,null,t)}function tD(t){const e=S.useContext(v2),n={...e,props:{...e.props,...t}};return X.createElement($t,{...n})}var nD=Object.assign(eD,{UserProfilePage:$l,UserProfileLink:zl,MenuItems:Zd,Action:b2,Link:w2,__experimental_Outlet:tD});function eh({children:t}){return qt(PP),X.createElement(X.Fragment,null,t)}function th({children:t}){return qt(DP),X.createElement(X.Fragment,null,t)}var rD=Je(({clerk:t,component:e,fallback:n,...r})=>{const i=ln(e)==="rendering"||!t.loaded,o={...i&&n&&{style:{display:"none"}}},{customPages:l,customPagesPortals:c}=g2(r.children);return X.createElement(X.Fragment,null,i&&n,t.loaded&&X.createElement($t,{component:e,mount:t.mountOrganizationProfile,unmount:t.unmountOrganizationProfile,updateProps:t.__unstable__updateProps,props:{...r,customPages:l},rootProps:o},X.createElement(Qd,{customPagesPortals:c})))},{component:"OrganizationProfile",renderWhileLoading:!0});Object.assign(rD,{Page:eh,Link:th});Je(({clerk:t,component:e,fallback:n,...r})=>{const i=ln(e)==="rendering"||!t.loaded,o={...i&&n&&{style:{display:"none"}}};return X.createElement(X.Fragment,null,i&&n,t.loaded&&X.createElement($t,{component:e,mount:t.mountCreateOrganization,unmount:t.unmountCreateOrganization,updateProps:t.__unstable__updateProps,props:r,rootProps:o}))},{component:"CreateOrganization",renderWhileLoading:!0});var _2=S.createContext({mount:()=>{},unmount:()=>{},updateProps:()=>{}}),sD=Je(({clerk:t,component:e,fallback:n,...r})=>{const i=ln(e)==="rendering"||!t.loaded,o={...i&&n&&{style:{display:"none"}}},{customPages:l,customPagesPortals:c}=g2(r.children,{allowForAnyChildren:!!r.__experimental_asProvider}),u=Object.assign(r.organizationProfileProps||{},{customPages:l}),d=x2(r.children),h={mount:t.mountOrganizationSwitcher,unmount:t.unmountOrganizationSwitcher,updateProps:t.__unstable__updateProps,props:{...r,organizationProfileProps:u},rootProps:o,component:e};return t.__experimental_prefetchOrganizationSwitcher(),X.createElement(_2.Provider,{value:h},X.createElement(X.Fragment,null,i&&n,t.loaded&&X.createElement($t,{...h,hideRootHtmlElement:!!r.__experimental_asProvider},r.__experimental_asProvider?d:null,X.createElement(Qd,{customPagesPortals:c}))))},{component:"OrganizationSwitcher",renderWhileLoading:!0});function iD(t){const e=S.useContext(_2),n={...e,props:{...e.props,...t}};return X.createElement($t,{...n})}Object.assign(sD,{OrganizationProfilePage:eh,OrganizationProfileLink:th,__experimental_Outlet:iD});Je(({clerk:t,component:e,fallback:n,...r})=>{const i=ln(e)==="rendering"||!t.loaded,o={...i&&n&&{style:{display:"none"}}};return X.createElement(X.Fragment,null,i&&n,t.loaded&&X.createElement($t,{component:e,mount:t.mountOrganizationList,unmount:t.unmountOrganizationList,updateProps:t.__unstable__updateProps,props:r,rootProps:o}))},{component:"OrganizationList",renderWhileLoading:!0});Je(({clerk:t,component:e,fallback:n,...r})=>{const i=ln(e)==="rendering"||!t.loaded,o={...i&&n&&{style:{display:"none"}}};return X.createElement(X.Fragment,null,i&&n,t.loaded&&X.createElement($t,{component:e,open:t.openGoogleOneTap,close:t.closeGoogleOneTap,updateProps:t.__unstable__updateProps,props:r,rootProps:o}))},{component:"GoogleOneTap",renderWhileLoading:!0});Je(({clerk:t,component:e,fallback:n,...r})=>{const i=ln(e)==="rendering"||!t.loaded,o={...i&&n&&{style:{display:"none"}}};return X.createElement(X.Fragment,null,i&&n,t.loaded&&X.createElement($t,{component:e,mount:t.mountWaitlist,unmount:t.unmountWaitlist,updateProps:t.__unstable__updateProps,props:r,rootProps:o}))},{component:"Waitlist",renderWhileLoading:!0});Je(({clerk:t,component:e,fallback:n,...r})=>{const i=ln(e,{selector:'[data-component-status="ready"]'})==="rendering"||!t.loaded,o={...i&&n&&{style:{display:"none"}}};return X.createElement(X.Fragment,null,i&&n,t.loaded&&X.createElement($t,{component:e,mount:t.mountPricingTable,unmount:t.unmountPricingTable,updateProps:t.__unstable__updateProps,props:r,rootProps:o}))},{component:"PricingTable",renderWhileLoading:!0});Je(({clerk:t,component:e,fallback:n,...r})=>{const i=ln(e)==="rendering"||!t.loaded,o={...i&&n&&{style:{display:"none"}}};return X.createElement(X.Fragment,null,i&&n,t.loaded&&X.createElement($t,{component:e,mount:t.mountApiKeys,unmount:t.unmountApiKeys,updateProps:t.__unstable__updateProps,props:r,rootProps:o}))},{component:"ApiKeys",renderWhileLoading:!0});Je(({clerk:t,component:e,fallback:n,...r})=>{const i=ln(e)==="rendering"||!t.loaded,o={...i&&n&&{style:{display:"none"}}};return X.createElement(X.Fragment,null,i&&n,t.loaded&&X.createElement($t,{component:e,mount:t.mountUserAvatar,unmount:t.unmountUserAvatar,updateProps:t.__unstable__updateProps,props:r,rootProps:o}))},{component:"UserAvatar",renderWhileLoading:!0});Je(({clerk:t,component:e,fallback:n,...r})=>{const i=ln(e)==="rendering"||!t.loaded,o={...i&&n&&{style:{display:"none"}}};return X.createElement(X.Fragment,null,i&&n,t.loaded&&X.createElement($t,{component:e,mount:t.mountTaskChooseOrganization,unmount:t.unmountTaskChooseOrganization,updateProps:t.__unstable__updateProps,props:r,rootProps:o}))},{component:"TaskChooseOrganization",renderWhileLoading:!0});var k2=t=>{throw TypeError(t)},Mg=(t,e,n)=>e.has(t)||k2("Cannot "+n),Ze=(t,e,n)=>(Mg(t,e,"read from private field"),n?n.call(t):e.get(t)),ss=(t,e,n)=>e.has(t)?k2("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Ys=(t,e,n,r)=>(Mg(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Af=(t,e,n)=>(Mg(t,e,"access private method"),n),oD=(t,e="5.97.0")=>{if(t)return t;const n=aD(e);return n?n==="snapshot"?"5.97.0":n:lD(e)},aD=t=>{var e;return(e=t.trim().replace(/^v/,"").match(/-(.+?)(\.|$)/))==null?void 0:e[1]},lD=t=>t.trim().replace(/^v/,"").split(".")[0];function cD(t){return t?uD(t)||S2(t):!0}function uD(t){return/^http(s)?:\/\//.test(t||"")}function S2(t){return t.startsWith("/")}function dD(t){return t?S2(t)?new URL(t,window.location.origin).toString():t:""}function hD(t){if(!t)return"";let e;if(t.match(/^(clerk\.)+\w*$/))e=/(clerk\.)*(?=clerk\.)/;else{if(t.match(/\.clerk.accounts/))return t;e=/^(clerk\.)*/gi}return`clerk.${t.replace(e,"")}`}var fD={initialDelay:125,maxDelayBetweenRetries:0,factor:2,shouldRetry:(t,e)=>e<5,retryImmediately:!1,jitter:!0},pD=100,C2=async t=>new Promise(e=>setTimeout(e,t)),j2=(t,e)=>e?t*(1+Math.random()):t,mD=t=>{let e=0;const n=()=>{const r=t.initialDelay,s=t.factor;let i=r*Math.pow(s,e);return i=j2(i,t.jitter),Math.min(t.maxDelayBetweenRetries||i,i)};return async()=>{await C2(n()),e++}},gD=async(t,e={})=>{let n=0;const{shouldRetry:r,initialDelay:s,maxDelayBetweenRetries:i,factor:o,retryImmediately:l,jitter:c,onBeforeRetry:u}={...fD,...e},d=mD({initialDelay:s,maxDelayBetweenRetries:i,factor:o,jitter:c});for(;;)try{return await t()}catch(h){if(n++,!r(h,n))throw h;u&&await u(n),l&&n===1?await C2(j2(pD,c)):await d()}},xD="loadScript cannot be called when document does not exist",yD="loadScript cannot be called without a src";async function vD(t="",e){const{async:n,defer:r,beforeLoad:s,crossOrigin:i,nonce:o}=e||{};return gD(()=>new Promise((c,u)=>{t||u(new Error(yD)),(!document||!document.body)&&u(new Error(xD));const d=document.createElement("script");i&&d.setAttribute("crossorigin",i),d.async=n||!1,d.defer=r||!1,d.addEventListener("load",()=>{d.remove(),c(d)}),d.addEventListener("error",h=>{d.remove(),u(h.error??new Error(`failed to load script: ${t}`))}),d.src=t,d.nonce=o,s==null||s(d),document.body.appendChild(d)}),{shouldRetry:(c,u)=>u<=5})}var bD="failed_to_load_clerk_js",wD="failed_to_load_clerk_js_timeout",E2="Failed to load Clerk",{isDevOrStagingUrl:_D}=i4(),N2=Vk({packageName:"@clerk/shared"});function kD(t){N2.setPackageName({packageName:t})}function tm(){if(typeof window>"u"||!window.Clerk)return!1;const t=window.Clerk;return typeof t=="object"&&typeof t.load=="function"}function fv(t){return new Promise((e,n)=>{let r=!1;const s=(u,d)=>{clearTimeout(u),clearInterval(d)},i=()=>{r||tm()&&(r=!0,s(l,c),e(null))},l=setTimeout(()=>{r||(r=!0,s(l,c),tm()?e(null):n(new Wk(E2,{code:wD})))},t);i();const c=setInterval(()=>{if(r){clearInterval(c);return}i()},100)})}var SD=async t=>{const e=(t==null?void 0:t.scriptLoadTimeout)??15e3;if(tm())return null;if(document.querySelector("script[data-clerk-js-script]"))return fv(e);if(!(t!=null&&t.publishableKey))return N2.throwMissingPublishableKeyError(),null;const r=fv(e);return vD(CD(t),{async:!0,crossOrigin:"anonymous",nonce:t.nonce,beforeLoad:ED(t)}).catch(s=>{throw new Wk(E2+(s.message?`, ${s.message}`:""),{code:bD,cause:s})}),r},CD=t=>{var d,h;const{clerkJSUrl:e,clerkJSVariant:n,clerkJSVersion:r,proxyUrl:s,domain:i,publishableKey:o}=t;if(e)return e;let l="";s&&cD(s)?l=dD(s).replace(/http(s)?:\/\//,""):i&&!_D(((d=Ky(o))==null?void 0:d.frontendApi)||"")?l=hD(i):l=((h=Ky(o))==null?void 0:h.frontendApi)||"";const c=n?`${n.replace(/\.+$/,"")}.`:"",u=oD(r);return`https://${l}/npm/@clerk/clerk-js@${u}/dist/clerk.${c}browser.js`},jD=t=>{const e={};return t.publishableKey&&(e["data-clerk-publishable-key"]=t.publishableKey),t.proxyUrl&&(e["data-clerk-proxy-url"]=t.proxyUrl),t.domain&&(e["data-clerk-domain"]=t.domain),t.nonce&&(e.nonce=t.nonce),e},ED=t=>e=>{const n=jD(t);for(const r in n)e.setAttribute(r,n[r])},ND=(t,e,n)=>!t&&n?AD(n):PD(e),AD=t=>{const e=t.userId,n=t.user,r=t.sessionId,s=t.sessionStatus,i=t.sessionClaims,o=t.session,l=t.organization,c=t.orgId,u=t.orgRole,d=t.orgPermissions,h=t.orgSlug,f=t.actor,p=t.factorVerificationAge;return{userId:e,user:n,sessionId:r,session:o,sessionStatus:s,sessionClaims:i,organization:l,orgId:c,orgRole:u,orgPermissions:d,orgSlug:h,actor:f,factorVerificationAge:p}},PD=t=>{var m,v,y,g;const e=t.user?t.user.id:t.user,n=t.user,r=t.session?t.session.id:t.session,s=t.session,i=(m=t.session)==null?void 0:m.status,o=t.session?(y=(v=t.session.lastActiveToken)==null?void 0:v.jwt)==null?void 0:y.claims:null,l=t.session?t.session.factorVerificationAge:null,c=s==null?void 0:s.actor,u=t.organization,d=t.organization?t.organization.id:t.organization,h=u==null?void 0:u.slug,f=u&&((g=n==null?void 0:n.organizationMemberships)==null?void 0:g.find(b=>b.organization.id===d)),p=f&&f.permissions,x=f&&f.role;return{userId:e,user:n,sessionId:r,session:s,sessionStatus:i,sessionClaims:o,organization:u,orgId:d,orgRole:x,orgSlug:h,orgPermissions:p,actor:c,factorVerificationAge:l}};function ud(){return typeof window<"u"}var pv=(t,e,n,r,s)=>{const{notify:i}=s||{};let o=t.get(n);o||(o=[],t.set(n,o)),o.push(r),i&&e.has(n)&&r(e.get(n))},mv=(t,e,n)=>(t.get(e)||[]).map(r=>r(n)),gv=(t,e,n)=>{const r=t.get(e);r&&(n?r.splice(r.indexOf(n)>>>0,1):t.set(e,[]))},DD=()=>{const t=new Map,e=new Map,n=new Map;return{on:(...s)=>pv(t,e,...s),prioritizedOn:(...s)=>pv(n,e,...s),emit:(s,i)=>{e.set(s,i),mv(n,s,i),mv(t,s,i)},off:(...s)=>gv(t,...s),prioritizedOff:(...s)=>gv(n,...s),internal:{retrieveListeners:s=>t.get(s)||[]}}},Rc={Status:"status"},TD=()=>DD();typeof window<"u"&&!window.global&&(window.global=typeof global>"u"?window:global);var OD=Je(({clerk:t,children:e,...n})=>{const{signUpFallbackRedirectUrl:r,forceRedirectUrl:s,fallbackRedirectUrl:i,signUpForceRedirectUrl:o,mode:l,initialValues:c,withSignUp:u,oauthFlow:d,...h}=n;e=Xd(e,"Sign in");const f=Yd(e)("SignInButton"),p=()=>{const v={forceRedirectUrl:s,fallbackRedirectUrl:i,signUpFallbackRedirectUrl:r,signUpForceRedirectUrl:o,initialValues:c,withSignUp:u,oauthFlow:d};return l==="modal"?t.openSignIn({...v,appearance:n.appearance}):t.redirectToSignIn({...v,signInFallbackRedirectUrl:i,signInForceRedirectUrl:s})},m={...h,onClick:async v=>(f&&typeof f=="object"&&"props"in f&&await Jd(f.props.onClick)(v),p())};return X.cloneElement(f,m)},{component:"SignInButton",renderWhileLoading:!0});Je(({clerk:t,children:e,...n})=>{const{redirectUrl:r,...s}=n;e=Xd(e,"Sign in with Metamask");const i=Yd(e)("SignInWithMetamaskButton"),o=async()=>{async function u(){await t.authenticateWithMetamask({redirectUrl:r||void 0})}u()},c={...s,onClick:async u=>(await Jd(i.props.onClick)(u),o())};return X.cloneElement(i,c)},{component:"SignInWithMetamask",renderWhileLoading:!0});Je(({clerk:t,children:e,...n})=>{const{redirectUrl:r="/",signOutOptions:s,...i}=n;e=Xd(e,"Sign out");const o=Yd(e)("SignOutButton"),l=()=>t.signOut({redirectUrl:r,...s}),u={...i,onClick:async d=>(await Jd(o.props.onClick)(d),l())};return X.cloneElement(o,u)},{component:"SignOutButton",renderWhileLoading:!0});var ku=Je(({clerk:t,children:e,...n})=>{const{fallbackRedirectUrl:r,forceRedirectUrl:s,signInFallbackRedirectUrl:i,signInForceRedirectUrl:o,mode:l,initialValues:c,oauthFlow:u,...d}=n;e=Xd(e,"Sign up");const h=Yd(e)("SignUpButton"),f=()=>{const m={fallbackRedirectUrl:r,forceRedirectUrl:s,signInFallbackRedirectUrl:i,signInForceRedirectUrl:o,initialValues:c,oauthFlow:u};return l==="modal"?t.openSignUp({...m,appearance:n.appearance,unsafeMetadata:n.unsafeMetadata}):t.redirectToSignUp({...m,signUpFallbackRedirectUrl:r,signUpForceRedirectUrl:s})},x={...d,onClick:async m=>(h&&typeof h=="object"&&"props"in h&&await Jd(h.props.onClick)(m),f())};return X.cloneElement(h,x)},{component:"SignUpButton",renderWhileLoading:!0}),xv=()=>({fields:{firstName:null,lastName:null,emailAddress:null,identifier:null,phoneNumber:null,password:null,username:null,code:null,captcha:null,legalAccepted:null},raw:null,global:null}),RD=class{constructor(t){this.isomorphicClerk=t,this.signInSignalProxy=this.buildSignInProxy(),this.signUpSignalProxy=this.buildSignUpProxy()}signInSignal(){return this.signInSignalProxy}signUpSignal(){return this.signUpSignalProxy}buildSignInProxy(){const t=this.gateProperty.bind(this),e=()=>this.client.signIn.__internal_future;return{errors:xv(),fetchStatus:"idle",signIn:{status:"needs_identifier",availableStrategies:[],isTransferable:!1,get firstFactorVerification(){return t(e,"firstFactorVerification",{status:null,error:null,expireAt:null,externalVerificationRedirectURL:null,nonce:null,attempts:null,message:null,strategy:null,verifiedAtClient:null,verifiedFromTheSameClient:()=>!1,__internal_toSnapshot:()=>{throw new Error("__internal_toSnapshot called before Clerk is loaded")},pathRoot:"",reload:()=>{throw new Error("__internal_toSnapshot called before Clerk is loaded")}})},create:this.gateMethod(e,"create"),password:this.gateMethod(e,"password"),sso:this.gateMethod(e,"sso"),finalize:this.gateMethod(e,"finalize"),emailCode:this.wrapMethods(()=>e().emailCode,["sendCode","verifyCode"]),emailLink:this.wrapStruct(()=>e().emailLink,["sendLink","waitForVerification"],["verification"],{verification:null}),resetPasswordEmailCode:this.wrapMethods(()=>e().resetPasswordEmailCode,["sendCode","verifyCode","submitPassword"]),phoneCode:this.wrapMethods(()=>e().phoneCode,["sendCode","verifyCode"]),mfa:this.wrapMethods(()=>e().mfa,["sendPhoneCode","verifyPhoneCode","verifyTOTP","verifyBackupCode"]),ticket:this.gateMethod(e,"ticket")}}}buildSignUpProxy(){const t=this.gateProperty.bind(this),e=this.gateMethod.bind(this),n=this.wrapMethods.bind(this),r=()=>this.client.signUp.__internal_future;return{errors:xv(),fetchStatus:"idle",signUp:{get status(){return t(r,"status","missing_requirements")},get unverifiedFields(){return t(r,"unverifiedFields",[])},get isTransferable(){return t(r,"isTransferable",!1)},create:e(r,"create"),update:e(r,"update"),sso:e(r,"sso"),password:e(r,"password"),ticket:e(r,"ticket"),finalize:e(r,"finalize"),verifications:n(()=>r().verifications,["sendEmailCode","verifyEmailCode","sendPhoneCode","verifyPhoneCode"])}}}__internal_effect(t){throw new Error("__internal_effect called before Clerk is loaded")}__internal_computed(t){throw new Error("__internal_computed called before Clerk is loaded")}get client(){const t=this.isomorphicClerk.client;if(!t)throw new Error("Clerk client not ready");return t}gateProperty(t,e,n){return(()=>!ud()||!this.isomorphicClerk.loaded?n:t()[e])()}gateMethod(t,e){return async(...n)=>{if(!ud())return yr.throw(`Attempted to call a method (${e}) that is not supported on the server.`);this.isomorphicClerk.loaded||await new Promise(s=>this.isomorphicClerk.addOnLoaded(s));const r=t();return r[e].apply(r,n)}}wrapMethods(t,e){return Object.fromEntries(e.map(n=>[n,this.gateMethod(t,n)]))}wrapStruct(t,e,n,r){const s={};for(const i of e)s[i]=this.gateMethod(t,i);for(const i of n)Object.defineProperty(s,i,{get:()=>this.gateProperty(t,i,r[i]),enumerable:!0});return s}};typeof globalThis.__BUILD_DISABLE_RHC__>"u"&&(globalThis.__BUILD_DISABLE_RHC__=!1);var FD={name:"@clerk/clerk-react",version:"5.49.1",environment:"production"},Su,Zi,eo,is,Nr,Cu,ds,ja,ju,A2=class P2{constructor(e){ss(this,ja),this.clerkjs=null,this.preopenOneTap=null,this.preopenUserVerification=null,this.preopenSignIn=null,this.preopenCheckout=null,this.preopenPlanDetails=null,this.preopenSubscriptionDetails=null,this.preopenSignUp=null,this.preopenUserProfile=null,this.preopenOrganizationProfile=null,this.preopenCreateOrganization=null,this.preOpenWaitlist=null,this.premountSignInNodes=new Map,this.premountSignUpNodes=new Map,this.premountUserAvatarNodes=new Map,this.premountUserProfileNodes=new Map,this.premountUserButtonNodes=new Map,this.premountOrganizationProfileNodes=new Map,this.premountCreateOrganizationNodes=new Map,this.premountOrganizationSwitcherNodes=new Map,this.premountOrganizationListNodes=new Map,this.premountMethodCalls=new Map,this.premountWaitlistNodes=new Map,this.premountPricingTableNodes=new Map,this.premountApiKeysNodes=new Map,this.premountOAuthConsentNodes=new Map,this.premountTaskChooseOrganizationNodes=new Map,this.premountAddListenerCalls=new Map,this.loadedListeners=[],ss(this,Su,"loading"),ss(this,Zi),ss(this,eo),ss(this,is),ss(this,Nr,TD()),ss(this,Cu),this.buildSignInUrl=s=>{const i=()=>{var o;return((o=this.clerkjs)==null?void 0:o.buildSignInUrl(s))||""};if(this.clerkjs&&this.loaded)return i();this.premountMethodCalls.set("buildSignInUrl",i)},this.buildSignUpUrl=s=>{const i=()=>{var o;return((o=this.clerkjs)==null?void 0:o.buildSignUpUrl(s))||""};if(this.clerkjs&&this.loaded)return i();this.premountMethodCalls.set("buildSignUpUrl",i)},this.buildAfterSignInUrl=(...s)=>{const i=()=>{var o;return((o=this.clerkjs)==null?void 0:o.buildAfterSignInUrl(...s))||""};if(this.clerkjs&&this.loaded)return i();this.premountMethodCalls.set("buildAfterSignInUrl",i)},this.buildAfterSignUpUrl=(...s)=>{const i=()=>{var o;return((o=this.clerkjs)==null?void 0:o.buildAfterSignUpUrl(...s))||""};if(this.clerkjs&&this.loaded)return i();this.premountMethodCalls.set("buildAfterSignUpUrl",i)},this.buildAfterSignOutUrl=()=>{const s=()=>{var i;return((i=this.clerkjs)==null?void 0:i.buildAfterSignOutUrl())||""};if(this.clerkjs&&this.loaded)return s();this.premountMethodCalls.set("buildAfterSignOutUrl",s)},this.buildNewSubscriptionRedirectUrl=()=>{const s=()=>{var i;return((i=this.clerkjs)==null?void 0:i.buildNewSubscriptionRedirectUrl())||""};if(this.clerkjs&&this.loaded)return s();this.premountMethodCalls.set("buildNewSubscriptionRedirectUrl",s)},this.buildAfterMultiSessionSingleSignOutUrl=()=>{const s=()=>{var i;return((i=this.clerkjs)==null?void 0:i.buildAfterMultiSessionSingleSignOutUrl())||""};if(this.clerkjs&&this.loaded)return s();this.premountMethodCalls.set("buildAfterMultiSessionSingleSignOutUrl",s)},this.buildUserProfileUrl=()=>{const s=()=>{var i;return((i=this.clerkjs)==null?void 0:i.buildUserProfileUrl())||""};if(this.clerkjs&&this.loaded)return s();this.premountMethodCalls.set("buildUserProfileUrl",s)},this.buildCreateOrganizationUrl=()=>{const s=()=>{var i;return((i=this.clerkjs)==null?void 0:i.buildCreateOrganizationUrl())||""};if(this.clerkjs&&this.loaded)return s();this.premountMethodCalls.set("buildCreateOrganizationUrl",s)},this.buildOrganizationProfileUrl=()=>{const s=()=>{var i;return((i=this.clerkjs)==null?void 0:i.buildOrganizationProfileUrl())||""};if(this.clerkjs&&this.loaded)return s();this.premountMethodCalls.set("buildOrganizationProfileUrl",s)},this.buildWaitlistUrl=()=>{const s=()=>{var i;return((i=this.clerkjs)==null?void 0:i.buildWaitlistUrl())||""};if(this.clerkjs&&this.loaded)return s();this.premountMethodCalls.set("buildWaitlistUrl",s)},this.buildTasksUrl=()=>{const s=()=>{var i;return((i=this.clerkjs)==null?void 0:i.buildTasksUrl())||""};if(this.clerkjs&&this.loaded)return s();this.premountMethodCalls.set("buildTasksUrl",s)},this.buildUrlWithAuth=s=>{const i=()=>{var o;return((o=this.clerkjs)==null?void 0:o.buildUrlWithAuth(s))||""};if(this.clerkjs&&this.loaded)return i();this.premountMethodCalls.set("buildUrlWithAuth",i)},this.handleUnauthenticated=async()=>{const s=()=>{var i;return(i=this.clerkjs)==null?void 0:i.handleUnauthenticated()};this.clerkjs&&this.loaded?s():this.premountMethodCalls.set("handleUnauthenticated",s)},this.on=(...s)=>{var i;if((i=this.clerkjs)!=null&&i.on)return this.clerkjs.on(...s);Ze(this,Nr).on(...s)},this.off=(...s)=>{var i;if((i=this.clerkjs)!=null&&i.off)return this.clerkjs.off(...s);Ze(this,Nr).off(...s)},this.addOnLoaded=s=>{this.loadedListeners.push(s),this.loaded&&this.emitLoaded()},this.emitLoaded=()=>{this.loadedListeners.forEach(s=>s()),this.loadedListeners=[]},this.beforeLoad=s=>{if(!s)throw new Error("Failed to hydrate latest Clerk JS")},this.hydrateClerkJS=s=>{var i;if(!s)throw new Error("Failed to hydrate latest Clerk JS");return this.clerkjs=s,this.premountMethodCalls.forEach(o=>o()),this.premountAddListenerCalls.forEach((o,l)=>{o.nativeUnsubscribe=s.addListener(l)}),(i=Ze(this,Nr).internal.retrieveListeners("status"))==null||i.forEach(o=>{this.on("status",o,{notify:!0})}),this.preopenSignIn!==null&&s.openSignIn(this.preopenSignIn),this.preopenCheckout!==null&&s.__internal_openCheckout(this.preopenCheckout),this.preopenPlanDetails!==null&&s.__internal_openPlanDetails(this.preopenPlanDetails),this.preopenSubscriptionDetails!==null&&s.__internal_openSubscriptionDetails(this.preopenSubscriptionDetails),this.preopenSignUp!==null&&s.openSignUp(this.preopenSignUp),this.preopenUserProfile!==null&&s.openUserProfile(this.preopenUserProfile),this.preopenUserVerification!==null&&s.__internal_openReverification(this.preopenUserVerification),this.preopenOneTap!==null&&s.openGoogleOneTap(this.preopenOneTap),this.preopenOrganizationProfile!==null&&s.openOrganizationProfile(this.preopenOrganizationProfile),this.preopenCreateOrganization!==null&&s.openCreateOrganization(this.preopenCreateOrganization),this.preOpenWaitlist!==null&&s.openWaitlist(this.preOpenWaitlist),this.premountSignInNodes.forEach((o,l)=>{s.mountSignIn(l,o)}),this.premountSignUpNodes.forEach((o,l)=>{s.mountSignUp(l,o)}),this.premountUserProfileNodes.forEach((o,l)=>{s.mountUserProfile(l,o)}),this.premountUserAvatarNodes.forEach((o,l)=>{s.mountUserAvatar(l,o)}),this.premountUserButtonNodes.forEach((o,l)=>{s.mountUserButton(l,o)}),this.premountOrganizationListNodes.forEach((o,l)=>{s.mountOrganizationList(l,o)}),this.premountWaitlistNodes.forEach((o,l)=>{s.mountWaitlist(l,o)}),this.premountPricingTableNodes.forEach((o,l)=>{s.mountPricingTable(l,o)}),this.premountApiKeysNodes.forEach((o,l)=>{s.mountApiKeys(l,o)}),this.premountOAuthConsentNodes.forEach((o,l)=>{s.__internal_mountOAuthConsent(l,o)}),this.premountTaskChooseOrganizationNodes.forEach((o,l)=>{s.mountTaskChooseOrganization(l,o)}),typeof this.clerkjs.status>"u"&&Ze(this,Nr).emit(Rc.Status,"ready"),this.emitLoaded(),this.clerkjs},this.__experimental_checkout=(...s)=>{var i;return(i=this.clerkjs)==null?void 0:i.__experimental_checkout(...s)},this.__unstable__updateProps=async s=>{const i=await Af(this,ja,ju).call(this);if(i&&"__unstable__updateProps"in i)return i.__unstable__updateProps(s)},this.setActive=s=>this.clerkjs?this.clerkjs.setActive(s):Promise.reject(),this.openSignIn=s=>{this.clerkjs&&this.loaded?this.clerkjs.openSignIn(s):this.preopenSignIn=s},this.closeSignIn=()=>{this.clerkjs&&this.loaded?this.clerkjs.closeSignIn():this.preopenSignIn=null},this.__internal_openCheckout=s=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_openCheckout(s):this.preopenCheckout=s},this.__internal_closeCheckout=()=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_closeCheckout():this.preopenCheckout=null},this.__internal_openPlanDetails=s=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_openPlanDetails(s):this.preopenPlanDetails=s},this.__internal_closePlanDetails=()=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_closePlanDetails():this.preopenPlanDetails=null},this.__internal_openSubscriptionDetails=s=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_openSubscriptionDetails(s):this.preopenSubscriptionDetails=s??null},this.__internal_closeSubscriptionDetails=()=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_closeSubscriptionDetails():this.preopenSubscriptionDetails=null},this.__internal_openReverification=s=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_openReverification(s):this.preopenUserVerification=s},this.__internal_closeReverification=()=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_closeReverification():this.preopenUserVerification=null},this.openGoogleOneTap=s=>{this.clerkjs&&this.loaded?this.clerkjs.openGoogleOneTap(s):this.preopenOneTap=s},this.closeGoogleOneTap=()=>{this.clerkjs&&this.loaded?this.clerkjs.closeGoogleOneTap():this.preopenOneTap=null},this.openUserProfile=s=>{this.clerkjs&&this.loaded?this.clerkjs.openUserProfile(s):this.preopenUserProfile=s},this.closeUserProfile=()=>{this.clerkjs&&this.loaded?this.clerkjs.closeUserProfile():this.preopenUserProfile=null},this.openOrganizationProfile=s=>{this.clerkjs&&this.loaded?this.clerkjs.openOrganizationProfile(s):this.preopenOrganizationProfile=s},this.closeOrganizationProfile=()=>{this.clerkjs&&this.loaded?this.clerkjs.closeOrganizationProfile():this.preopenOrganizationProfile=null},this.openCreateOrganization=s=>{this.clerkjs&&this.loaded?this.clerkjs.openCreateOrganization(s):this.preopenCreateOrganization=s},this.closeCreateOrganization=()=>{this.clerkjs&&this.loaded?this.clerkjs.closeCreateOrganization():this.preopenCreateOrganization=null},this.openWaitlist=s=>{this.clerkjs&&this.loaded?this.clerkjs.openWaitlist(s):this.preOpenWaitlist=s},this.closeWaitlist=()=>{this.clerkjs&&this.loaded?this.clerkjs.closeWaitlist():this.preOpenWaitlist=null},this.openSignUp=s=>{this.clerkjs&&this.loaded?this.clerkjs.openSignUp(s):this.preopenSignUp=s},this.closeSignUp=()=>{this.clerkjs&&this.loaded?this.clerkjs.closeSignUp():this.preopenSignUp=null},this.mountSignIn=(s,i)=>{this.clerkjs&&this.loaded?this.clerkjs.mountSignIn(s,i):this.premountSignInNodes.set(s,i)},this.unmountSignIn=s=>{this.clerkjs&&this.loaded?this.clerkjs.unmountSignIn(s):this.premountSignInNodes.delete(s)},this.mountSignUp=(s,i)=>{this.clerkjs&&this.loaded?this.clerkjs.mountSignUp(s,i):this.premountSignUpNodes.set(s,i)},this.unmountSignUp=s=>{this.clerkjs&&this.loaded?this.clerkjs.unmountSignUp(s):this.premountSignUpNodes.delete(s)},this.mountUserAvatar=(s,i)=>{this.clerkjs&&this.loaded?this.clerkjs.mountUserAvatar(s,i):this.premountUserAvatarNodes.set(s,i)},this.unmountUserAvatar=s=>{this.clerkjs&&this.loaded?this.clerkjs.unmountUserAvatar(s):this.premountUserAvatarNodes.delete(s)},this.mountUserProfile=(s,i)=>{this.clerkjs&&this.loaded?this.clerkjs.mountUserProfile(s,i):this.premountUserProfileNodes.set(s,i)},this.unmountUserProfile=s=>{this.clerkjs&&this.loaded?this.clerkjs.unmountUserProfile(s):this.premountUserProfileNodes.delete(s)},this.mountOrganizationProfile=(s,i)=>{this.clerkjs&&this.loaded?this.clerkjs.mountOrganizationProfile(s,i):this.premountOrganizationProfileNodes.set(s,i)},this.unmountOrganizationProfile=s=>{this.clerkjs&&this.loaded?this.clerkjs.unmountOrganizationProfile(s):this.premountOrganizationProfileNodes.delete(s)},this.mountCreateOrganization=(s,i)=>{this.clerkjs&&this.loaded?this.clerkjs.mountCreateOrganization(s,i):this.premountCreateOrganizationNodes.set(s,i)},this.unmountCreateOrganization=s=>{this.clerkjs&&this.loaded?this.clerkjs.unmountCreateOrganization(s):this.premountCreateOrganizationNodes.delete(s)},this.mountOrganizationSwitcher=(s,i)=>{this.clerkjs&&this.loaded?this.clerkjs.mountOrganizationSwitcher(s,i):this.premountOrganizationSwitcherNodes.set(s,i)},this.unmountOrganizationSwitcher=s=>{this.clerkjs&&this.loaded?this.clerkjs.unmountOrganizationSwitcher(s):this.premountOrganizationSwitcherNodes.delete(s)},this.__experimental_prefetchOrganizationSwitcher=()=>{const s=()=>{var i;return(i=this.clerkjs)==null?void 0:i.__experimental_prefetchOrganizationSwitcher()};this.clerkjs&&this.loaded?s():this.premountMethodCalls.set("__experimental_prefetchOrganizationSwitcher",s)},this.mountOrganizationList=(s,i)=>{this.clerkjs&&this.loaded?this.clerkjs.mountOrganizationList(s,i):this.premountOrganizationListNodes.set(s,i)},this.unmountOrganizationList=s=>{this.clerkjs&&this.loaded?this.clerkjs.unmountOrganizationList(s):this.premountOrganizationListNodes.delete(s)},this.mountUserButton=(s,i)=>{this.clerkjs&&this.loaded?this.clerkjs.mountUserButton(s,i):this.premountUserButtonNodes.set(s,i)},this.unmountUserButton=s=>{this.clerkjs&&this.loaded?this.clerkjs.unmountUserButton(s):this.premountUserButtonNodes.delete(s)},this.mountWaitlist=(s,i)=>{this.clerkjs&&this.loaded?this.clerkjs.mountWaitlist(s,i):this.premountWaitlistNodes.set(s,i)},this.unmountWaitlist=s=>{this.clerkjs&&this.loaded?this.clerkjs.unmountWaitlist(s):this.premountWaitlistNodes.delete(s)},this.mountPricingTable=(s,i)=>{this.clerkjs&&this.loaded?this.clerkjs.mountPricingTable(s,i):this.premountPricingTableNodes.set(s,i)},this.unmountPricingTable=s=>{this.clerkjs&&this.loaded?this.clerkjs.unmountPricingTable(s):this.premountPricingTableNodes.delete(s)},this.mountApiKeys=(s,i)=>{this.clerkjs&&this.loaded?this.clerkjs.mountApiKeys(s,i):this.premountApiKeysNodes.set(s,i)},this.unmountApiKeys=s=>{this.clerkjs&&this.loaded?this.clerkjs.unmountApiKeys(s):this.premountApiKeysNodes.delete(s)},this.__internal_mountOAuthConsent=(s,i)=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_mountOAuthConsent(s,i):this.premountOAuthConsentNodes.set(s,i)},this.__internal_unmountOAuthConsent=s=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_unmountOAuthConsent(s):this.premountOAuthConsentNodes.delete(s)},this.mountTaskChooseOrganization=(s,i)=>{this.clerkjs&&this.loaded?this.clerkjs.mountTaskChooseOrganization(s,i):this.premountTaskChooseOrganizationNodes.set(s,i)},this.unmountTaskChooseOrganization=s=>{this.clerkjs&&this.loaded?this.clerkjs.unmountTaskChooseOrganization(s):this.premountTaskChooseOrganizationNodes.delete(s)},this.addListener=s=>{if(this.clerkjs)return this.clerkjs.addListener(s);{const i=()=>{var o;const l=this.premountAddListenerCalls.get(s);l&&((o=l.nativeUnsubscribe)==null||o.call(l),this.premountAddListenerCalls.delete(s))};return this.premountAddListenerCalls.set(s,{unsubscribe:i,nativeUnsubscribe:void 0}),i}},this.navigate=s=>{const i=()=>{var o;return(o=this.clerkjs)==null?void 0:o.navigate(s)};this.clerkjs&&this.loaded?i():this.premountMethodCalls.set("navigate",i)},this.redirectWithAuth=async(...s)=>{const i=()=>{var o;return(o=this.clerkjs)==null?void 0:o.redirectWithAuth(...s)};if(this.clerkjs&&this.loaded)return i();this.premountMethodCalls.set("redirectWithAuth",i)},this.redirectToSignIn=async s=>{const i=()=>{var o;return(o=this.clerkjs)==null?void 0:o.redirectToSignIn(s)};if(this.clerkjs&&this.loaded)return i();this.premountMethodCalls.set("redirectToSignIn",i)},this.redirectToSignUp=async s=>{const i=()=>{var o;return(o=this.clerkjs)==null?void 0:o.redirectToSignUp(s)};if(this.clerkjs&&this.loaded)return i();this.premountMethodCalls.set("redirectToSignUp",i)},this.redirectToUserProfile=async()=>{const s=()=>{var i;return(i=this.clerkjs)==null?void 0:i.redirectToUserProfile()};if(this.clerkjs&&this.loaded)return s();this.premountMethodCalls.set("redirectToUserProfile",s)},this.redirectToAfterSignUp=()=>{const s=()=>{var i;return(i=this.clerkjs)==null?void 0:i.redirectToAfterSignUp()};if(this.clerkjs&&this.loaded)return s();this.premountMethodCalls.set("redirectToAfterSignUp",s)},this.redirectToAfterSignIn=()=>{const s=()=>{var i;return(i=this.clerkjs)==null?void 0:i.redirectToAfterSignIn()};this.clerkjs&&this.loaded?s():this.premountMethodCalls.set("redirectToAfterSignIn",s)},this.redirectToAfterSignOut=()=>{const s=()=>{var i;return(i=this.clerkjs)==null?void 0:i.redirectToAfterSignOut()};this.clerkjs&&this.loaded?s():this.premountMethodCalls.set("redirectToAfterSignOut",s)},this.redirectToOrganizationProfile=async()=>{const s=()=>{var i;return(i=this.clerkjs)==null?void 0:i.redirectToOrganizationProfile()};if(this.clerkjs&&this.loaded)return s();this.premountMethodCalls.set("redirectToOrganizationProfile",s)},this.redirectToCreateOrganization=async()=>{const s=()=>{var i;return(i=this.clerkjs)==null?void 0:i.redirectToCreateOrganization()};if(this.clerkjs&&this.loaded)return s();this.premountMethodCalls.set("redirectToCreateOrganization",s)},this.redirectToWaitlist=async()=>{const s=()=>{var i;return(i=this.clerkjs)==null?void 0:i.redirectToWaitlist()};if(this.clerkjs&&this.loaded)return s();this.premountMethodCalls.set("redirectToWaitlist",s)},this.redirectToTasks=async s=>{const i=()=>{var o;return(o=this.clerkjs)==null?void 0:o.redirectToTasks(s)};if(this.clerkjs&&this.loaded)return i();this.premountMethodCalls.set("redirectToTasks",i)},this.handleRedirectCallback=async s=>{var i;const o=()=>{var l;return(l=this.clerkjs)==null?void 0:l.handleRedirectCallback(s)};this.clerkjs&&this.loaded?(i=o())==null||i.catch(()=>{}):this.premountMethodCalls.set("handleRedirectCallback",o)},this.handleGoogleOneTapCallback=async(s,i)=>{var o;const l=()=>{var c;return(c=this.clerkjs)==null?void 0:c.handleGoogleOneTapCallback(s,i)};this.clerkjs&&this.loaded?(o=l())==null||o.catch(()=>{}):this.premountMethodCalls.set("handleGoogleOneTapCallback",l)},this.handleEmailLinkVerification=async s=>{const i=()=>{var o;return(o=this.clerkjs)==null?void 0:o.handleEmailLinkVerification(s)};if(this.clerkjs&&this.loaded)return i();this.premountMethodCalls.set("handleEmailLinkVerification",i)},this.authenticateWithMetamask=async s=>{const i=()=>{var o;return(o=this.clerkjs)==null?void 0:o.authenticateWithMetamask(s)};if(this.clerkjs&&this.loaded)return i();this.premountMethodCalls.set("authenticateWithMetamask",i)},this.authenticateWithCoinbaseWallet=async s=>{const i=()=>{var o;return(o=this.clerkjs)==null?void 0:o.authenticateWithCoinbaseWallet(s)};if(this.clerkjs&&this.loaded)return i();this.premountMethodCalls.set("authenticateWithCoinbaseWallet",i)},this.authenticateWithBase=async s=>{const i=()=>{var o;return(o=this.clerkjs)==null?void 0:o.authenticateWithBase(s)};if(this.clerkjs&&this.loaded)return i();this.premountMethodCalls.set("authenticateWithBase",i)},this.authenticateWithOKXWallet=async s=>{const i=()=>{var o;return(o=this.clerkjs)==null?void 0:o.authenticateWithOKXWallet(s)};if(this.clerkjs&&this.loaded)return i();this.premountMethodCalls.set("authenticateWithOKXWallet",i)},this.authenticateWithWeb3=async s=>{const i=()=>{var o;return(o=this.clerkjs)==null?void 0:o.authenticateWithWeb3(s)};if(this.clerkjs&&this.loaded)return i();this.premountMethodCalls.set("authenticateWithWeb3",i)},this.authenticateWithGoogleOneTap=async s=>(await Af(this,ja,ju).call(this)).authenticateWithGoogleOneTap(s),this.__internal_loadStripeJs=async()=>(await Af(this,ja,ju).call(this)).__internal_loadStripeJs(),this.createOrganization=async s=>{const i=()=>{var o;return(o=this.clerkjs)==null?void 0:o.createOrganization(s)};if(this.clerkjs&&this.loaded)return i();this.premountMethodCalls.set("createOrganization",i)},this.getOrganization=async s=>{const i=()=>{var o;return(o=this.clerkjs)==null?void 0:o.getOrganization(s)};if(this.clerkjs&&this.loaded)return i();this.premountMethodCalls.set("getOrganization",i)},this.joinWaitlist=async s=>{const i=()=>{var o;return(o=this.clerkjs)==null?void 0:o.joinWaitlist(s)};if(this.clerkjs&&this.loaded)return i();this.premountMethodCalls.set("joinWaitlist",i)},this.signOut=async(...s)=>{const i=()=>{var o;return(o=this.clerkjs)==null?void 0:o.signOut(...s)};if(this.clerkjs&&this.loaded)return i();this.premountMethodCalls.set("signOut",i)};const{Clerk:n=null,publishableKey:r}=e||{};Ys(this,is,r),Ys(this,eo,e==null?void 0:e.proxyUrl),Ys(this,Zi,e==null?void 0:e.domain),this.options=e,this.Clerk=n,this.mode=ud()?"browser":"server",Ys(this,Cu,new RD(this)),this.options.sdkMetadata||(this.options.sdkMetadata=FD),Ze(this,Nr).emit(Rc.Status,"loading"),Ze(this,Nr).prioritizedOn(Rc.Status,s=>Ys(this,Su,s)),Ze(this,is)&&this.loadClerkJS()}get publishableKey(){return Ze(this,is)}get loaded(){var e;return((e=this.clerkjs)==null?void 0:e.loaded)||!1}get status(){var e;return this.clerkjs?((e=this.clerkjs)==null?void 0:e.status)||(this.clerkjs.loaded?"ready":"loading"):Ze(this,Su)}static getOrCreateInstance(e){return(!ud()||!Ze(this,ds)||e.Clerk&&Ze(this,ds).Clerk!==e.Clerk||Ze(this,ds).publishableKey!==e.publishableKey)&&Ys(this,ds,new P2(e)),Ze(this,ds)}static clearInstance(){Ys(this,ds,null)}get domain(){return typeof window<"u"&&window.location?Sf(Ze(this,Zi),new URL(window.location.href),""):typeof Ze(this,Zi)=="function"?yr.throw(kf):Ze(this,Zi)||""}get proxyUrl(){return typeof window<"u"&&window.location?Sf(Ze(this,eo),new URL(window.location.href),""):typeof Ze(this,eo)=="function"?yr.throw(kf):Ze(this,eo)||""}__internal_getOption(e){var n,r;return(n=this.clerkjs)!=null&&n.__internal_getOption?(r=this.clerkjs)==null?void 0:r.__internal_getOption(e):this.options[e]}get sdkMetadata(){var e;return((e=this.clerkjs)==null?void 0:e.sdkMetadata)||this.options.sdkMetadata||void 0}get instanceType(){var e;return(e=this.clerkjs)==null?void 0:e.instanceType}get frontendApi(){var e;return((e=this.clerkjs)==null?void 0:e.frontendApi)||""}get isStandardBrowser(){var e;return((e=this.clerkjs)==null?void 0:e.isStandardBrowser)||this.options.standardBrowser||!1}get isSatellite(){return typeof window<"u"&&window.location?Sf(this.options.isSatellite,new URL(window.location.href),!1):typeof this.options.isSatellite=="function"?yr.throw(kf):!1}async loadClerkJS(){var e;if(!(this.mode!=="browser"||this.loaded)){typeof window<"u"&&(window.__clerk_publishable_key=Ze(this,is),window.__clerk_proxy_url=this.proxyUrl,window.__clerk_domain=this.domain);try{if(this.Clerk){let n;qP(this.Clerk)?(n=new this.Clerk(Ze(this,is),{proxyUrl:this.proxyUrl,domain:this.domain}),this.beforeLoad(n),await n.load(this.options)):(n=this.Clerk,n.loaded||(this.beforeLoad(n),await n.load(this.options))),global.Clerk=n}else if(!__BUILD_DISABLE_RHC__){if(global.Clerk||await SD({...this.options,publishableKey:Ze(this,is),proxyUrl:this.proxyUrl,domain:this.domain,nonce:this.options.nonce}),!global.Clerk)throw new Error("Failed to download latest ClerkJS. Contact support@clerk.com.");this.beforeLoad(global.Clerk),await global.Clerk.load(this.options)}return(e=global.Clerk)!=null&&e.loaded?this.hydrateClerkJS(global.Clerk):void 0}catch(n){const r=n;Ze(this,Nr).emit(Rc.Status,"error"),console.error(r.stack||r.message||r);return}}}get version(){var e;return(e=this.clerkjs)==null?void 0:e.version}get client(){if(this.clerkjs)return this.clerkjs.client}get session(){if(this.clerkjs)return this.clerkjs.session}get user(){if(this.clerkjs)return this.clerkjs.user}get organization(){if(this.clerkjs)return this.clerkjs.organization}get telemetry(){if(this.clerkjs)return this.clerkjs.telemetry}get __unstable__environment(){if(this.clerkjs)return this.clerkjs.__unstable__environment}get isSignedIn(){return this.clerkjs?this.clerkjs.isSignedIn:!1}get billing(){var e;return(e=this.clerkjs)==null?void 0:e.billing}get __internal_state(){return this.loaded&&this.clerkjs?this.clerkjs.__internal_state:Ze(this,Cu)}get apiKeys(){var e;return(e=this.clerkjs)==null?void 0:e.apiKeys}__unstable__setEnvironment(...e){if(this.clerkjs&&"__unstable__setEnvironment"in this.clerkjs)this.clerkjs.__unstable__setEnvironment(e);else return}};Su=new WeakMap;Zi=new WeakMap;eo=new WeakMap;is=new WeakMap;Nr=new WeakMap;Cu=new WeakMap;ds=new WeakMap;ja=new WeakSet;ju=function(){return new Promise(t=>{this.addOnLoaded(()=>t(this.clerkjs))})};ss(A2,ds);var yv=A2;function ID(t){const{isomorphicClerkOptions:e,initialState:n,children:r}=t,{isomorphicClerk:s,clerkStatus:i}=MD(e),[o,l]=X.useState({client:s.client,session:s.session,user:s.user,organization:s.organization});X.useEffect(()=>s.addListener(A=>l({...A})),[]);const c=ND(s.loaded,o,n),u=X.useMemo(()=>({value:s}),[i]),d=X.useMemo(()=>({value:o.client}),[o.client]),{sessionId:h,sessionStatus:f,sessionClaims:p,session:x,userId:m,user:v,orgId:y,actor:g,organization:b,orgRole:_,orgSlug:C,orgPermissions:N,factorVerificationAge:j}=c,w=X.useMemo(()=>({value:{sessionId:h,sessionStatus:f,sessionClaims:p,userId:m,actor:g,orgId:y,orgRole:_,orgSlug:C,orgPermissions:N,factorVerificationAge:j}}),[h,f,m,g,y,_,C,j,p==null?void 0:p.__raw]),k=X.useMemo(()=>({value:x}),[h,x]),E=X.useMemo(()=>({value:v}),[m,v]),P=X.useMemo(()=>({value:{organization:b}}),[y,b]);return X.createElement(SP.Provider,{value:u},X.createElement(cP.Provider,{value:d},X.createElement(uP.Provider,{value:k},X.createElement(pP,{...P.value},X.createElement(kP.Provider,{value:w},X.createElement(aP.Provider,{value:E},X.createElement(hP,{value:void 0},r)))))))}var MD=t=>{const e=X.useRef(yv.getOrCreateInstance(t)),[n,r]=X.useState(e.current.status);return X.useEffect(()=>{e.current.__unstable__updateProps({appearance:t.appearance})},[t.appearance]),X.useEffect(()=>{e.current.__unstable__updateProps({options:t})},[t.localization]),X.useEffect(()=>(e.current.on("status",r),()=>{e.current&&e.current.off("status",r),yv.clearInstance()}),[]),{isomorphicClerk:e.current,clerkStatus:n}};function LD(t){const{initialState:e,children:n,__internal_bypassMissingPublishableKey:r,...s}=t,{publishableKey:i="",Clerk:o}=s;return!o&&!r&&(i?i&&!Up(i)&&yr.throwInvalidPublishableKeyError({key:i}):yr.throwMissingPublishableKeyError()),X.createElement(ID,{initialState:e,isomorphicClerkOptions:s},n)}var D2=GP(LD,"ClerkProvider",jP);D2.displayName="ClerkProvider";_P({packageName:"@clerk/clerk-react"});kD("@clerk/clerk-react");/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var BD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $D=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),me=(t,e)=>{const n=S.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...u},d)=>S.createElement("svg",{ref:d,...BD,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${$D(t)}`,l].join(" "),...u},[...e.map(([h,f])=>S.createElement(h,f)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=me("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vv=me("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zD=me("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fc=me("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=me("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zn=me("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bv=me("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=me("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ci=me("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=me("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lg=me("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UD=me("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nh=me("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VD=me("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xl=me("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wv=me("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T2=me("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=me("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ko=me("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WD=me("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=me("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=me("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O2=me("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HD=me("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qD=me("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KD=me("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GD=me("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YD=me("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=me("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XD=me("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bg=me("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JD=me("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QD=me("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R2=me("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZD=me("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yl=me("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eT=me("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rh=me("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F2=me("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=me("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sh=me("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tT=me("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dd=me("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nT=me("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rT=me("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sT=me("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kv=me("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Go=me("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hd=me("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=me("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ji=me("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=me("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=me("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iT=me("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=me("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),pi=({size:t="md",showText:e=!0,className:n=""})=>{const r={sm:"w-10 h-10",md:"w-14 h-14",lg:"w-20 h-20",xl:"w-24 h-24"},s={sm:"text-sm",md:"text-lg",lg:"text-xl",xl:"text-2xl"};return a.jsxs("div",{className:`flex items-center gap-3 ${n}`,children:[a.jsx("div",{className:`${r[t]} relative`,children:a.jsx("img",{src:"/propfi-logo.jpg",alt:"PropFi",className:"w-full h-full object-contain",style:{objectFit:"contain",maxWidth:"100%",height:"auto"},onError:i=>{const o=i.target;o.src="/propfi-logo.pdf"}})}),e&&a.jsx("span",{className:`font-bold text-gray-900 ${s[t]}`,children:"PropFi"})]})};function Cv(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function ih(...t){return e=>{let n=!1;const r=t.map(s=>{const i=Cv(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():Cv(t[s],null)}}}}function an(...t){return S.useCallback(ih(...t),t)}function vl(t){const e=aT(t),n=S.forwardRef((r,s)=>{const{children:i,...o}=r,l=S.Children.toArray(i),c=l.find(cT);if(c){const u=c.props.children,d=l.map(h=>h===c?S.Children.count(u)>1?S.Children.only(null):S.isValidElement(u)?u.props.children:null:h);return a.jsx(e,{...o,ref:s,children:S.isValidElement(u)?S.cloneElement(u,void 0,d):null})}return a.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var oT=vl("Slot");function aT(t){const e=S.forwardRef((n,r)=>{const{children:s,...i}=n;if(S.isValidElement(s)){const o=dT(s),l=uT(i,s.props);return s.type!==S.Fragment&&(l.ref=r?ih(r,o):o),S.cloneElement(s,l)}return S.Children.count(s)>1?S.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var lT=Symbol("radix.slottable");function cT(t){return S.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===lT}function uT(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function dT(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function I2(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=I2(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function M2(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=I2(t))&&(r&&(r+=" "),r+=e);return r}const jv=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Ev=M2,$g=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return Ev(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(u=>{const d=n==null?void 0:n[u],h=i==null?void 0:i[u];if(d===null)return null;const f=jv(d)||jv(h);return s[u][f]}),l=n&&Object.entries(n).reduce((u,d)=>{let[h,f]=d;return f===void 0||(u[h]=f),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:h,className:f,...p}=d;return Object.entries(p).every(x=>{let[m,v]=x;return Array.isArray(v)?v.includes({...i,...l}[m]):{...i,...l}[m]===v})?[...u,h,f]:u},[]);return Ev(t,o,c,n==null?void 0:n.class,n==null?void 0:n.className)},zg="-",hT=t=>{const e=pT(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const l=o.split(zg);return l[0]===""&&l.length!==1&&l.shift(),L2(l,e)||fT(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},L2=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?L2(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(zg);return(o=e.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},Nv=/^\[(.+)\]$/,fT=t=>{if(Nv.test(t)){const e=Nv.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},pT=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return gT(Object.entries(t.classGroups),n).forEach(([i,o])=>{nm(o,r,i,e)}),r},nm=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:Av(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(mT(s)){nm(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{nm(o,Av(e,i),n,r)})})},Av=(t,e)=>{let n=t;return e.split(zg).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},mT=t=>t.isThemeGetter,gT=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[e+o,l])):i);return[n,s]}):t,xT=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},B2="!",yT=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=l=>{const c=[];let u=0,d=0,h;for(let v=0;v<l.length;v++){let y=l[v];if(u===0){if(y===s&&(r||l.slice(v,v+i)===e)){c.push(l.slice(d,v)),d=v+i;continue}if(y==="/"){h=v;continue}}y==="["?u++:y==="]"&&u--}const f=c.length===0?l:l.substring(d),p=f.startsWith(B2),x=p?f.substring(1):f,m=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:x,maybePostfixModifierPosition:m}};return n?l=>n({className:l,parseClassName:o}):o},vT=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},bT=t=>({cache:xT(t.cacheSize),parseClassName:yT(t),...hT(t)}),wT=/\s+/,_T=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(wT);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:p}=n(u);let x=!!p,m=r(x?f.substring(0,p):f);if(!m){if(!x){l=u+(l.length>0?" "+l:l);continue}if(m=r(f),!m){l=u+(l.length>0?" "+l:l);continue}x=!1}const v=vT(d).join(":"),y=h?v+B2:v,g=y+m;if(i.includes(g))continue;i.push(g);const b=s(m,x);for(let _=0;_<b.length;++_){const C=b[_];i.push(y+C)}l=u+(l.length>0?" "+l:l)}return l};function kT(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=$2(e))&&(r&&(r+=" "),r+=n);return r}const $2=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=$2(t[r]))&&(n&&(n+=" "),n+=e);return n};function ST(t,...e){let n,r,s,i=o;function o(c){const u=e.reduce((d,h)=>h(d),t());return n=bT(u),r=n.cache.get,s=n.cache.set,i=l,l(c)}function l(c){const u=r(c);if(u)return u;const d=_T(c,n);return s(c,d),d}return function(){return i(kT.apply(null,arguments))}}const Ge=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},z2=/^\[(?:([a-z-]+):)?(.+)\]$/i,CT=/^\d+\/\d+$/,jT=new Set(["px","full","screen"]),ET=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,NT=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,AT=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,PT=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,DT=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,jr=t=>ko(t)||jT.has(t)||CT.test(t),es=t=>Xo(t,"length",BT),ko=t=>!!t&&!Number.isNaN(Number(t)),Pf=t=>Xo(t,"number",ko),da=t=>!!t&&Number.isInteger(Number(t)),TT=t=>t.endsWith("%")&&ko(t.slice(0,-1)),ke=t=>z2.test(t),ts=t=>ET.test(t),OT=new Set(["length","size","percentage"]),RT=t=>Xo(t,OT,U2),FT=t=>Xo(t,"position",U2),IT=new Set(["image","url"]),MT=t=>Xo(t,IT,zT),LT=t=>Xo(t,"",$T),ha=()=>!0,Xo=(t,e,n)=>{const r=z2.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},BT=t=>NT.test(t)&&!AT.test(t),U2=()=>!1,$T=t=>PT.test(t),zT=t=>DT.test(t),UT=()=>{const t=Ge("colors"),e=Ge("spacing"),n=Ge("blur"),r=Ge("brightness"),s=Ge("borderColor"),i=Ge("borderRadius"),o=Ge("borderSpacing"),l=Ge("borderWidth"),c=Ge("contrast"),u=Ge("grayscale"),d=Ge("hueRotate"),h=Ge("invert"),f=Ge("gap"),p=Ge("gradientColorStops"),x=Ge("gradientColorStopPositions"),m=Ge("inset"),v=Ge("margin"),y=Ge("opacity"),g=Ge("padding"),b=Ge("saturate"),_=Ge("scale"),C=Ge("sepia"),N=Ge("skew"),j=Ge("space"),w=Ge("translate"),k=()=>["auto","contain","none"],E=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto",ke,e],A=()=>[ke,e],D=()=>["",jr,es],L=()=>["auto",ko,ke],W=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],U=()=>["solid","dashed","dotted","double","none"],V=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],$=()=>["start","end","center","between","around","evenly","stretch"],M=()=>["","0",ke],O=()=>["auto","avoid","all","avoid-page","page","left","right","column"],T=()=>[ko,ke];return{cacheSize:500,separator:":",theme:{colors:[ha],spacing:[jr,es],blur:["none","",ts,ke],brightness:T(),borderColor:[t],borderRadius:["none","","full",ts,ke],borderSpacing:A(),borderWidth:D(),contrast:T(),grayscale:M(),hueRotate:T(),invert:M(),gap:A(),gradientColorStops:[t],gradientColorStopPositions:[TT,es],inset:P(),margin:P(),opacity:T(),padding:A(),saturate:T(),scale:T(),sepia:M(),skew:T(),space:A(),translate:A()},classGroups:{aspect:[{aspect:["auto","square","video",ke]}],container:["container"],columns:[{columns:[ts]}],"break-after":[{"break-after":O()}],"break-before":[{"break-before":O()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...W(),ke]}],overflow:[{overflow:E()}],"overflow-x":[{"overflow-x":E()}],"overflow-y":[{"overflow-y":E()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",da,ke]}],basis:[{basis:P()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ke]}],grow:[{grow:M()}],shrink:[{shrink:M()}],order:[{order:["first","last","none",da,ke]}],"grid-cols":[{"grid-cols":[ha]}],"col-start-end":[{col:["auto",{span:["full",da,ke]},ke]}],"col-start":[{"col-start":L()}],"col-end":[{"col-end":L()}],"grid-rows":[{"grid-rows":[ha]}],"row-start-end":[{row:["auto",{span:[da,ke]},ke]}],"row-start":[{"row-start":L()}],"row-end":[{"row-end":L()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ke]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ke]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...$()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...$(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...$(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[g]}],px:[{px:[g]}],py:[{py:[g]}],ps:[{ps:[g]}],pe:[{pe:[g]}],pt:[{pt:[g]}],pr:[{pr:[g]}],pb:[{pb:[g]}],pl:[{pl:[g]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[j]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[j]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ke,e]}],"min-w":[{"min-w":[ke,e,"min","max","fit"]}],"max-w":[{"max-w":[ke,e,"none","full","min","max","fit","prose",{screen:[ts]},ts]}],h:[{h:[ke,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ke,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ke,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ke,e,"auto","min","max","fit"]}],"font-size":[{text:["base",ts,es]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Pf]}],"font-family":[{font:[ha]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ke]}],"line-clamp":[{"line-clamp":["none",ko,Pf]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",jr,ke]}],"list-image":[{"list-image":["none",ke]}],"list-style-type":[{list:["none","disc","decimal",ke]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...U(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",jr,es]}],"underline-offset":[{"underline-offset":["auto",jr,ke]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ke]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ke]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...W(),FT]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",RT]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},MT]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...U(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:U()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...U()]}],"outline-offset":[{"outline-offset":[jr,ke]}],"outline-w":[{outline:[jr,es]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:D()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[jr,es]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",ts,LT]}],"shadow-color":[{shadow:[ha]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...V(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":V()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",ts,ke]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[b]}],sepia:[{sepia:[C]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[C]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ke]}],duration:[{duration:T()}],ease:[{ease:["linear","in","out","in-out",ke]}],delay:[{delay:T()}],animate:[{animate:["none","spin","ping","pulse","bounce",ke]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[da,ke]}],"translate-x":[{"translate-x":[w]}],"translate-y":[{"translate-y":[w]}],"skew-x":[{"skew-x":[N]}],"skew-y":[{"skew-y":[N]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ke]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ke]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ke]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[jr,es,Pf]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},VT=ST(UT);function Et(...t){return VT(M2(t))}const WT=$g("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),je=S.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?oT:"button";return a.jsx(o,{className:Et(WT({variant:e,size:n,className:t})),ref:i,...s})});je.displayName="Button";const Ue=S.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:Et("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));Ue.displayName="Card";const xn=S.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:Et("flex flex-col space-y-1.5 p-6",t),...e}));xn.displayName="CardHeader";const yn=S.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:Et("text-2xl font-semibold leading-none tracking-tight",t),...e}));yn.displayName="CardTitle";const Zn=S.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:Et("text-sm text-muted-foreground",t),...e}));Zn.displayName="CardDescription";const Ve=S.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:Et("p-6 pt-0",t),...e}));Ve.displayName="CardContent";const HT=S.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:Et("flex items-center p-6 pt-0",t),...e}));HT.displayName="CardFooter";const oh=S.forwardRef(({className:t,type:e,...n},r)=>a.jsx("input",{type:e,className:Et("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));oh.displayName="Input";var qT=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],zt=qT.reduce((t,e)=>{const n=vl(`Primitive.${e}`),r=S.forwardRef((s,i)=>{const{asChild:o,...l}=s,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function V2(t,e){t&&Il.flushSync(()=>t.dispatchEvent(e))}var KT="Label",W2=S.forwardRef((t,e)=>a.jsx(zt.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));W2.displayName=KT;var H2=W2;const GT=$g("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),rm=S.forwardRef(({className:t,...e},n)=>a.jsx(H2,{ref:n,className:Et(GT(),t),...e}));rm.displayName=H2.displayName;const YT=$g("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Xn({className:t,variant:e,...n}){return a.jsx("div",{className:Et(YT({variant:e}),t),...n})}const XT=({organizationName:t,onClose:e})=>{const[n,r]=S.useState(""),[s,i]=S.useState("member"),[o,l]=S.useState(!1),[c,u]=S.useState(!1),[d,h]=S.useState([{id:"1",name:"Alex Horton",email:"alex@example.com",role:"admin",status:"active",joinedAt:"2024-01-15"},{id:"2",name:"Sarah Johnson",email:"sarah@example.com",role:"member",status:"active",joinedAt:"2024-01-20"},{id:"3",name:"Mike Chen",email:"mike@example.com",role:"viewer",status:"pending",joinedAt:"2024-01-25"}]),f=async g=>{if(g.preventDefault(),!!n.trim()){l(!0);try{await new Promise(_=>setTimeout(_,1e3));const b={id:Date.now().toString(),name:n.split("@")[0],email:n,role:s,status:"invited",joinedAt:new Date().toISOString().split("T")[0]};h(_=>[..._,b]),r(""),u(!1)}catch(b){console.error("Error inviting member:",b)}finally{l(!1)}}},p=(g,b)=>{h(_=>_.map(C=>C.id===g?{...C,role:b}:C))},x=g=>{h(b=>b.filter(_=>_.id!==g))},m=g=>{switch(g){case"admin":return a.jsx(wv,{className:"h-4 w-4 text-yellow-600"});case"member":return a.jsx(yl,{className:"h-4 w-4 text-blue-600"});case"viewer":return a.jsx(qr,{className:"h-4 w-4 text-gray-600"});default:return a.jsx(wr,{className:"h-4 w-4"})}},v=g=>{switch(g){case"admin":return"bg-yellow-100 text-yellow-800";case"member":return"bg-blue-100 text-blue-800";case"viewer":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},y=g=>{switch(g){case"active":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"invited":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 dark:bg-black dark:bg-opacity-70 flex items-center justify-center p-4 z-50",onClick:g=>{g.target===g.currentTarget&&e()},children:a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Team Management"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:t})]}),a.jsx(je,{variant:"outline",onClick:e,className:"dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700",children:a.jsx(Yo,{className:"h-4 w-4"})})]}),a.jsxs(Ue,{className:"mb-6 dark:bg-gray-700 dark:border-gray-600",children:[a.jsxs(xn,{children:[a.jsxs(yn,{className:"flex items-center gap-2 dark:text-white",children:[a.jsx(Sv,{className:"h-5 w-5"}),"Invite Team Members"]}),a.jsx(Zn,{className:"dark:text-gray-300",children:"Invite new members to collaborate on your property portfolio"})]}),a.jsx(Ve,{children:c?a.jsxs("form",{onSubmit:f,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(rm,{htmlFor:"email",children:"Email Address"}),a.jsx(oh,{id:"email",type:"email",placeholder:"colleague@example.com",value:n,onChange:g=>r(g.target.value),required:!0})]}),a.jsxs("div",{children:[a.jsx(rm,{htmlFor:"role",children:"Role"}),a.jsxs("select",{id:"role",value:s,onChange:g=>i(g.target.value),className:"w-full h-10 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"member",children:"Member"}),a.jsx("option",{value:"viewer",children:"Viewer"})]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(je,{type:"submit",disabled:o,children:o?"Sending...":"Send Invitation"}),a.jsx(je,{type:"button",variant:"outline",onClick:()=>u(!1),children:"Cancel"})]})]}):a.jsxs(je,{onClick:()=>u(!0),children:[a.jsx(Sv,{className:"h-4 w-4 mr-2"}),"Invite Member"]})})]}),a.jsxs(Ue,{className:"dark:bg-gray-700 dark:border-gray-600",children:[a.jsx(xn,{children:a.jsxs(yn,{className:"flex items-center gap-2 dark:text-white",children:[a.jsx(wr,{className:"h-5 w-5"}),"Team Members (",d.length,")"]})}),a.jsx(Ve,{children:a.jsx("div",{className:"space-y-4",children:d.map(g=>a.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-600",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-medium",children:g.name.split(" ").map(b=>b[0]).join("")})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:g.name}),a.jsx(Xn,{className:y(g.status),children:g.status})]}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-300",children:g.email}),a.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-400",children:["Joined ",g.joinedAt]})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[m(g.role),a.jsx(Xn,{className:v(g.role),children:g.role})]}),g.role!=="admin"&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsxs("select",{value:g.role,onChange:b=>p(g.id,b.target.value),className:"text-sm border border-gray-300 rounded px-2 py-1",children:[a.jsx("option",{value:"member",children:"Member"}),a.jsx("option",{value:"viewer",children:"Viewer"})]}),a.jsx(je,{variant:"outline",size:"sm",onClick:()=>x(g.id),className:"text-red-600 hover:text-red-700",children:a.jsx(Go,{className:"h-4 w-4"})})]})]})]},g.id))})})]}),a.jsxs(Ue,{className:"mt-6",children:[a.jsx(xn,{children:a.jsxs(yn,{className:"flex items-center gap-2",children:[a.jsx(dd,{className:"h-5 w-5"}),"Role Permissions"]})}),a.jsx(Ve,{children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"p-4 border border-yellow-200 rounded-lg bg-yellow-50",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(wv,{className:"h-4 w-4 text-yellow-600"}),a.jsx("h3",{className:"font-medium text-yellow-900",children:"Admin"})]}),a.jsxs("ul",{className:"text-sm text-yellow-800 space-y-1",children:[a.jsx("li",{children:"• Full access to all data"}),a.jsx("li",{children:"• Manage team members"}),a.jsx("li",{children:"• Delete properties and data"}),a.jsx("li",{children:"• Organization settings"})]})]}),a.jsxs("div",{className:"p-4 border border-blue-200 rounded-lg bg-blue-50",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(yl,{className:"h-4 w-4 text-blue-600"}),a.jsx("h3",{className:"font-medium text-blue-900",children:"Member"})]}),a.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[a.jsx("li",{children:"• View and edit data"}),a.jsx("li",{children:"• Upload CSV files"}),a.jsx("li",{children:"• Manage properties"}),a.jsx("li",{children:"• Create reports"})]})]}),a.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg bg-gray-50",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(qr,{className:"h-4 w-4 text-gray-600"}),a.jsx("h3",{className:"font-medium text-gray-900",children:"Viewer"})]}),a.jsxs("ul",{className:"text-sm text-gray-800 space-y-1",children:[a.jsx("li",{children:"• View data only"}),a.jsx("li",{children:"• Read-only access"}),a.jsx("li",{children:"• Generate reports"}),a.jsx("li",{children:"• No editing permissions"})]})]})]})})]})]})})})};var q2="basil",JT=function(e){return e===3?"v3":e},K2="https://js.stripe.com",QT="".concat(K2,"/").concat(q2,"/stripe.js"),ZT=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,e8=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,Pv="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",t8=function(e){return ZT.test(e)||e8.test(e)},n8=function(){for(var e=document.querySelectorAll('script[src^="'.concat(K2,'"]')),n=0;n<e.length;n++){var r=e[n];if(t8(r.src))return r}return null},Dv=function(e){var n=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",r=document.createElement("script");r.src="".concat(QT).concat(n);var s=document.head||document.body;if(!s)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return s.appendChild(r),r},r8=function(e,n){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"7.9.0",startTime:n})},fa=null,Ic=null,Mc=null,s8=function(e){return function(n){e(new Error("Failed to load Stripe.js",{cause:n}))}},i8=function(e,n){return function(){window.Stripe?e(window.Stripe):n(new Error("Stripe.js not available"))}},o8=function(e){return fa!==null?fa:(fa=new Promise(function(n,r){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe&&e&&console.warn(Pv),window.Stripe){n(window.Stripe);return}try{var s=n8();if(s&&e)console.warn(Pv);else if(!s)s=Dv(e);else if(s&&Mc!==null&&Ic!==null){var i;s.removeEventListener("load",Mc),s.removeEventListener("error",Ic),(i=s.parentNode)===null||i===void 0||i.removeChild(s),s=Dv(e)}Mc=i8(n,r),Ic=s8(r),s.addEventListener("load",Mc),s.addEventListener("error",Ic)}catch(o){r(o);return}}),fa.catch(function(n){return fa=null,Promise.reject(n)}))},a8=function(e,n,r){if(e===null)return null;var s=n[0],i=s.match(/^pk_test/),o=JT(e.version),l=q2;i&&o!==l&&console.warn("Stripe.js@".concat(o," was loaded on the page, but @stripe/stripe-js@").concat("7.9.0"," expected Stripe.js@").concat(l,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var c=e.apply(void 0,n);return r8(c,r),c},pa,G2=!1,Y2=function(){return pa||(pa=o8(null).catch(function(e){return pa=null,Promise.reject(e)}),pa)};Promise.resolve().then(function(){return Y2()}).catch(function(t){G2||console.warn(t)});var l8=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];G2=!0;var s=Date.now();return Y2().then(function(i){return a8(i,n,s)})};const X2=l8("pk_live_51QqScaHDhcVKRRbwKUmZ9DGrIAUb7aFxwIm1rS6RFZxOjlm3B9vGkG1CPGUe3J5fMh5VAE9cD7fp40bpZRgAc1Gl00rg9q88z1"),c8=async t=>{try{const e=await fetch("/api/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw new Error("Failed to create checkout session");const{sessionId:n}=await e.json(),r=await X2;if(!r)throw new Error("Stripe failed to load");const{error:s}=await r.redirectToCheckout({sessionId:n});if(s)throw new Error(s.message)}catch(e){throw console.error("Error creating checkout session:",e),e}},J2=async t=>{try{const e=await fetch("/api/create-portal-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerId:t})});if(!e.ok)throw new Error("Failed to create portal session");const{url:n}=await e.json();window.location.href=n}catch(e){throw console.error("Error creating portal session:",e),e}},Q2=async t=>{try{const e=await fetch(`/api/subscription-status?userId=${t}`);if(!e.ok)throw new Error("Failed to get subscription status");return await e.json()}catch(e){throw console.error("Error getting subscription status:",e),e}},u8=Object.freeze(Object.defineProperty({__proto__:null,createCheckoutSession:c8,createCustomerPortalSession:J2,default:X2,getSubscriptionStatus:Q2},Symbol.toStringTag,{value:"Module"})),d8=()=>{const{user:t}=Bl(),[e,n]=S.useState(null),[r,s]=S.useState(!0),[i,o]=S.useState(null),l=S.useCallback(async()=>{if(t)try{s(!0);const p=await Q2(t.id);n(p)}catch(p){console.error("Error loading subscription status:",p),o("Failed to load subscription status")}finally{s(!1)}},[t]);S.useEffect(()=>{t&&l()},[t,l]);const c=async()=>{if(e!=null&&e.customerId)try{await J2(e.customerId)}catch(p){console.error("Error opening customer portal:",p),o("Failed to open subscription management")}},u=p=>new Date(p*1e3).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),d=p=>{switch(p){case"active":return a.jsx(Xn,{className:"bg-green-100 text-green-800",children:"Active"});case"trialing":return a.jsx(Xn,{className:"bg-blue-100 text-blue-800",children:"Free Trial"});case"past_due":return a.jsx(Xn,{className:"bg-yellow-100 text-yellow-800",children:"Past Due"});case"canceled":return a.jsx(Xn,{className:"bg-red-100 text-red-800",children:"Canceled"});default:return a.jsx(Xn,{variant:"secondary",children:p})}};if(r)return a.jsx("div",{className:"flex items-center justify-center p-8",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})});if(i)return a.jsx("div",{className:"p-6",children:a.jsx(Ue,{className:"border-red-200",children:a.jsx(Ve,{className:"pt-6",children:a.jsxs("div",{className:"flex items-center space-x-2 text-red-600",children:[a.jsx(Rs,{className:"w-5 h-5"}),a.jsx("span",{children:i})]})})})});if(!e)return a.jsx("div",{className:"p-6",children:a.jsxs(Ue,{children:[a.jsxs(xn,{children:[a.jsxs(yn,{className:"flex items-center space-x-2",children:[a.jsx(xl,{className:"w-5 h-5"}),a.jsx("span",{children:"No Subscription Found"})]}),a.jsx(Zn,{children:"You don't have an active subscription. Start your free trial today!"})]}),a.jsx(Ve,{children:a.jsx(je,{onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:{page:"pricing"}})),className:"w-full",children:"View Pricing Plans"})})]})});const h=e.status==="trialing"&&e.trialEnd,f=e.status==="active"||e.status==="trialing";return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Subscription & Pricing"}),a.jsx("p",{className:"text-gray-600",children:"Manage your PropFi subscription, billing, and pricing"})]}),a.jsxs(Ue,{children:[a.jsx(xn,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs(yn,{className:"flex items-center space-x-2",children:[a.jsx(xl,{className:"w-5 h-5"}),a.jsx("span",{children:"Current Plan"})]}),a.jsx(Zn,{children:"PropFi Pro Plan"})]}),d(e.status)]})}),a.jsxs(Ve,{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(zn,{className:"w-4 h-4 text-gray-400"}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[e.properties," Properties"]}),a.jsx("p",{className:"text-xs text-gray-500",children:"Included in plan"})]})]}),h&&e.trialEnd&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Fs,{className:"w-4 h-4 text-gray-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Trial Ends"}),a.jsx("p",{className:"text-xs text-gray-500",children:u(e.trialEnd)})]})]}),f&&e.currentPeriodEnd&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Fs,{className:"w-4 h-4 text-gray-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Next Billing"}),a.jsx("p",{className:"text-xs text-gray-500",children:u(e.currentPeriodEnd)})]})]})]}),h&&a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(ys,{className:"w-5 h-5 text-blue-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Free Trial Active"}),a.jsxs("p",{className:"text-xs text-blue-700",children:["Your trial ends on ",e.trialEnd?u(e.trialEnd):"N/A",". You'll be charged automatically unless you cancel."]})]})]})}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsxs(je,{onClick:c,className:"flex-1",disabled:!e.customerId,children:[a.jsx(WD,{className:"w-4 h-4 mr-2"}),"Manage Subscription"]}),a.jsx(je,{variant:"outline",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:{page:"pricing"}})),children:"Change Plan"})]})]})]}),a.jsxs(Ue,{children:[a.jsxs(xn,{children:[a.jsx(yn,{children:"Plan Details"}),a.jsx(Zn,{children:"What's included in your PropFi Pro plan"})]}),a.jsx(Ve,{children:a.jsx("div",{className:"space-y-3",children:["Unlimited CSV uploads","AI-powered categorization","Real-time analytics dashboard","Team collaboration","Data export capabilities","Priority support",`${e.properties} properties at $20 each`].map((p,x)=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ys,{className:"w-4 h-4 text-green-500"}),a.jsx("span",{className:"text-sm text-gray-600",children:p})]},x))})})]}),f&&a.jsxs(Ue,{children:[a.jsxs(xn,{children:[a.jsx(yn,{children:"Billing Information"}),a.jsx(Zn,{children:"Your current billing cycle and payment details"})]}),a.jsx(Ve,{children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("span",{className:"text-sm text-gray-600",children:["Properties (",e.properties," × $20)"]}),a.jsxs("span",{className:"text-sm font-medium",children:["$",e.properties*20,"/month"]})]}),a.jsxs("div",{className:"border-t pt-3 flex justify-between",children:[a.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Total"}),a.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["$",e.properties*20,"/month"]})]})]})})]}),a.jsxs(Ue,{children:[a.jsxs(xn,{children:[a.jsxs(yn,{className:"flex items-center space-x-2",children:[a.jsx(zn,{className:"w-5 h-5"}),a.jsx("span",{children:"Pricing Plans"})]}),a.jsx(Zn,{children:"Current PropFi pricing structure"})]}),a.jsx(Ve,{children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"PropFi Pro"}),a.jsx(Xn,{className:"bg-blue-100 text-blue-800",children:"Current Plan"})]}),a.jsxs("div",{className:"text-2xl font-bold text-gray-900 mb-2",children:["$20 ",a.jsx("span",{className:"text-sm font-normal text-gray-600",children:"per property per month"})]}),a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Start with a 1-month free trial, then pay only for what you need."}),a.jsx("div",{className:"space-y-2",children:["Unlimited CSV uploads","AI-powered categorization","Real-time analytics dashboard","Team collaboration","Data export capabilities","Priority support","Secure cloud storage"].map((p,x)=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ys,{className:"w-4 h-4 text-green-500"}),a.jsx("span",{className:"text-sm text-gray-600",children:p})]},x))})]}),a.jsx("div",{className:"text-center",children:a.jsx(je,{onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:{page:"pricing"}})),variant:"outline",className:"w-full",children:"View Full Pricing Details"})})]})})]})]})},h8=({currentPage:t,setCurrentPage:e,onLogout:n,organizationName:r,isCollapsed:s=!1,onToggleCollapse:i})=>{var x,m,v,y;const{user:o}=Bl(),[l,c]=S.useState(!1),[u,d]=S.useState(!1),[h,f]=S.useState(!1),p=[{id:"dashboard",label:"Dashboard",icon:GD},{id:"financials",label:"Financials",icon:br},{id:"analytics",label:"Analytics",icon:Lr},{id:"reports",label:"Reports",icon:Mt},{id:"properties",label:"Properties",icon:zn},{id:"csvs",label:"CSV Upload & Management",icon:ji},{id:"csv-file-manager",label:"CSV File Manager",icon:Mt},{id:"team-management",label:"Team Management",icon:wr}];return a.jsxs(a.Fragment,{children:[s&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:i}),a.jsxs("div",{className:`${s?"w-16":"w-64"} bg-white dark:bg-gray-800 shadow-lg border-r border-gray-200 dark:border-gray-700 flex flex-col h-screen transition-all duration-300 ease-in-out ${s?"fixed lg:relative z-50":"relative"}`,children:[a.jsxs("div",{className:"p-6",children:[!s&&a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(pi,{size:"lg",showText:!1}),a.jsx("div",{children:a.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:r||"Property Management"})})]}),a.jsx("div",{className:`${s?"flex justify-center":"flex justify-end mt-4"}`,children:a.jsx("button",{onClick:i,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:s?a.jsx(JD,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}):a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("svg",{className:"w-4 h-4 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),a.jsx("svg",{className:"w-4 h-4 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})]})})})]}),a.jsx("nav",{className:"mt-6 flex-1",children:p.map(g=>{const b=g.icon,_=t===g.id;return a.jsxs("button",{onClick:()=>{g.id==="team-management"?c(!0):(e(g.id),window.innerWidth<1024&&i&&i())},className:`w-full flex items-center ${s?"justify-center px-3":"space-x-3 px-6"} py-3 text-left transition-colors duration-200 ${_?"bg-primary-50 dark:bg-primary-900/20 text-primary-700 dark:text-primary-300 border-r-2 border-primary-600":"text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white"}`,title:s?g.label:void 0,children:[a.jsx(b,{className:`w-5 h-5 ${_?"text-primary-600 dark:text-primary-400":"text-gray-400 dark:text-gray-500"}`}),!s&&a.jsx("span",{className:"font-medium",children:g.label})]},g.id)})}),a.jsx("div",{className:"p-6 space-y-4 border-t border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[a.jsxs("div",{className:`flex items-center ${s?"justify-center":"space-x-3"} mb-3 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 rounded-md p-2 -m-2 transition-colors duration-200`,onClick:()=>f(!h),children:[a.jsx("div",{className:"w-8 h-8 bg-primary-600 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white text-sm font-medium",children:((x=o==null?void 0:o.firstName)==null?void 0:x[0])||((v=(m=o==null?void 0:o.emailAddresses[0])==null?void 0:m.emailAddress)==null?void 0:v[0])||"U"})}),!s&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:o!=null&&o.firstName&&(o!=null&&o.lastName)?`${o.firstName} ${o.lastName}`:((y=o==null?void 0:o.emailAddresses[0])==null?void 0:y.emailAddress)||"User"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Property Manager"})]}),a.jsx("div",{className:`transform transition-transform duration-200 ${h?"rotate-180":""}`,children:a.jsx("svg",{className:"w-4 h-4 text-gray-400 dark:text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),h&&!s&&a.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-200 dark:border-gray-600",children:[a.jsxs("button",{onClick:()=>d(!0),className:"w-full flex items-center space-x-3 px-3 py-2 text-left text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600 hover:text-gray-900 dark:hover:text-white rounded-md transition-colors duration-200",children:[a.jsx(xl,{className:"w-4 h-4 text-gray-400 dark:text-gray-500"}),a.jsx("span",{className:"text-sm font-medium",children:"Subscription"})]}),a.jsxs("button",{onClick:n,className:"w-full flex items-center space-x-3 px-3 py-2 text-left text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 hover:text-red-700 dark:hover:text-red-300 rounded-md transition-colors duration-200",children:[a.jsx(XD,{className:"w-4 h-4 text-red-400 dark:text-red-500"}),a.jsx("span",{className:"text-sm font-medium",children:"Sign Out"})]})]})]})})]}),l&&a.jsx(XT,{organizationName:r||"My Organization",onClose:()=>c(!1)}),u&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 dark:bg-black dark:bg-opacity-70 flex items-center justify-center z-50 p-4",onClick:g=>{g.target===g.currentTarget&&d(!1)},children:a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Subscription Management"}),a.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300",children:a.jsx(Yo,{className:"w-6 h-6"})})]}),a.jsx(d8,{})]})})})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Ul(t){return t+.5|0}const vs=(t,e,n)=>Math.max(Math.min(t,n),e);function Ea(t){return vs(Ul(t*2.55),0,255)}function Ds(t){return vs(Ul(t*255),0,255)}function Rr(t){return vs(Ul(t/2.55)/100,0,1)}function Tv(t){return vs(Ul(t*100),0,100)}const Nn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},sm=[..."0123456789ABCDEF"],f8=t=>sm[t&15],p8=t=>sm[(t&240)>>4]+sm[t&15],Lc=t=>(t&240)>>4===(t&15),m8=t=>Lc(t.r)&&Lc(t.g)&&Lc(t.b)&&Lc(t.a);function g8(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Nn[t[1]]*17,g:255&Nn[t[2]]*17,b:255&Nn[t[3]]*17,a:e===5?Nn[t[4]]*17:255}:(e===7||e===9)&&(n={r:Nn[t[1]]<<4|Nn[t[2]],g:Nn[t[3]]<<4|Nn[t[4]],b:Nn[t[5]]<<4|Nn[t[6]],a:e===9?Nn[t[7]]<<4|Nn[t[8]]:255})),n}const x8=(t,e)=>t<255?e(t):"";function y8(t){var e=m8(t)?f8:p8;return t?"#"+e(t.r)+e(t.g)+e(t.b)+x8(t.a,e):void 0}const v8=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Z2(t,e,n){const r=e*Math.min(n,1-n),s=(i,o=(i+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function b8(t,e,n){const r=(s,i=(s+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function w8(t,e,n){const r=Z2(t,1,.5);let s;for(e+n>1&&(s=1/(e+n),e*=s,n*=s),s=0;s<3;s++)r[s]*=1-e-n,r[s]+=e;return r}function _8(t,e,n,r,s){return t===s?(e-n)/r+(e<n?6:0):e===s?(n-t)/r+2:(t-e)/r+4}function Ug(t){const n=t.r/255,r=t.g/255,s=t.b/255,i=Math.max(n,r,s),o=Math.min(n,r,s),l=(i+o)/2;let c,u,d;return i!==o&&(d=i-o,u=l>.5?d/(2-i-o):d/(i+o),c=_8(n,r,s,d,i),c=c*60+.5),[c|0,u||0,l]}function Vg(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(Ds)}function Wg(t,e,n){return Vg(Z2,t,e,n)}function k8(t,e,n){return Vg(w8,t,e,n)}function S8(t,e,n){return Vg(b8,t,e,n)}function eS(t){return(t%360+360)%360}function C8(t){const e=v8.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?Ea(+e[5]):Ds(+e[5]));const s=eS(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=k8(s,i,o):e[1]==="hsv"?r=S8(s,i,o):r=Wg(s,i,o),{r:r[0],g:r[1],b:r[2],a:n}}function j8(t,e){var n=Ug(t);n[0]=eS(n[0]+e),n=Wg(n),t.r=n[0],t.g=n[1],t.b=n[2]}function E8(t){if(!t)return;const e=Ug(t),n=e[0],r=Tv(e[1]),s=Tv(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${s}%, ${Rr(t.a)})`:`hsl(${n}, ${r}%, ${s}%)`}const Ov={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Rv={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function N8(){const t={},e=Object.keys(Rv),n=Object.keys(Ov);let r,s,i,o,l;for(r=0;r<e.length;r++){for(o=l=e[r],s=0;s<n.length;s++)i=n[s],l=l.replace(i,Ov[i]);i=parseInt(Rv[o],16),t[l]=[i>>16&255,i>>8&255,i&255]}return t}let Bc;function A8(t){Bc||(Bc=N8(),Bc.transparent=[0,0,0,0]);const e=Bc[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const P8=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function D8(t){const e=P8.exec(t);let n=255,r,s,i;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?Ea(o):vs(o*255,0,255)}return r=+e[1],s=+e[3],i=+e[5],r=255&(e[2]?Ea(r):vs(r,0,255)),s=255&(e[4]?Ea(s):vs(s,0,255)),i=255&(e[6]?Ea(i):vs(i,0,255)),{r,g:s,b:i,a:n}}}function T8(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Rr(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Df=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Ui=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function O8(t,e,n){const r=Ui(Rr(t.r)),s=Ui(Rr(t.g)),i=Ui(Rr(t.b));return{r:Ds(Df(r+n*(Ui(Rr(e.r))-r))),g:Ds(Df(s+n*(Ui(Rr(e.g))-s))),b:Ds(Df(i+n*(Ui(Rr(e.b))-i))),a:t.a+n*(e.a-t.a)}}function $c(t,e,n){if(t){let r=Ug(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=Wg(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function tS(t,e){return t&&Object.assign(e||{},t)}function Fv(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Ds(t[3]))):(e=tS(t,{r:0,g:0,b:0,a:1}),e.a=Ds(e.a)),e}function R8(t){return t.charAt(0)==="r"?D8(t):C8(t)}class bl{constructor(e){if(e instanceof bl)return e;const n=typeof e;let r;n==="object"?r=Fv(e):n==="string"&&(r=g8(e)||A8(e)||R8(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=tS(this._rgb);return e&&(e.a=Rr(e.a)),e}set rgb(e){this._rgb=Fv(e)}rgbString(){return this._valid?T8(this._rgb):void 0}hexString(){return this._valid?y8(this._rgb):void 0}hslString(){return this._valid?E8(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,s=e.rgb;let i;const o=n===i?.5:n,l=2*o-1,c=r.a-s.a,u=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;i=1-u,r.r=255&u*r.r+i*s.r+.5,r.g=255&u*r.g+i*s.g+.5,r.b=255&u*r.b+i*s.b+.5,r.a=o*r.a+(1-o)*s.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=O8(this._rgb,e._rgb,n)),this}clone(){return new bl(this.rgb)}alpha(e){return this._rgb.a=Ds(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Ul(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return $c(this._rgb,2,e),this}darken(e){return $c(this._rgb,2,-e),this}saturate(e){return $c(this._rgb,1,e),this}desaturate(e){return $c(this._rgb,1,-e),this}rotate(e){return j8(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Er(){}const F8=(()=>{let t=0;return()=>t++})();function Be(t){return t==null}function tt(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Oe(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function lt(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function hn(t,e){return lt(t)?t:e}function Pe(t,e){return typeof t>"u"?e:t}const I8=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function qe(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Le(t,e,n,r){let s,i,o;if(tt(t))if(i=t.length,r)for(s=i-1;s>=0;s--)e.call(n,t[s],s);else for(s=0;s<i;s++)e.call(n,t[s],s);else if(Oe(t))for(o=Object.keys(t),i=o.length,s=0;s<i;s++)e.call(n,t[o[s]],o[s])}function fd(t,e){let n,r,s,i;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(s=t[n],i=e[n],s.datasetIndex!==i.datasetIndex||s.index!==i.index)return!1;return!0}function pd(t){if(tt(t))return t.map(pd);if(Oe(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let s=0;for(;s<r;++s)e[n[s]]=pd(t[n[s]]);return e}return t}function nS(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function M8(t,e,n,r){if(!nS(t))return;const s=e[t],i=n[t];Oe(s)&&Oe(i)?wl(s,i,r):e[t]=pd(i)}function wl(t,e,n){const r=tt(e)?e:[e],s=r.length;if(!Oe(t))return t;n=n||{};const i=n.merger||M8;let o;for(let l=0;l<s;++l){if(o=r[l],!Oe(o))continue;const c=Object.keys(o);for(let u=0,d=c.length;u<d;++u)i(c[u],t,o,n)}return t}function Wa(t,e){return wl(t,e,{merger:L8})}function L8(t,e,n){if(!nS(t))return;const r=e[t],s=n[t];Oe(r)&&Oe(s)?Wa(r,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=pd(s))}const Iv={"":t=>t,x:t=>t.x,y:t=>t.y};function B8(t){const e=t.split("."),n=[];let r="";for(const s of e)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function $8(t){const e=B8(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function md(t,e){return(Iv[e]||(Iv[e]=$8(e)))(t)}function Hg(t){return t.charAt(0).toUpperCase()+t.slice(1)}const gd=t=>typeof t<"u",Ms=t=>typeof t=="function",Mv=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function z8(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const xt=Math.PI,kn=2*xt,U8=kn+xt,xd=Number.POSITIVE_INFINITY,V8=xt/180,wn=xt/2,Xs=xt/4,Lv=xt*2/3,bs=Math.log10,Mo=Math.sign;function Ha(t,e,n){return Math.abs(t-e)<n}function Bv(t){const e=Math.round(t);t=Ha(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(bs(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function W8(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((s,i)=>s-i).pop(),e}function H8(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function _l(t){return!H8(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function q8(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function rS(t,e,n){let r,s,i;for(r=0,s=t.length;r<s;r++)i=t[r][n],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function ws(t){return t*(xt/180)}function qg(t){return t*(180/xt)}function $v(t){if(!lt(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function K8(t,e){const n=e.x-t.x,r=e.y-t.y,s=Math.sqrt(n*n+r*r);let i=Math.atan2(r,n);return i<-.5*xt&&(i+=kn),{angle:i,distance:s}}function im(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function G8(t,e){return(t-e+U8)%kn-xt}function mn(t){return(t%kn+kn)%kn}function sS(t,e,n,r){const s=mn(t),i=mn(e),o=mn(n),l=mn(i-s),c=mn(o-s),u=mn(s-i),d=mn(s-o);return s===i||s===o||r&&i===o||l>c&&u<d}function Rn(t,e,n){return Math.max(e,Math.min(n,t))}function Y8(t){return Rn(t,-32768,32767)}function go(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function Kg(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,s=0,i;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const mi=(t,e,n,r)=>Kg(t,n,r?s=>{const i=t[s][e];return i<n||i===n&&t[s+1][e]===n}:s=>t[s][e]<n),X8=(t,e,n)=>Kg(t,n,r=>t[r][e]>=n);function J8(t,e,n){let r=0,s=t.length;for(;r<s&&t[r]<e;)r++;for(;s>r&&t[s-1]>n;)s--;return r>0||s<t.length?t.slice(r,s):t}const iS=["push","pop","shift","splice","unshift"];function Q8(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),iS.forEach(n=>{const r="_onData"+Hg(n),s=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...i){const o=s.apply(this,i);return t._chartjs.listeners.forEach(l=>{typeof l[r]=="function"&&l[r](...i)}),o}})})}function zv(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,s=r.indexOf(e);s!==-1&&r.splice(s,1),!(r.length>0)&&(iS.forEach(i=>{delete t[i]}),delete t._chartjs)}function Z8(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const oS=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function aS(t,e){let n=[],r=!1;return function(...s){n=s,r||(r=!0,oS.call(window,()=>{r=!1,t.apply(e,n)}))}}function e6(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const Gg=t=>t==="start"?"left":t==="end"?"right":"center",Ft=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,t6=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function n6(t,e,n){const r=e.length;let s=0,i=r;if(t._sorted){const{iScale:o,vScale:l,_parsed:c}=t,u=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,d=o.axis,{min:h,max:f,minDefined:p,maxDefined:x}=o.getUserBounds();if(p){if(s=Math.min(mi(c,d,h).lo,n?r:mi(e,d,o.getPixelForValue(h)).lo),u){const m=c.slice(0,s+1).reverse().findIndex(v=>!Be(v[l.axis]));s-=Math.max(0,m)}s=Rn(s,0,r-1)}if(x){let m=Math.max(mi(c,o.axis,f,!0).hi+1,n?0:mi(e,d,o.getPixelForValue(f),!0).hi+1);if(u){const v=c.slice(m-1).findIndex(y=>!Be(y[l.axis]));m+=Math.max(0,v)}i=Rn(m,s,r)-s}else i=r-s}return{start:s,count:i}}function r6(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,s={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=s,!0;const i=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,s),i}const zc=t=>t===0||t===1,Uv=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*kn/n)),Vv=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*kn/n)+1,qa={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*wn)+1,easeOutSine:t=>Math.sin(t*wn),easeInOutSine:t=>-.5*(Math.cos(xt*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>zc(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>zc(t)?t:Uv(t,.075,.3),easeOutElastic:t=>zc(t)?t:Vv(t,.075,.3),easeInOutElastic(t){return zc(t)?t:t<.5?.5*Uv(t*2,.1125,.45):.5+.5*Vv(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-qa.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?qa.easeInBounce(t*2)*.5:qa.easeOutBounce(t*2-1)*.5+.5};function Yg(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Wv(t){return Yg(t)?t:new bl(t)}function Tf(t){return Yg(t)?t:new bl(t).saturate(.5).darken(.1).hexString()}const s6=["x","y","borderWidth","radius","tension"],i6=["color","borderColor","backgroundColor"];function o6(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:i6},numbers:{type:"number",properties:s6}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function a6(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Hv=new Map;function l6(t,e){e=e||{};const n=t+JSON.stringify(e);let r=Hv.get(n);return r||(r=new Intl.NumberFormat(t,e),Hv.set(n,r)),r}function Xg(t,e,n){return l6(e,n).format(t)}const lS={values(t){return tt(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let s,i=t;if(n.length>1){const u=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(u<1e-4||u>1e15)&&(s="scientific"),i=c6(t,n)}const o=bs(Math.abs(i)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:s,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),Xg(t,r,c)},logarithmic(t,e,n){if(t===0)return"0";const r=n[e].significand||t/Math.pow(10,Math.floor(bs(t)));return[1,2,3,5,10,15].includes(r)||e>.8*n.length?lS.numeric.call(this,t,e,n):""}};function c6(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var ah={formatters:lS};function u6(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ah.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Ei=Object.create(null),om=Object.create(null);function Ka(t,e){if(!e)return t;const n=e.split(".");for(let r=0,s=n.length;r<s;++r){const i=n[r];t=t[i]||(t[i]=Object.create(null))}return t}function Of(t,e,n){return typeof e=="string"?wl(Ka(t,e),n):wl(Ka(t,""),e)}class d6{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,s)=>Tf(s.backgroundColor),this.hoverBorderColor=(r,s)=>Tf(s.borderColor),this.hoverColor=(r,s)=>Tf(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return Of(this,e,n)}get(e){return Ka(this,e)}describe(e,n){return Of(om,e,n)}override(e,n){return Of(Ei,e,n)}route(e,n,r,s){const i=Ka(this,e),o=Ka(this,r),l="_"+n;Object.defineProperties(i,{[l]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const c=this[l],u=o[s];return Oe(c)?Object.assign({},u,c):Pe(c,u)},set(c){this[l]=c}}})}apply(e){e.forEach(n=>n(this))}}var ct=new d6({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[o6,a6,u6]);function h6(t){return!t||Be(t.size)||Be(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function yd(t,e,n,r,s){let i=e[s];return i||(i=e[s]=t.measureText(s).width,n.push(s)),i>r&&(r=i),r}function f6(t,e,n,r){r=r||{};let s=r.data=r.data||{},i=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(s=r.data={},i=r.garbageCollect=[],r.font=e),t.save(),t.font=e;let o=0;const l=n.length;let c,u,d,h,f;for(c=0;c<l;c++)if(h=n[c],h!=null&&!tt(h))o=yd(t,s,i,o,h);else if(tt(h))for(u=0,d=h.length;u<d;u++)f=h[u],f!=null&&!tt(f)&&(o=yd(t,s,i,o,f));t.restore();const p=i.length/2;if(p>n.length){for(c=0;c<p;c++)delete s[i[c]];i.splice(0,p)}return o}function Js(t,e,n){const r=t.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((e-s)*r)/r+s}function qv(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function am(t,e,n,r){cS(t,e,n,r,null)}function cS(t,e,n,r,s){let i,o,l,c,u,d,h,f;const p=e.pointStyle,x=e.rotation,m=e.radius;let v=(x||0)*V8;if(p&&typeof p=="object"&&(i=p.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(v),t.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),t.restore();return}if(!(isNaN(m)||m<=0)){switch(t.beginPath(),p){default:s?t.ellipse(n,r,s/2,m,0,0,kn):t.arc(n,r,m,0,kn),t.closePath();break;case"triangle":d=s?s/2:m,t.moveTo(n+Math.sin(v)*d,r-Math.cos(v)*m),v+=Lv,t.lineTo(n+Math.sin(v)*d,r-Math.cos(v)*m),v+=Lv,t.lineTo(n+Math.sin(v)*d,r-Math.cos(v)*m),t.closePath();break;case"rectRounded":u=m*.516,c=m-u,o=Math.cos(v+Xs)*c,h=Math.cos(v+Xs)*(s?s/2-u:c),l=Math.sin(v+Xs)*c,f=Math.sin(v+Xs)*(s?s/2-u:c),t.arc(n-h,r-l,u,v-xt,v-wn),t.arc(n+f,r-o,u,v-wn,v),t.arc(n+h,r+l,u,v,v+wn),t.arc(n-f,r+o,u,v+wn,v+xt),t.closePath();break;case"rect":if(!x){c=Math.SQRT1_2*m,d=s?s/2:c,t.rect(n-d,r-c,2*d,2*c);break}v+=Xs;case"rectRot":h=Math.cos(v)*(s?s/2:m),o=Math.cos(v)*m,l=Math.sin(v)*m,f=Math.sin(v)*(s?s/2:m),t.moveTo(n-h,r-l),t.lineTo(n+f,r-o),t.lineTo(n+h,r+l),t.lineTo(n-f,r+o),t.closePath();break;case"crossRot":v+=Xs;case"cross":h=Math.cos(v)*(s?s/2:m),o=Math.cos(v)*m,l=Math.sin(v)*m,f=Math.sin(v)*(s?s/2:m),t.moveTo(n-h,r-l),t.lineTo(n+h,r+l),t.moveTo(n+f,r-o),t.lineTo(n-f,r+o);break;case"star":h=Math.cos(v)*(s?s/2:m),o=Math.cos(v)*m,l=Math.sin(v)*m,f=Math.sin(v)*(s?s/2:m),t.moveTo(n-h,r-l),t.lineTo(n+h,r+l),t.moveTo(n+f,r-o),t.lineTo(n-f,r+o),v+=Xs,h=Math.cos(v)*(s?s/2:m),o=Math.cos(v)*m,l=Math.sin(v)*m,f=Math.sin(v)*(s?s/2:m),t.moveTo(n-h,r-l),t.lineTo(n+h,r+l),t.moveTo(n+f,r-o),t.lineTo(n-f,r+o);break;case"line":o=s?s/2:Math.cos(v)*m,l=Math.sin(v)*m,t.moveTo(n-o,r-l),t.lineTo(n+o,r+l);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(v)*(s?s/2:m),r+Math.sin(v)*m);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Br(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function lh(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function ch(t){t.restore()}function p6(t,e,n,r,s){if(!e)return t.lineTo(n.x,n.y);if(s==="middle"){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else s==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function m6(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function g6(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Be(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function x6(t,e,n,r,s){if(s.strikethrough||s.underline){const i=t.measureText(r),o=e-i.actualBoundingBoxLeft,l=e+i.actualBoundingBoxRight,c=n-i.actualBoundingBoxAscent,u=n+i.actualBoundingBoxDescent,d=s.strikethrough?(c+u)/2:u;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(o,d),t.lineTo(l,d),t.stroke()}}function y6(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Ni(t,e,n,r,s,i={}){const o=tt(e)?e:[e],l=i.strokeWidth>0&&i.strokeColor!=="";let c,u;for(t.save(),t.font=s.string,g6(t,i),c=0;c<o.length;++c)u=o[c],i.backdrop&&y6(t,i.backdrop),l&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),Be(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(u,n,r,i.maxWidth)),t.fillText(u,n,r,i.maxWidth),x6(t,n,r,u,i),r+=Number(s.lineHeight);t.restore()}function vd(t,e){const{x:n,y:r,w:s,h:i,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*xt,xt,!0),t.lineTo(n,r+i-o.bottomLeft),t.arc(n+o.bottomLeft,r+i-o.bottomLeft,o.bottomLeft,xt,wn,!0),t.lineTo(n+s-o.bottomRight,r+i),t.arc(n+s-o.bottomRight,r+i-o.bottomRight,o.bottomRight,wn,0,!0),t.lineTo(n+s,r+o.topRight),t.arc(n+s-o.topRight,r+o.topRight,o.topRight,0,-wn,!0),t.lineTo(n+o.topLeft,r)}const v6=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,b6=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function w6(t,e){const n=(""+t).match(v6);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const _6=t=>+t||0;function uS(t,e){const n={},r=Oe(e),s=r?Object.keys(e):e,i=Oe(t)?r?o=>Pe(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of s)n[o]=_6(i(o));return n}function k6(t){return uS(t,{top:"y",right:"x",bottom:"y",left:"x"})}function So(t){return uS(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Bt(t){const e=k6(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function _t(t,e){t=t||{},e=e||ct.font;let n=Pe(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=Pe(t.style,e.style);r&&!(""+r).match(b6)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:Pe(t.family,e.family),lineHeight:w6(Pe(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:Pe(t.weight,e.weight),string:""};return s.string=h6(s),s}function Uc(t,e,n,r){let s=!0,i,o,l;for(i=0,o=t.length;i<o;++i)if(l=t[i],l!==void 0&&(e!==void 0&&typeof l=="function"&&(l=l(e),s=!1),n!==void 0&&tt(l)&&(l=l[n%l.length],s=!1),l!==void 0))return r&&!s&&(r.cacheable=!1),l}function S6(t,e,n){const{min:r,max:s}=t,i=I8(e,(s-r)/2),o=(l,c)=>n&&l===0?0:l+c;return{min:o(r,-Math.abs(i)),max:o(s,i)}}function Ws(t,e){return Object.assign(Object.create(t),e)}function Jg(t,e=[""],n,r,s=()=>t[0]){const i=n||t;typeof r>"u"&&(r=pS("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:r,_getTarget:s,override:l=>Jg([l,...t],e,i,r)};return new Proxy(o,{deleteProperty(l,c){return delete l[c],delete l._keys,delete t[0][c],!0},get(l,c){return hS(l,c,()=>T6(c,e,t,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(l,c){return Gv(l).includes(c)},ownKeys(l){return Gv(l)},set(l,c,u){const d=l._storage||(l._storage=s());return l[c]=d[c]=u,delete l._keys,!0}})}function Lo(t,e,n,r){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:dS(t,r),setContext:i=>Lo(t,i,n,r),override:i=>Lo(t.override(i),e,n,r)};return new Proxy(s,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,l){return hS(i,o,()=>j6(i,o,l))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,l){return t[o]=l,delete i[o],!0}})}function dS(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:n,indexable:r,isScriptable:Ms(n)?n:()=>n,isIndexable:Ms(r)?r:()=>r}}const C6=(t,e)=>t?t+Hg(e):e,Qg=(t,e)=>Oe(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function hS(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function j6(t,e,n){const{_proxy:r,_context:s,_subProxy:i,_descriptors:o}=t;let l=r[e];return Ms(l)&&o.isScriptable(e)&&(l=E6(e,l,t,n)),tt(l)&&l.length&&(l=N6(e,l,t,o.isIndexable)),Qg(e,l)&&(l=Lo(l,s,i&&i[e],o)),l}function E6(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_stack:l}=n;if(l.has(t))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+t);l.add(t);let c=e(i,o||r);return l.delete(t),Qg(t,c)&&(c=Zg(s._scopes,s,t,c)),c}function N6(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_descriptors:l}=n;if(typeof i.index<"u"&&r(t))return e[i.index%e.length];if(Oe(e[0])){const c=e,u=s._scopes.filter(d=>d!==c);e=[];for(const d of c){const h=Zg(u,s,t,d);e.push(Lo(h,i,o&&o[t],l))}}return e}function fS(t,e,n){return Ms(t)?t(e,n):t}const A6=(t,e)=>t===!0?e:typeof t=="string"?md(e,t):void 0;function P6(t,e,n,r,s){for(const i of e){const o=A6(n,i);if(o){t.add(o);const l=fS(o._fallback,n,s);if(typeof l<"u"&&l!==n&&l!==r)return l}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function Zg(t,e,n,r){const s=e._rootScopes,i=fS(e._fallback,n,r),o=[...t,...s],l=new Set;l.add(r);let c=Kv(l,o,n,i||n,r);return c===null||typeof i<"u"&&i!==n&&(c=Kv(l,o,i,c,r),c===null)?!1:Jg(Array.from(l),[""],s,i,()=>D6(e,n,r))}function Kv(t,e,n,r,s){for(;n;)n=P6(t,e,n,r,s);return n}function D6(t,e,n){const r=t._getTarget();e in r||(r[e]={});const s=r[e];return tt(s)&&Oe(n)?n:s||{}}function T6(t,e,n,r){let s;for(const i of e)if(s=pS(C6(i,t),n),typeof s<"u")return Qg(t,s)?Zg(n,r,t,s):s}function pS(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function Gv(t){let e=t._keys;return e||(e=t._keys=O6(t._scopes)),e}function O6(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(s=>!s.startsWith("_")))e.add(r);return Array.from(e)}const R6=Number.EPSILON||1e-14,Bo=(t,e)=>e<t.length&&!t[e].skip&&t[e],mS=t=>t==="x"?"y":"x";function F6(t,e,n,r){const s=t.skip?e:t,i=e,o=n.skip?e:n,l=im(i,s),c=im(o,i);let u=l/(l+c),d=c/(l+c);u=isNaN(u)?0:u,d=isNaN(d)?0:d;const h=r*u,f=r*d;return{previous:{x:i.x-h*(o.x-s.x),y:i.y-h*(o.y-s.y)},next:{x:i.x+f*(o.x-s.x),y:i.y+f*(o.y-s.y)}}}function I6(t,e,n){const r=t.length;let s,i,o,l,c,u=Bo(t,0);for(let d=0;d<r-1;++d)if(c=u,u=Bo(t,d+1),!(!c||!u)){if(Ha(e[d],0,R6)){n[d]=n[d+1]=0;continue}s=n[d]/e[d],i=n[d+1]/e[d],l=Math.pow(s,2)+Math.pow(i,2),!(l<=9)&&(o=3/Math.sqrt(l),n[d]=s*o*e[d],n[d+1]=i*o*e[d])}}function M6(t,e,n="x"){const r=mS(n),s=t.length;let i,o,l,c=Bo(t,0);for(let u=0;u<s;++u){if(o=l,l=c,c=Bo(t,u+1),!l)continue;const d=l[n],h=l[r];o&&(i=(d-o[n])/3,l[`cp1${n}`]=d-i,l[`cp1${r}`]=h-i*e[u]),c&&(i=(c[n]-d)/3,l[`cp2${n}`]=d+i,l[`cp2${r}`]=h+i*e[u])}}function L6(t,e="x"){const n=mS(e),r=t.length,s=Array(r).fill(0),i=Array(r);let o,l,c,u=Bo(t,0);for(o=0;o<r;++o)if(l=c,c=u,u=Bo(t,o+1),!!c){if(u){const d=u[e]-c[e];s[o]=d!==0?(u[n]-c[n])/d:0}i[o]=l?u?Mo(s[o-1])!==Mo(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}I6(t,s,i),M6(t,i,e)}function Vc(t,e,n){return Math.max(Math.min(t,n),e)}function B6(t,e){let n,r,s,i,o,l=Br(t[0],e);for(n=0,r=t.length;n<r;++n)o=i,i=l,l=n<r-1&&Br(t[n+1],e),i&&(s=t[n],o&&(s.cp1x=Vc(s.cp1x,e.left,e.right),s.cp1y=Vc(s.cp1y,e.top,e.bottom)),l&&(s.cp2x=Vc(s.cp2x,e.left,e.right),s.cp2y=Vc(s.cp2y,e.top,e.bottom)))}function $6(t,e,n,r,s){let i,o,l,c;if(e.spanGaps&&(t=t.filter(u=>!u.skip)),e.cubicInterpolationMode==="monotone")L6(t,s);else{let u=r?t[t.length-1]:t[0];for(i=0,o=t.length;i<o;++i)l=t[i],c=F6(u,l,t[Math.min(i+1,o-(r?0:1))%o],e.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,u=l}e.capBezierPoints&&B6(t,n)}function ex(){return typeof window<"u"&&typeof document<"u"}function tx(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function bd(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const uh=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function z6(t,e){return uh(t).getPropertyValue(e)}const U6=["top","right","bottom","left"];function yi(t,e,n){const r={};n=n?"-"+n:"";for(let s=0;s<4;s++){const i=U6[s];r[i]=parseFloat(t[e+"-"+i+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const V6=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function W6(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:s,offsetY:i}=r;let o=!1,l,c;if(V6(s,i,t.target))l=s,c=i;else{const u=e.getBoundingClientRect();l=r.clientX-u.left,c=r.clientY-u.top,o=!0}return{x:l,y:c,box:o}}function oi(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,s=uh(n),i=s.boxSizing==="border-box",o=yi(s,"padding"),l=yi(s,"border","width"),{x:c,y:u,box:d}=W6(t,n),h=o.left+(d&&l.left),f=o.top+(d&&l.top);let{width:p,height:x}=e;return i&&(p-=o.width+l.width,x-=o.height+l.height),{x:Math.round((c-h)/p*n.width/r),y:Math.round((u-f)/x*n.height/r)}}function H6(t,e,n){let r,s;if(e===void 0||n===void 0){const i=t&&tx(t);if(!i)e=t.clientWidth,n=t.clientHeight;else{const o=i.getBoundingClientRect(),l=uh(i),c=yi(l,"border","width"),u=yi(l,"padding");e=o.width-u.width-c.width,n=o.height-u.height-c.height,r=bd(l.maxWidth,i,"clientWidth"),s=bd(l.maxHeight,i,"clientHeight")}}return{width:e,height:n,maxWidth:r||xd,maxHeight:s||xd}}const Wc=t=>Math.round(t*10)/10;function q6(t,e,n,r){const s=uh(t),i=yi(s,"margin"),o=bd(s.maxWidth,t,"clientWidth")||xd,l=bd(s.maxHeight,t,"clientHeight")||xd,c=H6(t,e,n);let{width:u,height:d}=c;if(s.boxSizing==="content-box"){const f=yi(s,"border","width"),p=yi(s,"padding");u-=p.width+f.width,d-=p.height+f.height}return u=Math.max(0,u-i.width),d=Math.max(0,r?u/r:d-i.height),u=Wc(Math.min(u,o,c.maxWidth)),d=Wc(Math.min(d,l,c.maxHeight)),u&&!d&&(d=Wc(u/2)),(e!==void 0||n!==void 0)&&r&&c.height&&d>c.height&&(d=c.height,u=Wc(Math.floor(d*r))),{width:u,height:d}}function Yv(t,e,n){const r=e||1,s=Math.floor(t.height*r),i=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==s||o.width!==i?(t.currentDevicePixelRatio=r,o.height=s,o.width=i,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const K6=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};ex()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function Xv(t,e){const n=z6(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function ai(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function G6(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function Y6(t,e,n,r){const s={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},o=ai(t,s,n),l=ai(s,i,n),c=ai(i,e,n),u=ai(o,l,n),d=ai(l,c,n);return ai(u,d,n)}const X6=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},J6=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Co(t,e,n){return t?X6(e,n):J6()}function gS(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function xS(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function yS(t){return t==="angle"?{between:sS,compare:G8,normalize:mn}:{between:go,compare:(e,n)=>e-n,normalize:e=>e}}function Jv({start:t,end:e,count:n,loop:r,style:s}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:s}}function Q6(t,e,n){const{property:r,start:s,end:i}=n,{between:o,normalize:l}=yS(r),c=e.length;let{start:u,end:d,loop:h}=t,f,p;if(h){for(u+=c,d+=c,f=0,p=c;f<p&&o(l(e[u%c][r]),s,i);++f)u--,d--;u%=c,d%=c}return d<u&&(d+=c),{start:u,end:d,loop:h,style:t.style}}function vS(t,e,n){if(!n)return[t];const{property:r,start:s,end:i}=n,o=e.length,{compare:l,between:c,normalize:u}=yS(r),{start:d,end:h,loop:f,style:p}=Q6(t,e,n),x=[];let m=!1,v=null,y,g,b;const _=()=>c(s,b,y)&&l(s,b)!==0,C=()=>l(i,y)===0||c(i,b,y),N=()=>m||_(),j=()=>!m||C();for(let w=d,k=d;w<=h;++w)g=e[w%o],!g.skip&&(y=u(g[r]),y!==b&&(m=c(y,s,i),v===null&&N()&&(v=l(y,s)===0?w:k),v!==null&&j()&&(x.push(Jv({start:v,end:w,loop:f,count:o,style:p})),v=null),k=w,b=y));return v!==null&&x.push(Jv({start:v,end:h,loop:f,count:o,style:p})),x}function bS(t,e){const n=[],r=t.segments;for(let s=0;s<r.length;s++){const i=vS(r[s],t.points,e);i.length&&n.push(...i)}return n}function Z6(t,e,n,r){let s=0,i=e-1;if(n&&!r)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,n&&(i+=s);i>s&&t[i%e].skip;)i--;return i%=e,{start:s,end:i}}function eO(t,e,n,r){const s=t.length,i=[];let o=e,l=t[e],c;for(c=e+1;c<=n;++c){const u=t[c%s];u.skip||u.stop?l.skip||(r=!1,i.push({start:e%s,end:(c-1)%s,loop:r}),e=o=u.stop?c:null):(o=c,l.skip&&(e=c)),l=u}return o!==null&&i.push({start:e%s,end:o%s,loop:r}),i}function tO(t,e){const n=t.points,r=t.options.spanGaps,s=n.length;if(!s)return[];const i=!!t._loop,{start:o,end:l}=Z6(n,s,i,r);if(r===!0)return Qv(t,[{start:o,end:l,loop:i}],n,e);const c=l<o?l+s:l,u=!!t._fullLoop&&o===0&&l===s-1;return Qv(t,eO(n,o,c,u),n,e)}function Qv(t,e,n,r){return!r||!r.setContext||!n?e:nO(t,e,n,r)}function nO(t,e,n,r){const s=t._chart.getContext(),i=Zv(t.options),{_datasetIndex:o,options:{spanGaps:l}}=t,c=n.length,u=[];let d=i,h=e[0].start,f=h;function p(x,m,v,y){const g=l?-1:1;if(x!==m){for(x+=c;n[x%c].skip;)x-=g;for(;n[m%c].skip;)m+=g;x%c!==m%c&&(u.push({start:x%c,end:m%c,loop:v,style:y}),d=y,h=m%c)}}for(const x of e){h=l?h:x.start;let m=n[h%c],v;for(f=h+1;f<=x.end;f++){const y=n[f%c];v=Zv(r.setContext(Ws(s,{type:"segment",p0:m,p1:y,p0DataIndex:(f-1)%c,p1DataIndex:f%c,datasetIndex:o}))),rO(v,d)&&p(h,f-1,x.loop,d),m=y,d=v}h<f-1&&p(h,f-1,x.loop,d)}return u}function Zv(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function rO(t,e){if(!e)return!1;const n=[],r=function(s,i){return Yg(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function Hc(t,e,n){return t.options.clip?t[n]:e[n]}function sO(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:Hc(n,e,"left"),right:Hc(n,e,"right"),top:Hc(r,e,"top"),bottom:Hc(r,e,"bottom")}:e}function wS(t,e){const n=e._clip;if(n.disabled)return!1;const r=sO(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class iO{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,s){const i=n.listeners[s],o=n.duration;i.forEach(l=>l({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=oS.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,s)=>{if(!r.running||!r.items.length)return;const i=r.items;let o=i.length-1,l=!1,c;for(;o>=0;--o)c=i[o],c._active?(c._total>r.duration&&(r.duration=c._total),c.tick(e),l=!0):(i[o]=i[i.length-1],i.pop());l&&(s.draw(),this._notify(s,r,e,"progress")),i.length||(r.running=!1,this._notify(s,r,e,"complete"),r.initial=!1),n+=i.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,s)=>Math.max(r,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let s=r.length-1;for(;s>=0;--s)r[s].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Ar=new iO;const eb="transparent",oO={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=Wv(t||eb),s=r.valid&&Wv(e||eb);return s&&s.valid?s.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class aO{constructor(e,n,r,s){const i=n[r];s=Uc([e.to,s,i,e.from]);const o=Uc([e.from,i,s]);this._active=!0,this._fn=e.fn||oO[e.type||typeof o],this._easing=qa[e.easing]||qa.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const s=this._target[this._prop],i=r-this._start,o=this._duration-i;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=Uc([e.to,n,s,e.from]),this._from=Uc([e.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,s=this._prop,i=this._from,o=this._loop,l=this._to;let c;if(this._active=i!==l&&(o||n<r),!this._active){this._target[s]=l,this._notify(!0);return}if(n<0){this._target[s]=i;return}c=n/r%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[s]=this._fn(i,l,c)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let s=0;s<r.length;s++)r[s][n]()}}class _S{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Oe(e))return;const n=Object.keys(ct.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const i=e[s];if(!Oe(i))return;const o={};for(const l of n)o[l]=i[l];(tt(i.properties)&&i.properties||[s]).forEach(l=>{(l===s||!r.has(l))&&r.set(l,o)})})}_animateOptions(e,n){const r=n.options,s=cO(e,r);if(!s)return[];const i=this._createAnimations(s,r);return r.$shared&&lO(e.options.$animations,r).then(()=>{e.options=r},()=>{}),i}_createAnimations(e,n){const r=this._properties,s=[],i=e.$animations||(e.$animations={}),o=Object.keys(n),l=Date.now();let c;for(c=o.length-1;c>=0;--c){const u=o[c];if(u.charAt(0)==="$")continue;if(u==="options"){s.push(...this._animateOptions(e,n));continue}const d=n[u];let h=i[u];const f=r.get(u);if(h)if(f&&h.active()){h.update(f,d,l);continue}else h.cancel();if(!f||!f.duration){e[u]=d;continue}i[u]=h=new aO(f,e,u,d),s.push(h)}return s}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return Ar.add(this._chart,r),!0}}function lO(t,e){const n=[],r=Object.keys(e);for(let s=0;s<r.length;s++){const i=t[r[s]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function cO(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function tb(t,e){const n=t&&t.options||{},r=n.reverse,s=n.min===void 0?e:0,i=n.max===void 0?e:0;return{start:r?i:s,end:r?s:i}}function uO(t,e,n){if(n===!1)return!1;const r=tb(t,n),s=tb(e,n);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}function dO(t){let e,n,r,s;return Oe(t)?(e=t.top,n=t.right,r=t.bottom,s=t.left):e=n=r=s=t,{top:e,right:n,bottom:r,left:s,disabled:t===!1}}function kS(t,e){const n=[],r=t._getSortedDatasetMetas(e);let s,i;for(s=0,i=r.length;s<i;++s)n.push(r[s].index);return n}function nb(t,e,n,r={}){const s=t.keys,i=r.mode==="single";let o,l,c,u;if(e===null)return;let d=!1;for(o=0,l=s.length;o<l;++o){if(c=+s[o],c===n){if(d=!0,r.all)continue;break}u=t.values[c],lt(u)&&(i||e===0||Mo(e)===Mo(u))&&(e+=u)}return!d&&!r.all?0:e}function hO(t,e){const{iScale:n,vScale:r}=e,s=n.axis==="x"?"x":"y",i=r.axis==="x"?"x":"y",o=Object.keys(t),l=new Array(o.length);let c,u,d;for(c=0,u=o.length;c<u;++c)d=o[c],l[c]={[s]:d,[i]:t[d]};return l}function Rf(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function fO(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function pO(t){const{min:e,max:n,minDefined:r,maxDefined:s}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function mO(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function rb(t,e,n,r){for(const s of e.getMatchingVisibleMetas(r).reverse()){const i=t[s.index];if(n&&i>0||!n&&i<0)return s.index}return null}function sb(t,e){const{chart:n,_cachedMeta:r}=t,s=n._stacks||(n._stacks={}),{iScale:i,vScale:o,index:l}=r,c=i.axis,u=o.axis,d=fO(i,o,r),h=e.length;let f;for(let p=0;p<h;++p){const x=e[p],{[c]:m,[u]:v}=x,y=x._stacks||(x._stacks={});f=y[u]=mO(s,d,m),f[l]=v,f._top=rb(f,o,!0,r.type),f._bottom=rb(f,o,!1,r.type);const g=f._visualValues||(f._visualValues={});g[l]=v}}function Ff(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function gO(t,e){return Ws(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function xO(t,e,n){return Ws(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function ma(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const s of e){const i=s._stacks;if(!i||i[r]===void 0||i[r][n]===void 0)return;delete i[r][n],i[r]._visualValues!==void 0&&i[r]._visualValues[n]!==void 0&&delete i[r]._visualValues[n]}}}const If=t=>t==="reset"||t==="none",ib=(t,e)=>e?t:Object.assign({},t),yO=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:kS(n,!0),values:null};class Ga{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Rf(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&ma(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(h,f,p,x)=>h==="x"?f:h==="r"?x:p,i=n.xAxisID=Pe(r.xAxisID,Ff(e,"x")),o=n.yAxisID=Pe(r.yAxisID,Ff(e,"y")),l=n.rAxisID=Pe(r.rAxisID,Ff(e,"r")),c=n.indexAxis,u=n.iAxisID=s(c,i,o,l),d=n.vAxisID=s(c,o,i,l);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(l),n.iScale=this.getScaleForId(u),n.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&zv(this._data,this),e._stacked&&ma(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(Oe(n)){const s=this._cachedMeta;this._data=hO(n,s)}else if(r!==n){if(r){zv(r,this);const s=this._cachedMeta;ma(s),s._parsed=[]}n&&Object.isExtensible(n)&&Q8(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const i=n._stacked;n._stacked=Rf(n.vScale,n),n.stack!==r.stack&&(s=!0,ma(n),n.stack=r.stack),this._resyncElements(e),(s||i!==n._stacked)&&(sb(this,n._parsed),n._stacked=Rf(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:s}=this,{iScale:i,_stacked:o}=r,l=i.axis;let c=e===0&&n===s.length?!0:r._sorted,u=e>0&&r._parsed[e-1],d,h,f;if(this._parsing===!1)r._parsed=s,r._sorted=!0,f=s;else{tt(s[e])?f=this.parseArrayData(r,s,e,n):Oe(s[e])?f=this.parseObjectData(r,s,e,n):f=this.parsePrimitiveData(r,s,e,n);const p=()=>h[l]===null||u&&h[l]<u[l];for(d=0;d<n;++d)r._parsed[d+e]=h=f[d],c&&(p()&&(c=!1),u=h);r._sorted=c}o&&sb(this,f)}parsePrimitiveData(e,n,r,s){const{iScale:i,vScale:o}=e,l=i.axis,c=o.axis,u=i.getLabels(),d=i===o,h=new Array(s);let f,p,x;for(f=0,p=s;f<p;++f)x=f+r,h[f]={[l]:d||i.parse(u[x],x),[c]:o.parse(n[x],x)};return h}parseArrayData(e,n,r,s){const{xScale:i,yScale:o}=e,l=new Array(s);let c,u,d,h;for(c=0,u=s;c<u;++c)d=c+r,h=n[d],l[c]={x:i.parse(h[0],d),y:o.parse(h[1],d)};return l}parseObjectData(e,n,r,s){const{xScale:i,yScale:o}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=new Array(s);let d,h,f,p;for(d=0,h=s;d<h;++d)f=d+r,p=n[f],u[d]={x:i.parse(md(p,l),f),y:o.parse(md(p,c),f)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const s=this.chart,i=this._cachedMeta,o=n[e.axis],l={keys:kS(s,!0),values:n._stacks[e.axis]._visualValues};return nb(l,o,i.index,{mode:r})}updateRangeFromParsed(e,n,r,s){const i=r[n.axis];let o=i===null?NaN:i;const l=s&&r._stacks[n.axis];s&&l&&(s.values=l,o=nb(s,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,s=r._parsed,i=r._sorted&&e===r.iScale,o=s.length,l=this._getOtherScale(e),c=yO(n,r,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:h}=pO(l);let f,p;function x(){p=s[f];const m=p[l.axis];return!lt(p[e.axis])||d>m||h<m}for(f=0;f<o&&!(!x()&&(this.updateRangeFromParsed(u,e,p,c),i));++f);if(i){for(f=o-1;f>=0;--f)if(!x()){this.updateRangeFromParsed(u,e,p,c);break}}return u}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let s,i,o;for(s=0,i=n.length;s<i;++s)o=n[s][e.axis],lt(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,s=n.vScale,i=this.getParsed(e);return{label:r?""+r.getLabelForValue(i[r.axis]):"",value:s?""+s.getLabelForValue(i[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=dO(Pe(this.options.clip,uO(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,s=r.data||[],i=n.chartArea,o=[],l=this._drawStart||0,c=this._drawCount||s.length-l,u=this.options.drawActiveElementsOnTop;let d;for(r.dataset&&r.dataset.draw(e,i,l,c),d=l;d<l+c;++d){const h=s[d];h.hidden||(h.active&&u?o.push(h):h.draw(e,i))}for(d=0;d<o.length;++d)o[d].draw(e,i)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const s=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=xO(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=s.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=gO(this.chart.getContext(),this.index)),i.dataset=s,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=r,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const s=n==="active",i=this._cachedDataOpts,o=e+"-"+n,l=i[o],c=this.enableOptionSharing&&gd(r);if(l)return ib(l,c);const u=this.chart.config,d=u.datasetElementScopeKeys(this._type,e),h=s?[`${e}Hover`,"hover",e,""]:[e,""],f=u.getOptionScopes(this.getDataset(),d),p=Object.keys(ct.elements[e]),x=()=>this.getContext(r,s,n),m=u.resolveNamedOptions(f,p,x,h);return m.$shared&&(m.$shared=c,i[o]=Object.freeze(ib(m,c))),m}_resolveAnimations(e,n,r){const s=this.chart,i=this._cachedDataOpts,o=`animation-${n}`,l=i[o];if(l)return l;let c;if(s.options.animation!==!1){const d=this.chart.config,h=d.datasetAnimationScopeKeys(this._type,n),f=d.getOptionScopes(this.getDataset(),h);c=d.createResolver(f,this.getContext(e,r,n))}const u=new _S(s,c&&c.animations);return c&&c._cacheable&&(i[o]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||If(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),s=this._sharedOptions,i=this.getSharedOptions(r),o=this.includeOptions(n,i)||i!==s;return this.updateSharedOptions(i,n,r),{sharedOptions:i,includeOptions:o}}updateElement(e,n,r,s){If(s)?Object.assign(e,r):this._resolveAnimations(n,s).update(e,r)}updateSharedOptions(e,n,r){e&&!If(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,s){e.active=s;const i=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(e,{options:!s&&this.getSharedOptions(i)||i})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[l,c,u]of this._syncList)this[l](c,u);this._syncList=[];const s=r.length,i=n.length,o=Math.min(i,s);o&&this.parse(0,o),i>s?this._insertElements(s,i-s,e):i<s&&this._removeElements(i,s-i)}_insertElements(e,n,r=!0){const s=this._cachedMeta,i=s.data,o=e+n;let l;const c=u=>{for(u.length+=n,l=u.length-1;l>=o;l--)u[l]=u[l-n]};for(c(i),l=e;l<o;++l)i[l]=new this.dataElementType;this._parsing&&c(s._parsed),this.parse(e,n),r&&this.updateElements(i,e,n,"reset")}updateElements(e,n,r,s){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(e,n);r._stacked&&ma(r,s)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,s]=e;this[n](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ve(Ga,"defaults",{}),ve(Ga,"datasetElementType",null),ve(Ga,"dataElementType",null);class Eu extends Ga{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:s=[],_dataset:i}=n,o=this.chart._animationsDisabled;let{start:l,count:c}=n6(n,s,o);this._drawStart=l,this._drawCount=c,r6(n)&&(l=0,c=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!i._decimated,r.points=s;const u=this.resolveDatasetElementOptions(e);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:u},e),this.updateElements(s,l,c,e)}updateElements(e,n,r,s){const i=s==="reset",{iScale:o,vScale:l,_stacked:c,_dataset:u}=this._cachedMeta,{sharedOptions:d,includeOptions:h}=this._getSharedOptions(n,s),f=o.axis,p=l.axis,{spanGaps:x,segment:m}=this.options,v=_l(x)?x:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||i||s==="none",g=n+r,b=e.length;let _=n>0&&this.getParsed(n-1);for(let C=0;C<b;++C){const N=e[C],j=y?N:{};if(C<n||C>=g){j.skip=!0;continue}const w=this.getParsed(C),k=Be(w[p]),E=j[f]=o.getPixelForValue(w[f],C),P=j[p]=i||k?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,w,c):w[p],C);j.skip=isNaN(E)||isNaN(P)||k,j.stop=C>0&&Math.abs(w[f]-_[f])>v,m&&(j.parsed=w,j.raw=u.data[C]),h&&(j.options=d||this.resolveDataElementOptions(C,N.active?"active":s)),y||this.updateElement(N,C,j,s),_=w}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,s=e.data||[];if(!s.length)return r;const i=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,i,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}ve(Eu,"id","line"),ve(Eu,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),ve(Eu,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Qs(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class nx{constructor(e){ve(this,"options");this.options=e||{}}static override(e){Object.assign(nx.prototype,e)}init(){}formats(){return Qs()}parse(){return Qs()}format(){return Qs()}add(){return Qs()}diff(){return Qs()}startOf(){return Qs()}endOf(){return Qs()}}var vO={_date:nx};function bO(t,e,n,r){const{controller:s,data:i,_sorted:o}=t,l=s._cachedMeta.iScale,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(l&&e===l.axis&&e!=="r"&&o&&i.length){const u=l._reversePixels?X8:mi;if(r){if(s._sharedOptions){const d=i[0],h=typeof d.getRange=="function"&&d.getRange(e);if(h){const f=u(i,e,n-h),p=u(i,e,n+h);return{lo:f.lo,hi:p.hi}}}}else{const d=u(i,e,n);if(c){const{vScale:h}=s._cachedMeta,{_parsed:f}=t,p=f.slice(0,d.lo+1).reverse().findIndex(m=>!Be(m[h.axis]));d.lo-=Math.max(0,p);const x=f.slice(d.hi).findIndex(m=>!Be(m[h.axis]));d.hi+=Math.max(0,x)}return d}}return{lo:0,hi:i.length-1}}function Vl(t,e,n,r,s){const i=t.getSortedVisibleDatasetMetas(),o=n[e];for(let l=0,c=i.length;l<c;++l){const{index:u,data:d}=i[l],{lo:h,hi:f}=bO(i[l],e,o,s);for(let p=h;p<=f;++p){const x=d[p];x.skip||r(x,u,p)}}}function wO(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,s){const i=e?Math.abs(r.x-s.x):0,o=n?Math.abs(r.y-s.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function Mf(t,e,n,r,s){const i=[];return!s&&!t.isPointInArea(e)||Vl(t,n,e,function(l,c,u){!s&&!Br(l,t.chartArea,0)||l.inRange(e.x,e.y,r)&&i.push({element:l,datasetIndex:c,index:u})},!0),i}function _O(t,e,n,r){let s=[];function i(o,l,c){const{startAngle:u,endAngle:d}=o.getProps(["startAngle","endAngle"],r),{angle:h}=K8(o,{x:e.x,y:e.y});sS(h,u,d)&&s.push({element:o,datasetIndex:l,index:c})}return Vl(t,n,e,i),s}function kO(t,e,n,r,s,i){let o=[];const l=wO(n);let c=Number.POSITIVE_INFINITY;function u(d,h,f){const p=d.inRange(e.x,e.y,s);if(r&&!p)return;const x=d.getCenterPoint(s);if(!(!!i||t.isPointInArea(x))&&!p)return;const v=l(e,x);v<c?(o=[{element:d,datasetIndex:h,index:f}],c=v):v===c&&o.push({element:d,datasetIndex:h,index:f})}return Vl(t,n,e,u),o}function Lf(t,e,n,r,s,i){return!i&&!t.isPointInArea(e)?[]:n==="r"&&!r?_O(t,e,n,s):kO(t,e,n,r,s,i)}function ob(t,e,n,r,s){const i=[],o=n==="x"?"inXRange":"inYRange";let l=!1;return Vl(t,n,e,(c,u,d)=>{c[o]&&c[o](e[n],s)&&(i.push({element:c,datasetIndex:u,index:d}),l=l||c.inRange(e.x,e.y,s))}),r&&!l?[]:i}var SO={evaluateInteractionItems:Vl,modes:{index(t,e,n,r){const s=oi(e,t),i=n.axis||"x",o=n.includeInvisible||!1,l=n.intersect?Mf(t,s,i,r,o):Lf(t,s,i,!1,r,o),c=[];return l.length?(t.getSortedVisibleDatasetMetas().forEach(u=>{const d=l[0].index,h=u.data[d];h&&!h.skip&&c.push({element:h,datasetIndex:u.index,index:d})}),c):[]},dataset(t,e,n,r){const s=oi(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;let l=n.intersect?Mf(t,s,i,r,o):Lf(t,s,i,!1,r,o);if(l.length>0){const c=l[0].datasetIndex,u=t.getDatasetMeta(c).data;l=[];for(let d=0;d<u.length;++d)l.push({element:u[d],datasetIndex:c,index:d})}return l},point(t,e,n,r){const s=oi(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return Mf(t,s,i,r,o)},nearest(t,e,n,r){const s=oi(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return Lf(t,s,i,n.intersect,r,o)},x(t,e,n,r){const s=oi(e,t);return ob(t,s,"x",n.intersect,r)},y(t,e,n,r){const s=oi(e,t);return ob(t,s,"y",n.intersect,r)}}};const SS=["left","top","right","bottom"];function ga(t,e){return t.filter(n=>n.pos===e)}function ab(t,e){return t.filter(n=>SS.indexOf(n.pos)===-1&&n.box.axis===e)}function xa(t,e){return t.sort((n,r)=>{const s=e?r:n,i=e?n:r;return s.weight===i.weight?s.index-i.index:s.weight-i.weight})}function CO(t){const e=[];let n,r,s,i,o,l;for(n=0,r=(t||[]).length;n<r;++n)s=t[n],{position:i,options:{stack:o,stackWeight:l=1}}=s,e.push({index:n,box:s,pos:i,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&i+o,stackWeight:l});return e}function jO(t){const e={};for(const n of t){const{stack:r,pos:s,stackWeight:i}=n;if(!r||!SS.includes(s))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function EO(t,e){const n=jO(t),{vBoxMaxWidth:r,hBoxMaxHeight:s}=e;let i,o,l;for(i=0,o=t.length;i<o;++i){l=t[i];const{fullSize:c}=l.box,u=n[l.stack],d=u&&l.stackWeight/u.weight;l.horizontal?(l.width=d?d*r:c&&e.availableWidth,l.height=s):(l.width=r,l.height=d?d*s:c&&e.availableHeight)}return n}function NO(t){const e=CO(t),n=xa(e.filter(u=>u.box.fullSize),!0),r=xa(ga(e,"left"),!0),s=xa(ga(e,"right")),i=xa(ga(e,"top"),!0),o=xa(ga(e,"bottom")),l=ab(e,"x"),c=ab(e,"y");return{fullSize:n,leftAndTop:r.concat(i),rightAndBottom:s.concat(c).concat(o).concat(l),chartArea:ga(e,"chartArea"),vertical:r.concat(s).concat(c),horizontal:i.concat(o).concat(l)}}function lb(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function CS(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function AO(t,e,n,r){const{pos:s,box:i}=n,o=t.maxPadding;if(!Oe(s)){n.size&&(t[s]-=n.size);const h=r[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?i.height:i.width),n.size=h.size/h.count,t[s]+=n.size}i.getPadding&&CS(o,i.getPadding());const l=Math.max(0,e.outerWidth-lb(o,t,"left","right")),c=Math.max(0,e.outerHeight-lb(o,t,"top","bottom")),u=l!==t.w,d=c!==t.h;return t.w=l,t.h=c,n.horizontal?{same:u,other:d}:{same:d,other:u}}function PO(t){const e=t.maxPadding;function n(r){const s=Math.max(e[r]-t[r],0);return t[r]+=s,s}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function DO(t,e){const n=e.maxPadding;function r(s){const i={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{i[o]=Math.max(e[o],n[o])}),i}return r(t?["left","right"]:["top","bottom"])}function Na(t,e,n,r){const s=[];let i,o,l,c,u,d;for(i=0,o=t.length,u=0;i<o;++i){l=t[i],c=l.box,c.update(l.width||e.w,l.height||e.h,DO(l.horizontal,e));const{same:h,other:f}=AO(e,n,l,r);u|=h&&s.length,d=d||f,c.fullSize||s.push(l)}return u&&Na(s,e,n,r)||d}function qc(t,e,n,r,s){t.top=n,t.left=e,t.right=e+r,t.bottom=n+s,t.width=r,t.height=s}function cb(t,e,n,r){const s=n.padding;let{x:i,y:o}=e;for(const l of t){const c=l.box,u=r[l.stack]||{count:1,placed:0,weight:1},d=l.stackWeight/u.weight||1;if(l.horizontal){const h=e.w*d,f=u.size||c.height;gd(u.start)&&(o=u.start),c.fullSize?qc(c,s.left,o,n.outerWidth-s.right-s.left,f):qc(c,e.left+u.placed,o,h,f),u.start=o,u.placed+=h,o=c.bottom}else{const h=e.h*d,f=u.size||c.width;gd(u.start)&&(i=u.start),c.fullSize?qc(c,i,s.top,f,n.outerHeight-s.bottom-s.top):qc(c,i,e.top+u.placed,f,h),u.start=i,u.placed+=h,i=c.right}}e.x=i,e.y=o}var Fn={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const s=Bt(t.options.layout.padding),i=Math.max(e-s.width,0),o=Math.max(n-s.height,0),l=NO(t.boxes),c=l.vertical,u=l.horizontal;Le(t.boxes,m=>{typeof m.beforeLayout=="function"&&m.beforeLayout()});const d=c.reduce((m,v)=>v.box.options&&v.box.options.display===!1?m:m+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:s,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/d,hBoxMaxHeight:o/2}),f=Object.assign({},s);CS(f,Bt(r));const p=Object.assign({maxPadding:f,w:i,h:o,x:s.left,y:s.top},s),x=EO(c.concat(u),h);Na(l.fullSize,p,h,x),Na(c,p,h,x),Na(u,p,h,x)&&Na(c,p,h,x),PO(p),cb(l.leftAndTop,p,h,x),p.x+=p.w,p.y+=p.h,cb(l.rightAndBottom,p,h,x),t.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},Le(l.chartArea,m=>{const v=m.box;Object.assign(v,t.chartArea),v.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class jS{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,s){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,s?Math.floor(n/s):r)}}isAttached(e){return!0}updateConfig(e){}}class TO extends jS{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Nu="$chartjs",OO={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},ub=t=>t===null||t==="";function RO(t,e){const n=t.style,r=t.getAttribute("height"),s=t.getAttribute("width");if(t[Nu]={initial:{height:r,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",ub(s)){const i=Xv(t,"width");i!==void 0&&(t.width=i)}if(ub(r))if(t.style.height==="")t.height=t.width/(e||2);else{const i=Xv(t,"height");i!==void 0&&(t.height=i)}return t}const ES=K6?{passive:!0}:!1;function FO(t,e,n){t&&t.addEventListener(e,n,ES)}function IO(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,ES)}function MO(t,e){const n=OO[t.type]||t.type,{x:r,y:s}=oi(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:s!==void 0?s:null}}function wd(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function LO(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||wd(l.addedNodes,r),o=o&&!wd(l.removedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function BO(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||wd(l.removedNodes,r),o=o&&!wd(l.addedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const kl=new Map;let db=0;function NS(){const t=window.devicePixelRatio;t!==db&&(db=t,kl.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function $O(t,e){kl.size||window.addEventListener("resize",NS),kl.set(t,e)}function zO(t){kl.delete(t),kl.size||window.removeEventListener("resize",NS)}function UO(t,e,n){const r=t.canvas,s=r&&tx(r);if(!s)return;const i=aS((l,c)=>{const u=s.clientWidth;n(l,c),u<s.clientWidth&&n()},window),o=new ResizeObserver(l=>{const c=l[0],u=c.contentRect.width,d=c.contentRect.height;u===0&&d===0||i(u,d)});return o.observe(s),$O(t,i),o}function Bf(t,e,n){n&&n.disconnect(),e==="resize"&&zO(t)}function VO(t,e,n){const r=t.canvas,s=aS(i=>{t.ctx!==null&&n(MO(i,t))},t);return FO(r,e,s),s}class WO extends jS{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(RO(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[Nu])return!1;const r=n[Nu].initial;["height","width"].forEach(i=>{const o=r[i];Be(o)?n.removeAttribute(i):n.setAttribute(i,o)});const s=r.style||{};return Object.keys(s).forEach(i=>{n.style[i]=s[i]}),n.width=n.width,delete n[Nu],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const s=e.$proxies||(e.$proxies={}),o={attach:LO,detach:BO,resize:UO}[n]||VO;s[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),s=r[n];if(!s)return;({attach:Bf,detach:Bf,resize:Bf}[n]||IO)(e,n,s),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,s){return q6(e,n,r,s)}isAttached(e){const n=e&&tx(e);return!!(n&&n.isConnected)}}function HO(t){return!ex()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?TO:WO}var uu;let Ti=(uu=class{constructor(){ve(this,"x");ve(this,"y");ve(this,"active",!1);ve(this,"options");ve(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return _l(this.x)&&_l(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const s={};return e.forEach(i=>{s[i]=r[i]&&r[i].active()?r[i]._to:this[i]}),s}},ve(uu,"defaults",{}),ve(uu,"defaultRoutes"),uu);function qO(t,e){const n=t.options.ticks,r=KO(t),s=Math.min(n.maxTicksLimit||r,r),i=n.major.enabled?YO(e):[],o=i.length,l=i[0],c=i[o-1],u=[];if(o>s)return XO(e,u,i,o/s),u;const d=GO(i,e,s);if(o>0){let h,f;const p=o>1?Math.round((c-l)/(o-1)):null;for(Kc(e,u,d,Be(p)?0:l-p,l),h=0,f=o-1;h<f;h++)Kc(e,u,d,i[h],i[h+1]);return Kc(e,u,d,c,Be(p)?e.length:c+p),u}return Kc(e,u,d),u}function KO(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),s=t._maxLength/n;return Math.floor(Math.min(r,s))}function GO(t,e,n){const r=JO(t),s=e.length/n;if(!r)return Math.max(s,1);const i=W8(r);for(let o=0,l=i.length-1;o<l;o++){const c=i[o];if(c>s)return c}return Math.max(s,1)}function YO(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function XO(t,e,n,r){let s=0,i=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===i&&(e.push(t[o]),s++,i=n[s*r])}function Kc(t,e,n,r,s){const i=Pe(r,0),o=Math.min(Pe(s,t.length),t.length);let l=0,c,u,d;for(n=Math.ceil(n),s&&(c=s-r,n=c/Math.floor(c/n)),d=i;d<0;)l++,d=Math.round(i+l*n);for(u=Math.max(i,0);u<o;u++)u===d&&(e.push(t[u]),l++,d=Math.round(i+l*n))}function JO(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const QO=t=>t==="left"?"right":t==="right"?"left":t,hb=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,fb=(t,e)=>Math.min(e||t,t);function pb(t,e){const n=[],r=t.length/e,s=t.length;let i=0;for(;i<s;i+=r)n.push(t[Math.floor(i)]);return n}function ZO(t,e,n){const r=t.ticks.length,s=Math.min(e,r-1),i=t._startPixel,o=t._endPixel,l=1e-6;let c=t.getPixelForTick(s),u;if(!(n&&(r===1?u=Math.max(c-i,o-c):e===0?u=(t.getPixelForTick(1)-c)/2:u=(c-t.getPixelForTick(s-1))/2,c+=s<e?u:-u,c<i-l||c>o+l)))return c}function eR(t,e){Le(t,n=>{const r=n.gc,s=r.length/2;let i;if(s>e){for(i=0;i<s;++i)delete n.data[r[i]];r.splice(0,s)}})}function ya(t){return t.drawTicks?t.tickLength:0}function mb(t,e){if(!t.display)return 0;const n=_t(t.font,e),r=Bt(t.padding);return(tt(t.text)?t.text.length:1)*n.lineHeight+r.height}function tR(t,e){return Ws(t,{scale:e,type:"scale"})}function nR(t,e,n){return Ws(t,{tick:n,index:e,type:"tick"})}function rR(t,e,n){let r=Gg(t);return(n&&e!=="right"||!n&&e==="right")&&(r=QO(r)),r}function sR(t,e,n,r){const{top:s,left:i,bottom:o,right:l,chart:c}=t,{chartArea:u,scales:d}=c;let h=0,f,p,x;const m=o-s,v=l-i;if(t.isHorizontal()){if(p=Ft(r,i,l),Oe(n)){const y=Object.keys(n)[0],g=n[y];x=d[y].getPixelForValue(g)+m-e}else n==="center"?x=(u.bottom+u.top)/2+m-e:x=hb(t,n,e);f=l-i}else{if(Oe(n)){const y=Object.keys(n)[0],g=n[y];p=d[y].getPixelForValue(g)-v+e}else n==="center"?p=(u.left+u.right)/2-v+e:p=hb(t,n,e);x=Ft(r,o,s),h=n==="left"?-wn:wn}return{titleX:p,titleY:x,maxWidth:f,rotation:h}}class Oi extends Ti{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:s}=this;return e=hn(e,Number.POSITIVE_INFINITY),n=hn(n,Number.NEGATIVE_INFINITY),r=hn(r,Number.POSITIVE_INFINITY),s=hn(s,Number.NEGATIVE_INFINITY),{min:hn(e,r),max:hn(n,s),minDefined:lt(e),maxDefined:lt(n)}}getMinMax(e){let{min:n,max:r,minDefined:s,maxDefined:i}=this.getUserBounds(),o;if(s&&i)return{min:n,max:r};const l=this.getMatchingVisibleMetas();for(let c=0,u=l.length;c<u;++c)o=l[c].controller.getMinMax(this,e),s||(n=Math.min(n,o.min)),i||(r=Math.max(r,o.max));return n=i&&n>r?r:n,r=s&&n>r?n:r,{min:hn(n,hn(r,n)),max:hn(r,hn(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){qe(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:s,grace:i,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=S6(this,i,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?pb(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=qO(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){qe(this.options.afterUpdate,[this])}beforeSetDimensions(){qe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){qe(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),qe(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){qe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,s,i;for(r=0,s=e.length;r<s;r++)i=e[r],i.label=qe(n.callback,[i.value,r,e],this)}afterTickToLabelConversion(){qe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){qe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=fb(this.ticks.length,e.ticks.maxTicksLimit),s=n.minRotation||0,i=n.maxRotation;let o=s,l,c,u;if(!this._isVisible()||!n.display||s>=i||r<=1||!this.isHorizontal()){this.labelRotation=s;return}const d=this._getLabelSizes(),h=d.widest.width,f=d.highest.height,p=Rn(this.chart.width-h,0,this.maxWidth);l=e.offset?this.maxWidth/r:p/(r-1),h+6>l&&(l=p/(r-(e.offset?.5:1)),c=this.maxHeight-ya(e.grid)-n.padding-mb(e.title,this.chart.options.font),u=Math.sqrt(h*h+f*f),o=qg(Math.min(Math.asin(Rn((d.highest.height+6)/l,-1,1)),Math.asin(Rn(c/u,-1,1))-Math.asin(Rn(f/u,-1,1)))),o=Math.max(s,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){qe(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){qe(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:s,grid:i}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const c=mb(s,n.options.font);if(l?(e.width=this.maxWidth,e.height=ya(i)+c):(e.height=this.maxHeight,e.width=ya(i)+c),r.display&&this.ticks.length){const{first:u,last:d,widest:h,highest:f}=this._getLabelSizes(),p=r.padding*2,x=ws(this.labelRotation),m=Math.cos(x),v=Math.sin(x);if(l){const y=r.mirror?0:v*h.width+m*f.height;e.height=Math.min(this.maxHeight,e.height+y+p)}else{const y=r.mirror?0:m*h.width+v*f.height;e.width=Math.min(this.maxWidth,e.width+y+p)}this._calculatePadding(u,d,v,m)}}this._handleMargins(),l?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,s){const{ticks:{align:i,padding:o},position:l}=this.options,c=this.labelRotation!==0,u=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,p=0;c?u?(f=s*e.width,p=r*n.height):(f=r*e.height,p=s*n.width):i==="start"?p=n.width:i==="end"?f=e.width:i!=="inner"&&(f=e.width/2,p=n.width/2),this.paddingLeft=Math.max((f-d+o)*this.width/(this.width-d),0),this.paddingRight=Math.max((p-h+o)*this.width/(this.width-h),0)}else{let d=n.height/2,h=e.height/2;i==="start"?(d=0,h=e.height):i==="end"&&(d=n.height,h=0),this.paddingTop=d+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){qe(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)Be(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=pb(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:s,_longestTextCache:i}=this,o=[],l=[],c=Math.floor(n/fb(n,r));let u=0,d=0,h,f,p,x,m,v,y,g,b,_,C;for(h=0;h<n;h+=c){if(x=e[h].label,m=this._resolveTickFontOptions(h),s.font=v=m.string,y=i[v]=i[v]||{data:{},gc:[]},g=m.lineHeight,b=_=0,!Be(x)&&!tt(x))b=yd(s,y.data,y.gc,b,x),_=g;else if(tt(x))for(f=0,p=x.length;f<p;++f)C=x[f],!Be(C)&&!tt(C)&&(b=yd(s,y.data,y.gc,b,C),_+=g);o.push(b),l.push(_),u=Math.max(b,u),d=Math.max(_,d)}eR(i,n);const N=o.indexOf(u),j=l.indexOf(d),w=k=>({width:o[k]||0,height:l[k]||0});return{first:w(0),last:w(n-1),widest:w(N),highest:w(j),widths:o,heights:l}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return Y8(this._alignToPixels?Js(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=nR(this.getContext(),e,r))}return this.$context||(this.$context=tR(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=ws(this.labelRotation),r=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,l=i?i.widest.width+o:0,c=i?i.highest.height+o:0;return this.isHorizontal()?c*r>l*s?l/r:c/s:c*s<l*r?c/r:l/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,s=this.options,{grid:i,position:o,border:l}=s,c=i.offset,u=this.isHorizontal(),h=this.ticks.length+(c?1:0),f=ya(i),p=[],x=l.setContext(this.getContext()),m=x.display?x.width:0,v=m/2,y=function(U){return Js(r,U,m)};let g,b,_,C,N,j,w,k,E,P,A,D;if(o==="top")g=y(this.bottom),j=this.bottom-f,k=g-v,P=y(e.top)+v,D=e.bottom;else if(o==="bottom")g=y(this.top),P=e.top,D=y(e.bottom)-v,j=g+v,k=this.top+f;else if(o==="left")g=y(this.right),N=this.right-f,w=g-v,E=y(e.left)+v,A=e.right;else if(o==="right")g=y(this.left),E=e.left,A=y(e.right)-v,N=g+v,w=this.left+f;else if(n==="x"){if(o==="center")g=y((e.top+e.bottom)/2+.5);else if(Oe(o)){const U=Object.keys(o)[0],V=o[U];g=y(this.chart.scales[U].getPixelForValue(V))}P=e.top,D=e.bottom,j=g+v,k=j+f}else if(n==="y"){if(o==="center")g=y((e.left+e.right)/2);else if(Oe(o)){const U=Object.keys(o)[0],V=o[U];g=y(this.chart.scales[U].getPixelForValue(V))}N=g-v,w=N-f,E=e.left,A=e.right}const L=Pe(s.ticks.maxTicksLimit,h),W=Math.max(1,Math.ceil(h/L));for(b=0;b<h;b+=W){const U=this.getContext(b),V=i.setContext(U),$=l.setContext(U),M=V.lineWidth,O=V.color,T=$.dash||[],F=$.dashOffset,R=V.tickWidth,B=V.tickColor,J=V.tickBorderDash||[],G=V.tickBorderDashOffset;_=ZO(this,b,c),_!==void 0&&(C=Js(r,_,M),u?N=w=E=A=C:j=k=P=D=C,p.push({tx1:N,ty1:j,tx2:w,ty2:k,x1:E,y1:P,x2:A,y2:D,width:M,color:O,borderDash:T,borderDashOffset:F,tickWidth:R,tickColor:B,tickBorderDash:J,tickBorderDashOffset:G}))}return this._ticksLength=h,this._borderValue=g,p}_computeLabelItems(e){const n=this.axis,r=this.options,{position:s,ticks:i}=r,o=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:u,padding:d,mirror:h}=i,f=ya(r.grid),p=f+d,x=h?-d:p,m=-ws(this.labelRotation),v=[];let y,g,b,_,C,N,j,w,k,E,P,A,D="middle";if(s==="top")N=this.bottom-x,j=this._getXAxisLabelAlignment();else if(s==="bottom")N=this.top+x,j=this._getXAxisLabelAlignment();else if(s==="left"){const W=this._getYAxisLabelAlignment(f);j=W.textAlign,C=W.x}else if(s==="right"){const W=this._getYAxisLabelAlignment(f);j=W.textAlign,C=W.x}else if(n==="x"){if(s==="center")N=(e.top+e.bottom)/2+p;else if(Oe(s)){const W=Object.keys(s)[0],U=s[W];N=this.chart.scales[W].getPixelForValue(U)+p}j=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")C=(e.left+e.right)/2-p;else if(Oe(s)){const W=Object.keys(s)[0],U=s[W];C=this.chart.scales[W].getPixelForValue(U)}j=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(c==="start"?D="top":c==="end"&&(D="bottom"));const L=this._getLabelSizes();for(y=0,g=l.length;y<g;++y){b=l[y],_=b.label;const W=i.setContext(this.getContext(y));w=this.getPixelForTick(y)+i.labelOffset,k=this._resolveTickFontOptions(y),E=k.lineHeight,P=tt(_)?_.length:1;const U=P/2,V=W.color,$=W.textStrokeColor,M=W.textStrokeWidth;let O=j;o?(C=w,j==="inner"&&(y===g-1?O=this.options.reverse?"left":"right":y===0?O=this.options.reverse?"right":"left":O="center"),s==="top"?u==="near"||m!==0?A=-P*E+E/2:u==="center"?A=-L.highest.height/2-U*E+E:A=-L.highest.height+E/2:u==="near"||m!==0?A=E/2:u==="center"?A=L.highest.height/2-U*E:A=L.highest.height-P*E,h&&(A*=-1),m!==0&&!W.showLabelBackdrop&&(C+=E/2*Math.sin(m))):(N=w,A=(1-P)*E/2);let T;if(W.showLabelBackdrop){const F=Bt(W.backdropPadding),R=L.heights[y],B=L.widths[y];let J=A-F.top,G=0-F.left;switch(D){case"middle":J-=R/2;break;case"bottom":J-=R;break}switch(j){case"center":G-=B/2;break;case"right":G-=B;break;case"inner":y===g-1?G-=B:y>0&&(G-=B/2);break}T={left:G,top:J,width:B+F.width,height:R+F.height,color:W.backdropColor}}v.push({label:_,font:k,textOffset:A,options:{rotation:m,color:V,strokeColor:$,strokeWidth:M,textAlign:O,textBaseline:D,translation:[C,N],backdrop:T}})}return v}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-ws(this.labelRotation))return e==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:s,padding:i}}=this.options,o=this._getLabelSizes(),l=e+i,c=o.widest.width;let u,d;return n==="left"?s?(d=this.right+i,r==="near"?u="left":r==="center"?(u="center",d+=c/2):(u="right",d+=c)):(d=this.right-l,r==="near"?u="right":r==="center"?(u="center",d-=c/2):(u="left",d=this.left)):n==="right"?s?(d=this.left+i,r==="near"?u="right":r==="center"?(u="center",d-=c/2):(u="left",d-=c)):(d=this.left+l,r==="near"?u="left":r==="center"?(u="center",d+=c/2):(u="right",d=this.right)):u="right",{textAlign:u,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:s,width:i,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,s,i,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(i=>i.value===e);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const l=(c,u,d)=>{!d.width||!d.color||(r.save(),r.lineWidth=d.width,r.strokeStyle=d.color,r.setLineDash(d.borderDash||[]),r.lineDashOffset=d.borderDashOffset,r.beginPath(),r.moveTo(c.x,c.y),r.lineTo(u.x,u.y),r.stroke(),r.restore())};if(n.display)for(i=0,o=s.length;i<o;++i){const c=s[i];n.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),n.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:s}}=this,i=r.setContext(this.getContext()),o=r.display?i.width:0;if(!o)return;const l=s.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let u,d,h,f;this.isHorizontal()?(u=Js(e,this.left,o)-o/2,d=Js(e,this.right,l)+l/2,h=f=c):(h=Js(e,this.top,o)-o/2,f=Js(e,this.bottom,l)+l/2,u=d=c),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(u,h),n.lineTo(d,f),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,s=this._computeLabelArea();s&&lh(r,s);const i=this.getLabelItems(e);for(const o of i){const l=o.options,c=o.font,u=o.label,d=o.textOffset;Ni(r,u,0,d,c,l)}s&&ch(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:s}}=this;if(!r.display)return;const i=_t(r.font),o=Bt(r.padding),l=r.align;let c=i.lineHeight/2;n==="bottom"||n==="center"||Oe(n)?(c+=o.bottom,tt(r.text)&&(c+=i.lineHeight*(r.text.length-1))):c+=o.top;const{titleX:u,titleY:d,maxWidth:h,rotation:f}=sR(this,c,n,l);Ni(e,r.text,0,0,i,{color:r.color,maxWidth:h,rotation:f,textAlign:rR(l,n,s),textBaseline:"middle",translation:[u,d]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=Pe(e.grid&&e.grid.z,-1),s=Pe(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Oi.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:r,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",s=[];let i,o;for(i=0,o=n.length;i<o;++i){const l=n[i];l[r]===this.id&&(!e||l.type===e)&&s.push(l)}return s}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return _t(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Gc{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;aR(n)&&(r=this.register(n));const s=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in s||(s[i]=e,iR(e,o,r),this.override&&ct.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,s=this.scope;r in n&&delete n[r],s&&r in ct[s]&&(delete ct[s][r],this.override&&delete Ei[r])}}function iR(t,e,n){const r=wl(Object.create(null),[n?ct.get(n):{},ct.get(e),t.defaults]);ct.set(e,r),t.defaultRoutes&&oR(e,t.defaultRoutes),t.descriptors&&ct.describe(e,t.descriptors)}function oR(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),s=r.pop(),i=[t].concat(r).join("."),o=e[n].split("."),l=o.pop(),c=o.join(".");ct.route(i,s,c,l)})}function aR(t){return"id"in t&&"defaults"in t}class lR{constructor(){this.controllers=new Gc(Ga,"datasets",!0),this.elements=new Gc(Ti,"elements"),this.plugins=new Gc(Object,"plugins"),this.scales=new Gc(Oi,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(s=>{const i=r||this._getRegistryForType(s);r||i.isForType(s)||i===this.plugins&&s.id?this._exec(e,i,s):Le(s,o=>{const l=r||this._getRegistryForType(o);this._exec(e,l,o)})})}_exec(e,n,r){const s=Hg(e);qe(r["before"+s],[],r),n[e](r),qe(r["after"+s],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const s=n.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return s}}var dr=new lR;class cR{constructor(){this._init=[]}notify(e,n,r,s){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(i,e,n,r);return n==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,s){s=s||{};for(const i of e){const o=i.plugin,l=o[r],c=[n,s,i.options];if(qe(l,c,o)===!1&&s.cancelable)return!1}return!0}invalidate(){Be(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,s=Pe(r.options&&r.options.plugins,{}),i=uR(r);return s===!1&&!n?[]:hR(e,i,s,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,s=(i,o)=>i.filter(l=>!o.some(c=>l.plugin.id===c.plugin.id));this._notify(s(n,r),e,"stop"),this._notify(s(r,n),e,"start")}}function uR(t){const e={},n=[],r=Object.keys(dr.plugins.items);for(let i=0;i<r.length;i++)n.push(dr.getPlugin(r[i]));const s=t.plugins||[];for(let i=0;i<s.length;i++){const o=s[i];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function dR(t,e){return!e&&t===!1?null:t===!0?{}:t}function hR(t,{plugins:e,localIds:n},r,s){const i=[],o=t.getContext();for(const l of e){const c=l.id,u=dR(r[c],s);u!==null&&i.push({plugin:l,options:fR(t.config,{plugin:l,local:n[c]},u,o)})}return i}function fR(t,{plugin:e,local:n},r,s){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(r,i);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function lm(t,e){const n=ct.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function pR(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function mR(t,e){return t===e?"_index_":"_value_"}function gb(t){if(t==="x"||t==="y"||t==="r")return t}function gR(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function cm(t,...e){if(gb(t))return t;for(const n of e){const r=n.axis||gR(n.position)||t.length>1&&gb(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function xb(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function xR(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return xb(t,"x",n[0])||xb(t,"y",n[0])}return{}}function yR(t,e){const n=Ei[t.type]||{scales:{}},r=e.scales||{},s=lm(t.type,e),i=Object.create(null);return Object.keys(r).forEach(o=>{const l=r[o];if(!Oe(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=cm(o,l,xR(o,t),ct.scales[l.type]),u=mR(c,s),d=n.scales||{};i[o]=Wa(Object.create(null),[{axis:c},l,d[c],d[u]])}),t.data.datasets.forEach(o=>{const l=o.type||t.type,c=o.indexAxis||lm(l,e),d=(Ei[l]||{}).scales||{};Object.keys(d).forEach(h=>{const f=pR(h,c),p=o[f+"AxisID"]||f;i[p]=i[p]||Object.create(null),Wa(i[p],[{axis:f},r[p],d[h]])})}),Object.keys(i).forEach(o=>{const l=i[o];Wa(l,[ct.scales[l.type],ct.scale])}),i}function AS(t){const e=t.options||(t.options={});e.plugins=Pe(e.plugins,{}),e.scales=yR(t,e)}function PS(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function vR(t){return t=t||{},t.data=PS(t.data),AS(t),t}const yb=new Map,DS=new Set;function Yc(t,e){let n=yb.get(t);return n||(n=e(),yb.set(t,n),DS.add(n)),n}const va=(t,e,n)=>{const r=md(e,n);r!==void 0&&t.add(r)};class bR{constructor(e){this._config=vR(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=PS(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),AS(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Yc(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Yc(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Yc(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return Yc(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let s=r.get(e);return(!s||n)&&(s=new Map,r.set(e,s)),s}getOptionScopes(e,n,r){const{options:s,type:i}=this,o=this._cachedScopes(e,r),l=o.get(n);if(l)return l;const c=new Set;n.forEach(d=>{e&&(c.add(e),d.forEach(h=>va(c,e,h))),d.forEach(h=>va(c,s,h)),d.forEach(h=>va(c,Ei[i]||{},h)),d.forEach(h=>va(c,ct,h)),d.forEach(h=>va(c,om,h))});const u=Array.from(c);return u.length===0&&u.push(Object.create(null)),DS.has(n)&&o.set(n,u),u}chartOptionScopes(){const{options:e,type:n}=this;return[e,Ei[n]||{},ct.datasets[n]||{},{type:n},ct,om]}resolveNamedOptions(e,n,r,s=[""]){const i={$shared:!0},{resolver:o,subPrefixes:l}=vb(this._resolverCache,e,s);let c=o;if(_R(o,n)){i.$shared=!1,r=Ms(r)?r():r;const u=this.createResolver(e,r,l);c=Lo(o,r,u)}for(const u of n)i[u]=c[u];return i}createResolver(e,n,r=[""],s){const{resolver:i}=vb(this._resolverCache,e,r);return Oe(n)?Lo(i,n,void 0,s):i}}function vb(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const s=n.join();let i=r.get(s);return i||(i={resolver:Jg(e,n),subPrefixes:n.filter(l=>!l.toLowerCase().includes("hover"))},r.set(s,i)),i}const wR=t=>Oe(t)&&Object.getOwnPropertyNames(t).some(e=>Ms(t[e]));function _R(t,e){const{isScriptable:n,isIndexable:r}=dS(t);for(const s of e){const i=n(s),o=r(s),l=(o||i)&&t[s];if(i&&(Ms(l)||wR(l))||o&&tt(l))return!0}return!1}var kR="4.5.0";const SR=["top","bottom","left","right","chartArea"];function bb(t,e){return t==="top"||t==="bottom"||SR.indexOf(t)===-1&&e==="x"}function wb(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function _b(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),qe(n&&n.onComplete,[t],e)}function CR(t){const e=t.chart,n=e.options.animation;qe(n&&n.onProgress,[t],e)}function TS(t){return ex()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Au={},kb=t=>{const e=TS(t);return Object.values(Au).filter(n=>n.canvas===e).pop()};function jR(t,e,n){const r=Object.keys(t);for(const s of r){const i=+s;if(i>=e){const o=t[s];delete t[s],(n>0||i>e)&&(t[i+n]=o)}}}function ER(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}var rs;let Ri=(rs=class{static register(...e){dr.add(...e),Sb()}static unregister(...e){dr.remove(...e),Sb()}constructor(e,n){const r=this.config=new bR(n),s=TS(e),i=kb(s);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||HO(s)),this.platform.updateConfig(r);const l=this.platform.acquireContext(s,o.aspectRatio),c=l&&l.canvas,u=c&&c.height,d=c&&c.width;if(this.id=F8(),this.ctx=l,this.canvas=c,this.width=d,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new cR,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=e6(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],Au[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}Ar.listen(this,"complete",_b),Ar.listen(this,"progress",CR),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:s,_aspectRatio:i}=this;return Be(e)?n&&i?i:s?r/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return dr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Yv(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return qv(this.canvas,this.ctx),this}stop(){return Ar.stop(this),this}resize(e,n){Ar.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,s=this.canvas,i=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,n,i),l=r.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Yv(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),qe(r.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Le(n,(r,s)=>{r.id=s})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,s=Object.keys(r).reduce((o,l)=>(o[l]=!1,o),{});let i=[];n&&(i=i.concat(Object.keys(n).map(o=>{const l=n[o],c=cm(o,l),u=c==="r",d=c==="x";return{options:l,dposition:u?"chartArea":d?"bottom":"left",dtype:u?"radialLinear":d?"category":"linear"}}))),Le(i,o=>{const l=o.options,c=l.id,u=cm(c,l),d=Pe(l.type,o.dtype);(l.position===void 0||bb(l.position,u)!==bb(o.dposition))&&(l.position=o.dposition),s[c]=!0;let h=null;if(c in r&&r[c].type===d)h=r[c];else{const f=dr.getScale(d);h=new f({id:c,type:d,ctx:this.ctx,chart:this}),r[h.id]=h}h.init(l,e)}),Le(s,(o,l)=>{o||delete r[l]}),Le(r,o=>{Fn.configure(this,o,o.options),Fn.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((s,i)=>s.index-i.index),r>n){for(let s=n;s<r;++s)this._destroyDatasetMeta(s);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(wb("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,s)=>{n.filter(i=>i===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,s;for(this._removeUnreferencedMetasets(),r=0,s=n.length;r<s;r++){const i=n[r];let o=this.getDatasetMeta(r);const l=i.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=l,o.indexAxis=i.indexAxis||lm(l,this.options),o.order=i.order||0,o.index=r,o.label=""+i.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const c=dr.getController(l),{datasetElementType:u,dataElementType:d}=ct.datasets[l];Object.assign(c,{dataElementType:dr.getElement(d),datasetElementType:u&&dr.getElement(u)}),o.controller=new c(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Le(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let u=0,d=this.data.datasets.length;u<d;u++){const{controller:h}=this.getDatasetMeta(u),f=!s&&i.indexOf(h)===-1;h.buildOrUpdateElements(f),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),s||Le(i,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(wb("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){Le(this.scales,e=>{Fn.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!Mv(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:s,count:i}of n){const o=r==="_removeElements"?-i:i;jR(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=i=>new Set(e.filter(o=>o[0]===i).map((o,l)=>l+","+o.splice(1).join(","))),s=r(0);for(let i=1;i<n;i++)if(!Mv(s,r(i)))return;return Array.from(s).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Fn.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],Le(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,i)=>{s._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,Ms(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),s={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ar.has(this)?this.attached&&!Ar.running(this)&&Ar.start(this):(this.draw(),_b({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let s,i;for(s=0,i=n.length;s<i;++s){const o=n[s];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},s=wS(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&lh(n,s),e.controller.draw(),s&&ch(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return Br(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,s){const i=SO.modes[n];return typeof i=="function"?i(this,e,r,s):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let s=r.filter(i=>i&&i._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=Ws(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const s=r?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,s);gd(n)?(i.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(i,{visible:r}),this.update(l=>l.datasetIndex===e?s:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Ar.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),qv(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Au[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(i,o)=>{n.addEventListener(this,i,o),e[i]=o},s=(i,o,l)=>{i.offsetX=o,i.offsetY=l,this._eventHandler(i)};Le(this.options.events,i=>r(i,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(c,u)=>{n.addEventListener(this,c,u),e[c]=u},s=(c,u)=>{e[c]&&(n.removeEventListener(this,c,u),delete e[c])},i=(c,u)=>{this.canvas&&this.resize(c,u)};let o;const l=()=>{s("attach",l),this.attached=!0,this.resize(),r("resize",i),r("detach",o)};o=()=>{this.attached=!1,s("resize",i),this._stop(),this._resize(0,0),r("attach",l)},n.isAttached(this.canvas)?l():o()}unbindEvents(){Le(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Le(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const s=r?"set":"remove";let i,o,l,c;for(n==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+s+"DatasetHoverStyle"]()),l=0,c=e.length;l<c;++l){o=e[l];const u=o&&this.getDatasetMeta(o.datasetIndex).controller;u&&u[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:i,index:o})=>{const l=this.getDatasetMeta(i);if(!l)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:l.data[o],index:o}});!fd(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const s=this.options.hover,i=(c,u)=>c.filter(d=>!u.some(h=>d.datasetIndex===h.datasetIndex&&d.index===h.index)),o=i(n,e),l=r?e:i(e,n);o.length&&this.updateHoverStyle(o,s.mode,!1),l.length&&s.mode&&this.updateHoverStyle(l,s.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;const i=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(i||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:s=[],options:i}=this,o=n,l=this._getActiveElements(e,s,r,o),c=z8(e),u=ER(e,this._lastEvent,r,c);r&&(this._lastEvent=null,qe(i.onHover,[e,l,this],this),c&&qe(i.onClick,[e,l,this],this));const d=!fd(l,s);return(d||n)&&(this._active=l,this._updateHoverStyles(l,s,n)),this._lastEvent=u,d}_getActiveElements(e,n,r,s){if(e.type==="mouseout")return[];if(!r)return n;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,s)}},ve(rs,"defaults",ct),ve(rs,"instances",Au),ve(rs,"overrides",Ei),ve(rs,"registry",dr),ve(rs,"version",kR),ve(rs,"getChart",kb),rs);function Sb(){return Le(Ri.instances,t=>t._plugins.invalidate())}function OS(t,e,n=e){t.lineCap=Pe(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Pe(n.borderDash,e.borderDash)),t.lineDashOffset=Pe(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Pe(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Pe(n.borderWidth,e.borderWidth),t.strokeStyle=Pe(n.borderColor,e.borderColor)}function NR(t,e,n){t.lineTo(n.x,n.y)}function AR(t){return t.stepped?p6:t.tension||t.cubicInterpolationMode==="monotone"?m6:NR}function RS(t,e,n={}){const r=t.length,{start:s=0,end:i=r-1}=n,{start:o,end:l}=e,c=Math.max(s,o),u=Math.min(i,l),d=s<o&&i<o||s>l&&i>l;return{count:r,start:c,loop:e.loop,ilen:u<c&&!d?r+u-c:u-c}}function PR(t,e,n,r){const{points:s,options:i}=e,{count:o,start:l,loop:c,ilen:u}=RS(s,n,r),d=AR(i);let{move:h=!0,reverse:f}=r||{},p,x,m;for(p=0;p<=u;++p)x=s[(l+(f?u-p:p))%o],!x.skip&&(h?(t.moveTo(x.x,x.y),h=!1):d(t,m,x,f,i.stepped),m=x);return c&&(x=s[(l+(f?u:0))%o],d(t,m,x,f,i.stepped)),!!c}function DR(t,e,n,r){const s=e.points,{count:i,start:o,ilen:l}=RS(s,n,r),{move:c=!0,reverse:u}=r||{};let d=0,h=0,f,p,x,m,v,y;const g=_=>(o+(u?l-_:_))%i,b=()=>{m!==v&&(t.lineTo(d,v),t.lineTo(d,m),t.lineTo(d,y))};for(c&&(p=s[g(0)],t.moveTo(p.x,p.y)),f=0;f<=l;++f){if(p=s[g(f)],p.skip)continue;const _=p.x,C=p.y,N=_|0;N===x?(C<m?m=C:C>v&&(v=C),d=(h*d+_)/++h):(b(),t.lineTo(_,C),x=N,h=0,m=v=C),y=C}b()}function um(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?DR:PR}function TR(t){return t.stepped?G6:t.tension||t.cubicInterpolationMode==="monotone"?Y6:ai}function OR(t,e,n,r){let s=e._path;s||(s=e._path=new Path2D,e.path(s,n,r)&&s.closePath()),OS(t,e.options),t.stroke(s)}function RR(t,e,n,r){const{segments:s,options:i}=e,o=um(e);for(const l of s)OS(t,i,l.style),t.beginPath(),o(t,e,l,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const FR=typeof Path2D=="function";function IR(t,e,n,r){FR&&!e.options.segment?OR(t,e,n,r):RR(t,e,n,r)}class er extends Ti{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const s=r.spanGaps?this._loop:this._fullLoop;$6(this._points,r,e,s,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=tO(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,s=e[n],i=this.points,o=bS(this,{property:n,start:s,end:s});if(!o.length)return;const l=[],c=TR(r);let u,d;for(u=0,d=o.length;u<d;++u){const{start:h,end:f}=o[u],p=i[h],x=i[f];if(p===x){l.push(p);continue}const m=Math.abs((s-p[n])/(x[n]-p[n])),v=c(p,x,m,r.stepped);v[n]=e[n],l.push(v)}return l.length===1?l[0]:l}pathSegment(e,n,r){return um(this)(e,this,n,r)}path(e,n,r){const s=this.segments,i=um(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const l of s)o&=i(e,this,l,{start:n,end:n+r-1});return!!o}draw(e,n,r,s){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),IR(e,this,r,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ve(er,"id","line"),ve(er,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ve(er,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ve(er,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Cb(t,e,n,r){const s=t.options,{[n]:i}=t.getProps([n],r);return Math.abs(e-i)<s.radius+s.hitRadius}class vi extends Ti{constructor(n){super();ve(this,"parsed");ve(this,"skip");ve(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,s){const i=this.options,{x:o,y:l}=this.getProps(["x","y"],s);return Math.pow(n-o,2)+Math.pow(r-l,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(n,r){return Cb(this,n,"x",r)}inYRange(n,r){return Cb(this,n,"y",r)}getCenterPoint(n){const{x:r,y:s}=this.getProps(["x","y"],n);return{x:r,y:s}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const s=r&&n.borderWidth||0;return(r+s)*2}draw(n,r){const s=this.options;this.skip||s.radius<.1||!Br(this,r,this.size(s)/2)||(n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.fillStyle=s.backgroundColor,am(n,s,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}ve(vi,"id","point"),ve(vi,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ve(vi,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function MR(t,e,n){const r=t.segments,s=t.points,i=e.points,o=[];for(const l of r){let{start:c,end:u}=l;u=dh(c,u,s);const d=dm(n,s[c],s[u],l.loop);if(!e.segments){o.push({source:l,target:d,start:s[c],end:s[u]});continue}const h=bS(e,d);for(const f of h){const p=dm(n,i[f.start],i[f.end],f.loop),x=vS(l,s,p);for(const m of x)o.push({source:m,target:f,start:{[n]:jb(d,p,"start",Math.max)},end:{[n]:jb(d,p,"end",Math.min)}})}}return o}function dm(t,e,n,r){if(r)return;let s=e[t],i=n[t];return t==="angle"&&(s=mn(s),i=mn(i)),{property:t,start:s,end:i}}function LR(t,e){const{x:n=null,y:r=null}=t||{},s=e.points,i=[];return e.segments.forEach(({start:o,end:l})=>{l=dh(o,l,s);const c=s[o],u=s[l];r!==null?(i.push({x:c.x,y:r}),i.push({x:u.x,y:r})):n!==null&&(i.push({x:n,y:c.y}),i.push({x:n,y:u.y}))}),i}function dh(t,e,n){for(;e>t;e--){const r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function jb(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function FS(t,e){let n=[],r=!1;return tt(t)?(r=!0,n=t):n=LR(t,e),n.length?new er({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function Eb(t){return t&&t.fill!==!1}function BR(t,e,n){let s=t[e].fill;const i=[e];let o;if(!n)return s;for(;s!==!1&&i.indexOf(s)===-1;){if(!lt(s))return s;if(o=t[s],!o)return!1;if(o.visible)return s;i.push(s),s=o.fill}return!1}function $R(t,e,n){const r=WR(t);if(Oe(r))return isNaN(r.value)?!1:r;let s=parseFloat(r);return lt(s)&&Math.floor(s)===s?zR(r[0],e,s,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function zR(t,e,n,r){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=r?!1:n}function UR(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:Oe(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function VR(t,e,n){let r;return t==="start"?r=n:t==="end"?r=e.options.reverse?e.min:e.max:Oe(t)?r=t.value:r=e.getBaseValue(),r}function WR(t){const e=t.options,n=e.fill;let r=Pe(n&&n.target,n);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function HR(t){const{scale:e,index:n,line:r}=t,s=[],i=r.segments,o=r.points,l=qR(e,n);l.push(FS({x:null,y:e.bottom},r));for(let c=0;c<i.length;c++){const u=i[c];for(let d=u.start;d<=u.end;d++)KR(s,o[d],l)}return new er({points:s,options:{}})}function qR(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let s=0;s<r.length;s++){const i=r[s];if(i.index===e)break;i.hidden||n.unshift(i.dataset)}return n}function KR(t,e,n){const r=[];for(let s=0;s<n.length;s++){const i=n[s],{first:o,last:l,point:c}=GR(i,e,"x");if(!(!c||o&&l)){if(o)r.unshift(c);else if(t.push(c),!l)break}}t.push(...r)}function GR(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const s=r[n],i=t.segments,o=t.points;let l=!1,c=!1;for(let u=0;u<i.length;u++){const d=i[u],h=o[d.start][n],f=o[d.end][n];if(go(s,h,f)){l=s===h,c=s===f;break}}return{first:l,last:c,point:r}}class IS{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,r){const{x:s,y:i,radius:o}=this;return n=n||{start:0,end:kn},e.arc(s,i,o,n.end,n.start,!0),!r.bounds}interpolate(e){const{x:n,y:r,radius:s}=this,i=e.angle;return{x:n+Math.cos(i)*s,y:r+Math.sin(i)*s,angle:i}}}function YR(t){const{chart:e,fill:n,line:r}=t;if(lt(n))return XR(e,n);if(n==="stack")return HR(t);if(n==="shape")return!0;const s=JR(t);return s instanceof IS?s:FS(s,r)}function XR(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function JR(t){return(t.scale||{}).getPointPositionForValue?ZR(t):QR(t)}function QR(t){const{scale:e={},fill:n}=t,r=UR(n,e);if(lt(r)){const s=e.isHorizontal();return{x:s?r:null,y:s?null:r}}return null}function ZR(t){const{scale:e,fill:n}=t,r=e.options,s=e.getLabels().length,i=r.reverse?e.max:e.min,o=VR(n,e,i),l=[];if(r.grid.circular){const c=e.getPointPositionForValue(0,i);return new IS({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(o)})}for(let c=0;c<s;++c)l.push(e.getPointPositionForValue(c,o));return l}function $f(t,e,n){const r=YR(e),{chart:s,index:i,line:o,scale:l,axis:c}=e,u=o.options,d=u.fill,h=u.backgroundColor,{above:f=h,below:p=h}=d||{},x=s.getDatasetMeta(i),m=wS(s,x);r&&o.points.length&&(lh(t,n),e3(t,{line:o,target:r,above:f,below:p,area:n,scale:l,axis:c,clip:m}),ch(t))}function e3(t,e){const{line:n,target:r,above:s,below:i,area:o,scale:l,clip:c}=e,u=n._loop?"angle":e.axis;t.save();let d=i;i!==s&&(u==="x"?(Nb(t,r,o.top),zf(t,{line:n,target:r,color:s,scale:l,property:u,clip:c}),t.restore(),t.save(),Nb(t,r,o.bottom)):u==="y"&&(Ab(t,r,o.left),zf(t,{line:n,target:r,color:i,scale:l,property:u,clip:c}),t.restore(),t.save(),Ab(t,r,o.right),d=s)),zf(t,{line:n,target:r,color:d,scale:l,property:u,clip:c}),t.restore()}function Nb(t,e,n){const{segments:r,points:s}=e;let i=!0,o=!1;t.beginPath();for(const l of r){const{start:c,end:u}=l,d=s[c],h=s[dh(c,u,s)];i?(t.moveTo(d.x,d.y),i=!1):(t.lineTo(d.x,n),t.lineTo(d.x,d.y)),o=!!e.pathSegment(t,l,{move:o}),o?t.closePath():t.lineTo(h.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function Ab(t,e,n){const{segments:r,points:s}=e;let i=!0,o=!1;t.beginPath();for(const l of r){const{start:c,end:u}=l,d=s[c],h=s[dh(c,u,s)];i?(t.moveTo(d.x,d.y),i=!1):(t.lineTo(n,d.y),t.lineTo(d.x,d.y)),o=!!e.pathSegment(t,l,{move:o}),o?t.closePath():t.lineTo(n,h.y)}t.lineTo(n,e.first().y),t.closePath(),t.clip()}function zf(t,e){const{line:n,target:r,property:s,color:i,scale:o,clip:l}=e,c=MR(n,r,s);for(const{source:u,target:d,start:h,end:f}of c){const{style:{backgroundColor:p=i}={}}=u,x=r!==!0;t.save(),t.fillStyle=p,t3(t,o,l,x&&dm(s,h,f)),t.beginPath();const m=!!n.pathSegment(t,u);let v;if(x){m?t.closePath():Pb(t,r,f,s);const y=!!r.pathSegment(t,d,{move:m,reverse:!0});v=m&&y,v||Pb(t,r,h,s)}t.closePath(),t.fill(v?"evenodd":"nonzero"),t.restore()}}function t3(t,e,n,r){const s=e.chart.chartArea,{property:i,start:o,end:l}=r||{};if(i==="x"||i==="y"){let c,u,d,h;i==="x"?(c=o,u=s.top,d=l,h=s.bottom):(c=s.left,u=o,d=s.right,h=l),t.beginPath(),n&&(c=Math.max(c,n.left),d=Math.min(d,n.right),u=Math.max(u,n.top),h=Math.min(h,n.bottom)),t.rect(c,u,d-c,h-u),t.clip()}}function Pb(t,e,n,r){const s=e.interpolate(n,r);s&&t.lineTo(s.x,s.y)}var hh={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,s=[];let i,o,l,c;for(o=0;o<r;++o)i=t.getDatasetMeta(o),l=i.dataset,c=null,l&&l.options&&l instanceof er&&(c={visible:t.isDatasetVisible(o),index:o,fill:$R(l,o,r),chart:t,axis:i.controller.options.indexAxis,scale:i.vScale,line:l}),i.$filler=c,s.push(c);for(o=0;o<r;++o)c=s[o],!(!c||c.fill===!1)&&(c.fill=BR(s,o,n.propagate))},beforeDraw(t,e,n){const r=n.drawTime==="beforeDraw",s=t.getSortedVisibleDatasetMetas(),i=t.chartArea;for(let o=s.length-1;o>=0;--o){const l=s[o].$filler;l&&(l.line.updateControlPoints(i,l.axis),r&&l.fill&&$f(t.ctx,l,i))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let s=r.length-1;s>=0;--s){const i=r[s].$filler;Eb(i)&&$f(t.ctx,i,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;!Eb(r)||n.drawTime!=="beforeDatasetDraw"||$f(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Db=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},n3=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class Tb extends Ti{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=qe(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,s)=>e.sort(r,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,s=_t(r.font),i=s.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=Db(r,i);let u,d;n.font=s.string,this.isHorizontal()?(u=this.maxWidth,d=this._fitRows(o,i,l,c)+10):(d=this.maxHeight,u=this._fitCols(o,s,l,c)+10),this.width=Math.min(u,e.maxWidth||this.maxWidth),this.height=Math.min(d,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,s){const{ctx:i,maxWidth:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],u=this.lineWidths=[0],d=s+l;let h=e;i.textAlign="left",i.textBaseline="middle";let f=-1,p=-d;return this.legendItems.forEach((x,m)=>{const v=r+n/2+i.measureText(x.text).width;(m===0||u[u.length-1]+v+2*l>o)&&(h+=d,u[u.length-(m>0?0:1)]=0,p+=d,f++),c[m]={left:0,top:p,row:f,width:v,height:s},u[u.length-1]+=v+l}),h}_fitCols(e,n,r,s){const{ctx:i,maxHeight:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],u=this.columnSizes=[],d=o-e;let h=l,f=0,p=0,x=0,m=0;return this.legendItems.forEach((v,y)=>{const{itemWidth:g,itemHeight:b}=r3(r,n,i,v,s);y>0&&p+b+2*l>d&&(h+=f+l,u.push({width:f,height:p}),x+=f+l,m++,f=p=0),c[y]={left:x,top:p,col:m,width:g,height:b},f=Math.max(f,g),p+=b+l}),h+=f,u.push({width:f,height:p}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:s},rtl:i}}=this,o=Co(i,this.left,this.width);if(this.isHorizontal()){let l=0,c=Ft(r,this.left+s,this.right-this.lineWidths[l]);for(const u of n)l!==u.row&&(l=u.row,c=Ft(r,this.left+s,this.right-this.lineWidths[l])),u.top+=this.top+e+s,u.left=o.leftForLtr(o.x(c),u.width),c+=u.width+s}else{let l=0,c=Ft(r,this.top+e+s,this.bottom-this.columnSizes[l].height);for(const u of n)u.col!==l&&(l=u.col,c=Ft(r,this.top+e+s,this.bottom-this.columnSizes[l].height)),u.top=c,u.left+=this.left+s,u.left=o.leftForLtr(o.x(u.left),u.width),c+=u.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;lh(e,this),this._draw(),ch(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:s}=this,{align:i,labels:o}=e,l=ct.color,c=Co(e.rtl,this.left,this.width),u=_t(o.font),{padding:d}=o,h=u.size,f=h/2;let p;this.drawTitle(),s.textAlign=c.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=u.string;const{boxWidth:x,boxHeight:m,itemHeight:v}=Db(o,h),y=function(N,j,w){if(isNaN(x)||x<=0||isNaN(m)||m<0)return;s.save();const k=Pe(w.lineWidth,1);if(s.fillStyle=Pe(w.fillStyle,l),s.lineCap=Pe(w.lineCap,"butt"),s.lineDashOffset=Pe(w.lineDashOffset,0),s.lineJoin=Pe(w.lineJoin,"miter"),s.lineWidth=k,s.strokeStyle=Pe(w.strokeStyle,l),s.setLineDash(Pe(w.lineDash,[])),o.usePointStyle){const E={radius:m*Math.SQRT2/2,pointStyle:w.pointStyle,rotation:w.rotation,borderWidth:k},P=c.xPlus(N,x/2),A=j+f;cS(s,E,P,A,o.pointStyleWidth&&x)}else{const E=j+Math.max((h-m)/2,0),P=c.leftForLtr(N,x),A=So(w.borderRadius);s.beginPath(),Object.values(A).some(D=>D!==0)?vd(s,{x:P,y:E,w:x,h:m,radius:A}):s.rect(P,E,x,m),s.fill(),k!==0&&s.stroke()}s.restore()},g=function(N,j,w){Ni(s,w.text,N,j+v/2,u,{strikethrough:w.hidden,textAlign:c.textAlign(w.textAlign)})},b=this.isHorizontal(),_=this._computeTitleHeight();b?p={x:Ft(i,this.left+d,this.right-r[0]),y:this.top+d+_,line:0}:p={x:this.left+d,y:Ft(i,this.top+_+d,this.bottom-n[0].height),line:0},gS(this.ctx,e.textDirection);const C=v+d;this.legendItems.forEach((N,j)=>{s.strokeStyle=N.fontColor,s.fillStyle=N.fontColor;const w=s.measureText(N.text).width,k=c.textAlign(N.textAlign||(N.textAlign=o.textAlign)),E=x+f+w;let P=p.x,A=p.y;c.setWidth(this.width),b?j>0&&P+E+d>this.right&&(A=p.y+=C,p.line++,P=p.x=Ft(i,this.left+d,this.right-r[p.line])):j>0&&A+C>this.bottom&&(P=p.x=P+n[p.line].width+d,p.line++,A=p.y=Ft(i,this.top+_+d,this.bottom-n[p.line].height));const D=c.x(P);if(y(D,A,N),P=t6(k,P+x+f,b?P+E:this.right,e.rtl),g(c.x(P),A,N),b)p.x+=E+d;else if(typeof N.text!="string"){const L=u.lineHeight;p.y+=MS(N,L)+d}else p.y+=C}),xS(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=_t(n.font),s=Bt(n.padding);if(!n.display)return;const i=Co(e.rtl,this.left,this.width),o=this.ctx,l=n.position,c=r.size/2,u=s.top+c;let d,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),d=this.top+u,h=Ft(e.align,h,this.right-f);else{const x=this.columnSizes.reduce((m,v)=>Math.max(m,v.height),0);d=u+Ft(e.align,this.top,this.bottom-x-e.labels.padding-this._computeTitleHeight())}const p=Ft(l,h,h+f);o.textAlign=i.textAlign(Gg(l)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,Ni(o,n.text,p,d,r)}_computeTitleHeight(){const e=this.options.title,n=_t(e.font),r=Bt(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,s,i;if(go(e,this.left,this.right)&&go(n,this.top,this.bottom)){for(i=this.legendHitBoxes,r=0;r<i.length;++r)if(s=i[r],go(e,s.left,s.left+s.width)&&go(n,s.top,s.top+s.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!o3(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,i=n3(s,r);s&&!i&&qe(n.onLeave,[e,s,this],this),this._hoveredItem=r,r&&!i&&qe(n.onHover,[e,r,this],this)}else r&&qe(n.onClick,[e,r,this],this)}}function r3(t,e,n,r,s){const i=s3(r,t,e,n),o=i3(s,r,e.lineHeight);return{itemWidth:i,itemHeight:o}}function s3(t,e,n,r){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((i,o)=>i.length>o.length?i:o)),e+n.size/2+r.measureText(s).width}function i3(t,e,n){let r=t;return typeof e.text!="string"&&(r=MS(e,n)),r}function MS(t,e){const n=t.text?t.text.length:0;return e*n}function o3(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var fh={id:"legend",_element:Tb,start(t,e,n){const r=t.legend=new Tb({ctx:t.ctx,options:n,chart:t});Fn.configure(t,r,n),Fn.addBox(t,r)},stop(t){Fn.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;Fn.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,s=n.chart;s.isDatasetVisible(r)?(s.hide(r),e.hidden=!0):(s.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:s,color:i,useBorderRadius:o,borderRadius:l}}=t.legend.options;return t._getSortedDatasetMetas().map(c=>{const u=c.controller.getStyle(n?0:void 0),d=Bt(u.borderWidth);return{text:e[c.index].label,fillStyle:u.backgroundColor,fontColor:i,hidden:!c.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:u.borderColor,pointStyle:r||u.pointStyle,rotation:u.rotation,textAlign:s||u.textAlign,borderRadius:o&&(l||u.borderRadius),datasetIndex:c.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class LS extends Ti{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const s=tt(r.text)?r.text.length:1;this._padding=Bt(r.padding);const i=s*_t(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:s,right:i,options:o}=this,l=o.align;let c=0,u,d,h;return this.isHorizontal()?(d=Ft(l,r,i),h=n+e,u=i-r):(o.position==="left"?(d=r+e,h=Ft(l,s,n),c=xt*-.5):(d=i-e,h=Ft(l,n,s),c=xt*.5),u=s-n),{titleX:d,titleY:h,maxWidth:u,rotation:c}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=_t(n.font),i=r.lineHeight/2+this._padding.top,{titleX:o,titleY:l,maxWidth:c,rotation:u}=this._drawArgs(i);Ni(e,n.text,0,0,r,{color:n.color,maxWidth:c,rotation:u,textAlign:Gg(n.align),textBaseline:"middle",translation:[o,l]})}}function a3(t,e){const n=new LS({ctx:t.ctx,options:e,chart:t});Fn.configure(t,n,e),Fn.addBox(t,n),t.titleBlock=n}var ph={id:"title",_element:LS,start(t,e,n){a3(t,n)},stop(t){const e=t.titleBlock;Fn.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;Fn.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Aa={average(t){if(!t.length)return!1;let e,n,r=new Set,s=0,i=0;for(e=0,n=t.length;e<n;++e){const l=t[e].element;if(l&&l.hasValue()){const c=l.tooltipPosition();r.add(c.x),s+=c.y,++i}}return i===0||r.size===0?!1:{x:[...r].reduce((l,c)=>l+c)/r.size,y:s/i}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,s=Number.POSITIVE_INFINITY,i,o,l;for(i=0,o=t.length;i<o;++i){const c=t[i].element;if(c&&c.hasValue()){const u=c.getCenterPoint(),d=im(e,u);d<s&&(s=d,l=c)}}if(l){const c=l.tooltipPosition();n=c.x,r=c.y}return{x:n,y:r}}};function lr(t,e){return e&&(tt(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Pr(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function l3(t,e){const{element:n,datasetIndex:r,index:s}=e,i=t.getDatasetMeta(r).controller,{label:o,value:l}=i.getLabelAndValue(s);return{chart:t,label:o,parsed:i.getParsed(s),raw:t.data.datasets[r].data[s],formattedValue:l,dataset:i.getDataset(),dataIndex:s,datasetIndex:r,element:n}}function Ob(t,e){const n=t.chart.ctx,{body:r,footer:s,title:i}=t,{boxWidth:o,boxHeight:l}=e,c=_t(e.bodyFont),u=_t(e.titleFont),d=_t(e.footerFont),h=i.length,f=s.length,p=r.length,x=Bt(e.padding);let m=x.height,v=0,y=r.reduce((_,C)=>_+C.before.length+C.lines.length+C.after.length,0);if(y+=t.beforeBody.length+t.afterBody.length,h&&(m+=h*u.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),y){const _=e.displayColors?Math.max(l,c.lineHeight):c.lineHeight;m+=p*_+(y-p)*c.lineHeight+(y-1)*e.bodySpacing}f&&(m+=e.footerMarginTop+f*d.lineHeight+(f-1)*e.footerSpacing);let g=0;const b=function(_){v=Math.max(v,n.measureText(_).width+g)};return n.save(),n.font=u.string,Le(t.title,b),n.font=c.string,Le(t.beforeBody.concat(t.afterBody),b),g=e.displayColors?o+2+e.boxPadding:0,Le(r,_=>{Le(_.before,b),Le(_.lines,b),Le(_.after,b)}),g=0,n.font=d.string,Le(t.footer,b),n.restore(),v+=x.width,{width:v,height:m}}function c3(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function u3(t,e,n,r){const{x:s,width:i}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&s+i+o>e.width||t==="right"&&s-i-o<0)return!0}function d3(t,e,n,r){const{x:s,width:i}=n,{width:o,chartArea:{left:l,right:c}}=t;let u="center";return r==="center"?u=s<=(l+c)/2?"left":"right":s<=i/2?u="left":s>=o-i/2&&(u="right"),u3(u,t,e,n)&&(u="center"),u}function Rb(t,e,n){const r=n.yAlign||e.yAlign||c3(t,n);return{xAlign:n.xAlign||e.xAlign||d3(t,e,n,r),yAlign:r}}function h3(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function f3(t,e,n){let{y:r,height:s}=t;return e==="top"?r+=n:e==="bottom"?r-=s+n:r-=s/2,r}function Fb(t,e,n,r){const{caretSize:s,caretPadding:i,cornerRadius:o}=t,{xAlign:l,yAlign:c}=n,u=s+i,{topLeft:d,topRight:h,bottomLeft:f,bottomRight:p}=So(o);let x=h3(e,l);const m=f3(e,c,u);return c==="center"?l==="left"?x+=u:l==="right"&&(x-=u):l==="left"?x-=Math.max(d,f)+s:l==="right"&&(x+=Math.max(h,p)+s),{x:Rn(x,0,r.width-e.width),y:Rn(m,0,r.height-e.height)}}function Xc(t,e,n){const r=Bt(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function Ib(t){return lr([],Pr(t))}function p3(t,e,n){return Ws(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function Mb(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const BS={beforeTitle:Er,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:Er,beforeBody:Er,beforeLabel:Er,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Be(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Er,afterBody:Er,beforeFooter:Er,footer:Er,afterFooter:Er};function Jt(t,e,n,r){const s=t[e].call(n,r);return typeof s>"u"?BS[e].call(n,r):s}class hm extends Ti{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,i=new _S(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=p3(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,s=Jt(r,"beforeTitle",this,e),i=Jt(r,"title",this,e),o=Jt(r,"afterTitle",this,e);let l=[];return l=lr(l,Pr(s)),l=lr(l,Pr(i)),l=lr(l,Pr(o)),l}getBeforeBody(e,n){return Ib(Jt(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,s=[];return Le(e,i=>{const o={before:[],lines:[],after:[]},l=Mb(r,i);lr(o.before,Pr(Jt(l,"beforeLabel",this,i))),lr(o.lines,Jt(l,"label",this,i)),lr(o.after,Pr(Jt(l,"afterLabel",this,i))),s.push(o)}),s}getAfterBody(e,n){return Ib(Jt(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,s=Jt(r,"beforeFooter",this,e),i=Jt(r,"footer",this,e),o=Jt(r,"afterFooter",this,e);let l=[];return l=lr(l,Pr(s)),l=lr(l,Pr(i)),l=lr(l,Pr(o)),l}_createItems(e){const n=this._active,r=this.chart.data,s=[],i=[],o=[];let l=[],c,u;for(c=0,u=n.length;c<u;++c)l.push(l3(this.chart,n[c]));return e.filter&&(l=l.filter((d,h,f)=>e.filter(d,h,f,r))),e.itemSort&&(l=l.sort((d,h)=>e.itemSort(d,h,r))),Le(l,d=>{const h=Mb(e.callbacks,d);s.push(Jt(h,"labelColor",this,d)),i.push(Jt(h,"labelPointStyle",this,d)),o.push(Jt(h,"labelTextColor",this,d))}),this.labelColors=s,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=l,l}update(e,n){const r=this.options.setContext(this.getContext()),s=this._active;let i,o=[];if(!s.length)this.opacity!==0&&(i={opacity:0});else{const l=Aa[r.position].call(this,s,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const c=this._size=Ob(this,r),u=Object.assign({},l,c),d=Rb(this.chart,r,u),h=Fb(r,u,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,i={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,s){const i=this.getCaretPosition(e,r,s);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(e,n,r){const{xAlign:s,yAlign:i}=this,{caretSize:o,cornerRadius:l}=r,{topLeft:c,topRight:u,bottomLeft:d,bottomRight:h}=So(l),{x:f,y:p}=e,{width:x,height:m}=n;let v,y,g,b,_,C;return i==="center"?(_=p+m/2,s==="left"?(v=f,y=v-o,b=_+o,C=_-o):(v=f+x,y=v+o,b=_-o,C=_+o),g=v):(s==="left"?y=f+Math.max(c,d)+o:s==="right"?y=f+x-Math.max(u,h)-o:y=this.caretX,i==="top"?(b=p,_=b-o,v=y-o,g=y+o):(b=p+m,_=b+o,v=y+o,g=y-o),C=b),{x1:v,x2:y,x3:g,y1:b,y2:_,y3:C}}drawTitle(e,n,r){const s=this.title,i=s.length;let o,l,c;if(i){const u=Co(r.rtl,this.x,this.width);for(e.x=Xc(this,r.titleAlign,r),n.textAlign=u.textAlign(r.titleAlign),n.textBaseline="middle",o=_t(r.titleFont),l=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,c=0;c<i;++c)n.fillText(s[c],u.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+l,c+1===i&&(e.y+=r.titleMarginBottom-l)}}_drawColorBox(e,n,r,s,i){const o=this.labelColors[r],l=this.labelPointStyles[r],{boxHeight:c,boxWidth:u}=i,d=_t(i.bodyFont),h=Xc(this,"left",i),f=s.x(h),p=c<d.lineHeight?(d.lineHeight-c)/2:0,x=n.y+p;if(i.usePointStyle){const m={radius:Math.min(u,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},v=s.leftForLtr(f,u)+u/2,y=x+c/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,am(e,m,v,y),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,am(e,m,v,y)}else{e.lineWidth=Oe(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const m=s.leftForLtr(f,u),v=s.leftForLtr(s.xPlus(f,1),u-2),y=So(o.borderRadius);Object.values(y).some(g=>g!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,vd(e,{x:m,y:x,w:u,h:c,radius:y}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),vd(e,{x:v,y:x+1,w:u-2,h:c-2,radius:y}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(m,x,u,c),e.strokeRect(m,x,u,c),e.fillStyle=o.backgroundColor,e.fillRect(v,x+1,u-2,c-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:s}=this,{bodySpacing:i,bodyAlign:o,displayColors:l,boxHeight:c,boxWidth:u,boxPadding:d}=r,h=_t(r.bodyFont);let f=h.lineHeight,p=0;const x=Co(r.rtl,this.x,this.width),m=function(w){n.fillText(w,x.x(e.x+p),e.y+f/2),e.y+=f+i},v=x.textAlign(o);let y,g,b,_,C,N,j;for(n.textAlign=o,n.textBaseline="middle",n.font=h.string,e.x=Xc(this,v,r),n.fillStyle=r.bodyColor,Le(this.beforeBody,m),p=l&&v!=="right"?o==="center"?u/2+d:u+2+d:0,_=0,N=s.length;_<N;++_){for(y=s[_],g=this.labelTextColors[_],n.fillStyle=g,Le(y.before,m),b=y.lines,l&&b.length&&(this._drawColorBox(n,e,_,x,r),f=Math.max(h.lineHeight,c)),C=0,j=b.length;C<j;++C)m(b[C]),f=h.lineHeight;Le(y.after,m)}p=0,f=h.lineHeight,Le(this.afterBody,m),e.y-=i}drawFooter(e,n,r){const s=this.footer,i=s.length;let o,l;if(i){const c=Co(r.rtl,this.x,this.width);for(e.x=Xc(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=c.textAlign(r.footerAlign),n.textBaseline="middle",o=_t(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,l=0;l<i;++l)n.fillText(s[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,s){const{xAlign:i,yAlign:o}=this,{x:l,y:c}=e,{width:u,height:d}=r,{topLeft:h,topRight:f,bottomLeft:p,bottomRight:x}=So(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(l+h,c),o==="top"&&this.drawCaret(e,n,r,s),n.lineTo(l+u-f,c),n.quadraticCurveTo(l+u,c,l+u,c+f),o==="center"&&i==="right"&&this.drawCaret(e,n,r,s),n.lineTo(l+u,c+d-x),n.quadraticCurveTo(l+u,c+d,l+u-x,c+d),o==="bottom"&&this.drawCaret(e,n,r,s),n.lineTo(l+p,c+d),n.quadraticCurveTo(l,c+d,l,c+d-p),o==="center"&&i==="left"&&this.drawCaret(e,n,r,s),n.lineTo(l,c+h),n.quadraticCurveTo(l,c,l+h,c),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,s=r&&r.x,i=r&&r.y;if(s||i){const o=Aa[e.position].call(this,this._active,this._eventPosition);if(!o)return;const l=this._size=Ob(this,e),c=Object.assign({},o,this._size),u=Rb(n,e,c),d=Fb(e,c,u,n);(s._to!==d.x||i._to!==d.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},i={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=Bt(n.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&l&&(e.save(),e.globalAlpha=r,this.drawBackground(i,e,s,n),gS(e,n.textDirection),i.y+=o.top,this.drawTitle(i,e,n),this.drawBody(i,e,n),this.drawFooter(i,e,n),xS(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,s=e.map(({datasetIndex:l,index:c})=>{const u=this.chart.getDatasetMeta(l);if(!u)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:u.data[c],index:c}}),i=!fd(r,s),o=this._positionChanged(s,n);(i||o)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,i=this._active||[],o=this._getActiveElements(e,i,n,r),l=this._positionChanged(o,e),c=n||!fd(o,i)||l;return c&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),c}_getActiveElements(e,n,r,s){const i=this.options;if(e.type==="mouseout")return[];if(!s)return n.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,r);return i.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:s,options:i}=this,o=Aa[i.position].call(this,e,n);return o!==!1&&(r!==o.x||s!==o.y)}}ve(hm,"positioners",Aa);var mh={id:"tooltip",_element:hm,positioners:Aa,afterInit(t,e,n){n&&(t.tooltip=new hm({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:BS},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const m3=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function g3(t,e,n,r){const s=t.indexOf(e);if(s===-1)return m3(t,e,n,r);const i=t.lastIndexOf(e);return s!==i?n:s}const x3=(t,e)=>t===null?null:Rn(Math.round(t),0,e);function Lb(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class $o extends Oi{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:s,label:i}of n)r[s]===i&&r.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(Be(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:g3(r,e,Pe(n,e),this._addedLabels),x3(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,s=[];let i=this.getLabels();i=e===0&&n===i.length-1?i:i.slice(e,n+1),this._valueRange=Math.max(i.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)s.push({value:o});return s}getLabelForValue(e){return Lb.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}ve($o,"id","category"),ve($o,"defaults",{ticks:{callback:Lb}});function y3(t,e){const n=[],{bounds:s,step:i,min:o,max:l,precision:c,count:u,maxTicks:d,maxDigits:h,includeBounds:f}=t,p=i||1,x=d-1,{min:m,max:v}=e,y=!Be(o),g=!Be(l),b=!Be(u),_=(v-m)/(h+1);let C=Bv((v-m)/x/p)*p,N,j,w,k;if(C<1e-14&&!y&&!g)return[{value:m},{value:v}];k=Math.ceil(v/C)-Math.floor(m/C),k>x&&(C=Bv(k*C/x/p)*p),Be(c)||(N=Math.pow(10,c),C=Math.ceil(C*N)/N),s==="ticks"?(j=Math.floor(m/C)*C,w=Math.ceil(v/C)*C):(j=m,w=v),y&&g&&i&&q8((l-o)/i,C/1e3)?(k=Math.round(Math.min((l-o)/C,d)),C=(l-o)/k,j=o,w=l):b?(j=y?o:j,w=g?l:w,k=u-1,C=(w-j)/k):(k=(w-j)/C,Ha(k,Math.round(k),C/1e3)?k=Math.round(k):k=Math.ceil(k));const E=Math.max($v(C),$v(j));N=Math.pow(10,Be(c)?E:c),j=Math.round(j*N)/N,w=Math.round(w*N)/N;let P=0;for(y&&(f&&j!==o?(n.push({value:o}),j<o&&P++,Ha(Math.round((j+P*C)*N)/N,o,Bb(o,_,t))&&P++):j<o&&P++);P<k;++P){const A=Math.round((j+P*C)*N)/N;if(g&&A>l)break;n.push({value:A})}return g&&f&&w!==l?n.length&&Ha(n[n.length-1].value,l,Bb(l,_,t))?n[n.length-1].value=l:n.push({value:l}):(!g||w===l)&&n.push({value:w}),n}function Bb(t,e,{horizontal:n,minRotation:r}){const s=ws(r),i=(n?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class _d extends Oi{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return Be(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:s,max:i}=this;const o=c=>s=n?s:c,l=c=>i=r?i:c;if(e){const c=Mo(s),u=Mo(i);c<0&&u<0?l(0):c>0&&u>0&&o(0)}if(s===i){let c=i===0?1:Math.abs(i*.05);l(i+c),e||o(s-c)}this.min=s,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,s;return r?(s=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const s={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,o=y3(s,i);return e.bounds==="ticks"&&rS(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const s=(r-n)/Math.max(e.length-1,1)/2;n-=s,r+=s}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return Xg(e,this.chart.options.locale,this.options.ticks.format)}}class zo extends _d{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=lt(e)?e:0,this.max=lt(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=ws(this.options.ticks.minRotation),s=(e?Math.sin(r):Math.cos(r))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}ve(zo,"id","linear"),ve(zo,"defaults",{ticks:{callback:ah.formatters.numeric}});const Sl=t=>Math.floor(bs(t)),Zs=(t,e)=>Math.pow(10,Sl(t)+e);function $b(t){return t/Math.pow(10,Sl(t))===1}function zb(t,e,n){const r=Math.pow(10,n),s=Math.floor(t/r);return Math.ceil(e/r)-s}function v3(t,e){const n=e-t;let r=Sl(n);for(;zb(t,e,r)>10;)r++;for(;zb(t,e,r)<10;)r--;return Math.min(r,Sl(t))}function b3(t,{min:e,max:n}){e=hn(t.min,e);const r=[],s=Sl(e);let i=v3(e,n),o=i<0?Math.pow(10,Math.abs(i)):1;const l=Math.pow(10,i),c=s>i?Math.pow(10,s):0,u=Math.round((e-c)*o)/o,d=Math.floor((e-c)/l/10)*l*10;let h=Math.floor((u-d)/Math.pow(10,i)),f=hn(t.min,Math.round((c+d+h*Math.pow(10,i))*o)/o);for(;f<n;)r.push({value:f,major:$b(f),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(i++,h=2,o=i>=0?1:o),f=Math.round((c+d+h*Math.pow(10,i))*o)/o;const p=hn(t.max,f);return r.push({value:p,major:$b(p),significand:h}),r}class Ub extends Oi{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const r=_d.prototype.parse.apply(this,[e,n]);if(r===0){this._zero=!0;return}return lt(r)&&r>0?r:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=lt(e)?Math.max(0,e):null,this.max=lt(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!lt(this._userMin)&&(this.min=e===Zs(this.min,0)?Zs(this.min,-1):Zs(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let r=this.min,s=this.max;const i=l=>r=e?r:l,o=l=>s=n?s:l;r===s&&(r<=0?(i(1),o(10)):(i(Zs(r,-1)),o(Zs(s,1)))),r<=0&&i(Zs(s,-1)),s<=0&&o(Zs(r,1)),this.min=r,this.max=s}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},r=b3(n,this);return e.bounds==="ticks"&&rS(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return e===void 0?"0":Xg(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=bs(e),this._valueRange=bs(this.max)-bs(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(bs(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}ve(Ub,"id","logarithmic"),ve(Ub,"defaults",{ticks:{callback:ah.formatters.logarithmic,major:{enabled:!0}}});function fm(t){const e=t.ticks;if(e.display&&t.display){const n=Bt(e.backdropPadding);return Pe(e.font&&e.font.size,ct.font.size)+n.height}return 0}function w3(t,e,n){return n=tt(n)?n:[n],{w:f6(t,e.string,n),h:n.length*e.lineHeight}}function Vb(t,e,n,r,s){return t===r||t===s?{start:e-n/2,end:e+n/2}:t<r||t>s?{start:e-n,end:e}:{start:e,end:e+n}}function _3(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),r=[],s=[],i=t._pointLabels.length,o=t.options.pointLabels,l=o.centerPointLabels?xt/i:0;for(let c=0;c<i;c++){const u=o.setContext(t.getPointLabelContext(c));s[c]=u.padding;const d=t.getPointPosition(c,t.drawingArea+s[c],l),h=_t(u.font),f=w3(t.ctx,h,t._pointLabels[c]);r[c]=f;const p=mn(t.getIndexAngle(c)+l),x=Math.round(qg(p)),m=Vb(x,d.x,f.w,0,180),v=Vb(x,d.y,f.h,90,270);k3(n,e,p,m,v)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=j3(t,r,s)}function k3(t,e,n,r,s){const i=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let l=0,c=0;r.start<e.l?(l=(e.l-r.start)/i,t.l=Math.min(t.l,e.l-l)):r.end>e.r&&(l=(r.end-e.r)/i,t.r=Math.max(t.r,e.r+l)),s.start<e.t?(c=(e.t-s.start)/o,t.t=Math.min(t.t,e.t-c)):s.end>e.b&&(c=(s.end-e.b)/o,t.b=Math.max(t.b,e.b+c))}function S3(t,e,n){const r=t.drawingArea,{extra:s,additionalAngle:i,padding:o,size:l}=n,c=t.getPointPosition(e,r+s+o,i),u=Math.round(qg(mn(c.angle+wn))),d=A3(c.y,l.h,u),h=E3(u),f=N3(c.x,l.w,h);return{visible:!0,x:c.x,y:d,textAlign:h,left:f,top:d,right:f+l.w,bottom:d+l.h}}function C3(t,e){if(!e)return!0;const{left:n,top:r,right:s,bottom:i}=t;return!(Br({x:n,y:r},e)||Br({x:n,y:i},e)||Br({x:s,y:r},e)||Br({x:s,y:i},e))}function j3(t,e,n){const r=[],s=t._pointLabels.length,i=t.options,{centerPointLabels:o,display:l}=i.pointLabels,c={extra:fm(i)/2,additionalAngle:o?xt/s:0};let u;for(let d=0;d<s;d++){c.padding=n[d],c.size=e[d];const h=S3(t,d,c);r.push(h),l==="auto"&&(h.visible=C3(h,u),h.visible&&(u=h))}return r}function E3(t){return t===0||t===180?"center":t<180?"left":"right"}function N3(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function A3(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function P3(t,e,n){const{left:r,top:s,right:i,bottom:o}=n,{backdropColor:l}=e;if(!Be(l)){const c=So(e.borderRadius),u=Bt(e.backdropPadding);t.fillStyle=l;const d=r-u.left,h=s-u.top,f=i-r+u.width,p=o-s+u.height;Object.values(c).some(x=>x!==0)?(t.beginPath(),vd(t,{x:d,y:h,w:f,h:p,radius:c}),t.fill()):t.fillRect(d,h,f,p)}}function D3(t,e){const{ctx:n,options:{pointLabels:r}}=t;for(let s=e-1;s>=0;s--){const i=t._pointLabelItems[s];if(!i.visible)continue;const o=r.setContext(t.getPointLabelContext(s));P3(n,o,i);const l=_t(o.font),{x:c,y:u,textAlign:d}=i;Ni(n,t._pointLabels[s],c,u+l.lineHeight/2,l,{color:o.color,textAlign:d,textBaseline:"middle"})}}function $S(t,e,n,r){const{ctx:s}=t;if(n)s.arc(t.xCenter,t.yCenter,e,0,kn);else{let i=t.getPointPosition(0,e);s.moveTo(i.x,i.y);for(let o=1;o<r;o++)i=t.getPointPosition(o,e),s.lineTo(i.x,i.y)}}function T3(t,e,n,r,s){const i=t.ctx,o=e.circular,{color:l,lineWidth:c}=e;!o&&!r||!l||!c||n<0||(i.save(),i.strokeStyle=l,i.lineWidth=c,i.setLineDash(s.dash||[]),i.lineDashOffset=s.dashOffset,i.beginPath(),$S(t,n,o,r),i.closePath(),i.stroke(),i.restore())}function O3(t,e,n){return Ws(t,{label:n,index:e,type:"pointLabel"})}class Jc extends _d{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Bt(fm(this.options)/2),n=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(n,r)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=lt(e)&&!isNaN(e)?e:0,this.max=lt(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/fm(this.options))}generateTickLabels(e){_d.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,r)=>{const s=qe(this.options.pointLabels.callback,[n,r],this);return s||s===0?s:""}).filter((n,r)=>this.chart.getDataVisibility(r))}fit(){const e=this.options;e.display&&e.pointLabels.display?_3(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,r,s){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((r-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,r,s))}getIndexAngle(e){const n=kn/(this._pointLabels.length||1),r=this.options.startAngle||0;return mn(e*n+ws(r))}getDistanceFromCenterForValue(e){if(Be(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(Be(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const r=n[e];return O3(this.getContext(),e,r)}}getPointPosition(e,n,r=0){const s=this.getIndexAngle(e)-wn+r;return{x:Math.cos(s)*n+this.xCenter,y:Math.sin(s)*n+this.yCenter,angle:s}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:r,right:s,bottom:i}=this._pointLabelItems[e];return{left:n,top:r,right:s,bottom:i}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const r=this.ctx;r.save(),r.beginPath(),$S(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:r,grid:s,border:i}=n,o=this._pointLabels.length;let l,c,u;if(n.pointLabels.display&&D3(this,o),s.display&&this.ticks.forEach((d,h)=>{if(h!==0||h===0&&this.min<0){c=this.getDistanceFromCenterForValue(d.value);const f=this.getContext(h),p=s.setContext(f),x=i.setContext(f);T3(this,p,c,o,x)}}),r.display){for(e.save(),l=o-1;l>=0;l--){const d=r.setContext(this.getPointLabelContext(l)),{color:h,lineWidth:f}=d;!f||!h||(e.lineWidth=f,e.strokeStyle=h,e.setLineDash(d.borderDash),e.lineDashOffset=d.borderDashOffset,c=this.getDistanceFromCenterForValue(n.reverse?this.min:this.max),u=this.getPointPosition(l,c),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(u.x,u.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,r=n.ticks;if(!r.display)return;const s=this.getIndexAngle(0);let i,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(s),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((l,c)=>{if(c===0&&this.min>=0&&!n.reverse)return;const u=r.setContext(this.getContext(c)),d=_t(u.font);if(i=this.getDistanceFromCenterForValue(this.ticks[c].value),u.showLabelBackdrop){e.font=d.string,o=e.measureText(l.label).width,e.fillStyle=u.backdropColor;const h=Bt(u.backdropPadding);e.fillRect(-o/2-h.left,-i-d.size/2-h.top,o+h.width,d.size+h.height)}Ni(e,l.label,0,-i,d,{color:u.color,strokeColor:u.textStrokeColor,strokeWidth:u.textStrokeWidth})}),e.restore()}drawTitle(){}}ve(Jc,"id","radialLinear"),ve(Jc,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:ah.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),ve(Jc,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),ve(Jc,"descriptors",{angleLines:{_fallback:"grid"}});const gh={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},tn=Object.keys(gh);function Wb(t,e){return t-e}function Hb(t,e){if(Be(e))return null;const n=t._adapter,{parser:r,round:s,isoWeekday:i}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),lt(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(s&&(o=s==="week"&&(_l(i)||i===!0)?n.startOf(o,"isoWeek",i):n.startOf(o,s)),+o)}function qb(t,e,n,r){const s=tn.length;for(let i=tn.indexOf(t);i<s-1;++i){const o=gh[tn[i]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(l*o.size))<=r)return tn[i]}return tn[s-1]}function R3(t,e,n,r,s){for(let i=tn.length-1;i>=tn.indexOf(n);i--){const o=tn[i];if(gh[o].common&&t._adapter.diff(s,r,o)>=e-1)return o}return tn[n?tn.indexOf(n):0]}function F3(t){for(let e=tn.indexOf(t)+1,n=tn.length;e<n;++e)if(gh[tn[e]].common)return tn[e]}function Kb(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:s}=Kg(n,e),i=n[r]>=e?n[r]:n[s];t[i]=!0}}function I3(t,e,n,r){const s=t._adapter,i=+s.startOf(e[0].value,r),o=e[e.length-1].value;let l,c;for(l=i;l<=o;l=+s.add(l,1,r))c=n[l],c>=0&&(e[c].major=!0);return e}function Gb(t,e,n){const r=[],s={},i=e.length;let o,l;for(o=0;o<i;++o)l=e[o],s[l]=o,r.push({value:l,major:!1});return i===0||!n?r:I3(t,r,s,n)}class kd extends Oi{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),s=this._adapter=new vO._date(e.adapters.date);s.init(n),Wa(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:Hb(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:s,max:i,minDefined:o,maxDefined:l}=this.getUserBounds();function c(u){!o&&!isNaN(u.min)&&(s=Math.min(s,u.min)),!l&&!isNaN(u.max)&&(i=Math.max(i,u.max))}(!o||!l)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),s=lt(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),i=lt(i)&&!isNaN(i)?i:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,i-1),this.max=Math.max(s+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const i=this.min,o=this.max,l=J8(s,i,o);return this._unit=n.unit||(r.autoSkip?qb(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):R3(this,l.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:F3(this._unit),this.initOffsets(s),e.reverse&&l.reverse(),Gb(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,s,i;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?n=1-s:n=(this.getDecimalForValue(e[1])-s)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?r=i:r=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Rn(n,0,o),r=Rn(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,s=this.options,i=s.time,o=i.unit||qb(i.minUnit,n,r,this._getLabelCapacity(n)),l=Pe(s.ticks.stepSize,1),c=o==="week"?i.isoWeekday:!1,u=_l(c)||c===!0,d={};let h=n,f,p;if(u&&(h=+e.startOf(h,"isoWeek",c)),h=+e.startOf(h,u?"day":o),e.diff(r,n,o)>1e5*l)throw new Error(n+" and "+r+" are too far apart with stepSize of "+l+" "+o);const x=s.ticks.source==="data"&&this.getDataTimestamps();for(f=h,p=0;f<r;f=+e.add(f,l,o),p++)Kb(d,f,x);return(f===r||s.bounds==="ticks"||p===1)&&Kb(d,f,x),Object.keys(d).sort(Wb).map(m=>+m)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const s=this.options.time.displayFormats,i=this._unit,o=n||s[i];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,s){const i=this.options,o=i.ticks.callback;if(o)return qe(o,[e,n,r],this);const l=i.time.displayFormats,c=this._unit,u=this._majorUnit,d=c&&l[c],h=u&&l[u],f=r[n],p=u&&h&&f&&f.major;return this._adapter.format(e,s||(p?h:d))}generateTickLabels(e){let n,r,s;for(n=0,r=e.length;n<r;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,s=ws(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(s),o=Math.sin(s),l=this._resolveTickFontOptions(0).size;return{w:r*i+l*o,h:r*o+l*i}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,i=this._tickFormatFunction(e,0,Gb(this,[e],this._majorUnit),s),o=this._getLabelSize(i),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const s=this.getLabels();for(n=0,r=s.length;n<r;++n)e.push(Hb(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Z8(e.sort(Wb))}}ve(kd,"id","time"),ve(kd,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Qc(t,e,n){let r=0,s=t.length-1,i,o,l,c;n?(e>=t[r].pos&&e<=t[s].pos&&({lo:r,hi:s}=mi(t,"pos",e)),{pos:i,time:l}=t[r],{pos:o,time:c}=t[s]):(e>=t[r].time&&e<=t[s].time&&({lo:r,hi:s}=mi(t,"time",e)),{time:i,pos:l}=t[r],{time:o,pos:c}=t[s]);const u=o-i;return u?l+(c-l)*(e-i)/u:l}class Yb extends kd{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Qc(n,this.min),this._tableRange=Qc(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,s=[],i=[];let o,l,c,u,d;for(o=0,l=e.length;o<l;++o)u=e[o],u>=n&&u<=r&&s.push(u);if(s.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,l=s.length;o<l;++o)d=s[o+1],c=s[o-1],u=s[o],Math.round((d+c)/2)!==u&&i.push({time:u,pos:o/(l-1)});return i}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((s,i)=>s-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(Qc(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return Qc(this._table,r*this._tableRange+this._minPos,!0)}}ve(Yb,"id","timeseries"),ve(Yb,"defaults",kd.defaults);const zS="label";function Xb(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function M3(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function US(t,e){t.labels=e}function VS(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:zS;const r=[];t.datasets=e.map(s=>{const i=t.datasets.find(o=>o[n]===s[n]);return!i||!s.data||r.includes(i)?{...s}:(r.push(i),Object.assign(i,s),i)})}function L3(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zS;const n={labels:[],datasets:[]};return US(n,t.labels),VS(n,t.datasets,e),n}function B3(t,e){const{height:n=150,width:r=300,redraw:s=!1,datasetIdKey:i,type:o,data:l,options:c,plugins:u=[],fallbackContent:d,updateMode:h,...f}=t,p=S.useRef(null),x=S.useRef(null),m=()=>{p.current&&(x.current=new Ri(p.current,{type:o,data:L3(l,i),options:c&&{...c},plugins:u}),Xb(e,x.current))},v=()=>{Xb(e,null),x.current&&(x.current.destroy(),x.current=null)};return S.useEffect(()=>{!s&&x.current&&c&&M3(x.current,c)},[s,c]),S.useEffect(()=>{!s&&x.current&&US(x.current.config.data,l.labels)},[s,l.labels]),S.useEffect(()=>{!s&&x.current&&l.datasets&&VS(x.current.config.data,l.datasets,i)},[s,l.datasets]),S.useEffect(()=>{x.current&&(s?(v(),setTimeout(m)):x.current.update(h))},[s,c,l.labels,l.datasets,h]),S.useEffect(()=>{x.current&&(v(),setTimeout(m))},[o]),S.useEffect(()=>(m(),()=>v()),[]),X.createElement("canvas",{ref:p,role:"img",height:n,width:r,...f},d)}const $3=S.forwardRef(B3);function z3(t,e){return Ri.register(e),S.forwardRef((n,r)=>X.createElement($3,{...n,ref:r,type:t}))}const xh=z3("line",Eu),U3=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Mn(()=>Promise.resolve().then(()=>Jo),void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class rx extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class Jb extends rx{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Qb extends rx{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Zb extends rx{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var pm;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(pm||(pm={}));var V3=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};class W3{constructor(e,{headers:n={},customFetch:r,region:s=pm.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=U3(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return V3(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o,signal:l}=n;let c={},{region:u}=n;u||(u=this.region);const d=new URL(`${this.url}/${e}`);u&&u!=="any"&&(c["x-region"]=u,d.searchParams.set("forceFunctionRegion",u));let h;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",h=o):typeof o=="string"?(c["Content-Type"]="text/plain",h=o):typeof FormData<"u"&&o instanceof FormData?h=o:(c["Content-Type"]="application/json",h=JSON.stringify(o)));const f=yield this.fetch(d.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),s),body:h,signal:l}).catch(v=>{throw v.name==="AbortError"?v:new Jb(v)}),p=f.headers.get("x-relay-error");if(p&&p==="true")throw new Qb(f);if(!f.ok)throw new Zb(f);let x=((r=f.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),m;return x==="application/json"?m=yield f.json():x==="application/octet-stream"?m=yield f.blob():x==="text/event-stream"?m=f:x==="multipart/form-data"?m=yield f.formData():m=yield f.text(),{data:m,error:null,response:f}}catch(s){return s instanceof Error&&s.name==="AbortError"?{data:null,error:new Jb(s)}:{data:null,error:s,response:s instanceof Zb||s instanceof Qb?s.context:void 0}}})}}var en={},sx={},yh={},Wl={},vh={},bh={},H3=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Uo=H3();const q3=Uo.fetch,WS=Uo.fetch.bind(Uo),HS=Uo.Headers,K3=Uo.Request,G3=Uo.Response,Jo=Object.freeze(Object.defineProperty({__proto__:null,Headers:HS,Request:K3,Response:G3,default:WS,fetch:q3},Symbol.toStringTag,{value:"Module"})),Y3=A1(Jo);var wh={};Object.defineProperty(wh,"__esModule",{value:!0});let X3=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};wh.default=X3;var qS=xe&&xe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(bh,"__esModule",{value:!0});const J3=qS(Y3),Q3=qS(wh);let Z3=class{constructor(e){var n,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(n=e.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=J3.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=new Headers(this.headers),this.headers.set(e,n),this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c,u;let d=null,h=null,f=null,p=i.status,x=i.statusText;if(i.ok){if(this.method!=="HEAD"){const g=await i.text();g===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?h=g:h=JSON.parse(g))}const v=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),y=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");v&&y&&y.length>1&&(f=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,f=null,p=406,x="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const v=await i.text();try{d=JSON.parse(v),Array.isArray(d)&&i.status===404&&(h=[],d=null,p=200,x="OK")}catch{i.status===404&&v===""?(p=204,x="No Content"):d={message:v}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,p=200,x="OK"),d&&this.shouldThrowOnError)throw new Q3.default(d)}return{error:d,data:h,count:f,status:p,statusText:x}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}returns(){return this}overrideTypes(){return this}};bh.default=Z3;var e5=xe&&xe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(vh,"__esModule",{value:!0});const t5=e5(bh);let n5=class extends t5.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var l;const c=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};vh.default=n5;var r5=xe&&xe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Wl,"__esModule",{value:!0});const s5=r5(vh);let i5=class extends s5.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};Wl.default=i5;var o5=xe&&xe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(yh,"__esModule",{value:!0});const ba=o5(Wl);let a5=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=new Headers(n),this.schema=r,this.fetch=s}select(e,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),r&&this.headers.append("Prefer",`count=${r}`),new ba.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:n,defaultToNull:r=!0}={}){var s;const i="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const o=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new ba.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){var o;const l="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),s&&this.headers.append("Prefer",`count=${s}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new ba.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(e,{count:n}={}){var r;const s="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new ba.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var n;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new ba.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};yh.default=a5;var KS=xe&&xe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(sx,"__esModule",{value:!0});const l5=KS(yh),c5=KS(Wl);let u5=class GS{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new l5.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new GS(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){var o;let l;const c=new URL(`${this.url}/rpc/${e}`);let u;r||s?(l=r?"HEAD":"GET",Object.entries(n).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{c.searchParams.append(h,f)})):(l="POST",u=n);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new c5.default({method:l,url:c,headers:d,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};sx.default=u5;var Qo=xe&&xe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(en,"__esModule",{value:!0});en.PostgrestError=en.PostgrestBuilder=en.PostgrestTransformBuilder=en.PostgrestFilterBuilder=en.PostgrestQueryBuilder=en.PostgrestClient=void 0;const YS=Qo(sx);en.PostgrestClient=YS.default;const XS=Qo(yh);en.PostgrestQueryBuilder=XS.default;const JS=Qo(Wl);en.PostgrestFilterBuilder=JS.default;const QS=Qo(vh);en.PostgrestTransformBuilder=QS.default;const ZS=Qo(bh);en.PostgrestBuilder=ZS.default;const eC=Qo(wh);en.PostgrestError=eC.default;var d5=en.default={PostgrestClient:YS.default,PostgrestQueryBuilder:XS.default,PostgrestFilterBuilder:JS.default,PostgrestTransformBuilder:QS.default,PostgrestBuilder:ZS.default,PostgrestError:eC.default};const{PostgrestClient:h5,PostgrestQueryBuilder:L7,PostgrestFilterBuilder:B7,PostgrestTransformBuilder:$7,PostgrestBuilder:z7,PostgrestError:U7}=d5;class f5{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const p5="2.15.5",m5=`realtime-js/${p5}`,g5="1.0.0",mm=1e4,x5=1e3,y5=100;var Ya;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ya||(Ya={}));var yt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(yt||(yt={}));var Kn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Kn||(Kn={}));var gm;(function(t){t.websocket="websocket"})(gm||(gm={}));var ci;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ci||(ci={}));class v5{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(e.slice(o,o+s));o=o+s;const c=r.decode(e.slice(o,o+i));o=o+i;const u=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class tC{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var He;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(He||(He={}));const ew=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=b5(o,t,e,s),i),{})},b5=(t,e,n,r)=>{const s=e.find(l=>l.name===t),i=s==null?void 0:s.type,o=n[t];return i&&!r.includes(i)?nC(i,o):xm(o)},nC=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return S5(e,n)}switch(t){case He.bool:return w5(e);case He.float4:case He.float8:case He.int2:case He.int4:case He.int8:case He.numeric:case He.oid:return _5(e);case He.json:case He.jsonb:return k5(e);case He.timestamp:return C5(e);case He.abstime:case He.date:case He.daterange:case He.int4range:case He.int8range:case He.money:case He.reltime:case He.text:case He.time:case He.timestamptz:case He.timetz:case He.tsrange:case He.tstzrange:return xm(e);default:return xm(e)}},xm=t=>t,w5=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},_5=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},k5=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},S5=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>nC(e,l))}return t},C5=t=>typeof t=="string"?t.replace(" ","T"):t,rC=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Uf{constructor(e,n,r={},s=mm){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var tw;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(tw||(tw={}));class Xa{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Xa.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=Xa.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Xa.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),o=this.transformState(n),l={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const h=i[u];if(h){const f=d.map(v=>v.presence_ref),p=h.map(v=>v.presence_ref),x=d.filter(v=>p.indexOf(v.presence_ref)<0),m=h.filter(v=>f.indexOf(v.presence_ref)<0);x.length>0&&(l[u]=x),m.length>0&&(c[u]=m)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(c),d.length>0){const h=e[l].map(p=>p.presence_ref),f=d.filter(p=>h.indexOf(p.presence_ref)<0);e[l].unshift(...f)}r(l,d,c)}),this.map(o,(l,c)=>{let u=e[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[l]=u,s(l,u,c),u.length===0&&delete e[l]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var nw;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(nw||(nw={}));var Ja;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Ja||(Ja={}));var Tr;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Tr||(Tr={}));class ix{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=yt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Uf(this,Kn.join,this.params,this.timeout),this.rejoinTimer=new tC(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=yt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=yt.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=yt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=yt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=yt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Kn.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Xa(this),this.broadcastEndpointURL=rC(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==yt.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,u=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[Ja.PRESENCE]&&this.bindings[Ja.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},f={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(p=>e==null?void 0:e(Tr.CHANNEL_ERROR,p)),this._onClose(()=>e==null?void 0:e(Tr.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:p})=>{var x;if(this.socket.setAuth(),p===void 0){e==null||e(Tr.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,v=(x=m==null?void 0:m.length)!==null&&x!==void 0?x:0,y=[];for(let g=0;g<v;g++){const b=m[g],{filter:{event:_,schema:C,table:N,filter:j}}=b,w=p&&p[g];if(w&&w.event===_&&w.schema===C&&w.table===N&&w.filter===j)y.push(Object.assign(Object.assign({},b),{id:w.id}));else{this.unsubscribe(),this.state=yt.errored,e==null||e(Tr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e(Tr.SUBSCRIBED);return}}).receive("error",p=>{this.state=yt.errored,e==null||e(Tr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Tr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===yt.joined&&e===Ja.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=yt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Kn.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Uf(this,Kn.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=yt.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Uf(this,e,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>y5){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Kn;if(r&&[l,c,u,d].indexOf(o)>=0&&r!==this._joinRef())return;let f=this._onMessage(o,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var x,m,v;return((x=p.filter)===null||x===void 0?void 0:x.event)==="*"||((v=(m=p.filter)===null||m===void 0?void 0:m.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===o}).map(p=>p.callback(f,r)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var x,m,v,y,g,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const _=p.id,C=(x=p.filter)===null||x===void 0?void 0:x.event;return _&&((m=n.ids)===null||m===void 0?void 0:m.includes(_))&&(C==="*"||(C==null?void 0:C.toLocaleLowerCase())===((v=n.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const _=(g=(y=p==null?void 0:p.filter)===null||y===void 0?void 0:y.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return _==="*"||_===((b=n==null?void 0:n.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof f=="object"&&"ids"in f){const x=f.data,{schema:m,table:v,commit_timestamp:y,type:g,errors:b}=x;f=Object.assign(Object.assign({},{schema:m,table:v,commit_timestamp:y,eventType:g,new:{},old:{},errors:b}),this._getPayloadRecords(x))}p.callback(f,r)})}_isClosed(){return this.state===yt.closed}_isJoined(){return this.state===yt.joined}_isJoining(){return this.state===yt.joining}_isLeaving(){return this.state===yt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&ix.isEqual(s.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Kn.close,{},e)}_onError(e){this._on(Kn.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=yt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=ew(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=ew(e.columns,e.old_record)),n}}const Vf=()=>{},Zc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},j5=[1e3,2e3,5e3,1e4],E5=1e4,N5=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class A5{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=mm,this.transport=null,this.heartbeatIntervalMs=Zc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Vf,this.ref=0,this.reconnectTimer=null,this.logger=Vf,this.conn=null,this.sendBuffer=[],this.serializer=new v5,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...o)=>Mn(()=>Promise.resolve().then(()=>Jo),void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${gm.websocket}`,this.httpEndpoint=rC(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=f5.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:g5}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ya.connecting:return ci.Connecting;case Ya.open:return ci.Open;case Ya.closing:return ci.Closing;default:return ci.Closed}}isConnected(){return this.connectionState()===ci.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new ix(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(x5,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Zc.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:o}=n,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${r} ${s} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Kn.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([N5],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:m5};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(Kn.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new tC(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Zc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,s,i,o,l,c,u,d;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:mm,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:Zc.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=e==null?void 0:e.heartbeatCallback)!==null&&l!==void 0?l:Vf,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:h=>j5[h-1]||E5,this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:(h,f)=>f(JSON.stringify(h)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class ox extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function mt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class P5 extends ox{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ym extends ox{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var D5=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const sC=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Mn(()=>Promise.resolve().then(()=>Jo),void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},T5=()=>D5(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Mn(()=>Promise.resolve().then(()=>Jo),void 0)).Response:Response}),vm=t=>{if(Array.isArray(t))return t.map(n=>vm(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=vm(r)}),e},O5=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var Fi=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const Wf=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),R5=(t,e,n)=>Fi(void 0,void 0,void 0,function*(){const r=yield T5();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{const i=t.status||500,o=(s==null?void 0:s.statusCode)||i+"";e(new P5(Wf(s),i,o))}).catch(s=>{e(new ym(Wf(s),s))}):e(new ym(Wf(t),t))}),F5=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?s:(O5(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),n))};function Hl(t,e,n,r,s,i){return Fi(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(n,F5(e,r,s,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>R5(c,l,r))})})}function Sd(t,e,n,r){return Fi(this,void 0,void 0,function*(){return Hl(t,"GET",e,n,r)})}function hr(t,e,n,r,s){return Fi(this,void 0,void 0,function*(){return Hl(t,"POST",e,r,s,n)})}function bm(t,e,n,r,s){return Fi(this,void 0,void 0,function*(){return Hl(t,"PUT",e,r,s,n)})}function I5(t,e,n,r){return Fi(this,void 0,void 0,function*(){return Hl(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function iC(t,e,n,r,s){return Fi(this,void 0,void 0,function*(){return Hl(t,"DELETE",e,r,s,n)})}var M5=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};class L5{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return M5(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(mt(e))return{data:null,error:e};throw e}})}}var B5=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};class $5{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}asStream(){return new L5(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.execute().then(e,n)}execute(){return B5(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(mt(e))return{data:null,error:e};throw e}})}}var Qt=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const z5={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},rw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class U5{constructor(e,n={},r,s){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=sC(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,s){return Qt(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},rw),s);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),h=yield(e=="PUT"?bm:hr)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(mt(i))return{data:null,error:i};throw i}})}upload(e,n,r){return Qt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return Qt(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",n);try{let c;const u=Object.assign({upsert:rw.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield bm(this.fetch,l.toString(),c,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(mt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,n){return Qt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield hr(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new ox("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(mt(r))return{data:null,error:r};throw r}})}update(e,n,r){return Qt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Qt(this,void 0,void 0,function*(){try{return{data:yield hr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(mt(s))return{data:null,error:s};throw s}})}copy(e,n,r){return Qt(this,void 0,void 0,function*(){try{return{data:{path:(yield hr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(mt(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return Qt(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield hr(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(mt(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return Qt(this,void 0,void 0,function*(){try{const s=yield hr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(mt(s))return{data:null,error:s};throw s}})}download(e,n){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"",l=this._getFinalPath(e),c=()=>Sd(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0});return new $5(c,this.shouldThrowOnError)}info(e){return Qt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Sd(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:vm(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(mt(r))return{data:null,error:r};throw r}})}exists(e){return Qt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield I5(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(mt(r)&&r instanceof ym){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${u}`)}}}remove(e){return Qt(this,void 0,void 0,function*(){try{return{data:yield iC(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(mt(n))return{data:null,error:n};throw n}})}list(e,n,r){return Qt(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},z5),n),{prefix:e||""});return{data:yield hr(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(mt(s))return{data:null,error:s};throw s}})}listV2(e,n){return Qt(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield hr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(mt(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const V5="2.12.2",W5={"X-Client-Info":`storage-js/${V5}`};var Vi=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};class H5{constructor(e,n={},r,s){this.shouldThrowOnError=!1;const i=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},W5),n),this.fetch=sC(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Vi(this,void 0,void 0,function*(){try{return{data:yield Sd(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(mt(e))return{data:null,error:e};throw e}})}getBucket(e){return Vi(this,void 0,void 0,function*(){try{return{data:yield Sd(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(mt(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Vi(this,void 0,void 0,function*(){try{return{data:yield hr(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(mt(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return Vi(this,void 0,void 0,function*(){try{return{data:yield bm(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(mt(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Vi(this,void 0,void 0,function*(){try{return{data:yield hr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(mt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Vi(this,void 0,void 0,function*(){try{return{data:yield iC(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(mt(n))return{data:null,error:n};throw n}})}}class q5 extends H5{constructor(e,n={},r,s){super(e,n,r,s)}from(e){return new U5(this.url,this.headers,e,this.fetch)}}const K5="2.58.0";let Pa="";typeof Deno<"u"?Pa="deno":typeof document<"u"?Pa="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Pa="react-native":Pa="node";const G5={"X-Client-Info":`supabase-js-${Pa}/${K5}`},Y5={headers:G5},X5={schema:"public"},J5={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Q5={};var Z5=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};const eF=t=>{let e;return t?e=t:typeof fetch>"u"?e=WS:e=fetch,(...n)=>e(...n)},tF=()=>typeof Headers>"u"?HS:Headers,nF=(t,e,n)=>{const r=eF(n),s=tF();return(i,o)=>Z5(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},o),{headers:u}))})};var rF=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};function sF(t){return t.endsWith("/")?t:t+"/"}function iF(t,e){var n,r;const{db:s,auth:i,realtime:o,global:l}=t,{db:c,auth:u,realtime:d,global:h}=e,f={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>rF(this,void 0,void 0,function*(){return""})};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}function oF(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(sF(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const oC="2.72.0",to=30*1e3,wm=3,Hf=wm*to,aF="http://localhost:9999",lF="supabase.auth.token",cF={"X-Client-Info":`gotrue-js/${oC}`},_m="X-Supabase-Api-Version",aC={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},uF=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,dF=10*60*1e3;class ax extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function _e(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class hF extends ax{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function fF(t){return _e(t)&&t.name==="AuthApiError"}class lC extends ax{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Hs extends ax{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class os extends Hs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function pF(t){return _e(t)&&t.name==="AuthSessionMissingError"}class wa extends Hs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class eu extends Hs{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class tu extends Hs{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function mF(t){return _e(t)&&t.name==="AuthImplicitGrantRedirectError"}class sw extends Hs{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class km extends Hs{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function qf(t){return _e(t)&&t.name==="AuthRetryableFetchError"}class iw extends Hs{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Sm extends Hs{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Cd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ow=` 	
\r=`.split(""),gF=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<ow.length;e+=1)t[ow[e].charCodeAt(0)]=-2;for(let e=0;e<Cd.length;e+=1)t[Cd[e].charCodeAt(0)]=e;return t})();function aw(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Cd[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Cd[r]),e.queuedBits-=6}}function cC(t,e,n){const r=gF[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function lw(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{vF(o,r,n)};for(let o=0;o<t.length;o+=1)cC(t.charCodeAt(o),s,i);return e.join("")}function xF(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function yF(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}xF(r,e)}}function vF(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function bF(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)cC(t.charCodeAt(s),n,r);return new Uint8Array(e)}function wF(t){const e=[];return yF(t,n=>e.push(n)),new Uint8Array(e)}function _F(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>aw(s,n,r)),aw(null,n,r),e.join("")}function kF(t){return Math.round(Date.now()/1e3)+t}function SF(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const An=()=>typeof window<"u"&&typeof document<"u",ei={tested:!1,writable:!1},uC=()=>{if(!An())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ei.tested)return ei.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ei.tested=!0,ei.writable=!0}catch{ei.tested=!0,ei.writable=!1}return ei.writable};function CF(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const dC=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Mn(()=>Promise.resolve().then(()=>Jo),void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},jF=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",no=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},ti=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},ns=async(t,e)=>{await t.removeItem(e)};class _h{constructor(){this.promise=new _h.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}_h.promiseConstructor=Promise;function Kf(t){const e=t.split(".");if(e.length!==3)throw new Sm("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!uF.test(e[r]))throw new Sm("JWT not in base64url format");return{header:JSON.parse(lw(e[0])),payload:JSON.parse(lw(e[1])),signature:bF(e[2]),raw:{header:e[0],payload:e[1]}}}async function EF(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function NF(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function AF(t){return("0"+t.toString(16)).substr(-2)}function PF(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,AF).join("")}async function DF(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function TF(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await DF(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Wi(t,e,n=!1){const r=PF();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await no(t,`${e}-code-verifier`,s);const i=await TF(r);return[i,r===i?"plain":"s256"]}const OF=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function RF(t){const e=t.headers.get(_m);if(!e||!e.match(OF))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function FF(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function IF(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const MF=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Hi(t){if(!MF.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Gf(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function cw(t){return JSON.parse(JSON.stringify(t))}var LF=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const li=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),BF=[502,503,504];async function uw(t){var e;if(!jF(t))throw new km(li(t),0);if(BF.includes(t.status))throw new km(li(t),t.status);let n;try{n=await t.json()}catch(i){throw new lC(li(i),i)}let r;const s=RF(t);if(s&&s.getTime()>=aC["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new iw(li(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new os}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new iw(li(n),t.status,n.weak_password.reasons);throw new hF(li(n),t.status||500,r)}const $F=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Ce(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[_m]||(i[_m]=aC["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await zF(t,e,n+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function zF(t,e,n,r,s,i){const o=$F(e,r,s,i);let l;try{l=await t(n,Object.assign({},o))}catch(c){throw console.error(c),new km(li(c),0)}if(l.ok||await uw(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await uw(c)}}function cr(t){var e;let n=null;HF(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=kF(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function dw(t){const e=cr(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function ps(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function UF(t){return{data:t,error:null}}function VF(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,o=LF(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function WF(t){return t}function HF(t){return t.access_token&&t.refresh_token&&t.expires_in}const Yf=["global","local","others"];var qF=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class KF{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=dC(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=Yf[0]){if(Yf.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Yf.join(", ")}`);try{return await Ce(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(_e(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Ce(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:ps})}catch(r){if(_e(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=qF(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Ce(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:VF,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(_e(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Ce(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ps})}catch(n){if(_e(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Ce(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:WF});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(x=>{const m=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(x.split(";")[1].split("=")[1]);u[`${v}Page`]=m}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(_e(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Hi(e);try{return await Ce(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ps})}catch(n){if(_e(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Hi(e);try{return await Ce(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:ps})}catch(r){if(_e(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Hi(e);try{return await Ce(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:ps})}catch(r){if(_e(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Hi(e.userId);try{const{data:n,error:r}=await Ce(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(_e(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Hi(e.userId),Hi(e.id);try{return{data:await Ce(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(_e(n))return{data:null,error:n};throw n}}}function hw(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function GF(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const qi={debug:!!(globalThis&&uC()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class hC extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class YF extends hC{}async function XF(t,e,n){qi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),qi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){qi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{qi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw qi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new YF(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(qi.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function fC(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function JF(t){return parseInt(t,16)}function QF(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function ZF(t){var e;const{chainId:n,domain:r,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:c,resources:u,scheme:d,uri:h,version:f}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const p=fC(t.address),x=d?`${d}://${r}`:r,m=t.statement?`${t.statement}
`:"",v=`${x} wants you to sign in with your Ethereum account:
${p}

${m}`;let y=`URI: ${h}
Version: ${f}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(y+=`
Expiration Time: ${s.toISOString()}`),l&&(y+=`
Not Before: ${l.toISOString()}`),c&&(y+=`
Request ID: ${c}`),u){let g=`
Resources:`;for(const b of u){if(!b||typeof b!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);g+=`
- ${b}`}y+=g}return`${v}
${y}`}GF();const eI={url:aF,storageKey:lF,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:cF,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function fw(t,e,n){return await n()}const Ki={};class Cl{constructor(e){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Cl.nextInstanceID,Cl.nextInstanceID+=1,this.instanceID>0&&An()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},eI),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new KF({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=dC(s.fetch),this.lock=s.lock||fw,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:An()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=XF:this.lock=fw,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:uC()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=hw(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=hw(this.memoryStorage)),An()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,n;return(n=(e=Ki[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Ki[this.storageKey]=Object.assign(Object.assign({},Ki[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Ki[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ki[this.storageKey]=Object.assign(Object.assign({},Ki[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${oC}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=CF(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),An()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),mF(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return _e(n)?{error:n}:{error:new lC("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:cr}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(_e(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:d,password:h,options:f}=e;let p=null,x=null;this.flowType==="pkce"&&([p,x]=await Wi(this.storage,this.storageKey)),i=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:x},xform:cr})}else if("phone"in e){const{phone:d,password:h,options:f}=e;i=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:cr})}else throw new eu("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(_e(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:o,options:l}=e;n=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:dw})}else if("phone"in e){const{phone:i,password:o,options:l}=e;n=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:dw})}else throw new eu("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new wa}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(_e(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,s,i,o,l,c,u,d,h,f;let p,x;if("message"in e)p=e.message,x=e.signature;else{const{chain:m,wallet:v,statement:y,options:g}=e;let b;if(An())if(typeof v=="object")b=v;else{const k=window;if("ethereum"in k&&typeof k.ethereum=="object"&&"request"in k.ethereum&&typeof k.ethereum.request=="function")b=k.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=v}const _=new URL((n=g==null?void 0:g.url)!==null&&n!==void 0?n:window.location.href),C=await b.request({method:"eth_requestAccounts"}).then(k=>k).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!C||C.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const N=fC(C[0]);let j=(r=g==null?void 0:g.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!j){const k=await b.request({method:"eth_chainId"});j=JF(k)}const w={domain:_.host,address:N,statement:y,uri:_.href,version:"1",chainId:j,nonce:(s=g==null?void 0:g.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=g==null?void 0:g.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=g==null?void 0:g.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=g==null?void 0:g.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=g==null?void 0:g.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=g==null?void 0:g.signInWithEthereum)===null||d===void 0?void 0:d.resources};p=ZF(w),x=await b.request({method:"personal_sign",params:[QF(p),N]})}try{const{data:m,error:v}=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:x},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:cr});if(v)throw v;return!m||!m.session||!m.user?{data:{user:null,session:null},error:new wa}:(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),{data:Object.assign({},m),error:v})}catch(m){if(_e(m))return{data:{user:null,session:null},error:m};throw m}}async signInWithSolana(e){var n,r,s,i,o,l,c,u,d,h,f,p;let x,m;if("message"in e)x=e.message,m=e.signature;else{const{chain:v,wallet:y,statement:g,options:b}=e;let _;if(An())if(typeof y=="object")_=y;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))_=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=y}const C=new URL((n=b==null?void 0:b.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in _&&_.signIn){const N=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:C.host,uri:C.href}),g?{statement:g}:null));let j;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")j=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)j=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in j&&"signature"in j&&(typeof j.signedMessage=="string"||j.signedMessage instanceof Uint8Array)&&j.signature instanceof Uint8Array)x=typeof j.signedMessage=="string"?j.signedMessage:new TextDecoder().decode(j.signedMessage),m=j.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${C.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${C.href}`,`Issued At: ${(s=(r=b==null?void 0:b.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((u=b==null?void 0:b.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((h=(d=b==null?void 0:b.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...b.signInWithSolana.resources.map(j=>`- ${j}`)]:[]].join(`
`);const N=await _.signMessage(new TextEncoder().encode(x),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=N}}try{const{data:v,error:y}=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:_F(m)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:cr});if(y)throw y;return!v||!v.session||!v.user?{data:{user:null,session:null},error:new wa}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),{data:Object.assign({},v),error:y})}catch(v){if(_e(v))return{data:{user:null,session:null},error:v};throw v}}async _exchangeCodeForSession(e){const n=await ti(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:cr});if(await ns(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new wa}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(_e(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=e,l=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:cr}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new wa}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(n){if(_e(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,i,o;try{if("email"in e){const{email:l,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Wi(this.storage,this.storageKey));const{error:h}=await Ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:u,error:d}=await Ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new eu("You must provide either an email or phone number.")}catch(l){if(_e(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await Ce(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:cr});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(_e(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Wi(this.storage,this.storageKey)),await Ce(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:UF})}catch(i){if(_e(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new os;const{error:s}=await Ce(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(_e(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await Ce(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:l}=await Ce(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new eu("You must provide either an email or phone number and a type")}catch(n){if(_e(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await ti(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Hf:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await ti(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Gf()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ps}):await this._useSession(async n=>{var r,s,i;const{data:o,error:l}=n;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new os}:await Ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:ps})})}catch(n){if(_e(n))return pF(n)&&(await this._removeSession(),await ns(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new os;const o=s.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await Wi(this.storage,this.storageKey));const{data:u,error:d}=await Ce(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:ps});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(_e(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new os;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=Kf(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(_e(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:l}=n;if(l)throw l;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new os;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(_e(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!An())throw new tu("No browser detected.");if(e.error||e.error_description||e.error_code)throw new tu(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new sw("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new tu("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new sw("No code detected.");const{data:g,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=e;if(!i||!l||!o||!u)throw new tu("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let f=d+h;c&&(f=parseInt(c));const p=f-d;p*1e3<=to&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const x=f-h;d-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,f,d):d-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,f,d);const{data:m,error:v}=await this._getUser(i);if(v)throw v;const y={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:u,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:e.type},error:null}}catch(r){if(_e(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await ti(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(fF(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await ns(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=SF(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Wi(this.storage,this.storageKey,!0));try{return await Ce(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(_e(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(_e(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,l,c,u,d;const{data:h,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Ce(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return An()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(_e(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await Ce(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(_e(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await NF(async s=>(s>0&&await EF(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Ce(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:cr})),(s,i)=>{const o=200*Math.pow(2,s);return i&&qf(i)&&Date.now()+o-r<to})}catch(r){if(this._debug(n,"error",r),_e(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),An()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await ti(this.storage,this.storageKey);if(s&&this.userStorage){let o=await ti(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await no(this.userStorage,this.storageKey+"-user",o)),s.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Gf()}else if(s&&!s.user&&!s.user){const o=await ti(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await ns(this.storage,this.storageKey+"-user"),await no(this.storage,this.storageKey,s)):s.user=Gf()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Hf;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${Hf}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),qf(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(s.access_token);!l&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new os;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new _h;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new os;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),_e(i)){const o={session:null,error:i};return qf(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,n)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await no(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=cw(s);await no(this.storage,this.storageKey,i)}else{const s=cw(n);await no(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await ns(this.storage,this.storageKey),await ns(this.storage,this.storageKey+"-code-verifier"),await ns(this.storage,this.storageKey+"-user"),this.userStorage&&await ns(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&An()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),to);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/to);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${to}ms, refresh threshold is ${wm} ticks`),s<=wm&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof hC)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!An()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Wi(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await Ce(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(_e(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=await Ce(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(_e(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:l}=await Ce(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(n){if(_e(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await Ce(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(_e(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Kf(s.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(l=>l.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(l=>l.kid===e),r&&this.jwks_cached_at+dF>s)return r;const{data:i,error:o}=await Ce(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(l=>l.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:p,error:x}=await this.getSession();if(x||!p.session)return{data:null,error:x};r=p.session.access_token}const{header:s,payload:i,signature:o,raw:{header:l,payload:c}}=Kf(r);n!=null&&n.allowExpired||FF(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:i,header:s,signature:o},error:null}}const d=IF(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,wF(`${l}.${c}`)))throw new Sm("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(_e(r))return{data:null,error:r};throw r}}}Cl.nextInstanceID=0;const tI=Cl;class nI extends tI{constructor(e){super(e)}}var rI=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((r=r.apply(t,e||[])).next())})};class sI{constructor(e,n,r){var s,i,o;this.supabaseUrl=e,this.supabaseKey=n;const l=oF(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:X5,realtime:Q5,auth:Object.assign(Object.assign({},J5),{storageKey:c}),global:Y5},d=iF(r??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=nF(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new h5(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new q5(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new W3(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return rI(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:i,storageKey:o,flowType:l,lock:c,debug:u},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new nI({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),d),storageKey:o,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:i,flowType:l,lock:c,debug:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new A5(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const ql=(t,e,n)=>new sI(t,e,n);function iI(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}iI()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var pC={exports:{}};function oI(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Xf={exports:{}};const aI={},lI=Object.freeze(Object.defineProperty({__proto__:null,default:aI},Symbol.toStringTag,{value:"Module"})),cI=A1(lI);var pw;function De(){return pw||(pw=1,function(t,e){(function(n,r){t.exports=r()})(xe,function(){var n=n||function(r,s){var i;if(typeof window<"u"&&window.crypto&&(i=window.crypto),typeof self<"u"&&self.crypto&&(i=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(i=globalThis.crypto),!i&&typeof window<"u"&&window.msCrypto&&(i=window.msCrypto),!i&&typeof xe<"u"&&xe.crypto&&(i=xe.crypto),!i&&typeof oI=="function")try{i=cI}catch{}var o=function(){if(i){if(typeof i.getRandomValues=="function")try{return i.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof i.randomBytes=="function")try{return i.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},l=Object.create||function(){function g(){}return function(b){var _;return g.prototype=b,_=new g,g.prototype=null,_}}(),c={},u=c.lib={},d=u.Base=function(){return{extend:function(g){var b=l(this);return g&&b.mixIn(g),(!b.hasOwnProperty("init")||this.init===b.init)&&(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},create:function(){var g=this.extend();return g.init.apply(g,arguments),g},init:function(){},mixIn:function(g){for(var b in g)g.hasOwnProperty(b)&&(this[b]=g[b]);g.hasOwnProperty("toString")&&(this.toString=g.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),h=u.WordArray=d.extend({init:function(g,b){g=this.words=g||[],b!=s?this.sigBytes=b:this.sigBytes=g.length*4},toString:function(g){return(g||p).stringify(this)},concat:function(g){var b=this.words,_=g.words,C=this.sigBytes,N=g.sigBytes;if(this.clamp(),C%4)for(var j=0;j<N;j++){var w=_[j>>>2]>>>24-j%4*8&255;b[C+j>>>2]|=w<<24-(C+j)%4*8}else for(var k=0;k<N;k+=4)b[C+k>>>2]=_[k>>>2];return this.sigBytes+=N,this},clamp:function(){var g=this.words,b=this.sigBytes;g[b>>>2]&=4294967295<<32-b%4*8,g.length=r.ceil(b/4)},clone:function(){var g=d.clone.call(this);return g.words=this.words.slice(0),g},random:function(g){for(var b=[],_=0;_<g;_+=4)b.push(o());return new h.init(b,g)}}),f=c.enc={},p=f.Hex={stringify:function(g){for(var b=g.words,_=g.sigBytes,C=[],N=0;N<_;N++){var j=b[N>>>2]>>>24-N%4*8&255;C.push((j>>>4).toString(16)),C.push((j&15).toString(16))}return C.join("")},parse:function(g){for(var b=g.length,_=[],C=0;C<b;C+=2)_[C>>>3]|=parseInt(g.substr(C,2),16)<<24-C%8*4;return new h.init(_,b/2)}},x=f.Latin1={stringify:function(g){for(var b=g.words,_=g.sigBytes,C=[],N=0;N<_;N++){var j=b[N>>>2]>>>24-N%4*8&255;C.push(String.fromCharCode(j))}return C.join("")},parse:function(g){for(var b=g.length,_=[],C=0;C<b;C++)_[C>>>2]|=(g.charCodeAt(C)&255)<<24-C%4*8;return new h.init(_,b)}},m=f.Utf8={stringify:function(g){try{return decodeURIComponent(escape(x.stringify(g)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(g){return x.parse(unescape(encodeURIComponent(g)))}},v=u.BufferedBlockAlgorithm=d.extend({reset:function(){this._data=new h.init,this._nDataBytes=0},_append:function(g){typeof g=="string"&&(g=m.parse(g)),this._data.concat(g),this._nDataBytes+=g.sigBytes},_process:function(g){var b,_=this._data,C=_.words,N=_.sigBytes,j=this.blockSize,w=j*4,k=N/w;g?k=r.ceil(k):k=r.max((k|0)-this._minBufferSize,0);var E=k*j,P=r.min(E*4,N);if(E){for(var A=0;A<E;A+=j)this._doProcessBlock(C,A);b=C.splice(0,E),_.sigBytes-=P}return new h.init(b,P)},clone:function(){var g=d.clone.call(this);return g._data=this._data.clone(),g},_minBufferSize:0});u.Hasher=v.extend({cfg:d.extend(),init:function(g){this.cfg=this.cfg.extend(g),this.reset()},reset:function(){v.reset.call(this),this._doReset()},update:function(g){return this._append(g),this._process(),this},finalize:function(g){g&&this._append(g);var b=this._doFinalize();return b},blockSize:16,_createHelper:function(g){return function(b,_){return new g.init(_).finalize(b)}},_createHmacHelper:function(g){return function(b,_){return new y.HMAC.init(g,_).finalize(b)}}});var y=c.algo={};return c}(Math);return n})}(Xf)),Xf.exports}var Jf={exports:{}},mw;function kh(){return mw||(mw=1,function(t,e){(function(n,r){t.exports=r(De())})(xe,function(n){return function(r){var s=n,i=s.lib,o=i.Base,l=i.WordArray,c=s.x64={};c.Word=o.extend({init:function(u,d){this.high=u,this.low=d}}),c.WordArray=o.extend({init:function(u,d){u=this.words=u||[],d!=r?this.sigBytes=d:this.sigBytes=u.length*8},toX32:function(){for(var u=this.words,d=u.length,h=[],f=0;f<d;f++){var p=u[f];h.push(p.high),h.push(p.low)}return l.create(h,this.sigBytes)},clone:function(){for(var u=o.clone.call(this),d=u.words=this.words.slice(0),h=d.length,f=0;f<h;f++)d[f]=d[f].clone();return u}})}(),n})}(Jf)),Jf.exports}var Qf={exports:{}},gw;function uI(){return gw||(gw=1,function(t,e){(function(n,r){t.exports=r(De())})(xe,function(n){return function(){if(typeof ArrayBuffer=="function"){var r=n,s=r.lib,i=s.WordArray,o=i.init,l=i.init=function(c){if(c instanceof ArrayBuffer&&(c=new Uint8Array(c)),(c instanceof Int8Array||typeof Uint8ClampedArray<"u"&&c instanceof Uint8ClampedArray||c instanceof Int16Array||c instanceof Uint16Array||c instanceof Int32Array||c instanceof Uint32Array||c instanceof Float32Array||c instanceof Float64Array)&&(c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength)),c instanceof Uint8Array){for(var u=c.byteLength,d=[],h=0;h<u;h++)d[h>>>2]|=c[h]<<24-h%4*8;o.call(this,d,u)}else o.apply(this,arguments)};l.prototype=i}}(),n.lib.WordArray})}(Qf)),Qf.exports}var Zf={exports:{}},xw;function dI(){return xw||(xw=1,function(t,e){(function(n,r){t.exports=r(De())})(xe,function(n){return function(){var r=n,s=r.lib,i=s.WordArray,o=r.enc;o.Utf16=o.Utf16BE={stringify:function(c){for(var u=c.words,d=c.sigBytes,h=[],f=0;f<d;f+=2){var p=u[f>>>2]>>>16-f%4*8&65535;h.push(String.fromCharCode(p))}return h.join("")},parse:function(c){for(var u=c.length,d=[],h=0;h<u;h++)d[h>>>1]|=c.charCodeAt(h)<<16-h%2*16;return i.create(d,u*2)}},o.Utf16LE={stringify:function(c){for(var u=c.words,d=c.sigBytes,h=[],f=0;f<d;f+=2){var p=l(u[f>>>2]>>>16-f%4*8&65535);h.push(String.fromCharCode(p))}return h.join("")},parse:function(c){for(var u=c.length,d=[],h=0;h<u;h++)d[h>>>1]|=l(c.charCodeAt(h)<<16-h%2*16);return i.create(d,u*2)}};function l(c){return c<<8&4278255360|c>>>8&16711935}}(),n.enc.Utf16})}(Zf)),Zf.exports}var e0={exports:{}},yw;function Ii(){return yw||(yw=1,function(t,e){(function(n,r){t.exports=r(De())})(xe,function(n){return function(){var r=n,s=r.lib,i=s.WordArray,o=r.enc;o.Base64={stringify:function(c){var u=c.words,d=c.sigBytes,h=this._map;c.clamp();for(var f=[],p=0;p<d;p+=3)for(var x=u[p>>>2]>>>24-p%4*8&255,m=u[p+1>>>2]>>>24-(p+1)%4*8&255,v=u[p+2>>>2]>>>24-(p+2)%4*8&255,y=x<<16|m<<8|v,g=0;g<4&&p+g*.75<d;g++)f.push(h.charAt(y>>>6*(3-g)&63));var b=h.charAt(64);if(b)for(;f.length%4;)f.push(b);return f.join("")},parse:function(c){var u=c.length,d=this._map,h=this._reverseMap;if(!h){h=this._reverseMap=[];for(var f=0;f<d.length;f++)h[d.charCodeAt(f)]=f}var p=d.charAt(64);if(p){var x=c.indexOf(p);x!==-1&&(u=x)}return l(c,u,h)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function l(c,u,d){for(var h=[],f=0,p=0;p<u;p++)if(p%4){var x=d[c.charCodeAt(p-1)]<<p%4*2,m=d[c.charCodeAt(p)]>>>6-p%4*2,v=x|m;h[f>>>2]|=v<<24-f%4*8,f++}return i.create(h,f)}}(),n.enc.Base64})}(e0)),e0.exports}var t0={exports:{}},vw;function hI(){return vw||(vw=1,function(t,e){(function(n,r){t.exports=r(De())})(xe,function(n){return function(){var r=n,s=r.lib,i=s.WordArray,o=r.enc;o.Base64url={stringify:function(c,u){u===void 0&&(u=!0);var d=c.words,h=c.sigBytes,f=u?this._safe_map:this._map;c.clamp();for(var p=[],x=0;x<h;x+=3)for(var m=d[x>>>2]>>>24-x%4*8&255,v=d[x+1>>>2]>>>24-(x+1)%4*8&255,y=d[x+2>>>2]>>>24-(x+2)%4*8&255,g=m<<16|v<<8|y,b=0;b<4&&x+b*.75<h;b++)p.push(f.charAt(g>>>6*(3-b)&63));var _=f.charAt(64);if(_)for(;p.length%4;)p.push(_);return p.join("")},parse:function(c,u){u===void 0&&(u=!0);var d=c.length,h=u?this._safe_map:this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var p=0;p<h.length;p++)f[h.charCodeAt(p)]=p}var x=h.charAt(64);if(x){var m=c.indexOf(x);m!==-1&&(d=m)}return l(c,d,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function l(c,u,d){for(var h=[],f=0,p=0;p<u;p++)if(p%4){var x=d[c.charCodeAt(p-1)]<<p%4*2,m=d[c.charCodeAt(p)]>>>6-p%4*2,v=x|m;h[f>>>2]|=v<<24-f%4*8,f++}return i.create(h,f)}}(),n.enc.Base64url})}(t0)),t0.exports}var n0={exports:{}},bw;function Mi(){return bw||(bw=1,function(t,e){(function(n,r){t.exports=r(De())})(xe,function(n){return function(r){var s=n,i=s.lib,o=i.WordArray,l=i.Hasher,c=s.algo,u=[];(function(){for(var m=0;m<64;m++)u[m]=r.abs(r.sin(m+1))*4294967296|0})();var d=c.MD5=l.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(m,v){for(var y=0;y<16;y++){var g=v+y,b=m[g];m[g]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360}var _=this._hash.words,C=m[v+0],N=m[v+1],j=m[v+2],w=m[v+3],k=m[v+4],E=m[v+5],P=m[v+6],A=m[v+7],D=m[v+8],L=m[v+9],W=m[v+10],U=m[v+11],V=m[v+12],$=m[v+13],M=m[v+14],O=m[v+15],T=_[0],F=_[1],R=_[2],B=_[3];T=h(T,F,R,B,C,7,u[0]),B=h(B,T,F,R,N,12,u[1]),R=h(R,B,T,F,j,17,u[2]),F=h(F,R,B,T,w,22,u[3]),T=h(T,F,R,B,k,7,u[4]),B=h(B,T,F,R,E,12,u[5]),R=h(R,B,T,F,P,17,u[6]),F=h(F,R,B,T,A,22,u[7]),T=h(T,F,R,B,D,7,u[8]),B=h(B,T,F,R,L,12,u[9]),R=h(R,B,T,F,W,17,u[10]),F=h(F,R,B,T,U,22,u[11]),T=h(T,F,R,B,V,7,u[12]),B=h(B,T,F,R,$,12,u[13]),R=h(R,B,T,F,M,17,u[14]),F=h(F,R,B,T,O,22,u[15]),T=f(T,F,R,B,N,5,u[16]),B=f(B,T,F,R,P,9,u[17]),R=f(R,B,T,F,U,14,u[18]),F=f(F,R,B,T,C,20,u[19]),T=f(T,F,R,B,E,5,u[20]),B=f(B,T,F,R,W,9,u[21]),R=f(R,B,T,F,O,14,u[22]),F=f(F,R,B,T,k,20,u[23]),T=f(T,F,R,B,L,5,u[24]),B=f(B,T,F,R,M,9,u[25]),R=f(R,B,T,F,w,14,u[26]),F=f(F,R,B,T,D,20,u[27]),T=f(T,F,R,B,$,5,u[28]),B=f(B,T,F,R,j,9,u[29]),R=f(R,B,T,F,A,14,u[30]),F=f(F,R,B,T,V,20,u[31]),T=p(T,F,R,B,E,4,u[32]),B=p(B,T,F,R,D,11,u[33]),R=p(R,B,T,F,U,16,u[34]),F=p(F,R,B,T,M,23,u[35]),T=p(T,F,R,B,N,4,u[36]),B=p(B,T,F,R,k,11,u[37]),R=p(R,B,T,F,A,16,u[38]),F=p(F,R,B,T,W,23,u[39]),T=p(T,F,R,B,$,4,u[40]),B=p(B,T,F,R,C,11,u[41]),R=p(R,B,T,F,w,16,u[42]),F=p(F,R,B,T,P,23,u[43]),T=p(T,F,R,B,L,4,u[44]),B=p(B,T,F,R,V,11,u[45]),R=p(R,B,T,F,O,16,u[46]),F=p(F,R,B,T,j,23,u[47]),T=x(T,F,R,B,C,6,u[48]),B=x(B,T,F,R,A,10,u[49]),R=x(R,B,T,F,M,15,u[50]),F=x(F,R,B,T,E,21,u[51]),T=x(T,F,R,B,V,6,u[52]),B=x(B,T,F,R,w,10,u[53]),R=x(R,B,T,F,W,15,u[54]),F=x(F,R,B,T,N,21,u[55]),T=x(T,F,R,B,D,6,u[56]),B=x(B,T,F,R,O,10,u[57]),R=x(R,B,T,F,P,15,u[58]),F=x(F,R,B,T,$,21,u[59]),T=x(T,F,R,B,k,6,u[60]),B=x(B,T,F,R,U,10,u[61]),R=x(R,B,T,F,j,15,u[62]),F=x(F,R,B,T,L,21,u[63]),_[0]=_[0]+T|0,_[1]=_[1]+F|0,_[2]=_[2]+R|0,_[3]=_[3]+B|0},_doFinalize:function(){var m=this._data,v=m.words,y=this._nDataBytes*8,g=m.sigBytes*8;v[g>>>5]|=128<<24-g%32;var b=r.floor(y/4294967296),_=y;v[(g+64>>>9<<4)+15]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,v[(g+64>>>9<<4)+14]=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,m.sigBytes=(v.length+1)*4,this._process();for(var C=this._hash,N=C.words,j=0;j<4;j++){var w=N[j];N[j]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360}return C},clone:function(){var m=l.clone.call(this);return m._hash=this._hash.clone(),m}});function h(m,v,y,g,b,_,C){var N=m+(v&y|~v&g)+b+C;return(N<<_|N>>>32-_)+v}function f(m,v,y,g,b,_,C){var N=m+(v&g|y&~g)+b+C;return(N<<_|N>>>32-_)+v}function p(m,v,y,g,b,_,C){var N=m+(v^y^g)+b+C;return(N<<_|N>>>32-_)+v}function x(m,v,y,g,b,_,C){var N=m+(y^(v|~g))+b+C;return(N<<_|N>>>32-_)+v}s.MD5=l._createHelper(d),s.HmacMD5=l._createHmacHelper(d)}(Math),n.MD5})}(n0)),n0.exports}var r0={exports:{}},ww;function mC(){return ww||(ww=1,function(t,e){(function(n,r){t.exports=r(De())})(xe,function(n){return function(){var r=n,s=r.lib,i=s.WordArray,o=s.Hasher,l=r.algo,c=[],u=l.SHA1=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(d,h){for(var f=this._hash.words,p=f[0],x=f[1],m=f[2],v=f[3],y=f[4],g=0;g<80;g++){if(g<16)c[g]=d[h+g]|0;else{var b=c[g-3]^c[g-8]^c[g-14]^c[g-16];c[g]=b<<1|b>>>31}var _=(p<<5|p>>>27)+y+c[g];g<20?_+=(x&m|~x&v)+1518500249:g<40?_+=(x^m^v)+1859775393:g<60?_+=(x&m|x&v|m&v)-1894007588:_+=(x^m^v)-899497514,y=v,v=m,m=x<<30|x>>>2,x=p,p=_}f[0]=f[0]+p|0,f[1]=f[1]+x|0,f[2]=f[2]+m|0,f[3]=f[3]+v|0,f[4]=f[4]+y|0},_doFinalize:function(){var d=this._data,h=d.words,f=this._nDataBytes*8,p=d.sigBytes*8;return h[p>>>5]|=128<<24-p%32,h[(p+64>>>9<<4)+14]=Math.floor(f/4294967296),h[(p+64>>>9<<4)+15]=f,d.sigBytes=h.length*4,this._process(),this._hash},clone:function(){var d=o.clone.call(this);return d._hash=this._hash.clone(),d}});r.SHA1=o._createHelper(u),r.HmacSHA1=o._createHmacHelper(u)}(),n.SHA1})}(r0)),r0.exports}var s0={exports:{}},_w;function lx(){return _w||(_w=1,function(t,e){(function(n,r){t.exports=r(De())})(xe,function(n){return function(r){var s=n,i=s.lib,o=i.WordArray,l=i.Hasher,c=s.algo,u=[],d=[];(function(){function p(y){for(var g=r.sqrt(y),b=2;b<=g;b++)if(!(y%b))return!1;return!0}function x(y){return(y-(y|0))*4294967296|0}for(var m=2,v=0;v<64;)p(m)&&(v<8&&(u[v]=x(r.pow(m,1/2))),d[v]=x(r.pow(m,1/3)),v++),m++})();var h=[],f=c.SHA256=l.extend({_doReset:function(){this._hash=new o.init(u.slice(0))},_doProcessBlock:function(p,x){for(var m=this._hash.words,v=m[0],y=m[1],g=m[2],b=m[3],_=m[4],C=m[5],N=m[6],j=m[7],w=0;w<64;w++){if(w<16)h[w]=p[x+w]|0;else{var k=h[w-15],E=(k<<25|k>>>7)^(k<<14|k>>>18)^k>>>3,P=h[w-2],A=(P<<15|P>>>17)^(P<<13|P>>>19)^P>>>10;h[w]=E+h[w-7]+A+h[w-16]}var D=_&C^~_&N,L=v&y^v&g^y&g,W=(v<<30|v>>>2)^(v<<19|v>>>13)^(v<<10|v>>>22),U=(_<<26|_>>>6)^(_<<21|_>>>11)^(_<<7|_>>>25),V=j+U+D+d[w]+h[w],$=W+L;j=N,N=C,C=_,_=b+V|0,b=g,g=y,y=v,v=V+$|0}m[0]=m[0]+v|0,m[1]=m[1]+y|0,m[2]=m[2]+g|0,m[3]=m[3]+b|0,m[4]=m[4]+_|0,m[5]=m[5]+C|0,m[6]=m[6]+N|0,m[7]=m[7]+j|0},_doFinalize:function(){var p=this._data,x=p.words,m=this._nDataBytes*8,v=p.sigBytes*8;return x[v>>>5]|=128<<24-v%32,x[(v+64>>>9<<4)+14]=r.floor(m/4294967296),x[(v+64>>>9<<4)+15]=m,p.sigBytes=x.length*4,this._process(),this._hash},clone:function(){var p=l.clone.call(this);return p._hash=this._hash.clone(),p}});s.SHA256=l._createHelper(f),s.HmacSHA256=l._createHmacHelper(f)}(Math),n.SHA256})}(s0)),s0.exports}var i0={exports:{}},kw;function fI(){return kw||(kw=1,function(t,e){(function(n,r,s){t.exports=r(De(),lx())})(xe,function(n){return function(){var r=n,s=r.lib,i=s.WordArray,o=r.algo,l=o.SHA256,c=o.SHA224=l.extend({_doReset:function(){this._hash=new i.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var u=l._doFinalize.call(this);return u.sigBytes-=4,u}});r.SHA224=l._createHelper(c),r.HmacSHA224=l._createHmacHelper(c)}(),n.SHA224})}(i0)),i0.exports}var o0={exports:{}},Sw;function gC(){return Sw||(Sw=1,function(t,e){(function(n,r,s){t.exports=r(De(),kh())})(xe,function(n){return function(){var r=n,s=r.lib,i=s.Hasher,o=r.x64,l=o.Word,c=o.WordArray,u=r.algo;function d(){return l.create.apply(l,arguments)}var h=[d(1116352408,3609767458),d(1899447441,602891725),d(3049323471,3964484399),d(3921009573,2173295548),d(961987163,4081628472),d(1508970993,3053834265),d(2453635748,2937671579),d(2870763221,3664609560),d(3624381080,2734883394),d(310598401,1164996542),d(607225278,1323610764),d(1426881987,3590304994),d(1925078388,4068182383),d(2162078206,991336113),d(2614888103,633803317),d(3248222580,3479774868),d(3835390401,2666613458),d(4022224774,944711139),d(264347078,2341262773),d(604807628,2007800933),d(770255983,1495990901),d(1249150122,1856431235),d(1555081692,3175218132),d(1996064986,2198950837),d(2554220882,3999719339),d(2821834349,766784016),d(2952996808,2566594879),d(3210313671,3203337956),d(3336571891,1034457026),d(3584528711,2466948901),d(113926993,3758326383),d(338241895,168717936),d(666307205,1188179964),d(773529912,1546045734),d(1294757372,1522805485),d(1396182291,2643833823),d(1695183700,2343527390),d(1986661051,1014477480),d(2177026350,1206759142),d(2456956037,344077627),d(2730485921,1290863460),d(2820302411,3158454273),d(3259730800,3505952657),d(3345764771,106217008),d(3516065817,3606008344),d(3600352804,1432725776),d(4094571909,1467031594),d(275423344,851169720),d(430227734,3100823752),d(506948616,1363258195),d(659060556,3750685593),d(883997877,3785050280),d(958139571,3318307427),d(1322822218,3812723403),d(1537002063,2003034995),d(1747873779,3602036899),d(1955562222,1575990012),d(2024104815,1125592928),d(2227730452,2716904306),d(2361852424,442776044),d(2428436474,593698344),d(2756734187,3733110249),d(3204031479,2999351573),d(3329325298,3815920427),d(3391569614,3928383900),d(3515267271,566280711),d(3940187606,3454069534),d(4118630271,4000239992),d(116418474,1914138554),d(174292421,2731055270),d(289380356,3203993006),d(460393269,320620315),d(685471733,587496836),d(852142971,1086792851),d(1017036298,365543100),d(1126000580,2618297676),d(1288033470,3409855158),d(1501505948,4234509866),d(1607167915,987167468),d(1816402316,1246189591)],f=[];(function(){for(var x=0;x<80;x++)f[x]=d()})();var p=u.SHA512=i.extend({_doReset:function(){this._hash=new c.init([new l.init(1779033703,4089235720),new l.init(3144134277,2227873595),new l.init(1013904242,4271175723),new l.init(2773480762,1595750129),new l.init(1359893119,2917565137),new l.init(2600822924,725511199),new l.init(528734635,4215389547),new l.init(1541459225,327033209)])},_doProcessBlock:function(x,m){for(var v=this._hash.words,y=v[0],g=v[1],b=v[2],_=v[3],C=v[4],N=v[5],j=v[6],w=v[7],k=y.high,E=y.low,P=g.high,A=g.low,D=b.high,L=b.low,W=_.high,U=_.low,V=C.high,$=C.low,M=N.high,O=N.low,T=j.high,F=j.low,R=w.high,B=w.low,J=k,G=E,Z=P,te=A,le=D,he=L,de=W,ae=U,Q=V,ne=$,ie=M,oe=O,be=T,ge=F,fe=R,we=B,Te=0;Te<80;Te++){var ze,ft,Me=f[Te];if(Te<16)ft=Me.high=x[m+Te*2]|0,ze=Me.low=x[m+Te*2+1]|0;else{var Ie=f[Te-15],Ee=Ie.high,We=Ie.low,Ut=(Ee>>>1|We<<31)^(Ee>>>8|We<<24)^Ee>>>7,cn=(We>>>1|Ee<<31)^(We>>>8|Ee<<24)^(We>>>7|Ee<<25),Ks=f[Te-2],Vt=Ks.high,pt=Ks.low,Cr=(Vt>>>19|pt<<13)^(Vt<<3|pt>>>29)^Vt>>>6,Gs=(pt>>>19|Vt<<13)^(pt<<3|Vt>>>29)^(pt>>>6|Vt<<26),Vn=f[Te-7],Rh=Vn.high,Fh=Vn.low,nc=f[Te-16],rc=nc.high,sc=nc.low;ze=cn+Fh,ft=Ut+Rh+(ze>>>0<cn>>>0?1:0),ze=ze+Gs,ft=ft+Cr+(ze>>>0<Gs>>>0?1:0),ze=ze+sc,ft=ft+rc+(ze>>>0<sc>>>0?1:0),Me.high=ft,Me.low=ze}var Ih=Q&ie^~Q&be,ta=ne&oe^~ne&ge,Mh=J&Z^J&le^Z&le,Lh=G&te^G&he^te&he,Bh=(J>>>28|G<<4)^(J<<30|G>>>2)^(J<<25|G>>>7),ic=(G>>>28|J<<4)^(G<<30|J>>>2)^(G<<25|J>>>7),na=(Q>>>14|ne<<18)^(Q>>>18|ne<<14)^(Q<<23|ne>>>9),oc=(ne>>>14|Q<<18)^(ne>>>18|Q<<14)^(ne<<23|Q>>>9),ac=h[Te],un=ac.high,lc=ac.low,Tt=we+oc,or=fe+na+(Tt>>>0<we>>>0?1:0),Tt=Tt+ta,or=or+Ih+(Tt>>>0<ta>>>0?1:0),Tt=Tt+lc,or=or+un+(Tt>>>0<lc>>>0?1:0),Tt=Tt+ze,or=or+ft+(Tt>>>0<ze>>>0?1:0),cc=ic+Lh,$h=Bh+Mh+(cc>>>0<ic>>>0?1:0);fe=be,we=ge,be=ie,ge=oe,ie=Q,oe=ne,ne=ae+Tt|0,Q=de+or+(ne>>>0<ae>>>0?1:0)|0,de=le,ae=he,le=Z,he=te,Z=J,te=G,G=Tt+cc|0,J=or+$h+(G>>>0<Tt>>>0?1:0)|0}E=y.low=E+G,y.high=k+J+(E>>>0<G>>>0?1:0),A=g.low=A+te,g.high=P+Z+(A>>>0<te>>>0?1:0),L=b.low=L+he,b.high=D+le+(L>>>0<he>>>0?1:0),U=_.low=U+ae,_.high=W+de+(U>>>0<ae>>>0?1:0),$=C.low=$+ne,C.high=V+Q+($>>>0<ne>>>0?1:0),O=N.low=O+oe,N.high=M+ie+(O>>>0<oe>>>0?1:0),F=j.low=F+ge,j.high=T+be+(F>>>0<ge>>>0?1:0),B=w.low=B+we,w.high=R+fe+(B>>>0<we>>>0?1:0)},_doFinalize:function(){var x=this._data,m=x.words,v=this._nDataBytes*8,y=x.sigBytes*8;m[y>>>5]|=128<<24-y%32,m[(y+128>>>10<<5)+30]=Math.floor(v/4294967296),m[(y+128>>>10<<5)+31]=v,x.sigBytes=m.length*4,this._process();var g=this._hash.toX32();return g},clone:function(){var x=i.clone.call(this);return x._hash=this._hash.clone(),x},blockSize:1024/32});r.SHA512=i._createHelper(p),r.HmacSHA512=i._createHmacHelper(p)}(),n.SHA512})}(o0)),o0.exports}var a0={exports:{}},Cw;function pI(){return Cw||(Cw=1,function(t,e){(function(n,r,s){t.exports=r(De(),kh(),gC())})(xe,function(n){return function(){var r=n,s=r.x64,i=s.Word,o=s.WordArray,l=r.algo,c=l.SHA512,u=l.SHA384=c.extend({_doReset:function(){this._hash=new o.init([new i.init(3418070365,3238371032),new i.init(1654270250,914150663),new i.init(2438529370,812702999),new i.init(355462360,4144912697),new i.init(1731405415,4290775857),new i.init(2394180231,1750603025),new i.init(3675008525,1694076839),new i.init(1203062813,3204075428)])},_doFinalize:function(){var d=c._doFinalize.call(this);return d.sigBytes-=16,d}});r.SHA384=c._createHelper(u),r.HmacSHA384=c._createHmacHelper(u)}(),n.SHA384})}(a0)),a0.exports}var l0={exports:{}},jw;function mI(){return jw||(jw=1,function(t,e){(function(n,r,s){t.exports=r(De(),kh())})(xe,function(n){return function(r){var s=n,i=s.lib,o=i.WordArray,l=i.Hasher,c=s.x64,u=c.Word,d=s.algo,h=[],f=[],p=[];(function(){for(var v=1,y=0,g=0;g<24;g++){h[v+5*y]=(g+1)*(g+2)/2%64;var b=y%5,_=(2*v+3*y)%5;v=b,y=_}for(var v=0;v<5;v++)for(var y=0;y<5;y++)f[v+5*y]=y+(2*v+3*y)%5*5;for(var C=1,N=0;N<24;N++){for(var j=0,w=0,k=0;k<7;k++){if(C&1){var E=(1<<k)-1;E<32?w^=1<<E:j^=1<<E-32}C&128?C=C<<1^113:C<<=1}p[N]=u.create(j,w)}})();var x=[];(function(){for(var v=0;v<25;v++)x[v]=u.create()})();var m=d.SHA3=l.extend({cfg:l.cfg.extend({outputLength:512}),_doReset:function(){for(var v=this._state=[],y=0;y<25;y++)v[y]=new u.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(v,y){for(var g=this._state,b=this.blockSize/2,_=0;_<b;_++){var C=v[y+2*_],N=v[y+2*_+1];C=(C<<8|C>>>24)&16711935|(C<<24|C>>>8)&4278255360,N=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360;var j=g[_];j.high^=N,j.low^=C}for(var w=0;w<24;w++){for(var k=0;k<5;k++){for(var E=0,P=0,A=0;A<5;A++){var j=g[k+5*A];E^=j.high,P^=j.low}var D=x[k];D.high=E,D.low=P}for(var k=0;k<5;k++)for(var L=x[(k+4)%5],W=x[(k+1)%5],U=W.high,V=W.low,E=L.high^(U<<1|V>>>31),P=L.low^(V<<1|U>>>31),A=0;A<5;A++){var j=g[k+5*A];j.high^=E,j.low^=P}for(var $=1;$<25;$++){var E,P,j=g[$],M=j.high,O=j.low,T=h[$];T<32?(E=M<<T|O>>>32-T,P=O<<T|M>>>32-T):(E=O<<T-32|M>>>64-T,P=M<<T-32|O>>>64-T);var F=x[f[$]];F.high=E,F.low=P}var R=x[0],B=g[0];R.high=B.high,R.low=B.low;for(var k=0;k<5;k++)for(var A=0;A<5;A++){var $=k+5*A,j=g[$],J=x[$],G=x[(k+1)%5+5*A],Z=x[(k+2)%5+5*A];j.high=J.high^~G.high&Z.high,j.low=J.low^~G.low&Z.low}var j=g[0],te=p[w];j.high^=te.high,j.low^=te.low}},_doFinalize:function(){var v=this._data,y=v.words;this._nDataBytes*8;var g=v.sigBytes*8,b=this.blockSize*32;y[g>>>5]|=1<<24-g%32,y[(r.ceil((g+1)/b)*b>>>5)-1]|=128,v.sigBytes=y.length*4,this._process();for(var _=this._state,C=this.cfg.outputLength/8,N=C/8,j=[],w=0;w<N;w++){var k=_[w],E=k.high,P=k.low;E=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,P=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360,j.push(P),j.push(E)}return new o.init(j,C)},clone:function(){for(var v=l.clone.call(this),y=v._state=this._state.slice(0),g=0;g<25;g++)y[g]=y[g].clone();return v}});s.SHA3=l._createHelper(m),s.HmacSHA3=l._createHmacHelper(m)}(Math),n.SHA3})}(l0)),l0.exports}var c0={exports:{}},Ew;function gI(){return Ew||(Ew=1,function(t,e){(function(n,r){t.exports=r(De())})(xe,function(n){/** @preserve
			(c) 2012 by Cédric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(r){var s=n,i=s.lib,o=i.WordArray,l=i.Hasher,c=s.algo,u=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),d=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),h=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),f=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),p=o.create([0,1518500249,1859775393,2400959708,2840853838]),x=o.create([1352829926,1548603684,1836072691,2053994217,0]),m=c.RIPEMD160=l.extend({_doReset:function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(N,j){for(var w=0;w<16;w++){var k=j+w,E=N[k];N[k]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360}var P=this._hash.words,A=p.words,D=x.words,L=u.words,W=d.words,U=h.words,V=f.words,$,M,O,T,F,R,B,J,G,Z;R=$=P[0],B=M=P[1],J=O=P[2],G=T=P[3],Z=F=P[4];for(var te,w=0;w<80;w+=1)te=$+N[j+L[w]]|0,w<16?te+=v(M,O,T)+A[0]:w<32?te+=y(M,O,T)+A[1]:w<48?te+=g(M,O,T)+A[2]:w<64?te+=b(M,O,T)+A[3]:te+=_(M,O,T)+A[4],te=te|0,te=C(te,U[w]),te=te+F|0,$=F,F=T,T=C(O,10),O=M,M=te,te=R+N[j+W[w]]|0,w<16?te+=_(B,J,G)+D[0]:w<32?te+=b(B,J,G)+D[1]:w<48?te+=g(B,J,G)+D[2]:w<64?te+=y(B,J,G)+D[3]:te+=v(B,J,G)+D[4],te=te|0,te=C(te,V[w]),te=te+Z|0,R=Z,Z=G,G=C(J,10),J=B,B=te;te=P[1]+O+G|0,P[1]=P[2]+T+Z|0,P[2]=P[3]+F+R|0,P[3]=P[4]+$+B|0,P[4]=P[0]+M+J|0,P[0]=te},_doFinalize:function(){var N=this._data,j=N.words,w=this._nDataBytes*8,k=N.sigBytes*8;j[k>>>5]|=128<<24-k%32,j[(k+64>>>9<<4)+14]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,N.sigBytes=(j.length+1)*4,this._process();for(var E=this._hash,P=E.words,A=0;A<5;A++){var D=P[A];P[A]=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360}return E},clone:function(){var N=l.clone.call(this);return N._hash=this._hash.clone(),N}});function v(N,j,w){return N^j^w}function y(N,j,w){return N&j|~N&w}function g(N,j,w){return(N|~j)^w}function b(N,j,w){return N&w|j&~w}function _(N,j,w){return N^(j|~w)}function C(N,j){return N<<j|N>>>32-j}s.RIPEMD160=l._createHelper(m),s.HmacRIPEMD160=l._createHmacHelper(m)}(),n.RIPEMD160})}(c0)),c0.exports}var u0={exports:{}},Nw;function cx(){return Nw||(Nw=1,function(t,e){(function(n,r){t.exports=r(De())})(xe,function(n){(function(){var r=n,s=r.lib,i=s.Base,o=r.enc,l=o.Utf8,c=r.algo;c.HMAC=i.extend({init:function(u,d){u=this._hasher=new u.init,typeof d=="string"&&(d=l.parse(d));var h=u.blockSize,f=h*4;d.sigBytes>f&&(d=u.finalize(d)),d.clamp();for(var p=this._oKey=d.clone(),x=this._iKey=d.clone(),m=p.words,v=x.words,y=0;y<h;y++)m[y]^=1549556828,v[y]^=909522486;p.sigBytes=x.sigBytes=f,this.reset()},reset:function(){var u=this._hasher;u.reset(),u.update(this._iKey)},update:function(u){return this._hasher.update(u),this},finalize:function(u){var d=this._hasher,h=d.finalize(u);d.reset();var f=d.finalize(this._oKey.clone().concat(h));return f}})})()})}(u0)),u0.exports}var d0={exports:{}},Aw;function xI(){return Aw||(Aw=1,function(t,e){(function(n,r,s){t.exports=r(De(),lx(),cx())})(xe,function(n){return function(){var r=n,s=r.lib,i=s.Base,o=s.WordArray,l=r.algo,c=l.SHA256,u=l.HMAC,d=l.PBKDF2=i.extend({cfg:i.extend({keySize:128/32,hasher:c,iterations:25e4}),init:function(h){this.cfg=this.cfg.extend(h)},compute:function(h,f){for(var p=this.cfg,x=u.create(p.hasher,h),m=o.create(),v=o.create([1]),y=m.words,g=v.words,b=p.keySize,_=p.iterations;y.length<b;){var C=x.update(f).finalize(v);x.reset();for(var N=C.words,j=N.length,w=C,k=1;k<_;k++){w=x.finalize(w),x.reset();for(var E=w.words,P=0;P<j;P++)N[P]^=E[P]}m.concat(C),g[0]++}return m.sigBytes=b*4,m}});r.PBKDF2=function(h,f,p){return d.create(p).compute(h,f)}}(),n.PBKDF2})}(d0)),d0.exports}var h0={exports:{}},Pw;function qs(){return Pw||(Pw=1,function(t,e){(function(n,r,s){t.exports=r(De(),mC(),cx())})(xe,function(n){return function(){var r=n,s=r.lib,i=s.Base,o=s.WordArray,l=r.algo,c=l.MD5,u=l.EvpKDF=i.extend({cfg:i.extend({keySize:128/32,hasher:c,iterations:1}),init:function(d){this.cfg=this.cfg.extend(d)},compute:function(d,h){for(var f,p=this.cfg,x=p.hasher.create(),m=o.create(),v=m.words,y=p.keySize,g=p.iterations;v.length<y;){f&&x.update(f),f=x.update(d).finalize(h),x.reset();for(var b=1;b<g;b++)f=x.finalize(f),x.reset();m.concat(f)}return m.sigBytes=y*4,m}});r.EvpKDF=function(d,h,f){return u.create(f).compute(d,h)}}(),n.EvpKDF})}(h0)),h0.exports}var f0={exports:{}},Dw;function Nt(){return Dw||(Dw=1,function(t,e){(function(n,r,s){t.exports=r(De(),qs())})(xe,function(n){n.lib.Cipher||function(r){var s=n,i=s.lib,o=i.Base,l=i.WordArray,c=i.BufferedBlockAlgorithm,u=s.enc;u.Utf8;var d=u.Base64,h=s.algo,f=h.EvpKDF,p=i.Cipher=c.extend({cfg:o.extend(),createEncryptor:function(E,P){return this.create(this._ENC_XFORM_MODE,E,P)},createDecryptor:function(E,P){return this.create(this._DEC_XFORM_MODE,E,P)},init:function(E,P,A){this.cfg=this.cfg.extend(A),this._xformMode=E,this._key=P,this.reset()},reset:function(){c.reset.call(this),this._doReset()},process:function(E){return this._append(E),this._process()},finalize:function(E){E&&this._append(E);var P=this._doFinalize();return P},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function E(P){return typeof P=="string"?k:N}return function(P){return{encrypt:function(A,D,L){return E(D).encrypt(P,A,D,L)},decrypt:function(A,D,L){return E(D).decrypt(P,A,D,L)}}}}()});i.StreamCipher=p.extend({_doFinalize:function(){var E=this._process(!0);return E},blockSize:1});var x=s.mode={},m=i.BlockCipherMode=o.extend({createEncryptor:function(E,P){return this.Encryptor.create(E,P)},createDecryptor:function(E,P){return this.Decryptor.create(E,P)},init:function(E,P){this._cipher=E,this._iv=P}}),v=x.CBC=function(){var E=m.extend();E.Encryptor=E.extend({processBlock:function(A,D){var L=this._cipher,W=L.blockSize;P.call(this,A,D,W),L.encryptBlock(A,D),this._prevBlock=A.slice(D,D+W)}}),E.Decryptor=E.extend({processBlock:function(A,D){var L=this._cipher,W=L.blockSize,U=A.slice(D,D+W);L.decryptBlock(A,D),P.call(this,A,D,W),this._prevBlock=U}});function P(A,D,L){var W,U=this._iv;U?(W=U,this._iv=r):W=this._prevBlock;for(var V=0;V<L;V++)A[D+V]^=W[V]}return E}(),y=s.pad={},g=y.Pkcs7={pad:function(E,P){for(var A=P*4,D=A-E.sigBytes%A,L=D<<24|D<<16|D<<8|D,W=[],U=0;U<D;U+=4)W.push(L);var V=l.create(W,D);E.concat(V)},unpad:function(E){var P=E.words[E.sigBytes-1>>>2]&255;E.sigBytes-=P}};i.BlockCipher=p.extend({cfg:p.cfg.extend({mode:v,padding:g}),reset:function(){var E;p.reset.call(this);var P=this.cfg,A=P.iv,D=P.mode;this._xformMode==this._ENC_XFORM_MODE?E=D.createEncryptor:(E=D.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==E?this._mode.init(this,A&&A.words):(this._mode=E.call(D,this,A&&A.words),this._mode.__creator=E)},_doProcessBlock:function(E,P){this._mode.processBlock(E,P)},_doFinalize:function(){var E,P=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(P.pad(this._data,this.blockSize),E=this._process(!0)):(E=this._process(!0),P.unpad(E)),E},blockSize:128/32});var b=i.CipherParams=o.extend({init:function(E){this.mixIn(E)},toString:function(E){return(E||this.formatter).stringify(this)}}),_=s.format={},C=_.OpenSSL={stringify:function(E){var P,A=E.ciphertext,D=E.salt;return D?P=l.create([1398893684,1701076831]).concat(D).concat(A):P=A,P.toString(d)},parse:function(E){var P,A=d.parse(E),D=A.words;return D[0]==1398893684&&D[1]==1701076831&&(P=l.create(D.slice(2,4)),D.splice(0,4),A.sigBytes-=16),b.create({ciphertext:A,salt:P})}},N=i.SerializableCipher=o.extend({cfg:o.extend({format:C}),encrypt:function(E,P,A,D){D=this.cfg.extend(D);var L=E.createEncryptor(A,D),W=L.finalize(P),U=L.cfg;return b.create({ciphertext:W,key:A,iv:U.iv,algorithm:E,mode:U.mode,padding:U.padding,blockSize:E.blockSize,formatter:D.format})},decrypt:function(E,P,A,D){D=this.cfg.extend(D),P=this._parse(P,D.format);var L=E.createDecryptor(A,D).finalize(P.ciphertext);return L},_parse:function(E,P){return typeof E=="string"?P.parse(E,this):E}}),j=s.kdf={},w=j.OpenSSL={execute:function(E,P,A,D,L){if(D||(D=l.random(64/8)),L)var W=f.create({keySize:P+A,hasher:L}).compute(E,D);else var W=f.create({keySize:P+A}).compute(E,D);var U=l.create(W.words.slice(P),A*4);return W.sigBytes=P*4,b.create({key:W,iv:U,salt:D})}},k=i.PasswordBasedCipher=N.extend({cfg:N.cfg.extend({kdf:w}),encrypt:function(E,P,A,D){D=this.cfg.extend(D);var L=D.kdf.execute(A,E.keySize,E.ivSize,D.salt,D.hasher);D.iv=L.iv;var W=N.encrypt.call(this,E,P,L.key,D);return W.mixIn(L),W},decrypt:function(E,P,A,D){D=this.cfg.extend(D),P=this._parse(P,D.format);var L=D.kdf.execute(A,E.keySize,E.ivSize,P.salt,D.hasher);D.iv=L.iv;var W=N.decrypt.call(this,E,P,L.key,D);return W}})}()})}(f0)),f0.exports}var p0={exports:{}},Tw;function yI(){return Tw||(Tw=1,function(t,e){(function(n,r,s){t.exports=r(De(),Nt())})(xe,function(n){return n.mode.CFB=function(){var r=n.lib.BlockCipherMode.extend();r.Encryptor=r.extend({processBlock:function(i,o){var l=this._cipher,c=l.blockSize;s.call(this,i,o,c,l),this._prevBlock=i.slice(o,o+c)}}),r.Decryptor=r.extend({processBlock:function(i,o){var l=this._cipher,c=l.blockSize,u=i.slice(o,o+c);s.call(this,i,o,c,l),this._prevBlock=u}});function s(i,o,l,c){var u,d=this._iv;d?(u=d.slice(0),this._iv=void 0):u=this._prevBlock,c.encryptBlock(u,0);for(var h=0;h<l;h++)i[o+h]^=u[h]}return r}(),n.mode.CFB})}(p0)),p0.exports}var m0={exports:{}},Ow;function vI(){return Ow||(Ow=1,function(t,e){(function(n,r,s){t.exports=r(De(),Nt())})(xe,function(n){return n.mode.CTR=function(){var r=n.lib.BlockCipherMode.extend(),s=r.Encryptor=r.extend({processBlock:function(i,o){var l=this._cipher,c=l.blockSize,u=this._iv,d=this._counter;u&&(d=this._counter=u.slice(0),this._iv=void 0);var h=d.slice(0);l.encryptBlock(h,0),d[c-1]=d[c-1]+1|0;for(var f=0;f<c;f++)i[o+f]^=h[f]}});return r.Decryptor=s,r}(),n.mode.CTR})}(m0)),m0.exports}var g0={exports:{}},Rw;function bI(){return Rw||(Rw=1,function(t,e){(function(n,r,s){t.exports=r(De(),Nt())})(xe,function(n){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return n.mode.CTRGladman=function(){var r=n.lib.BlockCipherMode.extend();function s(l){if((l>>24&255)===255){var c=l>>16&255,u=l>>8&255,d=l&255;c===255?(c=0,u===255?(u=0,d===255?d=0:++d):++u):++c,l=0,l+=c<<16,l+=u<<8,l+=d}else l+=1<<24;return l}function i(l){return(l[0]=s(l[0]))===0&&(l[1]=s(l[1])),l}var o=r.Encryptor=r.extend({processBlock:function(l,c){var u=this._cipher,d=u.blockSize,h=this._iv,f=this._counter;h&&(f=this._counter=h.slice(0),this._iv=void 0),i(f);var p=f.slice(0);u.encryptBlock(p,0);for(var x=0;x<d;x++)l[c+x]^=p[x]}});return r.Decryptor=o,r}(),n.mode.CTRGladman})}(g0)),g0.exports}var x0={exports:{}},Fw;function wI(){return Fw||(Fw=1,function(t,e){(function(n,r,s){t.exports=r(De(),Nt())})(xe,function(n){return n.mode.OFB=function(){var r=n.lib.BlockCipherMode.extend(),s=r.Encryptor=r.extend({processBlock:function(i,o){var l=this._cipher,c=l.blockSize,u=this._iv,d=this._keystream;u&&(d=this._keystream=u.slice(0),this._iv=void 0),l.encryptBlock(d,0);for(var h=0;h<c;h++)i[o+h]^=d[h]}});return r.Decryptor=s,r}(),n.mode.OFB})}(x0)),x0.exports}var y0={exports:{}},Iw;function _I(){return Iw||(Iw=1,function(t,e){(function(n,r,s){t.exports=r(De(),Nt())})(xe,function(n){return n.mode.ECB=function(){var r=n.lib.BlockCipherMode.extend();return r.Encryptor=r.extend({processBlock:function(s,i){this._cipher.encryptBlock(s,i)}}),r.Decryptor=r.extend({processBlock:function(s,i){this._cipher.decryptBlock(s,i)}}),r}(),n.mode.ECB})}(y0)),y0.exports}var v0={exports:{}},Mw;function kI(){return Mw||(Mw=1,function(t,e){(function(n,r,s){t.exports=r(De(),Nt())})(xe,function(n){return n.pad.AnsiX923={pad:function(r,s){var i=r.sigBytes,o=s*4,l=o-i%o,c=i+l-1;r.clamp(),r.words[c>>>2]|=l<<24-c%4*8,r.sigBytes+=l},unpad:function(r){var s=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=s}},n.pad.Ansix923})}(v0)),v0.exports}var b0={exports:{}},Lw;function SI(){return Lw||(Lw=1,function(t,e){(function(n,r,s){t.exports=r(De(),Nt())})(xe,function(n){return n.pad.Iso10126={pad:function(r,s){var i=s*4,o=i-r.sigBytes%i;r.concat(n.lib.WordArray.random(o-1)).concat(n.lib.WordArray.create([o<<24],1))},unpad:function(r){var s=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=s}},n.pad.Iso10126})}(b0)),b0.exports}var w0={exports:{}},Bw;function CI(){return Bw||(Bw=1,function(t,e){(function(n,r,s){t.exports=r(De(),Nt())})(xe,function(n){return n.pad.Iso97971={pad:function(r,s){r.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(r,s)},unpad:function(r){n.pad.ZeroPadding.unpad(r),r.sigBytes--}},n.pad.Iso97971})}(w0)),w0.exports}var _0={exports:{}},$w;function jI(){return $w||($w=1,function(t,e){(function(n,r,s){t.exports=r(De(),Nt())})(xe,function(n){return n.pad.ZeroPadding={pad:function(r,s){var i=s*4;r.clamp(),r.sigBytes+=i-(r.sigBytes%i||i)},unpad:function(r){for(var s=r.words,i=r.sigBytes-1,i=r.sigBytes-1;i>=0;i--)if(s[i>>>2]>>>24-i%4*8&255){r.sigBytes=i+1;break}}},n.pad.ZeroPadding})}(_0)),_0.exports}var k0={exports:{}},zw;function EI(){return zw||(zw=1,function(t,e){(function(n,r,s){t.exports=r(De(),Nt())})(xe,function(n){return n.pad.NoPadding={pad:function(){},unpad:function(){}},n.pad.NoPadding})}(k0)),k0.exports}var S0={exports:{}},Uw;function NI(){return Uw||(Uw=1,function(t,e){(function(n,r,s){t.exports=r(De(),Nt())})(xe,function(n){return function(r){var s=n,i=s.lib,o=i.CipherParams,l=s.enc,c=l.Hex,u=s.format;u.Hex={stringify:function(d){return d.ciphertext.toString(c)},parse:function(d){var h=c.parse(d);return o.create({ciphertext:h})}}}(),n.format.Hex})}(S0)),S0.exports}var C0={exports:{}},Vw;function AI(){return Vw||(Vw=1,function(t,e){(function(n,r,s){t.exports=r(De(),Ii(),Mi(),qs(),Nt())})(xe,function(n){return function(){var r=n,s=r.lib,i=s.BlockCipher,o=r.algo,l=[],c=[],u=[],d=[],h=[],f=[],p=[],x=[],m=[],v=[];(function(){for(var b=[],_=0;_<256;_++)_<128?b[_]=_<<1:b[_]=_<<1^283;for(var C=0,N=0,_=0;_<256;_++){var j=N^N<<1^N<<2^N<<3^N<<4;j=j>>>8^j&255^99,l[C]=j,c[j]=C;var w=b[C],k=b[w],E=b[k],P=b[j]*257^j*16843008;u[C]=P<<24|P>>>8,d[C]=P<<16|P>>>16,h[C]=P<<8|P>>>24,f[C]=P;var P=E*16843009^k*65537^w*257^C*16843008;p[j]=P<<24|P>>>8,x[j]=P<<16|P>>>16,m[j]=P<<8|P>>>24,v[j]=P,C?(C=w^b[b[b[E^w]]],N^=b[b[N]]):C=N=1}})();var y=[0,1,2,4,8,16,32,64,128,27,54],g=o.AES=i.extend({_doReset:function(){var b;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var _=this._keyPriorReset=this._key,C=_.words,N=_.sigBytes/4,j=this._nRounds=N+6,w=(j+1)*4,k=this._keySchedule=[],E=0;E<w;E++)E<N?k[E]=C[E]:(b=k[E-1],E%N?N>6&&E%N==4&&(b=l[b>>>24]<<24|l[b>>>16&255]<<16|l[b>>>8&255]<<8|l[b&255]):(b=b<<8|b>>>24,b=l[b>>>24]<<24|l[b>>>16&255]<<16|l[b>>>8&255]<<8|l[b&255],b^=y[E/N|0]<<24),k[E]=k[E-N]^b);for(var P=this._invKeySchedule=[],A=0;A<w;A++){var E=w-A;if(A%4)var b=k[E];else var b=k[E-4];A<4||E<=4?P[A]=b:P[A]=p[l[b>>>24]]^x[l[b>>>16&255]]^m[l[b>>>8&255]]^v[l[b&255]]}}},encryptBlock:function(b,_){this._doCryptBlock(b,_,this._keySchedule,u,d,h,f,l)},decryptBlock:function(b,_){var C=b[_+1];b[_+1]=b[_+3],b[_+3]=C,this._doCryptBlock(b,_,this._invKeySchedule,p,x,m,v,c);var C=b[_+1];b[_+1]=b[_+3],b[_+3]=C},_doCryptBlock:function(b,_,C,N,j,w,k,E){for(var P=this._nRounds,A=b[_]^C[0],D=b[_+1]^C[1],L=b[_+2]^C[2],W=b[_+3]^C[3],U=4,V=1;V<P;V++){var $=N[A>>>24]^j[D>>>16&255]^w[L>>>8&255]^k[W&255]^C[U++],M=N[D>>>24]^j[L>>>16&255]^w[W>>>8&255]^k[A&255]^C[U++],O=N[L>>>24]^j[W>>>16&255]^w[A>>>8&255]^k[D&255]^C[U++],T=N[W>>>24]^j[A>>>16&255]^w[D>>>8&255]^k[L&255]^C[U++];A=$,D=M,L=O,W=T}var $=(E[A>>>24]<<24|E[D>>>16&255]<<16|E[L>>>8&255]<<8|E[W&255])^C[U++],M=(E[D>>>24]<<24|E[L>>>16&255]<<16|E[W>>>8&255]<<8|E[A&255])^C[U++],O=(E[L>>>24]<<24|E[W>>>16&255]<<16|E[A>>>8&255]<<8|E[D&255])^C[U++],T=(E[W>>>24]<<24|E[A>>>16&255]<<16|E[D>>>8&255]<<8|E[L&255])^C[U++];b[_]=$,b[_+1]=M,b[_+2]=O,b[_+3]=T},keySize:256/32});r.AES=i._createHelper(g)}(),n.AES})}(C0)),C0.exports}var j0={exports:{}},Ww;function PI(){return Ww||(Ww=1,function(t,e){(function(n,r,s){t.exports=r(De(),Ii(),Mi(),qs(),Nt())})(xe,function(n){return function(){var r=n,s=r.lib,i=s.WordArray,o=s.BlockCipher,l=r.algo,c=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],u=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],d=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],h=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],f=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],p=l.DES=o.extend({_doReset:function(){for(var y=this._key,g=y.words,b=[],_=0;_<56;_++){var C=c[_]-1;b[_]=g[C>>>5]>>>31-C%32&1}for(var N=this._subKeys=[],j=0;j<16;j++){for(var w=N[j]=[],k=d[j],_=0;_<24;_++)w[_/6|0]|=b[(u[_]-1+k)%28]<<31-_%6,w[4+(_/6|0)]|=b[28+(u[_+24]-1+k)%28]<<31-_%6;w[0]=w[0]<<1|w[0]>>>31;for(var _=1;_<7;_++)w[_]=w[_]>>>(_-1)*4+3;w[7]=w[7]<<5|w[7]>>>27}for(var E=this._invSubKeys=[],_=0;_<16;_++)E[_]=N[15-_]},encryptBlock:function(y,g){this._doCryptBlock(y,g,this._subKeys)},decryptBlock:function(y,g){this._doCryptBlock(y,g,this._invSubKeys)},_doCryptBlock:function(y,g,b){this._lBlock=y[g],this._rBlock=y[g+1],x.call(this,4,252645135),x.call(this,16,65535),m.call(this,2,858993459),m.call(this,8,16711935),x.call(this,1,1431655765);for(var _=0;_<16;_++){for(var C=b[_],N=this._lBlock,j=this._rBlock,w=0,k=0;k<8;k++)w|=h[k][((j^C[k])&f[k])>>>0];this._lBlock=j,this._rBlock=N^w}var E=this._lBlock;this._lBlock=this._rBlock,this._rBlock=E,x.call(this,1,1431655765),m.call(this,8,16711935),m.call(this,2,858993459),x.call(this,16,65535),x.call(this,4,252645135),y[g]=this._lBlock,y[g+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function x(y,g){var b=(this._lBlock>>>y^this._rBlock)&g;this._rBlock^=b,this._lBlock^=b<<y}function m(y,g){var b=(this._rBlock>>>y^this._lBlock)&g;this._lBlock^=b,this._rBlock^=b<<y}r.DES=o._createHelper(p);var v=l.TripleDES=o.extend({_doReset:function(){var y=this._key,g=y.words;if(g.length!==2&&g.length!==4&&g.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var b=g.slice(0,2),_=g.length<4?g.slice(0,2):g.slice(2,4),C=g.length<6?g.slice(0,2):g.slice(4,6);this._des1=p.createEncryptor(i.create(b)),this._des2=p.createEncryptor(i.create(_)),this._des3=p.createEncryptor(i.create(C))},encryptBlock:function(y,g){this._des1.encryptBlock(y,g),this._des2.decryptBlock(y,g),this._des3.encryptBlock(y,g)},decryptBlock:function(y,g){this._des3.decryptBlock(y,g),this._des2.encryptBlock(y,g),this._des1.decryptBlock(y,g)},keySize:192/32,ivSize:64/32,blockSize:64/32});r.TripleDES=o._createHelper(v)}(),n.TripleDES})}(j0)),j0.exports}var E0={exports:{}},Hw;function DI(){return Hw||(Hw=1,function(t,e){(function(n,r,s){t.exports=r(De(),Ii(),Mi(),qs(),Nt())})(xe,function(n){return function(){var r=n,s=r.lib,i=s.StreamCipher,o=r.algo,l=o.RC4=i.extend({_doReset:function(){for(var d=this._key,h=d.words,f=d.sigBytes,p=this._S=[],x=0;x<256;x++)p[x]=x;for(var x=0,m=0;x<256;x++){var v=x%f,y=h[v>>>2]>>>24-v%4*8&255;m=(m+p[x]+y)%256;var g=p[x];p[x]=p[m],p[m]=g}this._i=this._j=0},_doProcessBlock:function(d,h){d[h]^=c.call(this)},keySize:256/32,ivSize:0});function c(){for(var d=this._S,h=this._i,f=this._j,p=0,x=0;x<4;x++){h=(h+1)%256,f=(f+d[h])%256;var m=d[h];d[h]=d[f],d[f]=m,p|=d[(d[h]+d[f])%256]<<24-x*8}return this._i=h,this._j=f,p}r.RC4=i._createHelper(l);var u=o.RC4Drop=l.extend({cfg:l.cfg.extend({drop:192}),_doReset:function(){l._doReset.call(this);for(var d=this.cfg.drop;d>0;d--)c.call(this)}});r.RC4Drop=i._createHelper(u)}(),n.RC4})}(E0)),E0.exports}var N0={exports:{}},qw;function TI(){return qw||(qw=1,function(t,e){(function(n,r,s){t.exports=r(De(),Ii(),Mi(),qs(),Nt())})(xe,function(n){return function(){var r=n,s=r.lib,i=s.StreamCipher,o=r.algo,l=[],c=[],u=[],d=o.Rabbit=i.extend({_doReset:function(){for(var f=this._key.words,p=this.cfg.iv,x=0;x<4;x++)f[x]=(f[x]<<8|f[x]>>>24)&16711935|(f[x]<<24|f[x]>>>8)&4278255360;var m=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],v=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var x=0;x<4;x++)h.call(this);for(var x=0;x<8;x++)v[x]^=m[x+4&7];if(p){var y=p.words,g=y[0],b=y[1],_=(g<<8|g>>>24)&16711935|(g<<24|g>>>8)&4278255360,C=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,N=_>>>16|C&4294901760,j=C<<16|_&65535;v[0]^=_,v[1]^=N,v[2]^=C,v[3]^=j,v[4]^=_,v[5]^=N,v[6]^=C,v[7]^=j;for(var x=0;x<4;x++)h.call(this)}},_doProcessBlock:function(f,p){var x=this._X;h.call(this),l[0]=x[0]^x[5]>>>16^x[3]<<16,l[1]=x[2]^x[7]>>>16^x[5]<<16,l[2]=x[4]^x[1]>>>16^x[7]<<16,l[3]=x[6]^x[3]>>>16^x[1]<<16;for(var m=0;m<4;m++)l[m]=(l[m]<<8|l[m]>>>24)&16711935|(l[m]<<24|l[m]>>>8)&4278255360,f[p+m]^=l[m]},blockSize:128/32,ivSize:64/32});function h(){for(var f=this._X,p=this._C,x=0;x<8;x++)c[x]=p[x];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<c[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<c[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<c[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<c[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<c[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<c[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<c[6]>>>0?1:0)|0,this._b=p[7]>>>0<c[7]>>>0?1:0;for(var x=0;x<8;x++){var m=f[x]+p[x],v=m&65535,y=m>>>16,g=((v*v>>>17)+v*y>>>15)+y*y,b=((m&4294901760)*m|0)+((m&65535)*m|0);u[x]=g^b}f[0]=u[0]+(u[7]<<16|u[7]>>>16)+(u[6]<<16|u[6]>>>16)|0,f[1]=u[1]+(u[0]<<8|u[0]>>>24)+u[7]|0,f[2]=u[2]+(u[1]<<16|u[1]>>>16)+(u[0]<<16|u[0]>>>16)|0,f[3]=u[3]+(u[2]<<8|u[2]>>>24)+u[1]|0,f[4]=u[4]+(u[3]<<16|u[3]>>>16)+(u[2]<<16|u[2]>>>16)|0,f[5]=u[5]+(u[4]<<8|u[4]>>>24)+u[3]|0,f[6]=u[6]+(u[5]<<16|u[5]>>>16)+(u[4]<<16|u[4]>>>16)|0,f[7]=u[7]+(u[6]<<8|u[6]>>>24)+u[5]|0}r.Rabbit=i._createHelper(d)}(),n.Rabbit})}(N0)),N0.exports}var A0={exports:{}},Kw;function OI(){return Kw||(Kw=1,function(t,e){(function(n,r,s){t.exports=r(De(),Ii(),Mi(),qs(),Nt())})(xe,function(n){return function(){var r=n,s=r.lib,i=s.StreamCipher,o=r.algo,l=[],c=[],u=[],d=o.RabbitLegacy=i.extend({_doReset:function(){var f=this._key.words,p=this.cfg.iv,x=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],m=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var v=0;v<4;v++)h.call(this);for(var v=0;v<8;v++)m[v]^=x[v+4&7];if(p){var y=p.words,g=y[0],b=y[1],_=(g<<8|g>>>24)&16711935|(g<<24|g>>>8)&4278255360,C=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,N=_>>>16|C&4294901760,j=C<<16|_&65535;m[0]^=_,m[1]^=N,m[2]^=C,m[3]^=j,m[4]^=_,m[5]^=N,m[6]^=C,m[7]^=j;for(var v=0;v<4;v++)h.call(this)}},_doProcessBlock:function(f,p){var x=this._X;h.call(this),l[0]=x[0]^x[5]>>>16^x[3]<<16,l[1]=x[2]^x[7]>>>16^x[5]<<16,l[2]=x[4]^x[1]>>>16^x[7]<<16,l[3]=x[6]^x[3]>>>16^x[1]<<16;for(var m=0;m<4;m++)l[m]=(l[m]<<8|l[m]>>>24)&16711935|(l[m]<<24|l[m]>>>8)&4278255360,f[p+m]^=l[m]},blockSize:128/32,ivSize:64/32});function h(){for(var f=this._X,p=this._C,x=0;x<8;x++)c[x]=p[x];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<c[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<c[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<c[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<c[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<c[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<c[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<c[6]>>>0?1:0)|0,this._b=p[7]>>>0<c[7]>>>0?1:0;for(var x=0;x<8;x++){var m=f[x]+p[x],v=m&65535,y=m>>>16,g=((v*v>>>17)+v*y>>>15)+y*y,b=((m&4294901760)*m|0)+((m&65535)*m|0);u[x]=g^b}f[0]=u[0]+(u[7]<<16|u[7]>>>16)+(u[6]<<16|u[6]>>>16)|0,f[1]=u[1]+(u[0]<<8|u[0]>>>24)+u[7]|0,f[2]=u[2]+(u[1]<<16|u[1]>>>16)+(u[0]<<16|u[0]>>>16)|0,f[3]=u[3]+(u[2]<<8|u[2]>>>24)+u[1]|0,f[4]=u[4]+(u[3]<<16|u[3]>>>16)+(u[2]<<16|u[2]>>>16)|0,f[5]=u[5]+(u[4]<<8|u[4]>>>24)+u[3]|0,f[6]=u[6]+(u[5]<<16|u[5]>>>16)+(u[4]<<16|u[4]>>>16)|0,f[7]=u[7]+(u[6]<<8|u[6]>>>24)+u[5]|0}r.RabbitLegacy=i._createHelper(d)}(),n.RabbitLegacy})}(A0)),A0.exports}var P0={exports:{}},Gw;function RI(){return Gw||(Gw=1,function(t,e){(function(n,r,s){t.exports=r(De(),Ii(),Mi(),qs(),Nt())})(xe,function(n){return function(){var r=n,s=r.lib,i=s.BlockCipher,o=r.algo;const l=16,c=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],u=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var d={pbox:[],sbox:[]};function h(v,y){let g=y>>24&255,b=y>>16&255,_=y>>8&255,C=y&255,N=v.sbox[0][g]+v.sbox[1][b];return N=N^v.sbox[2][_],N=N+v.sbox[3][C],N}function f(v,y,g){let b=y,_=g,C;for(let N=0;N<l;++N)b=b^v.pbox[N],_=h(v,b)^_,C=b,b=_,_=C;return C=b,b=_,_=C,_=_^v.pbox[l],b=b^v.pbox[l+1],{left:b,right:_}}function p(v,y,g){let b=y,_=g,C;for(let N=l+1;N>1;--N)b=b^v.pbox[N],_=h(v,b)^_,C=b,b=_,_=C;return C=b,b=_,_=C,_=_^v.pbox[1],b=b^v.pbox[0],{left:b,right:_}}function x(v,y,g){for(let j=0;j<4;j++){v.sbox[j]=[];for(let w=0;w<256;w++)v.sbox[j][w]=u[j][w]}let b=0;for(let j=0;j<l+2;j++)v.pbox[j]=c[j]^y[b],b++,b>=g&&(b=0);let _=0,C=0,N=0;for(let j=0;j<l+2;j+=2)N=f(v,_,C),_=N.left,C=N.right,v.pbox[j]=_,v.pbox[j+1]=C;for(let j=0;j<4;j++)for(let w=0;w<256;w+=2)N=f(v,_,C),_=N.left,C=N.right,v.sbox[j][w]=_,v.sbox[j][w+1]=C;return!0}var m=o.Blowfish=i.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var v=this._keyPriorReset=this._key,y=v.words,g=v.sigBytes/4;x(d,y,g)}},encryptBlock:function(v,y){var g=f(d,v[y],v[y+1]);v[y]=g.left,v[y+1]=g.right},decryptBlock:function(v,y){var g=p(d,v[y],v[y+1]);v[y]=g.left,v[y+1]=g.right},blockSize:64/32,keySize:128/32,ivSize:64/32});r.Blowfish=i._createHelper(m)}(),n.Blowfish})}(P0)),P0.exports}(function(t,e){(function(n,r,s){t.exports=r(De(),kh(),uI(),dI(),Ii(),hI(),Mi(),mC(),lx(),fI(),gC(),pI(),mI(),gI(),cx(),xI(),qs(),Nt(),yI(),vI(),bI(),wI(),_I(),kI(),SI(),CI(),jI(),EI(),NI(),AI(),PI(),DI(),TI(),OI(),RI())})(xe,function(n){return n})})(pC);var FI=pC.exports;const Jn=Td(FI);let II=class{constructor(){this.keyDerivationSalt=this.generateSalt(),this.config={key:this.deriveKey(),algorithm:"AES"}}generateSalt(){return Jn.lib.WordArray.random(256/8).toString()}deriveKey(){const n=`${{}.VITE_ENCRYPTION_SECRET||"default-secret"}_${this.keyDerivationSalt}`;return Jn.PBKDF2(n,this.keyDerivationSalt,{keySize:256/32,iterations:1e4}).toString()}encrypt(e){try{const n=JSON.stringify(e);return Jn.AES.encrypt(n,this.config.key).toString()}catch(n){throw console.error("Encryption error:",n),new Error("Failed to encrypt data")}}decrypt(e){try{const r=Jn.AES.decrypt(e,this.config.key).toString(Jn.enc.Utf8);if(!r)throw new Error("Invalid encrypted data");return JSON.parse(r)}catch(n){throw console.error("Decryption error:",n),new Error("Failed to decrypt data")}}encryptCSVData(e){const n=["account_name","account_categories","preview_data","bucket_assignments","tags"],r={...e};return n.forEach(s=>{r[s]&&(r[s]=this.encrypt(r[s]))}),r}decryptCSVData(e){const n=["account_name","account_categories","preview_data","bucket_assignments","tags"],r={...e};return n.forEach(s=>{if(r[s]&&typeof r[s]=="string")try{r[s]=this.decrypt(r[s])}catch(i){console.warn(`Failed to decrypt field ${s}:`,i)}}),r}encryptPropertyData(e){const n=["name","address","property_type"],r={...e};return n.forEach(s=>{r[s]&&(r[s]=this.encrypt(r[s]))}),r}decryptPropertyData(e){const n=["name","address","property_type"],r={...e};return n.forEach(s=>{if(r[s]&&typeof r[s]=="string")try{r[s]=this.decrypt(r[s])}catch(i){console.warn(`Failed to decrypt field ${s}:`,i)}}),r}encryptOrganizationData(e){const n=["name"],r={...e};return n.forEach(s=>{r[s]&&(r[s]=this.encrypt(r[s]))}),r}decryptOrganizationData(e){const n=["name"],r={...e};return n.forEach(s=>{if(r[s]&&typeof r[s]=="string")try{r[s]=this.decrypt(r[s])}catch(i){console.warn(`Failed to decrypt field ${s}:`,i)}}),r}generateHash(e){const n=JSON.stringify(e);return Jn.SHA256(n).toString()}verifyIntegrity(e,n){return this.generateHash(e)===n}anonymizeData(e){const n={...e};n.account_name&&(n.account_name=this.anonymizeString(n.account_name)),n.name&&(n.name=this.anonymizeString(n.name)),n.address&&(n.address=this.anonymizeString(n.address));const r=["id","user_id","created_at","updated_at","file_type","total_records","is_active"],s={};return r.forEach(i=>{n[i]!==void 0&&(s[i]=n[i])}),s}anonymizeString(e){return!e||e.length===0?e:e.length<=2?"*".repeat(e.length):e[0]+"*".repeat(e.length-2)+e[e.length-1]}};const Qa=new II,MI="https://iqwhrvtcrseidfyznqaf.supabase.co",LI="sb_publishable_ULLJeduhFHc_KRINLLXxug_zGvRBLPf",St=ql(MI,LI);class BI{constructor(){this.currentUser=null,this.initializeAuth()}async initializeAuth(){St.auth.onAuthStateChange((e,n)=>{e==="SIGNED_IN"&&n?this.currentUser=n.user:e==="SIGNED_OUT"&&(this.currentUser=null)})}async setCurrentUser(e){var n;if(!e){this.currentUser=null;return}try{try{const{data:i,error:o}=await St.rpc("ensure_user_exists",{user_email:((n=e.emailAddresses[0])==null?void 0:n.emailAddress)||"",user_first_name:e.firstName||"",user_last_name:e.lastName||"",clerk_user_id:e.id});o?console.error("Error ensuring user exists:",o):console.log("✅ User ensured in database:",i)}catch(i){console.warn("RPC function ensure_user_exists not available, skipping user creation:",i)}const{data:r,error:s}=await St.from("users").select("*").eq("clerk_user_id",e.id).single();if(s){console.error("Error fetching user data:",s),this.currentUser={id:e.id,clerk_user_id:e.id};return}console.log("✅ User data fetched:",r),this.currentUser=r}catch(r){console.error("Error setting current user:",r)}}getCurrentUser(){return this.currentUser}async getUserProperties(){if(!this.currentUser)throw new Error("User not authenticated");const{data:e,error:n}=await St.from("properties").select("*").order("created_at",{ascending:!1});if(n)throw console.error("Error fetching properties:",n),n;return e||[]}async createProperty(e){if(!this.currentUser)throw new Error("User not authenticated");const{data:n,error:r}=await St.from("properties").insert([{...e,user_id:this.currentUser.id}]).select().single();if(r)throw console.error("Error creating property:",r),r;return n}async getUserCSVUploads(){if(!this.currentUser)throw new Error("User not authenticated");const{data:e,error:n}=await St.from("csv_uploads").select("*").order("upload_date",{ascending:!1});if(n)throw console.error("Error fetching CSV uploads:",n),n;return e||[]}async createCSVUpload(e){if(!this.currentUser)throw new Error("User not authenticated");const{data:n,error:r}=await St.from("csv_uploads").insert([{...e,user_id:this.currentUser.id}]).select().single();if(r)throw console.error("Error creating CSV upload:",r),r;return n}async getCSVData(e){if(!this.currentUser)throw new Error("User not authenticated");const{data:n,error:r}=await St.from("csv_data").select("*").eq("csv_upload_id",e).order("row_index",{ascending:!0});if(r)throw console.error("Error fetching CSV data:",r),r;return n||[]}async saveCSVData(e){if(!this.currentUser)throw new Error("User not authenticated");const n=e.map(i=>({...i,user_id:this.currentUser.id})),{data:r,error:s}=await St.from("csv_data").insert(n).select();if(s)throw console.error("Error saving CSV data:",s),s;return r||[]}async getUserBucketTerms(){if(!this.currentUser)throw new Error("User not authenticated");const{data:e,error:n}=await St.from("user_bucket_terms").select("*");if(n)throw console.error("Error fetching bucket terms:",n),n;const r={};return e==null||e.forEach(s=>{r[s.bucket_key]||(r[s.bucket_key]=[]),r[s.bucket_key].push(s.term)}),r}async saveUserBucketTerms(e){if(!this.currentUser)throw new Error("User not authenticated");await St.from("user_bucket_terms").delete().eq("user_id",this.currentUser.id);const n=Object.entries(e).flatMap(([r,s])=>s.map(i=>({user_id:this.currentUser.id,bucket_key:r,term:i})));if(n.length>0){const{error:r}=await St.from("user_bucket_terms").insert(n);if(r)throw console.error("Error saving bucket terms:",r),r}}async getUserCustomBuckets(){if(!this.currentUser)throw new Error("User not authenticated");const{data:e,error:n}=await St.from("user_custom_buckets").select("*");if(n)throw console.error("Error fetching custom buckets:",n),n;return e||[]}async saveUserCustomBuckets(e){if(!this.currentUser)throw new Error("User not authenticated");if(await St.from("user_custom_buckets").delete().eq("user_id",this.currentUser.id),e.length>0){const n=e.map(s=>({...s,user_id:this.currentUser.id})),{error:r}=await St.from("user_custom_buckets").insert(n);if(r)throw console.error("Error saving custom buckets:",r),r}}async createOrganization(e){if(!this.currentUser)throw new Error("User not authenticated");try{const n=Qa.encryptOrganizationData({name:e}),{data:r,error:s}=await St.from("organizations").insert([n]).select().single();if(s)throw console.error("Error creating organization:",s),s;const{error:i}=await St.from("users").update({organization_id:r.id}).eq("id",this.currentUser.id);if(i)throw console.error("Error updating user with organization:",i),i;const o=Qa.decryptOrganizationData(r);return this.currentUser.organization_id=r.id,this.currentUser.organizations=o,o}catch(n){throw console.error("Error creating organization:",n),n}}async getUserOrganization(){if(!this.currentUser)throw new Error("User not authenticated");if(this.currentUser.organization_id){const{data:e,error:n}=await St.from("organizations").select("*").eq("id",this.currentUser.organization_id).single();return n?(console.error("Error fetching organization:",n),null):Qa.decryptOrganizationData(e)}return null}hasOrganization(){return!!(this.currentUser&&this.currentUser.organization_id)}getOrganizationName(){return this.currentUser&&this.currentUser.organizations?this.currentUser.organizations.name:null}clearUser(){this.currentUser=null}}const vn=new BI;class $I{constructor(){this.logs=[],this.config={enableLogging:!0,logLevel:"standard",retentionDays:90}}logDataAccess(e,n,r){if(!this.config.enableLogging)return;const s=vn.getCurrentUser();if(!s)return;const i={userId:s.id,action:"DATA_ACCESS",resource:e,resourceId:n,details:this.sanitizeDetails(r),timestamp:new Date().toISOString(),ipAddress:this.getClientIP(),userAgent:navigator.userAgent};this.addLog(i)}logDataModification(e,n,r){if(!this.config.enableLogging)return;const s=vn.getCurrentUser();if(!s)return;const i={userId:s.id,action:"DATA_MODIFICATION",resource:e,resourceId:n,details:this.sanitizeDetails(r),timestamp:new Date().toISOString(),ipAddress:this.getClientIP(),userAgent:navigator.userAgent};this.addLog(i)}logDataDeletion(e,n,r){if(!this.config.enableLogging)return;const s=vn.getCurrentUser();if(!s)return;const i={userId:s.id,action:"DATA_DELETION",resource:e,resourceId:n,details:this.sanitizeDetails(r),timestamp:new Date().toISOString(),ipAddress:this.getClientIP(),userAgent:navigator.userAgent};this.addLog(i)}logAuthentication(e,n){if(!this.config.enableLogging)return;const r=vn.getCurrentUser();if(!r)return;const s={userId:r.id,action:`AUTH_${e.toUpperCase()}`,resource:"USER_SESSION",details:this.sanitizeDetails(n),timestamp:new Date().toISOString(),ipAddress:this.getClientIP(),userAgent:navigator.userAgent};this.addLog(s)}logEncryption(e,n,r){if(!this.config.enableLogging||this.config.logLevel==="minimal")return;const s=vn.getCurrentUser();if(!s)return;const i={userId:s.id,action:`DATA_${e}`,resource:n,resourceId:r,timestamp:new Date().toISOString(),ipAddress:this.getClientIP(),userAgent:navigator.userAgent};this.addLog(i)}getUserAuditLogs(e,n=100){return this.logs.filter(r=>r.userId===e).sort((r,s)=>new Date(s.timestamp).getTime()-new Date(r.timestamp).getTime()).slice(0,n)}getResourceAuditLogs(e,n,r=100){return this.logs.filter(s=>s.resource===e&&(!n||s.resourceId===n)).sort((s,i)=>new Date(i.timestamp).getTime()-new Date(s.timestamp).getTime()).slice(0,r)}getAllAuditLogs(e=1e3){return this.logs.sort((n,r)=>new Date(r.timestamp).getTime()-new Date(n.timestamp).getTime()).slice(0,e)}exportAuditLogs(e){const n=["Timestamp","User ID","Action","Resource","Resource ID","IP Address","User Agent"],r=e.map(s=>[s.timestamp,s.userId,s.action,s.resource,s.resourceId||"",s.ipAddress||"",s.userAgent||""]);return[n.join(","),...r.map(s=>s.join(","))].join(`
`)}cleanupOldLogs(){const e=new Date;e.setDate(e.getDate()-this.config.retentionDays),this.logs=this.logs.filter(n=>new Date(n.timestamp)>e)}addLog(e){this.logs.push(e);try{const n=JSON.parse(localStorage.getItem("auditLogs")||"[]");n.push(e);const r=n.sort((s,i)=>new Date(i.timestamp).getTime()-new Date(s.timestamp).getTime()).slice(0,1e3);localStorage.setItem("auditLogs",JSON.stringify(r))}catch(n){console.warn("Failed to store audit log:",n)}}sanitizeDetails(e){if(!e)return e;const n={...e};return["password","token","key","secret","ssn","credit_card","bank_account"].forEach(s=>{n[s]&&(n[s]="[REDACTED]")}),n}getClientIP(){return"client-side"}loadStoredLogs(){try{const e=JSON.parse(localStorage.getItem("auditLogs")||"[]");this.logs=e}catch(e){console.warn("Failed to load stored audit logs:",e),this.logs=[]}}}const Sh=new $I;Sh.loadStoredLogs();const zI="https://iqwhrvtcrseidfyznqaf.supabase.co",UI="sb_publishable_ULLJeduhFHc_KRINLLXxug_zGvRBLPf",ht=ql(zI,UI,{auth:{persistSession:!1}});async function VI(t){ht&&await ht.from("import_runs").insert(t)}async function WI(t){ht&&await ht.from("import_run_events").insert(t)}async function HI(t,e,n="text/csv"){if(!ht)return{path:t};const r={NVM_RC_VERSION:"",VSCODE_CRASH_REPORTER_PROCESS_TYPE:"extensionHost",NODE:"/usr/local/bin/node",INIT_CWD:"/Users/alexhorton/profi7vitelocalstorage/propfi7vitelocalstorage",NVM_CD_FLAGS:"-q",TERM:"dumb",SHELL:"/bin/zsh",VSCODE_PROCESS_TITLE:"extension-host  [44-98]",TMPDIR:"/var/folders/kx/6hq4rc5n1pn_11nrxz84862c0000gn/T/",npm_config_global_prefix:"/usr/local",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",MallocNanoZone:"0",CURSOR_TRACE_ID:"0b62bb52c6654bd0b73cba7aaf44a83b",COLOR:"0",NO_COLOR:"1",npm_config_noproxy:"",npm_config_local_prefix:"/Users/alexhorton/profi7vitelocalstorage/propfi7vitelocalstorage",PNPM_HOME:"/Users/alexhorton/Library/pnpm",USER:"alexhorton",NVM_DIR:"/Users/alexhorton/.nvm",COMMAND_MODE:"unix2003",npm_config_globalconfig:"/usr/local/etc/npmrc",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.XPWY3tpbXB/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x0",npm_execpath:"/usr/local/lib/node_modules/npm/bin/npm-cli.js",ELECTRON_RUN_AS_NODE:"1",PATH:"/Users/alexhorton/profi7vitelocalstorage/propfi7vitelocalstorage/node_modules/.bin:/Users/alexhorton/profi7vitelocalstorage/node_modules/.bin:/Users/alexhorton/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/usr/local/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/Users/alexhorton/.local/bin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/Users/alexhorton/Library/pnpm:/Users/alexhorton/.local/bin:~/.local/bin:~/.local/bin",npm_package_json:"/Users/alexhorton/profi7vitelocalstorage/propfi7vitelocalstorage/package.json",LaunchInstanceID:"2C40AF3C-9FE0-4514-A21A-0BC8A386C68E",npm_config_userconfig:"/Users/alexhorton/.npmrc",npm_config_init_module:"/Users/alexhorton/.npm-init.js",__CFBundleIdentifier:"com.todesktop.230313mzl4w4u92",npm_command:"run-script",PWD:"/Users/alexhorton/profi7vitelocalstorage/propfi7vitelocalstorage",VSCODE_HANDLES_UNCAUGHT_ERRORS:"true",npm_lifecycle_event:"build",EDITOR:"vi",VSCODE_ESM_ENTRYPOINT:"vs/workbench/api/node/extensionHostProcess",npm_package_name:"propfi7vite",CURSOR_AGENT:"1",npm_config_npm_version:"10.1.0",XPC_FLAGS:"0x0",FORCE_COLOR:"0",npm_config_node_gyp:"/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",npm_package_version:"1.0.0",XPC_SERVICE_NAME:"0",SHLVL:"2",HOME:"/Users/alexhorton",VSCODE_NLS_CONFIG:'{"userLocale":"en-us","osLocale":"en-us","resolvedLanguage":"en","defaultMessagesFile":"/Applications/Cursor.app/Contents/Resources/app/out/nls.messages.json","locale":"en-us","availableLanguages":{}}',npm_config_cache:"/Users/alexhorton/.npm",LOGNAME:"alexhorton",npm_lifecycle_script:"tsc && vite build",COMPOSER_NO_INTERACTION:"1",VSCODE_IPC_HOOK:"/Users/alexhorton/Library/Application Support/Cursor/1.6.-main.sock",VSCODE_CODE_CACHE_PATH:"/Users/alexhorton/Library/Application Support/Cursor/CachedData/3ccce8f55d8cca49f6d28b491a844c699b8719a0",npm_config_user_agent:"npm/10.1.0 node/v20.9.0 darwin arm64 workspaces/false",VSCODE_PID:"625",VSCODE_L10N_BUNDLE_LOCATION:"",VSCODE_CWD:"/",SECURITYSESSIONID:"186b1",npm_node_execpath:"/usr/local/bin/node",npm_config_prefix:"/usr/local",_:"/Users/alexhorton/profi7vitelocalstorage/propfi7vitelocalstorage/node_modules/.bin/vite",NODE_ENV:"production"}.SUPABASE_UPLOADS_BUCKET||"uploads";return await ht.storage.from(r).upload(t,e,{upsert:!0,contentType:n}),{path:t}}async function ux(t,e){var n;if(!ht)return console.error("Supabase not available - cannot save data"),null;try{const r=Qa.encryptCSVData(t),s=e?{...r,user_id:e}:r,{data:i,error:o}=await ht.from("csv_data").insert([s]).select();return o?(console.error("Error saving CSV data to Supabase:",o),null):(Sh.logDataModification("CSV_DATA",(n=i[0])==null?void 0:n.id,{fileName:t.file_name,fileType:t.file_type,recordCount:t.total_records}),console.log("CSV data saved to Supabase (encrypted)"),i[0])}catch(r){return console.error("Error saving CSV data:",r),null}}async function Kr(t){if(!ht)return console.error("Supabase not available - cannot load data"),[];try{let e=ht.from("csv_data").select("*").order("uploaded_at",{ascending:!1});t&&(e=e.eq("user_id",t));const{data:n,error:r}=await e;if(r)return console.error("Error fetching CSV data from Supabase:",r),[];const s=(n||[]).map(i=>Qa.decryptCSVData(i));return Sh.logDataAccess("CSV_DATA",void 0,{recordCount:s.length,userId:t}),console.log("CSV data fetched from Supabase (decrypted):",s.length,"records"),s}catch(e){return console.error("Error fetching CSV data:",e),[]}}async function xC(t,e){if(!ht)return console.error("Supabase not available - cannot delete data"),null;try{let n=ht.from("csv_data").delete().eq("id",t);e&&(n=n.eq("user_id",e));const{error:r}=await n;return r?(console.error("Error deleting CSV data from Supabase:",r),null):(Sh.logDataDeletion("CSV_DATA",t,{userId:e}),console.log("CSV data deleted from Supabase:",t),!0)}catch(n){return console.error("Error deleting CSV data:",n),null}}async function Cm(t,e,n,r){if(!ht)return console.error("Supabase not available - cannot save AI learning"),null;try{const s={file_type:t,account_name:e,user_category:n,confidence_score:1,usage_count:1,updated_at:new Date().toISOString(),...r&&{user_id:r}},{error:i}=await ht.from("ai_learning").upsert(s,{onConflict:r?"file_type,account_name,user_id":"file_type,account_name"});return i?(console.error("Error saving AI learning:",i),null):(console.log("✅ AI learning saved:",{fileType:t,accountName:e,userCategory:n,userId:r}),!0)}catch(s){return console.error("Error saving AI learning:",s),null}}async function Pu(t,e){if(!ht)return console.error("Supabase not available - cannot get AI learning"),{};try{let n=ht.from("ai_learning").select("account_name, user_category, confidence_score, usage_count").eq("file_type",t);e&&(n=n.eq("user_id",e));const{data:r,error:s}=await n;if(s)return console.error("Error getting AI learning:",s),{};const i={};return r==null||r.forEach(o=>{i[o.account_name]=o.user_category}),console.log("✅ AI learning loaded for",t,":",Object.keys(i).length,"items"),i}catch(n){return console.error("Error getting AI learning:",n),{}}}async function qI(t,e,n){if(!ht)return console.error("Supabase not available - cannot update AI learning usage"),null;try{let r=ht.from("ai_learning").select("usage_count").eq("file_type",t).eq("account_name",e);n&&(r=r.eq("user_id",n));const{data:s,error:i}=await r.single();if(i)return console.error("Error fetching current usage count:",i),null;let o=ht.from("ai_learning").update({usage_count:((s==null?void 0:s.usage_count)||0)+1,updated_at:new Date().toISOString()}).eq("file_type",t).eq("account_name",e);n&&(o=o.eq("user_id",n));const{error:l}=await o;return l?(console.error("Error updating AI learning usage:",l),null):(console.log("✅ AI learning usage updated"),!0)}catch(r){return console.error("Error updating AI learning usage:",r),null}}async function yC(t){if(!ht)return console.error("Supabase not available - cannot migrate data"),{success:!1,error:"Supabase not available"};try{console.log("🔄 Starting localStorage to Supabase migration...");const e=JSON.parse(localStorage.getItem("savedCSVs")||"[]");if(console.log("📱 Found",e.length,"CSVs in localStorage"),e.length===0)return console.log("✅ No localStorage data to migrate"),{success:!0,migrated:0};let n=0,r=0;for(const s of e)try{const i={file_name:s.fileName,file_type:s.fileType,uploaded_at:s.uploadedAt,total_records:s.totalRecords,account_categories:s.accountCategories,bucket_assignments:s.bucketAssignments,is_active:s.isActive,preview_data:s.previewData,user_id:t};await ux(i,t)?(n++,console.log(`✅ Migrated: ${s.fileName}`)):(r++,console.error(`❌ Failed to migrate: ${s.fileName}`))}catch(i){r++,console.error(`❌ Error migrating ${s.fileName}:`,i)}return n>0&&(localStorage.removeItem("savedCSVs"),console.log("🗑️ Cleared localStorage after migration")),console.log(`🎉 Migration complete: ${n} migrated, ${r} errors`),{success:!0,migrated:n,errors:r,total:e.length}}catch(e){return console.error("Migration failed:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}const Yw=Object.freeze(Object.defineProperty({__proto__:null,deleteCSVData:xC,getAILearning:Pu,getCSVData:Kr,logImportEvent:WI,logImportRun:VI,migrateLocalStorageToSupabase:yC,saveAILearning:Cm,saveCSVData:ux,supabase:ht,updateAILearningUsage:qI,uploadRawCSV:HI},Symbol.toStringTag,{value:"Module"})),Du={income_item:{id:"income_item",name:"Income Item",label:"Income Item",description:"Individual income line items (rent, fees, etc.)",category:"income",color:"bg-green-100 text-green-800",icon:"💰",emoji:"💰",calculation:"Sum of individual income accounts"},income_total:{id:"income_total",name:"Income Total",label:"Income Total",description:"Total income calculations and summaries",category:"income",color:"bg-green-100 text-green-800",icon:"📈",emoji:"📈",calculation:"Sum of all income accounts"},rental_income:{id:"rental_income",name:"Rental Income",label:"Rental Income",description:"Primary rental revenue from tenants",category:"income",color:"bg-green-100 text-green-800",icon:"🏠",emoji:"🏠",calculation:"Sum of rental income accounts"},other_income:{id:"other_income",name:"Other Income",label:"Other Income",description:"Additional income sources (fees, late charges, etc.)",category:"income",color:"bg-green-100 text-green-800",icon:"💵",emoji:"💵",calculation:"Sum of other income accounts"},total_income:{id:"total_income",name:"Total Income",label:"Total Income",description:"Sum of all income sources",category:"income",color:"bg-green-100 text-green-800",icon:"📊",emoji:"📊",calculation:"Sum of all income accounts"},total_operating_income:{id:"total_operating_income",name:"Total Operating Income",label:"Operating Income",description:"Total operating revenue",category:"income",color:"bg-emerald-100 text-emerald-800",icon:"📈",emoji:"📈",calculation:"Sum of operating income accounts"},expense_item:{id:"expense_item",name:"Expense Item",label:"Expense Item",description:"Individual expense line items (maintenance, utilities, etc.)",category:"expense",color:"bg-red-100 text-red-800",icon:"💸",emoji:"💸",calculation:"Sum of individual expense accounts"},expense_total:{id:"expense_total",name:"Expense Total",label:"Expense Total",description:"Total expense calculations and summaries",category:"expense",color:"bg-red-100 text-red-800",icon:"📉",emoji:"📉",calculation:"Sum of all expense accounts"},operating_expenses:{id:"operating_expenses",name:"Operating Expenses",label:"Operating Expenses",description:"Property operating costs",category:"expense",color:"bg-orange-100 text-orange-800",icon:"🔧",emoji:"🔧",calculation:"Sum of operating expense accounts"},maintenance_cost:{id:"maintenance_cost",name:"Maintenance Cost",label:"Maintenance",description:"Property maintenance and repair costs",category:"expense",color:"bg-yellow-100 text-yellow-800",icon:"🔨",emoji:"🔨",calculation:"Sum of maintenance accounts"},utilities_cost:{id:"utilities_cost",name:"Utilities Cost",label:"Utilities",description:"Utility costs (water, electric, gas, etc.)",category:"expense",color:"bg-blue-100 text-blue-800",icon:"⚡",emoji:"⚡",calculation:"Sum of utility accounts"},insurance_cost:{id:"insurance_cost",name:"Insurance Cost",label:"Insurance",description:"Property insurance costs",category:"expense",color:"bg-purple-100 text-purple-800",icon:"🛡️",emoji:"🛡️",calculation:"Sum of insurance accounts"},property_tax:{id:"property_tax",name:"Property Tax",label:"Property Tax",description:"Property tax expenses",category:"expense",color:"bg-indigo-100 text-indigo-800",icon:"🏛️",emoji:"🏛️",calculation:"Sum of property tax accounts"},cash_amount:{id:"cash_amount",name:"Cash Amount",label:"Cash Amount",description:"Cash and cash equivalents",category:"cash",color:"bg-purple-100 text-purple-800",icon:"💳",emoji:"💳",calculation:"Sum of cash accounts"},occupancy_rate:{id:"occupancy_rate",name:"Occupancy Rate",label:"Occupancy Rate",description:"Percentage of occupied units",category:"metric",color:"bg-blue-100 text-blue-800",icon:"🏠",emoji:"🏠",calculation:"Occupied Units / Total Units * 100"},net_operating_income:{id:"net_operating_income",name:"Net Operating Income",label:"Net Operating Income",description:"NOI - Net Operating Income",category:"metric",color:"bg-emerald-100 text-emerald-800",icon:"💎",emoji:"💎",calculation:"Total Operating Income - Total Operating Expenses"},net_income:{id:"net_income",name:"Net Income",label:"Net Income",description:"Total net income",category:"metric",color:"bg-green-100 text-green-800",icon:"💰",emoji:"💰",calculation:"Total Income - Total Expenses"}},dx=t=>Du[t],Xw=t=>{const e=dx(t);return(e==null?void 0:e.emoji)||"📊"},ni=t=>{const e=dx(t);return(e==null?void 0:e.color)||"bg-gray-100 text-gray-800"},KI=({bucketId:t,size:e="md",showLabel:n=!1,showDescription:r=!1,className:s=""})=>{const i=dx(t);if(!i)return a.jsxs("div",{className:`flex items-center space-x-2 ${s}`,children:[a.jsx("span",{className:"text-gray-400",children:"📊"}),n&&a.jsx("span",{className:"text-sm text-gray-500",children:"Unknown Bucket"})]});const o={sm:"text-sm",md:"text-base",lg:"text-lg"},l={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"};return a.jsxs("div",{className:`flex items-center space-x-2 ${s}`,children:[a.jsx("div",{className:`${l[e]} flex items-center justify-center`,children:a.jsx("span",{className:o[e],children:i.emoji})}),n&&a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:`text-sm font-medium ${i.color.split(" ")[1]}`,children:i.label}),r&&a.jsx("span",{className:"text-xs text-gray-500",children:i.description})]})]})},hx=({chartId:t,chartName:e,className:n=""})=>{const{getChartBuckets:r,getPrimaryBucket:s}=require("../types/bucketTypes"),i=r(t),o=s(t);return a.jsxs("div",{className:`flex items-center justify-between mb-4 ${n}`,children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e}),a.jsx("div",{className:"flex items-center space-x-2",children:i.map(l=>a.jsx(KI,{bucketId:l,size:"sm",showLabel:!0,className:l===o?"ring-2 ring-blue-500 ring-opacity-50":""},l))})]})};Ri.register($o,zo,vi,er,ph,mh,fh,hh);const GI=({properties:t})=>{const[e,n]=S.useState([]),[r,s]=S.useState(!0),[i,o]=S.useState("all"),[l]=S.useState("revenue"),c=p=>{const x=[];return p.forEach(m=>{const v=m.file_name||m.fileName,y=m.file_type||m.fileType,g=m.account_categories||m.accountCategories,b=m.preview_data||m.previewData;console.log(`📊 Processing CSV: ${v} (${y}) for chart data`),y==="cash_flow"?(console.log("💰 Processing CASH FLOW CSV for key metrics chart..."),[{name:"Total Income",type:"income"},{name:"Total Expense",type:"expense"},{name:"Net Operating Income",type:"net_income"}].forEach(C=>{const N=b.find(j=>{var k;return(((k=j.account_name)==null?void 0:k.trim().toLowerCase())||"").includes(C.name.toLowerCase())});N&&N.time_series&&(console.log(`🎯 Found key metric for chart: ${N.account_name}`),Object.entries(N.time_series).forEach(([j,w])=>{if(!(j.toLowerCase()==="total"||j.toLowerCase()==="sum"||j.toLowerCase()==="grand total")&&typeof w=="number"){let k=x.find(E=>E.date===j);k||(k={id:`${m.id}-${j}`,date:j,month:j,revenue:"0",occupancy_rate:"0",property_name:"Chico"},x.push(k)),C.type==="income"?k.revenue=w.toString():C.type==="expense"?k.revenue=(-w).toString():C.type==="net_income"&&(k.revenue=w.toString())}}))})):Object.entries(g).forEach(([_,C])=>{const N=Array.isArray(b)?b.find(j=>{var w;return((w=j.account_name)==null?void 0:w.trim())===_}):null;N&&N.time_series&&C==="income"&&Object.entries(N.time_series).forEach(([j,w])=>{if(!(j.toLowerCase()==="total"||j.toLowerCase()==="sum"||j.toLowerCase()==="grand total")&&typeof w=="number"&&w>0){let k=x.find(P=>P.date===j);k||(k={id:`${m.id}-${j}`,date:j,month:j,revenue:"0",occupancy_rate:"0",property_name:"Chico"},x.push(k));const E=parseFloat(k.revenue)||0;k.revenue=(E+w).toString()}})})}),x.sort((m,v)=>new Date(m.date).getTime()-new Date(v.date).getTime()),console.log("📈 Processed chart data:",x),x},u=S.useCallback(async()=>{try{if(s(!0),console.log("Loading chart data from ACTIVE CSVs only:",t),t.length>0){const p=t[0];console.log("Chico property:",p);let x=null;try{const m=await Kr();if(console.log("📊 Using Supabase data for chart:",m.length,"active CSVs"),console.log("📊 Active CSVs for chart data:",m.length),m.length>0){const v=c(m);console.log("📈 CSV chart data processed:",v),v&&v.length>0&&(x=v)}if(!x||x.length===0){console.log("📊 No active CSV data found, setting empty chart"),n([]),s(!1);return}n(x),s(!1)}catch(m){console.error("Error processing CSV chart data:",m),n([]),s(!1)}}else console.log("📊 No properties available for chart data"),n([]),s(!1)}catch(p){console.error("Error loading chart data:",p),n([]),s(!1)}},[t]);S.useEffect(()=>{t.length>0&&u()},[t,u]),S.useEffect(()=>{const p=()=>{console.log("🔄 RevenueChart received data update event"),u()};return window.addEventListener("dataUpdated",p),()=>window.removeEventListener("dataUpdated",p)},[u]);const d=i==="all"?e:e.filter(p=>p.property_name===i),h={labels:d.map(p=>p.month||p.date),datasets:[{label:l==="revenue"?"Revenue":"Occupancy Rate",data:d.map(p=>parseFloat(l==="revenue"?p.revenue:p.occupancy_rate)),borderColor:l==="revenue"?"#0EA5E9":"#10B981",backgroundColor:l==="revenue"?"rgba(14, 165, 233, 0.1)":"rgba(16, 185, 129, 0.1)",borderWidth:2,fill:!0,tension:.4,pointBackgroundColor:l==="revenue"?"#0EA5E9":"#10B981",pointBorderColor:"#fff",pointBorderWidth:2,pointRadius:4,pointHoverRadius:6}]},f={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",borderColor:l==="revenue"?"rgba(14, 165, 233, 0.5)":"rgba(16, 185, 129, 0.5)",borderWidth:1,cornerRadius:8,displayColors:!1,callbacks:{label:function(p){return l==="revenue"?`Revenue: $${p.parsed.y.toLocaleString()}`:`Occupancy: ${p.parsed.y.toFixed(1)}%`}}}},scales:{x:{grid:{display:!1},ticks:{color:"#6B7280",font:{size:12}}},y:{grid:{color:"rgba(107, 114, 128, 0.1)"},ticks:{color:"#6B7280",font:{size:12},callback:function(p){return l==="revenue"?"$"+p/1e3+"k":p.toFixed(1)+"%"}}}},interaction:{intersect:!1,mode:"index"}};return r?a.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}):a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[a.jsx(hx,{chartId:"revenue-chart",chartName:l==="revenue"?"Revenue Trend":"Occupancy Rate",className:"mb-4"}),a.jsx("div",{className:"flex items-center justify-end mb-4",children:a.jsxs("select",{value:i,onChange:p=>o(p.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"all",children:"All Properties"}),t.map(p=>a.jsx("option",{value:p.name,children:p.name},p.id))]})}),a.jsx("div",{className:"h-64",children:a.jsx(xh,{data:h,options:f})})]})};Ri.register($o,zo,vi,er,ph,mh,fh,hh);const YI=({properties:t})=>{const[e,n]=S.useState([]),[r,s]=S.useState(!0),[i,o]=S.useState("all"),l=f=>{const p=[];return f.forEach(x=>{console.log(`📊 Processing CSV: ${x.fileName} for occupancy chart data`);const m=95;["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].forEach((y,g)=>{p.push({id:`${x.id}-${y}`,date:`2024-${String(g+1).padStart(2,"0")}-01`,month:`${y} 2024`,revenue:"0",occupancy_rate:m.toString(),property_name:"Chico",total_units:26,occupied_units:Math.round(26*(m/100))})})}),console.log("📈 Processed occupancy chart data:",p),p},c=S.useCallback(async()=>{try{if(s(!0),console.log("Loading occupancy chart data from ACTIVE CSVs only:",t),t.length>0){const f=t[0];console.log("Chico property:",f);let p=null;try{const x=await Kr();if(console.log("📊 Active CSVs for occupancy chart data:",x.length),x.length>0){const m=l(x);console.log("📈 CSV occupancy chart data processed:",m),m&&m.length>0&&(p=m)}if(!p||p.length===0){console.log("📊 No active CSV data found, setting empty occupancy chart"),n([]),s(!1);return}n(p),s(!1)}catch(x){console.error("Error processing CSV occupancy chart data:",x),n([]),s(!1)}}else console.log("📊 No properties available for occupancy chart data"),n([]),s(!1)}catch(f){console.error("Error loading occupancy chart data:",f),n([]),s(!1)}},[t]);S.useEffect(()=>{t.length>0&&c()},[t,c]),S.useEffect(()=>{const f=()=>{console.log("🔄 OccupancyChart received data update event"),c()};return window.addEventListener("dataUpdated",f),()=>window.removeEventListener("dataUpdated",f)},[c]);const u=i==="all"?e:e.filter(f=>f.property_name===i),d={labels:u.map(f=>f.month||f.date),datasets:[{label:"Occupancy Rate",data:u.map(f=>parseFloat(f.occupancy_rate)),borderColor:"#10B981",backgroundColor:"rgba(16, 185, 129, 0.1)",borderWidth:2,fill:!0,tension:.4,pointBackgroundColor:"#10B981",pointBorderColor:"#fff",pointBorderWidth:2,pointRadius:4,pointHoverRadius:6}]},h={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",borderColor:"rgba(16, 185, 129, 0.5)",borderWidth:1,cornerRadius:8,displayColors:!1,callbacks:{label:function(f){return`Occupancy: ${f.parsed.y.toFixed(1)}%`}}}},scales:{x:{grid:{display:!1},ticks:{color:"#6B7280",font:{size:12}}},y:{grid:{color:"rgba(107, 114, 128, 0.1)"},ticks:{color:"#6B7280",font:{size:12},callback:function(f){return f.toFixed(1)+"%"}}}},interaction:{intersect:!1,mode:"index"}};return r?a.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"})})}):a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[a.jsx(hx,{chartId:"occupancy-chart",chartName:"Occupancy Rate",className:"mb-4"}),a.jsx("div",{className:"flex items-center justify-end mb-4",children:a.jsxs("select",{value:i,onChange:f=>o(f.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-green-500",children:[a.jsx("option",{value:"all",children:"All Properties"}),t.map(f=>a.jsx("option",{value:f.name,children:f.name},f.id))]})}),a.jsx("div",{className:"h-64",children:a.jsx(xh,{data:d,options:h})})]})};Ri.register($o,zo,vi,er,ph,mh,fh,hh);const XI=({properties:t=[]})=>{const[e,n]=S.useState(["total_income","total_expense","net_operating_income"]),[r,s]=S.useState(!1),[i,o]=S.useState([]),[l,c]=S.useState(!0),u=(m,v)=>{const y=m.toLowerCase();switch(v){case"total_income":return y.includes("income")||y.includes("revenue")||y.includes("rent")||y.includes("rental")||y.includes("lease")||y.includes("gross")||y.includes("total operating income")||y.includes("monthly revenue");case"total_expense":return y.includes("expense")||y.includes("cost")||y.includes("maintenance")||y.includes("utilities")||y.includes("insurance")||y.includes("tax")||y.includes("operating expense")||y.includes("total operating expense");case"net_operating_income":return y.includes("net")||y.includes("operating")||y.includes("noi")||y.includes("net operating income");case"maintenance_cost":return y.includes("maintenance")||y.includes("repair")||y.includes("repairs");case"utilities_cost":return y.includes("utilities")||y.includes("electric")||y.includes("water")||y.includes("gas")||y.includes("power")||y.includes("sewer");case"insurance_cost":return y.includes("insurance")||y.includes("liability")||y.includes("property insurance");case"property_tax":return y.includes("tax")||y.includes("property")||y.includes("property tax");default:return!1}};S.useEffect(()=>{(async()=>{try{console.log("📊 Multi-Bucket Chart: Starting data load...");const v=vn.getCurrentUser(),y=v==null?void 0:v.id;console.log("📊 Multi-Bucket Chart: Current user:",v);const g=await Kr(y);console.log("📊 Multi-Bucket Chart: Supabase data:",g),console.log("📊 Multi-Bucket Chart: Final data:",g),console.log("📊 Multi-Bucket Chart: Data structure sample:",g[0]),o(g||[])}catch(v){console.error("Error loading CSV data:",v),o([])}finally{c(!1)}})()},[]);const d=S.useMemo(()=>{if(console.log("📊 Multi-Bucket Chart: Processing chart data with",i.length,"CSV files"),!i.length)return console.log("📊 Multi-Bucket Chart: No CSV data available"),{labels:[],datasets:[]};const m=new Set;i.forEach((g,b)=>{console.log(`📊 Multi-Bucket Chart: Processing CSV ${b}:`,g.file_name||g.fileName),g.preview_data&&Array.isArray(g.preview_data)?g.preview_data.forEach((_,C)=>{_.time_series?(console.log(`📊 Multi-Bucket Chart: Row ${C} has time_series:`,Object.keys(_.time_series)),Object.keys(_.time_series).forEach(N=>{N.toLowerCase()!=="total"&&N.toLowerCase()!=="sum"&&N.toLowerCase()!=="grand total"&&m.add(N)})):console.log(`📊 Multi-Bucket Chart: Row ${C} missing time_series:`,_)}):console.log(`📊 Multi-Bucket Chart: CSV ${b} has non-array preview_data:`,typeof g.preview_data)});const v=Array.from(m).sort();if(console.log("📊 Multi-Bucket Chart: Found months:",v),v.length===0)return console.log("📊 Multi-Bucket Chart: No valid time series data found, returning empty chart"),{labels:[],datasets:[]};const y=e.map(g=>{const b=Du[g];if(!b)return console.log(`📊 Multi-Bucket Chart: Bucket ${g} not found in definitions`),null;console.log(`📊 Multi-Bucket Chart: Processing bucket ${b.label} (${g})`);const _=[];return v.forEach(C=>{let N=0;i.forEach(j=>{j.preview_data&&Array.isArray(j.preview_data)&&j.preview_data.forEach(w=>{if(w.time_series&&w.time_series[C]){const k=w.account_name||w.accountName||"",E=parseFloat(w.time_series[C])||0;u(k,g)&&(console.log(`📊 Multi-Bucket Chart: Match found - ${k} (${E}) for ${b.label} in ${C}`),N+=E)}})}),_.push(N)}),console.log(`📊 Multi-Bucket Chart: ${b.label} data:`,_),{label:b.label,data:_,borderColor:ni(g).includes("green")?"#10B981":ni(g).includes("red")?"#EF4444":ni(g).includes("blue")?"#3B82F6":"#6B7280",backgroundColor:ni(g).includes("green")?"#10B98120":ni(g).includes("red")?"#EF444420":ni(g).includes("blue")?"#3B82F620":"#6B728020",fill:!1,tension:.1,pointRadius:4,pointHoverRadius:6}}).filter(g=>g!==null);return{labels:v,datasets:y}},[i,e]),h=Object.entries(Du).filter(([m])=>!e.includes(m)).map(([m,v])=>({id:m,label:v.label,icon:Xw(m),color:ni(m)})),f=m=>{n(v=>[...v,m]),s(!1)},p=m=>{n(v=>v.filter(y=>y!==m))},x={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:20}},title:{display:!1},tooltip:{mode:"index",intersect:!1,callbacks:{label:function(m){const v=m.dataset.label||"",y=m.parsed.y;return`${v}: $${y.toLocaleString()}`}}}},scales:{x:{display:!0,title:{display:!0,text:"Month"}},y:{display:!0,title:{display:!0,text:"Amount ($)"},ticks:{callback:function(m){return"$"+m.toLocaleString()}}}},interaction:{mode:"nearest",axis:"x",intersect:!1}};return l?a.jsx("div",{className:"card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),a.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})})}):a.jsx("div",{className:"card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Multi-Bucket Analysis"}),a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>s(!r),className:"flex items-center space-x-2 px-3 py-2 bg-blue-50 hover:bg-blue-100 text-blue-700 rounded-lg border border-blue-200 transition-colors",children:[a.jsx(rh,{className:"w-4 h-4"}),a.jsx("span",{children:"Add Bucket"}),a.jsx(Lg,{className:"w-4 h-4"})]}),r&&a.jsx("div",{className:"absolute right-0 mt-2 w-64 bg-white dark:bg-gray-700 rounded-lg shadow-lg border border-gray-200 dark:border-gray-600 z-10",children:a.jsx("div",{className:"p-2",children:h.length>0?h.map(m=>a.jsxs("button",{onClick:()=>f(m.id),className:"w-full flex items-center space-x-3 px-3 py-2 text-left hover:bg-gray-100 dark:hover:bg-gray-600 rounded-md transition-colors",children:[a.jsx("span",{className:"text-lg",children:m.icon}),a.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:m.label})]},m.id)):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 dark:text-gray-400",children:"All buckets selected"})})})]})]}),a.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:e.map(m=>{const v=Du[m];return v?a.jsxs("div",{className:"flex items-center space-x-2 px-3 py-2 bg-gray-100 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[a.jsx("span",{className:"text-lg",children:Xw(m)}),a.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:v.label}),a.jsx("button",{onClick:()=>p(m),className:"text-gray-400 hover:text-red-500 transition-colors",children:a.jsx(Yo,{className:"w-4 h-4"})})]},m):null})}),a.jsx("div",{className:"h-96",children:d.datasets.length>0?a.jsx(xh,{data:d,options:x}):a.jsx("div",{className:"h-full flex items-center justify-center text-gray-500 dark:text-gray-400",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-4xl mb-2",children:"📊"}),a.jsx("p",{children:"No data available for selected buckets"}),a.jsx("p",{className:"text-sm mt-1",children:"Upload CSV data to see your financial trends"})]})})})]})})},JI="https://iqwhrvtcrseidfyznqaf.supabase.co",QI="sb_publishable_ULLJeduhFHc_KRINLLXxug_zGvRBLPf",Gn=ql(JI,QI);class ZI{async getProperties(){try{const{data:e,error:n}=await Gn.from("properties").select("*").order("created_at",{ascending:!1});if(n)throw n;return{success:!0,data:e||[]}}catch(e){return console.error("Supabase getProperties error:",e),{success:!1,error:e.message}}}async getPropertyData(e){try{const{data:n,error:r}=await Gn.from("property_data").select("*").eq("property_id",e).order("Date",{ascending:!0});if(r)throw r;return{success:!0,data:n||[]}}catch(n){return console.error("Supabase getPropertyData error:",n),{success:!1,error:n.message}}}async getPropertiesWithData(){try{const{data:e,error:n}=await Gn.from("properties").select(`
          *,
          property_data (*)
        `).order("created_at",{ascending:!1});if(n)throw n;return{success:!0,data:e||[]}}catch(e){return console.error("Supabase getPropertiesWithData error:",e),{success:!1,error:e.message}}}async getFinancialSummary(e,n){try{let r=Gn.from("property_data").select("*");e&&(r=r.gte("Date",e)),n&&(r=r.lte("Date",n));const{data:s,error:i}=await r.order("Date",{ascending:!0});if(i)throw i;return{success:!0,data:{totalRevenue:(s==null?void 0:s.reduce((l,c)=>l+(parseFloat(c["Monthly Revenue"])||0),0))||0,totalExpenses:(s==null?void 0:s.reduce((l,c)=>l+(parseFloat(c["Maintenance Cost"])||0)+(parseFloat(c["Utilities Cost"])||0)+(parseFloat(c["Insurance Cost"])||0)+(parseFloat(c["Property Tax"])||0)+(parseFloat(c["Other Expenses"])||0),0))||0,totalNetIncome:(s==null?void 0:s.reduce((l,c)=>l+(parseFloat(c["Net Income"])||0),0))||0,avgOccupancy:(s==null?void 0:s.reduce((l,c)=>l+(parseFloat(c["Occupancy Rate"])||0),0))/((s==null?void 0:s.length)||1)||0,recordCount:(s==null?void 0:s.length)||0}}}catch(r){return console.error("Supabase getFinancialSummary error:",r),{success:!1,error:r.message}}}}const nu=new ZI,eM={}.VITE_SUPABASE_API_URL||"http://localhost:5003/api",D0={}.VITE_LOCAL_API_URL||"http://localhost:5003/api",Gi="http://localhost:5000/api";class tM{async request(e,n={}){const r=`${Gi}${e}`,s={headers:{"Content-Type":"application/json",...n.headers},...n};try{if(Gi.includes("localhost:5000")||Gi.includes("localhost:5001")||Gi.includes("localhost:5002"))throw console.warn("Backend server not available, skipping API call to:",e),new Error("Backend server not available - using Supabase directly");const i=new AbortController,o=setTimeout(()=>i.abort(),1e4),l=await fetch(r,{...s,signal:i.signal});if(clearTimeout(o),!l.ok){const c=await l.json().catch(()=>({error:"Network error"}));throw new Error(c.error||`HTTP ${l.status}`)}return await l.json()}catch(i){throw console.error("API request failed:",i),i.name==="AbortError"?new Error("Request timeout - server may be unavailable"):i.message.includes("fetch")?new Error("Network error - unable to connect to server"):(i.message.includes("Backend server not available"),i)}}async getProperties(){try{return await this.request("/properties")}catch{return console.log("🔄 Backend unavailable, using Supabase directly"),await nu.getProperties()}}async getProperty(e){return this.request(`/properties/${e}`)}async getPropertiesWithData(){try{return await this.request("/properties-with-data")}catch{return console.log("🔄 Backend unavailable, using Supabase directly"),await nu.getPropertiesWithData()}}async getFinancialSummary(e,n){try{const r=new URLSearchParams;e&&r.append("startDate",e),n&&r.append("endDate",n);const s=r.toString();return await this.request(`/financial-summary${s?`?${s}`:""}`)}catch{return console.log("🔄 Backend unavailable, using Supabase directly"),await nu.getFinancialSummary(e,n)}}async getPropertyData(e,n=1,r=50){try{return await this.request(`/properties/${e}/data?page=${n}&limit=${r}`)}catch{return console.log("🔄 Backend unavailable, using Supabase directly"),await nu.getPropertyData(e)}}async getPropertyAggregated(e,n,r){const s=new URLSearchParams;n&&s.append("startDate",n),r&&s.append("endDate",r);const i=s.toString();return this.request(`/properties/${e}/aggregated${i?`?${i}`:""}`)}async uploadCSV(e,n){const r=new FormData;r.append("csvFile",e),r.append("propertyId",n);const s=`${Gi}/upload-csv`;try{const i=await fetch(s,{method:"POST",body:r});if(!i.ok){const o=await i.json().catch(()=>({error:"Network error"}));throw new Error(o.error||`HTTP ${i.status}`)}return await i.json()}catch(i){throw console.error("CSV upload failed:",i),i}}async processCSVLocal(e,n){const r=new FormData;r.append("file",e),n&&r.append("propertyName",n);const s=`${D0}/api/process-csv-local`;try{const i=await fetch(s,{method:"POST",body:r});if(!i.ok){const o=await i.json().catch(()=>({error:"Network error"}));throw new Error(o.error||`HTTP ${i.status}`)}return await i.json()}catch(i){throw console.error("Local CSV processing failed:",i),i}}async saveLocalData(e,n,r){const s=`${D0}/save-processed-data`;try{const i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:e,propertyName:n,source:r,timestamp:new Date().toISOString()})});if(!i.ok){const o=await i.json().catch(()=>({error:"Network error"}));throw new Error(o.error||`HTTP ${i.status}`)}return await i.json()}catch(i){throw console.error("Save data failed:",i),i}}async checkBackendStatus(){const e={supabase:!1,local:!1};try{const n=await fetch(`${eM}/health`,{method:"GET",signal:AbortSignal.timeout(2e3)});e.supabase=n.ok}catch{console.log("Supabase backend not available")}try{const n=await fetch(`${D0}/processed-data`,{method:"GET",signal:AbortSignal.timeout(2e3)});e.local=n.ok}catch{console.log("Local backend not available")}return e}async validateCSV(e,n){const r=new FormData;r.append("csvFile",e),n&&r.append("propertyName",n);const s=`${Gi}/validate-csv`;try{const i=await fetch(s,{method:"POST",body:r});if(!i.ok){const o=await i.json().catch(()=>({error:"Network error"}));throw new Error(o.error||`HTTP ${i.status}`)}return await i.json()}catch(i){throw console.error("CSV validation failed:",i),i}}async getChartData(e,n,r){const s=new URLSearchParams;e&&s.append("propertyId",e),n&&s.append("startDate",n),r&&s.append("endDate",r);const i=s.toString();return this.request(`/chart-data${i?`?${i}`:""}`)}async getMonthlyData(e){const n=new URLSearchParams;e&&n.append("propertyId",e);const r=n.toString();return this.request(`/monthly-data${r?`?${r}`:""}`)}async getUploadHistory(e){const n=new URLSearchParams;e&&n.append("propertyId",e);const r=n.toString();return this.request(`/upload-history${r?`?${r}`:""}`)}async addProperty(e){return this.request("/properties",{method:"POST",body:JSON.stringify(e)})}async updateProperty(e,n){return this.request(`/properties/${e}`,{method:"PUT",body:JSON.stringify(n)})}async deleteProperty(e){return this.request(`/properties/${e}`,{method:"DELETE"})}async deleteUpload(e){return this.request(`/uploads/${e}`,{method:"DELETE"})}async deletePropertyDataByUpload(e){return this.request(`/uploads/${e}/data`,{method:"DELETE"})}async reprocessUpload(e){return this.request(`/uploads/${e}/reprocess`,{method:"POST"})}async getHealth(){return this.request("/health")}}const fn=new tM;class nM{constructor(){this.properties=new Map,this.propertyData=new Map,this.lastSync=null}async initialize(){try{await this.loadFromLocalStorage(),await this.syncWithSupabase(),await this.loadPropertyDataFromSupabase(),console.log("🏢 Unified Property Service initialized:",{propertiesCount:this.properties.size,lastSync:this.lastSync})}catch(e){console.error("Failed to initialize unified property service:",e)}}getAllProperties(){return Array.from(this.properties.values()).sort((e,n)=>e.name.localeCompare(n.name))}getProperty(e){return this.properties.get(e)}getPropertyByName(e){return Array.from(this.properties.values()).find(n=>n.name.toLowerCase()===e.toLowerCase())}async addProperty(e){const n=this.getPropertyByName(e.name);if(n){const r={...n,...e,updatedAt:new Date().toISOString(),source:"unified"};return this.properties.set(n.id,r),await this.saveToLocalStorage(),console.log("🔄 Updated existing property:",r.name),r}else{const r={id:this.generateId(),...e,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),source:"unified"};return this.properties.set(r.id,r),await this.saveToLocalStorage(),console.log("✅ Created new property:",r.name),r}}async addPropertyData(e){const n=e.propertyId;this.propertyData.has(n)||this.propertyData.set(n,[]);const r={...e,id:this.generateId(),timestamp:new Date().toISOString()},s=this.propertyData.get(n);s.some(o=>o.date===r.date&&o.accountName===r.accountName&&o.month===r.month)?console.log("⚠️ Duplicate data skipped:",{property:e.propertyName,account:e.accountName,month:e.month}):(s.push(r),await this.saveToLocalStorage(),console.log("📊 Added property data:",{property:e.propertyName,account:e.accountName,month:e.month,amount:e.amount}))}getPropertyData(e){return this.propertyData.get(e)||[]}getAllPropertyData(){const e=[],n=Array.from(this.propertyData.values());for(const r of n)e.push(...r);return e}async syncWithSupabase(){try{const e=await fn.getProperties();if(e.success&&e.data){for(const n of e.data)if(!this.getPropertyByName(n.name)){const s={...n,source:"supabase"};this.properties.set(n.id,s)}this.lastSync=new Date,await this.saveToLocalStorage(),console.log("🔄 Synced with Supabase backend")}}catch{console.log("⚠️ Supabase sync failed (backend may be unavailable)")}}async loadPropertyDataFromSupabase(){try{const e=this.getAllProperties();for(const n of e)if(n.source==="supabase"){const r=await fn.getPropertyData(n.id);r.success&&r.data&&(this.propertyData.set(n.id,r.data),console.log(`📊 Loaded ${r.data.length} data records for ${n.name}`))}await this.saveToLocalStorage(),console.log("📊 Property data loaded from Supabase")}catch{console.log("⚠️ Failed to load property data from Supabase")}}async saveToLocalStorage(){try{const e={properties:Array.from(this.properties.entries()),propertyData:Array.from(this.propertyData.entries()),lastSync:this.lastSync};localStorage.setItem("unified-properties",JSON.stringify(e))}catch(e){console.error("Failed to save to local storage:",e)}}async loadFromLocalStorage(){try{const e=localStorage.getItem("unified-properties");if(e){const n=JSON.parse(e);n.properties&&(this.properties=new Map(n.properties)),n.propertyData&&(this.propertyData=new Map(n.propertyData)),n.lastSync&&(this.lastSync=new Date(n.lastSync)),console.log("📁 Loaded from local storage:",{properties:this.properties.size,propertyData:Array.from(this.propertyData.values()).flat().length})}}catch(e){console.error("Failed to load from local storage:",e)}}generateId(){return`prop-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}async clearAllData(){this.properties.clear(),this.propertyData.clear(),this.lastSync=null,localStorage.removeItem("unified-properties"),console.log("🗑️ Cleared all unified property data")}getStatistics(){const e={},n=Array.from(this.properties.values());for(const r of n)e[r.source]=(e[r.source]||0)+1;return{totalProperties:this.properties.size,totalDataRecords:Array.from(this.propertyData.values()).flat().length,lastSync:this.lastSync,propertiesBySource:e}}}const ui=new nM,rM=()=>{const[t,e]=S.useState([]),[n,r]=S.useState(null),[s,i]=S.useState(!0),[o,l]=S.useState(null),c=S.useCallback(async()=>{try{const k=(await Kr()).reduce((P,A)=>(P[A.file_name]||(P[A.file_name]=[]),P[A.file_name].push(A),P),{}),E=Object.entries(k).filter(([P,A])=>A.length>1);if(E.length>0){console.warn("⚠️ DUPLICATE CSVs detected:",E);const P=E.map(([D])=>D).join(", ");window.confirm(`⚠️ DUPLICATE DATA DETECTED!

The following CSV files have been uploaded multiple times:
• ${P}

This is causing inflated dashboard values (e.g., $600k instead of $400k).

Would you like to automatically remove the older duplicates and keep only the most recent uploads?

Click "OK" to clean up duplicates, or "Cancel" to handle manually in CSV Management.`)&&await d(E)}}catch(w){console.error("Error checking for duplicate CSVs:",w)}},[]),u=S.useCallback(async()=>{try{i(!0),l(null),console.log("🔄 Loading dashboard data from unified system...");const w=ui.getAllProperties();console.log("🏢 Unified properties:",w),w&&w.length>0&&(e(w),console.log("✅ Properties loaded:",w.length)),console.log("📊 Loading financial data from active CSVs only...");const k=await f();if(console.log("📈 CSV Metrics calculated:",k),k.totalIncome>0||k.totalExpense>0){const E=k.totalIncome,P=k.totalExpense,A=E-P,D=k.recordCount;console.log("💰 Financial Summary from CSVs:"),console.log(`  Total Revenue: $${E.toLocaleString()}`),console.log(`  Total Expenses: $${P.toLocaleString()}`),console.log(`  Net Income: $${A.toLocaleString()}`),console.log(`  Total Records: ${D}`),r({totalRevenue:E,totalExpenses:P,totalNetIncome:A,totalRecords:D,dataSource:"csv"})}else console.log("⚠️ No active CSV data found. Dashboard will show empty state."),r({totalRevenue:0,totalExpenses:0,totalNetIncome:0,totalRecords:0,dataSource:"none"})}catch(w){console.error("Dashboard: Failed to load data:",w),l("Failed to load dashboard data")}finally{i(!1)}},[]);S.useEffect(()=>{h(),u(),c();const w=k=>{var E;console.log("🔄 Dashboard received data update event:",k.detail),((E=k.detail)==null?void 0:E.action)==="csv_deleted"&&(console.log("🗑️ CSV deletion detected, refreshing dashboard data..."),console.log("📋 Deleted CSV:",k.detail.fileName)),u()};return window.addEventListener("dataUpdated",w),()=>{window.removeEventListener("dataUpdated",w)}},[c,u]);const d=async w=>{try{let k=0;for(const[,E]of w){const A=E.sort((D,L)=>new Date(L.uploaded_at).getTime()-new Date(D.uploaded_at).getTime()).slice(1);for(const D of A)await xC(D.id)&&(k++,console.log(`🗑️ Removed duplicate CSV: ${D.file_name} (${D.uploaded_at})`))}window.dispatchEvent(new CustomEvent("dataUpdated",{detail:{action:"duplicates_cleaned",removedCount:k}})),alert(`✅ Cleaned up ${k} duplicate CSV(s). Dashboard values should now be accurate.`)}catch(k){console.error("Error cleaning up duplicates:",k),alert("Failed to clean up duplicates. Please handle manually in CSV Management.")}},h=async()=>{try{const w=await yC();w.success&&w.migrated&&w.migrated>0&&console.log(`🔄 Migrated ${w.migrated} CSVs from localStorage to Supabase`),await ui.initialize(),console.log("🏢 Dashboard: Unified service initialized")}catch(w){console.error("Dashboard: Failed to initialize unified service:",w)}},f=async()=>{try{const w=await Kr();console.log("📊 Using Supabase data:",w.length,"active CSVs");let k=0,E=0,P=0;console.log("📋 Active CSVs:",w.map(U=>({fileName:U.file_name,isActive:U.is_active,totalRecords:U.total_records})));const A=w.map(U=>U.file_name),D=A.filter((U,V)=>A.indexOf(U)!==V);D.length>0&&console.warn("⚠️ DUPLICATE CSVs detected:",D),w.forEach(U=>{const V=U.total_records,$=U.account_categories,M=U.preview_data,O=U.file_type;if(console.log(`📁 Processing CSV: ${U.file_name} (${V} records)`),console.log("📋 CSV Preview Data Sample:",Array.isArray(M)?M.slice(0,3):M),O==="cash_flow"){console.log("💰 Processing CASH FLOW CSV - Looking for KEY METRICS for dashboard...");const T=[{name:"Total Operating Income",type:"income"},{name:"NOI - Net Operating Income",type:"net_income"},{name:"Total Operating Expense",type:"expense"}];let F=!1;T.forEach(R=>{const B=Array.isArray(M)?M.find(J=>{var Z;return(((Z=J.account_name)==null?void 0:Z.trim().toLowerCase())||"").includes(R.name.toLowerCase())}):null;if(B&&B.time_series){F=!0,console.log(`🎯 FOUND KEY METRIC: ${B.account_name} (${R.type})`),console.log("📊 Time Series Data:",B.time_series);const J=Object.entries(B.time_series).filter(([G,Z])=>G.toLowerCase()!=="total"&&G.toLowerCase()!=="sum"&&G.toLowerCase()!=="grand total"&&typeof Z=="number").map(([,G])=>G);if(J.length>0){const G=J.reduce((Z,te)=>Z+te,0);R.type==="income"?(k+=G,console.log(`  💰 ${B.account_name}: Total Income = $${G.toLocaleString()}`)):R.type==="expense"?(E+=G,console.log(`  💸 ${B.account_name}: Total Expense = $${G.toLocaleString()}`)):R.type==="net_income"&&console.log(`  📊 ${B.account_name}: Net Operating Income = $${G.toLocaleString()}`)}}}),F?(console.log("✅ Using KEY METRICS for dashboard population"),console.log(`💰 Total Income: $${k.toLocaleString()}`),console.log(`💸 Total Expense: $${E.toLocaleString()}`),console.log(`📊 Net Operating Income: $${(k-E).toLocaleString()}`)):(console.log("⚠️ Key metrics not found, falling back to individual account categorization..."),Object.entries($).forEach(([R,B])=>{const J=M.find(G=>{var Z;return((Z=G.account_name)==null?void 0:Z.trim())===R});if(J&&J.time_series){console.log(`🔍 Account: ${R} (${B})`);const G=Object.entries(J.time_series).filter(([Z,te])=>Z.toLowerCase()!=="total"&&Z.toLowerCase()!=="sum"&&Z.toLowerCase()!=="grand total"&&typeof te=="number").map(([,Z])=>Z);if(G.length>0){const Z=G.reduce((te,le)=>te+le,0);B==="income"?(k+=Z,console.log(`  💰 ${R}: Income = $${Z.toLocaleString()}`)):B==="expense"&&(E+=Z,console.log(`  💸 ${R}: Expense = $${Z.toLocaleString()}`))}}}))}else Object.entries($).forEach(([T,F])=>{const R=M.find(B=>{var J;return((J=B.account_name)==null?void 0:J.trim())===T});if(R&&R.time_series){console.log(`🔍 Account: ${T} (${F})`),console.log("📊 Time Series Data:",R.time_series);const B=Object.entries(R.time_series).filter(([J,G])=>J.toLowerCase()!=="total"&&J.toLowerCase()!=="sum"&&J.toLowerCase()!=="grand total"&&typeof G=="number"&&G!==0).map(([,J])=>J);if(B.length>0){let J=0;O==="balance_sheet"?(J=B[B.length-1],console.log(`  💰 ${T} (${F}): Latest value = $${J.toLocaleString()}`)):O==="rent_roll"?(J=B.reduce((G,Z)=>G+Z,0)/B.length,console.log(`  💰 ${T} (${F}): Monthly average = $${J.toLocaleString()}`)):(J=B.reduce((G,Z)=>G+Z,0)/B.length,console.log(`  💰 ${T} (${F}): Monthly average = $${J.toLocaleString()}`)),F==="income"||F==="revenue"?k+=J:F==="expense"?E+=J:F==="asset"?console.log(`  📊 Asset account: ${T} = $${J.toLocaleString()}`):F==="liability"?console.log(`  📊 Liability account: ${T} = $${J.toLocaleString()}`):F==="equity"&&console.log(`  📊 Equity account: ${T} = $${J.toLocaleString()}`)}}});P+=U.totalRecords});const L=w.some(U=>(U.file_type||U.fileType)==="cash_flow");console.log("🔍 Cash Flow Detection Debug:"),console.log("  Active CSVs:",w.length),console.log("  CSV file types:",w.map(U=>U.file_type||U.fileType)),console.log("  Has cash flow:",L);const W={totalIncome:k,totalExpense:E,netOperatingIncome:k-E,recordCount:P};return console.log("📊 Final CSV metrics:",W),console.log("💰 Has cash flow data:",L),W}catch(w){return console.error("Error calculating CSV metrics:",w),{totalIncome:0,totalExpense:0,netOperatingIncome:0,recordCount:0}}},p=t.length,x=t.reduce((w,k)=>w+(k.total_units||0),0),m=parseFloat((n==null?void 0:n.avgOccupancy)||(n==null?void 0:n.avg_occupancy_rate)||"0"),v=parseFloat((n==null?void 0:n.totalRevenue)||(n==null?void 0:n.total_revenue)||"0"),y=parseFloat((n==null?void 0:n.totalExpenses)||(n==null?void 0:n.total_expenses)||"0"),g=parseFloat((n==null?void 0:n.totalNetIncome)||(n==null?void 0:n.total_net_income)||"0"),b=parseInt((n==null?void 0:n.recordCount)||(n==null?void 0:n.total_records)||"0");console.log("🔍 Dashboard calculated values:"),console.log("  - totalProperties:",p),console.log("  - totalUnits:",x),console.log("  - avgOccupancy:",m),console.log("  - totalRevenue:",v),console.log("  - totalExpenses:",y),console.log("  - totalNetIncome:",g),console.log("  - totalRecords:",b);const _=b>0?v/b:0,C=v>0?g/v*100:0,N=[{title:"Total Properties",value:p.toString(),change:p>0?"Active":"None",changeType:p>0?"positive":"neutral",icon:zn,color:"blue"},{title:"Total Revenue",value:`$${v.toLocaleString()}`,change:`$${_.toLocaleString()}/month avg`,changeType:"positive",icon:br,color:"green"},{title:"Net Income",value:`$${g.toLocaleString()}`,change:`${C.toFixed(1)}% margin`,changeType:"positive",icon:Is,color:"purple"},{title:"Occupancy Rate",value:`${m.toFixed(1)}%`,change:`${x} total units`,changeType:"positive",icon:wr,color:"orange"}],j=[{id:1,type:"data",message:`${b} CSV records uploaded for Chico property`,time:"Current",icon:Fs},{id:2,type:"property",message:`${p} active property in system`,time:"Current",icon:zn},{id:3,type:"revenue",message:`Total revenue: $${v.toLocaleString()}`,time:"Current",icon:br},{id:4,type:"income",message:`Net income: $${g.toLocaleString()} (${C.toFixed(1)}% margin)`,time:"Current",icon:Is},{id:5,type:"occupancy",message:`Average occupancy: ${m.toFixed(1)}%`,time:"Current",icon:wr}];return s?a.jsx("div",{className:"space-y-6",children:a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading dashboard data..."})]})})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Dashboard"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:"Welcome back! Here's what's happening with your properties."}),o&&a.jsxs("div",{className:"mt-2 text-sm text-red-600 dark:text-red-400 flex items-center",children:[a.jsx(Rs,{className:"w-4 h-4 mr-1"}),o]})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsxs("button",{onClick:u,disabled:s,className:"btn-secondary flex items-center",children:[a.jsx(Ps,{className:`w-4 h-4 mr-2 ${s?"animate-spin":""}`}),"Refresh"]}),a.jsx("button",{className:"btn-secondary",children:"Export"}),a.jsx("button",{className:"btn-primary",children:"Add Property"})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:N.map((w,k)=>{const E=w.icon;return a.jsx("div",{className:"metric-card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:w.title}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:w.value}),a.jsxs("p",{className:`text-sm mt-1 ${w.changeType==="positive"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[w.change," from last month"]})]}),a.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${w.color==="blue"?"bg-blue-100 dark:bg-blue-900/20":w.color==="green"?"bg-green-100 dark:bg-green-900/20":w.color==="purple"?"bg-purple-100 dark:bg-purple-900/20":"bg-orange-100 dark:bg-orange-900/20"}`,children:a.jsx(E,{className:`w-6 h-6 ${w.color==="blue"?"text-blue-600 dark:text-blue-400":w.color==="green"?"text-green-600 dark:text-green-400":w.color==="purple"?"text-purple-600 dark:text-purple-400":"text-orange-600 dark:text-orange-400"}`})})]})},k)})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Revenue Trend"}),a.jsx(GI,{properties:t})]}),a.jsxs("div",{className:"card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Occupancy Rate"}),a.jsx(YI,{properties:t})]})]}),a.jsx("div",{className:"mt-6",children:a.jsx(XI,{properties:t})}),a.jsx("div",{className:"grid grid-cols-1 gap-6",children:a.jsxs("div",{className:"card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Recent Activity"}),a.jsx("div",{className:"space-y-4",children:j.map(w=>{const k=w.icon;return a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center flex-shrink-0",children:a.jsx(k,{className:"w-4 h-4 text-gray-600 dark:text-gray-300"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:w.message}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:w.time})]})]},w.id)})})]})})]})},Jw=()=>{const[t,e]=S.useState(""),[n,r]=S.useState("all"),[s,i]=S.useState([]),[o,l]=S.useState(!0),[c,u]=S.useState(null);S.useEffect(()=>{d();const f=()=>{d()};return window.addEventListener("dataUpdated",f),()=>{window.removeEventListener("dataUpdated",f)}},[]);const d=async()=>{try{l(!0),u(null);let f=[];try{const p=await fetch("http://localhost:5002/api/processed-data");if(p.ok){const x=await p.json();if(console.log("🏠 Local properties data loaded:",x),x.success&&x.data){const m=new Set;Object.keys(x.data).forEach(y=>{m.add(y)});const v=Array.from(m).map(y=>({id:`local-${y.toLowerCase()}`,name:y,address:"Local Data Source",type:"Apartment Complex",total_units:26,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}));f=[...v],console.log("🏠 Local properties converted:",v)}}}catch{console.log("⚠️ Local properties not available, trying API...")}if(f.length===0){const p=await fn.getProperties();if(p.success&&p.data)f=p.data,console.log("✅ Properties loaded from API:",p.data);else{u("Failed to load properties"),i([]);return}}i(f)}catch(f){console.error("Error loading properties:",f),u("Failed to load properties"),i([])}finally{l(!1)}},h=s.filter(f=>{const p=f.name.toLowerCase().includes(t.toLowerCase())||f.address.toLowerCase().includes(t.toLowerCase()),x=n==="all"||f.type===n;return p&&x});return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Properties"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:"Manage and monitor all your properties"})]}),a.jsxs("button",{className:"btn-primary flex items-center space-x-2 dark:bg-blue-700 dark:hover:bg-blue-600",children:[a.jsx(rh,{className:"w-4 h-4"}),a.jsx("span",{children:"Add Property"})]})]}),a.jsx("div",{className:"card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"relative",children:[a.jsx(sh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-gray-500 w-4 h-4"}),a.jsx("input",{type:"text",placeholder:"Search properties...",value:t,onChange:f=>e(f.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"})]})}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(O2,{className:"w-4 h-4 text-gray-400 dark:text-gray-500"}),a.jsxs("select",{value:n,onChange:f=>r(f.target.value),className:"border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[a.jsx("option",{value:"all",children:"All Types"}),a.jsx("option",{value:"Apartment Complex",children:"Apartment Complex"}),a.jsx("option",{value:"Townhouse Complex",children:"Townhouse Complex"}),a.jsx("option",{value:"Single Family",children:"Single Family"}),a.jsx("option",{value:"Condo Complex",children:"Condo Complex"})]})]})]})}),o&&a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading properties..."})]})}),c&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-6",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error loading properties"}),a.jsx("div",{className:"mt-2 text-sm text-red-700",children:a.jsx("p",{children:c})}),a.jsx("div",{className:"mt-4",children:a.jsx("button",{onClick:d,className:"bg-red-100 px-3 py-2 rounded-md text-sm font-medium text-red-800 hover:bg-red-200",children:"Try again"})})]})]})}),!o&&!c&&a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map(f=>a.jsxs("div",{className:"card hover:shadow-lg transition-shadow duration-200 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:f.name}),a.jsxs("div",{className:"flex items-center text-gray-500 dark:text-gray-400 text-sm mt-1",children:[a.jsx(Bg,{className:"w-4 h-4 mr-1"}),f.address]})]}),a.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/20 text-green-800 dark:text-green-300",children:"Active"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-400",children:[a.jsx(zn,{className:"w-4 h-4 mr-2"}),a.jsx("span",{className:"text-sm",children:f.type})]}),a.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[f.total_units," units"]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-400",children:[a.jsx(wr,{className:"w-4 h-4 mr-2"}),a.jsx("span",{className:"text-sm",children:"Occupied"})]}),a.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[f.total_units," units"]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-400",children:[a.jsx(br,{className:"w-4 h-4 mr-2"}),a.jsx("span",{className:"text-sm",children:"Monthly Revenue"})]}),a.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"View Data"})]})]}),a.jsxs("div",{className:"flex space-x-2 mt-4 pt-4 border-t border-gray-200 dark:border-gray-600",children:[a.jsxs("button",{className:"flex-1 btn-secondary flex items-center justify-center space-x-1 dark:bg-gray-700 dark:text-white dark:border-gray-600 dark:hover:bg-gray-600",children:[a.jsx(qr,{className:"w-4 h-4"}),a.jsx("span",{children:"View"})]}),a.jsxs("button",{className:"flex-1 btn-secondary flex items-center justify-center space-x-1 dark:bg-gray-700 dark:text-white dark:border-gray-600 dark:hover:bg-gray-600",children:[a.jsx(yl,{className:"w-4 h-4"}),a.jsx("span",{children:"Edit"})]}),a.jsx("button",{className:"px-3 py-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-md transition-colors duration-200",children:a.jsx(Go,{className:"w-4 h-4"})})]})]},f.id))}),!o&&!c&&h.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(zn,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No properties found"}),a.jsx("p",{className:"text-gray-500",children:"Try adjusting your search or filter criteria."})]})]})},sM="https://iqwhrvtcrseidfyznqaf.supabase.co",iM="sb_publishable_ULLJeduhFHc_KRINLLXxug_zGvRBLPf",oM=ql(sM,iM,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},db:{schema:"public"},global:{headers:{"X-Client-Info":"horton-properties-ai-parser"}}}),ot={CSV_FILES:"csv_files_ai",PARSED_DATA:"parsed_data_ai",HEADER_MATCHES:"header_matches_ai",PROPERTIES:"properties_ai",PROCESSING_JOBS:"processing_jobs_ai",USER_SESSIONS:"user_sessions_ai"};class aM{constructor(){this.supabase=oM}async uploadCSVFile(e,n,r){try{const s=`${Date.now()}-${e.name}`,{error:i}=await this.supabase.storage.from("csv-files-ai").upload(s,e);if(i)return{success:!1,error:i.message};const o={file_name:e.name,file_size:e.size,property_id:n,property_name:r,upload_status:"uploading",processing_mode:"ai_parser",format_detected:"traditional",ai_confidence:0},{data:l,error:c}=await this.supabase.from(ot.CSV_FILES).insert(o).select().single();return c?{success:!1,error:c.message}:{success:!0,data:l}}catch(s){return{success:!1,error:s instanceof Error?s.message:"Unknown error"}}}async getCSVFiles(e){try{let n=this.supabase.from(ot.CSV_FILES).select("*").order("created_at",{ascending:!1});e&&(n=n.eq("property_id",e));const{data:r,error:s}=await n;return s?{success:!1,error:s.message}:{success:!0,data:r||[]}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async saveParsedData(e,n){try{const r=n.map(o=>({csv_file_id:e,account_name:o.account_name,period:o.period,amount:o.amount,amount_raw:o.amount_raw,category:o.category,confidence_score:o.confidence_score||.8,bucket_assignment:o.bucket_assignment||"unknown"})),{data:s,error:i}=await this.supabase.from(ot.PARSED_DATA).insert(r).select();return i?{success:!1,error:i.message}:{success:!0,data:s||[]}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}async saveHeaderMatches(e,n){try{const r=n.map(o=>({csv_file_id:e,original_header:o.originalHeader,suggested_bucket:o.suggestedBucket,confidence_score:o.confidenceScore,alternative_buckets:o.alternativeBuckets,user_confirmed:!1})),{data:s,error:i}=await this.supabase.from(ot.HEADER_MATCHES).insert(r).select();return i?{success:!1,error:i.message}:{success:!0,data:s||[]}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}async updateHeaderMatchConfirmation(e,n,r){try{const s={user_confirmed:n};r&&(s.user_override=r);const{error:i}=await this.supabase.from(ot.HEADER_MATCHES).update(s).eq("id",e);return i?{success:!1,error:i.message}:{success:!0}}catch(s){return{success:!1,error:s instanceof Error?s.message:"Unknown error"}}}async createProperty(e){try{const{data:n,error:r}=await this.supabase.from(ot.PROPERTIES).insert({...e,ai_parser_enabled:!0}).select().single();return r?{success:!1,error:r.message}:{success:!0,data:n}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async getProperties(){try{const{data:e,error:n}=await this.supabase.from(ot.PROPERTIES).select("*").eq("ai_parser_enabled",!0).order("created_at",{ascending:!1});return n?{success:!1,error:n.message}:{success:!0,data:e||[]}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async createProcessingJob(e,n){try{const{data:r,error:s}=await this.supabase.from(ot.PROCESSING_JOBS).insert({csv_file_id:e,status:"processing",progress:0,ai_analysis:n}).select().single();return s?{success:!1,error:s.message}:{success:!0,data:r}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}async updateProcessingJob(e,n){try{const{error:r}=await this.supabase.from(ot.PROCESSING_JOBS).update(n).eq("id",e);return r?{success:!1,error:r.message}:{success:!0}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}async deleteCSVFile(e){try{await this.supabase.from(ot.PARSED_DATA).delete().eq("csv_file_id",e),await this.supabase.from(ot.HEADER_MATCHES).delete().eq("csv_file_id",e),await this.supabase.from(ot.PROCESSING_JOBS).delete().eq("csv_file_id",e);const{error:n}=await this.supabase.from(ot.CSV_FILES).delete().eq("id",e);return n?{success:!1,error:n.message}:{success:!0}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async updateCSVFile(e,n){try{const{data:r,error:s}=await this.supabase.from(ot.CSV_FILES).update(n).eq("id",e).select().single();return s?{success:!1,error:s.message}:{success:!0,data:r}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}async updateProperty(e,n){try{const{data:r,error:s}=await this.supabase.from(ot.PROPERTIES).update(n).eq("id",e).select().single();return s?{success:!1,error:s.message}:{success:!0,data:r}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}async deleteProperty(e){try{const n=await this.supabase.from(ot.CSV_FILES).select("id").eq("property_id",e);if(n.data)for(const s of n.data)await this.deleteCSVFile(s.id);const{error:r}=await this.supabase.from(ot.PROPERTIES).delete().eq("id",e);return r?{success:!1,error:r.message}:{success:!0}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async getHeaderMatches(e){try{const{data:n,error:r}=await this.supabase.from(ot.HEADER_MATCHES).select("*").eq("csv_file_id",e).order("confidence_score",{ascending:!1});return r?{success:!1,error:r.message}:{success:!0,data:n||[]}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async updateHeaderMatch(e,n){try{const{data:r,error:s}=await this.supabase.from(ot.HEADER_MATCHES).update(n).eq("id",e).select().single();return s?{success:!1,error:s.message}:{success:!0,data:r}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}async getParsedData(e){try{const{data:n,error:r}=await this.supabase.from(ot.PARSED_DATA).select("*").eq("csv_file_id",e).order("created_at",{ascending:!1});return r?{success:!1,error:r.message}:{success:!0,data:n||[]}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async updateParsedData(e,n){try{const{data:r,error:s}=await this.supabase.from(ot.PARSED_DATA).update(n).eq("id",e).select().single();return s?{success:!1,error:s.message}:{success:!0,data:r}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}async healthCheck(){try{const{error:e}=await this.supabase.from(ot.PROPERTIES).select("count").limit(1);return e?{success:!1,error:e.message}:{success:!0,status:"healthy"}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}}const ru=new aM,lM=()=>{const[t,e]=S.useState([]),[n,r]=S.useState(!1),[s,i]=S.useState(""),[o,l]=S.useState(!1),[c,u]=S.useState(!1),[d,h]=S.useState(null),[f,p]=S.useState({name:"",address:"",type:"Apartment",total_units:0}),[x,m]=S.useState(null),[v,y]=S.useState(null);S.useEffect(()=>{g()},[]);const g=async()=>{r(!0);try{const k=await ru.getProperties();k.success&&k.data?e(k.data):m(k.error||"Failed to load properties")}catch(k){console.error("Failed to load properties:",k),m("Failed to load properties")}finally{r(!1)}},b=async k=>{k.preventDefault(),m(null),y(null);try{const E=await ru.createProperty(f);E.success?(y("Property added successfully!"),p({name:"",address:"",type:"Apartment",total_units:0}),l(!1),await g()):m(E.error||"Failed to add property")}catch(E){console.error("Failed to add property:",E),m("Failed to add property")}},_=async k=>{if(k.preventDefault(),!!d){m(null),y(null);try{const E=await ru.updateProperty(d.id,f);E.success?(y("Property updated successfully!"),u(!1),h(null),await g()):m(E.error||"Failed to update property")}catch(E){console.error("Failed to update property:",E),m("Failed to update property")}}},C=async k=>{if(window.confirm("Are you sure you want to delete this property? This will also delete all associated CSV files and data."))try{const E=await ru.deleteProperty(k);E.success?(y("Property deleted successfully!"),await g()):m(E.error||"Failed to delete property")}catch(E){console.error("Failed to delete property:",E),m("Failed to delete property")}},N=k=>{h(k),p({name:k.name,address:k.address,type:k.type,total_units:k.total_units}),u(!0)},j=t.filter(k=>k.name.toLowerCase().includes(s.toLowerCase())||k.address.toLowerCase().includes(s.toLowerCase())||k.type.toLowerCase().includes(s.toLowerCase())),w=["Apartment","Townhouse","Single Family","Condo","Duplex","Commercial","Mixed Use","Other"];return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[a.jsx(zn,{className:"w-8 h-8 mr-3 text-blue-600"}),"Property Management"]}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your properties for AI parser integration"})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("button",{onClick:()=>l(!0),className:"btn-primary flex items-center space-x-2",children:[a.jsx(rh,{className:"w-4 h-4"}),a.jsx("span",{children:"Add Property"})]}),a.jsxs("button",{onClick:g,disabled:n,className:"btn-secondary flex items-center space-x-2",children:[a.jsx(Ps,{className:`w-4 h-4 ${n?"animate-spin":""}`}),a.jsx("span",{children:"Refresh"})]})]})]}),a.jsx("div",{className:"card",children:a.jsxs("div",{className:"relative",children:[a.jsx(sh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"text",placeholder:"Search properties by name, address, or type...",value:s,onChange:k=>i(k.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),v&&a.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-md p-3 flex items-center space-x-2",children:[a.jsx(Ci,{className:"w-4 h-4 text-green-600"}),a.jsx("span",{className:"text-sm text-green-600",children:v})]}),x&&a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-md p-3 flex items-center space-x-2",children:[a.jsx(Rs,{className:"w-4 h-4 text-red-600"}),a.jsx("span",{className:"text-sm text-red-600",children:x})]}),n?a.jsxs("div",{className:"card text-center py-12",children:[a.jsx(Ps,{className:"w-8 h-8 animate-spin mx-auto text-blue-600 mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading properties..."})]}):j.length===0?a.jsxs("div",{className:"card text-center py-12",children:[a.jsx(zn,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No properties found"}),a.jsx("p",{className:"text-gray-600 mb-4",children:s?"No properties match your search criteria.":"Add your first property to get started with AI parser integration."}),a.jsx("button",{onClick:()=>l(!0),className:"btn-primary",children:"Add Property"})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:j.map(k=>a.jsxs("div",{className:"card hover:shadow-lg transition-shadow",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:a.jsx(qD,{className:"w-5 h-5 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-900",children:k.name}),a.jsx("p",{className:"text-sm text-gray-500",children:k.type})]})]}),a.jsx("div",{className:"flex items-center space-x-1",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${k.ai_parser_enabled?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:k.ai_parser_enabled?"AI Enabled":"Disabled"})})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[a.jsx(Bg,{className:"w-4 h-4"}),a.jsx("span",{className:"truncate",children:k.address})]}),a.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[a.jsx(wr,{className:"w-4 h-4"}),a.jsxs("span",{children:[k.total_units," units"]})]}),a.jsxs("div",{className:"pt-3 border-t",children:[a.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Created:"}),a.jsx("p",{className:"text-sm font-medium",children:new Date(k.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})})]})]}),a.jsxs("div",{className:"flex items-center justify-between pt-4 mt-4 border-t",children:[a.jsx("div",{className:"flex items-center space-x-2",children:a.jsx("button",{onClick:()=>N(k),className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-md transition-colors",title:"Edit Property",children:a.jsx(yl,{className:"w-4 h-4"})})}),a.jsx("div",{className:"flex items-center space-x-2",children:a.jsx("button",{onClick:()=>C(k.id),className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-md transition-colors",title:"Delete Property",children:a.jsx(Go,{className:"w-4 h-4"})})})]})]},k.id))}),o&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsx("div",{className:"bg-white rounded-lg max-w-md w-full mx-4",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Add New Property"}),a.jsx("button",{onClick:()=>{l(!1),p({name:"",address:"",type:"Apartment",total_units:0}),m(null)},className:"text-gray-400 hover:text-gray-600",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsxs("form",{onSubmit:b,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Name *"}),a.jsx("input",{type:"text",required:!0,value:f.name,onChange:k=>p({...f,name:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter property name"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address *"}),a.jsx("input",{type:"text",required:!0,value:f.address,onChange:k=>p({...f,address:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter property address"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Type *"}),a.jsx("select",{required:!0,value:f.type,onChange:k=>p({...f,type:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:w.map(k=>a.jsx("option",{value:k,children:k},k))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Units *"}),a.jsx("input",{type:"number",required:!0,min:"1",value:f.total_units,onChange:k=>p({...f,total_units:parseInt(k.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter total units"})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>{l(!1),p({name:"",address:"",type:"Apartment",total_units:0}),m(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Add Property"})]})]})]})})}),c&&d&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsx("div",{className:"bg-white rounded-lg max-w-md w-full mx-4",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Edit Property"}),a.jsx("button",{onClick:()=>{u(!1),h(null),p({name:"",address:"",type:"Apartment",total_units:0}),m(null)},className:"text-gray-400 hover:text-gray-600",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsxs("form",{onSubmit:_,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Name *"}),a.jsx("input",{type:"text",required:!0,value:f.name,onChange:k=>p({...f,name:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address *"}),a.jsx("input",{type:"text",required:!0,value:f.address,onChange:k=>p({...f,address:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Type *"}),a.jsx("select",{required:!0,value:f.type,onChange:k=>p({...f,type:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:w.map(k=>a.jsx("option",{value:k,children:k},k))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Units *"}),a.jsx("input",{type:"number",required:!0,min:"1",value:f.total_units,onChange:k=>p({...f,total_units:parseInt(k.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>{u(!1),h(null),p({name:"",address:"",type:"Apartment",total_units:0}),m(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Update Property"})]})]})]})})})]})},cM=()=>{var s;const[t,e]=S.useState("list"),n=[{id:"list",label:"Property List",icon:YD,description:"View and manage your properties"},{id:"management",label:"Property Management",icon:tT,description:"Advanced property management features"}],r=()=>{switch(t){case"list":return a.jsx(Jw,{});case"management":return a.jsx(lM,{});default:return a.jsx(Jw,{})}};return a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[a.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Properties"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your property portfolio and settings"})]}),a.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:a.jsx("nav",{className:"flex space-x-8",children:n.map(i=>a.jsxs("button",{onClick:()=>e(i.id),className:`flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium transition-colors ${t===i.id?"bg-blue-100 text-blue-700 border border-blue-200":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[a.jsx(i.icon,{className:"w-4 h-4"}),a.jsx("span",{children:i.label})]},i.id))})}),a.jsx("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200",children:a.jsx("p",{className:"text-sm text-gray-600",children:(s=n.find(i=>i.id===t))==null?void 0:s.description})}),a.jsx("div",{className:"p-6",children:r()})]})})},uM=()=>{const[t,e]=S.useState("12m"),[n,r]=S.useState(null),[s,i]=S.useState(null),[o,l]=S.useState(!1),c=S.useCallback(()=>{setTimeout(()=>{r({totalRevenue:125e3,totalExpenses:85e3,netIncome:4e4,revenuePerUnit:4807,totalUnits:26,timeRange:t,occupancyRate:100,averageRent:1850,maintenanceCosts:12e3,propertyTax:15e3,insurance:8e3,utilities:1e4,managementFees:5e3,expenseRatio:.68,avgMaintenance:12e3,avgUtilities:1e4,avgInsurance:8e3,avgPropertyTax:15e3,avgOtherExpenses:4e4,revenueTrend:5e3,monthlyData:[{Date:"2024-01","Monthly Revenue":1e4,"Occupancy Rate":95},{Date:"2024-02","Monthly Revenue":10500,"Occupancy Rate":96},{Date:"2024-03","Monthly Revenue":11e3,"Occupancy Rate":98}],totalMonths:12,avgOccupancy:96,occupancyTrend:2.5,profitMargin:32})},1e3)},[t]);S.useEffect(()=>{c()},[c]);const u=x=>{i(x),l(!0)},d=x=>{var v,y,g,b;if(!n||!x)return null;const m={title:x.title,currentData:{},benchmarks:{},calculations:{},recommendations:[],riskFactors:[],opportunities:[]};switch(x.title){case"Rent Optimization Opportunity":m.currentData={revenuePerUnit:n.revenuePerUnit,totalRevenue:n.totalRevenue,totalUnits:n.totalUnits,timePeriod:n.timeRange,monthlyRevenue:((v=n.monthlyData)==null?void 0:v.map(k=>parseFloat(k["Monthly Revenue"])||0))||[]};const C=n.totalRevenue/n.totalMonths/n.totalUnits;m.benchmarks={chicoMarketRate:Math.round(C*.92),chicoAverage:Math.round(C*.96),chicoPremium:Math.round(C*1.08),yourCurrent:Math.round(C),location:"Chico, CA - College Town Market"};const N=Math.round(C*.92);m.calculations={currentVsChicoMarket:((n.revenuePerUnit-N)/N*100).toFixed(1),potentialIncrease:n.revenuePerUnit>N?"2-4%":"5-8%",revenueImpact:n.revenuePerUnit>N?`$${(n.totalRevenue*.03).toLocaleString()} annually (conservative Chico increase)`:`$${(n.totalRevenue*.065).toLocaleString()} annually (Chico market adjustment)`,marketPosition:n.revenuePerUnit>N?"Above Chico Market":"Below Chico Market"},m.recommendations=["Research Chico State University student housing demand patterns","Compare rates with nearby complexes on Nord Ave and Mangrove Ave","Consider seasonal rent adjustments aligned with academic calendar","Leverage proximity to campus and downtown Chico for premium positioning","Monitor Chico rental market trends and new construction impacts"],m.riskFactors=["Student population fluctuations affecting demand in Chico","Competition from new student housing developments near CSU Chico","Seasonal vacancy patterns during summer months","Economic impact on college-age renters and families","Chico housing market sensitivity to university enrollment"],m.opportunities=["Target CSU Chico students and young professionals","Capitalize on Chico's growing tech and healthcare sectors","Offer furnished units for student market premium","Partner with local businesses for tenant perks and retention","Position as premium alternative to on-campus housing"];break;case"Expense Management Alert":m.currentData={expenseRatio:n.expenseRatio,totalExpenses:n.totalExpenses,totalRevenue:n.totalRevenue,avgMaintenance:n.avgMaintenance,avgUtilities:n.avgUtilities,avgInsurance:n.avgInsurance,avgPropertyTax:n.avgPropertyTax,avgOtherExpenses:n.avgOtherExpenses},m.benchmarks={chicoStandard:.55,efficientThreshold:.45,highCostThreshold:.65,californiaAverage:.62,location:"Chico, CA - Moderate Climate Advantage"};const j=.55;m.calculations={currentVsChicoBenchmark:((n.expenseRatio-j)/j*100).toFixed(1),costSavings:n.expenseRatio<j?`$${(n.totalRevenue*(j-n.expenseRatio)).toLocaleString()} saved vs Chico benchmark`:`$${(n.totalRevenue*(n.expenseRatio-j)).toLocaleString()} over Chico benchmark`,chicoAdvantage:"Chico's mild climate reduces heating/cooling costs vs CA average",expenseBreakdown:{maintenance:`${(n.avgMaintenance/n.totalExpenses*100).toFixed(1)}%`,utilities:`${(n.avgUtilities/n.totalExpenses*100).toFixed(1)}%`,insurance:`${(n.avgInsurance/n.totalExpenses*100).toFixed(1)}%`,propertyTax:`${(n.avgPropertyTax/n.totalExpenses*100).toFixed(1)}%`,other:`${(n.avgOtherExpenses/n.totalExpenses*100).toFixed(1)}%`}},m.recommendations=n.expenseRatio>j?["Leverage Chico's mild climate for reduced HVAC costs","Partner with local Chico contractors for competitive maintenance rates","Implement water-saving measures (Chico water conservation incentives)","Consider solar installation (Chico solar rebate programs)","Review property tax assessments with Butte County"]:["Excellent cost management for Chico market conditions","Use efficiency as marketing advantage over competitors","Consider reinvesting savings in tenant amenities","Document strategies for potential portfolio expansion in Chico"],m.riskFactors=n.expenseRatio>j?["Chico wildfire risk may increase insurance premiums","California utility rate increases affecting Chico properties","Butte County property tax reassessments","Aging infrastructure in older Chico neighborhoods"]:["Over-optimization may impact tenant satisfaction","Chico market competition may require amenity investments","Climate change impacts on Chico area operating costs"],m.opportunities=["Chico solar incentive programs and net metering","Butte County water conservation rebates","Partner with CSU Chico facilities management for bulk purchasing","Leverage local Chico contractors for competitive rates","Implement smart thermostats for Chico's variable climate"];break;case"Revenue Trend Analysis":m.currentData={revenueTrend:n.revenueTrend,totalRevenue:n.totalRevenue,monthlyRevenue:((y=n.monthlyData)==null?void 0:y.map(k=>parseFloat(k["Monthly Revenue"])||0))||[],timePeriod:n.timeRange,occupancyRates:((g=n.monthlyData)==null?void 0:g.map(k=>parseFloat(k["Occupancy Rate"])||0))||[]},m.benchmarks={chicoHealthyGrowth:3e3,chicoStableThreshold:500,chicoDeclineThreshold:-1500,seasonalVariation:8,location:"Chico, CA - University Town Dynamics"},m.calculations={trendPercentage:n.totalRevenue>0?(n.revenueTrend/n.totalRevenue*100).toFixed(1):"0",monthlyAverage:n.monthlyData?(n.totalRevenue/n.monthlyData.length).toLocaleString():"0",occupancyCorrelation:n.monthlyData?n.monthlyData.map(k=>({month:k.Date||k.month,revenue:parseFloat(k["Monthly Revenue"])||0,occupancy:parseFloat(k["Occupancy Rate"])||0})):[]},m.recommendations=n.revenueTrend>0?["Capitalize on Chico's growing job market and CSU enrollment","Market to incoming CSU Chico students and faculty","Consider premium pricing during peak rental season (July-August)","Maintain competitive edge over new Chico developments"]:["Analyze impact of new student housing near CSU Chico campus","Review pricing strategy against Chico market comparables","Consider summer lease incentives for student retention","Evaluate property condition vs. newer Chico complexes"],m.riskFactors=["CSU Chico enrollment fluctuations affecting rental demand","New student housing developments near campus","Seasonal revenue variations during summer months","Chico economic dependence on university and agriculture","Competition from single-family rentals in Chico neighborhoods"],m.opportunities=["Target growing Chico tech sector employees","Develop partnerships with CSU Chico for faculty housing","Offer flexible lease terms for academic calendar alignment","Market to Chico healthcare workers (Enloe Medical Center)","Premium pricing for furnished units targeting students"];break;case"Occupancy Performance":m.currentData={avgOccupancy:n.avgOccupancy,occupancyTrend:n.occupancyTrend,occupancyRates:((b=n.monthlyData)==null?void 0:b.map(k=>parseFloat(k["Occupancy Rate"])||0))||[],timePeriod:n.timeRange,totalUnits:n.totalUnits},m.benchmarks={chicoStandard:92,chicoExcellent:96,chicoConcern:85,summerVariation:-15,location:"Chico, CA - Student Housing Market"};const w=92;m.calculations={currentVsChicoBenchmark:((n.avgOccupancy-w)/w*100).toFixed(1),trendImpact:n.occupancyTrend>0?`Improving by ${n.occupancyTrend.toFixed(1)}% (excellent for Chico)`:`Declining by ${Math.abs(n.occupancyTrend).toFixed(1)}% (monitor seasonal patterns)`,revenueImpact:n.avgOccupancy<w?`$${((w-n.avgOccupancy)/100*n.totalRevenue).toLocaleString()} potential revenue vs Chico benchmark`:`$${((n.avgOccupancy-w)/100*n.totalRevenue).toLocaleString()} revenue advantage in Chico market`,seasonalNote:"Chico occupancy typically drops 10-20% during summer months"},m.recommendations=n.occupancyTrend>0?["Excellent performance for Chico market - maintain strategies","Market early to incoming CSU Chico students (March-May)","Develop summer retention programs for year-round tenants","Consider premium pricing given strong occupancy"]:["Analyze competition from new Chico student housing","Improve marketing to CSU Chico students and young professionals","Consider amenity upgrades (fitness center, study rooms)","Implement summer lease incentives and flexible terms"],m.riskFactors=["Significant summer occupancy drops in Chico student market","CSU Chico enrollment changes affecting rental demand","New purpose-built student housing near campus","Economic impacts on college-age renters and families","Competition from single-family home rentals in Chico"],m.opportunities=["Target CSU Chico graduate students and faculty (stable tenants)","Offer academic year leases (9-month) with summer options","Create study-friendly amenities for student market","Partner with Chico employers for employee housing programs","Develop community events leveraging Chico's college town culture"];break}return m},h=n?[{title:"Revenue per Unit",value:`$${n.revenuePerUnit.toLocaleString()}`,change:n.revenuePerUnit>1500?"Above Market":"Below Market",changeType:n.revenuePerUnit>1500?"positive":"negative",period:`${n.timeRange==="1m"?"current month":`avg over ${n.timeRange}`}`,icon:br,color:"green"},{title:"Expense Ratio",value:`${(n.expenseRatio*100).toFixed(1)}%`,change:n.expenseRatio<.6?"Efficient":"High Costs",changeType:n.expenseRatio<.6?"positive":"negative",period:`of ${n.timeRange==="1m"?"monthly":"total"} revenue`,icon:hd,color:n.expenseRatio<.6?"green":"red"},{title:"Occupancy Trend",value:`${n.occupancyTrend>0?"+":""}${n.occupancyTrend.toFixed(1)}%`,change:n.occupancyTrend>0?"Improving":n.occupancyTrend<0?"Declining":"Stable",changeType:n.occupancyTrend>0?"positive":n.occupancyTrend<0?"negative":"neutral",period:`vs earlier ${n.timeRange}`,icon:Is,color:n.occupancyTrend>0?"blue":n.occupancyTrend<0?"red":"gray"},{title:"Revenue Trend",value:`${n.revenueTrend>0?"+":""}$${n.revenueTrend.toLocaleString()}`,change:n.revenueTrend>0?"Growing":n.revenueTrend<0?"Declining":"Stable",changeType:n.revenueTrend>0?"positive":n.revenueTrend<0?"negative":"neutral",period:`vs start of ${n.timeRange}`,icon:Lr,color:n.revenueTrend>0?"green":n.revenueTrend<0?"red":"gray"}]:[],f=n?[{title:"Rent Optimization Opportunity",description:`Revenue per unit is $${n.revenuePerUnit.toLocaleString()} ${n.timeRange==="1m"?"this month":`over ${n.timeRange}`}. ${n.revenuePerUnit>1500?"Above market rate - consider rent increase of 3-5%.":"Below market rate - potential for 8-12% increase."}`,type:"opportunity",impact:n.revenuePerUnit>1500?"Medium":"High",action:n.revenuePerUnit>1500?"Moderate rent increase":"Significant rent increase",icon:kv},{title:"Expense Management Alert",description:`Expense ratio is ${(n.expenseRatio*100).toFixed(1)}% ${n.timeRange==="1m"?"this month":`over ${n.timeRange}`}. Industry benchmark is 60%. ${n.expenseRatio>.6?`Expenses are ${((n.expenseRatio-.6)*100).toFixed(1)}% above benchmark.`:`Expenses are ${((.6-n.expenseRatio)*100).toFixed(1)}% below benchmark.`}`,type:n.expenseRatio>.6?"warning":"positive",impact:n.expenseRatio>.6?"High":"Low",action:n.expenseRatio>.6?"Review expense categories":"Maintain current efficiency",icon:vv},{title:"Revenue Trend Analysis",description:`Revenue ${n.revenueTrend>0?"increased":n.revenueTrend<0?"decreased":"remained stable"} by $${Math.abs(n.revenueTrend).toLocaleString()} ${n.timeRange==="1m"?"this month":`over ${n.timeRange}`}. ${n.revenueTrend>0?"Strong performance trend.":n.revenueTrend<0?"Declining trend needs attention.":"Stable performance."}`,type:n.revenueTrend>0?"positive":n.revenueTrend<0?"warning":"info",impact:Math.abs(n.revenueTrend)>5e3?"High":"Medium",action:n.revenueTrend>0?"Continue current strategy":n.revenueTrend<0?"Investigate revenue decline":"Monitor performance",icon:Lr},{title:"Occupancy Performance",description:`Average occupancy is ${n.avgOccupancy.toFixed(1)}% ${n.timeRange==="1m"?"this month":`over ${n.timeRange}`}. ${n.occupancyTrend>0?`Trend improved by ${n.occupancyTrend.toFixed(1)}%.`:n.occupancyTrend<0?`Trend declined by ${Math.abs(n.occupancyTrend).toFixed(1)}%.`:"Trend is stable."}`,type:n.occupancyTrend>0?"positive":n.occupancyTrend<0?"warning":"info",impact:Math.abs(n.occupancyTrend)>2?"High":"Medium",action:n.occupancyTrend>0?"Maintain current strategy":n.occupancyTrend<0?"Review marketing & retention":"Monitor occupancy",icon:wr}]:[],p=n?[{metric:"Revenue per Unit",current:n.revenuePerUnit,benchmark:1500,status:n.revenuePerUnit>=1500?"above":"below",unit:n.timeRange==="1m"?"$/month":"$/month avg",variance:((n.revenuePerUnit-1500)/1500*100).toFixed(1)},{metric:"Expense Ratio",current:n.expenseRatio*100,benchmark:60,status:n.expenseRatio<=.6?"below":"above",unit:"%",variance:((n.expenseRatio-.6)/.6*100).toFixed(1)},{metric:"Occupancy Rate",current:n.avgOccupancy,benchmark:95,status:n.avgOccupancy>=95?"above":"below",unit:"%",variance:((n.avgOccupancy-95)/95*100).toFixed(1)},{metric:"Profit Margin",current:n.profitMargin,benchmark:25,status:n.profitMargin>=25?"above":"below",unit:"%",variance:((n.profitMargin-25)/25*100).toFixed(1)}]:[];return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Property Management Analytics"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:"Actionable insights for informed property management decisions"})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Fs,{className:"w-4 h-4 text-gray-400 dark:text-gray-500"}),a.jsxs("select",{value:t,onChange:x=>e(x.target.value),className:"border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[a.jsx("option",{value:"1m",children:"Last 1 month"}),a.jsx("option",{value:"3m",children:"Last 3 months"}),a.jsx("option",{value:"6m",children:"Last 6 months"}),a.jsx("option",{value:"12m",children:"Last 12 months"}),a.jsx("option",{value:"24m",children:"Last 24 months"})]})]}),a.jsxs("button",{className:"btn-secondary flex items-center space-x-2 dark:bg-gray-700 dark:text-white dark:border-gray-600",children:[a.jsx(Ko,{className:"w-4 h-4"}),a.jsx("span",{children:"Export Report"})]})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:h.map((x,m)=>{const v=x.icon;return a.jsx("div",{className:"metric-card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:x.title}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:x.value}),a.jsxs("div",{className:"flex items-center mt-1",children:[a.jsx("span",{className:`text-sm ${x.changeType==="positive"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:x.change}),a.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 ml-1",children:x.period})]})]}),a.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${x.color==="green"?"bg-green-100 dark:bg-green-900/20":x.color==="blue"?"bg-blue-100 dark:bg-blue-900/20":x.color==="purple"?"bg-purple-100 dark:bg-purple-900/20":"bg-orange-100 dark:bg-orange-900/20"}`,children:a.jsx(v,{className:`w-6 h-6 ${x.color==="green"?"text-green-600 dark:text-green-400":x.color==="blue"?"text-blue-600 dark:text-blue-400":x.color==="purple"?"text-purple-600 dark:text-purple-400":"text-orange-600 dark:text-orange-400"}`})})]})},m)})}),a.jsxs("div",{className:"card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Performance vs Industry Benchmarks"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:p.map((x,m)=>a.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:x.metric}),a.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${x.status==="above"?"bg-green-100 dark:bg-green-900/20 text-green-800 dark:text-green-300":"bg-red-100 dark:bg-red-900/20 text-red-800 dark:text-red-300"}`,children:[x.status==="above"?"Above":"Below"," Benchmark"]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Current:"}),a.jsxs("span",{className:"font-semibold",children:[x.current.toFixed(1),x.unit]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Benchmark:"}),a.jsxs("span",{className:"text-sm text-gray-500",children:[x.benchmark,x.unit]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Variance:"}),a.jsxs("span",{className:`text-sm font-medium ${x.status==="above"?"text-green-600":"text-red-600"}`,children:[parseFloat(x.variance)>0?"+":"",x.variance,"%"]})]})]})]},m))})]}),a.jsxs("div",{className:"card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Management Insights & Recommendations"}),a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:f.map((x,m)=>{const v=x.icon;return a.jsx("div",{className:"p-4 border border-gray-200 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${x.type==="opportunity"?"bg-green-100 dark:bg-green-900/20":x.type==="warning"?"bg-yellow-100 dark:bg-yellow-900/20":x.type==="positive"?"bg-blue-100 dark:bg-blue-900/20":"bg-gray-100 dark:bg-gray-600"}`,children:a.jsx(v,{className:`w-4 h-4 ${x.type==="opportunity"?"text-green-600 dark:text-green-400":x.type==="warning"?"text-yellow-600 dark:text-yellow-400":x.type==="positive"?"text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-300"}`})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:x.title}),a.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${x.impact==="High"?"bg-red-100 dark:bg-red-900/20 text-red-800 dark:text-red-300":x.impact==="Medium"?"bg-yellow-100 dark:bg-yellow-900/20 text-yellow-800 dark:text-yellow-300":"bg-blue-100 dark:bg-blue-900/20 text-blue-800 dark:text-blue-300"}`,children:[x.impact," Impact"]})]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-3",children:x.description}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium text-primary-600 dark:text-primary-400",children:x.action}),a.jsx("button",{onClick:()=>u(x),className:"text-sm text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 font-medium cursor-pointer transition-colors",children:"Learn More →"})]})]})]})},m)})})]}),n&&a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Cost Analysis Breakdown"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[a.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:a.jsx(bv,{className:"w-6 h-6 text-blue-600"})}),a.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Maintenance"}),a.jsxs("p",{className:"text-xl font-bold text-gray-900",children:["$",n.avgMaintenance.toLocaleString()]}),a.jsx("p",{className:"text-sm text-gray-600",children:n.timeRange==="1m"?"this month":`avg over ${n.timeRange}`})]}),a.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[a.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3",children:a.jsx(Lr,{className:"w-6 h-6 text-green-600"})}),a.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Utilities"}),a.jsxs("p",{className:"text-xl font-bold text-gray-900",children:["$",n.avgUtilities.toLocaleString()]}),a.jsx("p",{className:"text-sm text-gray-600",children:n.timeRange==="1m"?"this month":`avg over ${n.timeRange}`})]}),a.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[a.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-3",children:a.jsx(vv,{className:"w-6 h-6 text-yellow-600"})}),a.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Insurance"}),a.jsxs("p",{className:"text-xl font-bold text-gray-900",children:["$",n.avgInsurance.toLocaleString()]}),a.jsx("p",{className:"text-sm text-gray-600",children:n.timeRange==="1m"?"this month":`avg over ${n.timeRange}`})]}),a.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[a.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-3",children:a.jsx(bv,{className:"w-6 h-6 text-red-600"})}),a.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Property Tax"}),a.jsxs("p",{className:"text-xl font-bold text-gray-900",children:["$",n.avgPropertyTax.toLocaleString()]}),a.jsx("p",{className:"text-sm text-gray-600",children:n.timeRange==="1m"?"this month":`avg over ${n.timeRange}`})]}),a.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[a.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-3",children:a.jsx(br,{className:"w-6 h-6 text-purple-600"})}),a.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Total Expenses"}),a.jsxs("p",{className:"text-xl font-bold text-gray-900",children:["$",n.totalExpenses.toLocaleString()]}),a.jsx("p",{className:"text-sm text-gray-600",children:n.timeRange==="1m"?"this month":`total over ${n.timeRange}`})]})]})]}),o&&s&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:["AI Analysis: ",s.title]}),a.jsx("button",{onClick:()=>l(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(Yo,{className:"w-6 h-6"})})]}),(()=>{const x=d(s);return x?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[a.jsxs("h3",{className:"text-lg font-semibold text-blue-900 mb-3 flex items-center",children:[a.jsx(KD,{className:"w-5 h-5 mr-2"}),"Current Performance Data"]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(x.currentData).map(([m,v])=>a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("span",{className:"text-sm text-blue-700 capitalize",children:[m.replace(/([A-Z])/g," $1").trim(),":"]}),a.jsx("span",{className:"text-sm font-medium text-blue-900",children:Array.isArray(v)?`${v.length} data points`:typeof v=="number"?m.includes("Revenue")||m.includes("Expense")||m.includes("Cost")||m.includes("Unit")?`$${v.toLocaleString()}`:m.includes("Ratio")?`${v.toFixed(1)}%`:`${v.toFixed(1)}`:String(v)})]},m))})]}),a.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[a.jsxs("h3",{className:"text-lg font-semibold text-green-900 mb-3 flex items-center",children:[a.jsx(Ci,{className:"w-5 h-5 mr-2"}),"Industry Benchmarks"]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(x.benchmarks).map(([m,v])=>a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("span",{className:"text-sm text-green-700 capitalize",children:[m.replace(/([A-Z])/g," $1").trim(),":"]}),a.jsx("span",{className:"text-sm font-medium text-green-900",children:typeof v=="number"?m.includes("Ratio")?`${(v*100).toFixed(1)}%`:m.includes("Rate")&&v<=100?`${v}%`:m.includes("Threshold")&&v<=100?`${v}%`:m.includes("Market")||m.includes("Industry")||m.includes("Premium")||m.includes("Revenue")||m.includes("Expense")||m.includes("Cost")?`$${v.toLocaleString()}`:`${v.toLocaleString()}`:String(v)})]},m))})]}),a.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[a.jsxs("h3",{className:"text-lg font-semibold text-yellow-900 mb-3 flex items-center",children:[a.jsx(Lr,{className:"w-5 h-5 mr-2"}),"AI Calculations & Analysis"]}),a.jsx("div",{className:"space-y-3",children:Object.entries(x.calculations).map(([m,v])=>a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("span",{className:"text-sm text-yellow-700 capitalize",children:[m.replace(/([A-Z])/g," $1").trim(),":"]}),a.jsx("span",{className:"text-sm font-medium text-yellow-900",children:typeof v=="object"&&v!==null?Object.entries(v).map(([y,g])=>a.jsxs("div",{className:"text-right",children:[a.jsxs("span",{className:"text-xs text-yellow-600",children:[y,": "]}),a.jsx("span",{className:"text-xs font-medium",children:String(g)})]},y)):String(v)})]},m))})]}),a.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[a.jsxs("h3",{className:"text-lg font-semibold text-purple-900 mb-3 flex items-center",children:[a.jsx(kv,{className:"w-5 h-5 mr-2"}),"AI Recommendations"]}),a.jsx("ul",{className:"space-y-2",children:x.recommendations.map((m,v)=>a.jsxs("li",{className:"flex items-start",children:[a.jsx("span",{className:"text-purple-600 mr-2",children:"•"}),a.jsx("span",{className:"text-sm text-purple-700",children:m})]},v))})]}),a.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[a.jsxs("h3",{className:"text-lg font-semibold text-red-900 mb-3 flex items-center",children:[a.jsx(Rs,{className:"w-5 h-5 mr-2"}),"Risk Factors to Monitor"]}),a.jsx("ul",{className:"space-y-2",children:x.riskFactors.map((m,v)=>a.jsxs("li",{className:"flex items-start",children:[a.jsx("span",{className:"text-red-600 mr-2",children:"⚠"}),a.jsx("span",{className:"text-sm text-red-700",children:m})]},v))})]}),a.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[a.jsxs("h3",{className:"text-lg font-semibold text-green-900 mb-3 flex items-center",children:[a.jsx(Is,{className:"w-5 h-5 mr-2"}),"Growth Opportunities"]}),a.jsx("ul",{className:"space-y-2",children:x.opportunities.map((m,v)=>a.jsxs("li",{className:"flex items-start",children:[a.jsx("span",{className:"text-green-600 mr-2",children:"💡"}),a.jsx("span",{className:"text-sm text-green-700",children:m})]},v))})]})]}):null})()]})})})]})};class dM{constructor(){this.defaultConfig={percentiles:[20,50,80],sortOrder:"desc",includeZeroAmounts:!1,groupByMonth:!0}}async generateImpactAnalysis(e,n,r,s){const i={...this.defaultConfig,...r};try{const o=await Kr(s);if(!o||o.length===0)throw new Error("No CSV data found for property");const l=this.processCSVDataToLineItems(o,n),c=l.filter(f=>f.category==="income"),u=l.filter(f=>f.category==="expense"),d=this.createImpactBuckets(c,i),h=this.createImpactBuckets(u,i);return{income:d,expenses:h,generatedAt:new Date().toISOString(),dateRange:this.calculateDateRange(o)}}catch(o){throw console.error("Error generating impact analysis:",o),o}}processCSVDataToLineItems(e,n){const r=new Map;return e.forEach(s=>{const i=s.account_categories||{},o=s.preview_data||[];Object.entries(i).forEach(([l,c])=>{const u=o.find(x=>x.account_name===l);if(!u)return;const d=u.time_series||{},h={};let f=0;if(Object.entries(d).forEach(([x,m])=>{const v=this.parseAmount(m);v!==null&&(h[x]=v,f+=Math.abs(v))}),f===0&&!this.defaultConfig.includeZeroAmounts||n&&(n.minAmount&&f<n.minAmount||n.maxAmount&&f>n.maxAmount||n.csvSources&&!n.csvSources.includes(s.file_name)))return;const p=`${l}_${s.file_name}`;if(r.has(p)){const x=r.get(p);x.totalAmount+=f,Object.entries(h).forEach(([m,v])=>{x.monthlyBreakdown[m]=(x.monthlyBreakdown[m]||0)+v})}else r.set(p,{accountName:l,totalAmount:f,percentageOfTotal:0,monthlyBreakdown:h,csvSource:s.file_name,category:this.determineCategory(l,c)})})}),Array.from(r.values())}createImpactBuckets(e,n){if(e.length===0)return{top20:[],top50:[],top80:[],bottom20:[],totalAmount:0,itemCount:0};const r=[...e].sort((u,d)=>n.sortOrder==="desc"?d.totalAmount-u.totalAmount:u.totalAmount-d.totalAmount),s=r.reduce((u,d)=>u+d.totalAmount,0),i=r.length;r.forEach(u=>{u.percentageOfTotal=s>0?u.totalAmount/s*100:0});const o=Math.ceil(i*.2),l=Math.ceil(i*.5),c=Math.ceil(i*.8);return{top20:r.slice(0,o),top50:r.slice(0,l),top80:r.slice(0,c),bottom20:r.slice(c),totalAmount:s,itemCount:i}}generateImpactSummaries(e){const n=[];return[e.top20,e.top50,e.top80,e.bottom20].forEach((r,s)=>{const i=["top20","top50","top80","bottom20"][s],o=r.reduce((c,u)=>c+u.totalAmount,0),l=e.totalAmount>0?o/e.totalAmount*100:0;n.push({percentile:i,totalAmount:o,percentageOfTotal:l,itemCount:r.length,averagePerItem:r.length>0?o/r.length:0})}),n}getMonthlyTrends(e){const n=[],r=e.totalAmount;return Object.entries(e.monthlyBreakdown).forEach(([s,i])=>{n.push({month:s,amount:i,percentage:r>0?i/r*100:0})}),n.sort((s,i)=>s.month.localeCompare(i.month))}exportToCSV(e){const r=[["Category","Percentile","Account Name","Total Amount","Percentage of Total","CSV Source","Monthly Breakdown"].join(",")];return["top20","top50","top80","bottom20"].forEach(s=>{e.income[s].forEach(o=>{const l=Object.entries(o.monthlyBreakdown).map(([c,u])=>`${c}:${u}`).join(";");r.push(["Income",s,`"${o.accountName}"`,o.totalAmount,o.percentageOfTotal.toFixed(2),`"${o.csvSource}"`,`"${l}"`].join(","))})}),["top20","top50","top80","bottom20"].forEach(s=>{e.expenses[s].forEach(o=>{const l=Object.entries(o.monthlyBreakdown).map(([c,u])=>`${c}:${u}`).join(";");r.push(["Expense",s,`"${o.accountName}"`,o.totalAmount,o.percentageOfTotal.toFixed(2),`"${o.csvSource}"`,`"${l}"`].join(","))})}),r.join(`
`)}parseAmount(e){if(e==null||e==="")return null;const n=parseFloat(e.toString().replace(/[,$]/g,""));return isNaN(n)?null:n}determineCategory(e,n){const r=e.toLowerCase();return r.includes("rent")||r.includes("revenue")||r.includes("income")||r.includes("tenant")||r.includes("resident")||r.includes("rental")||r.includes("fee")||r.includes("charge")?"income":r.includes("expense")||r.includes("cost")||r.includes("maintenance")||r.includes("repair")||r.includes("utility")||r.includes("insurance")||r.includes("tax")||r.includes("management")?"expense":typeof n=="string"&&n.toLowerCase().includes("income")?"income":"expense"}calculateDateRange(e){let n=new Date,r=new Date(0);return e.forEach(s=>{(s.preview_data||[]).forEach(o=>{const l=o.time_series||{};Object.keys(l).forEach(c=>{const u=new Date(c);u<n&&(n=u),u>r&&(r=u)})})}),{start:n.toISOString().split("T")[0],end:r.toISOString().split("T")[0]}}}const Tu=new dM;Ri.register($o,zo,vi,er,ph,mh,fh,hh);const hM=({items:t,title:e,color:n,maxItems:r=5})=>{const s=t.sort((d,h)=>h.totalAmount-d.totalAmount).slice(0,r);if(s.length===0)return a.jsx("div",{className:"card",children:a.jsx("div",{className:"text-center py-8",children:a.jsxs("div",{className:"text-gray-500",children:["No data available for ",e]})})});const i=new Set;s.forEach(d=>{Object.keys(d.monthlyBreakdown).forEach(h=>{i.add(h)})});const o=Array.from(i).sort(),l=s.map((d,h)=>{const f=o.map(v=>d.monthlyBreakdown[v]||0),p=n==="green"?120:0,x=70,m=50-h*8;return{label:d.accountName,data:f,borderColor:`hsl(${p}, ${x}%, ${m}%)`,backgroundColor:`hsla(${p}, ${x}%, ${m}%, 0.1)`,fill:!1,tension:.4,pointRadius:4,pointHoverRadius:6}}),c={labels:o,datasets:l},u={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:20,font:{size:12}}},title:{display:!0,text:e,font:{size:16,weight:"bold"}},tooltip:{mode:"index",intersect:!1,callbacks:{label:function(d){const h=d.dataset.label||"",f=d.parsed.y;return`${h}: $${f.toLocaleString()}`}}}},scales:{x:{display:!0,title:{display:!0,text:"Month"},grid:{display:!1}},y:{display:!0,title:{display:!0,text:"Amount ($)"},beginAtZero:!0,ticks:{callback:function(d){return"$"+d.toLocaleString()}}}},interaction:{mode:"nearest",axis:"x",intersect:!1}};return a.jsxs("div",{className:"card",children:[a.jsx(hx,{chartId:"impact-trend-chart",chartName:e,className:"mb-4"}),a.jsx("div",{className:"h-80",children:a.jsx(xh,{data:c,options:u})}),a.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["$",s.reduce((d,h)=>d+h.totalAmount,0).toLocaleString()]}),a.jsx("div",{className:"text-sm text-gray-500",children:"Total Impact"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:s.length}),a.jsx("div",{className:"text-sm text-gray-500",children:"Top Items"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:o.length}),a.jsx("div",{className:"text-sm text-gray-500",children:"Months Tracked"})]})]})]})},fM=({propertyId:t,dateRange:e})=>{const[n,r]=S.useState(null),[s,i]=S.useState(!0),[o,l]=S.useState(null),[c,u]=S.useState("income"),[d,h]=S.useState(new Set(["top20"])),[f,p]=S.useState(null),[x,m]=S.useState(!1),v=S.useCallback(async()=>{try{i(!0),l(null);const C=e?{dateRange:e,minAmount:0}:void 0,N=vn.getCurrentUser(),j=N==null?void 0:N.id,w=await Tu.generateImpactAnalysis(t,C,void 0,j);r(w)}catch(C){console.error("Error loading impact analysis:",C),l("Failed to load impact analysis")}finally{i(!1)}},[t,e]);S.useEffect(()=>{v()},[v]);const y=C=>{const N=new Set(d);N.has(C)?N.delete(C):N.add(C),h(N)},g=()=>{if(!n)return;const C=Tu.exportToCSV(n),N=new Blob([C],{type:"text/csv"}),j=window.URL.createObjectURL(N),w=document.createElement("a");w.href=j,w.download=`impact-analysis-${t}-${new Date().toISOString().split("T")[0]}.csv`,w.click(),window.URL.revokeObjectURL(j)};if(s)return a.jsx("div",{className:"card",children:a.jsxs("div",{className:"flex items-center justify-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),a.jsx("span",{className:"ml-2 text-gray-600",children:"Loading impact analysis..."})]})});if(o)return a.jsx("div",{className:"card",children:a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"text-red-600 mb-2",children:"Error loading impact analysis"}),a.jsx("div",{className:"text-sm text-gray-500",children:o}),a.jsx("button",{onClick:v,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Retry"})]})});if(!n)return a.jsx("div",{className:"card",children:a.jsx("div",{className:"text-center py-8",children:a.jsx("div",{className:"text-gray-600",children:"No impact analysis data available"})})});const b=c==="income"?n.income:n.expenses,_=Tu.generateImpactSummaries(b);return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[a.jsx(Lr,{className:"w-5 h-5 mr-2"}),"Line Item Impact Analysis"]}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Identify the most impactful income and expense items by dollar value"})]}),a.jsxs("button",{onClick:g,className:"flex items-center px-3 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:[a.jsx(Ko,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]}),a.jsxs("div",{className:"flex space-x-1 bg-gray-100 rounded-lg p-1",children:[a.jsxs("button",{onClick:()=>u("income"),className:`flex-1 flex items-center justify-center px-4 py-2 rounded-md text-sm font-medium transition-colors ${c==="income"?"bg-white text-green-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[a.jsx(Is,{className:"w-4 h-4 mr-2"}),"Income Impact"]}),a.jsxs("button",{onClick:()=>u("expenses"),className:`flex-1 flex items-center justify-center px-4 py-2 rounded-md text-sm font-medium transition-colors ${c==="expenses"?"bg-white text-red-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[a.jsx(hd,{className:"w-4 h-4 mr-2"}),"Expense Impact"]})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:_.map(C=>a.jsx(pM,{summary:C,color:c==="income"?"green":"red",onClick:()=>y(C.percentile),isExpanded:d.has(C.percentile)},C.percentile))}),a.jsx(hM,{items:b.top20,title:`Top 20% ${c==="income"?"Income":"Expense"} Items Trend`,color:c==="income"?"green":"red",maxItems:5}),a.jsxs("div",{className:"card",children:[a.jsxs("h4",{className:"text-md font-semibold text-gray-900 mb-4",children:[c==="income"?"Income":"Expense"," Line Items by Impact"]}),a.jsx("div",{className:"space-y-4",children:_.map(C=>a.jsx(mM,{title:`Top ${C.percentile.replace("top","").replace("bottom","Bottom ")}%`,items:b[C.percentile],totalAmount:C.totalAmount,itemCount:C.itemCount,color:c==="income"?"green":"red",icon:c==="income"?a.jsx(Is,{className:"w-4 h-4"}):a.jsx(hd,{className:"w-4 h-4"})},C.percentile))})]}),x&&f&&a.jsx(gM,{item:f,onClose:()=>m(!1)})]})},pM=({summary:t,color:e,onClick:n,isExpanded:r})=>{const s=e==="green"?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800";return a.jsxs("div",{className:`card cursor-pointer transition-all hover:shadow-md ${s}`,onClick:n,children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"text-sm font-medium",children:[t.percentile.replace("top","Top ").replace("bottom","Bottom "),"%"]}),a.jsxs("div",{className:"text-2xl font-bold",children:["$",t.totalAmount.toLocaleString()]}),a.jsxs("div",{className:"text-xs opacity-75",children:[t.percentageOfTotal.toFixed(1),"% of total"]})]}),a.jsx("div",{className:"flex items-center",children:r?a.jsx(Lg,{className:"w-5 h-5"}):a.jsx(nh,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"mt-2 text-xs opacity-75",children:[t.itemCount," items • Avg: $",t.averagePerItem.toLocaleString()]})]})},mM=({title:t,items:e,totalAmount:n,itemCount:r,color:s,icon:i})=>{const[o,l]=S.useState(!1),c=d=>{console.log("Item clicked:",d)};if(e.length===0)return null;const u=s==="green"?"text-green-600 bg-green-50":"text-red-600 bg-red-50";return a.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 cursor-pointer hover:bg-gray-50",onClick:()=>l(!o),children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[i,a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:t}),a.jsxs("div",{className:"text-sm text-gray-500",children:[r," items • $",n.toLocaleString()]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${u}`,children:[(n/(n+1e3)*100).toFixed(1),"% of total"]}),o?a.jsx(Lg,{className:"w-4 h-4 text-gray-400"}):a.jsx(nh,{className:"w-4 h-4 text-gray-400"})]})]}),o&&a.jsx("div",{className:"border-t border-gray-200 p-4 bg-gray-50",children:a.jsx("div",{className:"space-y-2",children:e.map((d,h)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded border hover:shadow-sm cursor-pointer",onClick:()=>c(d),children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium text-gray-900",children:d.accountName}),a.jsx("div",{className:"text-sm text-gray-500",children:d.csvSource})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"font-medium text-gray-900",children:["$",d.totalAmount.toLocaleString()]}),a.jsxs("div",{className:"text-sm text-gray-500",children:[d.percentageOfTotal.toFixed(1),"%"]})]})]},h))})})]})},gM=({item:t,onClose:e})=>{const n=Tu.getMonthlyTrends(t);return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t.accountName}),a.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:"×"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-500",children:"Total Amount"}),a.jsxs("div",{className:"text-xl font-semibold",children:["$",t.totalAmount.toLocaleString()]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-500",children:"Percentage of Total"}),a.jsxs("div",{className:"text-xl font-semibold",children:[t.percentageOfTotal.toFixed(1),"%"]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"CSV Source"}),a.jsx("div",{className:"text-sm font-medium",children:t.csvSource})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"Monthly Breakdown"}),a.jsx("div",{className:"space-y-2",children:n.map((r,s)=>a.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[a.jsx("div",{className:"text-sm font-medium",children:r.month}),a.jsxs("div",{className:"text-sm",children:["$",r.amount.toLocaleString()]})]},s))})]})]})]})})})},xM=()=>{const[t,e]=S.useState("2024"),[n,r]=S.useState([]),[s,i]=S.useState(""),[o,l]=S.useState([]),[c,u]=S.useState(!0),[d,h]=S.useState(null);S.useEffect(()=>{f()},[]);const f=async()=>{try{let A=[];try{const D=await fetch("http://localhost:5001/api/processed-data");if(D.ok){const L=await D.json();if(console.log("🏠 Local financials data loaded:",L),L.success&&L.data){const W=new Set;Object.keys(L.data).forEach(V=>{W.add(V)});const U=Array.from(W).map(V=>({id:`local-${V.toLowerCase()}`,name:V,address:"Local Data Source",type:"Apartment Complex",total_units:26}));A=[...U],console.log("🏠 Local financials properties:",U)}}}catch{console.log("⚠️ Local financials data not available, trying API...")}if(A.length===0){const D=await fn.getProperties();D.success&&D.data&&(A=D.data)}r(A),A.length>0&&i(A[0].id)}catch(A){console.error("Error loading properties:",A),h("Failed to load properties")}},p=S.useCallback(async()=>{try{u(!0),h(null);let A=[];const D=await Kr();console.log("📊 Using Supabase data for financials:",D.length,"active CSVs"),D.length>0?(console.log("📊 Processing CSV data for financials:",D.map(L=>L.file_name)),D.forEach(L=>{const W=L.file_name,U=L.account_categories,V=L.preview_data;console.log(`📁 Processing CSV: ${W} for financials`),Object.entries(U).forEach(([$,M])=>{const O=V.find(T=>{var F;return((F=T.account_name)==null?void 0:F.trim())===$});O&&O.time_series&&(console.log(`🔍 Processing account: ${$} (${M})`),Object.entries(O.time_series).filter(([F,R])=>F.toLowerCase()!=="total"&&F.toLowerCase()!=="sum"&&F.toLowerCase()!=="grand total"&&typeof R=="number"&&R!==0).forEach(([F,R])=>{let B=A.find(J=>J.date===F);if(B||(B={id:`${L.id}-${F}`,property_id:s,date:F,month:F,revenue:"0",occupancy_rate:"95",maintenance_cost:"0",utilities_cost:"0",insurance_cost:"0",property_tax:"0",other_expenses:"0",expenses:"0",netIncome:"0",notes:"",property_name:"Chico"},A.push(B)),M==="income"){const J=parseFloat(B.revenue)||0;B.revenue=(J+R).toString()}else if(M==="expense"){const J=parseFloat(B.expenses||"0")||0;B.expenses=(J+R).toString();const G=$.toLowerCase();if(G.includes("maintenance")||G.includes("repair")){const Z=parseFloat(B.maintenance_cost)||0;B.maintenance_cost=(Z+R).toString()}else if(G.includes("utility")||G.includes("water")||G.includes("garbage")){const Z=parseFloat(B.utilities_cost)||0;B.utilities_cost=(Z+R).toString()}else if(G.includes("insurance")){const Z=parseFloat(B.insurance_cost)||0;B.insurance_cost=(Z+R).toString()}else if(G.includes("tax")){const Z=parseFloat(B.property_tax)||0;B.property_tax=(Z+R).toString()}else{const Z=parseFloat(B.other_expenses)||0;B.other_expenses=(Z+R).toString()}}}))})}),A.forEach(L=>{const W=parseFloat(L.revenue)||0,U=parseFloat(L.expenses||"0")||0;L.netIncome=(W-U).toString()}),A.sort((L,W)=>new Date(W.date).getTime()-new Date(L.date).getTime()),console.log("📊 Processed financial data:",A.length,"months")):console.log("📊 No active CSV data found for financials"),l(A)}catch(A){console.error("Error loading property data:",A),h("Failed to load property data"),l([])}finally{u(!1)}},[s]);S.useEffect(()=>{s&&p()},[s,p]);const x=async()=>{try{const{getCSVData:A}=await Mn(()=>Promise.resolve().then(()=>Yw),void 0),D=await A();if(!D||D.length===0)return{totalRevenue:0,totalExpenses:0,netIncome:0,profitMargin:0,monthlyAverage:0};const L=D.filter(R=>R.is_active!==!1);let W=0,U=0,V=0;L.forEach(R=>{const B=R.file_name||R.fileName,J=R.total_records||R.totalRecords,G=R.account_categories||R.accountCategories,Z=R.preview_data||R.previewData,te=R.file_type||R.fileType;if(console.log(`📁 Financials processing CSV: ${B} (${J} records)`),te==="cash_flow"){console.log("💰 Financials processing CASH FLOW CSV - Looking for KEY METRICS...");const le=[{name:"Total Operating Income",type:"income"},{name:"NOI - Net Operating Income",type:"net_income"},{name:"Total Operating Expense",type:"expense"}];let he=!1;le.forEach(de=>{const ae=Z.find(Q=>{var ie;return(((ie=Q.account_name)==null?void 0:ie.trim().toLowerCase())||"").includes(de.name.toLowerCase())});if(ae&&ae.time_series){he=!0,console.log(`🎯 Financials FOUND KEY METRIC: ${ae.account_name} (${de.type})`);const Q=Object.entries(ae.time_series).filter(([ne,ie])=>ne.toLowerCase()!=="total"&&ne.toLowerCase()!=="sum"&&ne.toLowerCase()!=="grand total"&&typeof ie=="number").map(([,ne])=>ne);if(Q.length>0){const ne=Q.reduce((ie,oe)=>ie+oe,0);de.type==="income"?(W+=ne,console.log(`  💰 Financials ${ae.account_name}: Total Income = $${ne.toLocaleString()}`)):de.type==="expense"&&(U+=ne,console.log(`  💸 Financials ${ae.account_name}: Total Expense = $${ne.toLocaleString()}`))}}}),he?console.log("✅ Financials using KEY METRICS for calculation"):(console.log("⚠️ Financials key metrics not found, falling back to individual account categorization..."),Object.entries(G).forEach(([de,ae])=>{const Q=Z.find(ne=>{var ie;return((ie=ne.account_name)==null?void 0:ie.trim())===de});if(Q&&Q.time_series){const ne=Object.entries(Q.time_series).filter(([ie,oe])=>ie.toLowerCase()!=="total"&&ie.toLowerCase()!=="sum"&&ie.toLowerCase()!=="grand total"&&typeof oe=="number").map(([,ie])=>ie);if(ne.length>0){const ie=ne.reduce((oe,be)=>oe+be,0);ae==="income"?W+=ie:ae==="expense"&&(U+=ie)}}}))}else Object.entries(G).forEach(([le,he])=>{const de=Z.find(ae=>{var Q;return((Q=ae.account_name)==null?void 0:Q.trim())===le});if(de&&de.time_series){const ae=Object.entries(de.time_series).filter(([Q,ne])=>Q.toLowerCase()!=="total"&&Q.toLowerCase()!=="sum"&&Q.toLowerCase()!=="grand total"&&typeof ne=="number").map(([,Q])=>Q);if(ae.length>0){const Q=ae.reduce((ne,ie)=>ne+ie,0);he==="income"?W+=Q:he==="expense"&&(U+=Q)}}});V+=J});const $=W,M=U,O=W-U,T=$>0?O/$*100:0,F=V>0?$/V:0;return console.log("📊 Financials calculated metrics:"),console.log(`  💰 Total Revenue (Total Operating Income): $${$.toLocaleString()}`),console.log(`  💸 Total Expenses (Total Operating Expense): $${M.toLocaleString()}`),console.log(`  📊 Net Income (Net Operating Income): $${O.toLocaleString()}`),console.log(`  📈 Profit Margin: ${T.toFixed(2)}%`),{totalRevenue:$,totalExpenses:M,netIncome:O,profitMargin:T,monthlyAverage:F}}catch(A){return console.error("Error calculating financial summary from CSV data:",A),{totalRevenue:0,totalExpenses:0,netIncome:0,profitMargin:0,monthlyAverage:0}}},m=async()=>{try{console.log("🔄 Generating monthly data from CSV...");const{getCSVData:A}=await Mn(()=>Promise.resolve().then(()=>Yw),void 0),D=await A();if(console.log("📊 CSV data retrieved:",D.length,"files"),!D||D.length===0)return console.log("⚠️ No CSV data found"),[];const L=D.filter(V=>V.is_active!==!1);console.log("📊 Active CSVs:",L.length);const W=new Map;L.forEach(V=>{const $=V.file_name||V.fileName,M=V.preview_data||V.previewData,O=V.file_type||V.fileType;if(console.log(`📁 Processing CSV: ${$} (${O})`),console.log("📋 Preview data sample:",M==null?void 0:M.slice(0,2)),O==="cash_flow"){console.log("💰 Processing CASH FLOW CSV for monthly data...");const T=[{name:"Total Operating Income",type:"income"},{name:"NOI - Net Operating Income",type:"net_income"},{name:"Total Operating Expense",type:"expense"}];let F=!1;if(T.forEach(R=>{const B=M.find(J=>{var te;const G=((te=J.account_name)==null?void 0:te.trim().toLowerCase())||"",Z=R.name.toLowerCase();return console.log(`🔍 Checking "${G}" against "${Z}"`),G.includes(Z)});B&&B.time_series?(F=!0,console.log(`🎯 FOUND KEY METRIC: ${B.account_name} (${R.type})`),console.log("📊 Time Series Data:",B.time_series),Object.entries(B.time_series).forEach(([J,G])=>{if(!(J.toLowerCase()==="total"||J.toLowerCase()==="sum"||J.toLowerCase()==="grand total")&&typeof G=="number"){W.has(J)||W.set(J,{revenue:0,expenses:0,netIncome:0,margin:0});const Z=W.get(J);R.type==="income"?(Z.revenue+=G,console.log(`  💰 ${J}: Revenue += ${G}`)):R.type==="expense"&&(Z.expenses+=G,console.log(`  💸 ${J}: Expenses += ${G}`))}})):console.log(`❌ Key metric "${R.name}" not found`)}),!F){console.log("⚠️ Key metrics not found, falling back to individual categorization...");const R=V.account_categories||V.accountCategories;Object.entries(R).forEach(([B,J])=>{const G=M.find(Z=>{var te;return((te=Z.account_name)==null?void 0:te.trim())===B});G&&G.time_series&&Object.entries(G.time_series).forEach(([Z,te])=>{if(!(Z.toLowerCase()==="total"||Z.toLowerCase()==="sum"||Z.toLowerCase()==="grand total")&&typeof te=="number"){W.has(Z)||W.set(Z,{revenue:0,expenses:0,netIncome:0,margin:0});const le=W.get(Z);J==="income"?le.revenue+=te:J==="expense"&&(le.expenses+=te)}})})}}else{const T=V.account_categories||V.accountCategories;Object.entries(T).forEach(([F,R])=>{const B=M.find(J=>{var G;return((G=J.account_name)==null?void 0:G.trim())===F});B&&B.time_series&&Object.entries(B.time_series).forEach(([J,G])=>{if(!(J.toLowerCase()==="total"||J.toLowerCase()==="sum"||J.toLowerCase()==="grand total")&&typeof G=="number"){W.has(J)||W.set(J,{revenue:0,expenses:0,netIncome:0,margin:0});const Z=W.get(J);R==="income"?Z.revenue+=G:R==="expense"&&(Z.expenses+=G)}})})}});const U=Array.from(W.entries()).map(([V,$])=>{const M=$.revenue-$.expenses,O=$.revenue>0?M/$.revenue*100:0;return{month:V,revenue:$.revenue,expenses:$.expenses,netIncome:M,margin:O}});return U.sort((V,$)=>{const M=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],O=V.month.split(" ")[0],T=$.month.split(" ")[0];return M.indexOf(O)-M.indexOf(T)}),console.log("📊 Financials generated monthly data:",U),U}catch(A){return console.error("Error generating monthly data from CSV:",A),[]}},v=S.useCallback(()=>{if(!o||o.length===0)return[];if(o.length===1&&o[0].revenue.includes("479482")){const M=parseFloat(o[0].revenue)*.6,O=M*.25,T=M*.2,F=M*.15,R=M*.25,B=M*.15;return[{category:"Maintenance & Repairs",amount:O,percentage:25,color:"red"},{category:"Utilities",amount:T,percentage:20,color:"blue"},{category:"Insurance",amount:F,percentage:15,color:"green"},{category:"Property Tax",amount:R,percentage:25,color:"purple"},{category:"Other Expenses",amount:B,percentage:15,color:"orange"}]}const A=o.reduce(($,M)=>$+(parseFloat(M.maintenance_cost)||0),0),D=o.reduce(($,M)=>$+(parseFloat(M.utilities_cost)||0),0),L=o.reduce(($,M)=>$+(parseFloat(M.insurance_cost)||0),0),W=o.reduce(($,M)=>$+(parseFloat(M.property_tax)||0),0),U=o.reduce(($,M)=>$+(parseFloat(M.other_expenses)||0),0),V=A+D+L+W+U;return V===0?[]:[{category:"Maintenance & Repairs",amount:A,percentage:A/V*100,color:"red"},{category:"Utilities",amount:D,percentage:D/V*100,color:"blue"},{category:"Insurance",amount:L,percentage:L/V*100,color:"green"},{category:"Property Tax",amount:W,percentage:W/V*100,color:"purple"},{category:"Other Expenses",amount:U,percentage:U/V*100,color:"orange"}]},[o]),y=S.useCallback(()=>{if(!o||o.length===0)return[];if(o.length===1&&o[0].revenue.includes("479482")){const A=parseFloat(o[0].revenue);return[{source:"Rent Payments",amount:A*.85,percentage:85},{source:"Late Fees",amount:A*.05,percentage:5},{source:"Application Fees",amount:A*.04,percentage:4},{source:"Pet Fees",amount:A*.03,percentage:3},{source:"Other Income",amount:A*.03,percentage:3}]}return[{source:"Rent Payments",amount:5e5,percentage:85},{source:"Late Fees",amount:3e4,percentage:5},{source:"Application Fees",amount:24e3,percentage:4},{source:"Pet Fees",amount:18e3,percentage:3},{source:"Other Income",amount:18e3,percentage:3}]},[o]),[g,b]=S.useState({totalRevenue:0,totalExpenses:0,netIncome:0,profitMargin:0,monthlyAverage:0}),[_,C]=S.useState([]),[N,j]=S.useState([]),[w,k]=S.useState([]),E=S.useCallback(async()=>{try{console.log("🔄 Loading financial data from CSV...");const A=await x(),D=await m(),L=v(),W=y();console.log("📊 Financial summary loaded:",A),console.log("📅 Monthly data loaded:",D),b(A),C(D),j(L),k(W)}catch(A){console.error("Error loading financial data:",A)}},[v,y]);S.useEffect(()=>{E()},[v,y,E]);const P=A=>({red:"bg-red-500",blue:"bg-blue-500",green:"bg-green-500",purple:"bg-purple-500",orange:"bg-orange-500",yellow:"bg-yellow-500"})[A]||"bg-gray-500";return console.log("🔍 Financials Debug:",{propertyDataLength:o.length,propertyData:o,financialSummary:g,monthlyDataLength:_.length}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Financials"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:"Real-time financial data from CSV uploads"})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("div",{className:"flex items-center space-x-2",children:a.jsxs("select",{value:s,onChange:A=>i(A.target.value),className:"border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",disabled:c,children:[a.jsx("option",{value:"",children:"Select Property"}),n.map(A=>a.jsx("option",{value:A.id,children:A.name},A.id))]})}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Fs,{className:"w-4 h-4 text-gray-400 dark:text-gray-500"}),a.jsxs("select",{value:t,onChange:A=>e(A.target.value),className:"border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[a.jsx("option",{value:"2024",children:"2024"}),a.jsx("option",{value:"2023",children:"2023"}),a.jsx("option",{value:"2022",children:"2022"})]})]}),a.jsxs("button",{onClick:E,disabled:c,className:"btn-secondary flex items-center space-x-2 dark:bg-gray-700 dark:text-white dark:border-gray-600 dark:hover:bg-gray-600",children:[a.jsx(Ps,{className:`w-4 h-4 ${c?"animate-spin":""}`}),a.jsx("span",{children:"Refresh"})]}),a.jsxs("button",{className:"btn-secondary flex items-center space-x-2 dark:bg-gray-700 dark:text-white dark:border-gray-600 dark:hover:bg-gray-600",children:[a.jsx(Ko,{className:"w-4 h-4"}),a.jsx("span",{children:"Export"})]})]})]}),d&&a.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-md p-4 flex items-center",children:[a.jsx(Rs,{className:"w-5 h-5 text-red-400 dark:text-red-500 mr-3"}),a.jsx("p",{className:"text-sm text-red-800 dark:text-red-300",children:d})]}),c&&a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading financial data..."})]})}),!c&&!d&&o.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(br,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Financial Data"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Upload CSV files to see financial data for this property."}),a.jsx("button",{className:"btn-primary",children:"Upload CSV Data"})]}),!c&&!d&&o.length>0&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[a.jsx("div",{className:"metric-card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Revenue"}),a.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:["$",g.totalRevenue.toLocaleString()]}),a.jsx("p",{className:"text-sm text-green-600 dark:text-green-400 mt-1",children:"+12.5% vs last year"})]}),a.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900/20 rounded-lg flex items-center justify-center",children:a.jsx(br,{className:"w-6 h-6 text-green-600 dark:text-green-400"})})]})}),a.jsx("div",{className:"metric-card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Expenses"}),a.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:["$",g.totalExpenses.toLocaleString()]}),a.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mt-1",children:"+3.2% vs last year"})]}),a.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900/20 rounded-lg flex items-center justify-center",children:a.jsx(hd,{className:"w-6 h-6 text-red-600 dark:text-red-400"})})]})}),a.jsx("div",{className:"metric-card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Net Income"}),a.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:["$",g.netIncome.toLocaleString()]}),a.jsx("p",{className:"text-sm text-green-600 dark:text-green-400 mt-1",children:"+18.7% vs last year"})]}),a.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:a.jsx(Is,{className:"w-6 h-6 text-green-600"})})]})}),a.jsx("div",{className:"metric-card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Profit Margin"}),a.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:[g.profitMargin,"%"]}),a.jsx("p",{className:"text-sm text-green-600 dark:text-green-400 mt-1",children:"+2.1% vs last year"})]}),a.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/20 rounded-lg flex items-center justify-center",children:a.jsx(eT,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})})]})}),a.jsx("div",{className:"metric-card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Monthly Average"}),a.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:["$",g.monthlyAverage.toLocaleString()]}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Revenue per month"})]}),a.jsx("div",{className:"w-12 h-12 bg-purple-100 dark:bg-purple-900/20 rounded-lg flex items-center justify-center",children:a.jsx(Fs,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})})]})})]}),a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Monthly Financial Breakdown"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-gray-200",children:[a.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Month"}),a.jsx("th",{className:"text-right py-3 px-4 font-medium text-gray-900",children:"Revenue"}),a.jsx("th",{className:"text-right py-3 px-4 font-medium text-gray-900",children:"Expenses"}),a.jsx("th",{className:"text-right py-3 px-4 font-medium text-gray-900",children:"Net Income"}),a.jsx("th",{className:"text-right py-3 px-4 font-medium text-gray-900",children:"Margin"})]})}),a.jsx("tbody",{children:_.map((A,D)=>a.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[a.jsx("td",{className:"py-3 px-4 font-medium text-gray-900",children:A.month}),a.jsxs("td",{className:"text-right py-3 px-4 text-gray-900",children:["$",A.revenue.toLocaleString()]}),a.jsxs("td",{className:"text-right py-3 px-4 text-gray-900",children:["$",A.expenses.toLocaleString()]}),a.jsxs("td",{className:"text-right py-3 px-4 text-gray-900",children:["$",A.netIncome.toLocaleString()]}),a.jsxs("td",{className:"text-right py-3 px-4 text-gray-900",children:[A.margin,"%"]})]},D))})]})})]}),a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Expense Breakdown"}),a.jsx("div",{className:"space-y-4",children:N.map((A,D)=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:`w-4 h-4 rounded-full ${P(A.color)}`}),a.jsx("span",{className:"text-sm font-medium text-gray-900",children:A.category})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["$",A.amount.toLocaleString()]}),a.jsxs("p",{className:"text-xs text-gray-500",children:[A.percentage,"%"]})]})]},D))})]}),a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Revenue Sources"}),a.jsx("div",{className:"space-y-4",children:w.map((A,D)=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-4 h-4 bg-green-500 rounded-full"}),a.jsx("span",{className:"text-sm font-medium text-gray-900",children:A.source})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["$",A.amount.toLocaleString()]}),a.jsxs("p",{className:"text-xs text-gray-500",children:[A.percentage,"%"]})]})]},D))})]}),a.jsx(fM,{propertyId:s,dateRange:{start:`${t}-01-01`,end:`${t}-12-31`}})]})]})},yM=()=>{const[t,e]=S.useState("all"),[n,r]=S.useState("all"),s=[{id:"1",title:"Monthly Financial Summary",type:"financial",description:"Complete financial overview including revenue, expenses, and profit margins",createdDate:"2024-01-15",status:"ready",size:"2.4 MB",format:"PDF"},{id:"2",title:"Occupancy Rate Analysis",type:"occupancy",description:"Detailed occupancy rates and trends across all properties",createdDate:"2024-01-14",status:"ready",size:"1.8 MB",format:"Excel"},{id:"3",title:"Maintenance Cost Report",type:"maintenance",description:"Breakdown of maintenance costs and repair history",createdDate:"2024-01-13",status:"ready",size:"3.1 MB",format:"PDF"},{id:"4",title:"Tenant Demographics",type:"tenant",description:"Analysis of tenant demographics and lease patterns",createdDate:"2024-01-12",status:"generating",size:"N/A",format:"CSV"},{id:"5",title:"Annual Property Performance",type:"financial",description:"Year-end performance analysis for all properties",createdDate:"2024-01-10",status:"ready",size:"4.2 MB",format:"PDF"},{id:"6",title:"Rent Roll Analysis",type:"tenant",description:"Current rent roll with lease expiration dates",createdDate:"2024-01-08",status:"failed",size:"N/A",format:"Excel"}],i=[{name:"Financial Summary",description:"Monthly revenue, expenses, and profit analysis",icon:br,color:"green"},{name:"Occupancy Report",description:"Property occupancy rates and trends",icon:zn,color:"blue"},{name:"Maintenance Report",description:"Maintenance costs and work order history",icon:Lr,color:"orange"},{name:"Tenant Report",description:"Tenant demographics and lease information",icon:wr,color:"purple"}],o=u=>{switch(u){case"ready":return"bg-green-100 text-green-800";case"generating":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},l=u=>{switch(u){case"financial":return br;case"occupancy":return zn;case"maintenance":return Lr;case"tenant":return wr;default:return Mt}},c=s.filter(u=>{const d=t==="all"||u.type===t,h=n==="all"||u.format===n;return d&&h});return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Reports"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:"Generate and manage your property reports"})]}),a.jsxs("button",{className:"btn-primary flex items-center space-x-2 dark:bg-blue-700 dark:hover:bg-blue-600",children:[a.jsx(rh,{className:"w-4 h-4"}),a.jsx("span",{children:"New Report"})]})]}),a.jsxs("div",{className:"card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Quick Report Templates"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:i.map((u,d)=>{const h=u.icon;return a.jsxs("button",{className:"p-4 border border-gray-200 dark:border-gray-600 rounded-lg hover:border-primary-300 dark:hover:border-primary-600 hover:bg-primary-50 dark:hover:bg-primary-900/20 transition-colors duration-200 text-left bg-gray-50 dark:bg-gray-700",children:[a.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center mb-3 ${u.color==="green"?"bg-green-100 dark:bg-green-900/20":u.color==="blue"?"bg-blue-100 dark:bg-blue-900/20":u.color==="orange"?"bg-orange-100 dark:bg-orange-900/20":"bg-purple-100 dark:bg-purple-900/20"}`,children:a.jsx(h,{className:`w-5 h-5 ${u.color==="green"?"text-green-600 dark:text-green-400":u.color==="blue"?"text-blue-600 dark:text-blue-400":u.color==="orange"?"text-orange-600 dark:text-orange-400":"text-purple-600 dark:text-purple-400"}`})}),a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-1",children:u.name}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:u.description})]},d)})})]}),a.jsx("div",{className:"card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(O2,{className:"w-4 h-4 text-gray-400 dark:text-gray-500"}),a.jsxs("select",{value:t,onChange:u=>e(u.target.value),className:"border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[a.jsx("option",{value:"all",children:"All Types"}),a.jsx("option",{value:"financial",children:"Financial"}),a.jsx("option",{value:"occupancy",children:"Occupancy"}),a.jsx("option",{value:"maintenance",children:"Maintenance"}),a.jsx("option",{value:"tenant",children:"Tenant"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Mt,{className:"w-4 h-4 text-gray-400 dark:text-gray-500"}),a.jsxs("select",{value:n,onChange:u=>r(u.target.value),className:"border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[a.jsx("option",{value:"all",children:"All Formats"}),a.jsx("option",{value:"PDF",children:"PDF"}),a.jsx("option",{value:"Excel",children:"Excel"}),a.jsx("option",{value:"CSV",children:"CSV"})]})]})]})}),a.jsxs("div",{className:"card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Recent Reports"}),a.jsx("div",{className:"space-y-4",children:c.map(u=>{const d=l(u.type);return a.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200 bg-gray-50 dark:bg-gray-700",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-10 h-10 bg-gray-100 dark:bg-gray-600 rounded-lg flex items-center justify-center",children:a.jsx(d,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:u.title}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:u.description}),a.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[a.jsxs("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:["Created: ",new Date(u.createdDate).toLocaleDateString()]}),a.jsxs("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:["Size: ",u.size]}),a.jsxs("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:["Format: ",u.format]})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${o(u.status)}`,children:u.status}),a.jsxs("div",{className:"flex space-x-1",children:[a.jsx("button",{className:"p-2 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200",children:a.jsx(qr,{className:"w-4 h-4"})}),a.jsx("button",{className:"p-2 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200",disabled:u.status!=="ready",children:a.jsx(Ko,{className:"w-4 h-4"})})]})]})]},u.id)})})]}),c.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Mt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No reports found"}),a.jsx("p",{className:"text-gray-500",children:"Try adjusting your filter criteria or create a new report."})]})]})},vM=()=>{const[t,e]=S.useState([]),[n,r]=S.useState(!1),[s,i]=S.useState(null),[o,l]=S.useState(""),[c,u]=S.useState([]),[d,h]=S.useState(null),[f,p]=S.useState("checking"),[x,m]=S.useState("supabase"),[v,y]=S.useState([]),[g,b]=S.useState(null),[_,C]=S.useState(!1),[N,j]=S.useState("idle"),w=S.useRef(null);S.useEffect(()=>{k(),E(),P(),A()},[]);const k=async()=>{try{await ui.initialize();const O=ui.getAllProperties();y(O),console.log("🏢 Unified properties loaded:",O.length)}catch(O){console.error("Failed to initialize unified service:",O)}},E=async()=>{try{const O=await fn.checkBackendStatus();O.supabase||O.local?p("connected"):p("disconnected")}catch{p("disconnected")}},P=async()=>{try{const O=await fn.getProperties();O.success&&O.data&&u(O.data)}catch(O){console.error("Failed to load properties:",O)}},A=async()=>{try{const O=await fn.getUploadHistory();O.success&&e(O.data)}catch(O){console.error("Failed to load upload history:",O)}},D=async O=>{var F;const T=(F=O.target.files)==null?void 0:F[0];if(T){r(!0),i(null),h(null);try{if(!o){i("Please select a property first"),r(!1);return}const R=c.find(Z=>Z.id===o),B=R==null?void 0:R.name;if(x==="local"){console.log("🏠 Using local processing mode..."),await L(T,B);return}console.log("🗄️ Using Supabase processing mode...");try{await fn.getHealth()}catch{i("Supabase backend not available. Please switch to Local mode or start the Supabase backend."),r(!1);return}const J=await fn.validateCSV(T,B);if(h(J.data),!J.data.isValid){i(`CSV validation failed: ${J.data.errors.length} errors found`),r(!1);return}const G=await fn.uploadCSV(T,o);G.success?(await A(),window.dispatchEvent(new CustomEvent("dataUpdated",{detail:{propertyId:o,uploadResult:G.data}})),i(null)):i(G.message||"Upload failed")}catch(R){console.error("Upload error:",R),R instanceof Error&&(R.message.includes("fetch")||R.message.includes("Network"))?(console.warn("Network error, falling back to local processing"),await L(T)):i(R instanceof Error?R.message:"Error processing CSV file")}finally{r(!1),w.current&&(w.current.value="")}}},L=async(O,T)=>{try{console.log("🏠 Processing CSV locally...");let F=!1;try{await fn.getHealth(),F=!0}catch{console.log("Backend not available, using pure local processing"),F=!1}if(F){const R=await fn.processCSVLocal(O,T);R.success?(b(R.data),i(null),window.dispatchEvent(new CustomEvent("dataUpdated",{detail:{propertyId:o,uploadResult:R.data,processingMode:"local"}})),console.log("✅ Local processing completed:",R.data)):i(R.message||"Local processing failed")}else await W(O,T)}catch(F){console.error("Local processing error:",F),i(F instanceof Error?F.message:"Error processing CSV file locally")}},W=async(O,T)=>{try{console.log("🏠 Pure local processing (no backend)...");const R=(await O.text()).split(`
`).filter(ae=>ae.trim());if(R.length<2)throw new Error("No data rows found in CSV");const B=R[0].split(",").map(ae=>ae.trim());console.log("📋 Detected columns:",B);const J=B.filter(ae=>{const Q=ae.toLowerCase().trim();return/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)\s+\d{4}$/i.test(Q)}),G=J.length>0;console.log("📊 Format detected:",G?"month-column":"traditional");const Z=[],te=new Set;let le=0;for(let ae=1;ae<R.length;ae++){const Q=R[ae].split(",").map(ie=>ie.trim());if(Q.length!==B.length)continue;const ne=Q[0];if(!(!ne||/^(income|expense|totals?)$/i.test(ne)))if(te.add(ne),G)for(const ie of J){const oe=B.indexOf(ie),be=Q[oe]||"",ge=V(be);ge!==null&&(Z.push({account_name:ne,period:ie,amount:ge,amount_raw:be}),le+=ge||0)}else{const ie=B.findIndex(be=>be.toLowerCase().includes("revenue")),oe=ie>=0?V(Q[ie]):0;Z.push({account_name:ne,period:"2024-01",amount:oe,amount_raw:Q[ie]||""}),le+=oe||0}}const he=Z.map(ae=>{const Q=ae.account_name.toLowerCase().trim();let ne="other";return Q.includes("rent")||Q.includes("tenant")||Q.includes("resident")||Q.includes("rental")||Q.includes("short term")||Q.includes("application fee")||Q.includes("pet fee")||Q.includes("lock")||Q.includes("key")||Q.includes("insurance svcs income")||Q.includes("credit reporting services income")?ne="income":Q.includes("utility")||Q.includes("utilities")||Q.includes("water")||Q.includes("garbage")||Q.includes("electric")||Q.includes("gas")||Q.includes("sewer")||Q.includes("refuse disposal")||Q.includes("pest control")?ne="utilities":Q.includes("maintenance")||Q.includes("repair")||Q.includes("cleaning")||Q.includes("damage")||Q.includes("carpet")||Q.includes("r & m")||Q.includes("hvac")||Q.includes("plumbing")||Q.includes("paint")||Q.includes("appliances")||Q.includes("fire & alarm")||Q.includes("computers")||Q.includes("server")||Q.includes("phones")||Q.includes("it")?ne="maintenance":Q.includes("insurance")||Q.includes("liability")||Q.includes("coverage")?ne="insurance":(Q.includes("property tax")||Q.includes("real property tax"))&&(ne="property_tax"),{...ae,category:ne}}),de={totalRows:Z.length,processedRows:Z.length,aiAnalysis:{propertyName:T||"Unknown Property",totalRecords:Z.length,totalAmount:le,uniqueAccounts:te.size,categories:{income:he.filter(ae=>ae.category==="income").length,utilities:he.filter(ae=>ae.category==="utilities").length,maintenance:he.filter(ae=>ae.category==="maintenance").length,insurance:he.filter(ae=>ae.category==="insurance").length,property_tax:he.filter(ae=>ae.category==="property_tax").length,other:he.filter(ae=>ae.category==="other").length},confidence:.85},data:Z,format:G?"month-column":"traditional",status:"processed"};b(de),i(null),window.dispatchEvent(new CustomEvent("dataUpdated",{detail:{propertyId:o,uploadResult:de,processingMode:"local"}})),console.log("✅ Pure local processing completed:",de)}catch(F){throw console.error("Pure local processing error:",F),F}},U=async()=>{if(!g){i("No data to save");return}C(!0),j("saving");try{console.log("💾 Saving processed data to unified system...");const O=v.find(R=>R.id===o)||c.find(R=>R.id===o);if(!O){i("Property not found"),C(!1);return}const T=await ui.addProperty({name:O.name,address:O.address||"",type:O.type||"Unknown",totalUnits:O.totalUnits||0});if(g.data&&Array.isArray(g.data))for(const R of g.data)await ui.addPropertyData({propertyId:T.id,propertyName:T.name,date:R.date||new Date().toISOString(),accountName:R.account_name||R.accountName||"Unknown",amount:R.amount||0,month:R.month||"Unknown",category:R.category||"other",source:x});const F=await fn.saveLocalData(g,O.name,x);if(F.success){j("saved"),i(null),console.log("✅ Data saved successfully to unified system:",F);const R=ui.getAllProperties();y(R),window.dispatchEvent(new CustomEvent("dataUpdated",{detail:{propertyId:o,uploadResult:F,processingMode:x,saved:!0,unified:!0,source:"local"}})),window.dispatchEvent(new CustomEvent("chartDataUpdated",{detail:{propertyId:o,data:g,source:"local"}})),setTimeout(()=>{window.location.reload()},1e3)}else j("error"),i(F.message||"Failed to save data")}catch(O){console.error("Save data error:",O),j("error"),i(O instanceof Error?O.message:"Error saving data")}finally{C(!1)}},V=O=>{if(!O||O==="—"||O.toLowerCase()==="n/a")return null;let T=O.replace(/\$/g,"").replace(/,/g,""),F=!1;T.startsWith("(")&&T.endsWith(")")&&(F=!0,T=T.slice(1,-1));const R=Number(T);return Number.isNaN(R)?null:F?-R:R},$=O=>{if(O===0)return"0 Bytes";const T=1024,F=["Bytes","KB","MB","GB"],R=Math.floor(Math.log(O)/Math.log(T));return parseFloat((O/Math.pow(T,R)).toFixed(2))+" "+F[R]},M=O=>{switch(O){case"completed":return"bg-green-100 text-green-800";case"processing":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex justify-between items-center",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"CSV Data Upload"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Upload CSV files to populate your dashboard with real property data"}),a.jsxs("div",{className:"flex items-center justify-between mt-2",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${f==="connected"?"bg-green-500":f==="disconnected"?"bg-red-500":"bg-yellow-500"}`}),a.jsx("span",{className:"text-sm text-gray-500",children:f==="connected"?`Backend Connected (${x==="supabase"?"Supabase":"Local"} Mode)`:f==="disconnected"?"No Backend Available":"Checking Connection..."})]}),f==="connected"&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-sm text-gray-500",children:"Mode:"}),a.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>m("supabase"),className:`px-3 py-1 text-xs rounded-md transition-colors ${x==="supabase"?"bg-blue-500 text-white":"text-gray-600 hover:text-gray-800"}`,children:"Supabase"}),a.jsx("button",{onClick:()=>m("local"),className:`px-3 py-1 text-xs rounded-md transition-colors ${x==="local"?"bg-green-500 text-white":"text-gray-600 hover:text-gray-800"}`,children:"Local"})]})]})]})]})}),a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Upload Property Data"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Select Property"}),a.jsx("button",{onClick:()=>{const O=new CustomEvent("navigateToPage",{detail:{page:"property-management"}});window.dispatchEvent(O)},className:"text-sm text-primary-600 hover:text-primary-800 font-medium",children:"+ Add Property"})]}),a.jsxs("select",{value:o,onChange:O=>l(O.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Choose a property..."}),v.length>0?v.map(O=>a.jsxs("option",{value:O.id,children:[O.name," - ",O.address," (",O.source,")"]},O.id)):c.map(O=>a.jsx("option",{value:O.id,children:O.name},O.id))]}),v.length>0&&a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Showing ",v.length," unified properties"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload CSV File"}),a.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-primary-400 transition-colors duration-200",children:[a.jsx("input",{ref:w,type:"file",accept:".csv",onChange:D,className:"hidden",disabled:n}),a.jsxs("button",{onClick:()=>{var O;return(O=w.current)==null?void 0:O.click()},disabled:n,className:"btn-primary flex items-center space-x-2 mx-auto disabled:opacity-50 disabled:cursor-not-allowed",children:[n?a.jsx(_v,{className:"w-4 h-4 animate-spin"}):a.jsx(ji,{className:"w-4 h-4"}),a.jsx("span",{children:n?"Processing...":"Choose CSV File"})]}),a.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Supported format: CSV files only"}),!o&&a.jsx("p",{className:"text-sm text-orange-600 mt-1",children:"⚠️ Select a property above for best results"})]})]}),s&&a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-md p-3 flex items-center space-x-2",children:[a.jsx(Rs,{className:"w-4 h-4 text-red-600"}),a.jsx("span",{className:"text-sm text-red-600",children:s})]}),d&&a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:[a.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Validation Results"}),a.jsxs("div",{className:"text-sm text-blue-800 space-y-1",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Total Rows:"})," ",d.totalRows]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Valid Rows:"})," ",d.validRows]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Invalid Rows:"})," ",d.invalidRows]}),d.errors&&d.errors.length>0&&a.jsxs("div",{className:"mt-2",children:[a.jsx("p",{children:a.jsx("strong",{children:"Errors:"})}),a.jsxs("ul",{className:"list-disc list-inside ml-4",children:[d.errors.slice(0,3).map((O,T)=>a.jsx("li",{children:O.error},T)),d.errors.length>3&&a.jsxs("li",{children:["... and ",d.errors.length-3," more errors"]})]})]})]})]}),g&&a.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-md p-4",children:[a.jsx("h4",{className:"font-medium text-green-900 mb-2",children:"Local Processing Results"}),a.jsxs("div",{className:"text-sm text-green-800 space-y-1",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Status:"})," ",g.status]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Format:"})," ",g.format]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Total Records:"})," ",g.totalRows]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Processed Records:"})," ",g.processedRows]}),g.aiAnalysis&&a.jsxs("div",{className:"mt-3",children:[a.jsx("p",{children:a.jsx("strong",{children:"AI Analysis:"})}),a.jsxs("div",{className:"ml-4 space-y-1",children:[a.jsxs("p",{children:["• Property: ",g.aiAnalysis.propertyName]}),a.jsxs("p",{children:["• Confidence: ",(g.aiAnalysis.confidence*100).toFixed(1),"%"]}),g.aiAnalysis.dateRange&&a.jsxs("p",{children:["• Date Range: ",g.aiAnalysis.dateRange.start," to ",g.aiAnalysis.dateRange.end]}),g.aiAnalysis.revenueAnalysis&&a.jsxs("p",{children:["• Total Revenue: $",g.aiAnalysis.revenueAnalysis.total.toLocaleString()]}),g.aiAnalysis.expenseAnalysis&&a.jsxs("p",{children:["• Total Expenses: $",g.aiAnalysis.expenseAnalysis.total.toLocaleString()]}),g.aiAnalysis.anomalies&&g.aiAnalysis.anomalies.length>0&&a.jsxs("div",{children:[a.jsxs("p",{children:["• Anomalies Found: ",g.aiAnalysis.anomalies.length]}),a.jsx("ul",{className:"ml-4",children:g.aiAnalysis.anomalies.slice(0,2).map((O,T)=>a.jsxs("li",{className:"text-orange-600",children:["⚠️ ",O.message]},T))})]})]})]})]}),a.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[N==="saved"&&a.jsxs("div",{className:"flex items-center text-green-600",children:[a.jsx(Ci,{className:"w-4 h-4 mr-1"}),a.jsx("span",{className:"text-sm",children:"Data saved successfully!"})]}),N==="error"&&a.jsxs("div",{className:"flex items-center text-red-600",children:[a.jsx(Rs,{className:"w-4 h-4 mr-1"}),a.jsx("span",{className:"text-sm",children:"Save failed"})]})]}),a.jsx("button",{onClick:U,disabled:_||N==="saved",className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${_||N==="saved"?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:_?a.jsxs(a.Fragment,{children:[a.jsx(_v,{className:"w-4 h-4 mr-2 animate-spin inline"}),"Saving..."]}):N==="saved"?a.jsxs(a.Fragment,{children:[a.jsx(Ci,{className:"w-4 h-4 mr-2 inline"}),"Saved"]}):a.jsxs(a.Fragment,{children:[a.jsx(Mt,{className:"w-4 h-4 mr-2 inline"}),"Save Data"]})})]})]}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:[a.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Expected CSV Format:"}),a.jsxs("div",{className:"text-sm text-blue-800 space-y-1",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Required Headers:"})," Date, Revenue, Occupancy Rate"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Optional Headers:"})," Property Name (if not selecting property above), Address, Total Units, Occupied Units, Expenses, Net Income"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Example:"})," 2024-01-15, 45600, 95.8, 24, 23, 12000, 33600"]}),a.jsx("p",{className:"text-green-700 font-medium",children:"✅ Property name is optional when you select a property above!"}),a.jsx("div",{className:"mt-3",children:a.jsxs("a",{href:"/correct-chico-data.csv",download:"sample-property-data.csv",className:"inline-flex items-center space-x-2 text-blue-600 hover:text-blue-800 font-medium",children:[a.jsx(Mt,{className:"w-4 h-4"}),a.jsx("span",{children:"Download Sample CSV Template"})]})})]})]})]})]}),t.length>0&&a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Upload History"}),a.jsx("div",{className:"space-y-3",children:t.map(O=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:a.jsx(Mt,{className:"w-5 h-5 text-green-600"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900",children:O.file_name}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[a.jsx("span",{children:O.property_name}),a.jsx("span",{children:$(O.file_size)}),a.jsx("span",{children:new Date(O.uploaded_at).toLocaleDateString()}),a.jsxs("span",{children:[O.records_processed," processed"]}),O.records_skipped>0&&a.jsxs("span",{className:"text-orange-600",children:[O.records_skipped," skipped"]})]}),O.error_message&&a.jsx("p",{className:"text-sm text-red-600 mt-1",children:O.error_message})]})]}),a.jsx("div",{className:"flex items-center space-x-2",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${M(O.upload_status)}`,children:O.upload_status})})]},O.id))})]})]})};var vC={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){((n,r)=>{t.exports=r()})(xe,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},s,i=!r.document&&!!r.postMessage,o=r.IS_PAPA_WORKER||!1,l={},c=0,u={};function d(w){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(k){var E=C(k);E.chunkSize=parseInt(E.chunkSize),k.step||k.chunk||(E.chunkSize=null),this._handle=new m(E),(this._handle.streamer=this)._config=E}).call(this,w),this.parseChunk=function(k,E){var P=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<P){let D=this._config.newline;D||(A=this._config.quoteChar||'"',D=this._handle.guessLineEndings(k,A)),k=[...k.split(D).slice(P)].join(D)}this.isFirstChunk&&j(this._config.beforeFirstChunk)&&(A=this._config.beforeFirstChunk(k))!==void 0&&(k=A),this.isFirstChunk=!1,this._halted=!1;var P=this._partialLine+k,A=(this._partialLine="",this._handle.parse(P,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(k=A.meta.cursor,P=(this._finished||(this._partialLine=P.substring(k-this._baseIndex),this._baseIndex=k),A&&A.data&&(this._rowCount+=A.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),o)r.postMessage({results:A,workerId:u.WORKER_ID,finished:P});else if(j(this._config.chunk)&&!E){if(this._config.chunk(A,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=A=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(A.data),this._completeResults.errors=this._completeResults.errors.concat(A.errors),this._completeResults.meta=A.meta),this._completed||!P||!j(this._config.complete)||A&&A.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),P||A&&A.meta.paused||this._nextChunk(),A}this._halted=!0},this._sendError=function(k){j(this._config.error)?this._config.error(k):o&&this._config.error&&r.postMessage({workerId:u.WORKER_ID,error:k,finished:!1})}}function h(w){var k;(w=w||{}).chunkSize||(w.chunkSize=u.RemoteChunkSize),d.call(this,w),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(E){this._input=E,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(k=new XMLHttpRequest,this._config.withCredentials&&(k.withCredentials=this._config.withCredentials),i||(k.onload=N(this._chunkLoaded,this),k.onerror=N(this._chunkError,this)),k.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var E,P=this._config.downloadRequestHeaders;for(E in P)k.setRequestHeader(E,P[E])}var A;this._config.chunkSize&&(A=this._start+this._config.chunkSize-1,k.setRequestHeader("Range","bytes="+this._start+"-"+A));try{k.send(this._config.downloadRequestBody)}catch(D){this._chunkError(D.message)}i&&k.status===0&&this._chunkError()}},this._chunkLoaded=function(){k.readyState===4&&(k.status<200||400<=k.status?this._chunkError():(this._start+=this._config.chunkSize||k.responseText.length,this._finished=!this._config.chunkSize||this._start>=(E=>(E=E.getResponseHeader("Content-Range"))!==null?parseInt(E.substring(E.lastIndexOf("/")+1)):-1)(k),this.parseChunk(k.responseText)))},this._chunkError=function(E){E=k.statusText||E,this._sendError(new Error(E))}}function f(w){(w=w||{}).chunkSize||(w.chunkSize=u.LocalChunkSize),d.call(this,w);var k,E,P=typeof FileReader<"u";this.stream=function(A){this._input=A,E=A.slice||A.webkitSlice||A.mozSlice,P?((k=new FileReader).onload=N(this._chunkLoaded,this),k.onerror=N(this._chunkError,this)):k=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var A=this._input,D=(this._config.chunkSize&&(D=Math.min(this._start+this._config.chunkSize,this._input.size),A=E.call(A,this._start,D)),k.readAsText(A,this._config.encoding));P||this._chunkLoaded({target:{result:D}})},this._chunkLoaded=function(A){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(A.target.result)},this._chunkError=function(){this._sendError(k.error)}}function p(w){var k;d.call(this,w=w||{}),this.stream=function(E){return k=E,this._nextChunk()},this._nextChunk=function(){var E,P;if(!this._finished)return E=this._config.chunkSize,k=E?(P=k.substring(0,E),k.substring(E)):(P=k,""),this._finished=!k,this.parseChunk(P)}}function x(w){d.call(this,w=w||{});var k=[],E=!0,P=!1;this.pause=function(){d.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){d.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(A){this._input=A,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){P&&k.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),k.length?this.parseChunk(k.shift()):E=!0},this._streamData=N(function(A){try{k.push(typeof A=="string"?A:A.toString(this._config.encoding)),E&&(E=!1,this._checkIsFinished(),this.parseChunk(k.shift()))}catch(D){this._streamError(D)}},this),this._streamError=N(function(A){this._streamCleanUp(),this._sendError(A)},this),this._streamEnd=N(function(){this._streamCleanUp(),P=!0,this._streamData("")},this),this._streamCleanUp=N(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function m(w){var k,E,P,A,D=Math.pow(2,53),L=-D,W=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,U=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,V=this,$=0,M=0,O=!1,T=!1,F=[],R={data:[],errors:[],meta:{}};function B(te){return w.skipEmptyLines==="greedy"?te.join("").trim()==="":te.length===1&&te[0].length===0}function J(){if(R&&P&&(Z("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+u.DefaultDelimiter+"'"),P=!1),w.skipEmptyLines&&(R.data=R.data.filter(function(ae){return!B(ae)})),G()){let ae=function(Q,ne){j(w.transformHeader)&&(Q=w.transformHeader(Q,ne)),F.push(Q)};var de=ae;if(R)if(Array.isArray(R.data[0])){for(var te=0;G()&&te<R.data.length;te++)R.data[te].forEach(ae);R.data.splice(0,1)}else R.data.forEach(ae)}function le(ae,Q){for(var ne=w.header?{}:[],ie=0;ie<ae.length;ie++){var oe=ie,be=ae[ie],be=((ge,fe)=>(we=>(w.dynamicTypingFunction&&w.dynamicTyping[we]===void 0&&(w.dynamicTyping[we]=w.dynamicTypingFunction(we)),(w.dynamicTyping[we]||w.dynamicTyping)===!0))(ge)?fe==="true"||fe==="TRUE"||fe!=="false"&&fe!=="FALSE"&&((we=>{if(W.test(we)&&(we=parseFloat(we),L<we&&we<D))return 1})(fe)?parseFloat(fe):U.test(fe)?new Date(fe):fe===""?null:fe):fe)(oe=w.header?ie>=F.length?"__parsed_extra":F[ie]:oe,be=w.transform?w.transform(be,oe):be);oe==="__parsed_extra"?(ne[oe]=ne[oe]||[],ne[oe].push(be)):ne[oe]=be}return w.header&&(ie>F.length?Z("FieldMismatch","TooManyFields","Too many fields: expected "+F.length+" fields but parsed "+ie,M+Q):ie<F.length&&Z("FieldMismatch","TooFewFields","Too few fields: expected "+F.length+" fields but parsed "+ie,M+Q)),ne}var he;R&&(w.header||w.dynamicTyping||w.transform)&&(he=1,!R.data.length||Array.isArray(R.data[0])?(R.data=R.data.map(le),he=R.data.length):R.data=le(R.data,0),w.header&&R.meta&&(R.meta.fields=F),M+=he)}function G(){return w.header&&F.length===0}function Z(te,le,he,de){te={type:te,code:le,message:he},de!==void 0&&(te.row=de),R.errors.push(te)}j(w.step)&&(A=w.step,w.step=function(te){R=te,G()?J():(J(),R.data.length!==0&&($+=te.data.length,w.preview&&$>w.preview?E.abort():(R.data=R.data[0],A(R,V))))}),this.parse=function(te,le,he){var de=w.quoteChar||'"',de=(w.newline||(w.newline=this.guessLineEndings(te,de)),P=!1,w.delimiter?j(w.delimiter)&&(w.delimiter=w.delimiter(te),R.meta.delimiter=w.delimiter):((de=((ae,Q,ne,ie,oe)=>{var be,ge,fe,we;oe=oe||[",","	","|",";",u.RECORD_SEP,u.UNIT_SEP];for(var Te=0;Te<oe.length;Te++){for(var ze,ft=oe[Te],Me=0,Ie=0,Ee=0,We=(fe=void 0,new y({comments:ie,delimiter:ft,newline:Q,preview:10}).parse(ae)),Ut=0;Ut<We.data.length;Ut++)ne&&B(We.data[Ut])?Ee++:(ze=We.data[Ut].length,Ie+=ze,fe===void 0?fe=ze:0<ze&&(Me+=Math.abs(ze-fe),fe=ze));0<We.data.length&&(Ie/=We.data.length-Ee),(ge===void 0||Me<=ge)&&(we===void 0||we<Ie)&&1.99<Ie&&(ge=Me,be=ft,we=Ie)}return{successful:!!(w.delimiter=be),bestDelimiter:be}})(te,w.newline,w.skipEmptyLines,w.comments,w.delimitersToGuess)).successful?w.delimiter=de.bestDelimiter:(P=!0,w.delimiter=u.DefaultDelimiter),R.meta.delimiter=w.delimiter),C(w));return w.preview&&w.header&&de.preview++,k=te,E=new y(de),R=E.parse(k,le,he),J(),O?{meta:{paused:!0}}:R||{meta:{paused:!1}}},this.paused=function(){return O},this.pause=function(){O=!0,E.abort(),k=j(w.chunk)?"":k.substring(E.getCharIndex())},this.resume=function(){V.streamer._halted?(O=!1,V.streamer.parseChunk(k,!0)):setTimeout(V.resume,3)},this.aborted=function(){return T},this.abort=function(){T=!0,E.abort(),R.meta.aborted=!0,j(w.complete)&&w.complete(R),k=""},this.guessLineEndings=function(ae,de){ae=ae.substring(0,1048576);var de=new RegExp(v(de)+"([^]*?)"+v(de),"gm"),he=(ae=ae.replace(de,"")).split("\r"),de=ae.split(`
`),ae=1<de.length&&de[0].length<he[0].length;if(he.length===1||ae)return`
`;for(var Q=0,ne=0;ne<he.length;ne++)he[ne][0]===`
`&&Q++;return Q>=he.length/2?`\r
`:"\r"}}function v(w){return w.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function y(w){var k=(w=w||{}).delimiter,E=w.newline,P=w.comments,A=w.step,D=w.preview,L=w.fastMode,W=null,U=!1,V=w.quoteChar==null?'"':w.quoteChar,$=V;if(w.escapeChar!==void 0&&($=w.escapeChar),(typeof k!="string"||-1<u.BAD_DELIMITERS.indexOf(k))&&(k=","),P===k)throw new Error("Comment character same as delimiter");P===!0?P="#":(typeof P!="string"||-1<u.BAD_DELIMITERS.indexOf(P))&&(P=!1),E!==`
`&&E!=="\r"&&E!==`\r
`&&(E=`
`);var M=0,O=!1;this.parse=function(T,F,R){if(typeof T!="string")throw new Error("Input must be a string");var B=T.length,J=k.length,G=E.length,Z=P.length,te=j(A),le=[],he=[],de=[],ae=M=0;if(!T)return Me();if(L||L!==!1&&T.indexOf(V)===-1){for(var Q=T.split(E),ne=0;ne<Q.length;ne++){if(de=Q[ne],M+=de.length,ne!==Q.length-1)M+=E.length;else if(R)return Me();if(!P||de.substring(0,Z)!==P){if(te){if(le=[],we(de.split(k)),Ie(),O)return Me()}else we(de.split(k));if(D&&D<=ne)return le=le.slice(0,D),Me(!0)}}return Me()}for(var ie=T.indexOf(k,M),oe=T.indexOf(E,M),be=new RegExp(v($)+v(V),"g"),ge=T.indexOf(V,M);;)if(T[M]===V)for(ge=M,M++;;){if((ge=T.indexOf(V,ge+1))===-1)return R||he.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:le.length,index:M}),ze();if(ge===B-1)return ze(T.substring(M,ge).replace(be,V));if(V===$&&T[ge+1]===$)ge++;else if(V===$||ge===0||T[ge-1]!==$){ie!==-1&&ie<ge+1&&(ie=T.indexOf(k,ge+1));var fe=Te((oe=oe!==-1&&oe<ge+1?T.indexOf(E,ge+1):oe)===-1?ie:Math.min(ie,oe));if(T.substr(ge+1+fe,J)===k){de.push(T.substring(M,ge).replace(be,V)),T[M=ge+1+fe+J]!==V&&(ge=T.indexOf(V,M)),ie=T.indexOf(k,M),oe=T.indexOf(E,M);break}if(fe=Te(oe),T.substring(ge+1+fe,ge+1+fe+G)===E){if(de.push(T.substring(M,ge).replace(be,V)),ft(ge+1+fe+G),ie=T.indexOf(k,M),ge=T.indexOf(V,M),te&&(Ie(),O))return Me();if(D&&le.length>=D)return Me(!0);break}he.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:le.length,index:M}),ge++}}else if(P&&de.length===0&&T.substring(M,M+Z)===P){if(oe===-1)return Me();M=oe+G,oe=T.indexOf(E,M),ie=T.indexOf(k,M)}else if(ie!==-1&&(ie<oe||oe===-1))de.push(T.substring(M,ie)),M=ie+J,ie=T.indexOf(k,M);else{if(oe===-1)break;if(de.push(T.substring(M,oe)),ft(oe+G),te&&(Ie(),O))return Me();if(D&&le.length>=D)return Me(!0)}return ze();function we(Ee){le.push(Ee),ae=M}function Te(Ee){var We=0;return We=Ee!==-1&&(Ee=T.substring(ge+1,Ee))&&Ee.trim()===""?Ee.length:We}function ze(Ee){return R||(Ee===void 0&&(Ee=T.substring(M)),de.push(Ee),M=B,we(de),te&&Ie()),Me()}function ft(Ee){M=Ee,we(de),de=[],oe=T.indexOf(E,M)}function Me(Ee){if(w.header&&!F&&le.length&&!U){var We=le[0],Ut=Object.create(null),cn=new Set(We);let Ks=!1;for(let Vt=0;Vt<We.length;Vt++){let pt=We[Vt];if(Ut[pt=j(w.transformHeader)?w.transformHeader(pt,Vt):pt]){let Cr,Gs=Ut[pt];for(;Cr=pt+"_"+Gs,Gs++,cn.has(Cr););cn.add(Cr),We[Vt]=Cr,Ut[pt]++,Ks=!0,(W=W===null?{}:W)[Cr]=pt}else Ut[pt]=1,We[Vt]=pt;cn.add(pt)}Ks&&console.warn("Duplicate headers found and renamed."),U=!0}return{data:le,errors:he,meta:{delimiter:k,linebreak:E,aborted:O,truncated:!!Ee,cursor:ae+(F||0),renamedHeaders:W}}}function Ie(){A(Me()),le=[],he=[]}},this.abort=function(){O=!0},this.getCharIndex=function(){return M}}function g(w){var k=w.data,E=l[k.workerId],P=!1;if(k.error)E.userError(k.error,k.file);else if(k.results&&k.results.data){var A={abort:function(){P=!0,b(k.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:_,resume:_};if(j(E.userStep)){for(var D=0;D<k.results.data.length&&(E.userStep({data:k.results.data[D],errors:k.results.errors,meta:k.results.meta},A),!P);D++);delete k.results}else j(E.userChunk)&&(E.userChunk(k.results,A,k.file),delete k.results)}k.finished&&!P&&b(k.workerId,k.results)}function b(w,k){var E=l[w];j(E.userComplete)&&E.userComplete(k),E.terminate(),delete l[w]}function _(){throw new Error("Not implemented.")}function C(w){if(typeof w!="object"||w===null)return w;var k,E=Array.isArray(w)?[]:{};for(k in w)E[k]=C(w[k]);return E}function N(w,k){return function(){w.apply(k,arguments)}}function j(w){return typeof w=="function"}return u.parse=function(w,k){var E=(k=k||{}).dynamicTyping||!1;if(j(E)&&(k.dynamicTypingFunction=E,E={}),k.dynamicTyping=E,k.transform=!!j(k.transform)&&k.transform,!k.worker||!u.WORKERS_SUPPORTED)return E=null,u.NODE_STREAM_INPUT,typeof w=="string"?(w=(P=>P.charCodeAt(0)!==65279?P:P.slice(1))(w),E=new(k.download?h:p)(k)):w.readable===!0&&j(w.read)&&j(w.on)?E=new x(k):(r.File&&w instanceof File||w instanceof Object)&&(E=new f(k)),E.stream(w);(E=(()=>{var P;return!!u.WORKERS_SUPPORTED&&(P=(()=>{var A=r.URL||r.webkitURL||null,D=n.toString();return u.BLOB_URL||(u.BLOB_URL=A.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",D,")();"],{type:"text/javascript"})))})(),(P=new r.Worker(P)).onmessage=g,P.id=c++,l[P.id]=P)})()).userStep=k.step,E.userChunk=k.chunk,E.userComplete=k.complete,E.userError=k.error,k.step=j(k.step),k.chunk=j(k.chunk),k.complete=j(k.complete),k.error=j(k.error),delete k.worker,E.postMessage({input:w,config:k,workerId:E.id})},u.unparse=function(w,k){var E=!1,P=!0,A=",",D=`\r
`,L='"',W=L+L,U=!1,V=null,$=!1,M=((()=>{if(typeof k=="object"){if(typeof k.delimiter!="string"||u.BAD_DELIMITERS.filter(function(F){return k.delimiter.indexOf(F)!==-1}).length||(A=k.delimiter),typeof k.quotes!="boolean"&&typeof k.quotes!="function"&&!Array.isArray(k.quotes)||(E=k.quotes),typeof k.skipEmptyLines!="boolean"&&typeof k.skipEmptyLines!="string"||(U=k.skipEmptyLines),typeof k.newline=="string"&&(D=k.newline),typeof k.quoteChar=="string"&&(L=k.quoteChar),typeof k.header=="boolean"&&(P=k.header),Array.isArray(k.columns)){if(k.columns.length===0)throw new Error("Option columns is empty");V=k.columns}k.escapeChar!==void 0&&(W=k.escapeChar+L),k.escapeFormulae instanceof RegExp?$=k.escapeFormulae:typeof k.escapeFormulae=="boolean"&&k.escapeFormulae&&($=/^[=+\-@\t\r].*$/)}})(),new RegExp(v(L),"g"));if(typeof w=="string"&&(w=JSON.parse(w)),Array.isArray(w)){if(!w.length||Array.isArray(w[0]))return O(null,w,U);if(typeof w[0]=="object")return O(V||Object.keys(w[0]),w,U)}else if(typeof w=="object")return typeof w.data=="string"&&(w.data=JSON.parse(w.data)),Array.isArray(w.data)&&(w.fields||(w.fields=w.meta&&w.meta.fields||V),w.fields||(w.fields=Array.isArray(w.data[0])?w.fields:typeof w.data[0]=="object"?Object.keys(w.data[0]):[]),Array.isArray(w.data[0])||typeof w.data[0]=="object"||(w.data=[w.data])),O(w.fields||[],w.data||[],U);throw new Error("Unable to serialize unrecognized input");function O(F,R,B){var J="",G=(typeof F=="string"&&(F=JSON.parse(F)),typeof R=="string"&&(R=JSON.parse(R)),Array.isArray(F)&&0<F.length),Z=!Array.isArray(R[0]);if(G&&P){for(var te=0;te<F.length;te++)0<te&&(J+=A),J+=T(F[te],te);0<R.length&&(J+=D)}for(var le=0;le<R.length;le++){var he=(G?F:R[le]).length,de=!1,ae=G?Object.keys(R[le]).length===0:R[le].length===0;if(B&&!G&&(de=B==="greedy"?R[le].join("").trim()==="":R[le].length===1&&R[le][0].length===0),B==="greedy"&&G){for(var Q=[],ne=0;ne<he;ne++){var ie=Z?F[ne]:ne;Q.push(R[le][ie])}de=Q.join("").trim()===""}if(!de){for(var oe=0;oe<he;oe++){0<oe&&!ae&&(J+=A);var be=G&&Z?F[oe]:oe;J+=T(R[le][be],oe)}le<R.length-1&&(!B||0<he&&!ae)&&(J+=D)}}return J}function T(F,R){var B,J;return F==null?"":F.constructor===Date?JSON.stringify(F).slice(1,25):(J=!1,$&&typeof F=="string"&&$.test(F)&&(F="'"+F,J=!0),B=F.toString().replace(M,W),(J=J||E===!0||typeof E=="function"&&E(F,R)||Array.isArray(E)&&E[R]||((G,Z)=>{for(var te=0;te<Z.length;te++)if(-1<G.indexOf(Z[te]))return!0;return!1})(B,u.BAD_DELIMITERS)||-1<B.indexOf(A)||B.charAt(0)===" "||B.charAt(B.length-1)===" ")?L+B+L:B)}},u.RECORD_SEP=String.fromCharCode(30),u.UNIT_SEP=String.fromCharCode(31),u.BYTE_ORDER_MARK="\uFEFF",u.BAD_DELIMITERS=["\r",`
`,'"',u.BYTE_ORDER_MARK],u.WORKERS_SUPPORTED=!i&&!!r.Worker,u.NODE_STREAM_INPUT=1,u.LocalChunkSize=10485760,u.RemoteChunkSize=5242880,u.DefaultDelimiter=",",u.Parser=y,u.ParserHandle=m,u.NetworkStreamer=h,u.FileStreamer=f,u.StringStreamer=p,u.ReadableStreamStreamer=x,r.jQuery&&((s=r.jQuery).fn.parse=function(w){var k=w.config||{},E=[];return this.each(function(D){if(!(s(this).prop("tagName").toUpperCase()==="INPUT"&&s(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var L=0;L<this.files.length;L++)E.push({file:this.files[L],inputElem:this,instanceConfig:s.extend({},k)})}),P(),this;function P(){if(E.length===0)j(w.complete)&&w.complete();else{var D,L,W,U,V=E[0];if(j(w.before)){var $=w.before(V.file,V.inputElem);if(typeof $=="object"){if($.action==="abort")return D="AbortError",L=V.file,W=V.inputElem,U=$.reason,void(j(w.error)&&w.error({name:D},L,W,U));if($.action==="skip")return void A();typeof $.config=="object"&&(V.instanceConfig=s.extend(V.instanceConfig,$.config))}else if($==="skip")return void A()}var M=V.instanceConfig.complete;V.instanceConfig.complete=function(O){j(M)&&M(O,V.file,V.inputElem),A()},u.parse(V.file,V.instanceConfig)}}function A(){E.splice(0,1),P()}}),o&&(r.onmessage=function(w){w=w.data,u.WORKER_ID===void 0&&w&&(u.WORKER_ID=w.workerId),typeof w.input=="string"?r.postMessage({workerId:u.WORKER_ID,results:u.parse(w.input,w.config),finished:!0}):(r.File&&w.input instanceof File||w.input instanceof Object)&&(w=u.parse(w.input,w.config))&&r.postMessage({workerId:u.WORKER_ID,results:w,finished:!0})}),(h.prototype=Object.create(d.prototype)).constructor=h,(f.prototype=Object.create(d.prototype)).constructor=f,(p.prototype=Object.create(p.prototype)).constructor=p,(x.prototype=Object.create(d.prototype)).constructor=x,u})})(vC);var bM=vC.exports;const Ou=Td(bM),Qw="http://localhost:5000/api",wM={income_item:{label:"Income Item",description:"Individual income line items (rent, fees, etc.)",color:"bg-green-100 text-green-800",icon:"💰",category:"income"},income_total:{label:"Income Total",description:"Total income calculations and summaries",color:"bg-green-100 text-green-800",icon:"📈",category:"income"},expense_item:{label:"Expense Item",description:"Individual expense line items (maintenance, utilities, etc.)",color:"bg-red-100 text-red-800",icon:"💸",category:"expense"},expense_total:{label:"Expense Total",description:"Total expense calculations and summaries",color:"bg-red-100 text-red-800",icon:"📉",category:"expense"},cash_amount:{label:"Cash Amount",description:"Cash and cash equivalents",color:"bg-purple-100 text-purple-800",icon:"💳",category:"cash"},rental_income:{label:"Rental Income",description:"Primary rental revenue from tenants",color:"bg-green-100 text-green-800",icon:"🏠",category:"income"},other_income:{label:"Other Income",description:"Additional income sources (fees, late charges, etc.)",color:"bg-green-100 text-green-800",icon:"💰",category:"income"},total_income:{label:"Total Income",description:"Sum of all income sources",color:"bg-green-100 text-green-800",icon:"📈",category:"income"},total_operating_income:{label:"Total Operating Income",description:"Primary income metric for dashboard",color:"bg-green-100 text-green-800",icon:"💰",category:"income"},operating_expenses:{label:"Operating Expenses",description:"Day-to-day property operations",color:"bg-red-100 text-red-800",icon:"⚙️",category:"expense"},maintenance_expenses:{label:"Maintenance & Repairs",description:"Property maintenance and repair costs",color:"bg-red-100 text-red-800",icon:"🔧",category:"expense"},management_expenses:{label:"Management Expenses",description:"Property management and administrative costs",color:"bg-red-100 text-red-800",icon:"👥",category:"expense"},total_expenses:{label:"Total Expenses",description:"Sum of all expense categories",color:"bg-red-100 text-red-800",icon:"📉",category:"expense"},total_operating_expense:{label:"Total Operating Expense",description:"Primary expense metric for dashboard",color:"bg-red-100 text-red-800",icon:"💸",category:"expense"},net_operating_income:{label:"Net Operating Income",description:"Income minus operating expenses",color:"bg-blue-100 text-blue-800",icon:"📊",category:"net_income"},net_income:{label:"Net Income",description:"Final profit after all expenses",color:"bg-blue-100 text-blue-800",icon:"💎",category:"net_income"},cash_change:{label:"Cash Change",description:"Changes in cash position",color:"bg-purple-100 text-purple-800",icon:"💱",category:"cash"},exclude:{label:"Exclude from Dashboard",description:"Do not include in dashboard calculations",color:"bg-gray-100 text-gray-600",icon:"🚫",category:"exclude"}};function Zw(){const[t,e]=S.useState(null),[n,r]=S.useState("general"),[s,i]=S.useState([]),[o,l]=S.useState({}),[c,u]=S.useState([]),[d,h]=S.useState(!1),[f,p]=S.useState(null),[x,m]=S.useState([]),[v,y]=S.useState({}),[g,b]=S.useState({}),[_,C]=S.useState(!1),[N,j]=S.useState(!1),[w,k]=S.useState(new Set),[E,P]=S.useState(!1),[A,D]=S.useState([]),[L,W]=S.useState(null),[U,V]=S.useState(!1),[$,M]=S.useState(!1),[O,T]=S.useState({}),[F,R]=S.useState({}),[B,J]=S.useState(!0),[G,Z]=S.useState({}),[te,le]=S.useState(!1),[he,de]=S.useState(!1),[ae,Q]=S.useState(""),[ne,ie]=S.useState(""),[oe,be]=S.useState("income"),[ge,fe]=S.useState({}),[we,Te]=S.useState(!1),[ze,ft]=S.useState("");S.useEffect(()=>{(async()=>{if(n&&n!=="general")try{console.log("🧠 Loading AI learning data for file type:",n);const z=await Pu(n),H=Array.isArray(z)?z:[];m(H),console.log("🧠 AI learning data loaded:",H.length,"entries")}catch(z){console.warn("Failed to load AI learning data in useEffect:",z),m([])}else m([])})()},[n]);const Me=async()=>{try{console.log("🔄 Loading CSVs from backend and localStorage...");const I=await Kr();console.log("📊 Supabase CSVs:",I.length,"files");const z=JSON.parse(localStorage.getItem("savedCSVs")||"[]");console.log("💾 LocalStorage CSVs:",z.length,"files");const H=I.map(K=>({...K,fileName:K.file_name,fileType:K.file_type,uploadedAt:K.uploaded_at,totalRecords:K.total_records,accountCategories:K.account_categories,bucketAssignments:K.bucket_assignments,includedItems:K.included_items,isActive:K.is_active!==!1,previewData:K.preview_data}));z.forEach(K=>{if(!I.some(se=>se.id===K.id||se.file_name===K.fileName&&se.uploaded_at===K.uploadedAt)&&K.isActive){const se={id:K.id,file_name:K.fileName,file_type:K.fileType,uploaded_at:K.uploadedAt,total_records:K.totalRecords,account_categories:K.accountCategories,bucket_assignments:K.bucketAssignments,included_items:K.includedItems,tags:K.tags,is_active:K.isActive,preview_data:K.previewData,fileName:K.fileName,fileType:K.fileType,uploadedAt:K.uploadedAt,totalRecords:K.totalRecords,accountCategories:K.accountCategories,bucketAssignments:K.bucketAssignments,includedItems:K.includedItems,isActive:K.isActive,previewData:K.previewData};H.push(se)}});const Y=H.filter(K=>K.is_active!==!1&&K.isActive!==!1);D(Y),console.log("✅ Total active CSVs loaded:",Y.length,"files"),console.log("📋 CSV details:",Y.map(K=>{var ce,se;return{id:K.id,fileName:K.file_name||K.fileName,fileType:K.file_type||K.fileType,totalRecords:K.total_records||K.totalRecords,isActive:K.is_active!==!1&&K.isActive!==!1,hasPreviewData:!!(K.preview_data||K.previewData),previewDataLength:((ce=K.preview_data)==null?void 0:ce.length)||((se=K.previewData)==null?void 0:se.length)||0,bucketAssignmentsCount:Object.keys(K.bucket_assignments||K.bucketAssignments||{}).length}}));const ee=[...I,...z].filter(K=>K.is_active===!1||K.isActive===!1);ee.length>0&&console.log("⚠️ Found inactive CSVs:",ee.length,ee.map(K=>({id:K.id,fileName:K.file_name||K.fileName,isActive:K.is_active!==!1&&K.isActive!==!1})))}catch(I){console.error("❌ Error loading CSVs:",I);try{const H=JSON.parse(localStorage.getItem("savedCSVs")||"[]").filter(Y=>Y.isActive);D(H),console.log("🔄 Fallback to localStorage:",H.length,"files")}catch(z){console.error("❌ Error loading from localStorage:",z),D([])}}};S.useEffect(()=>{u([]),j(!1),W(null),T({}),b({}),y({}),e(null),p(null),C(!1),console.log("🧹 Cleared preview data on component mount to prevent double-counting"),Me()},[]),S.useEffect(()=>{const I=z=>{console.log("📡 Received dataUpdated event:",z.detail),D(H=>[...H])};return window.addEventListener("dataUpdated",I),()=>{window.removeEventListener("dataUpdated",I)}},[]),S.useEffect(()=>{const I={income_item:["Rent","Rental","Tenant","Lease","Monthly Rent","Rental Income","Fee","Charge","Late Fee","Application Fee","Pet Fee","Parking Fee","Income","Revenue"],income_total:["Total Income","Total Operating Income","Gross Income","Total Revenue","Income Total"],expense_item:["Maintenance","Repair","Fix","Service","Upkeep","Renovation","Utilities","Electric","Water","Gas","Trash","Insurance","Tax","Management","Admin","Administrative","Office","Management Fee","Expense","Cost"],expense_total:["Total Expense","Total Operating Expense","Total Costs","Expense Total"],cash_amount:["Cash","Cash Equivalent","Bank","Checking","Savings","Money Market"],total_operating_income:["Total Operating Income","Total Income","Operating Income","Gross Income"],total_operating_expense:["Total Operating Expense","Total Expense","Operating Expense","Total Costs"],net_operating_income:["NOI","Net Operating Income","Net Income","Operating Profit"],rental_income:["Rent","Rental","Tenant","Lease","Monthly Rent","Rental Income"],other_income:["Fee","Charge","Late Fee","Application Fee","Pet Fee","Parking Fee"],operating_expenses:["Operating","General","Administrative","Office","Utilities"],maintenance_expenses:["Maintenance","Repair","Fix","Service","Upkeep","Renovation"],management_expenses:["Management","Admin","Administrative","Office","Management Fee"],exclude:["Total","Sum","Grand Total","Subtotal","Balance","Equity"]};let z=null;if(n){const q=localStorage.getItem(`bucketTerms_${n}`);if(q)try{z=JSON.parse(q)[n],console.log(`📂 Loaded bucket terms for CSV type: ${n}`)}catch(ee){console.error(`Error loading bucket terms for CSV type ${n}:`,ee)}}if(z||(z=localStorage.getItem("bucketTerms")),z)try{const q=typeof z=="string"?JSON.parse(z):z;R({...I,...q})}catch(q){console.error("Error loading saved bucket terms:",q),R(I)}else R(I);const H=localStorage.getItem("customBuckets");if(H)try{const q=JSON.parse(H);Z(q)}catch{Z({})}const Y=localStorage.getItem("bucketCategories");if(Y)try{const q=JSON.parse(Y);fe(q)}catch{fe({})}},[n]);const Ie=I=>I.time_series?Object.values(I.time_series).some(z=>{const H=typeof z=="number"?z:parseFloat(z);return!isNaN(H)&&H!==0}):!1,Ee=I=>I.toLowerCase().includes("total"),We=(I,z)=>{if((z==null?void 0:z.shiftKey)&&w.size>0){const Y=c.map(K=>K.account_name).filter(Boolean),q=Y.findIndex(K=>w.has(K)),ee=Y.indexOf(I);if(q!==-1&&ee!==-1){const K=Math.min(q,ee),ce=Math.max(q,ee);k(se=>{const pe=new Set(se);for(let ye=K;ye<=ce;ye++)pe.add(Y[ye]);return P(pe.size>0),pe});return}}k(Y=>{const q=new Set(Y);return q.has(I)?q.delete(I):q.add(I),P(q.size>0),q})},Ut=()=>{if(!c||c.length===0)return;const I=c.map(z=>z.account_name).filter(Boolean);k(new Set(I)),P(!0)},cn=()=>{k(new Set),P(!1)},Ks=I=>{w.size!==0&&(b(z=>{const H={...z};return w.forEach(Y=>{H[Y]=I}),H}),console.log(`🔄 Assigned ${w.size} items to bucket: ${I}`),cn())},Vt=I=>{if(!I.time_series)return 0;const z=Object.keys(I.time_series).filter(H=>H.toLowerCase().includes("total")||H.toLowerCase().includes("sum")||H.toLowerCase().includes("grand total"));if(z.length>0){const H=I.time_series[z[0]],Y=typeof H=="number"?H:parseFloat(H);return isNaN(Y)?0:Y}return Object.values(I.time_series).reduce((H,Y)=>{const q=typeof Y=="number"?Y:parseFloat(Y);return isNaN(q)?H:H+q},0)},pt=(I,z)=>{const H={},Y={},q={};return I.forEach(ee=>{ee.account_name&&(H[ee.account_name]=Ie(ee),Ie(ee)||console.log(`🚫 Auto-deselected ${ee.account_name} (no non-zero values) - but keeping visible`))}),I.forEach(ee=>{if(ee.account_name&&H[ee.account_name]){const K=Vt(ee);if(K!==0){const ce=K.toString();q[ce]||(q[ce]=[]),q[ce].push(ee.account_name)}}}),Object.entries(q).forEach(([ee,K])=>{if(K.length>1){console.log(`🔄 Found ${K.length} items with same total value ${ee}:`,K);const ce=K[0];for(let se=1;se<K.length;se++){const pe=K[se];H[pe]=!1,console.log(`🚫 Deselected ${pe} (duplicate total value ${ee}, keeping ${ce})`)}console.log(`✅ Kept ${ce} for total value ${ee}`)}}),I.forEach(ee=>{if(ee.account_name&&H[ee.account_name]){const K=z[ee.account_name]||Vn(ee.account_name,"unknown");Ee(K)&&(Y[K]?(H[ee.account_name]=!1,console.log(`🚫 Deselected ${ee.account_name} to prevent double-counting in total bucket: ${K} (${Y[K]} already selected)`)):(Y[K]=ee.account_name,console.log(`✅ Selected ${ee.account_name} for total bucket: ${K}`)))}}),H},Cr=async I=>{if(e(I),p(null),j(!1),C(!1),I.type==="application/pdf"||I.name.toLowerCase().endsWith(".pdf")){r("pdf"),p("PDF processing is coming soon! Please upload a CSV file for now.");return}try{console.log("🧠 Loading AI learning data for file type:",n);const z=await Pu(n),H=Array.isArray(z)?z:[];m(H),console.log("🧠 Loaded AI learning data:",H.length,"entries"),H.length>0&&(console.log("🧠 Available AI learning patterns:"),H.forEach(Y=>{console.log(`  • ${Y.account_name} → ${Y.user_category}`)}))}catch(z){console.warn("Failed to load AI learning data:",z),m([])}Ou.parse(I,{header:!0,preview:100,complete:z=>{const H=z.meta.fields||[];z.data.slice(0,5),i(H);const Y={};for(const q of H){const ee=q.toLowerCase();/account|name|description|item/.test(ee)?Y[q]={field:"",score:1}:/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec|q1|q2|q3|q4|total/.test(ee)?Y[q]={field:"time_series",score:.9}:Y[q]={field:"",score:0}}l(Y),Ou.parse(I,{header:!0,complete:async q=>{const ee=q.data.filter(K=>K&&Object.keys(K).length>0);console.log("Processing",ee.length,"total rows from CSV"),T({});try{h(!0);const K=ee.map((se,pe)=>{const ye={};Object.entries(Y).forEach(([Ne,nt])=>{se[Ne]!==void 0&&(ye[nt.field]=se[Ne])});const ut=Object.keys(se).find(Ne=>Ne.toLowerCase().includes("account")||Ne.toLowerCase().includes("name")||Ne.toLowerCase().includes("description")||Ne.toLowerCase().includes("item"))||Object.keys(se)[0],kt=se[ut],Qe={};return Object.keys(se).forEach(Ne=>{if(Ne!==ut){let nt=String(se[Ne]||"").trim();nt=nt.replace(/,/g,""),nt.startsWith("(")&&nt.endsWith(")")&&(nt="-"+nt.slice(1,-1));const Qr=parseFloat(nt);isNaN(Qr)||(Qe[Ne]=Qr)}}),ye.account_name=kt,ye.time_series=Qe,ye.ai_category="unknown",ye});u(K),j(!0);const ce={};K.forEach(se=>{se.account_name&&(ce[se.account_name]=Ie(se),Ie(se)||console.log(`🚫 Auto-deselected ${se.account_name} (no non-zero values) - but keeping visible`))}),y(ce),h(!1);try{const se=await fetch(`${Qw}/api/categorize`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({csv_data:K,file_type:n})});if(se.ok){const pe=await se.json();console.log("🤖 AI categorization complete:",pe.summary),u(pe.categorized_data);const ye={};pe.categorized_data.forEach(kt=>{kt.account_name&&(ye[kt.account_name]=kt.ai_category)}),T(ye);const ut={};pe.categorized_data.forEach(kt=>{if(kt.account_name){const Qe=Vn(kt.account_name,kt.ai_category);ut[kt.account_name]=Qe,console.log(`🧠 Auto-assigned ${kt.account_name} → ${Qe} (from AI learning)`)}}),b(ut)}}catch(se){console.warn("AI backend error, using manual categorization:",se)}}catch(K){console.error("Data processing error:",K),p(`Data processing failed: ${K}`),h(!1)}}})}})},Gs=async(I,z)=>{if(b(H=>({...H,[I]:z})),console.log(`🪣 Assigned ${I} to bucket: ${z}`),z!=="exclude"&&I&&z)try{await Cm(n,I,z),console.log(`🧠 Learned bucket assignment: ${I} → ${z}`),m(H=>{const Y=Array.isArray(H)?H:[],q=Y.findIndex(ee=>ee.account_name&&ee.account_name.toLowerCase()===I.toLowerCase());if(q>=0){const ee=[...Y];return ee[q]={...ee[q],user_category:z},ee}else return[...Y,{account_name:I,user_category:z,file_type:n}]})}catch(H){console.warn("Failed to save bucket assignment to AI learning:",H)}},Vn=(I,z)=>{const H=I.toLowerCase();if(x&&Array.isArray(x)&&x.length>0){const Y=x.find(q=>q.account_name&&q.account_name.toLowerCase()===H);if(Y&&Y.user_category)return console.log(`🧠 Using AI learning for ${I}: ${Y.user_category} (learned from previous uploads)`),Y.user_category}for(const[Y,q]of Object.entries(F))for(const ee of q)if(H.toLowerCase().includes(ee.toLowerCase()))return Y;if(n==="cash_flow"){if(z==="income")return"income_item";if(z==="expense")return"expense_item";if(z==="cash")return"cash_amount"}return z==="income"?"other_income":z==="expense"?"operating_expenses":"exclude"},Rh=(I,z)=>{const H=I.toLowerCase(),Y=[];if(x&&Array.isArray(x)&&x.length>0){const q=x.find(ee=>ee.account_name&&ee.account_name.toLowerCase()===H);q&&q.user_category&&(Y.push(q.user_category),console.log(`🧠 AI learning suggestion for ${I}: ${q.user_category} (learned from previous uploads)`))}for(const[q,ee]of Object.entries(F))for(const K of ee)if(H.toLowerCase().includes(K.toLowerCase())){Y.includes(q)||Y.push(q);break}return Y.length===0&&(n==="cash_flow"?z==="income"?Y.push("income_item","income_total","rental_income","other_income"):z==="expense"?Y.push("expense_item","expense_total","operating_expenses","maintenance_expenses"):z==="cash"&&Y.push("cash_amount","cash_change"):z==="income"?Y.push("other_income","rental_income"):z==="expense"&&Y.push("operating_expenses","maintenance_expenses","management_expenses")),Y.includes("exclude")||Y.push("exclude"),Y},Fh=()=>{const I={};Array.isArray(c)&&c.forEach(z=>{z.account_name&&(I[z.account_name]=!0)}),y(I)},nc=()=>{const I={};Array.isArray(c)&&c.forEach(z=>{z.account_name&&(I[z.account_name]=!1)}),y(I),console.log("❌ Deselected all items:",I)},rc=I=>{y(z=>{const H={...z};return Object.entries(O).forEach(([Y,q])=>{q===I&&(H[Y]=!0)}),H})},sc=async()=>{if(t){h(!0),p(null),j(!1),C(!1);try{Ou.parse(t,{header:!0,complete:async I=>{const z=I.data;console.log(`📊 Processing ${z.length} rows`),z.length>0&&(console.log("🔍 Sample raw CSV row:",z[0]),console.log("🔍 Sample raw CSV row keys:",Object.keys(z[0])));const H=z.filter(Y=>Object.keys(Y).length>1).map((Y,q)=>{const ee={};Object.entries(o).forEach(([pe,ye])=>{Y[pe]!==void 0&&(ee[ye.field]=Y[pe])});const K=Object.keys(Y).find(pe=>pe.toLowerCase().includes("account")||pe.toLowerCase().includes("name")||pe.toLowerCase().includes("description")||pe.toLowerCase().includes("item"))||Object.keys(Y)[0],ce=Y[K],se={};return Object.keys(Y).forEach(pe=>{if(pe!==K){let ye=String(Y[pe]||"").trim();if(q<3&&console.log(`🔍 Raw value for ${pe}: "${ye}"`),!ye||ye===""||ye==="-"){se[pe]=0;return}let ut=!1;ye.startsWith("(")&&ye.endsWith(")")&&(ut=!0,ye=ye.slice(1,-1)),ye=ye.replace(/,/g,"");const kt=parseFloat(ye);if(isNaN(kt)){const Qe=ye.match(/-?\d+\.?\d*/);if(Qe){const Ne=parseFloat(Qe[0]);isNaN(Ne)?se[pe]=0:se[pe]=ut?-Ne:Ne}else se[pe]=0}else{const Qe=ut?-kt:kt;se[pe]=Qe,q<3&&console.log(`✅ Parsed ${pe}: ${Qe}`)}}}),ee.account_name=ce,ee.time_series=se,ee.row_index=q,ee.file_type=n,ee});try{console.log("🤖 Sending data to AI backend for categorization...");const Y=await fetch(`${Qw}/api/categorize`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({csv_data:H,file_type:n})});if(Y.ok){const q=await Y.json();console.log("🤖 AI categorization complete:",q.summary),console.log("🤖 Sample categorized row:",q.categorized_data[0]),u(q.categorized_data);const ee={};q.categorized_data.forEach(se=>{se.account_name&&(ee[se.account_name]=se.ai_category,se.time_series?console.log(`✅ time_series preserved for ${se.account_name}:`,Object.keys(se.time_series)):console.warn(`⚠️ Missing time_series for ${se.account_name}`))}),T(ee);const K={};q.categorized_data.forEach(se=>{if(se.account_name){const pe=Vn(se.account_name,se.ai_category);K[se.account_name]=pe,console.log(`🧠 Auto-assigned ${se.account_name} → ${pe} (from AI learning)`)}}),b(K);const ce=pt(q.categorized_data,K);y(ce)}else{console.warn("AI backend not available, using manual categorization"),u(H),T({});const q={};H.forEach(K=>{if(K.account_name){const ce=Vn(K.account_name,"unknown");q[K.account_name]=ce,console.log(`🧠 Auto-assigned ${K.account_name} → ${ce} (from AI learning, manual mode)`)}}),b(q);const ee=pt(H,q);y(ee)}}catch(Y){console.warn("AI backend error, using manual categorization:",Y),u(H),T({});const q={};H.forEach(K=>{if(K.account_name){const ce=Vn(K.account_name,"unknown");q[K.account_name]=ce,console.log(`🧠 Auto-assigned ${K.account_name} → ${ce} (from AI learning, AI error fallback)`)}}),b(q);const ee=pt(H,q);y(ee)}j(!0),h(!1)},error:I=>{console.error("CSV parsing error:",I),p(`CSV parsing failed: ${I.message}`),h(!1)}})}catch(I){console.error("Preview error:",I),p(`Preview failed: ${I.message}`),h(!1)}}},Ih=async I=>{try{console.log("🧠 Saving bucket assignments to AI learning for file type:",I.fileType);const z=I.bucketAssignments||{},H=I.accountCategories||{};for(const[Y,q]of Object.entries(z))if(q&&q!=="exclude"&&Y&&typeof q=="string"){const ee=H[Y]||"unknown";await Cm(I.fileType,Y,q),console.log(`🧠 Learned: ${Y} → ${q} (${ee})`)}console.log("✅ Bucket assignments saved to AI learning")}catch(z){console.error("❌ Error saving bucket assignments to AI:",z)}},ta=async()=>{if(!(!c.length||!t)){h(!0),p(null);try{const I=JSON.parse(localStorage.getItem("savedCSVs")||"[]"),z=I.find(K=>K.fileName===t.name&&K.isActive);if(z){if(!window.confirm(`A CSV with the same filename "${t.name}" already exists.

Existing CSV: ${z.totalRecords} records, uploaded ${new Date(z.uploadedAt).toLocaleDateString()}
New CSV: ${c.length} records

Do you want to replace the existing CSV with this new one?

Click "OK" to replace, or "Cancel" to keep both (rename the file to avoid conflicts).`)){p("Upload cancelled. Please rename the file to avoid conflicts.");return}const ce=I.filter(se=>se.id!==z.id);localStorage.setItem("savedCSVs",JSON.stringify(ce)),window.dispatchEvent(new CustomEvent("dataUpdated",{detail:{action:"csv_replaced",oldCsvId:z.id,fileName:t.name}}))}const H=c,Y={};Object.entries(O).forEach(([K,ce])=>{Y[K]=ce});let q;L?q={...L,totalRecords:c.length,accountCategories:Y,bucketAssignments:Rx(),includedItems:v,tags:Fx(),previewData:H}:q={id:Date.now().toString(),fileName:t.name,fileType:n,uploadedAt:new Date().toISOString(),totalRecords:c.length,accountCategories:Y,bucketAssignments:Rx(),includedItems:v,tags:Fx(),isActive:!0,previewData:H},console.log("💾 Saving CSV record:",{fileName:q.fileName,accountCategoriesCount:Object.keys(q.accountCategories).length,bucketAssignmentsCount:Object.keys(q.bucketAssignments).length,previewDataCount:q.previewData.length,sampleAccountNames:Object.keys(q.accountCategories).slice(0,3),samplePreviewAccountNames:q.previewData.slice(0,3).map(K=>K.account_name)});try{const K=vn.getCurrentUser();K&&await ux({id:q.id,file_name:q.fileName,file_type:q.fileType,uploaded_at:q.uploadedAt,total_records:q.totalRecords,account_categories:q.accountCategories,bucket_assignments:q.bucketAssignments,included_items:q.includedItems,tags:q.tags,is_active:q.isActive,preview_data:q.previewData},K.id)&&console.log("✅ CSV data saved to Supabase successfully")}catch(K){console.warn("⚠️ Failed to save to Supabase, using localStorage only:",K)}const ee=JSON.parse(localStorage.getItem("savedCSVs")||"[]");if(L){const K=ee.findIndex(ce=>ce.id===L.id);K!==-1&&(ee[K]=q)}else ee.push(q);localStorage.setItem("savedCSVs",JSON.stringify(ee)),C(!0),console.log("Data saved to database:",c.length,"records"),await Ih(q),L?(u([]),j(!1),W(null),await Me(),ft(`CSV "${q.fileName}" updated successfully!`),Te(!0),setTimeout(()=>{Te(!1)},3e3)):(u([]),j(!1),T({}),b({}),y({}),e(null),await Me(),ft('CSV saved successfully! Go to "CSV Management" tab to review and adjust categorizations.'),Te(!0),setTimeout(()=>{Te(!1)},3e3))}catch(I){console.error("Save error:",I),p(`Save failed: ${I.message}`)}finally{h(!1)}}},Mh=I=>{const z={cash_flow:"bg-blue-100 text-blue-800",balance_sheet:"bg-green-100 text-green-800",rent_roll:"bg-purple-100 text-purple-800",income_statement:"bg-orange-100 text-orange-800",general:"bg-gray-100 text-gray-800"};return z[I]||z.general},Lh=I=>{const z=(I.previewData||I.preview_data||[]).filter(q=>(I.includedItems||I.included_items||{})[q.account_name]===!0),H={};Object.entries(I.accountCategories||I.account_categories||{}).forEach(([q,ee])=>{(I.includedItems||I.included_items||{})[q]===!0&&(H[q]=ee)});const Y={};Object.entries(I.bucketAssignments||I.bucket_assignments||{}).forEach(([q,ee])=>{(I.includedItems||I.included_items||{})[q]===!0&&(Y[q]=ee)}),W(I),V(!0),u(z),T(H),b(Y),y(I.includedItems||{}),j(!0),console.log("👁️ Previewing CSV (filtered):",I.fileName,"with",z.length,"included records")},Bh=async I=>{console.log("✏️ Editing CSV data:",{fileName:I.fileName||I.file_name,accountCategoriesCount:Object.keys(I.accountCategories||I.account_categories||{}).length,bucketAssignmentsCount:Object.keys(I.bucketAssignments||I.bucket_assignments||{}).length,includedItemsCount:Object.keys(I.includedItems||I.included_items||{}).length,previewDataCount:(I.previewData||I.preview_data||[]).length,sampleAccountCategories:Object.keys(I.accountCategories||I.account_categories||{}).slice(0,3),sampleBucketAssignments:Object.keys(I.bucketAssignments||I.bucket_assignments||{}).slice(0,3),sampleIncludedItems:Object.keys(I.includedItems||I.included_items||{}).slice(0,3),bucketAssignmentsData:I.bucketAssignments||I.bucket_assignments||{},bucketAssignmentsKeys:Object.keys(I.bucketAssignments||I.bucket_assignments||{}),bucketAssignmentsValues:Object.values(I.bucketAssignments||I.bucket_assignments||{})});try{console.log("🧠 Loading AI learning data for editing CSV with file type:",I.fileType||I.file_type);const H=await Pu(I.fileType||I.file_type),Y=Array.isArray(H)?H:[];m(Y),console.log("🧠 Loaded AI learning data for editing:",Y.length,"entries")}catch(H){console.warn("Failed to load AI learning data for editing:",H),m([])}W(I),V(!1),u(I.previewData||I.preview_data||[]),T(I.accountCategories||I.account_categories||{});const z=I.bucketAssignments||I.bucket_assignments||{};console.log("🪣 Loading bucket assignments:",{source:I.bucketAssignments?"bucketAssignments":"bucket_assignments",count:Object.keys(z).length,assignments:z}),b(z),y(I.includedItems||I.included_items||{}),j(!0),console.log("✏️ Editing CSV:",I.fileName||I.file_name,"with",(I.previewData||I.preview_data||[]).length,"records")},ic=async I=>{const z=A.find(Y=>Y.id===I);if(!(!z||!window.confirm(`Are you sure you want to delete "${z.fileName}"?

This will permanently remove:
• ${z.totalRecords} records
• All categorizations and bucket assignments
• Dashboard data from this CSV

This action cannot be undone.`))){M(!0);try{const q=JSON.parse(localStorage.getItem("savedCSVs")||"[]").filter(ee=>ee.id!==I);localStorage.setItem("savedCSVs",JSON.stringify(q)),await Me(),(L==null?void 0:L.id)===I&&W(null),window.dispatchEvent(new CustomEvent("dataUpdated",{detail:{action:"csv_deleted",csvId:I,fileName:z.fileName}})),console.log(`✅ CSV "${z.fileName}" deleted successfully`)}catch(Y){console.error("Delete failed:",Y),alert("Failed to delete CSV. Please try again.")}finally{M(!1)}}},na=()=>{const I={};return!c||c.length===0||(console.log("🔍 Calculating current session totals for",Array.isArray(c)?c.length:0,"items"),Array.isArray(c)&&c.forEach(z=>{const H=z.account_name,Y=O[H],q=g[H]||Vn(H,Y),ee=v[H]===!0;if(!ee||!z.time_series)return;let K=0;console.log(`🔍 Debug ${H} time_series keys:`,Object.keys(z.time_series)),console.log(`🔍 Debug ${H} time_series values:`,z.time_series);const ce=Object.keys(z.time_series).find(se=>se.toLowerCase()==="total"||se.toLowerCase()==="totals"||se.toLowerCase()==="grand total"||se.toLowerCase()==="sum");ce&&z.time_series[ce]!==void 0&&z.time_series[ce]!==null?(K=typeof z.time_series[ce]=="number"?z.time_series[ce]:0,console.log(`📊 ${H}: Using ${ce} column = ${K}`)):(K=Object.entries(z.time_series).reduce((se,[pe,ye])=>pe.toLowerCase().includes("total")||pe.toLowerCase().includes("sum")||pe.toLowerCase().includes("grand")||typeof ye!="number"?se:se+ye,0),console.log(`📊 ${H}: Summed monthly values = ${K}`)),console.log(`📊 ${H}: bucket=${q}, total=${K}, included=${ee}`),q&&q!=="exclude"&&(I[q]=(I[q]||0)+K)}),console.log("💰 Current session bucket totals:",I)),I},oc=()=>{const I={};console.log("🔍 Calculating combined bucket totals for",A.length,"saved CSVs");const z=L&&c&&c.length>0;if(A.forEach((H,Y)=>{var ce,se;if(!H.isActive){console.log(`⏭️ Skipping inactive CSV ${Y+1}:`,H.fileName||H.file_name);return}if(z&&H.id===L.id){console.log("⏭️ Skipping CSV being edited to avoid double-counting:",H.fileName||H.file_name);return}console.log(`📊 Processing CSV ${Y+1}:`,H.fileName||H.file_name,"with",((ce=H.previewData)==null?void 0:ce.length)||((se=H.preview_data)==null?void 0:se.length)||0,"records");const q=H.previewData||H.preview_data||[];H.accountCategories||H.account_categories;const ee=H.bucketAssignments||H.bucket_assignments||{},K=H.includedItems||H.included_items||{};if(!Array.isArray(q)){console.log(`⚠️ CSV ${Y+1} previewData is not an array:`,typeof q,q);return}q.forEach(pe=>{const ye=pe.account_name,ut=ee[ye];if(!(K[ye]===!0)||!pe.time_series)return;let Qe=0;console.log(`🔍 Debug ${ye} time_series keys:`,Object.keys(pe.time_series)),console.log(`🔍 Debug ${ye} time_series values:`,pe.time_series);const Ne=Object.keys(pe.time_series).find(nt=>nt.toLowerCase()==="total"||nt.toLowerCase()==="totals"||nt.toLowerCase()==="grand total"||nt.toLowerCase()==="sum");Ne&&pe.time_series[Ne]!==void 0&&pe.time_series[Ne]!==null?(Qe=typeof pe.time_series[Ne]=="number"?pe.time_series[Ne]:0,console.log(`📊 ${ye}: Using ${Ne} column = ${Qe}`)):(Qe=Object.entries(pe.time_series).reduce((nt,[Qr,uc])=>Qr.toLowerCase().includes("total")||Qr.toLowerCase().includes("sum")||Qr.toLowerCase().includes("grand")||typeof uc!="number"?nt:nt+uc,0),console.log(`📊 ${ye}: Summed monthly values = ${Qe}`)),ut&&ut!=="exclude"&&(I[ut]=(I[ut]||0)+Qe,console.log(`💰 Added ${Qe} to bucket ${ut} from ${ye}`))})}),c&&c.length>0){console.log("📊 Adding current session totals for",c.length,"preview items");const H=na();Object.entries(H).forEach(([Y,q])=>{I[Y]=(I[Y]||0)+q,console.log(`💰 Added ${q} to bucket ${Y} from current session`)})}return console.log("📈 Final bucket totals:",I),I},ac=X.useMemo(()=>(console.log("🔄 Recalculating allBucketTotals due to state change"),oc()),[A,L,oc]),un=X.useMemo(()=>(console.log("🔄 Recalculating currentSessionTotals"),na()),[na]),lc=(I,z)=>{if(!z.trim())return;const H=z.trim().toLowerCase().split(" ").map(Y=>Y.charAt(0).toUpperCase()+Y.slice(1)).join(" ");R(Y=>{const q={...Y};return q[I]||(q[I]=[]),q[I].includes(H)||(q[I]=[...q[I],H]),q})},Tt=()=>{if(localStorage.setItem("bucketTerms",JSON.stringify(F)),localStorage.setItem("customBuckets",JSON.stringify(G)),n){const I=JSON.parse(localStorage.getItem(`bucketTerms_${n}`)||"{}");I[n]=F,localStorage.setItem(`bucketTerms_${n}`,JSON.stringify(I)),console.log(`💾 Bucket terms saved for CSV type: ${n}`)}console.log("💾 Bucket terms and custom buckets saved:",{bucketTerms:F,customBuckets:G})},or=()=>{const I={total_operating_income:["Total Operating Income","Total Income","Operating Income","Gross Income"],total_operating_expense:["Total Operating Expense","Total Expense","Operating Expense","Total Costs"],net_operating_income:["NOI","Net Operating Income","Net Income","Operating Profit"],rental_income:["Rent","Rental","Tenant","Lease","Monthly Rent","Rental Income"],other_income:["Fee","Charge","Late Fee","Application Fee","Pet Fee","Parking Fee"],operating_expenses:["Operating","General","Administrative","Office","Utilities"],maintenance_expenses:["Maintenance","Repair","Fix","Service","Upkeep","Renovation"],management_expenses:["Management","Admin","Administrative","Office","Management Fee"],exclude:["Total","Sum","Grand Total","Subtotal","Balance","Equity"]};R(I),localStorage.setItem("bucketTerms",JSON.stringify(I))},cc=()=>{if(!ae.trim()||!ne.trim())return;const I=ae.toLowerCase().replace(/[^a-z0-9]/g,"_"),z={label:ae.trim(),description:ne.trim(),color:Tx(oe),icon:yE(oe),category:oe};Z(H=>({...H,[I]:z})),R(H=>({...H,[I]:[]})),Q(""),ie(""),be("income"),le(!1)},$h=I=>{var K;const H=((K=$i()[I])==null?void 0:K.label)||I;if(!window.confirm(`Are you sure you want to delete the "${H}" bucket? This will also remove all associated terms.`))return;G[I]&&Z(ce=>{const se={...ce};return delete se[I],se}),R(ce=>{const se={...ce};return delete se[I],se}),fe(ce=>{const se={...ce};return delete se[I],se});const Y={...F};delete Y[I],localStorage.setItem("bucketTerms",JSON.stringify(Y));const q={...G};delete q[I],localStorage.setItem("customBuckets",JSON.stringify(q));const ee={...ge};delete ee[I],localStorage.setItem("bucketCategories",JSON.stringify(ee))},$i=()=>{const I={...wM,...G};return Object.keys(I).forEach(z=>{ge[z]&&(I[z]={...I[z],category:ge[z],color:Tx(ge[z])})}),I},Tx=I=>{switch(I){case"income":return"bg-green-100 text-green-800";case"expense":return"bg-red-100 text-red-800";case"cash":return"bg-purple-100 text-purple-800";case"net_income":return"bg-blue-100 text-blue-800";case"exclude":return"bg-gray-100 text-gray-600";default:return"bg-gray-100 text-gray-800"}},yE=I=>{switch(I){case"income":return"💰";case"expense":return"💸";case"cash":return"💳";case"net_income":return"📊";case"exclude":return"🚫";default:return"📋"}},Ox=I=>{switch(I){case"income":return"bg-green-100 text-green-800 border-green-200";case"expense":return"bg-red-100 text-red-800 border-red-200";case"cash":return"bg-purple-100 text-purple-800 border-purple-200";case"net_income":return"bg-blue-100 text-blue-800 border-blue-200";case"exclude":return"bg-gray-100 text-gray-600 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},vE=({value:I,onChange:z,options:H,suggestions:Y,className:q,isFromAILearning:ee,disabled:K})=>{const[ce,se]=S.useState(!1),[pe,ye]=S.useState(""),ut=S.useRef(null);S.useEffect(()=>{const Ne=nt=>{ut.current&&!ut.current.contains(nt.target)&&(se(!1),ye(""))};return ce&&document.addEventListener("mousedown",Ne),()=>{document.removeEventListener("mousedown",Ne)}},[ce]);const kt=H.filter(({bucket:Ne})=>Ne.label.toLowerCase().includes(pe.toLowerCase())),Qe=H.find(Ne=>Ne.key===I);return a.jsxs("div",{className:`relative ${q}`,ref:ut,children:[a.jsxs("button",{type:"button",onClick:()=>!K&&se(!ce),disabled:K,className:`w-full text-left px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-xs focus:outline-none focus:ring-1 focus:ring-blue-500 dark:focus:ring-blue-400 flex items-center justify-between whitespace-nowrap bg-white dark:bg-gray-700 text-gray-900 dark:text-white ${Qe?Ox(Qe.bucket.category):"bg-white dark:bg-gray-700"} ${ee?"ring-2 ring-blue-300 dark:ring-blue-600":""} ${K?"opacity-50 cursor-not-allowed bg-gray-100 dark:bg-gray-800":""}`,children:[a.jsxs("span",{className:"truncate flex items-center",children:[Qe?`${Qe.bucket.icon} ${Qe.bucket.label}`:"Select bucket...",ee&&a.jsx("span",{className:"ml-1 text-blue-500 dark:text-blue-400",title:"Auto-categorized from previous uploads",children:"🧠"})]}),a.jsx("span",{className:"text-gray-400 dark:text-gray-500 flex-shrink-0 ml-2",children:"⌄"})]}),ce&&a.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:[a.jsx("div",{className:"p-2",children:a.jsx("input",{type:"text",placeholder:"Search buckets...",value:pe,onChange:Ne=>ye(Ne.target.value),className:"w-full px-2 py-1 text-xs border border-gray-300 dark:border-gray-600 rounded focus:outline-none focus:ring-1 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",onClick:Ne=>Ne.stopPropagation()})}),kt.map(({key:Ne,bucket:nt})=>{const Qr=Y.includes(Ne),uc=nt.category||"other";return a.jsxs("button",{type:"button",onClick:()=>{z(Ne),se(!1),ye("")},className:`w-full text-left px-3 py-2 text-xs hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center justify-between whitespace-nowrap ${Ox(uc)}`,children:[a.jsxs("span",{className:"truncate",children:[nt.icon," ",nt.label]}),Qr&&a.jsx("span",{className:"text-yellow-500 dark:text-yellow-400 flex-shrink-0 ml-2",children:"✨"})]},Ne)})]})]})},Rx=()=>{const I={};console.log("🔧 Generating bucket assignments for accounts:",Object.keys(O)),console.log("🔧 Current bucket assignments:",g);for(const[z,H]of Object.entries(O)){if(g[z]){I[z]=g[z],console.log(`🪣 ${z} → ${g[z]} (existing assignment)`);continue}const Y=Vn(z,H);I[z]=Y,console.log(`🤖 ${z} → ${Y} (auto-generated for new account)`)}return console.log("🔧 Final bucket assignments:",I),I},Fx=()=>{const I={};for(const z of Object.keys(O)){const H=z.toLowerCase(),Y=[];/rent|rental/.test(H)&&Y.push("rental"),/short term/.test(H)&&Y.push("short-term"),/utility|water|garbage/.test(H)&&Y.push("utility"),/management/.test(H)&&Y.push("management"),/fee/.test(H)&&Y.push("fee"),/income/.test(H)&&Y.push("income"),/expense/.test(H)&&Y.push("expense"),Y.length>0&&(I[z]=Y)}return I};return a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"space-y-4 p-4 border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"CSV Import with AI Parser"}),f&&a.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-md p-4",children:a.jsx("div",{className:"flex",children:a.jsxs("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-sm font-medium text-red-800 dark:text-red-300",children:"Error"}),a.jsx("div",{className:"mt-2 text-sm text-red-700 dark:text-red-400",children:a.jsx("p",{children:f})})]})})}),a.jsx("div",{children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"File Type"}),a.jsxs("select",{value:n,onChange:I=>r(I.target.value),className:"block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[a.jsx("option",{value:"general",children:"General CSV"}),a.jsx("option",{value:"cash_flow",children:"Cash Flow Statement"}),a.jsx("option",{value:"balance_sheet",children:"Balance Sheet"}),a.jsx("option",{value:"rent_roll",children:"Rent Roll"}),a.jsx("option",{value:"income_statement",children:"Income Statement"}),a.jsx("option",{value:"pdf",children:"PDF Document"})]}),a.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Select the type of financial document to get better AI mapping suggestions"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"CSV or PDF File"}),a.jsx("input",{type:"file",accept:".csv,.pdf",onChange:I=>{var H;const z=(H=I.target.files)==null?void 0:H[0];z&&Cr(z)},className:"block w-full text-sm text-gray-500 dark:text-gray-400 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 dark:file:bg-blue-900/20 file:text-blue-700 dark:file:text-blue-300 hover:file:bg-blue-100 dark:hover:file:bg-blue-900/30"},t?t.name+t.lastModified:"file-input")]})]})}),!!s.length&&a.jsx("div",{className:"flex gap-3",children:a.jsx("button",{className:"px-4 py-2 rounded bg-blue-600 dark:bg-blue-700 text-white hover:bg-blue-700 dark:hover:bg-blue-600 disabled:opacity-50",onClick:sc,disabled:d,children:d?"Processing...":"🔄 Refresh Preview"})}),!!c.length&&a.jsxs("div",{children:[a.jsx("h4",{className:"text-md font-medium mb-2 text-gray-900 dark:text-white",children:"CSV Data Preview"}),a.jsx("div",{className:"mb-3 p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 rounded-md",children:a.jsxs("p",{className:"text-sm text-green-800 dark:text-green-300",children:[a.jsx("strong",{children:"✅ Auto-Processed:"})," ",c.length,' records loaded and analyzed automatically. Review the AI categorization below and click "Save to Database" when ready.']})}),N&&!U&&a.jsx("div",{className:"mb-6 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 rounded-lg",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-green-800 dark:text-green-300",children:"Ready to Save?"}),a.jsx("p",{className:"text-sm text-green-700 dark:text-green-400 mt-1",children:"Review your bucket assignments below and save your CSV data to the database."})]}),a.jsx("button",{className:`px-6 py-3 rounded-lg text-white font-semibold transition-colors text-lg ${d?"bg-gray-400 dark:bg-gray-600 cursor-not-allowed":"bg-green-600 dark:bg-green-700 hover:bg-green-700 dark:hover:bg-green-600"}`,onClick:ta,disabled:d,children:d?"Saving...":_?"✅ Saved!":"💾 Save to Database"})]})}),a.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden bg-white dark:bg-gray-800",children:[a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 px-4 py-3 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("h5",{className:"font-medium text-blue-900 dark:text-blue-300",children:"📊 CSV Data with Categorization v.1 beta"}),a.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:'The AI Parser this tool uses isnt yet perfect. Please help by selecting and categorizing line items as "Income" or "Expense".'}),a.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:"Look for Total Income, Total Expense, and Net Operating Income. Deselect all other Total Items."}),a.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:"Keep adjusting the income/expense column until the summed total of items matches the selected total."}),a.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:"Income/Expense items should match Total Income/Expense by the end to correctly populate the data page."}),a.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:`Income/Expense will indicate a "Match" in the Income/Expense Summary Section once the total line items match the user's selected line item nominated as the Total Income/Expense line.`}),a.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[a.jsx("button",{onClick:Fh,className:"px-3 py-1 text-xs bg-green-100 dark:bg-green-900/20 text-green-700 dark:text-green-300 rounded hover:bg-green-200 dark:hover:bg-green-900/30 transition-colors",children:"✅ Select All"}),a.jsx("button",{onClick:nc,className:"px-3 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"❌ Deselect All"}),a.jsx("div",{className:"px-3 py-1 text-xs bg-blue-100 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 rounded",children:"💡 Tip: Hold Shift + click to select ranges"}),a.jsx("button",{onClick:()=>rc("income"),className:"px-3 py-1 text-xs bg-green-100 dark:bg-green-900/20 text-green-700 dark:text-green-300 rounded hover:bg-green-200 dark:hover:bg-green-900/30 transition-colors",children:"💰 Select Income Only"}),a.jsx("button",{onClick:()=>rc("expense"),className:"px-3 py-1 text-xs bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-300 rounded hover:bg-red-200 dark:hover:bg-red-900/30 transition-colors",children:"💸 Select Expense Only"}),a.jsxs("div",{className:"ml-4 pl-4 border-l border-blue-200 dark:border-blue-700",children:[a.jsx("button",{onClick:Ut,className:"px-3 py-1 text-xs bg-blue-100 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 rounded hover:bg-blue-200 dark:hover:bg-blue-900/30 transition-colors",children:"📋 Select All Rows"}),a.jsx("button",{onClick:cn,className:"px-3 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors ml-2",children:"🚫 Clear Selection"})]})]}),E&&a.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs("span",{className:"text-sm font-medium text-yellow-800",children:["📦 Bulk Assignment (",w.size," items selected)"]})}),a.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries($i()).map(([I,z])=>a.jsxs("button",{onClick:()=>Ks(I),className:`px-3 py-1 text-xs rounded hover:opacity-80 transition-opacity whitespace-nowrap flex items-center gap-1 ${z.category==="income"?"bg-green-100 text-green-700":z.category==="expense"?"bg-red-100 text-red-700":z.category==="cash"?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-700"}`,children:[a.jsx("span",{children:z.icon}),a.jsx("span",{className:"truncate",children:z.label})]},I))})]})})]}),a.jsx("div",{className:"overflow-x-auto max-h-[36rem]",children:a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700 sticky top-0",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-3 py-2 text-center font-medium text-gray-700 dark:text-gray-300 border-b border-gray-200 dark:border-gray-600 sticky left-0 bg-gray-50 dark:bg-gray-700 z-10",children:"Include"}),a.jsx("th",{className:"px-3 py-2 text-center font-medium text-gray-700 dark:text-gray-300 border-b border-gray-200 dark:border-gray-600 sticky left-12 bg-gray-50 dark:bg-gray-700 z-10",children:"Select"}),a.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-700 dark:text-gray-300 border-b border-gray-200 dark:border-gray-600 sticky left-24 bg-gray-50 dark:bg-gray-700 z-10",children:"Account Name"}),a.jsx("th",{className:"px-3 py-2 text-center font-medium text-gray-700 dark:text-gray-300 border-b border-gray-200 dark:border-gray-600",children:"Dashboard Bucket"}),(()=>{const I=c.find(z=>z.time_series&&Object.keys(z.time_series).length>0);return I!=null&&I.time_series?Object.keys(I.time_series).map(z=>a.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-700 dark:text-gray-300 border-b border-gray-200 dark:border-gray-600",children:z.replace(/_/g," ").replace(/\b\w/g,H=>H.toUpperCase())},z)):[]})()]})}),a.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-600",children:c.map((I,z)=>{const H=I.account_name,Y=I.time_series||{},q=v[H]===!0;return I.time_series||console.warn(`⚠️ Row ${z} missing time_series:`,I),a.jsxs("tr",{className:`hover:bg-gray-50 dark:hover:bg-gray-700 ${q?"":"opacity-50 bg-gray-100 dark:bg-gray-800"}`,children:[a.jsx("td",{className:"px-3 py-2 text-center border-b border-gray-200 dark:border-gray-600 sticky left-0 bg-white dark:bg-gray-800 z-10",children:a.jsx("input",{type:"checkbox",checked:q,disabled:U,onChange:ee=>{U||y(K=>({...K,[H]:ee.target.checked}))},className:`w-4 h-4 text-blue-600 dark:text-blue-400 bg-gray-100 dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500 dark:focus:ring-blue-400 focus:ring-2 ${U?"opacity-50 cursor-not-allowed":""}`})}),a.jsx("td",{className:"px-3 py-2 text-center border-b border-gray-200 dark:border-gray-600 sticky left-12 bg-white dark:bg-gray-800 z-10",children:a.jsx("input",{type:"checkbox",checked:w.has(H),disabled:U,onChange:ee=>{U||We(H,ee)},className:`w-4 h-4 text-purple-600 dark:text-purple-400 bg-gray-100 dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-purple-500 dark:focus:ring-purple-400 focus:ring-2 ${U?"opacity-50 cursor-not-allowed":""}`})}),a.jsx("td",{className:"px-3 py-2 text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-600 sticky left-24 bg-white dark:bg-gray-800 z-10",children:a.jsx("div",{className:"max-w-xs truncate font-medium",title:String(H),children:H||"-"})}),a.jsx("td",{className:"px-3 py-2 border-b border-gray-200 dark:border-gray-600",children:a.jsx("div",{className:"space-y-1",children:(()=>{const ee=Rh(H,O[H]||I.ai_category),K=g[H]||Vn(H,O[H]||I.ai_category);H&&g[H]&&console.log(`🪣 Found bucket assignment for ${H}:`,g[H]);const ce=$i(),se=Object.entries(ce).map(([ye,ut])=>({key:ye,bucket:ut})),pe=x&&Array.isArray(x)&&x.length>0&&x.some(ye=>ye.account_name&&ye.account_name.toLowerCase()===H.toLowerCase()&&ye.user_category===K);return a.jsx(vE,{value:K,onChange:ye=>Gs(H,ye),options:se,suggestions:ee,className:"w-full",isFromAILearning:pe,disabled:U})})()})}),(()=>{const ee=c.find(ce=>ce.time_series&&Object.keys(ce.time_series).length>0);return(ee!=null&&ee.time_series?Object.keys(ee.time_series):[]).map((ce,se)=>a.jsx("td",{className:"px-3 py-2 text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-600 text-right",children:a.jsx("div",{className:"max-w-xs truncate font-mono text-xs",title:String(Y[ce]||0),children:Y[ce]!==null&&Y[ce]!==void 0?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(Y[ce]):"-"})},se))})()]},z)})})]})}),a.jsxs("div",{className:"px-3 py-2 bg-gray-50 text-sm text-gray-600 border-t flex items-center justify-between",children:[a.jsxs("span",{children:["Showing all ",c.length," records"]}),N&&!U&&a.jsx("button",{className:`px-4 py-2 rounded text-white font-semibold transition-colors text-sm ${d?"bg-gray-400 dark:bg-gray-600 cursor-not-allowed":"bg-green-600 dark:bg-green-700 hover:bg-green-700 dark:hover:bg-green-600"}`,onClick:ta,disabled:d,children:d?"Saving...":_?"✅ Saved!":"💾 Save to Database"})]})]}),c&&c.length>0&&a.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-lg shadow-sm border border-green-200",children:[a.jsxs("div",{className:"px-4 py-3 border-b border-green-200",children:[a.jsx("h3",{className:"text-base font-semibold text-green-900",children:"💰 Total Amounts"}),a.jsxs("p",{className:"text-green-700 mt-1 text-sm",children:["Live preview of how your current ",n==="cash_flow"?"Cash Flow":n==="balance_sheet"?"Balance Sheet":n==="rent_roll"?"Rent Roll":n==="maintenance_log"?"Maintenance Log":"CSV"," will affect dashboard totals"]}),a.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs text-green-600",children:[a.jsx("span",{children:"📜"}),a.jsx("span",{children:"Scroll to browse all sections"})]})]}),a.jsx("div",{className:"p-4",style:{height:"300px",overflowY:"auto"},children:(()=>{const I=ac,z=["income_item","rental_income","other_income"].reduce((ce,se)=>ce+(un[se]||0),0),H=un.income_total||un.total_income||un.total_operating_income||0,Y=["expense_item","operating_expenses","maintenance_expenses","management_expenses"].reduce((ce,se)=>ce+(un[se]||0),0),q=un.expense_total||un.total_expenses||un.total_operating_expense||0,ee=Math.abs(z-H)>.01,K=Math.abs(Y-q)>.01;return console.log("🔍 Real-Time Impact Debug:",{currentSessionTotals:un,incomeItems:z,incomeTotal:H,expenseItems:Y,expenseTotal:q,incomeMismatch:ee,expenseMismatch:K}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("h4",{className:"text-sm font-semibold text-green-800 flex items-center gap-2",children:["💰 Income Summary",ee?a.jsx("span",{className:"px-1 py-0.5 bg-amber-100 text-amber-700 rounded-full text-xs font-medium",children:"⚠️ Mismatch"}):a.jsx("span",{className:"px-1 py-0.5 bg-green-100 text-green-700 rounded-full text-xs font-medium",children:"✅ Match"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[a.jsxs("div",{className:"p-3 border-2 border-green-300 bg-green-50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"text-green-600 text-sm",children:"📈"}),a.jsx("span",{className:"font-semibold text-green-800 text-sm",children:"Income Total"})]}),H>0&&a.jsxs("span",{className:"text-xs text-green-600 font-medium",children:["+$",H.toLocaleString()]})]}),a.jsxs("div",{className:"text-lg font-bold text-green-900",children:["$",(I.income_total||I.total_income||I.total_operating_income||0).toLocaleString()]}),a.jsx("div",{className:"text-xs text-green-700 mt-1",children:"Total (all CSVs)"})]}),a.jsxs("div",{className:"p-3 border border-green-200 bg-green-25 rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"text-green-600 text-sm",children:"💰"}),a.jsx("span",{className:"font-semibold text-green-800 text-sm",children:"Income Items"})]}),z>0&&a.jsxs("span",{className:"text-xs text-green-600 font-medium",children:["+$",z.toLocaleString()]})]}),a.jsxs("div",{className:"text-lg font-bold text-green-900",children:["$",z.toLocaleString()]}),a.jsxs("div",{className:"text-xs text-green-700 mt-1",children:["Sum of all income line items (this ",n==="cash_flow"?"Cash Flow":n==="balance_sheet"?"Balance Sheet":n==="rent_roll"?"Rent Roll":n==="maintenance_log"?"Maintenance Log":"CSV",")"]})]})]}),ee?a.jsxs("div",{className:"p-2 bg-amber-50 border border-amber-200 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-1 text-amber-800",children:[a.jsx("span",{className:"text-amber-600 text-xs",children:"⚠️"}),a.jsx("span",{className:"font-medium text-xs",children:"Income Mismatch Detected"})]}),a.jsxs("p",{className:"text-xs text-amber-700 mt-1",children:["Income Total ($",H.toLocaleString(),") doesn't match Income Items ($",z.toLocaleString(),"). Please edit your ",n==="cash_flow"?"Cash Flow":n==="balance_sheet"?"Balance Sheet":n==="rent_roll"?"Rent Roll":n==="maintenance_log"?"Maintenance Log":"CSV"," data categorization to ensure totals match."]})]}):a.jsx("div",{className:"p-2 bg-green-50 border border-green-200 rounded-lg",children:a.jsxs("div",{className:"flex items-center gap-1 text-green-800",children:[a.jsx("span",{className:"text-green-600 text-xs",children:"✅"}),a.jsx("span",{className:"font-medium text-xs",children:"Sum of items matches total amount"})]})})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("h4",{className:"text-sm font-semibold text-red-800 flex items-center gap-2",children:["💸 Expense Summary",K?a.jsx("span",{className:"px-1 py-0.5 bg-amber-100 text-amber-700 rounded-full text-xs font-medium",children:"⚠️ Mismatch"}):a.jsx("span",{className:"px-1 py-0.5 bg-green-100 text-green-700 rounded-full text-xs font-medium",children:"✅ Match"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[a.jsxs("div",{className:"p-3 border-2 border-red-300 bg-red-50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"text-red-600 text-sm",children:"📉"}),a.jsx("span",{className:"font-semibold text-red-800 text-sm",children:"Expense Total"})]}),q>0&&a.jsxs("span",{className:"text-xs text-red-600 font-medium",children:["+$",q.toLocaleString()]})]}),a.jsxs("div",{className:"text-lg font-bold text-red-900",children:["$",(I.expense_total||I.total_expenses||I.total_operating_expense||0).toLocaleString()]}),a.jsx("div",{className:"text-xs text-red-700 mt-1",children:"Total (all CSVs)"})]}),a.jsxs("div",{className:"p-3 border border-red-200 bg-red-25 rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"text-red-600 text-sm",children:"💸"}),a.jsx("span",{className:"font-semibold text-red-800 text-sm",children:"Expense Items"})]}),Y>0&&a.jsxs("span",{className:"text-xs text-red-600 font-medium",children:["+$",Y.toLocaleString()]})]}),a.jsxs("div",{className:"text-lg font-bold text-red-900",children:["$",Y.toLocaleString()]}),a.jsxs("div",{className:"text-xs text-red-700 mt-1",children:["Sum of all expense line items (this ",n==="cash_flow"?"Cash Flow":n==="balance_sheet"?"Balance Sheet":n==="rent_roll"?"Rent Roll":n==="maintenance_log"?"Maintenance Log":"CSV",")"]})]})]}),K?a.jsxs("div",{className:"p-2 bg-amber-50 border border-amber-200 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-1 text-amber-800",children:[a.jsx("span",{className:"text-amber-600 text-xs",children:"⚠️"}),a.jsx("span",{className:"font-medium text-xs",children:"Expense Mismatch Detected"})]}),a.jsxs("p",{className:"text-xs text-amber-700 mt-1",children:["Expense Total ($",q.toLocaleString(),") doesn't match Expense Items ($",Y.toLocaleString(),"). Please edit your ",n==="cash_flow"?"Cash Flow":n==="balance_sheet"?"Balance Sheet":n==="rent_roll"?"Rent Roll":n==="maintenance_log"?"Maintenance Log":"CSV"," data categorization to ensure totals match."]})]}):a.jsx("div",{className:"p-2 bg-green-50 border border-green-200 rounded-lg",children:a.jsxs("div",{className:"flex items-center gap-1 text-green-800",children:[a.jsx("span",{className:"text-green-600 text-xs",children:"✅"}),a.jsx("span",{className:"font-medium text-xs",children:"Sum of items matches total amount"})]})})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("h4",{className:"text-sm font-semibold text-blue-800",children:"📊 Net Income & Cash"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[a.jsxs("div",{className:"p-3 border-2 border-blue-300 bg-blue-50 rounded-lg",children:[a.jsx("div",{className:"flex items-center justify-between mb-1",children:a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"text-blue-600 text-sm",children:"📊"}),a.jsx("span",{className:"font-semibold text-blue-800 text-sm",children:"Net Operating Income"})]})}),a.jsxs("div",{className:"text-lg font-bold text-blue-900",children:["$",(I.net_operating_income||0).toLocaleString()]}),a.jsx("div",{className:"text-xs text-blue-700 mt-1",children:"Income - Expenses"})]}),a.jsxs("div",{className:"p-3 border-2 border-purple-300 bg-purple-50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"text-purple-600 text-sm",children:"💳"}),a.jsx("span",{className:"font-semibold text-purple-800 text-sm",children:"Cash Amount"})]}),(un.cash_amount||0)>0&&a.jsxs("span",{className:"text-xs text-purple-600 font-medium",children:["+$",(un.cash_amount||0).toLocaleString()]})]}),a.jsxs("div",{className:"text-lg font-bold text-purple-900",children:["$",(I.cash_amount||0).toLocaleString()]}),a.jsx("div",{className:"text-xs text-purple-700 mt-1",children:"Cash and cash equivalents"})]})]}),a.jsxs("div",{className:"mt-3 p-2 bg-blue-50 border border-blue-200 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2 text-blue-800",children:[a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),a.jsx("span",{className:"text-xs font-medium",children:"Live Updates"})]}),a.jsxs("p",{className:"text-xs text-blue-700 mt-1",children:["These totals update automatically as you change bucket assignments or include/exclude items from your ",n==="cash_flow"?"Cash Flow":n==="balance_sheet"?"Balance Sheet":n==="rent_roll"?"Rent Roll":n==="maintenance_log"?"Maintenance Log":"CSV","."]})]})]})]})})()})]}),L&&a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[U?"👁️ Preview Mode":"✏️ Edit Mode",": ",L.fileName]}),a.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${Mh(L.fileType)}`,children:L.fileType.replace("_"," ")}),a.jsxs("span",{className:"text-sm text-gray-500",children:[L.totalRecords," records"]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>W(null),className:"px-3 py-1.5 bg-gray-600 text-white rounded hover:bg-gray-700 text-xs font-medium",children:"Close"}),!U&&a.jsx("button",{onClick:()=>{console.log("💾 Saving changes for:",L.fileName)},className:"px-3 py-1.5 bg-green-600 text-white rounded hover:bg-green-700 text-xs font-medium",children:"Save Changes"})]})]})}),a.jsx("div",{className:"p-6",children:U?a.jsxs("div",{className:"mb-6",children:[a.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"📋 Spreadsheet Preview"}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[a.jsx("div",{className:"overflow-x-auto max-h-96",children:a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{className:"bg-gray-50 sticky top-0",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-700 border-b",children:"Account Name"}),(()=>{const I=L.previewData.find(z=>z.time_series&&Object.keys(z.time_series).length>0);return I!=null&&I.time_series?Object.keys(I.time_series).map(z=>a.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-700 border-b",children:z.replace(/_/g," ").replace(/\b\w/g,H=>H.toUpperCase())},z)):[]})()]})}),a.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-600",children:L.previewData.slice(0,20).map((I,z)=>{const H=I.time_series||{};return a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-3 py-2 text-gray-900 border-b font-medium",children:I.account_name||"-"}),(()=>{const Y=L.previewData.find(ee=>ee.time_series&&Object.keys(ee.time_series).length>0);return(Y!=null&&Y.time_series?Object.keys(Y.time_series):[]).map((ee,K)=>a.jsx("td",{className:"px-3 py-2 text-gray-900 border-b text-right font-mono text-xs",children:H[ee]!==null&&H[ee]!==void 0?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(H[ee]):"-"},K))})()]},z)})})]})}),L.previewData.length>20&&a.jsxs("div",{className:"px-3 py-2 bg-gray-50 text-sm text-gray-600 border-t",children:["Showing first 20 rows of ",L.previewData.length," total records"]})]})]}):a.jsx("div",{className:"text-center py-8",children:a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[a.jsx("div",{className:"text-blue-600 mb-4",children:a.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),a.jsx("h4",{className:"text-lg font-semibold text-blue-900 mb-2",children:"✏️ Editing in Main Interface"}),a.jsx("p",{className:"text-blue-700 mb-4",children:"The CSV data with categorization interface is now active above. You can edit bucket assignments, include/exclude items, and make changes directly in the main categorization table."}),a.jsxs("div",{className:"text-sm text-blue-600",children:[a.jsx("p",{children:"• Use the categorization table above to edit your data"}),a.jsx("p",{children:'• Changes will be saved when you click "Save to Database"'}),a.jsx("p",{children:"• Close this panel when you're done editing"})]})]})})})]}),a.jsxs("div",{className:"mt-4 bg-white rounded-lg shadow-sm border border-gray-200",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"🤖 AI Bucket Management"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Customize how the AI parses CSV files and assigns buckets"}),a.jsxs("div",{className:"flex items-center gap-1 mt-2 flex-wrap",children:[Object.entries($i()).slice(0,5).map(([I,z])=>{var H;return a.jsxs("div",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${z.color}`,title:`${z.label}: ${((H=F[I])==null?void 0:H.length)||0} terms`,children:[z.icon,a.jsx("span",{className:"text-xs",children:z.label})]},I)}),Object.entries($i()).length>5&&a.jsx("button",{onClick:()=>de(!he),className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors",title:"Click to view all buckets",children:a.jsx("span",{children:"..."})})]}),he&&a.jsxs("div",{className:"mt-3 p-3 bg-gray-50 border border-gray-200 rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h5",{className:"text-sm font-medium text-gray-900",children:"All Active Buckets"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>le(!0),className:"px-2 py-1 bg-purple-600 text-white rounded text-xs hover:bg-purple-700",title:"Add new bucket",children:"+ Add Bucket"}),a.jsx("button",{onClick:()=>de(!1),className:"text-gray-500 hover:text-gray-700 text-xs",children:"✕"})]})]}),a.jsx("div",{className:"max-h-96 overflow-y-auto space-y-2",children:Object.entries($i()).map(([I,z])=>{var H,Y;return a.jsxs("div",{className:`flex items-start gap-3 p-3 rounded-lg border ${z.color} group hover:shadow-sm transition-shadow`,children:[a.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-shrink-0",children:[a.jsx("span",{className:"text-lg",children:z.icon}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("div",{className:"font-medium text-sm truncate",children:z.label}),a.jsxs("div",{className:"text-xs opacity-75",children:[((H=F[I])==null?void 0:H.length)||0," terms"]})]})]}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsx("div",{className:"flex flex-wrap gap-1",children:((Y=F[I])==null?void 0:Y.map((q,ee)=>a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-white bg-opacity-50 rounded text-xs border group/term hover:bg-opacity-70 transition-colors",children:[q,a.jsx("button",{onClick:()=>{window.confirm(`Remove "${q}" from ${z.label}?`)&&R(K=>{var ce;return{...K,[I]:((ce=K[I])==null?void 0:ce.filter((se,pe)=>pe!==ee))||[]}})},className:"opacity-0 group-hover/term:opacity-100 hover:bg-red-100 hover:text-red-600 rounded-full p-0.5 transition-all",title:`Remove "${q}"`,children:"×"})]},ee)))||a.jsx("span",{className:"text-xs opacity-50 italic",children:"No terms defined"})})}),a.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0",children:[a.jsx("button",{onClick:()=>{const q=prompt(`Add term to ${z.label}:`);q&&q.trim()&&lc(I,q.trim())},className:"p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-100 rounded",title:"Add term",children:"+"}),a.jsx("button",{onClick:()=>{var q;window.confirm(`Delete "${z.label}" bucket? This will remove all ${((q=F[I])==null?void 0:q.length)||0} terms.`)&&$h(I)},className:"p-1 text-red-600 hover:text-red-800 hover:bg-red-100 rounded",title:"Delete bucket",children:"🗑️"})]})]},I)})}),a.jsx("div",{className:"mt-3 pt-2 border-t border-gray-300",children:a.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[a.jsx("span",{children:"Hover over buckets to see quick actions"}),a.jsx("button",{onClick:Tt,className:"px-2 py-1 bg-green-600 text-white rounded text-xs hover:bg-green-700",children:"Save Changes"})]})})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>J(!B),className:`px-3 py-1.5 rounded text-xs font-medium ${B?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-600 text-white hover:bg-gray-700"}`,children:B?"Hide":"Show"}),a.jsx("button",{onClick:Tt,className:"px-3 py-1.5 bg-green-600 text-white rounded hover:bg-green-700 text-xs font-medium",children:"Save"}),a.jsx("button",{onClick:()=>le(!te),className:"px-3 py-1.5 bg-purple-600 text-white rounded hover:bg-purple-700 text-xs font-medium",children:te?"Cancel":"Add Bucket"}),a.jsx("button",{onClick:or,className:"px-3 py-1.5 bg-red-600 text-white rounded hover:bg-red-700 text-xs font-medium",children:"Reset"})]})]})}),B&&a.jsxs("div",{className:"p-6",children:[te&&a.jsxs("div",{className:"mb-6 p-4 bg-purple-50 border border-purple-200 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-semibold text-purple-900 mb-4",children:"➕ Add New Bucket"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bucket Name"}),a.jsx("input",{type:"text",value:ae,onChange:I=>Q(I.target.value),placeholder:"e.g., Marketing Expenses",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),a.jsxs("select",{value:oe,onChange:I=>be(I.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-purple-500",children:[a.jsx("option",{value:"income",children:"Income"}),a.jsx("option",{value:"expense",children:"Expense"}),a.jsx("option",{value:"net_income",children:"Net Income"}),a.jsx("option",{value:"cash",children:"Cash"}),a.jsx("option",{value:"exclude",children:"Exclude"})]})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),a.jsx("input",{type:"text",value:ne,onChange:I=>ie(I.target.value),placeholder:"Brief description of what this bucket represents",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:cc,className:"px-3 py-1.5 bg-purple-600 text-white rounded hover:bg-purple-700 text-xs font-medium",children:"Add Bucket"}),a.jsx("button",{onClick:()=>le(!1),className:"px-3 py-1.5 bg-gray-600 text-white rounded hover:bg-gray-700 text-xs font-medium",children:"Cancel"})]})]}),a.jsxs("div",{className:"mb-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"💡 How It Works"}),a.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[a.jsxs("li",{children:["• ",a.jsx("strong",{children:"Add terms:"}),' Type a term and click "Add" to include it in the bucket']}),a.jsxs("li",{children:["• ",a.jsx("strong",{children:"Remove terms:"}),' Click "Remove" to delete unwanted terms']}),a.jsxs("li",{children:["• ",a.jsx("strong",{children:"Delete buckets:"})," Click the 🗑️ trash icon to remove entire buckets"]}),a.jsxs("li",{children:["• ",a.jsx("strong",{children:"Adjust categories:"})," Change bucket category to control color coding (Income=Green, Expense=Red, Cash=Purple)"]}),a.jsxs("li",{children:["• ",a.jsx("strong",{children:"Case insensitive:"})," Terms are automatically converted to lowercase"]}),a.jsxs("li",{children:["• ",a.jsx("strong",{children:"Partial matching:"})," AI looks for terms anywhere in account names"]}),a.jsxs("li",{children:["• ",a.jsx("strong",{children:"Priority order:"})," First matching bucket wins (order matters)"]}),a.jsxs("li",{children:["• ",a.jsx("strong",{children:"Save changes:"}),' Click "Save Changes" to persist your settings']})]})]})]})]}),a.jsxs("details",{className:"mt-3",children:[a.jsx("summary",{className:"cursor-pointer text-sm text-gray-600 hover:text-gray-800",children:"📋 View Raw JSON Data"}),a.jsx("pre",{className:"text-xs border rounded p-2 max-h-80 overflow-auto bg-gray-50 mt-2",children:JSON.stringify(c,null,2)})]})]}),a.jsxs("div",{className:"p-3 border rounded-lg bg-gray-50",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("h3",{className:"text-sm font-semibold text-gray-700",children:["📁 CSV Files (",A.length,")"]}),a.jsx("div",{className:"flex gap-1",children:a.jsx("button",{onClick:Me,disabled:$,className:"px-2 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 text-xs flex items-center gap-1",title:"Refresh CSV list",children:a.jsx(Ps,{className:`w-3 h-3 ${$?"animate-spin":""}`})})})]}),A.length===0?a.jsx("p",{className:"text-xs text-gray-500",children:"No CSV files found"}):a.jsxs("div",{className:"space-y-1",children:[A.slice(0,3).map(I=>a.jsxs("div",{className:"flex items-center justify-between p-2 bg-white rounded border text-xs",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(T2,{className:"w-3 h-3 text-gray-400"}),a.jsx("span",{className:"font-medium text-gray-700 truncate max-w-32",children:I.fileName}),a.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${I.isActive?"bg-green-500":"bg-gray-400"}`})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>Lh(I),className:"p-1 text-purple-600 hover:bg-purple-100 rounded",title:"Preview CSV (excludes deselected items)",children:a.jsx(qr,{className:"w-3 h-3"})}),a.jsx("button",{onClick:()=>Bh(I),className:"p-1 text-blue-600 hover:bg-blue-100 rounded",title:"Edit CSV (shows all items)",children:a.jsx(ZD,{className:"w-3 h-3"})}),a.jsx("button",{onClick:()=>ic(I.id),className:"p-1 text-red-600 hover:bg-red-100 rounded",title:"Delete CSV",children:a.jsx(Go,{className:"w-3 h-3"})})]})]},I.id)),A.length>3&&a.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["+",A.length-3," more files"]})]})]}),!!s.length&&a.jsxs("div",{className:"mt-4 p-3 bg-gray-50 border border-gray-200 rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h5",{className:"text-sm font-medium text-gray-700",children:"🔗 Header Mapping"}),a.jsx("span",{className:"text-xs text-gray-500 bg-gray-200 px-2 py-1 rounded",children:"auto"})]}),a.jsxs("div",{className:"text-xs text-gray-600 mb-2",children:["🤖 AI automatically mapped ",s.length," headers"]}),a.jsx("div",{className:"max-h-32 overflow-y-auto",children:a.jsx("div",{className:"space-y-1",children:s.map((I,z)=>a.jsxs("div",{className:"flex items-center justify-between text-xs py-1 px-2 bg-white rounded border",children:[a.jsx("span",{className:"font-medium text-gray-800 truncate max-w-xs",title:I,children:I}),a.jsxs("span",{className:"text-green-600 flex items-center gap-1",children:[a.jsx("span",{className:"text-green-500",children:"✔"}),I.toLowerCase().includes("account")||I.toLowerCase().includes("name")?"Auto-categorized by AI":"Auto-mapped to time-series"]})]},z))})})]}),a.jsx("div",{className:"space-y-6"}),a.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-5 gap-4",children:[a.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-200",children:[a.jsx("div",{className:"text-sm font-medium text-blue-800",children:"Total Records"}),a.jsx("div",{className:"text-lg font-bold text-blue-900",children:c.length})]}),a.jsxs("div",{className:"bg-green-50 p-3 rounded-lg border border-green-200",children:[a.jsx("div",{className:"text-sm font-medium text-green-800",children:"✅ Included"}),a.jsx("div",{className:"text-lg font-bold text-green-900",children:Object.values(v).filter(I=>I===!0).length})]}),a.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-200",children:[a.jsx("div",{className:"text-sm font-medium text-gray-800",children:"❌ Excluded"}),a.jsx("div",{className:"text-lg font-bold text-gray-900",children:Object.values(v).filter(I=>I===!1).length})]}),a.jsxs("div",{className:"bg-green-50 p-3 rounded-lg border border-green-200",children:[a.jsx("div",{className:"text-sm font-medium text-green-800",children:"💰 Income"}),a.jsx("div",{className:"text-lg font-bold text-green-900",children:Object.entries(O).filter(([I,z])=>z==="income"&&v[I]===!0).length})]}),a.jsxs("div",{className:"bg-red-50 p-3 rounded-lg border border-red-200",children:[a.jsx("div",{className:"text-sm font-medium text-red-800",children:"💸 Expense"}),a.jsx("div",{className:"text-lg font-bold text-red-900",children:Object.entries(O).filter(([I,z])=>z==="expense"&&v[I]===!0).length})]})]}),we&&a.jsxs("div",{className:"fixed top-4 right-4 z-50 bg-green-50 border border-green-200 rounded-md p-4 flex items-center space-x-2 shadow-lg",children:[a.jsx(Ci,{className:"w-5 h-5 text-green-600"}),a.jsx("span",{className:"text-green-800 font-medium",children:ze}),a.jsx("button",{onClick:()=>Te(!1),className:"ml-2 text-green-600 hover:text-green-800",children:a.jsx(Yo,{className:"w-4 h-4"})})]})]})})}const _M=()=>{var s;const[t,e]=S.useState("import-flow"),n=[{id:"import-flow",label:"Import Flow",icon:ji,description:"AI-powered CSV import with smart mapping"},{id:"upload",label:"Basic Upload",icon:Mt,description:"Traditional CSV upload"}],r=()=>{switch(t){case"upload":return a.jsx(vM,{});case"import-flow":return a.jsx(Zw,{});default:return a.jsx(Zw,{})}};return a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"CSV Upload & Management"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Upload, parse, and manage your property data files"})]})})}),a.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:a.jsx("nav",{className:"flex space-x-8",children:n.map(i=>a.jsxs("button",{onClick:()=>e(i.id),className:`flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium transition-colors ${t===i.id?"bg-blue-100 text-blue-700 border border-blue-200":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[a.jsx(i.icon,{className:"w-4 h-4"}),a.jsx("span",{children:i.label})]},i.id))})}),a.jsx("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200",children:a.jsx("p",{className:"text-sm text-gray-600",children:(s=n.find(i=>i.id===t))==null?void 0:s.description})}),a.jsx("div",{className:"p-6",children:r()})]})})},kM=({onClose:t})=>{const[e,n]=S.useState(0),r=[{id:"dashboard",title:"Dashboard Overview",description:"Get a comprehensive view of your property portfolio with key metrics and performance indicators.",image:"/demo-screenshots/dashboard.png",features:["Real-time financial metrics","Property performance charts","Quick access to key data","Visual impact analysis"]},{id:"financials",title:"Financial Analysis",description:"Deep dive into your property finances with detailed breakdowns and trend analysis.",image:"/demo-screenshots/financials.png",features:["Monthly financial breakdowns","Expense categorization","Revenue tracking","Impact-based analysis"]},{id:"csv-import",title:"Smart CSV Import",description:"AI-powered data import with automatic categorization and bucket management.",image:"/demo-screenshots/csv-import.png",features:["AI-powered categorization","Automatic bucket assignment","Data validation","Preview before import"]},{id:"analytics",title:"Advanced Analytics",description:"Comprehensive analytics with benchmarking and market comparisons.",image:"/demo-screenshots/analytics.png",features:["Market benchmarking","Performance comparisons","Trend analysis","Custom reports"]},{id:"properties",title:"Property Management",description:"Manage all your properties with detailed information and performance tracking.",image:"/demo-screenshots/properties.png",features:["Property portfolio view","Individual property details","Performance metrics","Maintenance tracking"]}],s=r[e],i=()=>{n(l=>(l+1)%r.length)},o=()=>{n(l=>(l-1+r.length)%r.length)};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs(je,{variant:"ghost",size:"sm",onClick:t,className:"flex items-center space-x-2",children:[a.jsx(zD,{className:"w-4 h-4"}),a.jsx("span",{children:"Back to Landing"})]}),a.jsx("div",{className:"h-6 w-px bg-gray-300"}),a.jsx("h2",{className:"text-xl font-semibold",children:"PropFi Demo"})]}),a.jsx(je,{variant:"ghost",size:"sm",onClick:t,children:a.jsx(Yo,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"flex h-[calc(90vh-120px)]",children:[a.jsx("div",{className:"w-80 bg-gray-50 p-6 overflow-y-auto",children:a.jsx("div",{className:"space-y-2",children:r.map((l,c)=>a.jsxs("button",{onClick:()=>n(c),className:`w-full text-left p-3 rounded-lg transition-colors ${c===e?"bg-blue-100 text-blue-900 border border-blue-200":"hover:bg-gray-100"}`,children:[a.jsx("div",{className:"font-medium text-sm",children:l.title}),a.jsx("div",{className:"text-xs text-gray-600 mt-1",children:l.description})]},l.id))})}),a.jsxs("div",{className:"flex-1 flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b",children:[a.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:s.title}),a.jsx("p",{className:"text-gray-600 mb-4",children:s.description}),a.jsx("div",{className:"flex flex-wrap gap-2",children:s.features.map((l,c)=>a.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 text-sm rounded-full",children:l},c))})]}),a.jsx("div",{className:"flex-1 p-6 bg-gray-100 flex items-center justify-center",children:a.jsx("div",{className:"bg-white rounded-lg shadow-lg max-w-full max-h-full overflow-hidden",children:a.jsx("img",{src:s.image,alt:s.title,className:"w-full h-auto",onError:l=>{l.currentTarget.src=`data:image/svg+xml,${encodeURIComponent(`
                      <svg width="800" height="600" xmlns="http://www.w3.org/2000/svg">
                        <rect width="100%" height="100%" fill="#f3f4f6"/>
                        <text x="50%" y="50%" text-anchor="middle" dy=".3em" font-family="Arial, sans-serif" font-size="24" fill="#6b7280">
                          ${s.title} Screenshot
                        </text>
                        <text x="50%" y="60%" text-anchor="middle" dy=".3em" font-family="Arial, sans-serif" font-size="16" fill="#9ca3af">
                          Coming Soon
                        </text>
                      </svg>
                    `)}`}})})}),a.jsxs("div",{className:"flex items-center justify-between p-6 border-t",children:[a.jsxs(je,{variant:"outline",onClick:o,disabled:e===0,children:[a.jsx(UD,{className:"w-4 h-4 mr-2"}),"Previous"]}),a.jsx("div",{className:"flex space-x-2",children:r.map((l,c)=>a.jsx("button",{onClick:()=>n(c),className:`w-3 h-3 rounded-full transition-colors ${c===e?"bg-blue-600":"bg-gray-300 hover:bg-gray-400"}`},c))}),a.jsxs(je,{variant:"outline",onClick:i,disabled:e===r.length-1,children:["Next",a.jsx(nh,{className:"w-4 h-4 ml-2"})]})]})]})]}),a.jsx("div",{className:"p-6 border-t bg-blue-50",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Ready to try PropFi?"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Get started with a free month and see how PropFi can transform your property management."}),a.jsx(ku,{mode:"modal",children:a.jsx(je,{size:"lg",className:"px-8",children:"Start Free Trial"})})]})})]})})},T0=()=>{const{isSignedIn:t,user:e}=Bl(),[n,r]=S.useState(!1),s=[{icon:a.jsx(Mt,{className:"h-6 w-6"}),title:"Smart CSV Import",description:"AI-powered categorization and parsing of financial data with intelligent bucket management"},{icon:a.jsx(Lr,{className:"h-6 w-6"}),title:"Real-time Analytics",description:"Live dashboards with interactive charts and comprehensive financial insights"},{icon:a.jsx(Bg,{className:"h-6 w-6"}),title:"AI Powered Metric Benchmarking",description:"Compare your property performance against local market averages with AI-driven insights tailored to your specific geographic area and property type"},{icon:a.jsx(Is,{className:"h-6 w-6"}),title:"Performance Tracking",description:"Monitor income, expenses, and net operating income with automated calculations"},{icon:a.jsx(dd,{className:"h-6 w-6"}),title:"Secure & Reliable",description:"Enterprise-grade security with data encryption and secure cloud storage"},{icon:a.jsx(F2,{className:"h-6 w-6"}),title:"Generate and Print Reports",description:"Create professional financial reports, cash flow statements, and property performance summaries with customizable templates and one-click printing"}];return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:[a.jsx("nav",{className:"border-b bg-white/80 backdrop-blur-sm sticky top-0 z-50",children:a.jsx("div",{className:"container mx-auto px-4 py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(pi,{size:"md"}),a.jsx("div",{className:"flex items-center space-x-4",children:t?a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("span",{className:"text-sm text-gray-600",children:["Welcome, ",e==null?void 0:e.firstName,"!"]}),a.jsx(nD,{afterSignOutUrl:"/"})]}):a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(OD,{mode:"modal",children:a.jsx(je,{variant:"ghost",children:"Sign In"})}),a.jsx(ku,{mode:"modal",children:a.jsx(je,{children:"Get Started"})}),a.jsxs(je,{variant:"outline",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:{page:"pricing"}})),title:"1-month free demo, then $29/month for unlimited properties and features",children:[a.jsx(xl,{className:"w-4 h-4 mr-2"}),"Pricing"]})]})})]})})}),a.jsx("section",{className:"py-20 px-4",children:a.jsxs("div",{className:"container mx-auto text-center",children:[a.jsx("div",{className:"flex justify-center mb-6",children:a.jsx(pi,{size:"xl",showText:!1})}),a.jsxs("h1",{className:"text-5xl md:text-6xl font-bold text-gray-900 mb-6",children:["Visualize Your Property's",a.jsx("span",{className:"text-primary",children:" Financial Data"})]}),a.jsx("p",{className:"text-xl text-gray-600 mb-8 max-w-3xl mx-auto",children:"PropFi is a Data Visualization and AI powered market analysis tool for property investors and managers. Import CSV data with AI-powered categorization, track cash flows, and gain real-time insights into your property portfolio."}),a.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-12",children:t?a.jsxs(je,{size:"lg",className:"text-lg px-8 py-6",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:{page:"dashboard"}})),children:["Go to Dashboard",a.jsx(Fc,{className:"ml-2 h-5 w-5"})]}):a.jsxs(a.Fragment,{children:[a.jsx(ku,{mode:"modal",children:a.jsxs(je,{size:"lg",className:"text-lg px-8 py-6",children:["Get Started",a.jsx(Fc,{className:"ml-2 h-5 w-5"})]})}),a.jsx(je,{variant:"outline",size:"lg",className:"text-lg px-8 py-6",onClick:()=>r(!0),children:"Try Demo"})]})})]})}),a.jsx("section",{className:"py-20 px-4 bg-white",children:a.jsxs("div",{className:"container mx-auto",children:[a.jsx("div",{className:"text-center mb-16",children:a.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"From AI-powered data import to real-time analytics, PropFi provides all the tools you need for successful property management."})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:s.map((i,o)=>a.jsxs(Ue,{className:"border-0 shadow-lg hover:shadow-xl transition-shadow",children:[a.jsx(xn,{children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-primary/10 rounded-lg text-primary",children:i.icon}),a.jsx(yn,{className:"text-xl",children:i.title})]})}),a.jsx(Ve,{children:a.jsx(Zn,{className:"text-base",children:i.description})})]},o))})]})}),a.jsx("section",{className:"py-20 px-4 bg-primary",children:a.jsxs("div",{className:"container mx-auto text-center",children:[a.jsx("h2",{className:"text-4xl font-bold text-white mb-4",children:"Ready to Visualize Your Property's Financial Data?"}),a.jsx("p",{className:"text-xl text-primary-foreground mb-8 max-w-2xl mx-auto",children:"Join thousands of property professionals who trust PropFi to manage their portfolios with AI-powered insights and real-time analytics."}),t?a.jsxs(je,{size:"lg",variant:"secondary",className:"text-lg px-8 py-6",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:{page:"dashboard"}})),children:["Access Dashboard",a.jsx(Fc,{className:"ml-2 h-5 w-5"})]}):a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[a.jsx(ku,{mode:"modal",children:a.jsxs(je,{size:"lg",variant:"secondary",className:"text-lg px-8 py-6",children:["Get Started Free",a.jsx(Fc,{className:"ml-2 h-5 w-5"})]})}),a.jsxs(je,{size:"lg",variant:"outline",className:"text-lg px-8 py-6 bg-white/10 border-white/20 text-white hover:bg-white/20",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:{page:"pricing"}})),title:"1-month free demo, then $29/month for unlimited properties and features",children:[a.jsx(xl,{className:"mr-2 h-5 w-5"}),"View Pricing"]})]})]})}),a.jsx("footer",{className:"py-12 px-4 bg-gray-900 text-white",children:a.jsxs("div",{className:"container mx-auto",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[a.jsx(zn,{className:"h-6 w-6"}),a.jsx("span",{className:"text-xl font-bold",children:"PropFi"})]}),a.jsx("p",{className:"text-gray-400",children:"The future of property management is here. AI-powered insights for smarter decisions."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold mb-4",children:"Product"}),a.jsxs("ul",{className:"space-y-2 text-gray-400",children:[a.jsx("li",{children:a.jsx("button",{className:"hover:text-white transition-colors text-left",children:"Features"})}),a.jsx("li",{children:a.jsx("button",{className:"hover:text-white transition-colors text-left",children:"Pricing"})}),a.jsx("li",{children:a.jsx("button",{className:"hover:text-white transition-colors text-left",children:"API"})}),a.jsx("li",{children:a.jsx("button",{className:"hover:text-white transition-colors text-left",children:"Integrations"})})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold mb-4",children:"Company"}),a.jsxs("ul",{className:"space-y-2 text-gray-400",children:[a.jsx("li",{children:a.jsx("button",{className:"hover:text-white transition-colors text-left",children:"About"})}),a.jsx("li",{children:a.jsx("button",{className:"hover:text-white transition-colors text-left",children:"Blog"})}),a.jsx("li",{children:a.jsx("button",{className:"hover:text-white transition-colors text-left",children:"Careers"})}),a.jsx("li",{children:a.jsx("button",{className:"hover:text-white transition-colors text-left",children:"Contact"})})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold mb-4",children:"Support"}),a.jsxs("ul",{className:"space-y-2 text-gray-400",children:[a.jsx("li",{children:a.jsx("button",{className:"hover:text-white transition-colors text-left",children:"Help Center"})}),a.jsx("li",{children:a.jsx("button",{className:"hover:text-white transition-colors text-left",children:"Documentation"})}),a.jsx("li",{children:a.jsx("button",{className:"hover:text-white transition-colors text-left",children:"Status"})}),a.jsx("li",{children:a.jsx("button",{className:"hover:text-white transition-colors text-left",children:"Security"})})]})]})]}),a.jsx("div",{className:"border-t border-gray-800 mt-8 pt-8 text-center text-gray-400",children:a.jsx("p",{children:"© 2024 PropFi. All rights reserved."})})]})}),n&&a.jsx(kM,{onClose:()=>r(!1)})]})},SM=({onSubscribe:t})=>{const{user:e}=Bl(),[n,r]=S.useState(1),s=l=>l*20,i=l=>{t&&t(l,n)},o=["Unlimited CSV uploads","AI-powered categorization","Real-time analytics dashboard","Team collaboration","Data export capabilities","Priority support"];return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 py-12",children:a.jsxs("div",{className:"container mx-auto px-4",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Simple, Transparent Pricing"}),a.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Start with a free month, then pay only for what you need. No hidden fees, no surprises."})]}),a.jsx("div",{className:"max-w-md mx-auto",children:a.jsxs(Ue,{className:"relative border-2 border-primary shadow-xl",children:[a.jsxs(Xn,{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 bg-primary text-white",children:[a.jsx(nT,{className:"w-3 h-3 mr-1"}),"Most Popular"]}),a.jsxs(xn,{className:"text-center pb-4",children:[a.jsx(yn,{className:"text-2xl font-bold text-gray-900",children:"PropFi Pro"}),a.jsx(Zn,{className:"text-gray-600",children:"Everything you need to manage your properties"}),a.jsxs("div",{className:"mt-6",children:[a.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"First month free, then:"}),a.jsxs("div",{className:"text-4xl font-bold text-primary",children:["$",s(n),a.jsx("span",{className:"text-lg text-gray-500",children:"/month"})]}),a.jsx("div",{className:"text-sm text-gray-500 mt-2",children:"$20 per property per month"})]})]}),a.jsxs(Ve,{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Number of Properties"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(je,{variant:"outline",size:"sm",onClick:()=>r(Math.max(1,n-1)),disabled:n<=1,children:"-"}),a.jsx("span",{className:"w-16 text-center font-medium",children:n}),a.jsx(je,{variant:"outline",size:"sm",onClick:()=>r(n+1),children:"+"})]}),a.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"You can change this anytime in your dashboard"})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"What's included:"}),a.jsx("ul",{className:"space-y-2",children:o.map((l,c)=>a.jsxs("li",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(ys,{className:"w-4 h-4 text-green-500 mr-2 flex-shrink-0"}),l]},c))})]}),a.jsx(je,{className:"w-full",size:"lg",onClick:()=>i("pro"),children:e?"Start Free Trial":"Sign Up for Free Trial"}),a.jsx("div",{className:"text-center text-xs text-gray-500",children:"No credit card required for the first month"})]})]})}),a.jsxs("div",{className:"max-w-4xl mx-auto mt-12 grid md:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(ys,{className:"w-6 h-6 text-green-600"})}),a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Cancel Anytime"}),a.jsx("p",{className:"text-sm text-gray-600",children:"No long-term contracts. Cancel your subscription whenever you want."})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(ys,{className:"w-6 h-6 text-blue-600"})}),a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Scale as You Grow"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Add or remove properties anytime. You only pay for what you use."})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(ys,{className:"w-6 h-6 text-purple-600"})}),a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Priority Support"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Get help when you need it with our dedicated support team."})]})]}),a.jsxs("div",{className:"max-w-3xl mx-auto mt-16",children:[a.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-8",children:"Frequently Asked Questions"}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"How does the free trial work?"}),a.jsx("p",{className:"text-sm text-gray-600",children:"You get full access to all features for the first month at no cost. No credit card required to start."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Can I change my property count later?"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Yes! You can add or remove properties anytime from your dashboard. Billing updates automatically."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"What happens if I exceed my property limit?"}),a.jsx("p",{className:"text-sm text-gray-600",children:"We'll automatically upgrade your plan and charge the difference. You'll receive an email notification."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Is there a setup fee?"}),a.jsx("p",{className:"text-sm text-gray-600",children:"No setup fees, no hidden costs. Just the transparent monthly pricing you see here."})]})]})]})]})})},CM=()=>{const[t,e]=S.useState(!1);S.useEffect(()=>{const r=localStorage.getItem("theme"),s=window.matchMedia("(prefers-color-scheme: dark)").matches;r==="dark"||!r&&s?(e(!0),document.documentElement.classList.add("dark")):(e(!1),document.documentElement.classList.remove("dark"))},[]);const n=()=>{const r=!t;e(r),r?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))};return a.jsx("div",{className:"fixed bottom-6 right-6 z-50 group",children:a.jsxs("button",{onClick:n,className:"flex items-center space-x-3 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden","aria-label":"Toggle dark mode",children:[a.jsxs("div",{className:"flex items-center space-x-2 p-2",children:[a.jsx(rT,{className:`w-4 h-4 transition-colors duration-200 ${t?"text-gray-400":"text-yellow-500"}`}),a.jsx("div",{className:`relative w-10 h-5 rounded-full transition-colors duration-300 ${t?"bg-blue-600":"bg-gray-300"}`,children:a.jsx("div",{className:`absolute top-0.5 left-0.5 w-4 h-4 bg-white rounded-full shadow-md transform transition-transform duration-300 ${t?"translate-x-5":"translate-x-0"}`})}),a.jsx(QD,{className:`w-4 h-4 transition-colors duration-200 ${t?"text-blue-400":"text-gray-400"}`})]}),a.jsx("div",{className:"hidden group-hover:flex items-center space-x-2 px-3 py-2 border-l border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700",children:a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 whitespace-nowrap",children:t?"Dark Mode":"Light Mode"})})]})})},jM=()=>a.jsxs("div",{className:"p-8 space-y-8",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"PropFi Logo Test"}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("span",{className:"w-20 text-sm text-gray-600",children:"48px:"}),a.jsx(pi,{size:"sm",showText:!1})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("span",{className:"w-20 text-sm text-gray-600",children:"96px:"}),a.jsx(pi,{size:"lg",showText:!1})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("span",{className:"w-20 text-sm text-gray-600",children:"160px:"}),a.jsx(pi,{size:"xl",showText:!1})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("span",{className:"w-20 text-sm text-gray-600",children:"With Text:"}),a.jsx(pi,{size:"lg",showText:!0})]})]}),a.jsxs("div",{className:"mt-8 p-4 bg-gray-100 rounded-lg",children:[a.jsx("h3",{className:"font-semibold mb-2",children:"Test Results:"}),a.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[a.jsx("li",{children:"✓ Logo should render consistently at all sizes"}),a.jsx("li",{children:'✓ No distortion or "decomposition"'}),a.jsx("li",{children:"✓ Proper aspect ratio maintained"}),a.jsx("li",{children:"✓ Clean edges and proper scaling"})]})]})]}),bC="showOpenFilePicker"in window||"chooseFileSystemEntries"in window;async function EM(){if(bC&&"showOpenFilePicker"in window)try{const[t]=await window.showOpenFilePicker({multiple:!1,types:[{description:"CSV files",accept:{"text/csv":[".csv"],"application/csv":[".csv"]}}]});return await t.getFile()}catch(t){console.log("FS Access API failed, falling back to input:",t)}return new Promise((t,e)=>{const n=document.createElement("input");n.type="file",n.accept=".csv,text/csv,application/csv",n.onchange=()=>{var s;const r=(s=n.files)==null?void 0:s[0];r?t(r):e(new Error("No file selected"))},n.oncancel=()=>e(new Error("File selection cancelled")),n.click()})}async function NM(){if(bC&&"showOpenFilePicker"in window)try{const t=await window.showOpenFilePicker({multiple:!0,types:[{description:"CSV files",accept:{"text/csv":[".csv"],"application/csv":[".csv"]}}]});return await Promise.all(t.map(n=>n.getFile()))}catch(t){console.log("FS Access API failed, falling back to input:",t)}return new Promise((t,e)=>{const n=document.createElement("input");n.type="file",n.accept=".csv,text/csv,application/csv",n.multiple=!0,n.onchange=()=>{const r=Array.from(n.files||[]);r.length>0?t(r):e(new Error("No files selected"))},n.oncancel=()=>e(new Error("File selection cancelled")),n.click()})}async function AM(){if("showDirectoryPicker"in window)try{return await window.showDirectoryPicker()}catch(t){return console.log("Directory picker failed:",t),null}return null}async function PM(t){const e=[];try{for await(const[n,r]of t)if(r.kind==="file"&&n.toLowerCase().endsWith(".csv")){const s=await r.getFile();e.push(s)}}catch(n){console.error("Error reading directory:",n)}return e}const e1="showDirectoryPicker"in window;function Ch(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function DM(t,e){let n;const r=()=>{if(n)return n;const s=indexedDB.open(t);return s.onupgradeneeded=()=>s.result.createObjectStore(e),n=Ch(s),n.then(i=>{i.onclose=()=>n=void 0},()=>{}),n};return(s,i)=>r().then(o=>i(o.transaction(e,s).objectStore(e)))}let O0;function fx(){return O0||(O0=DM("keyval-store","keyval")),O0}function Kl(t,e=fx()){return e("readonly",n=>Ch(n.get(t)))}function Gl(t,e,n=fx()){return n("readwrite",r=>(r.put(e,t),Ch(r.transaction)))}function TM(t,e=fx()){return e("readwrite",n=>(n.delete(t),Ch(n.transaction)))}const wC="propfi.catalog",OM="propfi.dataset.",jl="propfi.outbox";async function _C(){try{return await Kl(wC)??[]}catch(t){return console.error("Failed to load catalog:",t),[]}}async function jm(t){try{await Gl(wC,t)}catch(e){throw console.error("Failed to save catalog:",e),e}}async function R0(t){const e=await _C(),n=e.findIndex(r=>r.id===t.id);n>=0?e[n]=t:e.push(t),await jm(e)}async function RM(t){try{return await Kl(`${OM}${t}`)??null}catch(e){return console.error("Failed to load dataset sample:",e),null}}async function ri(t){try{const e=await Kl(jl)??[],n={...t,id:crypto.randomUUID(),retries:0};e.push(n),await Gl(jl,e)}catch(e){throw console.error("Failed to enqueue outbox item:",e),e}}async function px(){try{return await Kl(jl)??[]}catch(t){return console.error("Failed to read outbox:",t),[]}}async function t1(t){try{const n=(await px()).filter(r=>r.id!==t);await Gl(jl,n)}catch(e){throw console.error("Failed to remove outbox item:",e),e}}async function FM(t){try{const e=await px(),n=e.find(r=>r.id===t);n&&(n.retries=(n.retries||0)+1,await Gl(jl,e))}catch(e){throw console.error("Failed to increment outbox retries:",e),e}}function F0(t,e=1e3){return new Promise((n,r)=>{const s=[];let i=[],o=0;const l=[];Ou.parse(t,{header:!0,dynamicTyping:!0,skipEmptyLines:!0,worker:!0,step:(c,u)=>{c.errors.length>0&&l.push(...c.errors),c.data&&s.length<e?(s.push(c.data),o++):s.length>=e&&u.abort()},complete:c=>{var u;i=((u=c.meta)==null?void 0:u.fields)??Object.keys(s[0]||{}),n({rows:s,fields:i,totalRows:o,errors:[...l,...c.errors||[]]})},error:c=>{r(c)}})})}function Ru(t){if(t.length===0)return{fieldTypes:{},fieldStats:{}};const e=Object.keys(t[0]),n={},r={};return e.forEach(s=>{const i=t.map(l=>l[s]).filter(l=>l!=null),o=new Set(i);i.length===0?n[s]="empty":i.every(l=>typeof l=="number")?n[s]="number":i.every(l=>!isNaN(Date.parse(l)))?n[s]="date":n[s]="string",r[s]={unique:o.size,nulls:t.length-i.length},n[s]==="number"&&i.length>0&&(r[s].min=Math.min(...i),r[s].max=Math.max(...i))}),{fieldTypes:n,fieldStats:r}}function IM(){const[t,e]=S.useState({catalog:[],busy:!1,error:null,supportsDirectory:e1});S.useEffect(()=>{_C().then(o=>{e(l=>({...l,catalog:o}))})},[]);const n=S.useCallback(async()=>{if(!e1){e(o=>({...o,error:"Directory access not supported in this browser. Please use individual file selection instead."}));return}e(o=>({...o,busy:!0,error:null}));try{const o=await AM();if(!o){e(d=>({...d,busy:!1}));return}const l=await PM(o);if(l.length===0){e(d=>({...d,busy:!1,error:"No CSV files found in the selected directory."}));return}const c=[],u=[...t.catalog];for(const d of l)try{const h=u.find(f=>f.name===d.name&&f.source==="local-folder");if(h){if(d.lastModified>(h.modifiedAt||0)){const{rows:f,fields:p,errors:x}=await F0(d,1e3),{fieldTypes:m,fieldStats:v}=Ru(f),y={...h,size:d.size,modifiedAt:d.lastModified,fields:p,schema:m},g=u.findIndex(b=>b.id===h.id);g>=0&&(u[g]=y),await R0(y),await ri({type:"UPSERT_DATASET",payload:y,ts:Date.now()}),await ri({type:"UPSERT_SAMPLE",payload:{dataset_id:y.id,sample:f},ts:Date.now()}),c.push(y)}}else{const{rows:f,fields:p,errors:x}=await F0(d,1e3),{fieldTypes:m,fieldStats:v}=Ru(f),y=crypto.randomUUID(),g={id:y,name:d.name,source:"local-folder",size:d.size,modifiedAt:d.lastModified,fields:p,schema:m};c.push(g),u.push(g),await R0(g),await ri({type:"UPSERT_DATASET",payload:g,ts:Date.now()}),await ri({type:"UPSERT_SAMPLE",payload:{dataset_id:y,sample:f},ts:Date.now()})}}catch(h){console.error(`Error processing file ${d.name}:`,h)}await jm(u),e(d=>({...d,catalog:u,busy:!1,error:c.length===0?"No new or updated files found.":null}))}catch(o){console.error("Error connecting folder:",o),e(l=>({...l,busy:!1,error:o instanceof Error?o.message:"Failed to connect folder"}))}},[t.catalog]),r=S.useCallback(async o=>{e(l=>({...l,busy:!0,error:null}));try{const{rows:l,fields:c,errors:u}=await F0(o,1e3),{fieldTypes:d,fieldStats:h}=Ru(l),f=crypto.randomUUID(),p={id:f,name:o.name,source:"local-file",size:o.size,modifiedAt:o.lastModified,fields:c,schema:d};await R0(p),await ri({type:"UPSERT_DATASET",payload:p,ts:Date.now()}),await ri({type:"UPSERT_SAMPLE",payload:{dataset_id:f,sample:l},ts:Date.now()});const x=[...t.catalog,p];e(m=>({...m,catalog:x,busy:!1}))}catch(l){console.error("Error adding file:",l),e(c=>({...c,busy:!1,error:l instanceof Error?l.message:"Failed to add file"}))}},[t.catalog]),s=S.useCallback(async o=>{try{const l=t.catalog.filter(c=>c.id!==o);await jm(l),await ri({type:"DELETE_DATASET",payload:{id:o},ts:Date.now()}),e(c=>({...c,catalog:l}))}catch(l){console.error("Error removing dataset:",l),e(c=>({...c,error:l instanceof Error?l.message:"Failed to remove dataset"}))}},[t.catalog]),i=S.useCallback(()=>{e(o=>({...o,error:null}))},[]);return{...t,connectFolder:n,addFile:r,removeDataset:s,clearError:i}}function MM({onDatasetSelect:t,selectedDatasetId:e}){const{catalog:n,connectFolder:r,addFile:s,removeDataset:i,busy:o,error:l,supportsDirectory:c,clearError:u}=IM(),[d,h]=S.useState(!1),f=async()=>{try{const m=await EM();await s(m)}catch(m){console.error("Error adding file:",m)}},p=async()=>{try{const m=await NM();for(const v of m)await s(v)}catch(m){console.error("Error adding files:",m)}},x=async m=>{window.confirm("Are you sure you want to remove this dataset?")&&await i(m)};return a.jsxs("div",{className:"p-4 border rounded-xl bg-white dark:bg-gray-800",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Data Sources"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>h(!d),className:"px-3 py-1 text-sm bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"Add Files"}),c&&a.jsx("button",{disabled:o,onClick:r,className:"px-3 py-1 text-sm bg-green-500 text-white rounded hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:o?"Scanning...":"Connect Folder"})]})]}),l&&a.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:"text-red-700 text-sm",children:l}),a.jsx("button",{onClick:u,className:"text-red-500 hover:text-red-700",children:"×"})]})}),d&&a.jsxs("div",{className:"mb-4 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:"Add CSV files to your local catalog:"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:f,className:"px-3 py-1 text-sm bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"Single File"}),a.jsx("button",{onClick:p,className:"px-3 py-1 text-sm bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"Multiple Files"})]})]}),!c&&a.jsx("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:a.jsx("p",{className:"text-yellow-700 text-sm",children:"Directory access is not supported in this browser. You can still add individual CSV files."})}),a.jsx("div",{className:"space-y-2",children:n.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[a.jsx("p",{children:"No datasets found."}),a.jsx("p",{className:"text-sm mt-1",children:c?"Connect a folder or add individual files to get started.":"Add individual CSV files to get started."})]}):n.map(m=>{var v;return a.jsx("div",{className:`p-3 border rounded-lg cursor-pointer transition-colors ${e===m.id?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,onClick:()=>t==null?void 0:t(m),children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white truncate",children:m.name}),a.jsxs("div",{className:"flex items-center gap-4 mt-1 text-sm text-gray-500 dark:text-gray-400",children:[a.jsxs("span",{children:[((v=m.fields)==null?void 0:v.length)||0," fields"]}),a.jsx("span",{children:m.source}),m.size&&a.jsxs("span",{children:[(m.size/1024).toFixed(1)," KB"]}),m.modifiedAt&&a.jsx("span",{children:new Date(m.modifiedAt).toLocaleDateString()})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[m.lastSynced&&a.jsx("span",{className:"text-xs text-green-600 dark:text-green-400",children:"Synced"}),a.jsx("button",{onClick:y=>{y.stopPropagation(),x(m.id)},className:"text-red-500 hover:text-red-700 text-sm",title:"Remove dataset",children:"×"})]})]})},m.id)})}),o&&a.jsxs("div",{className:"mt-4 flex items-center justify-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"}),a.jsx("span",{className:"ml-2 text-sm text-gray-600 dark:text-gray-400",children:"Processing..."})]})]})}let Em={online:navigator.onLine,lastChecked:Date.now()};const Nm=new Set;function LM(){const t=()=>{const n={online:navigator.onLine,lastChecked:Date.now(),connectionType:BM()};n.online!==Em.online&&(Em=n,Nm.forEach(r=>r(n)))};if(window.addEventListener("online",t),window.addEventListener("offline",t),"connection"in navigator){const n=navigator.connection;n&&n.addEventListener("change",t)}const e=setInterval(t,3e4);return()=>{if(window.removeEventListener("online",t),window.removeEventListener("offline",t),"connection"in navigator){const n=navigator.connection;n&&n.removeEventListener("change",t)}clearInterval(e)}}function BM(){if("connection"in navigator){const t=navigator.connection;return(t==null?void 0:t.effectiveType)||(t==null?void 0:t.type)}}function kC(t){return Nm.add(t),t(Em),()=>{Nm.delete(t)}}function $M(){return navigator.onLine?Promise.resolve():new Promise(t=>{const e=kC(n=>{n.online&&(e(),t())})})}typeof window<"u"&&LM();const zM="https://iqwhrvtcrseidfyznqaf.supabase.co",SC="sb_publishable_ULLJeduhFHc_KRINLLXxug_zGvRBLPf",Un=ql(zM,SC,{auth:{persistSession:!0,autoRefreshToken:!0}}),mx=()=>SC!=="your_supabase_anon_key_here",CC=Object.freeze(Object.defineProperty({__proto__:null,isSupabaseConfigured:mx,supabase:Un},Symbol.toStringTag,{value:"Module"}));async function jC(t){try{const{data:e,error:n}=await Un.from("datasets").upsert({id:t.cloudId||t.id,name:t.name,meta:{source:t.source,size:t.size,modifiedAt:t.modifiedAt,fields:t.fields,schema:t.schema,localId:t.id},updated_at:new Date().toISOString()}).select().single();return n?(console.error("Error upserting dataset:",n),{data:null,error:n}):{data:e,error:null}}catch(e){return console.error("Exception upserting dataset:",e),{data:null,error:e}}}async function UM(t){try{const{data:e,error:n}=await Un.from("datasets").select("*").eq("id",t).single();return n?(console.error("Error getting dataset:",n),{data:null,error:n}):{data:e,error:null}}catch(e){return console.error("Exception getting dataset:",e),{data:null,error:e}}}async function VM(){try{const{data:t,error:e}=await Un.from("datasets").select("*").order("updated_at",{ascending:!1});return e?(console.error("Error getting user datasets:",e),{data:[],error:e}):{data:t||[],error:null}}catch(t){return console.error("Exception getting user datasets:",t),{data:[],error:t}}}async function EC(t){try{const{error:e}=await Un.from("datasets").delete().eq("id",t);return e?(console.error("Error deleting dataset:",e),{error:e}):{error:null}}catch(e){return console.error("Exception deleting dataset:",e),{error:e}}}async function NC(t,e){try{const{data:n,error:r}=await Un.from("dataset_samples").upsert({dataset_id:t,sample:e,updated_at:new Date().toISOString()}).select().single();return r?(console.error("Error upserting dataset sample:",r),{data:null,error:r}):{data:n,error:null}}catch(n){return console.error("Exception upserting dataset sample:",n),{data:null,error:n}}}async function WM(t){try{const{data:e,error:n}=await Un.from("dataset_samples").select("*").eq("dataset_id",t).single();return n?(console.error("Error getting dataset sample:",n),{data:null,error:n}):{data:e,error:null}}catch(e){return console.error("Exception getting dataset sample:",e),{data:null,error:e}}}async function HM(t){try{const{error:e}=await Un.from("dataset_samples").delete().eq("dataset_id",t);return e?(console.error("Error deleting dataset sample:",e),{error:e}):{error:null}}catch(e){return console.error("Exception deleting dataset sample:",e),{error:e}}}async function qM(){try{const{data:{user:t},error:e}=await Un.auth.getUser();return{user:t,error:e}}catch(t){return console.error("Exception getting current user:",t),{user:null,error:t}}}async function KM(t){try{const{error:e}=await Un.auth.signInWithOtp({email:t,options:{emailRedirectTo:window.location.origin}});return e?(console.error("Error signing in with email:",e),{error:e}):{error:null}}catch(e){return console.error("Exception signing in with email:",e),{error:e}}}async function GM(){try{const{error:t}=await Un.auth.signOut();return t?(console.error("Error signing out:",t),{error:t}):{error:null}}catch(t){return console.error("Exception signing out:",t),{error:t}}}async function AC(){try{const{data:{session:t}}=await Un.auth.getSession();return!!t}catch(t){return console.error("Exception checking authentication:",t),!1}}const n1=Object.freeze(Object.defineProperty({__proto__:null,deleteCloudDatasetSample:HM,deleteDataset:EC,getCurrentUser:qM,getDataset:UM,getDatasetSample:WM,getUserDatasets:VM,isAuthenticated:AC,signInWithEmail:KM,signOut:GM,upsertDataset:jC,upsertDatasetSample:NC},Symbol.toStringTag,{value:"Module"})),YM=3;async function XM(){if(!await AC())return{success:!1,processed:0,errors:[],retryable:[]};const e=await px();if(e.length===0)return{success:!0,processed:0,errors:[],retryable:[]};const n=[],r=[];let s=0;for(const i of e)try{let o=!1;switch(i.type){case"UPSERT_DATASET":const l=await jC(i.payload);if(l.error)throw l.error;o=!0;break;case"UPSERT_SAMPLE":const c=await NC(i.payload.dataset_id,i.payload.sample);if(c.error)throw c.error;o=!0;break;case"DELETE_DATASET":const u=await EC(i.payload.cloudId||i.payload.id);if(u.error)throw u.error;o=!0;break;default:console.warn("Unknown outbox item type:",i.type),o=!0}o&&(await t1(i.id),s++)}catch(o){console.error("Error processing outbox item:",i,o);const l=JM(o),c=i.retries||0;l&&c<YM?(await FM(i.id),r.push({...i,retries:c+1})):(await t1(i.id),n.push({item:i,error:o}))}return{success:n.length===0,processed:s,errors:n,retryable:r}}function JM(t){var e,n;return t?t.name==="NetworkError"||(e=t.message)!=null&&e.includes("network")||t.name==="TimeoutError"||(n=t.message)!=null&&n.includes("timeout")||t.status>=500&&t.status<600||t.status===429?!0:!(t.status===401||t.status===403||t.status>=400&&t.status<500):!1}async function QM(t=1e3,e=3e4){let n=t,r;do r=await XM(),!r.success&&r.retryable.length>0&&(await new Promise(s=>setTimeout(s,n)),n=Math.min(n*2,e));while(!r.success&&r.retryable.length>0&&n<e);return r}class ZM{constructor(){this.isRunning=!1,this.syncInterval=null,this.cleanup=null,this.status={isOnline:navigator.onLine,isAuthenticated:!1,isSyncing:!1,pendingItems:0,errors:[]},this.statusListeners=new Set,this.initialize()}async initialize(){this.cleanup=kC(e=>{this.status.isOnline=e.online,this.notifyStatusListeners(),e.online&&this.isRunning&&this.triggerSync()}),await this.updateAuthStatus()}async updateAuthStatus(){try{const{supabase:e}=await Mn(()=>Promise.resolve().then(()=>CC),void 0),{data:{session:n}}=await e.auth.getSession();this.status.isAuthenticated=!!n}catch(e){console.error("Error checking auth status:",e),this.status.isAuthenticated=!1}this.notifyStatusListeners()}notifyStatusListeners(){this.statusListeners.forEach(e=>e({...this.status}))}start(e=3e4){this.isRunning||(this.isRunning=!0,this.triggerSync(),this.syncInterval=window.setInterval(()=>{this.status.isOnline&&this.status.isAuthenticated&&this.triggerSync()},e),console.log("Sync manager started"))}stop(){this.isRunning&&(this.isRunning=!1,this.syncInterval&&(window.clearInterval(this.syncInterval),this.syncInterval=null),this.cleanup&&(this.cleanup(),this.cleanup=null),console.log("Sync manager stopped"))}async triggerSync(){if(!this.status.isOnline||!this.status.isAuthenticated)return{success:!1,processed:0,errors:[],retryable:[]};this.status.isSyncing=!0,this.notifyStatusListeners();try{const e=await QM();return this.status.lastSync=Date.now(),this.status.errors=e.errors,this.status.pendingItems=e.retryable.length,e}catch(e){return console.error("Sync error:",e),{success:!1,processed:0,errors:[{item:null,error:e}],retryable:[]}}finally{this.status.isSyncing=!1,this.notifyStatusListeners()}}async waitForOnlineAndSync(){return this.status.isOnline||await $M(),this.triggerSync()}onStatusChange(e){return this.statusListeners.add(e),e({...this.status}),()=>{this.statusListeners.delete(e)}}getStatus(){return{...this.status}}async checkAuthentication(){await this.updateAuthStatus()}async forceSync(){return this.triggerSync()}}let I0=null;function Yl(){return I0||(I0=new ZM),I0}function eL(t){const e=Yl();return e.start(t),()=>e.stop()}function tL(){return Yl().triggerSync()}function nL(t){return Yl().onStatusChange(t)}function rL(){return Yl().getStatus()}typeof window<"u"&&Yl();function PC(){const[t,e]=S.useState(()=>({...rL(),isConfigured:mx()}));S.useEffect(()=>nL(l=>{e(c=>({...c,...l}))}),[]);const n=S.useCallback(async()=>{try{return await tL()}catch(o){throw console.error("Manual sync failed:",o),o}},[]),r=t.isOnline&&t.isAuthenticated&&t.isConfigured,s=S.useCallback(()=>t.isConfigured?t.isOnline?t.isAuthenticated?t.isSyncing?"Syncing...":t.pendingItems>0?`${t.pendingItems} pending sync`:t.errors.length>0?`${t.errors.length} sync errors`:"Synced":"Local only (not signed in)":"Offline":"Local only (Supabase not configured)",[t]),i=S.useCallback(()=>t.isConfigured?t.isOnline?t.isAuthenticated?t.isSyncing?"text-blue-500":t.errors.length>0?"text-red-500":t.pendingItems>0?"text-yellow-500":"text-green-500":"text-yellow-500":"text-red-500":"text-gray-500",[t]);return{...t,canSync:r,syncNow:n,getStatusText:s,getStatusColor:i}}function sL(){const[t,e]=S.useState({user:null,loading:!0,error:null});S.useEffect(()=>{(async()=>{try{const{supabase:l}=await Mn(()=>Promise.resolve().then(()=>CC),void 0),{data:{user:c},error:u}=await l.auth.getUser();e(u?{user:null,loading:!1,error:u.message}:{user:c,loading:!1,error:null})}catch(l){e({user:null,loading:!1,error:l instanceof Error?l.message:"Auth check failed"})}})();const{supabase:i}=require("../lib/supabaseClient"),{data:{subscription:o}}=i.auth.onAuthStateChange((l,c)=>{e(u=>({...u,user:(c==null?void 0:c.user)||null,loading:!1}))});return()=>{o.unsubscribe()}},[]);const n=S.useCallback(async s=>{e(i=>({...i,loading:!0,error:null}));try{const{signInWithEmail:i}=await Mn(()=>Promise.resolve().then(()=>n1),void 0),{error:o}=await i(s);if(o)throw e(l=>({...l,loading:!1,error:o.message})),o;e(l=>({...l,loading:!1}))}catch(i){throw e(o=>({...o,loading:!1,error:i instanceof Error?i.message:"Sign in failed"})),i}},[]),r=S.useCallback(async()=>{e(s=>({...s,loading:!0,error:null}));try{const{signOut:s}=await Mn(()=>Promise.resolve().then(()=>n1),void 0),{error:i}=await s();if(i)throw e(o=>({...o,loading:!1,error:i.message})),i;e(o=>({...o,user:null,loading:!1}))}catch(s){throw e(i=>({...i,loading:!1,error:s instanceof Error?s.message:"Sign out failed"})),s}},[]);return{...t,signIn:n,signOut:r,isConfigured:mx()}}function iL({showDetails:t=!1,className:e=""}){const{isOnline:n,isAuthenticated:r,isSyncing:s,pendingItems:i,errors:o,canSync:l,syncNow:c,getStatusText:u,getStatusColor:d,isConfigured:h}=PC(),{user:f,signIn:p,signOut:x,loading:m}=sL(),[v,y]=S.useState(!1),[g,b]=S.useState(""),_=async j=>{if(j.preventDefault(),!!g)try{await p(g),y(!1),b("")}catch(w){console.error("Sign in failed:",w)}},C=async()=>{try{await x()}catch(j){console.error("Sign out failed:",j)}},N=async()=>{try{await c()}catch(j){console.error("Sync failed:",j)}};return h?a.jsxs("div",{className:`relative ${e}`,children:[a.jsxs("div",{className:"text-xs px-2 py-1 rounded-full border inline-flex gap-2 items-center cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${n?"bg-green-500":"bg-red-500"}`}),a.jsx("span",{className:d(),children:u()}),s&&a.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b border-current"}),l&&!s&&a.jsx("button",{onClick:N,className:"text-blue-500 hover:text-blue-700",title:"Sync now",children:"↻"}),!r&&a.jsx("button",{onClick:()=>y(!0),className:"text-blue-500 hover:text-blue-700",title:"Sign in to enable sync",children:"Sign in"}),r&&a.jsx("button",{onClick:C,className:"text-gray-500 hover:text-gray-700",title:"Sign out",children:"Sign out"})]}),t&&a.jsxs("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:[a.jsxs("div",{children:["Online: ",n?"Yes":"No"]}),a.jsxs("div",{children:["Authenticated: ",r?"Yes":"No"]}),a.jsxs("div",{children:["Pending: ",i]}),o.length>0&&a.jsxs("div",{className:"text-red-500",children:["Errors: ",o.length]})]}),v&&a.jsxs("div",{className:"absolute top-full right-0 mt-2 p-4 bg-white dark:bg-gray-800 border rounded-lg shadow-lg z-10 min-w-64",children:[a.jsx("h3",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Sign in to enable cloud sync"}),a.jsxs("form",{onSubmit:_,className:"space-y-2",children:[a.jsx("input",{type:"email",value:g,onChange:j=>b(j.target.value),placeholder:"Enter your email",className:"w-full px-3 py-2 border rounded-md text-sm",required:!0}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{type:"submit",disabled:m,className:"px-3 py-1 text-sm bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50",children:m?"Sending...":"Send Magic Link"}),a.jsx("button",{type:"button",onClick:()=>y(!1),className:"px-3 py-1 text-sm bg-gray-500 text-white rounded hover:bg-gray-600",children:"Cancel"})]})]}),f&&a.jsxs("div",{className:"mt-2 text-xs text-gray-600 dark:text-gray-400",children:["Signed in as: ",f.email]})]})]}):a.jsxs("div",{className:`text-xs px-2 py-1 rounded-full border inline-flex gap-2 items-center ${e}`,children:[a.jsx("span",{className:"text-gray-500",children:"Local only"}),a.jsx("span",{children:"•"}),a.jsx("span",{className:"text-gray-500",children:"Supabase not configured"})]})}function oL(t){const[e,n]=S.useState({sample:null,loading:!1,error:null,structure:null}),r=S.useCallback(async o=>{n(l=>({...l,loading:!0,error:null}));try{const l=await RM(o);if(l&&l.length>0){const c=Ru(l);n(u=>({...u,sample:l,structure:c,loading:!1}))}else n(c=>({...c,sample:null,structure:null,loading:!1}))}catch(l){console.error("Error loading dataset sample:",l),n(c=>({...c,loading:!1,error:l instanceof Error?l.message:"Failed to load dataset"}))}},[]);S.useEffect(()=>{t?r(t):n({sample:null,loading:!1,error:null,structure:null})},[t,r]);const s=S.useCallback(()=>{t&&r(t)},[t,r]),i=S.useCallback(()=>{n(o=>({...o,error:null}))},[]);return{...e,refresh:s,clearError:i}}function aL(){var c,u;const[t,e]=S.useState(null),{sample:n,loading:r,error:s,structure:i}=oL((t==null?void 0:t.id)||null),{isConfigured:o}=PC();S.useEffect(()=>eL(3e4),[]);const l=d=>{e(d)};return a.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:a.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"PropFi — Local-First"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Connect local CSV files and visualize your property data"})]}),a.jsx(iL,{showDetails:!1})]}),!o&&a.jsxs("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[a.jsx("h3",{className:"font-medium text-yellow-800 mb-2",children:"Supabase Not Configured"}),a.jsx("p",{className:"text-sm text-yellow-700",children:"To enable cloud sync, please configure your Supabase credentials in the environment variables. The app will work in local-only mode without cloud sync."})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsx("div",{className:"space-y-6",children:a.jsx(MM,{onDatasetSelect:l,selectedDatasetId:t==null?void 0:t.id})}),a.jsx("div",{className:"space-y-6",children:t?a.jsxs("div",{className:"p-4 border rounded-xl bg-white dark:bg-gray-800",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:["Dataset Preview: ",t.name]}),r&&a.jsxs("div",{className:"flex items-center justify-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),a.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:"Loading..."})]}),s&&a.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:a.jsx("p",{className:"text-red-700 text-sm",children:s})}),n&&n.length>0&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Rows:"}),a.jsx("span",{className:"ml-2 text-gray-900 dark:text-white",children:n.length})]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Fields:"}),a.jsx("span",{className:"ml-2 text-gray-900 dark:text-white",children:((c=t.fields)==null?void 0:c.length)||0})]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Source:"}),a.jsx("span",{className:"ml-2 text-gray-900 dark:text-white",children:t.source})]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Size:"}),a.jsx("span",{className:"ml-2 text-gray-900 dark:text-white",children:t.size?`${(t.size/1024).toFixed(1)} KB`:"Unknown"})]})]}),i&&a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Field Types"}),a.jsx("div",{className:"grid grid-cols-2 gap-2 text-sm",children:Object.entries(i.fieldTypes).map(([d,h])=>a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[d,":"]}),a.jsx("span",{className:`px-2 py-1 rounded text-xs ${h==="number"?"bg-blue-100 text-blue-800":h==="date"?"bg-green-100 text-green-800":h==="string"?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800"}`,children:h})]},d))})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Sample Data"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-600",children:[(u=t.fields)==null?void 0:u.slice(0,10).map(d=>a.jsx("th",{className:"text-left py-2 px-3 font-medium text-gray-600 dark:text-gray-400",children:d},d)),t.fields&&t.fields.length>10&&a.jsx("th",{className:"text-left py-2 px-3 font-medium text-gray-600 dark:text-gray-400",children:"..."})]})}),a.jsx("tbody",{children:n.slice(0,10).map((d,h)=>{var f;return a.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-700",children:[(f=t.fields)==null?void 0:f.slice(0,10).map(p=>{var x,m;return a.jsxs("td",{className:"py-2 px-3 text-gray-900 dark:text-white",children:[((x=d[p])==null?void 0:x.toString().slice(0,50))||"-",((m=d[p])==null?void 0:m.toString().length)>50&&"..."]},p)}),t.fields&&t.fields.length>10&&a.jsx("td",{className:"py-2 px-3 text-gray-500",children:"..."})]},h)})})]})}),n.length>10&&a.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:["Showing first 10 rows of ",n.length," total rows"]})]})]})]}):a.jsxs("div",{className:"p-8 border rounded-xl bg-white dark:bg-gray-800 text-center",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Dataset Selected"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Select a dataset from the left to preview its data and structure."})]})})]}),a.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500 dark:text-gray-400",children:[a.jsx("div",{children:"PropFi Local-First Architecture"}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("span",{children:"Data stored locally in IndexedDB"}),o&&a.jsx("span",{children:"•"}),o&&a.jsx("span",{children:"Optional Supabase sync"})]})]})})]})})}const M0="propfi.secure.files",r1="propfi.encryption.key";class L0{static getEncryptionKey(){const e=localStorage.getItem(r1);if(e)return e;const n=Jn.lib.WordArray.random(256/8).toString();return localStorage.setItem(r1,n),n}static encrypt(e){const n=this.getEncryptionKey();return Jn.AES.encrypt(e,n).toString()}static decrypt(e){const n=this.getEncryptionKey();return Jn.AES.decrypt(e,n).toString(Jn.enc.Utf8)}static generateChecksum(e){return Jn.SHA256(e).toString()}}class Yi{static async getStoredFiles(){try{return await Kl(M0)||[]}catch(e){return console.error("Failed to load stored files:",e),[]}}static async saveStoredFiles(e){try{await Gl(M0,e)}catch(n){throw console.error("Failed to save stored files:",n),n}}static async storeFile(e,n={}){try{const r=await this.fileToBase64(e),s={id:crypto.randomUUID(),name:e.name,originalName:e.name,size:e.size,type:e.type,uploadedAt:Date.now(),lastAccessed:Date.now(),encrypted:n.encrypt!==!1,checksum:L0.generateChecksum(r),tags:n.tags||[],description:n.description},i=s.encrypted?L0.encrypt(r):r,o={meta:s,data:i},l=await this.getStoredFiles();return l.push(o),await this.saveStoredFiles(l),console.log(`File stored securely: ${s.name} (${s.size} bytes)`),s}catch(r){throw console.error("Failed to store file:",r),r}}static async getFile(e){try{const n=await this.getStoredFiles(),r=n.find(o=>o.meta.id===e);if(!r)return null;r.meta.lastAccessed=Date.now(),await this.saveStoredFiles(n);const s=r.meta.encrypted?L0.decrypt(r.data):r.data;return await this.base64ToFile(s,r.meta.originalName,r.meta.type)}catch(n){return console.error("Failed to retrieve file:",n),null}}static async getFileMeta(e){try{const r=(await this.getStoredFiles()).find(s=>s.meta.id===e);return(r==null?void 0:r.meta)||null}catch(n){return console.error("Failed to get file metadata:",n),null}}static async listFiles(){try{return(await this.getStoredFiles()).map(n=>n.meta).sort((n,r)=>r.uploadedAt-n.uploadedAt)}catch(e){return console.error("Failed to list files:",e),[]}}static async deleteFile(e){try{const n=await this.getStoredFiles(),r=n.length,s=n.filter(i=>i.meta.id!==e);return s.length===r?!1:(await this.saveStoredFiles(s),console.log(`File deleted: ${e}`),!0)}catch(n){return console.error("Failed to delete file:",n),!1}}static async updateFileMeta(e,n){try{const r=await this.getStoredFiles(),s=r.findIndex(i=>i.meta.id===e);return s===-1?!1:(r[s].meta={...r[s].meta,...n},await this.saveStoredFiles(r),!0)}catch(r){return console.error("Failed to update file metadata:",r),!1}}static async searchFiles(e){try{const n=await this.listFiles(),r=e.toLowerCase();return n.filter(s=>{var i,o;return s.name.toLowerCase().includes(r)||s.originalName.toLowerCase().includes(r)||((i=s.tags)==null?void 0:i.some(l=>l.toLowerCase().includes(r)))||((o=s.description)==null?void 0:o.toLowerCase().includes(r))})}catch(n){return console.error("Failed to search files:",n),[]}}static async getStorageStats(){try{const e=await this.listFiles();return{totalFiles:e.length,totalSize:e.reduce((n,r)=>n+r.size,0),encryptedFiles:e.filter(n=>n.encrypted).length,oldestFile:e.length>0?Math.min(...e.map(n=>n.uploadedAt)):0,newestFile:e.length>0?Math.max(...e.map(n=>n.uploadedAt)):0}}catch(e){return console.error("Failed to get storage stats:",e),{totalFiles:0,totalSize:0,encryptedFiles:0,oldestFile:0,newestFile:0}}}static async clearAllFiles(){try{await TM(M0),console.log("All files cleared")}catch(e){throw console.error("Failed to clear all files:",e),e}}static async fileToBase64(e){return new Promise((n,r)=>{const s=new FileReader;s.onload=()=>{const o=s.result.split(",")[1];n(o)},s.onerror=r,s.readAsDataURL(e)})}static async base64ToFile(e,n,r){const s=atob(e),i=new Array(s.length);for(let l=0;l<s.length;l++)i[l]=s.charCodeAt(l);const o=new Uint8Array(i);return new File([o],n,{type:r})}static async exportFile(e){try{const n=await this.getFile(e);if(!n)throw new Error("File not found");const r=URL.createObjectURL(n),s=document.createElement("a");s.href=r,s.download=n.name,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(r)}catch(n){throw console.error("Failed to export file:",n),n}}static async previewFile(e){try{const n=await this.getFile(e);return n&&(n.type.startsWith("text/")||n.name.endsWith(".csv")||n.name.endsWith(".json"))?new Promise((r,s)=>{const i=new FileReader;i.onload=()=>r(i.result),i.onerror=s,i.readAsText(n)}):null}catch(n){return console.error("Failed to preview file:",n),null}}}function Re(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function Xl(t,e=[]){let n=[];function r(i,o){const l=S.createContext(o),c=n.length;n=[...n,o];const u=h=>{var y;const{scope:f,children:p,...x}=h,m=((y=f==null?void 0:f[t])==null?void 0:y[c])||l,v=S.useMemo(()=>x,Object.values(x));return a.jsx(m.Provider,{value:v,children:p})};u.displayName=i+"Provider";function d(h,f){var m;const p=((m=f==null?void 0:f[t])==null?void 0:m[c])||l,x=S.useContext(p);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[u,d]}const s=()=>{const i=n.map(o=>S.createContext(o));return function(l){const c=(l==null?void 0:l[t])||i;return S.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,lL(s,...e)]}function lL(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const h=c(i)[`__scope${u}`];return{...l,...h}},{});return S.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var Ls=globalThis!=null&&globalThis.document?S.useLayoutEffect:()=>{},cL=$1[" useInsertionEffect ".trim().toString()]||Ls;function DC({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,o]=uL({defaultProp:e,onChange:n}),l=t!==void 0,c=l?t:s;{const d=S.useRef(t!==void 0);S.useEffect(()=>{const h=d.current;h!==l&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,r])}const u=S.useCallback(d=>{var h;if(l){const f=dL(d)?d(t):d;f!==t&&((h=o.current)==null||h.call(o,f))}else i(d)},[l,t,i,o]);return[c,u]}function uL({defaultProp:t,onChange:e}){const[n,r]=S.useState(t),s=S.useRef(n),i=S.useRef(e);return cL(()=>{i.current=e},[e]),S.useEffect(()=>{var o;s.current!==n&&((o=i.current)==null||o.call(i,n),s.current=n)},[n,s]),[n,r,i]}function dL(t){return typeof t=="function"}function TC(t){const e=t+"CollectionProvider",[n,r]=Xl(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=m=>{const{scope:v,children:y}=m,g=X.useRef(null),b=X.useRef(new Map).current;return a.jsx(s,{scope:v,itemMap:b,collectionRef:g,children:y})};o.displayName=e;const l=t+"CollectionSlot",c=vl(l),u=X.forwardRef((m,v)=>{const{scope:y,children:g}=m,b=i(l,y),_=an(v,b.collectionRef);return a.jsx(c,{ref:_,children:g})});u.displayName=l;const d=t+"CollectionItemSlot",h="data-radix-collection-item",f=vl(d),p=X.forwardRef((m,v)=>{const{scope:y,children:g,...b}=m,_=X.useRef(null),C=an(v,_),N=i(d,y);return X.useEffect(()=>(N.itemMap.set(_,{ref:_,...b}),()=>void N.itemMap.delete(_))),a.jsx(f,{[h]:"",ref:C,children:g})});p.displayName=d;function x(m){const v=i(t+"CollectionConsumer",m);return X.useCallback(()=>{const g=v.collectionRef.current;if(!g)return[];const b=Array.from(g.querySelectorAll(`[${h}]`));return Array.from(v.itemMap.values()).sort((N,j)=>b.indexOf(N.ref.current)-b.indexOf(j.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:u,ItemSlot:p},x,r]}var hL=S.createContext(void 0);function OC(t){const e=S.useContext(hL);return t||e||"ltr"}function Gr(t){const e=S.useRef(t);return S.useEffect(()=>{e.current=t}),S.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function fL(t,e=globalThis==null?void 0:globalThis.document){const n=Gr(t);S.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var pL="DismissableLayer",Am="dismissableLayer.update",mL="dismissableLayer.pointerDownOutside",gL="dismissableLayer.focusOutside",s1,RC=S.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),FC=S.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=t,u=S.useContext(RC),[d,h]=S.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=S.useState({}),x=an(e,j=>h(j)),m=Array.from(u.layers),[v]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),y=m.indexOf(v),g=d?m.indexOf(d):-1,b=u.layersWithOutsidePointerEventsDisabled.size>0,_=g>=y,C=vL(j=>{const w=j.target,k=[...u.branches].some(E=>E.contains(w));!_||k||(s==null||s(j),o==null||o(j),j.defaultPrevented||l==null||l())},f),N=bL(j=>{const w=j.target;[...u.branches].some(E=>E.contains(w))||(i==null||i(j),o==null||o(j),j.defaultPrevented||l==null||l())},f);return fL(j=>{g===u.layers.size-1&&(r==null||r(j),!j.defaultPrevented&&l&&(j.preventDefault(),l()))},f),S.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(s1=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),i1(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=s1)}},[d,f,n,u]),S.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),i1())},[d,u]),S.useEffect(()=>{const j=()=>p({});return document.addEventListener(Am,j),()=>document.removeEventListener(Am,j)},[]),a.jsx(zt.div,{...c,ref:x,style:{pointerEvents:b?_?"auto":"none":void 0,...t.style},onFocusCapture:Re(t.onFocusCapture,N.onFocusCapture),onBlurCapture:Re(t.onBlurCapture,N.onBlurCapture),onPointerDownCapture:Re(t.onPointerDownCapture,C.onPointerDownCapture)})});FC.displayName=pL;var xL="DismissableLayerBranch",yL=S.forwardRef((t,e)=>{const n=S.useContext(RC),r=S.useRef(null),s=an(e,r);return S.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),a.jsx(zt.div,{...t,ref:s})});yL.displayName=xL;function vL(t,e=globalThis==null?void 0:globalThis.document){const n=Gr(t),r=S.useRef(!1),s=S.useRef(()=>{});return S.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let c=function(){IC(mL,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function bL(t,e=globalThis==null?void 0:globalThis.document){const n=Gr(t),r=S.useRef(!1);return S.useEffect(()=>{const s=i=>{i.target&&!r.current&&IC(gL,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function i1(){const t=new CustomEvent(Am);document.dispatchEvent(t)}function IC(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?V2(s,i):s.dispatchEvent(i)}var B0=0;function wL(){S.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??o1()),document.body.insertAdjacentElement("beforeend",t[1]??o1()),B0++,()=>{B0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),B0--}},[])}function o1(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var $0="focusScope.autoFocusOnMount",z0="focusScope.autoFocusOnUnmount",a1={bubbles:!1,cancelable:!0},_L="FocusScope",MC=S.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[l,c]=S.useState(null),u=Gr(s),d=Gr(i),h=S.useRef(null),f=an(e,m=>c(m)),p=S.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;S.useEffect(()=>{if(r){let m=function(b){if(p.paused||!l)return;const _=b.target;l.contains(_)?h.current=_:as(h.current,{select:!0})},v=function(b){if(p.paused||!l)return;const _=b.relatedTarget;_!==null&&(l.contains(_)||as(h.current,{select:!0}))},y=function(b){if(document.activeElement===document.body)for(const C of b)C.removedNodes.length>0&&as(l)};document.addEventListener("focusin",m),document.addEventListener("focusout",v);const g=new MutationObserver(y);return l&&g.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",v),g.disconnect()}}},[r,l,p.paused]),S.useEffect(()=>{if(l){c1.add(p);const m=document.activeElement;if(!l.contains(m)){const y=new CustomEvent($0,a1);l.addEventListener($0,u),l.dispatchEvent(y),y.defaultPrevented||(kL(NL(LC(l)),{select:!0}),document.activeElement===m&&as(l))}return()=>{l.removeEventListener($0,u),setTimeout(()=>{const y=new CustomEvent(z0,a1);l.addEventListener(z0,d),l.dispatchEvent(y),y.defaultPrevented||as(m??document.body,{select:!0}),l.removeEventListener(z0,d),c1.remove(p)},0)}}},[l,u,d,p]);const x=S.useCallback(m=>{if(!n&&!r||p.paused)return;const v=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,y=document.activeElement;if(v&&y){const g=m.currentTarget,[b,_]=SL(g);b&&_?!m.shiftKey&&y===_?(m.preventDefault(),n&&as(b,{select:!0})):m.shiftKey&&y===b&&(m.preventDefault(),n&&as(_,{select:!0})):y===g&&m.preventDefault()}},[n,r,p.paused]);return a.jsx(zt.div,{tabIndex:-1,...o,ref:f,onKeyDown:x})});MC.displayName=_L;function kL(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(as(r,{select:e}),document.activeElement!==n)return}function SL(t){const e=LC(t),n=l1(e,t),r=l1(e.reverse(),t);return[n,r]}function LC(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function l1(t,e){for(const n of t)if(!CL(n,{upTo:e}))return n}function CL(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function jL(t){return t instanceof HTMLInputElement&&"select"in t}function as(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&jL(t)&&e&&t.select()}}var c1=EL();function EL(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=u1(t,e),t.unshift(e)},remove(e){var n;t=u1(t,e),(n=t[0])==null||n.resume()}}}function u1(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function NL(t){return t.filter(e=>e.tagName!=="A")}var AL=$1[" useId ".trim().toString()]||(()=>{}),PL=0;function Pm(t){const[e,n]=S.useState(AL());return Ls(()=>{t||n(r=>r??String(PL++))},[t]),t||(e?`radix-${e}`:"")}const DL=["top","right","bottom","left"],Bs=Math.min,gn=Math.max,jd=Math.round,su=Math.floor,vr=t=>({x:t,y:t}),TL={left:"right",right:"left",bottom:"top",top:"bottom"},OL={start:"end",end:"start"};function Dm(t,e,n){return gn(t,Bs(e,n))}function Yr(t,e){return typeof t=="function"?t(e):t}function Xr(t){return t.split("-")[0]}function Zo(t){return t.split("-")[1]}function gx(t){return t==="x"?"y":"x"}function xx(t){return t==="y"?"height":"width"}const RL=new Set(["top","bottom"]);function mr(t){return RL.has(Xr(t))?"y":"x"}function yx(t){return gx(mr(t))}function FL(t,e,n){n===void 0&&(n=!1);const r=Zo(t),s=yx(t),i=xx(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Ed(o)),[o,Ed(o)]}function IL(t){const e=Ed(t);return[Tm(t),e,Tm(e)]}function Tm(t){return t.replace(/start|end/g,e=>OL[e])}const d1=["left","right"],h1=["right","left"],ML=["top","bottom"],LL=["bottom","top"];function BL(t,e,n){switch(t){case"top":case"bottom":return n?e?h1:d1:e?d1:h1;case"left":case"right":return e?ML:LL;default:return[]}}function $L(t,e,n,r){const s=Zo(t);let i=BL(Xr(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(Tm)))),i}function Ed(t){return t.replace(/left|right|bottom|top/g,e=>TL[e])}function zL(t){return{top:0,right:0,bottom:0,left:0,...t}}function BC(t){return typeof t!="number"?zL(t):{top:t,right:t,bottom:t,left:t}}function Nd(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function f1(t,e,n){let{reference:r,floating:s}=t;const i=mr(e),o=yx(e),l=xx(o),c=Xr(e),u=i==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,f=r[l]/2-s[l]/2;let p;switch(c){case"top":p={x:d,y:r.y-s.height};break;case"bottom":p={x:d,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:h};break;case"left":p={x:r.x-s.width,y:h};break;default:p={x:r.x,y:r.y}}switch(Zo(e)){case"start":p[o]-=f*(n&&u?-1:1);break;case"end":p[o]+=f*(n&&u?-1:1);break}return p}const UL=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=f1(u,r,c),f=r,p={},x=0;for(let m=0;m<l.length;m++){const{name:v,fn:y}=l[m],{x:g,y:b,data:_,reset:C}=await y({x:d,y:h,initialPlacement:r,placement:f,strategy:s,middlewareData:p,rects:u,platform:o,elements:{reference:t,floating:e}});d=g??d,h=b??h,p={...p,[v]:{...p[v],..._}},C&&x<=50&&(x++,typeof C=="object"&&(C.placement&&(f=C.placement),C.rects&&(u=C.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):C.rects),{x:d,y:h}=f1(u,f,c)),m=-1)}return{x:d,y:h,placement:f,strategy:s,middlewareData:p}};async function El(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:p=0}=Yr(e,t),x=BC(p),v=l[f?h==="floating"?"reference":"floating":h],y=Nd(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(v)))==null||n?v:v.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),g=h==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,b=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),_=await(i.isElement==null?void 0:i.isElement(b))?await(i.getScale==null?void 0:i.getScale(b))||{x:1,y:1}:{x:1,y:1},C=Nd(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:g,offsetParent:b,strategy:c}):g);return{top:(y.top-C.top+x.top)/_.y,bottom:(C.bottom-y.bottom+x.bottom)/_.y,left:(y.left-C.left+x.left)/_.x,right:(C.right-y.right+x.right)/_.x}}const VL=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:l,middlewareData:c}=e,{element:u,padding:d=0}=Yr(t,e)||{};if(u==null)return{};const h=BC(d),f={x:n,y:r},p=yx(s),x=xx(p),m=await o.getDimensions(u),v=p==="y",y=v?"top":"left",g=v?"bottom":"right",b=v?"clientHeight":"clientWidth",_=i.reference[x]+i.reference[p]-f[p]-i.floating[x],C=f[p]-i.reference[p],N=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let j=N?N[b]:0;(!j||!await(o.isElement==null?void 0:o.isElement(N)))&&(j=l.floating[b]||i.floating[x]);const w=_/2-C/2,k=j/2-m[x]/2-1,E=Bs(h[y],k),P=Bs(h[g],k),A=E,D=j-m[x]-P,L=j/2-m[x]/2+w,W=Dm(A,L,D),U=!c.arrow&&Zo(s)!=null&&L!==W&&i.reference[x]/2-(L<A?E:P)-m[x]/2<0,V=U?L<A?L-A:L-D:0;return{[p]:f[p]+V,data:{[p]:W,centerOffset:L-W-V,...U&&{alignmentOffset:V}},reset:U}}}),WL=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:m=!0,...v}=Yr(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const y=Xr(s),g=mr(l),b=Xr(l)===l,_=await(c.isRTL==null?void 0:c.isRTL(u.floating)),C=f||(b||!m?[Ed(l)]:IL(l)),N=x!=="none";!f&&N&&C.push(...$L(l,m,x,_));const j=[l,...C],w=await El(e,v),k=[];let E=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&k.push(w[y]),h){const L=FL(s,o,_);k.push(w[L[0]],w[L[1]])}if(E=[...E,{placement:s,overflows:k}],!k.every(L=>L<=0)){var P,A;const L=(((P=i.flip)==null?void 0:P.index)||0)+1,W=j[L];if(W&&(!(h==="alignment"?g!==mr(W):!1)||E.every($=>mr($.placement)===g?$.overflows[0]>0:!0)))return{data:{index:L,overflows:E},reset:{placement:W}};let U=(A=E.filter(V=>V.overflows[0]<=0).sort((V,$)=>V.overflows[1]-$.overflows[1])[0])==null?void 0:A.placement;if(!U)switch(p){case"bestFit":{var D;const V=(D=E.filter($=>{if(N){const M=mr($.placement);return M===g||M==="y"}return!0}).map($=>[$.placement,$.overflows.filter(M=>M>0).reduce((M,O)=>M+O,0)]).sort(($,M)=>$[1]-M[1])[0])==null?void 0:D[0];V&&(U=V);break}case"initialPlacement":U=l;break}if(s!==U)return{reset:{placement:U}}}return{}}}};function p1(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function m1(t){return DL.some(e=>t[e]>=0)}const HL=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Yr(t,e);switch(r){case"referenceHidden":{const i=await El(e,{...s,elementContext:"reference"}),o=p1(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:m1(o)}}}case"escaped":{const i=await El(e,{...s,altBoundary:!0}),o=p1(i,n.floating);return{data:{escapedOffsets:o,escaped:m1(o)}}}default:return{}}}}},$C=new Set(["left","top"]);async function qL(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Xr(n),l=Zo(n),c=mr(n)==="y",u=$C.has(o)?-1:1,d=i&&c?-1:1,h=Yr(e,t);let{mainAxis:f,crossAxis:p,alignmentAxis:x}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof x=="number"&&(p=l==="end"?x*-1:x),c?{x:p*d,y:f*u}:{x:f*u,y:p*d}}const KL=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:l}=e,c=await qL(e,t);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}},GL=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:v=>{let{x:y,y:g}=v;return{x:y,y:g}}},...c}=Yr(t,e),u={x:n,y:r},d=await El(e,c),h=mr(Xr(s)),f=gx(h);let p=u[f],x=u[h];if(i){const v=f==="y"?"top":"left",y=f==="y"?"bottom":"right",g=p+d[v],b=p-d[y];p=Dm(g,p,b)}if(o){const v=h==="y"?"top":"left",y=h==="y"?"bottom":"right",g=x+d[v],b=x-d[y];x=Dm(g,x,b)}const m=l.fn({...e,[f]:p,[h]:x});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[f]:i,[h]:o}}}}}},YL=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Yr(t,e),d={x:n,y:r},h=mr(s),f=gx(h);let p=d[f],x=d[h];const m=Yr(l,e),v=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(c){const b=f==="y"?"height":"width",_=i.reference[f]-i.floating[b]+v.mainAxis,C=i.reference[f]+i.reference[b]-v.mainAxis;p<_?p=_:p>C&&(p=C)}if(u){var y,g;const b=f==="y"?"width":"height",_=$C.has(Xr(s)),C=i.reference[h]-i.floating[b]+(_&&((y=o.offset)==null?void 0:y[h])||0)+(_?0:v.crossAxis),N=i.reference[h]+i.reference[b]+(_?0:((g=o.offset)==null?void 0:g[h])||0)-(_?v.crossAxis:0);x<C?x=C:x>N&&(x=N)}return{[f]:p,[h]:x}}}},XL=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:l}=e,{apply:c=()=>{},...u}=Yr(t,e),d=await El(e,u),h=Xr(s),f=Zo(s),p=mr(s)==="y",{width:x,height:m}=i.floating;let v,y;h==="top"||h==="bottom"?(v=h,y=f===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(y=h,v=f==="end"?"top":"bottom");const g=m-d.top-d.bottom,b=x-d.left-d.right,_=Bs(m-d[v],g),C=Bs(x-d[y],b),N=!e.middlewareData.shift;let j=_,w=C;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(w=b),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(j=g),N&&!f){const E=gn(d.left,0),P=gn(d.right,0),A=gn(d.top,0),D=gn(d.bottom,0);p?w=x-2*(E!==0||P!==0?E+P:gn(d.left,d.right)):j=m-2*(A!==0||D!==0?A+D:gn(d.top,d.bottom))}await c({...e,availableWidth:w,availableHeight:j});const k=await o.getDimensions(l.floating);return x!==k.width||m!==k.height?{reset:{rects:!0}}:{}}}};function jh(){return typeof window<"u"}function ea(t){return zC(t)?(t.nodeName||"").toLowerCase():"#document"}function Sn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Sr(t){var e;return(e=(zC(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function zC(t){return jh()?t instanceof Node||t instanceof Sn(t).Node:!1}function sr(t){return jh()?t instanceof Element||t instanceof Sn(t).Element:!1}function _r(t){return jh()?t instanceof HTMLElement||t instanceof Sn(t).HTMLElement:!1}function g1(t){return!jh()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Sn(t).ShadowRoot}const JL=new Set(["inline","contents"]);function Jl(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=ir(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!JL.has(s)}const QL=new Set(["table","td","th"]);function ZL(t){return QL.has(ea(t))}const eB=[":popover-open",":modal"];function Eh(t){return eB.some(e=>{try{return t.matches(e)}catch{return!1}})}const tB=["transform","translate","scale","rotate","perspective"],nB=["transform","translate","scale","rotate","perspective","filter"],rB=["paint","layout","strict","content"];function vx(t){const e=bx(),n=sr(t)?ir(t):t;return tB.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||nB.some(r=>(n.willChange||"").includes(r))||rB.some(r=>(n.contain||"").includes(r))}function sB(t){let e=$s(t);for(;_r(e)&&!Vo(e);){if(vx(e))return e;if(Eh(e))return null;e=$s(e)}return null}function bx(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const iB=new Set(["html","body","#document"]);function Vo(t){return iB.has(ea(t))}function ir(t){return Sn(t).getComputedStyle(t)}function Nh(t){return sr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function $s(t){if(ea(t)==="html")return t;const e=t.assignedSlot||t.parentNode||g1(t)&&t.host||Sr(t);return g1(e)?e.host:e}function UC(t){const e=$s(t);return Vo(e)?t.ownerDocument?t.ownerDocument.body:t.body:_r(e)&&Jl(e)?e:UC(e)}function Nl(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=UC(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=Sn(s);if(i){const l=Om(o);return e.concat(o,o.visualViewport||[],Jl(s)?s:[],l&&n?Nl(l):[])}return e.concat(s,Nl(s,[],n))}function Om(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function VC(t){const e=ir(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=_r(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,l=jd(n)!==i||jd(r)!==o;return l&&(n=i,r=o),{width:n,height:r,$:l}}function wx(t){return sr(t)?t:t.contextElement}function jo(t){const e=wx(t);if(!_r(e))return vr(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=VC(e);let o=(i?jd(n.width):n.width)/r,l=(i?jd(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const oB=vr(0);function WC(t){const e=Sn(t);return!bx()||!e.visualViewport?oB:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function aB(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Sn(t)?!1:e}function Ai(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=wx(t);let o=vr(1);e&&(r?sr(r)&&(o=jo(r)):o=jo(t));const l=aB(i,n,r)?WC(i):vr(0);let c=(s.left+l.x)/o.x,u=(s.top+l.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(i){const f=Sn(i),p=r&&sr(r)?Sn(r):r;let x=f,m=Om(x);for(;m&&r&&p!==x;){const v=jo(m),y=m.getBoundingClientRect(),g=ir(m),b=y.left+(m.clientLeft+parseFloat(g.paddingLeft))*v.x,_=y.top+(m.clientTop+parseFloat(g.paddingTop))*v.y;c*=v.x,u*=v.y,d*=v.x,h*=v.y,c+=b,u+=_,x=Sn(m),m=Om(x)}}return Nd({width:d,height:h,x:c,y:u})}function Ah(t,e){const n=Nh(t).scrollLeft;return e?e.left+n:Ai(Sr(t)).left+n}function HC(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-Ah(t,n),s=n.top+e.scrollTop;return{x:r,y:s}}function lB(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=Sr(r),l=e?Eh(e.floating):!1;if(r===o||l&&i)return n;let c={scrollLeft:0,scrollTop:0},u=vr(1);const d=vr(0),h=_r(r);if((h||!h&&!i)&&((ea(r)!=="body"||Jl(o))&&(c=Nh(r)),_r(r))){const p=Ai(r);u=jo(r),d.x=p.x+r.clientLeft,d.y=p.y+r.clientTop}const f=o&&!h&&!i?HC(o,c):vr(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x+f.x,y:n.y*u.y-c.scrollTop*u.y+d.y+f.y}}function cB(t){return Array.from(t.getClientRects())}function uB(t){const e=Sr(t),n=Nh(t),r=t.ownerDocument.body,s=gn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=gn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Ah(t);const l=-n.scrollTop;return ir(r).direction==="rtl"&&(o+=gn(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:l}}const x1=25;function dB(t,e){const n=Sn(t),r=Sr(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,l=0,c=0;if(s){i=s.width,o=s.height;const d=bx();(!d||d&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}const u=Ah(r);if(u<=0){const d=r.ownerDocument,h=d.body,f=getComputedStyle(h),p=d.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,x=Math.abs(r.clientWidth-h.clientWidth-p);x<=x1&&(i-=x)}else u<=x1&&(i+=u);return{width:i,height:o,x:l,y:c}}const hB=new Set(["absolute","fixed"]);function fB(t,e){const n=Ai(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=_r(t)?jo(t):vr(1),o=t.clientWidth*i.x,l=t.clientHeight*i.y,c=s*i.x,u=r*i.y;return{width:o,height:l,x:c,y:u}}function y1(t,e,n){let r;if(e==="viewport")r=dB(t,n);else if(e==="document")r=uB(Sr(t));else if(sr(e))r=fB(e,n);else{const s=WC(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Nd(r)}function qC(t,e){const n=$s(t);return n===e||!sr(n)||Vo(n)?!1:ir(n).position==="fixed"||qC(n,e)}function pB(t,e){const n=e.get(t);if(n)return n;let r=Nl(t,[],!1).filter(l=>sr(l)&&ea(l)!=="body"),s=null;const i=ir(t).position==="fixed";let o=i?$s(t):t;for(;sr(o)&&!Vo(o);){const l=ir(o),c=vx(o);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&hB.has(s.position)||Jl(o)&&!c&&qC(t,o))?r=r.filter(d=>d!==o):s=l,o=$s(o)}return e.set(t,r),r}function mB(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?Eh(e)?[]:pB(e,this._c):[].concat(n),r],l=o[0],c=o.reduce((u,d)=>{const h=y1(e,d,s);return u.top=gn(h.top,u.top),u.right=Bs(h.right,u.right),u.bottom=Bs(h.bottom,u.bottom),u.left=gn(h.left,u.left),u},y1(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function gB(t){const{width:e,height:n}=VC(t);return{width:e,height:n}}function xB(t,e,n){const r=_r(e),s=Sr(e),i=n==="fixed",o=Ai(t,!0,i,e);let l={scrollLeft:0,scrollTop:0};const c=vr(0);function u(){c.x=Ah(s)}if(r||!r&&!i)if((ea(e)!=="body"||Jl(s))&&(l=Nh(e)),r){const p=Ai(e,!0,i,e);c.x=p.x+e.clientLeft,c.y=p.y+e.clientTop}else s&&u();i&&!r&&s&&u();const d=s&&!r&&!i?HC(s,l):vr(0),h=o.left+l.scrollLeft-c.x-d.x,f=o.top+l.scrollTop-c.y-d.y;return{x:h,y:f,width:o.width,height:o.height}}function U0(t){return ir(t).position==="static"}function v1(t,e){if(!_r(t)||ir(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Sr(t)===n&&(n=n.ownerDocument.body),n}function KC(t,e){const n=Sn(t);if(Eh(t))return n;if(!_r(t)){let s=$s(t);for(;s&&!Vo(s);){if(sr(s)&&!U0(s))return s;s=$s(s)}return n}let r=v1(t,e);for(;r&&ZL(r)&&U0(r);)r=v1(r,e);return r&&Vo(r)&&U0(r)&&!vx(r)?n:r||sB(t)||n}const yB=async function(t){const e=this.getOffsetParent||KC,n=this.getDimensions,r=await n(t.floating);return{reference:xB(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function vB(t){return ir(t).direction==="rtl"}const bB={convertOffsetParentRelativeRectToViewportRelativeRect:lB,getDocumentElement:Sr,getClippingRect:mB,getOffsetParent:KC,getElementRects:yB,getClientRects:cB,getDimensions:gB,getScale:jo,isElement:sr,isRTL:vB};function GC(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function wB(t,e){let n=null,r;const s=Sr(t);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=t.getBoundingClientRect(),{left:d,top:h,width:f,height:p}=u;if(l||e(),!f||!p)return;const x=su(h),m=su(s.clientWidth-(d+f)),v=su(s.clientHeight-(h+p)),y=su(d),b={rootMargin:-x+"px "+-m+"px "+-v+"px "+-y+"px",threshold:gn(0,Bs(1,c))||1};let _=!0;function C(N){const j=N[0].intersectionRatio;if(j!==c){if(!_)return o();j?o(!1,j):r=setTimeout(()=>{o(!1,1e-7)},1e3)}j===1&&!GC(u,t.getBoundingClientRect())&&o(),_=!1}try{n=new IntersectionObserver(C,{...b,root:s.ownerDocument})}catch{n=new IntersectionObserver(C,b)}n.observe(t)}return o(!0),i}function _B(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=wx(t),d=s||i?[...u?Nl(u):[],...Nl(e)]:[];d.forEach(y=>{s&&y.addEventListener("scroll",n,{passive:!0}),i&&y.addEventListener("resize",n)});const h=u&&l?wB(u,n):null;let f=-1,p=null;o&&(p=new ResizeObserver(y=>{let[g]=y;g&&g.target===u&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var b;(b=p)==null||b.observe(e)})),n()}),u&&!c&&p.observe(u),p.observe(e));let x,m=c?Ai(t):null;c&&v();function v(){const y=Ai(t);m&&!GC(m,y)&&n(),m=y,x=requestAnimationFrame(v)}return n(),()=>{var y;d.forEach(g=>{s&&g.removeEventListener("scroll",n),i&&g.removeEventListener("resize",n)}),h==null||h(),(y=p)==null||y.disconnect(),p=null,c&&cancelAnimationFrame(x)}}const kB=KL,SB=GL,CB=WL,jB=XL,EB=HL,b1=VL,NB=YL,AB=(t,e,n)=>{const r=new Map,s={platform:bB,...n},i={...s.platform,_c:r};return UL(t,e,{...s,platform:i})};var PB=typeof document<"u",DB=function(){},Fu=PB?S.useLayoutEffect:DB;function Ad(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Ad(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Ad(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function YC(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function w1(t,e){const n=YC(t);return Math.round(e*n)/n}function V0(t){const e=S.useRef(t);return Fu(()=>{e.current=t}),e}function TB(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[d,h]=S.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,p]=S.useState(r);Ad(f,r)||p(r);const[x,m]=S.useState(null),[v,y]=S.useState(null),g=S.useCallback($=>{$!==N.current&&(N.current=$,m($))},[]),b=S.useCallback($=>{$!==j.current&&(j.current=$,y($))},[]),_=i||x,C=o||v,N=S.useRef(null),j=S.useRef(null),w=S.useRef(d),k=c!=null,E=V0(c),P=V0(s),A=V0(u),D=S.useCallback(()=>{if(!N.current||!j.current)return;const $={placement:e,strategy:n,middleware:f};P.current&&($.platform=P.current),AB(N.current,j.current,$).then(M=>{const O={...M,isPositioned:A.current!==!1};L.current&&!Ad(w.current,O)&&(w.current=O,Il.flushSync(()=>{h(O)}))})},[f,e,n,P,A]);Fu(()=>{u===!1&&w.current.isPositioned&&(w.current.isPositioned=!1,h($=>({...$,isPositioned:!1})))},[u]);const L=S.useRef(!1);Fu(()=>(L.current=!0,()=>{L.current=!1}),[]),Fu(()=>{if(_&&(N.current=_),C&&(j.current=C),_&&C){if(E.current)return E.current(_,C,D);D()}},[_,C,D,E,k]);const W=S.useMemo(()=>({reference:N,floating:j,setReference:g,setFloating:b}),[g,b]),U=S.useMemo(()=>({reference:_,floating:C}),[_,C]),V=S.useMemo(()=>{const $={position:n,left:0,top:0};if(!U.floating)return $;const M=w1(U.floating,d.x),O=w1(U.floating,d.y);return l?{...$,transform:"translate("+M+"px, "+O+"px)",...YC(U.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:M,top:O}},[n,l,U.floating,d.x,d.y]);return S.useMemo(()=>({...d,update:D,refs:W,elements:U,floatingStyles:V}),[d,D,W,U,V])}const OB=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?b1({element:r.current,padding:s}).fn(n):{}:r?b1({element:r,padding:s}).fn(n):{}}}},RB=(t,e)=>({...kB(t),options:[t,e]}),FB=(t,e)=>({...SB(t),options:[t,e]}),IB=(t,e)=>({...NB(t),options:[t,e]}),MB=(t,e)=>({...CB(t),options:[t,e]}),LB=(t,e)=>({...jB(t),options:[t,e]}),BB=(t,e)=>({...EB(t),options:[t,e]}),$B=(t,e)=>({...OB(t),options:[t,e]});var zB="Arrow",XC=S.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return a.jsx(zt.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});XC.displayName=zB;var UB=XC;function VB(t){const[e,n]=S.useState(void 0);return Ls(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=t.offsetWidth,l=t.offsetHeight;n({width:o,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var _x="Popper",[JC,QC]=Xl(_x),[WB,ZC]=JC(_x),ej=t=>{const{__scopePopper:e,children:n}=t,[r,s]=S.useState(null);return a.jsx(WB,{scope:e,anchor:r,onAnchorChange:s,children:n})};ej.displayName=_x;var tj="PopperAnchor",nj=S.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=ZC(tj,n),o=S.useRef(null),l=an(e,o),c=S.useRef(null);return S.useEffect(()=>{const u=c.current;c.current=(r==null?void 0:r.current)||o.current,u!==c.current&&i.onAnchorChange(c.current)}),r?null:a.jsx(zt.div,{...s,ref:l})});nj.displayName=tj;var kx="PopperContent",[HB,qB]=JC(kx),rj=S.forwardRef((t,e)=>{var Z,te,le,he,de,ae;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:x,...m}=t,v=ZC(kx,n),[y,g]=S.useState(null),b=an(e,Q=>g(Q)),[_,C]=S.useState(null),N=VB(_),j=(N==null?void 0:N.width)??0,w=(N==null?void 0:N.height)??0,k=r+(i!=="center"?"-"+i:""),E=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},P=Array.isArray(u)?u:[u],A=P.length>0,D={padding:E,boundary:P.filter(GB),altBoundary:A},{refs:L,floatingStyles:W,placement:U,isPositioned:V,middlewareData:$}=TB({strategy:"fixed",placement:k,whileElementsMounted:(...Q)=>_B(...Q,{animationFrame:p==="always"}),elements:{reference:v.anchor},middleware:[RB({mainAxis:s+w,alignmentAxis:o}),c&&FB({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?IB():void 0,...D}),c&&MB({...D}),LB({...D,apply:({elements:Q,rects:ne,availableWidth:ie,availableHeight:oe})=>{const{width:be,height:ge}=ne.reference,fe=Q.floating.style;fe.setProperty("--radix-popper-available-width",`${ie}px`),fe.setProperty("--radix-popper-available-height",`${oe}px`),fe.setProperty("--radix-popper-anchor-width",`${be}px`),fe.setProperty("--radix-popper-anchor-height",`${ge}px`)}}),_&&$B({element:_,padding:l}),YB({arrowWidth:j,arrowHeight:w}),f&&BB({strategy:"referenceHidden",...D})]}),[M,O]=oj(U),T=Gr(x);Ls(()=>{V&&(T==null||T())},[V,T]);const F=(Z=$.arrow)==null?void 0:Z.x,R=(te=$.arrow)==null?void 0:te.y,B=((le=$.arrow)==null?void 0:le.centerOffset)!==0,[J,G]=S.useState();return Ls(()=>{y&&G(window.getComputedStyle(y).zIndex)},[y]),a.jsx("div",{ref:L.setFloating,"data-radix-popper-content-wrapper":"",style:{...W,transform:V?W.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:J,"--radix-popper-transform-origin":[(he=$.transformOrigin)==null?void 0:he.x,(de=$.transformOrigin)==null?void 0:de.y].join(" "),...((ae=$.hide)==null?void 0:ae.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:a.jsx(HB,{scope:n,placedSide:M,onArrowChange:C,arrowX:F,arrowY:R,shouldHideArrow:B,children:a.jsx(zt.div,{"data-side":M,"data-align":O,...m,ref:b,style:{...m.style,animation:V?void 0:"none"}})})})});rj.displayName=kx;var sj="PopperArrow",KB={top:"bottom",right:"left",bottom:"top",left:"right"},ij=S.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=qB(sj,r),o=KB[i.placedSide];return a.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:a.jsx(UB,{...s,ref:n,style:{...s.style,display:"block"}})})});ij.displayName=sj;function GB(t){return t!==null}var YB=t=>({name:"transformOrigin",options:t,fn(e){var v,y,g;const{placement:n,rects:r,middlewareData:s}=e,o=((v=s.arrow)==null?void 0:v.centerOffset)!==0,l=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[u,d]=oj(n),h={start:"0%",center:"50%",end:"100%"}[d],f=(((y=s.arrow)==null?void 0:y.x)??0)+l/2,p=(((g=s.arrow)==null?void 0:g.y)??0)+c/2;let x="",m="";return u==="bottom"?(x=o?h:`${f}px`,m=`${-c}px`):u==="top"?(x=o?h:`${f}px`,m=`${r.floating.height+c}px`):u==="right"?(x=`${-c}px`,m=o?h:`${p}px`):u==="left"&&(x=`${r.floating.width+c}px`,m=o?h:`${p}px`),{data:{x,y:m}}}});function oj(t){const[e,n="center"]=t.split("-");return[e,n]}var XB=ej,JB=nj,QB=rj,ZB=ij,e$="Portal",aj=S.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[s,i]=S.useState(!1);Ls(()=>i(!0),[]);const o=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?GA.createPortal(a.jsx(zt.div,{...r,ref:e}),o):null});aj.displayName=e$;function t$(t,e){return S.useReducer((n,r)=>e[n][r]??n,t)}var Ql=t=>{const{present:e,children:n}=t,r=n$(e),s=typeof n=="function"?n({present:r.isPresent}):S.Children.only(n),i=an(r.ref,r$(s));return typeof n=="function"||r.isPresent?S.cloneElement(s,{ref:i}):null};Ql.displayName="Presence";function n$(t){const[e,n]=S.useState(),r=S.useRef(null),s=S.useRef(t),i=S.useRef("none"),o=t?"mounted":"unmounted",[l,c]=t$(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return S.useEffect(()=>{const u=iu(r.current);i.current=l==="mounted"?u:"none"},[l]),Ls(()=>{const u=r.current,d=s.current;if(d!==t){const f=i.current,p=iu(u);t?c("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&f!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),Ls(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,h=p=>{const m=iu(r.current).includes(CSS.escape(p.animationName));if(p.target===e&&m&&(c("ANIMATION_END"),!s.current)){const v=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=v)})}},f=p=>{p.target===e&&(i.current=iu(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:S.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function iu(t){return(t==null?void 0:t.animationName)||"none"}function r$(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var W0="rovingFocusGroup.onEntryFocus",s$={bubbles:!1,cancelable:!0},Zl="RovingFocusGroup",[Rm,lj,i$]=TC(Zl),[o$,cj]=Xl(Zl,[i$]),[a$,l$]=o$(Zl),uj=S.forwardRef((t,e)=>a.jsx(Rm.Provider,{scope:t.__scopeRovingFocusGroup,children:a.jsx(Rm.Slot,{scope:t.__scopeRovingFocusGroup,children:a.jsx(c$,{...t,ref:e})})}));uj.displayName=Zl;var c$=S.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=t,f=S.useRef(null),p=an(e,f),x=OC(i),[m,v]=DC({prop:o,defaultProp:l??null,onChange:c,caller:Zl}),[y,g]=S.useState(!1),b=Gr(u),_=lj(n),C=S.useRef(!1),[N,j]=S.useState(0);return S.useEffect(()=>{const w=f.current;if(w)return w.addEventListener(W0,b),()=>w.removeEventListener(W0,b)},[b]),a.jsx(a$,{scope:n,orientation:r,dir:x,loop:s,currentTabStopId:m,onItemFocus:S.useCallback(w=>v(w),[v]),onItemShiftTab:S.useCallback(()=>g(!0),[]),onFocusableItemAdd:S.useCallback(()=>j(w=>w+1),[]),onFocusableItemRemove:S.useCallback(()=>j(w=>w-1),[]),children:a.jsx(zt.div,{tabIndex:y||N===0?-1:0,"data-orientation":r,...h,ref:p,style:{outline:"none",...t.style},onMouseDown:Re(t.onMouseDown,()=>{C.current=!0}),onFocus:Re(t.onFocus,w=>{const k=!C.current;if(w.target===w.currentTarget&&k&&!y){const E=new CustomEvent(W0,s$);if(w.currentTarget.dispatchEvent(E),!E.defaultPrevented){const P=_().filter(U=>U.focusable),A=P.find(U=>U.active),D=P.find(U=>U.id===m),W=[A,D,...P].filter(Boolean).map(U=>U.ref.current);fj(W,d)}}C.current=!1}),onBlur:Re(t.onBlur,()=>g(!1))})})}),dj="RovingFocusGroupItem",hj=S.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,children:o,...l}=t,c=Pm(),u=i||c,d=l$(dj,n),h=d.currentTabStopId===u,f=lj(n),{onFocusableItemAdd:p,onFocusableItemRemove:x,currentTabStopId:m}=d;return S.useEffect(()=>{if(r)return p(),()=>x()},[r,p,x]),a.jsx(Rm.ItemSlot,{scope:n,id:u,focusable:r,active:s,children:a.jsx(zt.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...l,ref:e,onMouseDown:Re(t.onMouseDown,v=>{r?d.onItemFocus(u):v.preventDefault()}),onFocus:Re(t.onFocus,()=>d.onItemFocus(u)),onKeyDown:Re(t.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){d.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const y=h$(v,d.orientation,d.dir);if(y!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let b=f().filter(_=>_.focusable).map(_=>_.ref.current);if(y==="last")b.reverse();else if(y==="prev"||y==="next"){y==="prev"&&b.reverse();const _=b.indexOf(v.currentTarget);b=d.loop?f$(b,_+1):b.slice(_+1)}setTimeout(()=>fj(b))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:m!=null}):o})})});hj.displayName=dj;var u$={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function d$(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function h$(t,e,n){const r=d$(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return u$[r]}function fj(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function f$(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var p$=uj,m$=hj,g$=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Xi=new WeakMap,ou=new WeakMap,au={},H0=0,pj=function(t){return t&&(t.host||pj(t.parentNode))},x$=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=pj(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},y$=function(t,e,n,r){var s=x$(e,Array.isArray(t)?t:[t]);au[n]||(au[n]=new WeakMap);var i=au[n],o=[],l=new Set,c=new Set(s),u=function(h){!h||l.has(h)||(l.add(h),u(h.parentNode))};s.forEach(u);var d=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(f){if(l.has(f))d(f);else try{var p=f.getAttribute(r),x=p!==null&&p!=="false",m=(Xi.get(f)||0)+1,v=(i.get(f)||0)+1;Xi.set(f,m),i.set(f,v),o.push(f),m===1&&x&&ou.set(f,!0),v===1&&f.setAttribute(n,"true"),x||f.setAttribute(r,"true")}catch(y){console.error("aria-hidden: cannot operate on ",f,y)}})};return d(e),l.clear(),H0++,function(){o.forEach(function(h){var f=Xi.get(h)-1,p=i.get(h)-1;Xi.set(h,f),i.set(h,p),f||(ou.has(h)||h.removeAttribute(r),ou.delete(h)),p||h.removeAttribute(n)}),H0--,H0||(Xi=new WeakMap,Xi=new WeakMap,ou=new WeakMap,au={})}},v$=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=e||g$(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),y$(r,s,n,"aria-hidden")):function(){return null}},pr=function(){return pr=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},pr.apply(this,arguments)};function mj(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function b$(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var Iu="right-scroll-bar-position",Mu="width-before-scroll-bar",w$="with-scroll-bars-hidden",_$="--removed-body-scroll-bar-size";function q0(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function k$(t,e){var n=S.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var S$=typeof window<"u"?S.useLayoutEffect:S.useEffect,_1=new WeakMap;function C$(t,e){var n=k$(e||null,function(r){return t.forEach(function(s){return q0(s,r)})});return S$(function(){var r=_1.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(l){i.has(l)||q0(l,null)}),i.forEach(function(l){s.has(l)||q0(l,o)})}_1.set(n,t)},[t]),n}function j$(t){return t}function E$(t,e){e===void 0&&(e=j$);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(i),o=n}var c=function(){var d=o;o=[],d.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),n}}}};return s}function N$(t){t===void 0&&(t={});var e=E$(null);return e.options=pr({async:!0,ssr:!1},t),e}var gj=function(t){var e=t.sideCar,n=mj(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return S.createElement(r,pr({},n))};gj.isSideCarExport=!0;function A$(t,e){return t.useMedium(e),gj}var xj=N$(),K0=function(){},Ph=S.forwardRef(function(t,e){var n=S.useRef(null),r=S.useState({onScrollCapture:K0,onWheelCapture:K0,onTouchMoveCapture:K0}),s=r[0],i=r[1],o=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,d=t.enabled,h=t.shards,f=t.sideCar,p=t.noRelative,x=t.noIsolation,m=t.inert,v=t.allowPinchZoom,y=t.as,g=y===void 0?"div":y,b=t.gapMode,_=mj(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),C=f,N=C$([n,e]),j=pr(pr({},_),s);return S.createElement(S.Fragment,null,d&&S.createElement(C,{sideCar:xj,removeScrollBar:u,shards:h,noRelative:p,noIsolation:x,inert:m,setCallbacks:i,allowPinchZoom:!!v,lockRef:n,gapMode:b}),o?S.cloneElement(S.Children.only(l),pr(pr({},j),{ref:N})):S.createElement(g,pr({},j,{className:c,ref:N}),l))});Ph.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ph.classNames={fullWidth:Mu,zeroRight:Iu};var k1,P$=function(){if(k1)return k1;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function D$(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=P$();return e&&t.setAttribute("nonce",e),t}function T$(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function O$(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var R$=function(){var t=0,e=null;return{add:function(n){t==0&&(e=D$())&&(T$(e,n),O$(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},F$=function(){var t=R$();return function(e,n){S.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},yj=function(){var t=F$(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},I$={left:0,top:0,right:0,gap:0},G0=function(t){return parseInt(t||"",10)||0},M$=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[G0(n),G0(r),G0(s)]},L$=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return I$;var e=M$(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},B$=yj(),Eo="data-scroll-locked",$$=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(w$,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(Eo,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Iu,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Mu,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Iu," .").concat(Iu,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Mu," .").concat(Mu,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Eo,`] {
    `).concat(_$,": ").concat(l,`px;
  }
`)},S1=function(){var t=parseInt(document.body.getAttribute(Eo)||"0",10);return isFinite(t)?t:0},z$=function(){S.useEffect(function(){return document.body.setAttribute(Eo,(S1()+1).toString()),function(){var t=S1()-1;t<=0?document.body.removeAttribute(Eo):document.body.setAttribute(Eo,t.toString())}},[])},U$=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;z$();var i=S.useMemo(function(){return L$(s)},[s]);return S.createElement(B$,{styles:$$(i,!e,s,n?"":"!important")})},Fm=!1;if(typeof window<"u")try{var lu=Object.defineProperty({},"passive",{get:function(){return Fm=!0,!0}});window.addEventListener("test",lu,lu),window.removeEventListener("test",lu,lu)}catch{Fm=!1}var Ji=Fm?{passive:!1}:!1,V$=function(t){return t.tagName==="TEXTAREA"},vj=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!V$(t)&&n[e]==="visible")},W$=function(t){return vj(t,"overflowY")},H$=function(t){return vj(t,"overflowX")},C1=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=bj(t,r);if(s){var i=wj(t,r),o=i[1],l=i[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},q$=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},K$=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},bj=function(t,e){return t==="v"?W$(e):H$(e)},wj=function(t,e){return t==="v"?q$(e):K$(e)},G$=function(t,e){return t==="h"&&e==="rtl"?-1:1},Y$=function(t,e,n,r,s){var i=G$(t,window.getComputedStyle(e).direction),o=i*r,l=n.target,c=e.contains(l),u=!1,d=o>0,h=0,f=0;do{if(!l)break;var p=wj(t,l),x=p[0],m=p[1],v=p[2],y=m-v-i*x;(x||y)&&bj(t,l)&&(h+=y,f+=x);var g=l.parentNode;l=g&&g.nodeType===Node.DOCUMENT_FRAGMENT_NODE?g.host:g}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(d&&(s&&Math.abs(h)<1||!s&&o>h)||!d&&(s&&Math.abs(f)<1||!s&&-o>f))&&(u=!0),u},cu=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},j1=function(t){return[t.deltaX,t.deltaY]},E1=function(t){return t&&"current"in t?t.current:t},X$=function(t,e){return t[0]===e[0]&&t[1]===e[1]},J$=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Q$=0,Qi=[];function Z$(t){var e=S.useRef([]),n=S.useRef([0,0]),r=S.useRef(),s=S.useState(Q$++)[0],i=S.useState(yj)[0],o=S.useRef(t);S.useEffect(function(){o.current=t},[t]),S.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var m=b$([t.lockRef.current],(t.shards||[]).map(E1),!0).filter(Boolean);return m.forEach(function(v){return v.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),m.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=S.useCallback(function(m,v){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!o.current.allowPinchZoom;var y=cu(m),g=n.current,b="deltaX"in m?m.deltaX:g[0]-y[0],_="deltaY"in m?m.deltaY:g[1]-y[1],C,N=m.target,j=Math.abs(b)>Math.abs(_)?"h":"v";if("touches"in m&&j==="h"&&N.type==="range")return!1;var w=C1(j,N);if(!w)return!0;if(w?C=j:(C=j==="v"?"h":"v",w=C1(j,N)),!w)return!1;if(!r.current&&"changedTouches"in m&&(b||_)&&(r.current=C),!C)return!0;var k=r.current||C;return Y$(k,v,m,k==="h"?b:_,!0)},[]),c=S.useCallback(function(m){var v=m;if(!(!Qi.length||Qi[Qi.length-1]!==i)){var y="deltaY"in v?j1(v):cu(v),g=e.current.filter(function(C){return C.name===v.type&&(C.target===v.target||v.target===C.shadowParent)&&X$(C.delta,y)})[0];if(g&&g.should){v.cancelable&&v.preventDefault();return}if(!g){var b=(o.current.shards||[]).map(E1).filter(Boolean).filter(function(C){return C.contains(v.target)}),_=b.length>0?l(v,b[0]):!o.current.noIsolation;_&&v.cancelable&&v.preventDefault()}}},[]),u=S.useCallback(function(m,v,y,g){var b={name:m,delta:v,target:y,should:g,shadowParent:e9(y)};e.current.push(b),setTimeout(function(){e.current=e.current.filter(function(_){return _!==b})},1)},[]),d=S.useCallback(function(m){n.current=cu(m),r.current=void 0},[]),h=S.useCallback(function(m){u(m.type,j1(m),m.target,l(m,t.lockRef.current))},[]),f=S.useCallback(function(m){u(m.type,cu(m),m.target,l(m,t.lockRef.current))},[]);S.useEffect(function(){return Qi.push(i),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",c,Ji),document.addEventListener("touchmove",c,Ji),document.addEventListener("touchstart",d,Ji),function(){Qi=Qi.filter(function(m){return m!==i}),document.removeEventListener("wheel",c,Ji),document.removeEventListener("touchmove",c,Ji),document.removeEventListener("touchstart",d,Ji)}},[]);var p=t.removeScrollBar,x=t.inert;return S.createElement(S.Fragment,null,x?S.createElement(i,{styles:J$(s)}):null,p?S.createElement(U$,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function e9(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const t9=A$(xj,Z$);var _j=S.forwardRef(function(t,e){return S.createElement(Ph,pr({},t,{ref:e,sideCar:t9}))});_j.classNames=Ph.classNames;const n9=_j;var Im=["Enter"," "],r9=["ArrowDown","PageUp","Home"],kj=["ArrowUp","PageDown","End"],s9=[...r9,...kj],i9={ltr:[...Im,"ArrowRight"],rtl:[...Im,"ArrowLeft"]},o9={ltr:["ArrowLeft"],rtl:["ArrowRight"]},ec="Menu",[Al,a9,l9]=TC(ec),[Li,Sj]=Xl(ec,[l9,QC,cj]),Dh=QC(),Cj=cj(),[c9,Bi]=Li(ec),[u9,tc]=Li(ec),jj=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:s,onOpenChange:i,modal:o=!0}=t,l=Dh(e),[c,u]=S.useState(null),d=S.useRef(!1),h=Gr(i),f=OC(s);return S.useEffect(()=>{const p=()=>{d.current=!0,document.addEventListener("pointerdown",x,{capture:!0,once:!0}),document.addEventListener("pointermove",x,{capture:!0,once:!0})},x=()=>d.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",x,{capture:!0}),document.removeEventListener("pointermove",x,{capture:!0})}},[]),a.jsx(XB,{...l,children:a.jsx(c9,{scope:e,open:n,onOpenChange:h,content:c,onContentChange:u,children:a.jsx(u9,{scope:e,onClose:S.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:f,modal:o,children:r})})})};jj.displayName=ec;var d9="MenuAnchor",Sx=S.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=Dh(n);return a.jsx(JB,{...s,...r,ref:e})});Sx.displayName=d9;var Cx="MenuPortal",[h9,Ej]=Li(Cx,{forceMount:void 0}),Nj=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:s}=t,i=Bi(Cx,e);return a.jsx(h9,{scope:e,forceMount:n,children:a.jsx(Ql,{present:n||i.open,children:a.jsx(aj,{asChild:!0,container:s,children:r})})})};Nj.displayName=Cx;var Ln="MenuContent",[f9,jx]=Li(Ln),Aj=S.forwardRef((t,e)=>{const n=Ej(Ln,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,i=Bi(Ln,t.__scopeMenu),o=tc(Ln,t.__scopeMenu);return a.jsx(Al.Provider,{scope:t.__scopeMenu,children:a.jsx(Ql,{present:r||i.open,children:a.jsx(Al.Slot,{scope:t.__scopeMenu,children:o.modal?a.jsx(p9,{...s,ref:e}):a.jsx(m9,{...s,ref:e})})})})}),p9=S.forwardRef((t,e)=>{const n=Bi(Ln,t.__scopeMenu),r=S.useRef(null),s=an(e,r);return S.useEffect(()=>{const i=r.current;if(i)return v$(i)},[]),a.jsx(Ex,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Re(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),m9=S.forwardRef((t,e)=>{const n=Bi(Ln,t.__scopeMenu);return a.jsx(Ex,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),g9=vl("MenuContent.ScrollLock"),Ex=S.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:f,onDismiss:p,disableOutsideScroll:x,...m}=t,v=Bi(Ln,n),y=tc(Ln,n),g=Dh(n),b=Cj(n),_=a9(n),[C,N]=S.useState(null),j=S.useRef(null),w=an(e,j,v.onContentChange),k=S.useRef(0),E=S.useRef(""),P=S.useRef(0),A=S.useRef(null),D=S.useRef("right"),L=S.useRef(0),W=x?n9:S.Fragment,U=x?{as:g9,allowPinchZoom:!0}:void 0,V=M=>{var Z,te;const O=E.current+M,T=_().filter(le=>!le.disabled),F=document.activeElement,R=(Z=T.find(le=>le.ref.current===F))==null?void 0:Z.textValue,B=T.map(le=>le.textValue),J=N9(B,O,R),G=(te=T.find(le=>le.textValue===J))==null?void 0:te.ref.current;(function le(he){E.current=he,window.clearTimeout(k.current),he!==""&&(k.current=window.setTimeout(()=>le(""),1e3))})(O),G&&setTimeout(()=>G.focus())};S.useEffect(()=>()=>window.clearTimeout(k.current),[]),wL();const $=S.useCallback(M=>{var T,F;return D.current===((T=A.current)==null?void 0:T.side)&&P9(M,(F=A.current)==null?void 0:F.area)},[]);return a.jsx(f9,{scope:n,searchRef:E,onItemEnter:S.useCallback(M=>{$(M)&&M.preventDefault()},[$]),onItemLeave:S.useCallback(M=>{var O;$(M)||((O=j.current)==null||O.focus(),N(null))},[$]),onTriggerLeave:S.useCallback(M=>{$(M)&&M.preventDefault()},[$]),pointerGraceTimerRef:P,onPointerGraceIntentChange:S.useCallback(M=>{A.current=M},[]),children:a.jsx(W,{...U,children:a.jsx(MC,{asChild:!0,trapped:s,onMountAutoFocus:Re(i,M=>{var O;M.preventDefault(),(O=j.current)==null||O.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:a.jsx(FC,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:f,onDismiss:p,children:a.jsx(p$,{asChild:!0,...b,dir:y.dir,orientation:"vertical",loop:r,currentTabStopId:C,onCurrentTabStopIdChange:N,onEntryFocus:Re(c,M=>{y.isUsingKeyboardRef.current||M.preventDefault()}),preventScrollOnEntryFocus:!0,children:a.jsx(QB,{role:"menu","aria-orientation":"vertical","data-state":Hj(v.open),"data-radix-menu-content":"",dir:y.dir,...g,...m,ref:w,style:{outline:"none",...m.style},onKeyDown:Re(m.onKeyDown,M=>{const T=M.target.closest("[data-radix-menu-content]")===M.currentTarget,F=M.ctrlKey||M.altKey||M.metaKey,R=M.key.length===1;T&&(M.key==="Tab"&&M.preventDefault(),!F&&R&&V(M.key));const B=j.current;if(M.target!==B||!s9.includes(M.key))return;M.preventDefault();const G=_().filter(Z=>!Z.disabled).map(Z=>Z.ref.current);kj.includes(M.key)&&G.reverse(),j9(G)}),onBlur:Re(t.onBlur,M=>{M.currentTarget.contains(M.target)||(window.clearTimeout(k.current),E.current="")}),onPointerMove:Re(t.onPointerMove,Pl(M=>{const O=M.target,T=L.current!==M.clientX;if(M.currentTarget.contains(O)&&T){const F=M.clientX>L.current?"right":"left";D.current=F,L.current=M.clientX}}))})})})})})})});Aj.displayName=Ln;var x9="MenuGroup",Nx=S.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return a.jsx(zt.div,{role:"group",...r,ref:e})});Nx.displayName=x9;var y9="MenuLabel",Pj=S.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return a.jsx(zt.div,{...r,ref:e})});Pj.displayName=y9;var Pd="MenuItem",N1="menu.itemSelect",Th=S.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...s}=t,i=S.useRef(null),o=tc(Pd,t.__scopeMenu),l=jx(Pd,t.__scopeMenu),c=an(e,i),u=S.useRef(!1),d=()=>{const h=i.current;if(!n&&h){const f=new CustomEvent(N1,{bubbles:!0,cancelable:!0});h.addEventListener(N1,p=>r==null?void 0:r(p),{once:!0}),V2(h,f),f.defaultPrevented?u.current=!1:o.onClose()}};return a.jsx(Dj,{...s,ref:c,disabled:n,onClick:Re(t.onClick,d),onPointerDown:h=>{var f;(f=t.onPointerDown)==null||f.call(t,h),u.current=!0},onPointerUp:Re(t.onPointerUp,h=>{var f;u.current||(f=h.currentTarget)==null||f.click()}),onKeyDown:Re(t.onKeyDown,h=>{const f=l.searchRef.current!=="";n||f&&h.key===" "||Im.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});Th.displayName=Pd;var Dj=S.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...i}=t,o=jx(Pd,n),l=Cj(n),c=S.useRef(null),u=an(e,c),[d,h]=S.useState(!1),[f,p]=S.useState("");return S.useEffect(()=>{const x=c.current;x&&p((x.textContent??"").trim())},[i.children]),a.jsx(Al.ItemSlot,{scope:n,disabled:r,textValue:s??f,children:a.jsx(m$,{asChild:!0,...l,focusable:!r,children:a.jsx(zt.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:u,onPointerMove:Re(t.onPointerMove,Pl(x=>{r?o.onItemLeave(x):(o.onItemEnter(x),x.defaultPrevented||x.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Re(t.onPointerLeave,Pl(x=>o.onItemLeave(x))),onFocus:Re(t.onFocus,()=>h(!0)),onBlur:Re(t.onBlur,()=>h(!1))})})})}),v9="MenuCheckboxItem",Tj=S.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...s}=t;return a.jsx(Mj,{scope:t.__scopeMenu,checked:n,children:a.jsx(Th,{role:"menuitemcheckbox","aria-checked":Dd(n)?"mixed":n,...s,ref:e,"data-state":Px(n),onSelect:Re(s.onSelect,()=>r==null?void 0:r(Dd(n)?!0:!n),{checkForDefaultPrevented:!1})})})});Tj.displayName=v9;var Oj="MenuRadioGroup",[b9,w9]=Li(Oj,{value:void 0,onValueChange:()=>{}}),Rj=S.forwardRef((t,e)=>{const{value:n,onValueChange:r,...s}=t,i=Gr(r);return a.jsx(b9,{scope:t.__scopeMenu,value:n,onValueChange:i,children:a.jsx(Nx,{...s,ref:e})})});Rj.displayName=Oj;var Fj="MenuRadioItem",Ij=S.forwardRef((t,e)=>{const{value:n,...r}=t,s=w9(Fj,t.__scopeMenu),i=n===s.value;return a.jsx(Mj,{scope:t.__scopeMenu,checked:i,children:a.jsx(Th,{role:"menuitemradio","aria-checked":i,...r,ref:e,"data-state":Px(i),onSelect:Re(r.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,n)},{checkForDefaultPrevented:!1})})})});Ij.displayName=Fj;var Ax="MenuItemIndicator",[Mj,_9]=Li(Ax,{checked:!1}),Lj=S.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...s}=t,i=_9(Ax,n);return a.jsx(Ql,{present:r||Dd(i.checked)||i.checked===!0,children:a.jsx(zt.span,{...s,ref:e,"data-state":Px(i.checked)})})});Lj.displayName=Ax;var k9="MenuSeparator",Bj=S.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return a.jsx(zt.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});Bj.displayName=k9;var S9="MenuArrow",$j=S.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=Dh(n);return a.jsx(ZB,{...s,...r,ref:e})});$j.displayName=S9;var C9="MenuSub",[W7,zj]=Li(C9),Da="MenuSubTrigger",Uj=S.forwardRef((t,e)=>{const n=Bi(Da,t.__scopeMenu),r=tc(Da,t.__scopeMenu),s=zj(Da,t.__scopeMenu),i=jx(Da,t.__scopeMenu),o=S.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,u={__scopeMenu:t.__scopeMenu},d=S.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return S.useEffect(()=>d,[d]),S.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),a.jsx(Sx,{asChild:!0,...u,children:a.jsx(Dj,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":Hj(n.open),...t,ref:ih(e,s.onTriggerChange),onClick:h=>{var f;(f=t.onClick)==null||f.call(t,h),!(t.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Re(t.onPointerMove,Pl(h=>{i.onItemEnter(h),!h.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:Re(t.onPointerLeave,Pl(h=>{var p,x;d();const f=(p=n.content)==null?void 0:p.getBoundingClientRect();if(f){const m=(x=n.content)==null?void 0:x.dataset.side,v=m==="right",y=v?-5:5,g=f[v?"left":"right"],b=f[v?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+y,y:h.clientY},{x:g,y:f.top},{x:b,y:f.top},{x:b,y:f.bottom},{x:g,y:f.bottom}],side:m}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Re(t.onKeyDown,h=>{var p;const f=i.searchRef.current!=="";t.disabled||f&&h.key===" "||i9[r.dir].includes(h.key)&&(n.onOpenChange(!0),(p=n.content)==null||p.focus(),h.preventDefault())})})})});Uj.displayName=Da;var Vj="MenuSubContent",Wj=S.forwardRef((t,e)=>{const n=Ej(Ln,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,i=Bi(Ln,t.__scopeMenu),o=tc(Ln,t.__scopeMenu),l=zj(Vj,t.__scopeMenu),c=S.useRef(null),u=an(e,c);return a.jsx(Al.Provider,{scope:t.__scopeMenu,children:a.jsx(Ql,{present:r||i.open,children:a.jsx(Al.Slot,{scope:t.__scopeMenu,children:a.jsx(Ex,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;o.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:Re(t.onFocusOutside,d=>{d.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Re(t.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:Re(t.onKeyDown,d=>{var p;const h=d.currentTarget.contains(d.target),f=o9[o.dir].includes(d.key);h&&f&&(i.onOpenChange(!1),(p=l.trigger)==null||p.focus(),d.preventDefault())})})})})})});Wj.displayName=Vj;function Hj(t){return t?"open":"closed"}function Dd(t){return t==="indeterminate"}function Px(t){return Dd(t)?"indeterminate":t?"checked":"unchecked"}function j9(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function E9(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function N9(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=E9(t,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function A9(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const l=e[i],c=e[o],u=l.x,d=l.y,h=c.x,f=c.y;d>r!=f>r&&n<(h-u)*(r-d)/(f-d)+u&&(s=!s)}return s}function P9(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return A9(n,e)}function Pl(t){return e=>e.pointerType==="mouse"?t(e):void 0}var D9=jj,T9=Sx,O9=Nj,R9=Aj,F9=Nx,I9=Pj,M9=Th,L9=Tj,B9=Rj,$9=Ij,z9=Lj,U9=Bj,V9=$j,W9=Uj,H9=Wj,Oh="DropdownMenu",[q9,H7]=Xl(Oh,[Sj]),Xt=Sj(),[K9,qj]=q9(Oh),Kj=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:s,defaultOpen:i,onOpenChange:o,modal:l=!0}=t,c=Xt(e),u=S.useRef(null),[d,h]=DC({prop:s,defaultProp:i??!1,onChange:o,caller:Oh});return a.jsx(K9,{scope:e,triggerId:Pm(),triggerRef:u,contentId:Pm(),open:d,onOpenChange:h,onOpenToggle:S.useCallback(()=>h(f=>!f),[h]),modal:l,children:a.jsx(D9,{...c,open:d,onOpenChange:h,dir:r,modal:l,children:n})})};Kj.displayName=Oh;var Gj="DropdownMenuTrigger",Yj=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=t,i=qj(Gj,n),o=Xt(n);return a.jsx(T9,{asChild:!0,...o,children:a.jsx(zt.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:ih(e,i.triggerRef),onPointerDown:Re(t.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:Re(t.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});Yj.displayName=Gj;var G9="DropdownMenuPortal",Xj=t=>{const{__scopeDropdownMenu:e,...n}=t,r=Xt(e);return a.jsx(O9,{...r,...n})};Xj.displayName=G9;var Jj="DropdownMenuContent",Qj=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=qj(Jj,n),i=Xt(n),o=S.useRef(!1);return a.jsx(R9,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...r,ref:e,onCloseAutoFocus:Re(t.onCloseAutoFocus,l=>{var c;o.current||(c=s.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:Re(t.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!s.modal||d)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Qj.displayName=Jj;var Y9="DropdownMenuGroup",X9=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Xt(n);return a.jsx(F9,{...s,...r,ref:e})});X9.displayName=Y9;var J9="DropdownMenuLabel",Zj=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Xt(n);return a.jsx(I9,{...s,...r,ref:e})});Zj.displayName=J9;var Q9="DropdownMenuItem",eE=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Xt(n);return a.jsx(M9,{...s,...r,ref:e})});eE.displayName=Q9;var Z9="DropdownMenuCheckboxItem",tE=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Xt(n);return a.jsx(L9,{...s,...r,ref:e})});tE.displayName=Z9;var e7="DropdownMenuRadioGroup",t7=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Xt(n);return a.jsx(B9,{...s,...r,ref:e})});t7.displayName=e7;var n7="DropdownMenuRadioItem",nE=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Xt(n);return a.jsx($9,{...s,...r,ref:e})});nE.displayName=n7;var r7="DropdownMenuItemIndicator",rE=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Xt(n);return a.jsx(z9,{...s,...r,ref:e})});rE.displayName=r7;var s7="DropdownMenuSeparator",sE=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Xt(n);return a.jsx(U9,{...s,...r,ref:e})});sE.displayName=s7;var i7="DropdownMenuArrow",o7=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Xt(n);return a.jsx(V9,{...s,...r,ref:e})});o7.displayName=i7;var a7="DropdownMenuSubTrigger",iE=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Xt(n);return a.jsx(W9,{...s,...r,ref:e})});iE.displayName=a7;var l7="DropdownMenuSubContent",oE=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Xt(n);return a.jsx(H9,{...s,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});oE.displayName=l7;var c7=Kj,u7=Yj,d7=Xj,aE=Qj,lE=Zj,cE=eE,uE=tE,dE=nE,hE=rE,fE=sE,pE=iE,mE=oE;const gE=c7,xE=u7,h7=S.forwardRef(({className:t,inset:e,children:n,...r},s)=>a.jsxs(pE,{ref:s,className:Et("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...r,children:[n,a.jsx(nh,{className:"ml-auto h-4 w-4"})]}));h7.displayName=pE.displayName;const f7=S.forwardRef(({className:t,...e},n)=>a.jsx(mE,{ref:n,className:Et("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));f7.displayName=mE.displayName;const Dx=S.forwardRef(({className:t,sideOffset:e=4,...n},r)=>a.jsx(d7,{children:a.jsx(aE,{ref:r,sideOffset:e,className:Et("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));Dx.displayName=aE.displayName;const Fr=S.forwardRef(({className:t,inset:e,...n},r)=>a.jsx(cE,{ref:r,className:Et("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));Fr.displayName=cE.displayName;const p7=S.forwardRef(({className:t,children:e,checked:n,...r},s)=>a.jsxs(uE,{ref:s,className:Et("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(hE,{children:a.jsx(ys,{className:"h-4 w-4"})})}),e]}));p7.displayName=uE.displayName;const m7=S.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(dE,{ref:r,className:Et("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(hE,{children:a.jsx(VD,{className:"h-2 w-2 fill-current"})})}),e]}));m7.displayName=dE.displayName;const g7=S.forwardRef(({className:t,inset:e,...n},r)=>a.jsx(lE,{ref:r,className:Et("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));g7.displayName=lE.displayName;const x7=S.forwardRef(({className:t,...e},n)=>a.jsx(fE,{ref:n,className:Et("-mx-1 my-1 h-px bg-muted",t),...e}));x7.displayName=fE.displayName;function y7({onFileSelect:t,showUpload:e=!0,showPreview:n=!0,showDelete:r=!0,acceptedTypes:s=[".csv",".json",".txt"],maxFileSize:i=10}){const[o,l]=S.useState([]),[c,u]=S.useState([]),[d,h]=S.useState(""),[f,p]=S.useState(!1),[x,m]=S.useState(null),[v,y]=S.useState(null),[g,b]=S.useState({totalFiles:0,totalSize:0,encryptedFiles:0,oldestFile:0,newestFile:0}),_=S.useRef(null);S.useEffect(()=>{C(),N()},[]),S.useEffect(()=>{if(!d.trim())u(o);else{const D=o.filter(L=>{var W,U;return L.name.toLowerCase().includes(d.toLowerCase())||L.originalName.toLowerCase().includes(d.toLowerCase())||((W=L.tags)==null?void 0:W.some(V=>V.toLowerCase().includes(d.toLowerCase())))||((U=L.description)==null?void 0:U.toLowerCase().includes(d.toLowerCase()))});u(D)}},[o,d]);const C=async()=>{try{const D=await Yi.listFiles();l(D)}catch(D){console.error("Failed to load files:",D)}},N=async()=>{try{const D=await Yi.getStorageStats();b(D)}catch(D){console.error("Failed to load stats:",D)}},j=async D=>{var W;const L=D.target.files;if(!(!L||L.length===0)){p(!0);try{for(let U=0;U<L.length;U++){const V=L[U],$="."+((W=V.name.split(".").pop())==null?void 0:W.toLowerCase());if(!s.includes($)){alert(`File type ${$} is not supported. Accepted types: ${s.join(", ")}`);continue}if(V.size>i*1024*1024){alert(`File ${V.name} is too large. Maximum size: ${i}MB`);continue}await Yi.storeFile(V,{encrypt:!0,tags:["uploaded"],description:`Uploaded on ${new Date().toLocaleDateString()}`})}await C(),await N(),_.current&&(_.current.value="")}catch(U){console.error("Failed to upload files:",U),alert("Failed to upload files. Please try again.")}finally{p(!1)}}},w=async(D,L)=>{if(confirm(`Are you sure you want to delete "${L}"? This action cannot be undone.`))try{await Yi.deleteFile(D)?(await C(),await N()):alert("Failed to delete file. Please try again.")}catch(W){console.error("Failed to delete file:",W),alert("Failed to delete file. Please try again.")}},k=async D=>{try{await Yi.exportFile(D)}catch(L){console.error("Failed to download file:",L),alert("Failed to download file. Please try again.")}},E=async D=>{try{const L=await Yi.previewFile(D.id);L?(m(L),y(D)):alert("Preview not available for this file type.")}catch(L){console.error("Failed to preview file:",L),alert("Failed to preview file. Please try again.")}},P=D=>{if(D===0)return"0 Bytes";const L=1024,W=["Bytes","KB","MB","GB"],U=Math.floor(Math.log(D)/Math.log(L));return parseFloat((D/Math.pow(L,U)).toFixed(2))+" "+W[U]},A=D=>new Date(D).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:"File Manager"}),a.jsx("p",{className:"text-gray-600",children:"Securely store and manage your files"})]}),e&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{ref:_,type:"file",multiple:!0,accept:s.join(","),onChange:j,className:"hidden"}),a.jsxs(je,{onClick:()=>{var D;return(D=_.current)==null?void 0:D.click()},disabled:f,className:"flex items-center space-x-2",children:[a.jsx(ji,{className:"h-4 w-4"}),a.jsx("span",{children:f?"Uploading...":"Upload Files"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx(Ue,{children:a.jsx(Ve,{className:"p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Mt,{className:"h-5 w-5 text-blue-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:"Total Files"}),a.jsx("p",{className:"text-2xl font-bold",children:g.totalFiles})]})]})})}),a.jsx(Ue,{children:a.jsx(Ve,{className:"p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(HD,{className:"h-5 w-5 text-green-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:"Total Size"}),a.jsx("p",{className:"text-2xl font-bold",children:P(g.totalSize)})]})]})})}),a.jsx(Ue,{children:a.jsx(Ve,{className:"p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(dd,{className:"h-5 w-5 text-purple-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:"Encrypted"}),a.jsx("p",{className:"text-2xl font-bold",children:g.encryptedFiles})]})]})})}),a.jsx(Ue,{children:a.jsx(Ve,{className:"p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Fs,{className:"h-5 w-5 text-orange-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:"Latest Upload"}),a.jsx("p",{className:"text-sm font-bold",children:g.newestFile?A(g.newestFile):"None"})]})]})})})]}),a.jsxs("div",{className:"relative",children:[a.jsx(sh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx(oh,{placeholder:"Search files by name, tags, or description...",value:d,onChange:D=>h(D.target.value),className:"pl-10"})]}),a.jsx("div",{className:"space-y-4",children:c.length===0?a.jsx(Ue,{children:a.jsxs(Ve,{className:"p-8 text-center",children:[a.jsx(Mt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No files found"}),a.jsx("p",{className:"text-gray-600 mb-4",children:d?"No files match your search criteria.":"Upload your first file to get started."}),e&&!d&&a.jsxs(je,{onClick:()=>{var D;return(D=_.current)==null?void 0:D.click()},children:[a.jsx(ji,{className:"h-4 w-4 mr-2"}),"Upload Files"]})]})}):c.map(D=>a.jsx(Ue,{className:"hover:shadow-md transition-shadow",children:a.jsx(Ve,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(Mt,{className:"h-8 w-8 text-blue-500"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:D.name}),D.encrypted&&a.jsxs(Xn,{variant:"secondary",className:"text-xs",children:[a.jsx(dd,{className:"h-3 w-3 mr-1"}),"Encrypted"]})]}),a.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[a.jsx("span",{children:P(D.size)}),a.jsx("span",{children:A(D.uploadedAt)}),D.tags&&D.tags.length>0&&a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(sT,{className:"h-3 w-3"}),a.jsx("span",{children:D.tags.join(", ")})]})]}),D.description&&a.jsx("p",{className:"text-xs text-gray-600 mt-1 truncate",children:D.description})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[t&&a.jsx(je,{variant:"outline",size:"sm",onClick:()=>t(D),children:"Select"}),a.jsxs(gE,{children:[a.jsx(xE,{asChild:!0,children:a.jsx(je,{variant:"ghost",size:"sm",children:a.jsx(R2,{className:"h-4 w-4"})})}),a.jsxs(Dx,{align:"end",children:[n&&a.jsxs(Fr,{onClick:()=>E(D),children:[a.jsx(qr,{className:"h-4 w-4 mr-2"}),"Preview"]}),a.jsxs(Fr,{onClick:()=>k(D.id),children:[a.jsx(Ko,{className:"h-4 w-4 mr-2"}),"Download"]}),r&&a.jsxs(Fr,{onClick:()=>w(D.id,D.name),className:"text-red-600",children:[a.jsx(Go,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})]})})},D.id))}),x&&v&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs(Ue,{className:"w-full max-w-4xl max-h-[80vh] m-4",children:[a.jsx(xn,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs(yn,{className:"flex items-center space-x-2",children:[a.jsx(qr,{className:"h-5 w-5"}),a.jsxs("span",{children:["Preview: ",v.name]})]}),a.jsxs(Zn,{children:[P(v.size)," • ",A(v.uploadedAt)]})]}),a.jsx(je,{variant:"outline",onClick:()=>{m(null),y(null)},children:"Close"})]})}),a.jsx(Ve,{children:a.jsx("div",{className:"bg-gray-50 rounded-lg p-4 max-h-96 overflow-auto",children:a.jsx("pre",{className:"text-sm whitespace-pre-wrap font-mono",children:x})})})]})})]})}function v7(){const t=e=>{console.log("Selected file:",e)};return a.jsx("div",{className:"container mx-auto px-4 py-8",children:a.jsxs("div",{className:"max-w-6xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Secure File Manager"}),a.jsx("p",{className:"text-gray-600",children:"Upload, store, and manage your files securely with encryption and preview capabilities."})]}),a.jsx(y7,{onFileSelect:t,showUpload:!0,showPreview:!0,showDelete:!0,acceptedTypes:[".csv",".json",".txt",".xlsx",".pdf"],maxFileSize:50})]})})}function b7({onFileSelect:t,showUpload:e=!0,showPreview:n=!0,showDelete:r=!0,showEdit:s=!0,showPrint:i=!0,maxFileSize:o=50}){const[l,c]=S.useState([]),[u,d]=S.useState([]),[h,f]=S.useState(""),[p,x]=S.useState(!1),[m,v]=S.useState(!0),[y,g]=S.useState(null),[b,_]=S.useState(null),[C,N]=S.useState({totalFiles:0,totalRecords:0,activeFiles:0,oldestFile:0,newestFile:0}),j=S.useRef(null);S.useEffect(()=>{w(),k()},[]),S.useEffect(()=>{if(!h.trim())d(l);else{const O=l.filter(T=>{var F;return T.file_name.toLowerCase().includes(h.toLowerCase())||T.upload_status.toLowerCase().includes(h.toLowerCase())||((F=T.properties)==null?void 0:F.name.toLowerCase().includes(h.toLowerCase()))});d(O)}},[l,h]);const w=async()=>{try{v(!0);const{data:O,error:T}=await Gn.from("csv_uploads").select(`
          *,
          properties (
            name
          )
        `).order("uploaded_at",{ascending:!1});if(T){console.error("Failed to load CSV files from Supabase:",T);return}c(O||[])}catch(O){console.error("Failed to load CSV files:",O)}finally{v(!1)}},k=async()=>{try{const O=l.reduce((F,R)=>F+R.records_processed,0),T=l.filter(F=>F.upload_status==="completed").length;N({totalFiles:l.length,totalRecords:O,activeFiles:T,oldestFile:l.length>0?Math.min(...l.map(F=>new Date(F.uploaded_at).getTime())):0,newestFile:l.length>0?Math.max(...l.map(F=>new Date(F.uploaded_at).getTime())):0})}catch(O){console.error("Failed to load stats:",O)}},E=async O=>{const T=O.target.files;if(!(!T||T.length===0)){x(!0);try{for(let F=0;F<T.length;F++){const R=T[F];if(!R.name.toLowerCase().endsWith(".csv")){alert(`File ${R.name} is not a CSV file. Only CSV files are supported.`);continue}if(R.size>o*1024*1024){alert(`File ${R.name} is too large. Maximum size: ${o}MB`);continue}const B=`${Date.now()}-${R.name}`,{error:J}=await Gn.storage.from("csv-files").upload(B,R);if(J){console.error("Failed to upload file to Supabase Storage:",J),alert(`Failed to upload ${R.name}. Please try again.`);continue}const{error:G}=await Gn.from("csv_uploads").insert({file_name:R.name,file_size:R.size,upload_status:"uploaded",property_id:null});if(G){console.error("Failed to create CSV upload record:",G),alert(`Failed to create record for ${R.name}. Please try again.`);continue}}await w(),await k(),j.current&&(j.current.value="")}catch(F){console.error("Failed to upload files:",F),alert("Failed to upload files. Please try again.")}finally{x(!1)}}},P=async(O,T)=>{if(confirm(`Are you sure you want to delete "${T}"? This action cannot be undone.`))try{const{error:F}=await Gn.from("csv_uploads").delete().eq("id",O);if(F){console.error("Failed to delete CSV upload record:",F),alert("Failed to delete file. Please try again.");return}await w(),await k()}catch(F){console.error("Failed to delete file:",F),alert("Failed to delete file. Please try again.")}},A=async O=>{try{const T=`${Date.now()}-${O.file_name}`,{data:F,error:R}=await Gn.storage.from("csv-files").download(T);if(R){console.error("Failed to download file from Supabase Storage:",R),alert("Failed to download file. Please try again.");return}const B=URL.createObjectURL(F),J=document.createElement("a");J.href=B,J.download=O.file_name,document.body.appendChild(J),J.click(),document.body.removeChild(J),URL.revokeObjectURL(B)}catch(T){console.error("Failed to download file:",T),alert("Failed to download file. Please try again.")}},D=async O=>{try{const T=`${Date.now()}-${O.file_name}`,{data:F,error:R}=await Gn.storage.from("csv-files").download(T);if(R){console.error("Failed to preview file from Supabase Storage:",R),alert("Preview not available for this file.");return}const B=await F.text();g(B),_(O)}catch(T){console.error("Failed to preview file:",T),alert("Failed to preview file. Please try again.")}},L=O=>{t?t(O):window.dispatchEvent(new CustomEvent("navigateToPage",{detail:{page:"csvs",fileId:O.id}}))},W=async O=>{var T;try{const F=`${Date.now()}-${O.file_name}`,{data:R,error:B}=await Gn.storage.from("csv-files").download(F);if(B){console.error("Failed to print file from Supabase Storage:",B),alert("Print preview not available for this file.");return}const J=await R.text(),G=window.open("","_blank");G&&(G.document.write(`
          <html>
            <head>
              <title>Print: ${O.file_name}</title>
              <style>
                body { font-family: Arial, sans-serif; margin: 20px; }
                h1 { color: #1E3A8A; }
                pre { white-space: pre-wrap; font-size: 12px; }
                .header { margin-bottom: 20px; }
                .info { margin-bottom: 20px; color: #666; }
              </style>
            </head>
            <body>
              <div class="header">
                <h1>${O.file_name}</h1>
                <div class="info">
                  <p>File Size: ${U(O.file_size)}</p>
                  <p>Records Processed: ${O.records_processed}</p>
                  <p>Uploaded: ${V(new Date(O.uploaded_at).getTime())}</p>
                  <p>Status: ${O.upload_status}</p>
                  ${((T=O.properties)==null?void 0:T.name)&&`<p>Property: ${O.properties.name}</p>`}
                </div>
              </div>
              <pre>${J}</pre>
            </body>
          </html>
        `),G.document.close(),G.print())}catch(F){console.error("Failed to print file:",F),alert("Failed to print file. Please try again.")}},U=O=>{if(O===0)return"0 Bytes";const T=1024,F=["Bytes","KB","MB","GB"],R=Math.floor(Math.log(O)/Math.log(T));return parseFloat((O/Math.pow(T,R)).toFixed(2))+" "+F[R]},V=O=>new Date(O).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),$=O=>{switch(O.upload_status){case"completed":return a.jsx(Ci,{className:"h-4 w-4 text-green-500"});case"processing":return a.jsx(Ps,{className:"h-4 w-4 text-blue-500 animate-spin"});case"failed":return a.jsx(iT,{className:"h-4 w-4 text-red-500"});default:return a.jsx(Rs,{className:"h-4 w-4 text-yellow-500"})}},M=O=>{switch(O.upload_status){case"completed":return"Completed";case"processing":return"Processing";case"failed":return"Failed";case"uploaded":return"Uploaded";default:return"Unknown"}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:"CSV File Manager"}),a.jsx("p",{className:"text-gray-600",children:"Manage your CSV files from Supabase backend with bucket assignments and categorization"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs(je,{onClick:w,disabled:m,variant:"outline",className:"flex items-center space-x-2",children:[a.jsx(Ps,{className:`h-4 w-4 ${m?"animate-spin":""}`}),a.jsx("span",{children:"Refresh"})]}),e&&a.jsxs(a.Fragment,{children:[a.jsx("input",{ref:j,type:"file",multiple:!0,accept:".csv",onChange:E,className:"hidden"}),a.jsxs(je,{onClick:()=>{var O;return(O=j.current)==null?void 0:O.click()},disabled:p,className:"flex items-center space-x-2",children:[a.jsx(ji,{className:"h-4 w-4"}),a.jsx("span",{children:p?"Uploading...":"Upload CSV Files"})]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx(Ue,{children:a.jsx(Ve,{className:"p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Mt,{className:"h-5 w-5 text-blue-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:"Total Files"}),a.jsx("p",{className:"text-2xl font-bold",children:C.totalFiles})]})]})})}),a.jsx(Ue,{children:a.jsx(Ve,{className:"p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(T2,{className:"h-5 w-5 text-green-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:"Total Records"}),a.jsx("p",{className:"text-2xl font-bold",children:C.totalRecords.toLocaleString()})]})]})})}),a.jsx(Ue,{children:a.jsx(Ve,{className:"p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ci,{className:"h-5 w-5 text-purple-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:"Active Files"}),a.jsx("p",{className:"text-2xl font-bold",children:C.activeFiles})]})]})})}),a.jsx(Ue,{children:a.jsx(Ve,{className:"p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Fs,{className:"h-5 w-5 text-orange-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:"Latest Upload"}),a.jsx("p",{className:"text-sm font-bold",children:C.newestFile?V(C.newestFile):"None"})]})]})})})]}),a.jsxs("div",{className:"relative",children:[a.jsx(sh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx(oh,{placeholder:"Search CSV files by name, type, or account...",value:h,onChange:O=>f(O.target.value),className:"pl-10"})]}),a.jsx("div",{className:"space-y-4",children:m?a.jsx(Ue,{children:a.jsxs(Ve,{className:"p-8 text-center",children:[a.jsx(Ps,{className:"h-12 w-12 text-gray-400 mx-auto mb-4 animate-spin"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Loading CSV files..."}),a.jsx("p",{className:"text-gray-600",children:"Fetching files from Supabase backend"})]})}):u.length===0?a.jsx(Ue,{children:a.jsxs(Ve,{className:"p-8 text-center",children:[a.jsx(Mt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No CSV files found"}),a.jsx("p",{className:"text-gray-600 mb-4",children:h?"No CSV files match your search criteria.":"Upload your first CSV file to get started."}),e&&!h&&a.jsxs(je,{onClick:()=>{var O;return(O=j.current)==null?void 0:O.click()},children:[a.jsx(ji,{className:"h-4 w-4 mr-2"}),"Upload CSV Files"]})]})}):u.map(O=>{var T;return a.jsx(Ue,{className:"hover:shadow-md transition-shadow",children:a.jsx(Ve,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(Mt,{className:"h-8 w-8 text-blue-500"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:O.file_name}),$(O),a.jsx(Xn,{variant:"secondary",className:"text-xs",children:M(O)})]}),a.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[a.jsxs("span",{children:[O.records_processed," records"]}),a.jsx("span",{children:V(new Date(O.uploaded_at).getTime())}),a.jsx("span",{children:U(O.file_size)}),((T=O.properties)==null?void 0:T.name)&&a.jsxs("span",{children:["Property: ",O.properties.name]})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[t&&a.jsx(je,{variant:"outline",size:"sm",onClick:()=>t(O),children:"Select"}),a.jsxs(gE,{children:[a.jsx(xE,{asChild:!0,children:a.jsx(je,{variant:"ghost",size:"sm",children:a.jsx(R2,{className:"h-4 w-4"})})}),a.jsxs(Dx,{align:"end",children:[n&&a.jsxs(Fr,{onClick:()=>D(O),children:[a.jsx(qr,{className:"h-4 w-4 mr-2"}),"Preview"]}),s&&a.jsxs(Fr,{onClick:()=>L(O),children:[a.jsx(yl,{className:"h-4 w-4 mr-2"}),"Edit Buckets"]}),a.jsxs(Fr,{onClick:()=>A(O),children:[a.jsx(Ko,{className:"h-4 w-4 mr-2"}),"Download"]}),i&&a.jsxs(Fr,{onClick:()=>W(O),children:[a.jsx(F2,{className:"h-4 w-4 mr-2"}),"Print"]}),r&&a.jsxs(Fr,{onClick:()=>P(O.id,O.file_name),className:"text-red-600",children:[a.jsx(Go,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})]})})},O.id)})}),y&&b&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs(Ue,{className:"w-full max-w-4xl max-h-[80vh] m-4",children:[a.jsx(xn,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs(yn,{className:"flex items-center space-x-2",children:[a.jsx(qr,{className:"h-5 w-5"}),a.jsxs("span",{children:["Preview: ",b.file_name]})]}),a.jsxs(Zn,{children:[b.records_processed," records • ",V(new Date(b.uploaded_at).getTime())]})]}),a.jsx(je,{variant:"outline",onClick:()=>{g(null),_(null)},children:"Close"})]})}),a.jsx(Ve,{children:a.jsx("div",{className:"bg-gray-50 rounded-lg p-4 max-h-96 overflow-auto",children:a.jsx("pre",{className:"text-sm whitespace-pre-wrap font-mono",children:y})})})]})})]})}function w7(){const t=e=>{console.log("Selected CSV file:",e),window.dispatchEvent(new CustomEvent("navigateToPage",{detail:{page:"csvs",fileId:e.id}}))};return a.jsx("div",{className:"container mx-auto px-4 py-8",children:a.jsxs("div",{className:"max-w-6xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"CSV File Manager"}),a.jsx("p",{className:"text-gray-600",children:"Upload, manage, and edit your CSV files from Supabase backend with intelligent bucket categorization and memory."})]}),a.jsx(b7,{onFileSelect:t,showUpload:!0,showPreview:!0,showDelete:!0,showEdit:!0,showPrint:!0,maxFileSize:50})]})})}function _7(){const[t,e]=S.useState("landing"),[n,r]=S.useState(!0),[s,i]=S.useState(null),[o,l]=S.useState(!1),{isSignedIn:c,isLoaded:u,user:d}=Bl(),{signOut:h}=mP();S.useEffect(()=>{c&&d?(async()=>{try{if(await vn.setCurrentUser(d),vn.hasOrganization()){const y=await vn.getUserOrganization();y&&(i(y.name),localStorage.setItem("organizationName",y.name))}else{const y=localStorage.getItem("organizationName");i(y||"My Organization")}r(!1),e("dashboard")}catch(v){console.error("Error initializing user:",v);const y=localStorage.getItem("organizationName");i(y||"My Organization"),r(!1),e("dashboard")}})():c||(vn.clearUser(),i(null),r(!0),e("landing"))},[c,d]),X.useEffect(()=>{const m=v=>{const y=v.detail.page;y&&(e(y),y!=="landing"&&r(!1))};return window.addEventListener("navigateToPage",m),()=>{window.removeEventListener("navigateToPage",m)}},[]);const f=async()=>{try{await h(),vn.clearUser(),localStorage.removeItem("organizationName"),r(!0),e("landing")}catch(m){console.error("Error during logout:",m)}},p=async(m,v)=>{var y;if(d)try{const{createCheckoutSession:g}=await Mn(()=>Promise.resolve().then(()=>u8),void 0);await g({plan:m,properties:v,userId:d.id,userEmail:((y=d.primaryEmailAddress)==null?void 0:y.emailAddress)||"",organizationId:s||void 0})}catch(g){console.error("Error creating checkout session:",g)}},x=()=>{switch(t){case"landing":return a.jsx(T0,{});case"dashboard":return a.jsx(rM,{});case"financials":return a.jsx(xM,{});case"analytics":return a.jsx(uM,{});case"properties":return a.jsx(cM,{});case"csvs":return a.jsx(_M,{});case"reports":return a.jsx(yM,{});case"pricing":return a.jsx(SM,{onSubscribe:p});case"logo-test":return a.jsx(jM,{});case"local-first":return a.jsx(aL,{});case"file-manager":return a.jsx(v7,{});case"csv-file-manager":return a.jsx(w7,{});default:return a.jsx(T0,{})}};return u?n||!c?a.jsx(T0,{}):a.jsxs("div",{className:"flex min-h-screen bg-gray-50 dark:bg-gray-900",children:[a.jsx(h8,{currentPage:t,setCurrentPage:e,onLogout:f,organizationName:s,isCollapsed:o,onToggleCollapse:()=>l(!o)}),a.jsx("main",{className:`flex-1 overflow-y-auto transition-all duration-300 ${o?"lg:ml-0":""}`,children:a.jsx("div",{className:"p-6 pb-12",children:x()})}),a.jsx(CM,{})]}):a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})})}function k7(){const t="pk_test_ZmFtb3VzLXRyZWVmcm9nLTU3LmNsZXJrLmFjY291bnRzLmRldiQ";return a.jsx(D2,{publishableKey:t,children:a.jsx(_7,{})})}const S7=Y0.createRoot(document.getElementById("root"));S7.render(a.jsx(X.StrictMode,{children:a.jsx(k7,{})}));
//# sourceMappingURL=index-72462e11.js.map
