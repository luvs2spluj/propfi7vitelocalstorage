/*! For license information please see main.c6fb7d3e.js.LICENSE.txt */
(()=>{var e={43:(e,t,n)=>{"use strict";e.exports=n(202)},153:(e,t,n)=>{"use strict";var r=n(43),s=Symbol.for("react.element"),a=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)i.call(t,r)&&!l.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:s,type:e,key:c,ref:u,props:a,_owner:o.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var x=b.prototype=new v;x.constructor=b,g(x,y.prototype),x.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,k={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function j(e,t,r){var s,a={},i=null,o=null;if(null!=t)for(s in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(i=""+t.key),t)_.call(t,s)&&!S.hasOwnProperty(s)&&(a[s]=t[s]);var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps)void 0===a[s]&&(a[s]=l[s]);return{$$typeof:n,type:e,key:i,ref:o,props:a,_owner:k.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var N=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function P(e,t,s,a,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return i=i(l=e),e=""===a?"."+E(l,0):a,w(i)?(s="",null!=e&&(s=e.replace(N,"$&/")+"/"),P(i,t,s,"",function(e){return e})):null!=i&&(C(i)&&(i=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,s+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(N,"$&/")+"/")+e)),t.push(i)),1;if(l=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var u=a+E(o=e[c],c);l+=P(o,t,s,u,i)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=P(o=o.value,t,s,u=a+E(o,c++),i);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function T(e,t,n){if(null==e)return e;var r=[],s=0;return P(e,r,"","",function(e){return t.call(n,e,s++)}),r}function M(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var A={current:null},O={transition:null},R={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:O,ReactCurrentOwner:k};function D(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:T,forEach:function(e,t,n){T(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return T(e,function(){t++}),t},toArray:function(e){return T(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=s,t.Profiler=i,t.PureComponent=b,t.StrictMode=a,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.act=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=g({},e.props),a=e.key,i=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,o=k.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_.call(t,c)&&!S.hasOwnProperty(c)&&(s[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:n,type:e.type,key:a,ref:i,props:s,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=j,t.createFactory=function(e){var t=j.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:M}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=D,t.useCallback=function(e,t){return A.current.useCallback(e,t)},t.useContext=function(e){return A.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return A.current.useDeferredValue(e)},t.useEffect=function(e,t){return A.current.useEffect(e,t)},t.useId=function(){return A.current.useId()},t.useImperativeHandle=function(e,t,n){return A.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return A.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return A.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return A.current.useMemo(e,t)},t.useReducer=function(e,t,n){return A.current.useReducer(e,t,n)},t.useRef=function(e){return A.current.useRef(e)},t.useState=function(e){return A.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return A.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return A.current.useTransition()},t.version="18.3.1"},210:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(n(829)),a=r(n(736));class i{constructor(e){let{headers:t={},schema:n,fetch:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=new Headers(t),this.schemaName=n,this.fetch=r}from(e){const t=new URL("".concat(this.url,"/").concat(e));return new s.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new i(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{head:n=!1,get:r=!1,count:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var i;let o;const l=new URL("".concat(this.url,"/rpc/").concat(e));let c;n||r?(o=n?"HEAD":"GET",Object.entries(t).filter(e=>{let[t,n]=e;return void 0!==n}).map(e=>{let[t,n]=e;return[t,Array.isArray(n)?"{".concat(n.join(","),"}"):"".concat(n)]}).forEach(e=>{let[t,n]=e;l.searchParams.append(t,n)})):(o="POST",c=t);const u=new Headers(this.headers);return s&&u.set("Prefer","count=".concat(s)),new a.default({method:o,url:l,headers:u,schema:this.schemaName,body:c,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}}t.default=i},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<a(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,i=s>>>1;r<i;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>a(l,n))c<s&&0>a(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<s&&0>a(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,p=3,f=!1,g=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)s(u);else{if(!(t.startTime<=e))break;s(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(m=!1,x(e),!g)if(null!==r(c))g=!0,O(_);else{var t=r(u);null!==t&&R(w,t.startTime-e)}}function _(e,n){g=!1,m&&(m=!1,v(C),C=-1),f=!0;var a=p;try{for(x(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!P());){var i=h.callback;if("function"===typeof i){h.callback=null,p=h.priorityLevel;var o=i(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&s(c),x(n)}else s(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&R(w,d.startTime-n),l=!1}return l}finally{h=null,p=a,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,S=!1,j=null,C=-1,N=5,E=-1;function P(){return!(t.unstable_now()-E<N)}function T(){if(null!==j){var e=t.unstable_now();E=e;var n=!0;try{n=j(!0,e)}finally{n?k():(S=!1,j=null)}}else S=!1}if("function"===typeof b)k=function(){b(T)};else if("undefined"!==typeof MessageChannel){var M=new MessageChannel,A=M.port2;M.port1.onmessage=T,k=function(){A.postMessage(null)}}else k=function(){y(T,0)};function O(e){j=e,S||(S=!0,k())}function R(e,n){C=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||f||(g=!0,O(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,s,a){var i=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?i+a:i:a=i,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:s,priorityLevel:e,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>i?(e.sortIndex=a,n(u,e),null===r(c)&&e===r(u)&&(m?(v(C),C=-1):m=!0,R(w,a-i))):(e.sortIndex=o,n(c,e),g||f||(g=!0,O(_))),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},286:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(n(630)),a=r(n(611));t.default=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(t=e.shouldThrowOnError)&&void 0!==t&&t,this.signal=e.signal,this.isMaybeSingle=null!==(n=e.isMaybeSingle)&&void 0!==n&&n,e.fetch?this.fetch=e.fetch:"undefined"===typeof fetch?this.fetch=s.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,n,r,s;let i=null,o=null,l=null,c=e.status,u=e.statusText;if(e.ok){if("HEAD"!==this.method){const n=await e.text();""===n||(o="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null===(t=this.headers.get("Accept"))||void 0===t?void 0:t.includes("application/vnd.pgrst.plan+text"))?n:JSON.parse(n))}const s=null===(n=this.headers.get("Prefer"))||void 0===n?void 0:n.match(/count=(exact|planned|estimated)/),a=null===(r=e.headers.get("content-range"))||void 0===r?void 0:r.split("/");s&&a&&a.length>1&&(l=parseInt(a[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(o)&&(o.length>1?(i={code:"PGRST116",details:"Results contain ".concat(o.length," rows, application/vnd.pgrst.object+json requires 1 row"),hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,l=null,c=406,u="Not Acceptable"):o=1===o.length?o[0]:null)}else{const t=await e.text();try{i=JSON.parse(t),Array.isArray(i)&&404===e.status&&(o=[],i=null,c=200,u="OK")}catch(d){404===e.status&&""===t?(c=204,u="No Content"):i={message:t}}if(i&&this.isMaybeSingle&&(null===(s=null===i||void 0===i?void 0:i.details)||void 0===s?void 0:s.includes("0 rows"))&&(i=null,c=200,u="OK"),i&&this.shouldThrowOnError)throw new a.default(i)}return{error:i,data:o,count:l,status:c,statusText:u}});return this.shouldThrowOnError||(n=n.catch(e=>{var t,n,r;return{error:{message:"".concat(null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:"FetchError",": ").concat(null===e||void 0===e?void 0:e.message),details:"".concat(null!==(n=null===e||void 0===e?void 0:e.stack)&&void 0!==n?n:""),hint:"",code:"".concat(null!==(r=null===e||void 0===e?void 0:e.code)&&void 0!==r?r:"")},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}}},374:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(n(286));class a extends s.default{select(e){let t=!1;const n=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e){let{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:s=r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=s?"".concat(s,".order"):"order",i=this.url.searchParams.get(a);return this.url.searchParams.set(a,"".concat(i?"".concat(i,","):"").concat(e,".").concat(t?"asc":"desc").concat(void 0===n?"":n?".nullsfirst":".nullslast")),this}limit(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r="undefined"===typeof n?"limit":"".concat(n,".limit");return this.url.searchParams.set(r,"".concat(e)),this}range(e,t){let{foreignTable:n,referencedTable:r=n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s="undefined"===typeof r?"offset":"".concat(r,".offset"),a="undefined"===typeof r?"limit":"".concat(r,".limit");return this.url.searchParams.set(s,"".concat(e)),this.url.searchParams.set(a,"".concat(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain(){let{analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:s=!1,format:a="text"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var i;const o=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),l=null!==(i=this.headers.get("Accept"))&&void 0!==i?i:"application/json";return this.headers.set("Accept","application/vnd.pgrst.plan+".concat(a,'; for="').concat(l,'"; options=').concat(o,";")),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer","max-affected=".concat(e)),this}}t.default=a},391:(e,t,n)=>{"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579:(e,t,n)=>{"use strict";e.exports=n(153)},611:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}t.default=n},630:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Headers:()=>i,Request:()=>o,Response:()=>l,default:()=>a,fetch:()=>s});var r=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("unable to locate global object")}();const s=r.fetch,a=r.fetch.bind(r),i=r.Headers,o=r.Request,l=r.Response},730:(e,t,n)=>{"use strict";var r=n(43),s=n(853);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)i.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function g(e,t,n,r,s,a,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){m[e]=new g(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){m[e]=new g(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){m[e]=new g(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){m[e]=new g(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){m[e]=new g(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var s=m.hasOwnProperty(t)?m[t]:null;(null!==s?0!==s.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,s,r)&&(n=null),r||null===s?function(e){return!!d.call(f,e)||!d.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=null===n?3!==s.type&&"":n:(t=s.attributeName,r=s.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)}),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)});var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),N=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),A=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var L,I=Object.assign;function F(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var z=!1;function U(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var s=c.stack.split("\n"),a=r.stack.split("\n"),i=s.length-1,o=a.length-1;1<=i&&0<=o&&s[i]!==a[o];)o--;for(;1<=i&&0<=o;i--,o--)if(s[i]!==a[o]){if(1!==i||1!==o)do{if(i--,0>--o||s[i]!==a[o]){var l="\n"+s[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=o);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function B(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case _:return"Portal";case j:return"Profiler";case S:return"StrictMode";case P:return"Suspense";case T:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case N:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case M:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case A:t=e._payload,e=e._init;try{return V(e(t))}catch(n){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function $(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function J(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return I({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function G(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function X(e,t){Q(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&J(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return I({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ae(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),s=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}Object.keys(pe).forEach(function(e){fe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]})});var ye=I({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,ke=null,Se=null;function je(e){if(e=bs(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=ws(t),_e(e.stateNode,e.type,t))}}function Ce(e){ke?Se?Se.push(e):Se=[e]:ke=e}function Ne(){if(ke){var e=ke,t=Se;if(Se=ke=null,je(e),t)for(e=0;e<t.length;e++)je(t[e])}}function Ee(e,t){return e(t)}function Pe(){}var Te=!1;function Me(e,t,n){if(Te)return e(t,n);Te=!0;try{return Ee(e,t,n)}finally{Te=!1,(null!==ke||null!==Se)&&(Pe(),Ne())}}function Ae(e,t){var n=e.stateNode;if(null===n)return null;var r=ws(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Oe=!1;if(u)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(ue){Oe=!1}function De(e,t,n,r,s,a,i,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Ie=null,Fe=!1,ze=null,Ue={onError:function(e){Le=!0,Ie=e}};function Be(e,t,n,r,s,a,i,o,l){Le=!1,Ie=null,De.apply(Ue,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Ve(e)!==e)throw Error(a(188))}function qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var i=s.alternate;if(null===i){if(null!==(r=s.return)){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return He(s),e;if(i===r)return He(s),t;i=i.sibling}throw Error(a(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?$e(e):null}function $e(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=$e(e);if(null!==t)return t;e=e.sibling}return null}var Ke=s.unstable_scheduleCallback,Je=s.unstable_cancelCallback,Ye=s.unstable_shouldYield,Ge=s.unstable_requestPaint,Qe=s.unstable_now,Xe=s.unstable_getCurrentPriorityLevel,Ze=s.unstable_ImmediatePriority,et=s.unstable_UserBlockingPriority,tt=s.unstable_NormalPriority,nt=s.unstable_LowPriority,rt=s.unstable_IdlePriority,st=null,at=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,s=e.suspendedLanes,a=e.pingedLanes,i=268435455&n;if(0!==i){var o=i&~s;0!==o?r=dt(o):0!==(a&=i)&&(r=dt(a))}else 0!==(i=n&~s)?r=dt(i):0!==a&&(r=dt(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&s)&&((s=r&-r)>=(a=t&-t)||16===s&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)s=1<<(n=31-it(t)),r|=e[n],t&=~s;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-it(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,kt,St,jt,Ct=!1,Nt=[],Et=null,Pt=null,Tt=null,Mt=new Map,At=new Map,Ot=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":Pt=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":Mt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":At.delete(t.pointerId)}}function Lt(e,t,n,r,s,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},null!==t&&(null!==(t=bs(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function It(e){var t=vs(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=We(n)))return e.blockedOn=t,void jt(e.priority,function(){kt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bs(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function zt(e,t,n){Ft(e)&&n.delete(t)}function Ut(){Ct=!1,null!==Et&&Ft(Et)&&(Et=null),null!==Pt&&Ft(Pt)&&(Pt=null),null!==Tt&&Ft(Tt)&&(Tt=null),Mt.forEach(zt),At.forEach(zt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Ut)))}function Vt(e){function t(t){return Bt(t,e)}if(0<Nt.length){Bt(Nt[0],e);for(var n=1;n<Nt.length;n++){var r=Nt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Et&&Bt(Et,e),null!==Pt&&Bt(Pt,e),null!==Tt&&Bt(Tt,e),Mt.forEach(t),At.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)It(n),null===n.blockedOn&&Ot.shift()}var Wt=x.ReactCurrentBatchConfig,Ht=!0;function qt(e,t,n,r){var s=bt,a=Wt.transition;Wt.transition=null;try{bt=1,Kt(e,t,n,r)}finally{bt=s,Wt.transition=a}}function $t(e,t,n,r){var s=bt,a=Wt.transition;Wt.transition=null;try{bt=4,Kt(e,t,n,r)}finally{bt=s,Wt.transition=a}}function Kt(e,t,n,r){if(Ht){var s=Yt(e,t,n,r);if(null===s)Hr(e,t,r,Jt,n),Dt(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return Et=Lt(Et,e,t,n,r,s),!0;case"dragenter":return Pt=Lt(Pt,e,t,n,r,s),!0;case"mouseover":return Tt=Lt(Tt,e,t,n,r,s),!0;case"pointerover":var a=s.pointerId;return Mt.set(a,Lt(Mt.get(a)||null,e,t,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,At.set(a,Lt(At.get(a)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(Dt(e,r),4&t&&-1<Rt.indexOf(e)){for(;null!==s;){var a=bs(s);if(null!==a&&wt(a),null===(a=Yt(e,t,n,r))&&Hr(e,t,r,Jt,n),a===s)break;s=a}null!==s&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Jt=null;function Yt(e,t,n,r){if(Jt=null,null!==(e=vs(e=we(r))))if(null===(t=Ve(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Jt=e,null}function Gt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Qt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,s="value"in Qt?Qt.value:Qt.textContent,a=s.length;for(e=0;e<r&&n[e]===s[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===s[a-t];t++);return Zt=s.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,s,a){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(s):s[i]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return I(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),dn=I({},cn,{view:0,detail:0}),hn=sn(dn),pn=I({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),fn=sn(pn),gn=sn(I({},pn,{dataTransfer:0})),mn=sn(I({},dn,{relatedTarget:0})),yn=sn(I({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=I({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=sn(vn),xn=sn(I({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function jn(){return Sn}var Cn=I({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Nn=sn(Cn),En=sn(I({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=sn(I({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jn})),Tn=sn(I({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Mn=I({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),An=sn(Mn),On=[9,13,27,32],Rn=u&&"CompositionEvent"in window,Dn=null;u&&"documentMode"in document&&(Dn=document.documentMode);var Ln=u&&"TextEvent"in window&&!Dn,In=u&&(!Rn||Dn&&8<Dn&&11>=Dn),Fn=String.fromCharCode(32),zn=!1;function Un(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function qn(e,t,n,r){Ce(r),0<(t=$r(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var $n=null,Kn=null;function Jn(e){Fr(e,0)}function Yn(e){if(K(xs(e)))return e}function Gn(e,t){if("change"===e)return t}var Qn=!1;if(u){var Xn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Qn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){$n&&($n.detachEvent("onpropertychange",nr),Kn=$n=null)}function nr(e){if("value"===e.propertyName&&Yn(Kn)){var t=[];qn(t,Kn,e,we(e)),Me(Jn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,($n=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Kn)}function ar(e,t){if("click"===e)return Yn(t)}function ir(e,t){if("input"===e||"change"===e)return Yn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!d.call(t,s)||!or(e[s],t[s]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=J((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=n.textContent.length,a=Math.min(r.start,s);r=void 0===r.end?a:Math.min(r.end,s),!e.extend&&a>r&&(s=r,r=a,a=s),s=ur(n,a);var i=ur(n,r);s&&i&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=u&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,vr=null,br=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==mr||mr!==J(r)||("selectionStart"in(r=mr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=$r(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},kr={},Sr={};function jr(e){if(kr[e])return kr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return kr[e]=n[t];return e}u&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Cr=jr("animationend"),Nr=jr("animationiteration"),Er=jr("animationstart"),Pr=jr("transitionend"),Tr=new Map,Mr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(e,t){Tr.set(e,t),l(t,[e])}for(var Or=0;Or<Mr.length;Or++){var Rr=Mr[Or];Ar(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Ar(Cr,"onAnimationEnd"),Ar(Nr,"onAnimationIteration"),Ar(Er,"onAnimationStart"),Ar("dblclick","onDoubleClick"),Ar("focusin","onFocus"),Ar("focusout","onBlur"),Ar(Pr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function Ir(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,s,i,o,l,c){if(Be.apply(this,arguments),Le){if(!Le)throw Error(a(198));var u=Ie;Le=!1,Ie=null,Fe||(Fe=!0,ze=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var i=r.length-1;0<=i;i--){var o=r[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&s.isPropagationStopped())break e;Ir(s,o,c),a=l}else for(i=0;i<r.length;i++){if(l=(o=r[i]).instance,c=o.currentTarget,o=o.listener,l!==a&&s.isPropagationStopped())break e;Ir(s,o,c),a=l}}}if(Fe)throw e=ze,Fe=!1,ze=null,e}function zr(e,t){var n=t[gs];void 0===n&&(n=t[gs]=new Set);var r=e+"__bubble";n.has(r)||(Wr(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),Wr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function Vr(e){if(!e[Br]){e[Br]=!0,i.forEach(function(t){"selectionchange"!==t&&(Lr.has(t)||Ur(t,!1,e),Ur(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Ur("selectionchange",!1,t))}}function Wr(e,t,n,r){switch(Gt(t)){case 1:var s=qt;break;case 4:s=$t;break;default:s=Kt}n=s.bind(null,t,n,e),s=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,s){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var o=r.stateNode.containerInfo;if(o===s||8===o.nodeType&&o.parentNode===s)break;if(4===i)for(i=r.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;i=i.return}for(;null!==o;){if(null===(i=vs(o)))return;if(5===(l=i.tag)||6===l){r=a=i;continue e}o=o.parentNode}}r=r.return}Me(function(){var r=a,s=we(n),i=[];e:{var o=Tr.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Nn;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Pn;break;case Cr:case Nr:case Er:l=yn;break;case Pr:l=Tn;break;case"scroll":l=hn;break;case"wheel":l=An;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=En}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var p,f=r;null!==f;){var g=(p=f).stateNode;if(5===p.tag&&null!==g&&(p=g,null!==h&&(null!=(g=Ae(f,h))&&u.push(qr(f,g,p)))),d)break;f=f.return}0<u.length&&(o=new l(o,c,null,n,s),i.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!vs(c)&&!c[fs])&&(l||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vs(c):null)&&(c!==(d=Ve(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=fn,g="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=En,g="onPointerLeave",h="onPointerEnter",f="pointer"),d=null==l?o:xs(l),p=null==c?o:xs(c),(o=new u(g,f+"leave",l,n,s)).target=d,o.relatedTarget=p,g=null,vs(s)===r&&((u=new u(h,f+"enter",c,n,s)).target=p,u.relatedTarget=d,g=u),d=g,l&&c)e:{for(h=c,f=0,p=u=l;p;p=Kr(p))f++;for(p=0,g=h;g;g=Kr(g))p++;for(;0<f-p;)u=Kr(u),f--;for(;0<p-f;)h=Kr(h),p--;for(;f--;){if(u===h||null!==h&&u===h.alternate)break e;u=Kr(u),h=Kr(h)}u=null}else u=null;null!==l&&Jr(i,o,l,u,!1),null!==c&&null!==d&&Jr(i,d,c,u,!0)}if("select"===(l=(o=r?xs(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var m=Gn;else if(Hn(o))if(Qn)m=ir;else{m=sr;var y=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(m=ar);switch(m&&(m=m(e,r))?qn(i,m,n,s):(y&&y(e,o,r),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&ee(o,"number",o.value)),y=r?xs(r):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,vr=null);break;case"focusout":vr=yr=mr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(i,n,s);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":xr(i,n,s)}var v;if(Rn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Vn?Un(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(In&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Vn&&(v=en()):(Xt="value"in(Qt=s)?Qt.value:Qt.textContent,Vn=!0)),0<(y=$r(r,b)).length&&(b=new xn(b,e,null,n,s),i.push({event:b,listeners:y}),v?b.data=v:null!==(v=Bn(n))&&(b.data=v))),(v=Ln?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(zn=!0,Fn);case"textInput":return(e=t.data)===Fn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!Rn&&Un(e,t)?(e=en(),Zt=Xt=Qt=null,Vn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return In&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=$r(r,"onBeforeInput")).length&&(s=new xn("onBeforeInput","beforeinput",null,n,s),i.push({event:s,listeners:r}),s.data=v))}Fr(i,t)})}function qr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function $r(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,a=s.stateNode;5===s.tag&&null!==a&&(s=a,null!=(a=Ae(e,n))&&r.unshift(qr(e,a,s)),null!=(a=Ae(e,t))&&r.push(qr(e,a,s))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Jr(e,t,n,r,s){for(var a=t._reactName,i=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,s?null!=(l=Ae(n,a))&&i.unshift(qr(n,l,o)):s||null!=(l=Ae(n,a))&&i.push(qr(n,l,o))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Yr=/\r\n?/g,Gr=/\u0000|\uFFFD/g;function Qr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Gr,"")}function Xr(e,t,n){if(t=Qr(t),Qr(e)!==t&&n)throw Error(a(425))}function Zr(){}var es=null,ts=null;function ns(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var rs="function"===typeof setTimeout?setTimeout:void 0,ss="function"===typeof clearTimeout?clearTimeout:void 0,as="function"===typeof Promise?Promise:void 0,is="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof as?function(e){return as.resolve(null).then(e).catch(os)}:rs;function os(e){setTimeout(function(){throw e})}function ls(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===r)return e.removeChild(s),void Vt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=s}while(n);Vt(t)}function cs(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function us(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ds=Math.random().toString(36).slice(2),hs="__reactFiber$"+ds,ps="__reactProps$"+ds,fs="__reactContainer$"+ds,gs="__reactEvents$"+ds,ms="__reactListeners$"+ds,ys="__reactHandles$"+ds;function vs(e){var t=e[hs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fs]||n[hs]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=us(e);null!==e;){if(n=e[hs])return n;e=us(e)}return t}n=(e=n).parentNode}return null}function bs(e){return!(e=e[hs]||e[fs])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xs(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function ws(e){return e[ps]||null}var _s=[],ks=-1;function Ss(e){return{current:e}}function js(e){0>ks||(e.current=_s[ks],_s[ks]=null,ks--)}function Cs(e,t){ks++,_s[ks]=e.current,e.current=t}var Ns={},Es=Ss(Ns),Ps=Ss(!1),Ts=Ns;function Ms(e,t){var n=e.type.contextTypes;if(!n)return Ns;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s,a={};for(s in n)a[s]=t[s];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function As(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Os(){js(Ps),js(Es)}function Rs(e,t,n){if(Es.current!==Ns)throw Error(a(168));Cs(Es,t),Cs(Ps,n)}function Ds(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in t))throw Error(a(108,W(e)||"Unknown",s));return I({},n,r)}function Ls(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ns,Ts=Es.current,Cs(Es,e),Cs(Ps,Ps.current),!0}function Is(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Ds(e,t,Ts),r.__reactInternalMemoizedMergedChildContext=e,js(Ps),js(Es),Cs(Es,e)):js(Ps),Cs(Ps,n)}var Fs=null,zs=!1,Us=!1;function Bs(e){null===Fs?Fs=[e]:Fs.push(e)}function Vs(){if(!Us&&null!==Fs){Us=!0;var e=0,t=bt;try{var n=Fs;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fs=null,zs=!1}catch(s){throw null!==Fs&&(Fs=Fs.slice(e+1)),Ke(Ze,Vs),s}finally{bt=t,Us=!1}}return null}var Ws=[],Hs=0,qs=null,$s=0,Ks=[],Js=0,Ys=null,Gs=1,Qs="";function Xs(e,t){Ws[Hs++]=$s,Ws[Hs++]=qs,qs=e,$s=t}function Zs(e,t,n){Ks[Js++]=Gs,Ks[Js++]=Qs,Ks[Js++]=Ys,Ys=e;var r=Gs;e=Qs;var s=32-it(r)-1;r&=~(1<<s),n+=1;var a=32-it(t)+s;if(30<a){var i=s-s%5;a=(r&(1<<i)-1).toString(32),r>>=i,s-=i,Gs=1<<32-it(t)+s|n<<s|r,Qs=a+e}else Gs=1<<a|n<<s|r,Qs=e}function ea(e){null!==e.return&&(Xs(e,1),Zs(e,1,0))}function ta(e){for(;e===qs;)qs=Ws[--Hs],Ws[Hs]=null,$s=Ws[--Hs],Ws[Hs]=null;for(;e===Ys;)Ys=Ks[--Js],Ks[Js]=null,Qs=Ks[--Js],Ks[Js]=null,Gs=Ks[--Js],Ks[Js]=null}var na=null,ra=null,sa=!1,aa=null;function ia(e,t){var n=Mc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function oa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=cs(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ys?{id:Gs,overflow:Qs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Mc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function la(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(sa){var t=ra;if(t){var n=t;if(!oa(e,t)){if(la(e))throw Error(a(418));t=cs(n.nextSibling);var r=na;t&&oa(e,t)?ia(r,n):(e.flags=-4097&e.flags|2,sa=!1,na=e)}}else{if(la(e))throw Error(a(418));e.flags=-4097&e.flags|2,sa=!1,na=e}}}function ua(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function da(e){if(e!==na)return!1;if(!sa)return ua(e),sa=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ns(e.type,e.memoizedProps)),t&&(t=ra)){if(la(e))throw ha(),Error(a(418));for(;t;)ia(e,t),t=cs(t.nextSibling)}if(ua(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=cs(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?cs(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=cs(e.nextSibling)}function pa(){ra=na=null,sa=!1}function fa(e){null===aa?aa=[e]:aa.push(e)}var ga=x.ReactCurrentBatchConfig;function ma(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var s=r,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=s.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function ya(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function va(e){return(0,e._init)(e._payload)}function ba(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Ic(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===k?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===A&&va(a)===t.type)?((r=s(t,n.props)).ref=ma(e,t,n),r.return=e,r):((r=Rc(n.type,n.key,n.props,null,e.mode,r)).ref=ma(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function d(e,t,n,r,a){return null===t||7!==t.tag?((t=Dc(n,e.mode,r,a)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ic(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Rc(t.type,t.key,t.props,null,e.mode,n)).ref=ma(e,null,t),n.return=e,n;case _:return(t=Fc(t,e.mode,n)).return=e,t;case A:return h(e,(0,t._init)(t._payload),n)}if(te(t)||D(t))return(t=Dc(t,e.mode,n,null)).return=e,t;ya(e,t)}return null}function p(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==s?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===s?c(e,t,n,r):null;case _:return n.key===s?u(e,t,n,r):null;case A:return p(e,t,(s=n._init)(n._payload),r)}if(te(n)||D(n))return null!==s?null:d(e,t,n,r,null);ya(e,n)}return null}function f(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case _:return u(t,e=e.get(null===r.key?n:r.key)||null,r,s);case A:return f(e,t,n,(0,r._init)(r._payload),s)}if(te(r)||D(r))return d(t,e=e.get(n)||null,r,s,null);ya(t,r)}return null}function g(s,a,o,l){for(var c=null,u=null,d=a,g=a=0,m=null;null!==d&&g<o.length;g++){d.index>g?(m=d,d=null):m=d.sibling;var y=p(s,d,o[g],l);if(null===y){null===d&&(d=m);break}e&&d&&null===y.alternate&&t(s,d),a=i(y,a,g),null===u?c=y:u.sibling=y,u=y,d=m}if(g===o.length)return n(s,d),sa&&Xs(s,g),c;if(null===d){for(;g<o.length;g++)null!==(d=h(s,o[g],l))&&(a=i(d,a,g),null===u?c=d:u.sibling=d,u=d);return sa&&Xs(s,g),c}for(d=r(s,d);g<o.length;g++)null!==(m=f(d,s,g,o[g],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?g:m.key),a=i(m,a,g),null===u?c=m:u.sibling=m,u=m);return e&&d.forEach(function(e){return t(s,e)}),sa&&Xs(s,g),c}function m(s,o,l,c){var u=D(l);if("function"!==typeof u)throw Error(a(150));if(null==(l=u.call(l)))throw Error(a(151));for(var d=u=null,g=o,m=o=0,y=null,v=l.next();null!==g&&!v.done;m++,v=l.next()){g.index>m?(y=g,g=null):y=g.sibling;var b=p(s,g,v.value,c);if(null===b){null===g&&(g=y);break}e&&g&&null===b.alternate&&t(s,g),o=i(b,o,m),null===d?u=b:d.sibling=b,d=b,g=y}if(v.done)return n(s,g),sa&&Xs(s,m),u;if(null===g){for(;!v.done;m++,v=l.next())null!==(v=h(s,v.value,c))&&(o=i(v,o,m),null===d?u=v:d.sibling=v,d=v);return sa&&Xs(s,m),u}for(g=r(s,g);!v.done;m++,v=l.next())null!==(v=f(g,s,m,v.value,c))&&(e&&null!==v.alternate&&g.delete(null===v.key?m:v.key),o=i(v,o,m),null===d?u=v:d.sibling=v,d=v);return e&&g.forEach(function(e){return t(s,e)}),sa&&Xs(s,m),u}return function e(r,a,i,l){if("object"===typeof i&&null!==i&&i.type===k&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case w:e:{for(var c=i.key,u=a;null!==u;){if(u.key===c){if((c=i.type)===k){if(7===u.tag){n(r,u.sibling),(a=s(u,i.props.children)).return=r,r=a;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===A&&va(c)===u.type){n(r,u.sibling),(a=s(u,i.props)).ref=ma(r,u,i),a.return=r,r=a;break e}n(r,u);break}t(r,u),u=u.sibling}i.type===k?((a=Dc(i.props.children,r.mode,l,i.key)).return=r,r=a):((l=Rc(i.type,i.key,i.props,null,r.mode,l)).ref=ma(r,a,i),l.return=r,r=l)}return o(r);case _:e:{for(u=i.key;null!==a;){if(a.key===u){if(4===a.tag&&a.stateNode.containerInfo===i.containerInfo&&a.stateNode.implementation===i.implementation){n(r,a.sibling),(a=s(a,i.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Fc(i,r.mode,l)).return=r,r=a}return o(r);case A:return e(r,a,(u=i._init)(i._payload),l)}if(te(i))return g(r,a,i,l);if(D(i))return m(r,a,i,l);ya(r,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==a&&6===a.tag?(n(r,a.sibling),(a=s(a,i)).return=r,r=a):(n(r,a),(a=Ic(i,r.mode,l)).return=r,r=a),o(r)):n(r,a)}}var xa=ba(!0),wa=ba(!1),_a=Ss(null),ka=null,Sa=null,ja=null;function Ca(){ja=Sa=ka=null}function Na(e){var t=_a.current;js(_a),e._currentValue=t}function Ea(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Pa(e,t){ka=e,ja=Sa=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bo=!0),e.firstContext=null)}function Ta(e){var t=e._currentValue;if(ja!==e)if(e={context:e,memoizedValue:t,next:null},null===Sa){if(null===ka)throw Error(a(308));Sa=e,ka.dependencies={lanes:0,firstContext:e}}else Sa=Sa.next=e;return t}var Ma=null;function Aa(e){null===Ma?Ma=[e]:Ma.push(e)}function Oa(e,t,n,r){var s=t.interleaved;return null===s?(n.next=n,Aa(t)):(n.next=s.next,s.next=n),t.interleaved=n,Ra(e,r)}function Ra(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Da=!1;function La(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ia(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function za(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&El)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Ra(e,n)}return null===(s=r.interleaved)?(t.next=t,Aa(r)):(t.next=s.next,s.next=t),r.interleaved=t,Ra(e,n)}function Ua(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Ba(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?s=a=i:a=a.next=i,n=n.next}while(null!==n);null===a?s=a=t:a=a.next=t}else s=a=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Va(e,t,n,r){var s=e.updateQueue;Da=!1;var a=s.firstBaseUpdate,i=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?a=c:i.next=c,i=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==i&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==a){var d=s.baseState;for(i=0,u=c=l=null,o=a;;){var h=o.lane,p=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=e,g=o;switch(h=t,p=n,g.tag){case 1:if("function"===typeof(f=g.payload)){d=f.call(p,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=g.payload)?f.call(p,d,h):f)||void 0===h)break e;d=I({},d,h);break e;case 2:Da=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=s.effects)?s.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,i|=h;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(h=o).next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}if(null===u&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,null!==(t=s.shared.interleaved)){s=t;do{i|=s.lane,s=s.next}while(s!==t)}else null===a&&(s.shared.lanes=0);Ll|=i,e.lanes=i,e.memoizedState=d}}function Wa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(null!==s){if(r.callback=null,r=n,"function"!==typeof s)throw Error(a(191,s));s.call(r)}}}var Ha={},qa=Ss(Ha),$a=Ss(Ha),Ka=Ss(Ha);function Ja(e){if(e===Ha)throw Error(a(174));return e}function Ya(e,t){switch(Cs(Ka,t),Cs($a,e),Cs(qa,Ha),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}js(qa),Cs(qa,t)}function Ga(){js(qa),js($a),js(Ka)}function Qa(e){Ja(Ka.current);var t=Ja(qa.current),n=le(t,e.type);t!==n&&(Cs($a,e),Cs(qa,n))}function Xa(e){$a.current===e&&(js(qa),js($a))}var Za=Ss(0);function ei(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ti=[];function ni(){for(var e=0;e<ti.length;e++)ti[e]._workInProgressVersionPrimary=null;ti.length=0}var ri=x.ReactCurrentDispatcher,si=x.ReactCurrentBatchConfig,ai=0,ii=null,oi=null,li=null,ci=!1,ui=!1,di=0,hi=0;function pi(){throw Error(a(321))}function fi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function gi(e,t,n,r,s,i){if(ai=i,ii=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ri.current=null===e||null===e.memoizedState?Xi:Zi,e=n(r,s),ui){i=0;do{if(ui=!1,di=0,25<=i)throw Error(a(301));i+=1,li=oi=null,t.updateQueue=null,ri.current=eo,e=n(r,s)}while(ui)}if(ri.current=Qi,t=null!==oi&&null!==oi.next,ai=0,li=oi=ii=null,ci=!1,t)throw Error(a(300));return e}function mi(){var e=0!==di;return di=0,e}function yi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===li?ii.memoizedState=li=e:li=li.next=e,li}function vi(){if(null===oi){var e=ii.alternate;e=null!==e?e.memoizedState:null}else e=oi.next;var t=null===li?ii.memoizedState:li.next;if(null!==t)li=t,oi=e;else{if(null===e)throw Error(a(310));e={memoizedState:(oi=e).memoizedState,baseState:oi.baseState,baseQueue:oi.baseQueue,queue:oi.queue,next:null},null===li?ii.memoizedState=li=e:li=li.next=e}return li}function bi(e,t){return"function"===typeof t?t(e):t}function xi(e){var t=vi(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=oi,s=r.baseQueue,i=n.pending;if(null!==i){if(null!==s){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(null!==s){i=s.next,r=r.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((ai&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,ii.lanes|=d,Ll|=d}u=u.next}while(null!==u&&u!==i);null===c?o=r:c.next=l,or(r,t.memoizedState)||(bo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){s=e;do{i=s.lane,ii.lanes|=i,Ll|=i,s=s.next}while(s!==e)}else null===s&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wi(e){var t=vi(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{i=e(i,o.action),o=o.next}while(o!==s);or(i,t.memoizedState)||(bo=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function _i(){}function ki(e,t){var n=ii,r=vi(),s=t(),i=!or(r.memoizedState,s);if(i&&(r.memoizedState=s,bo=!0),r=r.queue,Di(Ci.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||null!==li&&1&li.memoizedState.tag){if(n.flags|=2048,Ti(9,ji.bind(null,n,r,s,t),void 0,null),null===Pl)throw Error(a(349));0!==(30&ai)||Si(n,t,s)}return s}function Si(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function ji(e,t,n,r){t.value=n,t.getSnapshot=r,Ni(t)&&Ei(e)}function Ci(e,t,n){return n(function(){Ni(t)&&Ei(e)})}function Ni(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function Ei(e){var t=Ra(e,1);null!==t&&nc(t,e,1,-1)}function Pi(e){var t=yi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bi,lastRenderedState:e},t.queue=e,e=e.dispatch=Ki.bind(null,ii,e),[t.memoizedState,e]}function Ti(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Mi(){return vi().memoizedState}function Ai(e,t,n,r){var s=yi();ii.flags|=e,s.memoizedState=Ti(1|t,n,void 0,void 0===r?null:r)}function Oi(e,t,n,r){var s=vi();r=void 0===r?null:r;var a=void 0;if(null!==oi){var i=oi.memoizedState;if(a=i.destroy,null!==r&&fi(r,i.deps))return void(s.memoizedState=Ti(t,n,a,r))}ii.flags|=e,s.memoizedState=Ti(1|t,n,a,r)}function Ri(e,t){return Ai(8390656,8,e,t)}function Di(e,t){return Oi(2048,8,e,t)}function Li(e,t){return Oi(4,2,e,t)}function Ii(e,t){return Oi(4,4,e,t)}function Fi(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function zi(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oi(4,4,Fi.bind(null,t,e),n)}function Ui(){}function Bi(e,t){var n=vi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fi(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Vi(e,t){var n=vi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fi(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Wi(e,t,n){return 0===(21&ai)?(e.baseState&&(e.baseState=!1,bo=!0),e.memoizedState=n):(or(n,t)||(n=gt(),ii.lanes|=n,Ll|=n,e.baseState=!0),t)}function Hi(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=si.transition;si.transition={};try{e(!1),t()}finally{bt=n,si.transition=r}}function qi(){return vi().memoizedState}function $i(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ji(e))Yi(t,n);else if(null!==(n=Oa(e,t,n,r))){nc(n,e,r,ec()),Gi(n,t,r)}}function Ki(e,t,n){var r=tc(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ji(e))Yi(t,s);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=a(i,n);if(s.hasEagerState=!0,s.eagerState=o,or(o,i)){var l=t.interleaved;return null===l?(s.next=s,Aa(t)):(s.next=l.next,l.next=s),void(t.interleaved=s)}}catch(c){}null!==(n=Oa(e,t,s,r))&&(nc(n,e,r,s=ec()),Gi(n,t,r))}}function Ji(e){var t=e.alternate;return e===ii||null!==t&&t===ii}function Yi(e,t){ui=ci=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Gi(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Qi={readContext:Ta,useCallback:pi,useContext:pi,useEffect:pi,useImperativeHandle:pi,useInsertionEffect:pi,useLayoutEffect:pi,useMemo:pi,useReducer:pi,useRef:pi,useState:pi,useDebugValue:pi,useDeferredValue:pi,useTransition:pi,useMutableSource:pi,useSyncExternalStore:pi,useId:pi,unstable_isNewReconciler:!1},Xi={readContext:Ta,useCallback:function(e,t){return yi().memoizedState=[e,void 0===t?null:t],e},useContext:Ta,useEffect:Ri,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ai(4194308,4,Fi.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ai(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ai(4,2,e,t)},useMemo:function(e,t){var n=yi();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=yi();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=$i.bind(null,ii,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},yi().memoizedState=e},useState:Pi,useDebugValue:Ui,useDeferredValue:function(e){return yi().memoizedState=e},useTransition:function(){var e=Pi(!1),t=e[0];return e=Hi.bind(null,e[1]),yi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ii,s=yi();if(sa){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Pl)throw Error(a(349));0!==(30&ai)||Si(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,Ri(Ci.bind(null,r,i,e),[e]),r.flags|=2048,Ti(9,ji.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=yi(),t=Pl.identifierPrefix;if(sa){var n=Qs;t=":"+t+"R"+(n=(Gs&~(1<<32-it(Gs)-1)).toString(32)+n),0<(n=di++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=hi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Zi={readContext:Ta,useCallback:Bi,useContext:Ta,useEffect:Di,useImperativeHandle:zi,useInsertionEffect:Li,useLayoutEffect:Ii,useMemo:Vi,useReducer:xi,useRef:Mi,useState:function(){return xi(bi)},useDebugValue:Ui,useDeferredValue:function(e){return Wi(vi(),oi.memoizedState,e)},useTransition:function(){return[xi(bi)[0],vi().memoizedState]},useMutableSource:_i,useSyncExternalStore:ki,useId:qi,unstable_isNewReconciler:!1},eo={readContext:Ta,useCallback:Bi,useContext:Ta,useEffect:Di,useImperativeHandle:zi,useInsertionEffect:Li,useLayoutEffect:Ii,useMemo:Vi,useReducer:wi,useRef:Mi,useState:function(){return wi(bi)},useDebugValue:Ui,useDeferredValue:function(e){var t=vi();return null===oi?t.memoizedState=e:Wi(t,oi.memoizedState,e)},useTransition:function(){return[wi(bi)[0],vi().memoizedState]},useMutableSource:_i,useSyncExternalStore:ki,useId:qi,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=I({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:I({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),s=tc(e),a=Fa(r,s);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=za(e,a,s))&&(nc(t,e,s,r),Ua(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),s=tc(e),a=Fa(r,s);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=za(e,a,s))&&(nc(t,e,s,r),Ua(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),s=Fa(n,r);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=za(e,s,r))&&(nc(t,e,r,n),Ua(t,e,r))}};function so(e,t,n,r,s,a,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,i):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(s,a))}function ao(e,t,n){var r=!1,s=Ns,a=t.contextType;return"object"===typeof a&&null!==a?a=Ta(a):(s=As(t)?Ts:Es.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ms(e,s):Ns),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function io(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},La(e);var a=t.contextType;"object"===typeof a&&null!==a?s.context=Ta(a):(a=As(t)?Ts:Es.current,s.context=Ms(e,a)),s.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(no(e,t,a,n),s.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(t=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&ro.enqueueReplaceState(s,s.state,null),Va(e,n,s,r),s.state=e.memoizedState),"function"===typeof s.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var s=n}catch(a){s="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:s,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ho="function"===typeof WeakMap?WeakMap:Map;function po(e,t,n){(n=Fa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,ql=r),uo(0,t)},n}function fo(e,t,n){(n=Fa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){uo(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof r&&(null===$l?$l=new Set([this]):$l.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function go(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ho;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=jc.bind(null,e,t,n),t.then(e,e))}function mo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function yo(e,t,n,r,s){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fa(-1,1)).tag=2,za(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var vo=x.ReactCurrentOwner,bo=!1;function xo(e,t,n,r){t.child=null===e?wa(t,null,n,r):xa(t,e.child,n,r)}function wo(e,t,n,r,s){n=n.render;var a=t.ref;return Pa(t,s),r=gi(e,t,n,r,a,s),n=mi(),null===e||bo?(sa&&n&&ea(t),t.flags|=1,xo(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ho(e,t,s))}function _o(e,t,n,r,s){if(null===e){var a=n.type;return"function"!==typeof a||Ac(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rc(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,ko(e,t,a,r,s))}if(a=e.child,0===(e.lanes&s)){var i=a.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(i,r)&&e.ref===t.ref)return Ho(e,t,s)}return t.flags|=1,(e=Oc(a,r)).ref=t.ref,e.return=t,t.child=e}function ko(e,t,n,r,s){if(null!==e){var a=e.memoizedProps;if(lr(a,r)&&e.ref===t.ref){if(bo=!1,t.pendingProps=r=a,0===(e.lanes&s))return t.lanes=e.lanes,Ho(e,t,s);0!==(131072&e.flags)&&(bo=!0)}}return Co(e,t,n,r,s)}function So(e,t,n){var r=t.pendingProps,s=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Cs(Ol,Al),Al|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Cs(Ol,Al),Al|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Cs(Ol,Al),Al|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Cs(Ol,Al),Al|=r;return xo(e,t,s,n),t.child}function jo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Co(e,t,n,r,s){var a=As(n)?Ts:Es.current;return a=Ms(t,a),Pa(t,s),n=gi(e,t,n,r,a,s),r=mi(),null===e||bo?(sa&&r&&ea(t),t.flags|=1,xo(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ho(e,t,s))}function No(e,t,n,r,s){if(As(n)){var a=!0;Ls(t)}else a=!1;if(Pa(t,s),null===t.stateNode)Wo(e,t),ao(t,n,r),oo(t,n,r,s),r=!0;else if(null===e){var i=t.stateNode,o=t.memoizedProps;i.props=o;var l=i.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ta(c):c=Ms(t,c=As(n)?Ts:Es.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof i.getSnapshotBeforeUpdate;d||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==r||l!==c)&&io(t,i,r,c),Da=!1;var h=t.memoizedState;i.state=h,Va(t,r,i,s),l=t.memoizedState,o!==r||h!==l||Ps.current||Da?("function"===typeof u&&(no(t,n,u,r),l=t.memoizedState),(o=Da||so(t,n,o,r,h,l,c))?(d||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),i.props=r,i.state=l,i.context=c,r=o):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Ia(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),i.props=c,d=t.pendingProps,h=i.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ta(l):l=Ms(t,l=As(n)?Ts:Es.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==d||h!==l)&&io(t,i,r,l),Da=!1,h=t.memoizedState,i.state=h,Va(t,r,i,s);var f=t.memoizedState;o!==d||h!==f||Ps.current||Da?("function"===typeof p&&(no(t,n,p,r),f=t.memoizedState),(c=Da||so(t,n,c,r,h,f,l)||!1)?(u||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,f,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),i.props=r,i.state=f,i.context=l,r=c):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Eo(e,t,n,r,a,s)}function Eo(e,t,n,r,s,a){jo(e,t);var i=0!==(128&t.flags);if(!r&&!i)return s&&Is(t,n,!1),Ho(e,t,a);r=t.stateNode,vo.current=t;var o=i&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=xa(t,e.child,null,a),t.child=xa(t,null,o,a)):xo(e,t,o,a),t.memoizedState=r.state,s&&Is(t,n,!0),t.child}function Po(e){var t=e.stateNode;t.pendingContext?Rs(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Rs(0,t.context,!1),Ya(e,t.containerInfo)}function To(e,t,n,r,s){return pa(),fa(s),t.flags|=256,xo(e,t,n,r),t.child}var Mo,Ao,Oo,Ro,Do={dehydrated:null,treeContext:null,retryLane:0};function Lo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Io(e,t,n){var r,s=t.pendingProps,i=Za.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Cs(Za,1&i),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=s.children,e=s.fallback,o?(s=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&s)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Lc(l,s,0,null),e=Dc(e,s,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Lo(n),t.memoizedState=Do,e):Fo(t,l));if(null!==(i=e.memoizedState)&&null!==(r=i.dehydrated))return function(e,t,n,r,s,i,o){if(n)return 256&t.flags?(t.flags&=-257,zo(e,t,o,r=co(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=Lc({mode:"visible",children:r.children},s,0,null),(i=Dc(i,s,o,null)).flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,0!==(1&t.mode)&&xa(t,e.child,null,o),t.child.memoizedState=Lo(o),t.memoizedState=Do,i);if(0===(1&t.mode))return zo(e,t,o,null);if("$!"===s.data){if(r=s.nextSibling&&s.nextSibling.dataset)var l=r.dgst;return r=l,zo(e,t,o,r=co(i=Error(a(419)),r,void 0))}if(l=0!==(o&e.childLanes),bo||l){if(null!==(r=Pl)){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(r.suspendedLanes|o))?0:s)&&s!==i.retryLane&&(i.retryLane=s,Ra(e,s),nc(r,e,s,-1))}return gc(),zo(e,t,o,r=co(Error(a(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=Nc.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,ra=cs(s.nextSibling),na=t,sa=!0,aa=null,null!==e&&(Ks[Js++]=Gs,Ks[Js++]=Qs,Ks[Js++]=Ys,Gs=e.id,Qs=e.overflow,Ys=t),t=Fo(t,r.children),t.flags|=4096,t)}(e,t,l,s,r,i,n);if(o){o=s.fallback,l=t.mode,r=(i=e.child).sibling;var c={mode:"hidden",children:s.children};return 0===(1&l)&&t.child!==i?((s=t.child).childLanes=0,s.pendingProps=c,t.deletions=null):(s=Oc(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==r?o=Oc(r,o):(o=Dc(o,l,n,null)).flags|=2,o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,l=null===(l=e.child.memoizedState)?Lo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Do,s}return e=(o=e.child).sibling,s=Oc(o,{mode:"visible",children:s.children}),0===(1&t.mode)&&(s.lanes=n),s.return=t,s.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Fo(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zo(e,t,n,r){return null!==r&&fa(r),xa(t,e.child,null,n),(e=Fo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Uo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ea(e.return,t,n)}function Bo(e,t,n,r,s){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s)}function Vo(e,t,n){var r=t.pendingProps,s=r.revealOrder,a=r.tail;if(xo(e,t,r.children,n),0!==(2&(r=Za.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Uo(e,n,t);else if(19===e.tag)Uo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Cs(Za,r),0===(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===ei(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Bo(t,!1,s,n,a);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===ei(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Bo(t,!0,n,null,a);break;case"together":Bo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ho(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function qo(e,t){if(!sa)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function $o(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=14680064&s.subtreeFlags,r|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ko(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $o(t),null;case 1:case 17:return As(t.type)&&Os(),$o(t),null;case 3:return r=t.stateNode,Ga(),js(Ps),js(Es),ni(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(da(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(ic(aa),aa=null))),Ao(e,t),$o(t),null;case 5:Xa(t);var s=Ja(Ka.current);if(n=t.type,null!==e&&null!=t.stateNode)Oo(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return $o(t),null}if(e=Ja(qa.current),da(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[hs]=t,r[ps]=i,e=0!==(1&t.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(s=0;s<Dr.length;s++)zr(Dr[s],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":G(r,i),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},zr("invalid",r);break;case"textarea":se(r,i),zr("invalid",r)}for(var l in ve(n,i),s=null,i)if(i.hasOwnProperty(l)){var c=i[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==i.suppressHydrationWarning&&Xr(r.textContent,c,e),s=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Xr(r.textContent,c,e),s=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&zr("scroll",r)}switch(n){case"input":$(r),Z(r,i,!0);break;case"textarea":$(r),ie(r);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(r.onclick=Zr)}r=s,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hs]=t,e[ps]=r,Mo(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":zr("cancel",e),zr("close",e),s=r;break;case"iframe":case"object":case"embed":zr("load",e),s=r;break;case"video":case"audio":for(s=0;s<Dr.length;s++)zr(Dr[s],e);s=r;break;case"source":zr("error",e),s=r;break;case"img":case"image":case"link":zr("error",e),zr("load",e),s=r;break;case"details":zr("toggle",e),s=r;break;case"input":G(e,r),s=Y(e,r),zr("invalid",e);break;case"option":default:s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=I({},r,{value:void 0}),zr("invalid",e);break;case"textarea":se(e,r),s=re(e,r),zr("invalid",e)}for(i in ve(n,s),c=s)if(c.hasOwnProperty(i)){var u=c[i];"style"===i?me(e,u):"dangerouslySetInnerHTML"===i?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===i?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(o.hasOwnProperty(i)?null!=u&&"onScroll"===i&&zr("scroll",e):null!=u&&b(e,i,u,l))}switch(n){case"input":$(e),Z(e,r,!1);break;case"textarea":$(e),ie(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(i=r.value)?ne(e,!!r.multiple,i,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return $o(t),null;case 6:if(e&&null!=t.stateNode)Ro(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=Ja(Ka.current),Ja(qa.current),da(t)){if(r=t.stateNode,n=t.memoizedProps,r[hs]=t,(i=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}i&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hs]=t,t.stateNode=r}return $o(t),null;case 13:if(js(Za),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(sa&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),pa(),t.flags|=98560,i=!1;else if(i=da(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(a(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(a(317));i[hs]=t}else pa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;$o(t),i=!1}else null!==aa&&(ic(aa),aa=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Za.current)?0===Rl&&(Rl=3):gc())),null!==t.updateQueue&&(t.flags|=4),$o(t),null);case 4:return Ga(),Ao(e,t),null===e&&Vr(t.stateNode.containerInfo),$o(t),null;case 10:return Na(t.type._context),$o(t),null;case 19:if(js(Za),null===(i=t.memoizedState))return $o(t),null;if(r=0!==(128&t.flags),null===(l=i.rendering))if(r)qo(i,!1);else{if(0!==Rl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ei(e))){for(t.flags|=128,qo(i,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(i=n).flags&=14680066,null===(l=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Cs(Za,1&Za.current|2),t.child}e=e.sibling}null!==i.tail&&Qe()>Vl&&(t.flags|=128,r=!0,qo(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ei(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),qo(i,!0),null===i.tail&&"hidden"===i.tailMode&&!l.alternate&&!sa)return $o(t),null}else 2*Qe()-i.renderingStartTime>Vl&&1073741824!==n&&(t.flags|=128,r=!0,qo(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=i.last)?n.sibling=l:t.child=l,i.last=l)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Qe(),t.sibling=null,n=Za.current,Cs(Za,r?1&n|2:1&n),t):($o(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Al)&&($o(t),6&t.subtreeFlags&&(t.flags|=8192)):$o(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Jo(e,t){switch(ta(t),t.tag){case 1:return As(t.type)&&Os(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ga(),js(Ps),js(Es),ni(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xa(t),null;case 13:if(js(Za),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));pa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return js(Za),null;case 4:return Ga(),null;case 10:return Na(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Mo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ao=function(){},Oo=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Ja(qa.current);var a,i=null;switch(n){case"input":s=Y(e,s),r=Y(e,r),i=[];break;case"select":s=I({},s,{value:void 0}),r=I({},r,{value:void 0}),i=[];break;case"textarea":s=re(e,s),r=re(e,r),i=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&null!=s[u])if("style"===u){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=s?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(i=i||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&zr("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}},Ro=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yo=!1,Go=!1,Qo="function"===typeof WeakSet?WeakSet:Set,Xo=null;function Zo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var s=r=r.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,void 0!==a&&el(t,n,a)}s=s.next}while(s!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hs],delete t[ps],delete t[gs],delete t[ms],delete t[ys])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function il(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||il(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(st,n)}catch(o){}switch(n.tag){case 5:Go||Zo(n,t);case 6:var r=ul,s=dl;ul=null,hl(e,t,n),dl=s,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?ls(e.parentNode,n):1===e.nodeType&&ls(e,n),Vt(e)):ls(ul,n.stateNode));break;case 4:r=ul,s=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=r,dl=s;break;case 0:case 11:case 14:case 15:if(!Go&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){s=r=r.next;do{var a=s,i=a.destroy;a=a.tag,void 0!==i&&(0!==(2&a)||0!==(4&a))&&el(n,t,i),s=s.next}while(s!==r)}hl(e,t,n);break;case 1:if(!Go&&(Zo(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Sc(n,t,o)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Go=(r=Go)||null!==n.memoizedState,hl(e,t,n),Go=r):hl(e,t,n);break;default:hl(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qo),t.forEach(function(t){var r=Ec.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(a(160));pl(i,o,s),ul=null,dl=!1;var c=s.alternate;null!==c&&(c.return=null),s.return=null}catch(u){Sc(s,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ml(t,e),t=t.sibling}function ml(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),yl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(m){Sc(e,e.return,m)}try{nl(5,e,e.return)}catch(m){Sc(e,e.return,m)}}break;case 1:gl(t,e),yl(e),512&r&&null!==n&&Zo(n,n.return);break;case 5:if(gl(t,e),yl(e),512&r&&null!==n&&Zo(n,n.return),32&e.flags){var s=e.stateNode;try{he(s,"")}catch(m){Sc(e,e.return,m)}}if(4&r&&null!=(s=e.stateNode)){var i=e.memoizedProps,o=null!==n?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===i.type&&null!=i.name&&Q(s,i),be(l,o);var u=be(l,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?me(s,h):"dangerouslySetInnerHTML"===d?de(s,h):"children"===d?he(s,h):b(s,d,h,u)}switch(l){case"input":X(s,i);break;case"textarea":ae(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;null!=f?ne(s,!!i.multiple,f,!1):p!==!!i.multiple&&(null!=i.defaultValue?ne(s,!!i.multiple,i.defaultValue,!0):ne(s,!!i.multiple,i.multiple?[]:"",!1))}s[ps]=i}catch(m){Sc(e,e.return,m)}}break;case 6:if(gl(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(a(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(m){Sc(e,e.return,m)}}break;case 3:if(gl(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(m){Sc(e,e.return,m)}break;case 4:default:gl(t,e),yl(e);break;case 13:gl(t,e),yl(e),8192&(s=e.child).flags&&(i=null!==s.memoizedState,s.stateNode.isHidden=i,!i||null!==s.alternate&&null!==s.alternate.memoizedState||(Bl=Qe())),4&r&&fl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Go=(u=Go)||d,gl(t,e),Go=u):gl(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Xo=e,d=e.child;null!==d;){for(h=Xo=d;null!==Xo;){switch(f=(p=Xo).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:Zo(p,p.return);var g=p.stateNode;if("function"===typeof g.componentWillUnmount){r=p,n=p.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){Sc(r,n,m)}}break;case 5:Zo(p,p.return);break;case 22:if(null!==p.memoizedState){wl(h);continue}}null!==f?(f.return=p,Xo=f):wl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{s=h.stateNode,u?"function"===typeof(i=s.style).setProperty?i.setProperty("display","none","important"):i.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",o))}catch(m){Sc(e,e.return,m)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(m){Sc(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:gl(t,e),yl(e),4&r&&fl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(il(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var s=r.stateNode;32&r.flags&&(he(s,""),r.flags&=-33),cl(e,ol(e),s);break;case 3:case 4:var i=r.stateNode.containerInfo;ll(e,ol(e),i);break;default:throw Error(a(161))}}catch(o){Sc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Xo=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Xo;){var s=Xo,a=s.child;if(22===s.tag&&r){var i=null!==s.memoizedState||Yo;if(!i){var o=s.alternate,l=null!==o&&null!==o.memoizedState||Go;o=Yo;var c=Go;if(Yo=i,(Go=l)&&!c)for(Xo=s;null!==Xo;)l=(i=Xo).child,22===i.tag&&null!==i.memoizedState?_l(s):null!==l?(l.return=i,Xo=l):_l(s);for(;null!==a;)Xo=a,bl(a,t,n),a=a.sibling;Xo=s,Yo=o,Go=c}xl(e)}else 0!==(8772&s.subtreeFlags)&&null!==a?(a.return=s,Xo=a):xl(e)}}function xl(e){for(;null!==Xo;){var t=Xo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Go||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Go)if(null===n)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Wa(t,i,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Wa(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Vt(h)}}}break;default:throw Error(a(163))}Go||512&t.flags&&sl(t)}catch(p){Sc(t,t.return,p)}}if(t===e){Xo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xo=n;break}Xo=t.return}}function wl(e){for(;null!==Xo;){var t=Xo;if(t===e){Xo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xo=n;break}Xo=t.return}}function _l(e){for(;null!==Xo;){var t=Xo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Sc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var s=t.return;try{r.componentDidMount()}catch(l){Sc(t,s,l)}}var a=t.return;try{sl(t)}catch(l){Sc(t,a,l)}break;case 5:var i=t.return;try{sl(t)}catch(l){Sc(t,i,l)}}}catch(l){Sc(t,t.return,l)}if(t===e){Xo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Xo=o;break}Xo=t.return}}var kl,Sl=Math.ceil,jl=x.ReactCurrentDispatcher,Cl=x.ReactCurrentOwner,Nl=x.ReactCurrentBatchConfig,El=0,Pl=null,Tl=null,Ml=0,Al=0,Ol=Ss(0),Rl=0,Dl=null,Ll=0,Il=0,Fl=0,zl=null,Ul=null,Bl=0,Vl=1/0,Wl=null,Hl=!1,ql=null,$l=null,Kl=!1,Jl=null,Yl=0,Gl=0,Ql=null,Xl=-1,Zl=0;function ec(){return 0!==(6&El)?Qe():-1!==Xl?Xl:Xl=Qe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&El)&&0!==Ml?Ml&-Ml:null!==ga.transition?(0===Zl&&(Zl=gt()),Zl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Gt(e.type)}function nc(e,t,n,r){if(50<Gl)throw Gl=0,Ql=null,Error(a(185));yt(e,n,r),0!==(2&El)&&e===Pl||(e===Pl&&(0===(2&El)&&(Il|=n),4===Rl&&oc(e,Ml)),rc(e,r),1===n&&0===El&&0===(1&t.mode)&&(Vl=Qe()+500,zs&&Vs()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-it(a),o=1<<i,l=s[i];-1===l?0!==(o&n)&&0===(o&r)||(s[i]=pt(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}}(e,t);var r=ht(e,e===Pl?Ml:0);if(0===r)null!==n&&Je(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Je(n),1===t)0===e.tag?function(e){zs=!0,Bs(e)}(lc.bind(null,e)):Bs(lc.bind(null,e)),is(function(){0===(6&El)&&Vs()}),n=null;else{switch(xt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Pc(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if(Xl=-1,Zl=0,0!==(6&El))throw Error(a(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ht(e,e===Pl?Ml:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var s=El;El|=2;var i=fc();for(Pl===e&&Ml===t||(Wl=null,Vl=Qe()+500,hc(e,t));;)try{vc();break}catch(l){pc(e,l)}Ca(),jl.current=i,El=s,null!==Tl?t=0:(Pl=null,Ml=0,t=Rl)}if(0!==t){if(2===t&&(0!==(s=ft(e))&&(r=s,t=ac(e,s))),1===t)throw n=Dl,hc(e,0),oc(e,r),rc(e,Qe()),n;if(6===t)oc(e,r);else{if(s=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!or(a(),s))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=mc(e,r))&&(0!==(i=ft(e))&&(r=i,t=ac(e,i))),1===t))throw n=Dl,hc(e,0),oc(e,r),rc(e,Qe()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:wc(e,Ul,Wl);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=Bl+500-Qe())){if(0!==ht(e,0))break;if(((s=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=rs(wc.bind(null,e,Ul,Wl),t);break}wc(e,Ul,Wl);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-it(r);i=1<<o,(o=t[o])>s&&(s=o),r&=~i}if(r=s,10<(r=(120>(r=Qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sl(r/1960))-r)){e.timeoutHandle=rs(wc.bind(null,e,Ul,Wl),r);break}wc(e,Ul,Wl);break;default:throw Error(a(329))}}}return rc(e,Qe()),e.callbackNode===n?sc.bind(null,e):null}function ac(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=Ul,Ul=n,null!==t&&ic(t)),e}function ic(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function oc(e,t){for(t&=~Fl,t&=~Il,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-it(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&El))throw Error(a(327));_c();var t=ht(e,0);if(0===(1&t))return rc(e,Qe()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Dl,hc(e,0),oc(e,t),rc(e,Qe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Ul,Wl),rc(e,Qe()),null}function cc(e,t){var n=El;El|=1;try{return e(t)}finally{0===(El=n)&&(Vl=Qe()+500,zs&&Vs())}}function uc(e){null!==Jl&&0===Jl.tag&&0===(6&El)&&_c();var t=El;El|=1;var n=Nl.transition,r=bt;try{if(Nl.transition=null,bt=1,e)return e()}finally{bt=r,Nl.transition=n,0===(6&(El=t))&&Vs()}}function dc(){Al=Ol.current,js(Ol)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ss(n)),null!==Tl)for(n=Tl.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Os();break;case 3:Ga(),js(Ps),js(Es),ni();break;case 5:Xa(r);break;case 4:Ga();break;case 13:case 19:js(Za);break;case 10:Na(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Pl=e,Tl=e=Oc(e.current,null),Ml=Al=t,Rl=0,Dl=null,Fl=Il=Ll=0,Ul=zl=null,null!==Ma){for(t=0;t<Ma.length;t++)if(null!==(r=(n=Ma[t]).interleaved)){n.interleaved=null;var s=r.next,a=n.pending;if(null!==a){var i=a.next;a.next=s,r.next=i}n.pending=r}Ma=null}return e}function pc(e,t){for(;;){var n=Tl;try{if(Ca(),ri.current=Qi,ci){for(var r=ii.memoizedState;null!==r;){var s=r.queue;null!==s&&(s.pending=null),r=r.next}ci=!1}if(ai=0,li=oi=ii=null,ui=!1,di=0,Cl.current=null,null===n||null===n.return){Rl=1,Dl=t,Tl=null;break}e:{var i=e,o=n.return,l=n,c=t;if(t=Ml,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=mo(o);if(null!==f){f.flags&=-257,yo(f,o,l,0,t),1&f.mode&&go(i,u,t),c=u;var g=(t=f).updateQueue;if(null===g){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}if(0===(1&t)){go(i,u,t),gc();break e}c=Error(a(426))}else if(sa&&1&l.mode){var y=mo(o);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),yo(y,o,l,0,t),fa(lo(c,l));break e}}i=c=lo(c,l),4!==Rl&&(Rl=2),null===zl?zl=[i]:zl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Ba(i,po(0,c,t));break e;case 1:l=c;var v=i.type,b=i.stateNode;if(0===(128&i.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===$l||!$l.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t,Ba(i,fo(i,l,t));break e}}i=i.return}while(null!==i)}xc(n)}catch(x){t=x,Tl===n&&null!==n&&(Tl=n=n.return);continue}break}}function fc(){var e=jl.current;return jl.current=Qi,null===e?Qi:e}function gc(){0!==Rl&&3!==Rl&&2!==Rl||(Rl=4),null===Pl||0===(268435455&Ll)&&0===(268435455&Il)||oc(Pl,Ml)}function mc(e,t){var n=El;El|=2;var r=fc();for(Pl===e&&Ml===t||(Wl=null,hc(e,t));;)try{yc();break}catch(s){pc(e,s)}if(Ca(),El=n,jl.current=r,null!==Tl)throw Error(a(261));return Pl=null,Ml=0,Rl}function yc(){for(;null!==Tl;)bc(Tl)}function vc(){for(;null!==Tl&&!Ye();)bc(Tl)}function bc(e){var t=kl(e.alternate,e,Al);e.memoizedProps=e.pendingProps,null===t?xc(e):Tl=t,Cl.current=null}function xc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ko(n,t,Al)))return void(Tl=n)}else{if(null!==(n=Jo(n,t)))return n.flags&=32767,void(Tl=n);if(null===e)return Rl=6,void(Tl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Tl=t);Tl=t=e}while(null!==t);0===Rl&&(Rl=5)}function wc(e,t,n){var r=bt,s=Nl.transition;try{Nl.transition=null,bt=1,function(e,t,n,r){do{_c()}while(null!==Jl);if(0!==(6&El))throw Error(a(327));n=e.finishedWork;var s=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-it(n),a=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~a}}(e,i),e===Pl&&(Tl=Pl=null,Ml=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kl||(Kl=!0,Pc(tt,function(){return _c(),null})),i=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||i){i=Nl.transition,Nl.transition=null;var o=bt;bt=1;var l=El;El|=4,Cl.current=null,function(e,t){if(es=Ht,pr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(w){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==s&&3!==h.nodeType||(l=o+s),h!==i||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++u===s&&(l=o),p===i&&++d===r&&(c=o),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ts={focusedElem:e,selectionRange:n},Ht=!1,Xo=t;null!==Xo;)if(e=(t=Xo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xo=e;else for(;null!==Xo;){t=Xo;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,y=g.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:to(t.type,m),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(a(163))}}catch(w){Sc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Xo=e;break}Xo=t.return}g=tl,tl=!1}(e,n),ml(n,e),fr(ts),Ht=!!es,ts=es=null,e.current=n,vl(n,e,s),Ge(),El=l,bt=o,Nl.transition=i}else e.current=n;if(Kl&&(Kl=!1,Jl=e,Yl=s),i=e.pendingLanes,0===i&&($l=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(st,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Hl)throw Hl=!1,e=ql,ql=null,e;0!==(1&Yl)&&0!==e.tag&&_c(),i=e.pendingLanes,0!==(1&i)?e===Ql?Gl++:(Gl=0,Ql=e):Gl=0,Vs()}(e,t,n,r)}finally{Nl.transition=s,bt=r}return null}function _c(){if(null!==Jl){var e=xt(Yl),t=Nl.transition,n=bt;try{if(Nl.transition=null,bt=16>e?16:e,null===Jl)var r=!1;else{if(e=Jl,Jl=null,Yl=0,0!==(6&El))throw Error(a(331));var s=El;for(El|=4,Xo=e.current;null!==Xo;){var i=Xo,o=i.child;if(0!==(16&Xo.flags)){var l=i.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Xo=u;null!==Xo;){var d=Xo;switch(d.tag){case 0:case 11:case 15:nl(8,d,i)}var h=d.child;if(null!==h)h.return=d,Xo=h;else for(;null!==Xo;){var p=(d=Xo).sibling,f=d.return;if(al(d),d===u){Xo=null;break}if(null!==p){p.return=f,Xo=p;break}Xo=f}}}var g=i.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Xo=i}}if(0!==(2064&i.subtreeFlags)&&null!==o)o.return=i,Xo=o;else e:for(;null!==Xo;){if(0!==(2048&(i=Xo).flags))switch(i.tag){case 0:case 11:case 15:nl(9,i,i.return)}var v=i.sibling;if(null!==v){v.return=i.return,Xo=v;break e}Xo=i.return}}var b=e.current;for(Xo=b;null!==Xo;){var x=(o=Xo).child;if(0!==(2064&o.subtreeFlags)&&null!==x)x.return=o,Xo=x;else e:for(o=b;null!==Xo;){if(0!==(2048&(l=Xo).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(_){Sc(l,l.return,_)}if(l===o){Xo=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Xo=w;break e}Xo=l.return}}if(El=s,Vs(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(st,e)}catch(_){}r=!0}return r}finally{bt=n,Nl.transition=t}}return!1}function kc(e,t,n){e=za(e,t=po(0,t=lo(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function Sc(e,t,n){if(3===e.tag)kc(e,e,n);else for(;null!==t;){if(3===t.tag){kc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===$l||!$l.has(r))){t=za(t,e=fo(t,e=lo(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function jc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Pl===e&&(Ml&n)===n&&(4===Rl||3===Rl&&(130023424&Ml)===Ml&&500>Qe()-Bl?hc(e,0):Fl|=n),rc(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Ra(e,t))&&(yt(e,t,n),rc(e,n))}function Nc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cc(e,n)}function Ec(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Cc(e,n)}function Pc(e,t){return Ke(e,t)}function Tc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mc(e,t,n,r){return new Tc(e,t,n,r)}function Ac(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Mc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rc(e,t,n,r,s,i){var o=2;if(r=e,"function"===typeof e)Ac(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case k:return Dc(n.children,s,i,t);case S:o=8,s|=8;break;case j:return(e=Mc(12,n,t,2|s)).elementType=j,e.lanes=i,e;case P:return(e=Mc(13,n,t,s)).elementType=P,e.lanes=i,e;case T:return(e=Mc(19,n,t,s)).elementType=T,e.lanes=i,e;case O:return Lc(n,s,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:o=10;break e;case N:o=9;break e;case E:o=11;break e;case M:o=14;break e;case A:o=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Mc(o,n,t,s)).elementType=e,t.type=r,t.lanes=i,t}function Dc(e,t,n,r){return(e=Mc(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=Mc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Ic(e,t,n){return(e=Mc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Mc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,r,s,a,i,o,l){return e=new zc(e,t,n,o,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Mc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},La(a),e}function Bc(e){if(!e)return Ns;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(As(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(As(n))return Ds(e,n,t)}return t}function Vc(e,t,n,r,s,a,i,o,l){return(e=Uc(n,r,!0,e,0,a,0,o,l)).context=Bc(null),n=e.current,(a=Fa(r=ec(),s=tc(n))).callback=void 0!==t&&null!==t?t:null,za(n,a,s),e.current.lanes=s,yt(e,s,r),rc(e,r),e}function Wc(e,t,n,r){var s=t.current,a=ec(),i=tc(s);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fa(a,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=za(s,t,i))&&(nc(e,s,i,a),Ua(e,s,i)),i}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function $c(e,t){qc(e,t),(e=e.alternate)&&qc(e,t)}kl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ps.current)bo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bo=!1,function(e,t,n){switch(t.tag){case 3:Po(t),pa();break;case 5:Qa(t);break;case 1:As(t.type)&&Ls(t);break;case 4:Ya(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Cs(_a,r._currentValue),r._currentValue=s;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Cs(Za,1&Za.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Io(e,t,n):(Cs(Za,1&Za.current),null!==(e=Ho(e,t,n))?e.sibling:null);Cs(Za,1&Za.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Vo(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),Cs(Za,Za.current),r)break;return null;case 22:case 23:return t.lanes=0,So(e,t,n)}return Ho(e,t,n)}(e,t,n);bo=0!==(131072&e.flags)}else bo=!1,sa&&0!==(1048576&t.flags)&&Zs(t,$s,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wo(e,t),e=t.pendingProps;var s=Ms(t,Es.current);Pa(t,n),s=gi(null,t,r,e,s,n);var i=mi();return t.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,As(r)?(i=!0,Ls(t)):i=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,La(t),s.updater=ro,t.stateNode=s,s._reactInternals=t,oo(t,r,e,n),t=Eo(null,t,r,!0,i,n)):(t.tag=0,sa&&i&&ea(t),xo(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wo(e,t),e=t.pendingProps,r=(s=r._init)(r._payload),t.type=r,s=t.tag=function(e){if("function"===typeof e)return Ac(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===E)return 11;if(e===M)return 14}return 2}(r),e=to(r,e),s){case 0:t=Co(null,t,r,e,n);break e;case 1:t=No(null,t,r,e,n);break e;case 11:t=wo(null,t,r,e,n);break e;case 14:t=_o(null,t,r,to(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,Co(e,t,r,s=t.elementType===r?s:to(r,s),n);case 1:return r=t.type,s=t.pendingProps,No(e,t,r,s=t.elementType===r?s:to(r,s),n);case 3:e:{if(Po(t),null===e)throw Error(a(387));r=t.pendingProps,s=(i=t.memoizedState).element,Ia(e,t),Va(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=To(e,t,r,n,s=lo(Error(a(423)),t));break e}if(r!==s){t=To(e,t,r,n,s=lo(Error(a(424)),t));break e}for(ra=cs(t.stateNode.containerInfo.firstChild),na=t,sa=!0,aa=null,n=wa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pa(),r===s){t=Ho(e,t,n);break e}xo(e,t,r,n)}t=t.child}return t;case 5:return Qa(t),null===e&&ca(t),r=t.type,s=t.pendingProps,i=null!==e?e.memoizedProps:null,o=s.children,ns(r,s)?o=null:null!==i&&ns(r,i)&&(t.flags|=32),jo(e,t),xo(e,t,o,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Io(e,t,n);case 4:return Ya(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=xa(t,null,r,n):xo(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,wo(e,t,r,s=t.elementType===r?s:to(r,s),n);case 7:return xo(e,t,t.pendingProps,n),t.child;case 8:case 12:return xo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,Cs(_a,r._currentValue),r._currentValue=o,null!==i)if(or(i.value,o)){if(i.children===s.children&&!Ps.current){t=Ho(e,t,n);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var l=i.dependencies;if(null!==l){o=i.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===i.tag){(c=Fa(-1,n&-n)).tag=2;var u=i.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,null!==(c=i.alternate)&&(c.lanes|=n),Ea(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===i.tag)o=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(o=i.return))throw Error(a(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ea(o,n,t),o=i.sibling}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===t){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}xo(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Pa(t,n),r=r(s=Ta(s)),t.flags|=1,xo(e,t,r,n),t.child;case 14:return s=to(r=t.type,t.pendingProps),_o(e,t,r,s=to(r.type,s),n);case 15:return ko(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:to(r,s),Wo(e,t),t.tag=1,As(r)?(e=!0,Ls(t)):e=!1,Pa(t,n),ao(t,r,s),oo(t,r,s,n),Eo(null,t,r,!0,e,n);case 19:return Vo(e,t,n);case 22:return So(e,t,n)}throw Error(a(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Jc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Gc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function Zc(e,t,n,r,s){var a=n._reactRootContainer;if(a){var i=a;if("function"===typeof s){var o=s;s=function(){var e=Hc(i);o.call(e)}}Wc(t,i,e,s)}else i=function(e,t,n,r,s){if(s){if("function"===typeof r){var a=r;r=function(){var e=Hc(i);a.call(e)}}var i=Vc(t,r,e,0,null,!1,0,"",Xc);return e._reactRootContainer=i,e[fs]=i.current,Vr(8===e.nodeType?e.parentNode:e),uc(),i}for(;s=e.lastChild;)e.removeChild(s);if("function"===typeof r){var o=r;r=function(){var e=Hc(l);o.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=l,e[fs]=l.current,Vr(8===e.nodeType?e.parentNode:e),uc(function(){Wc(t,l,n,r)}),l}(n,t,e,s,r);return Hc(i)}Yc.prototype.render=Jc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Wc(e,t,null,null)},Yc.prototype.unmount=Jc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){Wc(null,e,null,null)}),t[fs]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&It(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(vt(t,1|n),rc(t,Qe()),0===(6&El)&&(Vl=Qe()+500,Vs()))}break;case 13:uc(function(){var t=Ra(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),$c(e,1)}},_t=function(e){if(13===e.tag){var t=Ra(e,134217728);if(null!==t)nc(t,e,134217728,ec());$c(e,134217728)}},kt=function(e){if(13===e.tag){var t=tc(e),n=Ra(e,t);if(null!==n)nc(n,e,t,ec());$c(e,t)}},St=function(){return bt},jt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},_e=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=ws(r);if(!s)throw Error(a(90));K(r),X(r,s)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ee=cc,Pe=uc;var eu={usingClientEntryPoint:!1,Events:[bs,xs,ws,Ce,Ne,cc]},tu={findFiberByHostInstance:vs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{st=ru.inject(nu),at=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Gc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Gc(e))throw Error(a(299));var n=!1,r="",s=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,r,s),e[fs]=t.current,Vr(8===e.nodeType?e.parentNode:e),new Jc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Qc(t))throw Error(a(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Gc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,s=!1,i="",o=Kc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Vc(t,null,e,1,null!=n?n:null,s,0,i,o),e[fs]=t.current,Vr(e),r)for(e=0;e<r.length;e++)s=(s=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Yc(t)},t.render=function(e,t,n){if(!Qc(t))throw Error(a(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Qc(e))throw Error(a(40));return!!e._reactRootContainer&&(uc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[fs]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Qc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},736:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(n(374));class a extends s.default{eq(e,t){return this.url.searchParams.append(e,"eq.".concat(t)),this}neq(e,t){return this.url.searchParams.append(e,"neq.".concat(t)),this}gt(e,t){return this.url.searchParams.append(e,"gt.".concat(t)),this}gte(e,t){return this.url.searchParams.append(e,"gte.".concat(t)),this}lt(e,t){return this.url.searchParams.append(e,"lt.".concat(t)),this}lte(e,t){return this.url.searchParams.append(e,"lte.".concat(t)),this}like(e,t){return this.url.searchParams.append(e,"like.".concat(t)),this}likeAllOf(e,t){return this.url.searchParams.append(e,"like(all).{".concat(t.join(","),"}")),this}likeAnyOf(e,t){return this.url.searchParams.append(e,"like(any).{".concat(t.join(","),"}")),this}ilike(e,t){return this.url.searchParams.append(e,"ilike.".concat(t)),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,"ilike(all).{".concat(t.join(","),"}")),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,"ilike(any).{".concat(t.join(","),"}")),this}is(e,t){return this.url.searchParams.append(e,"is.".concat(t)),this}in(e,t){const n=Array.from(new Set(t)).map(e=>"string"===typeof e&&new RegExp("[,()]").test(e)?'"'.concat(e,'"'):"".concat(e)).join(",");return this.url.searchParams.append(e,"in.(".concat(n,")")),this}contains(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cs.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cs.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cs.".concat(JSON.stringify(t))),this}containedBy(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cd.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cd.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cd.".concat(JSON.stringify(t))),this}rangeGt(e,t){return this.url.searchParams.append(e,"sr.".concat(t)),this}rangeGte(e,t){return this.url.searchParams.append(e,"nxl.".concat(t)),this}rangeLt(e,t){return this.url.searchParams.append(e,"sl.".concat(t)),this}rangeLte(e,t){return this.url.searchParams.append(e,"nxr.".concat(t)),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,"adj.".concat(t)),this}overlaps(e,t){return"string"===typeof t?this.url.searchParams.append(e,"ov.".concat(t)):this.url.searchParams.append(e,"ov.{".concat(t.join(","),"}")),this}textSearch(e,t){let{config:n,type:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s="";"plain"===r?s="pl":"phrase"===r?s="ph":"websearch"===r&&(s="w");const a=void 0===n?"":"(".concat(n,")");return this.url.searchParams.append(e,"".concat(s,"fts").concat(a,".").concat(t)),this}match(e){return Object.entries(e).forEach(e=>{let[t,n]=e;this.url.searchParams.append(t,"eq.".concat(n))}),this}not(e,t,n){return this.url.searchParams.append(e,"not.".concat(t,".").concat(n)),this}or(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=n?"".concat(n,".or"):"or";return this.url.searchParams.append(r,"(".concat(e,")")),this}filter(e,t,n){return this.url.searchParams.append(e,"".concat(t,".").concat(n)),this}}t.default=a},766:function(e,t){var n,r,s;r=[],n=function e(){var t,n="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:{},r=!n.document&&!!n.postMessage,s=n.IS_PAPA_WORKER||!1,a={},i=0,o={};function l(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(e){var t=b(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null),this._handle=new p(t),(this._handle.streamer=this)._config=t}.call(this,e),this.parseChunk=function(e,t){var r=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<r){let t=this._config.newline;t||(a=this._config.quoteChar||'"',t=this._handle.guessLineEndings(e,a)),e=[...e.split(t).slice(r)].join(t)}this.isFirstChunk&&w(this._config.beforeFirstChunk)&&void 0!==(a=this._config.beforeFirstChunk(e))&&(e=a),this.isFirstChunk=!1,this._halted=!1,r=this._partialLine+e;var a=(this._partialLine="",this._handle.parse(r,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(e=a.meta.cursor,this._finished||(this._partialLine=r.substring(e-this._baseIndex),this._baseIndex=e),a&&a.data&&(this._rowCount+=a.data.length),r=this._finished||this._config.preview&&this._rowCount>=this._config.preview,s)n.postMessage({results:a,workerId:o.WORKER_ID,finished:r});else if(w(this._config.chunk)&&!t){if(this._config.chunk(a,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=a=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(a.data),this._completeResults.errors=this._completeResults.errors.concat(a.errors),this._completeResults.meta=a.meta),this._completed||!r||!w(this._config.complete)||a&&a.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),r||a&&a.meta.paused||this._nextChunk(),a}this._halted=!0},this._sendError=function(e){w(this._config.error)?this._config.error(e):s&&this._config.error&&n.postMessage({workerId:o.WORKER_ID,error:e,finished:!1})}}function c(e){var t;(e=e||{}).chunkSize||(e.chunkSize=o.RemoteChunkSize),l.call(this,e),this._nextChunk=r?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),r||(t.onload=x(this._chunkLoaded,this),t.onerror=x(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!r),this._config.downloadRequestHeaders){var e,n=this._config.downloadRequestHeaders;for(e in n)t.setRequestHeader(e,n[e])}var s;this._config.chunkSize&&(s=this._start+this._config.chunkSize-1,t.setRequestHeader("Range","bytes="+this._start+"-"+s));try{t.send(this._config.downloadRequestBody)}catch(e){this._chunkError(e.message)}r&&0===t.status&&this._chunkError()}},this._chunkLoaded=function(){4===t.readyState&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize||t.responseText.length,this._finished=!this._config.chunkSize||this._start>=(e=>null!==(e=e.getResponseHeader("Content-Range"))?parseInt(e.substring(e.lastIndexOf("/")+1)):-1)(t),this.parseChunk(t.responseText)))},this._chunkError=function(e){e=t.statusText||e,this._sendError(new Error(e))}}function u(e){(e=e||{}).chunkSize||(e.chunkSize=o.LocalChunkSize),l.call(this,e);var t,n,r="undefined"!=typeof FileReader;this.stream=function(e){this._input=e,n=e.slice||e.webkitSlice||e.mozSlice,r?((t=new FileReader).onload=x(this._chunkLoaded,this),t.onerror=x(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input,s=(this._config.chunkSize&&(s=Math.min(this._start+this._config.chunkSize,this._input.size),e=n.call(e,this._start,s)),t.readAsText(e,this._config.encoding));r||this._chunkLoaded({target:{result:s}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(t.error)}}function d(e){var t;l.call(this,e=e||{}),this.stream=function(e){return t=e,this._nextChunk()},this._nextChunk=function(){var e,n;if(!this._finished)return e=this._config.chunkSize,t=e?(n=t.substring(0,e),t.substring(e)):(n=t,""),this._finished=!t,this.parseChunk(n)}}function h(e){l.call(this,e=e||{});var t=[],n=!0,r=!1;this.pause=function(){l.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){l.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){r&&1===t.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):n=!0},this._streamData=x(function(e){try{t.push("string"==typeof e?e:e.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(e){this._streamError(e)}},this),this._streamError=x(function(e){this._streamCleanUp(),this._sendError(e)},this),this._streamEnd=x(function(){this._streamCleanUp(),r=!0,this._streamData("")},this),this._streamCleanUp=x(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function p(e){var t,n,r,s,a=Math.pow(2,53),i=-a,l=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,c=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,u=this,d=0,h=0,p=!1,m=!1,y=[],v={data:[],errors:[],meta:{}};function x(t){return"greedy"===e.skipEmptyLines?""===t.join("").trim():1===t.length&&0===t[0].length}function _(){if(v&&r&&(S("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+o.DefaultDelimiter+"'"),r=!1),e.skipEmptyLines&&(v.data=v.data.filter(function(e){return!x(e)})),k()){if(v)if(Array.isArray(v.data[0])){for(var t=0;k()&&t<v.data.length;t++)v.data[t].forEach(n);v.data.splice(0,1)}else v.data.forEach(n);function n(t,n){w(e.transformHeader)&&(t=e.transformHeader(t,n)),y.push(t)}}function s(t,n){for(var r=e.header?{}:[],s=0;s<t.length;s++){var o=s,u=t[s];u=((t,n)=>(t=>(e.dynamicTypingFunction&&void 0===e.dynamicTyping[t]&&(e.dynamicTyping[t]=e.dynamicTypingFunction(t)),!0===(e.dynamicTyping[t]||e.dynamicTyping)))(t)?"true"===n||"TRUE"===n||"false"!==n&&"FALSE"!==n&&((e=>{if(l.test(e)&&(e=parseFloat(e),i<e&&e<a))return 1})(n)?parseFloat(n):c.test(n)?new Date(n):""===n?null:n):n)(o=e.header?s>=y.length?"__parsed_extra":y[s]:o,u=e.transform?e.transform(u,o):u),"__parsed_extra"===o?(r[o]=r[o]||[],r[o].push(u)):r[o]=u}return e.header&&(s>y.length?S("FieldMismatch","TooManyFields","Too many fields: expected "+y.length+" fields but parsed "+s,h+n):s<y.length&&S("FieldMismatch","TooFewFields","Too few fields: expected "+y.length+" fields but parsed "+s,h+n)),r}var u;v&&(e.header||e.dynamicTyping||e.transform)&&(u=1,!v.data.length||Array.isArray(v.data[0])?(v.data=v.data.map(s),u=v.data.length):v.data=s(v.data,0),e.header&&v.meta&&(v.meta.fields=y),h+=u)}function k(){return e.header&&0===y.length}function S(e,t,n,r){e={type:e,code:t,message:n},void 0!==r&&(e.row=r),v.errors.push(e)}w(e.step)&&(s=e.step,e.step=function(t){v=t,k()?_():(_(),0!==v.data.length&&(d+=t.data.length,e.preview&&d>e.preview?n.abort():(v.data=v.data[0],s(v,u))))}),this.parse=function(s,a,i){var l=e.quoteChar||'"';return e.newline||(e.newline=this.guessLineEndings(s,l)),r=!1,e.delimiter?w(e.delimiter)&&(e.delimiter=e.delimiter(s),v.meta.delimiter=e.delimiter):((l=((t,n,r,s,a)=>{var i,l,c,u;a=a||[",","\t","|",";",o.RECORD_SEP,o.UNIT_SEP];for(var d=0;d<a.length;d++){for(var h,p=a[d],f=0,m=0,y=0,v=(c=void 0,new g({comments:s,delimiter:p,newline:n,preview:10}).parse(t)),b=0;b<v.data.length;b++)r&&x(v.data[b])?y++:(m+=h=v.data[b].length,void 0===c?c=h:0<h&&(f+=Math.abs(h-c),c=h));0<v.data.length&&(m/=v.data.length-y),(void 0===l||f<=l)&&(void 0===u||u<m)&&1.99<m&&(l=f,i=p,u=m)}return{successful:!!(e.delimiter=i),bestDelimiter:i}})(s,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess)).successful?e.delimiter=l.bestDelimiter:(r=!0,e.delimiter=o.DefaultDelimiter),v.meta.delimiter=e.delimiter),l=b(e),e.preview&&e.header&&l.preview++,t=s,n=new g(l),v=n.parse(t,a,i),_(),p?{meta:{paused:!0}}:v||{meta:{paused:!1}}},this.paused=function(){return p},this.pause=function(){p=!0,n.abort(),t=w(e.chunk)?"":t.substring(n.getCharIndex())},this.resume=function(){u.streamer._halted?(p=!1,u.streamer.parseChunk(t,!0)):setTimeout(u.resume,3)},this.aborted=function(){return m},this.abort=function(){m=!0,n.abort(),v.meta.aborted=!0,w(e.complete)&&e.complete(v),t=""},this.guessLineEndings=function(e,t){e=e.substring(0,1048576),t=new RegExp(f(t)+"([^]*?)"+f(t),"gm");var n=(e=e.replace(t,"")).split("\r");if(e=1<(t=e.split("\n")).length&&t[0].length<n[0].length,1===n.length||e)return"\n";for(var r=0,s=0;s<n.length;s++)"\n"===n[s][0]&&r++;return r>=n.length/2?"\r\n":"\r"}}function f(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function g(e){var t=(e=e||{}).delimiter,n=e.newline,r=e.comments,s=e.step,a=e.preview,i=e.fastMode,l=null,c=!1,u=null==e.quoteChar?'"':e.quoteChar,d=u;if(void 0!==e.escapeChar&&(d=e.escapeChar),("string"!=typeof t||-1<o.BAD_DELIMITERS.indexOf(t))&&(t=","),r===t)throw new Error("Comment character same as delimiter");!0===r?r="#":("string"!=typeof r||-1<o.BAD_DELIMITERS.indexOf(r))&&(r=!1),"\n"!==n&&"\r"!==n&&"\r\n"!==n&&(n="\n");var h=0,p=!1;this.parse=function(o,g,m){if("string"!=typeof o)throw new Error("Input must be a string");var y=o.length,v=t.length,b=n.length,x=r.length,_=w(s),k=[],S=[],j=[],C=h=0;if(!o)return F();if(i||!1!==i&&-1===o.indexOf(u)){for(var N=o.split(n),E=0;E<N.length;E++){if(j=N[E],h+=j.length,E!==N.length-1)h+=n.length;else if(m)return F();if(!r||j.substring(0,x)!==r){if(_){if(k=[],R(j.split(t)),z(),p)return F()}else R(j.split(t));if(a&&a<=E)return k=k.slice(0,a),F(!0)}}return F()}for(var P=o.indexOf(t,h),T=o.indexOf(n,h),M=new RegExp(f(d)+f(u),"g"),A=o.indexOf(u,h);;)if(o[h]===u)for(A=h,h++;;){if(-1===(A=o.indexOf(u,A+1)))return m||S.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:k.length,index:h}),L();if(A===y-1)return L(o.substring(h,A).replace(M,u));if(u===d&&o[A+1]===d)A++;else if(u===d||0===A||o[A-1]!==d){-1!==P&&P<A+1&&(P=o.indexOf(t,A+1));var O=D(-1===(T=-1!==T&&T<A+1?o.indexOf(n,A+1):T)?P:Math.min(P,T));if(o.substr(A+1+O,v)===t){j.push(o.substring(h,A).replace(M,u)),o[h=A+1+O+v]!==u&&(A=o.indexOf(u,h)),P=o.indexOf(t,h),T=o.indexOf(n,h);break}if(O=D(T),o.substring(A+1+O,A+1+O+b)===n){if(j.push(o.substring(h,A).replace(M,u)),I(A+1+O+b),P=o.indexOf(t,h),A=o.indexOf(u,h),_&&(z(),p))return F();if(a&&k.length>=a)return F(!0);break}S.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:k.length,index:h}),A++}}else if(r&&0===j.length&&o.substring(h,h+x)===r){if(-1===T)return F();h=T+b,T=o.indexOf(n,h),P=o.indexOf(t,h)}else if(-1!==P&&(P<T||-1===T))j.push(o.substring(h,P)),h=P+v,P=o.indexOf(t,h);else{if(-1===T)break;if(j.push(o.substring(h,T)),I(T+b),_&&(z(),p))return F();if(a&&k.length>=a)return F(!0)}return L();function R(e){k.push(e),C=h}function D(e){var t=0;return-1!==e&&(e=o.substring(A+1,e))&&""===e.trim()?e.length:t}function L(e){return m||(void 0===e&&(e=o.substring(h)),j.push(e),h=y,R(j),_&&z()),F()}function I(e){h=e,R(j),j=[],T=o.indexOf(n,h)}function F(r){if(e.header&&!g&&k.length&&!c){var s=k[0],a=Object.create(null),i=new Set(s);let t=!1;for(let n=0;n<s.length;n++){let r=s[n];if(a[r=w(e.transformHeader)?e.transformHeader(r,n):r]){let e,o=a[r];for(;e=r+"_"+o,o++,i.has(e););i.add(e),s[n]=e,a[r]++,t=!0,(l=null===l?{}:l)[e]=r}else a[r]=1,s[n]=r;i.add(r)}t&&console.warn("Duplicate headers found and renamed."),c=!0}return{data:k,errors:S,meta:{delimiter:t,linebreak:n,aborted:p,truncated:!!r,cursor:C+(g||0),renamedHeaders:l}}}function z(){s(F()),k=[],S=[]}},this.abort=function(){p=!0},this.getCharIndex=function(){return h}}function m(e){var t=e.data,n=a[t.workerId],r=!1;if(t.error)n.userError(t.error,t.file);else if(t.results&&t.results.data){var s={abort:function(){r=!0,y(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:v,resume:v};if(w(n.userStep)){for(var i=0;i<t.results.data.length&&(n.userStep({data:t.results.data[i],errors:t.results.errors,meta:t.results.meta},s),!r);i++);delete t.results}else w(n.userChunk)&&(n.userChunk(t.results,s,t.file),delete t.results)}t.finished&&!r&&y(t.workerId,t.results)}function y(e,t){var n=a[e];w(n.userComplete)&&n.userComplete(t),n.terminate(),delete a[e]}function v(){throw new Error("Not implemented.")}function b(e){if("object"!=typeof e||null===e)return e;var t,n=Array.isArray(e)?[]:{};for(t in e)n[t]=b(e[t]);return n}function x(e,t){return function(){e.apply(t,arguments)}}function w(e){return"function"==typeof e}return o.parse=function(t,r){var s=(r=r||{}).dynamicTyping||!1;if(w(s)&&(r.dynamicTypingFunction=s,s={}),r.dynamicTyping=s,r.transform=!!w(r.transform)&&r.transform,!r.worker||!o.WORKERS_SUPPORTED)return s=null,o.NODE_STREAM_INPUT,"string"==typeof t?(t=(e=>65279!==e.charCodeAt(0)?e:e.slice(1))(t),s=new(r.download?c:d)(r)):!0===t.readable&&w(t.read)&&w(t.on)?s=new h(r):(n.File&&t instanceof File||t instanceof Object)&&(s=new u(r)),s.stream(t);(s=(()=>{var t;return!!o.WORKERS_SUPPORTED&&(t=(()=>{var t=n.URL||n.webkitURL||null,r=e.toString();return o.BLOB_URL||(o.BLOB_URL=t.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",r,")();"],{type:"text/javascript"})))})(),(t=new n.Worker(t)).onmessage=m,t.id=i++,a[t.id]=t)})()).userStep=r.step,s.userChunk=r.chunk,s.userComplete=r.complete,s.userError=r.error,r.step=w(r.step),r.chunk=w(r.chunk),r.complete=w(r.complete),r.error=w(r.error),delete r.worker,s.postMessage({input:t,config:r,workerId:s.id})},o.unparse=function(e,t){var n=!1,r=!0,s=",",a="\r\n",i='"',l=i+i,c=!1,u=null,d=!1,h=((()=>{if("object"==typeof t){if("string"!=typeof t.delimiter||o.BAD_DELIMITERS.filter(function(e){return-1!==t.delimiter.indexOf(e)}).length||(s=t.delimiter),"boolean"!=typeof t.quotes&&"function"!=typeof t.quotes&&!Array.isArray(t.quotes)||(n=t.quotes),"boolean"!=typeof t.skipEmptyLines&&"string"!=typeof t.skipEmptyLines||(c=t.skipEmptyLines),"string"==typeof t.newline&&(a=t.newline),"string"==typeof t.quoteChar&&(i=t.quoteChar),"boolean"==typeof t.header&&(r=t.header),Array.isArray(t.columns)){if(0===t.columns.length)throw new Error("Option columns is empty");u=t.columns}void 0!==t.escapeChar&&(l=t.escapeChar+i),t.escapeFormulae instanceof RegExp?d=t.escapeFormulae:"boolean"==typeof t.escapeFormulae&&t.escapeFormulae&&(d=/^[=+\-@\t\r].*$/)}})(),new RegExp(f(i),"g"));if("string"==typeof e&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return p(null,e,c);if("object"==typeof e[0])return p(u||Object.keys(e[0]),e,c)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||u),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:"object"==typeof e.data[0]?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||"object"==typeof e.data[0]||(e.data=[e.data])),p(e.fields||[],e.data||[],c);throw new Error("Unable to serialize unrecognized input");function p(e,t,n){var i="",o=("string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t)),Array.isArray(e)&&0<e.length),l=!Array.isArray(t[0]);if(o&&r){for(var c=0;c<e.length;c++)0<c&&(i+=s),i+=g(e[c],c);0<t.length&&(i+=a)}for(var u=0;u<t.length;u++){var d=(o?e:t[u]).length,h=!1,p=o?0===Object.keys(t[u]).length:0===t[u].length;if(n&&!o&&(h="greedy"===n?""===t[u].join("").trim():1===t[u].length&&0===t[u][0].length),"greedy"===n&&o){for(var f=[],m=0;m<d;m++){var y=l?e[m]:m;f.push(t[u][y])}h=""===f.join("").trim()}if(!h){for(var v=0;v<d;v++){0<v&&!p&&(i+=s);var b=o&&l?e[v]:v;i+=g(t[u][b],v)}u<t.length-1&&(!n||0<d&&!p)&&(i+=a)}}return i}function g(e,t){var r,a;return null==e?"":e.constructor===Date?JSON.stringify(e).slice(1,25):(a=!1,d&&"string"==typeof e&&d.test(e)&&(e="'"+e,a=!0),r=e.toString().replace(h,l),(a=a||!0===n||"function"==typeof n&&n(e,t)||Array.isArray(n)&&n[t]||((e,t)=>{for(var n=0;n<t.length;n++)if(-1<e.indexOf(t[n]))return!0;return!1})(r,o.BAD_DELIMITERS)||-1<r.indexOf(s)||" "===r.charAt(0)||" "===r.charAt(r.length-1))?i+r+i:r)}},o.RECORD_SEP=String.fromCharCode(30),o.UNIT_SEP=String.fromCharCode(31),o.BYTE_ORDER_MARK="\ufeff",o.BAD_DELIMITERS=["\r","\n",'"',o.BYTE_ORDER_MARK],o.WORKERS_SUPPORTED=!r&&!!n.Worker,o.NODE_STREAM_INPUT=1,o.LocalChunkSize=10485760,o.RemoteChunkSize=5242880,o.DefaultDelimiter=",",o.Parser=g,o.ParserHandle=p,o.NetworkStreamer=c,o.FileStreamer=u,o.StringStreamer=d,o.ReadableStreamStreamer=h,n.jQuery&&((t=n.jQuery).fn.parse=function(e){var r=e.config||{},s=[];return this.each(function(e){if("INPUT"!==t(this).prop("tagName").toUpperCase()||"file"!==t(this).attr("type").toLowerCase()||!n.FileReader||!this.files||0===this.files.length)return!0;for(var a=0;a<this.files.length;a++)s.push({file:this.files[a],inputElem:this,instanceConfig:t.extend({},r)})}),a(),this;function a(){if(0===s.length)w(e.complete)&&e.complete();else{var n,r,a,l,c=s[0];if(w(e.before)){var u=e.before(c.file,c.inputElem);if("object"==typeof u){if("abort"===u.action)return n="AbortError",r=c.file,a=c.inputElem,l=u.reason,void(w(e.error)&&e.error({name:n},r,a,l));if("skip"===u.action)return void i();"object"==typeof u.config&&(c.instanceConfig=t.extend(c.instanceConfig,u.config))}else if("skip"===u)return void i()}var d=c.instanceConfig.complete;c.instanceConfig.complete=function(e){w(d)&&d(e,c.file,c.inputElem),i()},o.parse(c.file,c.instanceConfig)}}function i(){s.splice(0,1),a()}}),s&&(n.onmessage=function(e){e=e.data,void 0===o.WORKER_ID&&e&&(o.WORKER_ID=e.workerId),"string"==typeof e.input?n.postMessage({workerId:o.WORKER_ID,results:o.parse(e.input,e.config),finished:!0}):(n.File&&e.input instanceof File||e.input instanceof Object)&&(e=o.parse(e.input,e.config))&&n.postMessage({workerId:o.WORKER_ID,results:e,finished:!0})}),(c.prototype=Object.create(l.prototype)).constructor=c,(u.prototype=Object.create(l.prototype)).constructor=u,(d.prototype=Object.create(d.prototype)).constructor=d,(h.prototype=Object.create(l.prototype)).constructor=h,o},void 0===(s="function"===typeof n?n.apply(t,r):n)||(e.exports=s)},829:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(n(736));t.default=class{constructor(e,t){let{headers:n={},schema:r,fetch:s}=t;this.url=e,this.headers=new Headers(n),this.schema=r,this.fetch=s}select(e){let{head:t=!1,count:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=t?"HEAD":"GET";let a=!1;const i=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!a?"":('"'===e&&(a=!a),e)).join("");return this.url.searchParams.set("select",i),n&&this.headers.append("Prefer","count=".concat(n)),new s.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e){let{count:t,defaultToNull:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r;if(t&&this.headers.append("Prefer","count=".concat(t)),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));this.url.searchParams.set("columns",e.join(","))}}return new s.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(r=this.fetch)&&void 0!==r?r:fetch})}upsert(e){let{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:a=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var i;if(this.headers.append("Prefer","resolution=".concat(n?"ignore":"merge","-duplicates")),void 0!==t&&this.url.searchParams.set("on_conflict",t),r&&this.headers.append("Prefer","count=".concat(r)),a||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));this.url.searchParams.set("columns",e.join(","))}}return new s.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}update(e){let{count:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;return t&&this.headers.append("Prefer","count=".concat(t)),new s.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(n=this.fetch)&&void 0!==n?n:fetch})}delete(){let{count:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;return e&&this.headers.append("Prefer","count=".concat(e)),new s.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(t=this.fetch)&&void 0!==t?t:fetch})}}},853:(e,t,n)=>{"use strict";e.exports=n(234)},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},980:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PostgrestError=t.PostgrestBuilder=t.PostgrestTransformBuilder=t.PostgrestFilterBuilder=t.PostgrestQueryBuilder=t.PostgrestClient=void 0;const s=r(n(210));t.PostgrestClient=s.default;const a=r(n(829));t.PostgrestQueryBuilder=a.default;const i=r(n(736));t.PostgrestFilterBuilder=i.default;const o=r(n(374));t.PostgrestTransformBuilder=o.default;const l=r(n(286));t.PostgrestBuilder=l.default;const c=r(n(611));t.PostgrestError=c.default,t.default={PostgrestClient:s.default,PostgrestQueryBuilder:a.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:l.default,PostgrestError:c.default}}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e=n(43),t=n(391);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function s(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=r(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function a(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){a(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function l(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const u=["color","size","strokeWidth","absoluteStrokeWidth","className","children"],d=(t,n)=>{const r=(0,e.forwardRef)((r,s)=>{let{color:a="currentColor",size:i=24,strokeWidth:d=2,absoluteStrokeWidth:h,className:p="",children:f}=r,g=l(r,u);return(0,e.createElement)("svg",o(o({ref:s},c),{},{width:i,height:i,stroke:a,strokeWidth:h?24*Number(d)/Number(i):d,className:["lucide","lucide-".concat((m=t,m.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim())),p].join(" ")},g),[...n.map(t=>{let[n,r]=t;return(0,e.createElement)(n,r)}),...Array.isArray(f)?f:[f]]);var m});return r.displayName="".concat(t),r},h=d("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),p=d("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),f=d("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),g=d("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),m=d("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),y=d("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),v=d("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),b=d("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);var x=n(579);const w=e=>{let{currentPage:t,setCurrentPage:n}=e;const r=[{id:"dashboard",label:"Dashboard",icon:h},{id:"financials",label:"Financials",icon:p},{id:"analytics",label:"Analytics",icon:f},{id:"csv-management",label:"CSV Management",icon:g},{id:"reports",label:"Reports",icon:m},{id:"properties",label:"Properties",icon:y},{id:"csvs",label:"CSV Upload",icon:v}];return(0,x.jsxs)("div",{className:"w-64 bg-white shadow-lg border-r border-gray-200 flex flex-col h-screen",children:[(0,x.jsx)("div",{className:"p-6",children:(0,x.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,x.jsx)("div",{className:"w-10 h-10 bg-primary-600 rounded-lg flex items-center justify-center",children:(0,x.jsx)(b,{className:"w-6 h-6 text-white"})}),(0,x.jsxs)("div",{children:[(0,x.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Horton Properties"}),(0,x.jsx)("p",{className:"text-sm text-gray-500",children:"Data Dashboard"})]})]})}),(0,x.jsx)("nav",{className:"mt-6 flex-1",children:r.map(e=>{const r=e.icon,s=t===e.id;return(0,x.jsxs)("button",{onClick:()=>n(e.id),className:"w-full flex items-center space-x-3 px-6 py-3 text-left transition-colors duration-200 ".concat(s?"bg-primary-50 text-primary-700 border-r-2 border-primary-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[(0,x.jsx)(r,{className:"w-5 h-5 ".concat(s?"text-primary-600":"text-gray-400")}),(0,x.jsx)("span",{className:"font-medium",children:e.label})]},e.id)})}),(0,x.jsx)("div",{className:"p-6",children:(0,x.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,x.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,x.jsx)("div",{className:"w-8 h-8 bg-primary-600 rounded-full flex items-center justify-center",children:(0,x.jsx)("span",{className:"text-white text-sm font-medium",children:"AH"})}),(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Alex Horton"}),(0,x.jsx)("p",{className:"text-xs text-gray-500",children:"Property Manager"})]})]})})})]})},_=d("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),k=d("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),S=d("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),j=d("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),C=d("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);function N(e){return e+.5|0}const E=(e,t,n)=>Math.max(Math.min(e,n),t);function P(e){return E(N(2.55*e),0,255)}function T(e){return E(N(255*e),0,255)}function M(e){return E(N(e/2.55)/100,0,1)}function A(e){return E(N(100*e),0,100)}const O={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},R=[..."0123456789ABCDEF"],D=e=>R[15&e],L=e=>R[(240&e)>>4]+R[15&e],I=e=>(240&e)>>4===(15&e);function F(e){var t=(e=>I(e.r)&&I(e.g)&&I(e.b)&&I(e.a))(e)?D:L;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const z=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function U(e,t,n){const r=t*Math.min(n,1-n),s=function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return n-r*Math.max(Math.min(s-3,9-s,1),-1)};return[s(0),s(8),s(4)]}function B(e,t,n){const r=function(r){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(r+e/60)%6;return n-n*t*Math.max(Math.min(s,4-s,1),0)};return[r(5),r(3),r(1)]}function V(e,t,n){const r=U(e,1,.5);let s;for(t+n>1&&(s=1/(t+n),t*=s,n*=s),s=0;s<3;s++)r[s]*=1-t-n,r[s]+=t;return r}function W(e){const t=e.r/255,n=e.g/255,r=e.b/255,s=Math.max(t,n,r),a=Math.min(t,n,r),i=(s+a)/2;let o,l,c;return s!==a&&(c=s-a,l=i>.5?c/(2-s-a):c/(s+a),o=function(e,t,n,r,s){return e===s?(t-n)/r+(t<n?6:0):t===s?(n-e)/r+2:(e-t)/r+4}(t,n,r,c,s),o=60*o+.5),[0|o,l||0,i]}function H(e,t,n,r){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,r)).map(T)}function q(e,t,n){return H(U,e,t,n)}function $(e){return(e%360+360)%360}function K(e){const t=z.exec(e);let n,r=255;if(!t)return;t[5]!==n&&(r=t[6]?P(+t[5]):T(+t[5]));const s=$(+t[2]),a=+t[3]/100,i=+t[4]/100;return n="hwb"===t[1]?function(e,t,n){return H(V,e,t,n)}(s,a,i):"hsv"===t[1]?function(e,t,n){return H(B,e,t,n)}(s,a,i):q(s,a,i),{r:n[0],g:n[1],b:n[2],a:r}}const J={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Y={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let G;function Q(e){G||(G=function(){const e={},t=Object.keys(Y),n=Object.keys(J);let r,s,a,i,o;for(r=0;r<t.length;r++){for(i=o=t[r],s=0;s<n.length;s++)a=n[s],o=o.replace(a,J[a]);a=parseInt(Y[i],16),e[o]=[a>>16&255,a>>8&255,255&a]}return e}(),G.transparent=[0,0,0,0]);const t=G[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const X=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const Z=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,ee=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function te(e,t,n){if(e){let r=W(e);r[t]=Math.max(0,Math.min(r[t]+r[t]*n,0===t?360:1)),r=q(r),e.r=r[0],e.g=r[1],e.b=r[2]}}function ne(e,t){return e?Object.assign(t||{},e):e}function re(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=T(e[3]))):(t=ne(e,{r:0,g:0,b:0,a:1})).a=T(t.a),t}function se(e){return"r"===e.charAt(0)?function(e){const t=X.exec(e);let n,r,s,a=255;if(t){if(t[7]!==n){const e=+t[7];a=t[8]?P(e):E(255*e,0,255)}return n=+t[1],r=+t[3],s=+t[5],n=255&(t[2]?P(n):E(n,0,255)),r=255&(t[4]?P(r):E(r,0,255)),s=255&(t[6]?P(s):E(s,0,255)),{r:n,g:r,b:s,a:a}}}(e):K(e)}class ae{constructor(e){if(e instanceof ae)return e;const t=typeof e;let n;"object"===t?n=re(e):"string"===t&&(n=function(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*O[e[1]],g:255&17*O[e[2]],b:255&17*O[e[3]],a:5===n?17*O[e[4]]:255}:7!==n&&9!==n||(t={r:O[e[1]]<<4|O[e[2]],g:O[e[3]]<<4|O[e[4]],b:O[e[5]]<<4|O[e[6]],a:9===n?O[e[7]]<<4|O[e[8]]:255})),t}(e)||Q(e)||se(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=ne(this._rgb);return e&&(e.a=M(e.a)),e}set rgb(e){this._rgb=re(e)}rgbString(){return this._valid?(e=this._rgb)&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(M(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")")):void 0;var e}hexString(){return this._valid?F(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=W(e),n=t[0],r=A(t[1]),s=A(t[2]);return e.a<255?"hsla(".concat(n,", ").concat(r,"%, ").concat(s,"%, ").concat(M(e.a),")"):"hsl(".concat(n,", ").concat(r,"%, ").concat(s,"%)")}(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,r=e.rgb;let s;const a=t===s?.5:t,i=2*a-1,o=n.a-r.a,l=((i*o===-1?i:(i+o)/(1+i*o))+1)/2;s=1-l,n.r=255&l*n.r+s*r.r+.5,n.g=255&l*n.g+s*r.g+.5,n.b=255&l*n.b+s*r.b+.5,n.a=a*n.a+(1-a)*r.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,n){const r=ee(M(e.r)),s=ee(M(e.g)),a=ee(M(e.b));return{r:T(Z(r+n*(ee(M(t.r))-r))),g:T(Z(s+n*(ee(M(t.g))-s))),b:T(Z(a+n*(ee(M(t.b))-a))),a:e.a+n*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new ae(this.rgb)}alpha(e){return this._rgb.a=T(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=N(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return te(this._rgb,2,e),this}darken(e){return te(this._rgb,2,-e),this}saturate(e){return te(this._rgb,1,e),this}desaturate(e){return te(this._rgb,1,-e),this}rotate(e){return function(e,t){var n=W(e);n[0]=$(n[0]+t),n=q(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}function ie(){}const oe=(()=>{let e=0;return()=>e++})();function le(e){return null===e||void 0===e}function ce(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function ue(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function de(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function he(e,t){return de(e)?e:t}function pe(e,t){return"undefined"===typeof e?t:e}const fe=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function ge(e,t,n){if(e&&"function"===typeof e.call)return e.apply(n,t)}function me(e,t,n,r){let s,a,i;if(ce(e))if(a=e.length,r)for(s=a-1;s>=0;s--)t.call(n,e[s],s);else for(s=0;s<a;s++)t.call(n,e[s],s);else if(ue(e))for(i=Object.keys(e),a=i.length,s=0;s<a;s++)t.call(n,e[i[s]],i[s])}function ye(e,t){let n,r,s,a;if(!e||!t||e.length!==t.length)return!1;for(n=0,r=e.length;n<r;++n)if(s=e[n],a=t[n],s.datasetIndex!==a.datasetIndex||s.index!==a.index)return!1;return!0}function ve(e){if(ce(e))return e.map(ve);if(ue(e)){const t=Object.create(null),n=Object.keys(e),r=n.length;let s=0;for(;s<r;++s)t[n[s]]=ve(e[n[s]]);return t}return e}function be(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function xe(e,t,n,r){if(!be(e))return;const s=t[e],a=n[e];ue(s)&&ue(a)?we(s,a,r):t[e]=ve(a)}function we(e,t,n){const r=ce(t)?t:[t],s=r.length;if(!ue(e))return e;const a=(n=n||{}).merger||xe;let i;for(let o=0;o<s;++o){if(i=r[o],!ue(i))continue;const t=Object.keys(i);for(let r=0,s=t.length;r<s;++r)a(t[r],e,i,n)}return e}function _e(e,t){return we(e,t,{merger:ke})}function ke(e,t,n){if(!be(e))return;const r=t[e],s=n[e];ue(r)&&ue(s)?_e(r,s):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=ve(s))}const Se={"":e=>e,x:e=>e.x,y:e=>e.y};function je(e,t){const n=Se[t]||(Se[t]=function(e){const t=function(e){const t=e.split("."),n=[];let r="";for(const s of t)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}(e);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t));return n(e)}function Ce(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Ne=e=>"undefined"!==typeof e,Ee=e=>"function"===typeof e,Pe=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};const Te=Math.PI,Me=2*Te,Ae=Me+Te,Oe=Number.POSITIVE_INFINITY,Re=Te/180,De=Te/2,Le=Te/4,Ie=2*Te/3,Fe=Math.log10,ze=Math.sign;function Ue(e,t,n){return Math.abs(e-t)<n}function Be(e){const t=Math.round(e);e=Ue(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(Fe(e))),r=e/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function Ve(e){return!function(e){return"symbol"===typeof e||"object"===typeof e&&null!==e&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function We(e,t,n){let r,s,a;for(r=0,s=e.length;r<s;r++)a=e[r][n],isNaN(a)||(t.min=Math.min(t.min,a),t.max=Math.max(t.max,a))}function He(e){return e*(Te/180)}function qe(e){return e*(180/Te)}function $e(e){if(!de(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function Ke(e,t){const n=t.x-e.x,r=t.y-e.y,s=Math.sqrt(n*n+r*r);let a=Math.atan2(r,n);return a<-.5*Te&&(a+=Me),{angle:a,distance:s}}function Je(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Ye(e,t){return(e-t+Ae)%Me-Te}function Ge(e){return(e%Me+Me)%Me}function Qe(e,t,n,r){const s=Ge(e),a=Ge(t),i=Ge(n),o=Ge(a-s),l=Ge(i-s),c=Ge(s-a),u=Ge(s-i);return s===a||s===i||r&&a===i||o>l&&c<u}function Xe(e,t,n){return Math.max(t,Math.min(n,e))}function Ze(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,n)-r&&e<=Math.max(t,n)+r}function et(e,t,n){n=n||(n=>e[n]<t);let r,s=e.length-1,a=0;for(;s-a>1;)r=a+s>>1,n(r)?a=r:s=r;return{lo:a,hi:s}}const tt=(e,t,n,r)=>et(e,n,r?r=>{const s=e[r][t];return s<n||s===n&&e[r+1][t]===n}:r=>e[r][t]<n),nt=(e,t,n)=>et(e,n,r=>e[r][t]>=n);const rt=["push","pop","shift","splice","unshift"];function st(e,t){const n=e._chartjs;if(!n)return;const r=n.listeners,s=r.indexOf(t);-1!==s&&r.splice(s,1),r.length>0||(rt.forEach(t=>{delete e[t]}),delete e._chartjs)}function at(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const it="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function ot(e,t){let n=[],r=!1;return function(){for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];n=a,r||(r=!0,it.call(window,()=>{r=!1,e.apply(t,n)}))}}const lt=e=>"start"===e?"left":"end"===e?"right":"center",ct=(e,t,n)=>"start"===e?t:"end"===e?n:(t+n)/2;function ut(e,t,n){const r=t.length;let s=0,a=r;if(e._sorted){const{iScale:i,vScale:o,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,u=i.axis,{min:d,max:h,minDefined:p,maxDefined:f}=i.getUserBounds();if(p){if(s=Math.min(tt(l,u,d).lo,n?r:tt(t,u,i.getPixelForValue(d)).lo),c){const e=l.slice(0,s+1).reverse().findIndex(e=>!le(e[o.axis]));s-=Math.max(0,e)}s=Xe(s,0,r-1)}if(f){let e=Math.max(tt(l,i.axis,h,!0).hi+1,n?0:tt(t,u,i.getPixelForValue(h),!0).hi+1);if(c){const t=l.slice(e-1).findIndex(e=>!le(e[o.axis]));e+=Math.max(0,t)}a=Xe(e,s,r)-s}else a=r-s}return{start:s,count:a}}function dt(e){const{xScale:t,yScale:n,_scaleRanges:r}=e,s={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!r)return e._scaleRanges=s,!0;const a=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,s),a}const ht=e=>0===e||1===e,pt=(e,t,n)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*Me/n),ft=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*Me/n)+1,gt={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*De),easeOutSine:e=>Math.sin(e*De),easeInOutSine:e=>-.5*(Math.cos(Te*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>ht(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>ht(e)?e:pt(e,.075,.3),easeOutElastic:e=>ht(e)?e:ft(e,.075,.3),easeInOutElastic(e){const t=.1125;return ht(e)?e:e<.5?.5*pt(2*e,t,.45):.5+.5*ft(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-gt.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:e=>e<.5?.5*gt.easeInBounce(2*e):.5*gt.easeOutBounce(2*e-1)+.5};function mt(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function yt(e){return mt(e)?e:new ae(e)}function vt(e){return mt(e)?e:new ae(e).saturate(.5).darken(.1).hexString()}const bt=["x","y","borderWidth","radius","tension"],xt=["color","borderColor","backgroundColor"];const wt=new Map;function _t(e,t,n){return function(e,t){t=t||{};const n=e+JSON.stringify(t);let r=wt.get(n);return r||(r=new Intl.NumberFormat(e,t),wt.set(n,r)),r}(t,n).format(e)}const kt={values:e=>ce(e)?e:""+e,numeric(e,t,n){if(0===e)return"0";const r=this.chart.options.locale;let s,a=e;if(n.length>1){const t=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(t<1e-4||t>1e15)&&(s="scientific"),a=function(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}const i=Fe(Math.abs(a)),o=isNaN(i)?1:Math.max(Math.min(-1*Math.floor(i),20),0),l={notation:s,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),_t(e,r,l)},logarithmic(e,t,n){if(0===e)return"0";const r=n[t].significand||e/Math.pow(10,Math.floor(Fe(e)));return[1,2,3,5,10,15].includes(r)||t>.8*n.length?kt.numeric.call(this,e,t,n):""}};var St={formatters:kt};const jt=Object.create(null),Ct=Object.create(null);function Nt(e,t){if(!t)return e;const n=t.split(".");for(let r=0,s=n.length;r<s;++r){const t=n[r];e=e[t]||(e[t]=Object.create(null))}return e}function Et(e,t,n){return"string"===typeof t?we(Nt(e,t),n):we(Nt(e,""),t)}class Pt{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>vt(t.backgroundColor),this.hoverBorderColor=(e,t)=>vt(t.borderColor),this.hoverColor=(e,t)=>vt(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return Et(this,e,t)}get(e){return Nt(this,e)}describe(e,t){return Et(Ct,e,t)}override(e,t){return Et(jt,e,t)}route(e,t,n,r){const s=Nt(this,e),a=Nt(this,n),i="_"+t;Object.defineProperties(s,{[i]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[i],t=a[r];return ue(e)?Object.assign({},t,e):pe(e,t)},set(e){this[i]=e}}})}apply(e){e.forEach(e=>e(this))}}var Tt=new Pt({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:xt},numbers:{type:"number",properties:bt}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:St.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function Mt(e,t,n,r,s){let a=t[s];return a||(a=t[s]=e.measureText(s).width,n.push(s)),a>r&&(r=a),r}function At(e,t,n,r){let s=(r=r||{}).data=r.data||{},a=r.garbageCollect=r.garbageCollect||[];r.font!==t&&(s=r.data={},a=r.garbageCollect=[],r.font=t),e.save(),e.font=t;let i=0;const o=n.length;let l,c,u,d,h;for(l=0;l<o;l++)if(d=n[l],void 0===d||null===d||ce(d)){if(ce(d))for(c=0,u=d.length;c<u;c++)h=d[c],void 0===h||null===h||ce(h)||(i=Mt(e,s,a,i,h))}else i=Mt(e,s,a,i,d);e.restore();const p=a.length/2;if(p>n.length){for(l=0;l<p;l++)delete s[a[l]];a.splice(0,p)}return i}function Ot(e,t,n){const r=e.currentDevicePixelRatio,s=0!==n?Math.max(n/2,.5):0;return Math.round((t-s)*r)/r+s}function Rt(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function Dt(e,t,n,r){Lt(e,t,n,r,null)}function Lt(e,t,n,r,s){let a,i,o,l,c,u,d,h;const p=t.pointStyle,f=t.rotation,g=t.radius;let m=(f||0)*Re;if(p&&"object"===typeof p&&(a=p.toString(),"[object HTMLImageElement]"===a||"[object HTMLCanvasElement]"===a))return e.save(),e.translate(n,r),e.rotate(m),e.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),void e.restore();if(!(isNaN(g)||g<=0)){switch(e.beginPath(),p){default:s?e.ellipse(n,r,s/2,g,0,0,Me):e.arc(n,r,g,0,Me),e.closePath();break;case"triangle":u=s?s/2:g,e.moveTo(n+Math.sin(m)*u,r-Math.cos(m)*g),m+=Ie,e.lineTo(n+Math.sin(m)*u,r-Math.cos(m)*g),m+=Ie,e.lineTo(n+Math.sin(m)*u,r-Math.cos(m)*g),e.closePath();break;case"rectRounded":c=.516*g,l=g-c,i=Math.cos(m+Le)*l,d=Math.cos(m+Le)*(s?s/2-c:l),o=Math.sin(m+Le)*l,h=Math.sin(m+Le)*(s?s/2-c:l),e.arc(n-d,r-o,c,m-Te,m-De),e.arc(n+h,r-i,c,m-De,m),e.arc(n+d,r+o,c,m,m+De),e.arc(n-h,r+i,c,m+De,m+Te),e.closePath();break;case"rect":if(!f){l=Math.SQRT1_2*g,u=s?s/2:l,e.rect(n-u,r-l,2*u,2*l);break}m+=Le;case"rectRot":d=Math.cos(m)*(s?s/2:g),i=Math.cos(m)*g,o=Math.sin(m)*g,h=Math.sin(m)*(s?s/2:g),e.moveTo(n-d,r-o),e.lineTo(n+h,r-i),e.lineTo(n+d,r+o),e.lineTo(n-h,r+i),e.closePath();break;case"crossRot":m+=Le;case"cross":d=Math.cos(m)*(s?s/2:g),i=Math.cos(m)*g,o=Math.sin(m)*g,h=Math.sin(m)*(s?s/2:g),e.moveTo(n-d,r-o),e.lineTo(n+d,r+o),e.moveTo(n+h,r-i),e.lineTo(n-h,r+i);break;case"star":d=Math.cos(m)*(s?s/2:g),i=Math.cos(m)*g,o=Math.sin(m)*g,h=Math.sin(m)*(s?s/2:g),e.moveTo(n-d,r-o),e.lineTo(n+d,r+o),e.moveTo(n+h,r-i),e.lineTo(n-h,r+i),m+=Le,d=Math.cos(m)*(s?s/2:g),i=Math.cos(m)*g,o=Math.sin(m)*g,h=Math.sin(m)*(s?s/2:g),e.moveTo(n-d,r-o),e.lineTo(n+d,r+o),e.moveTo(n+h,r-i),e.lineTo(n-h,r+i);break;case"line":i=s?s/2:Math.cos(m)*g,o=Math.sin(m)*g,e.moveTo(n-i,r-o),e.lineTo(n+i,r+o);break;case"dash":e.moveTo(n,r),e.lineTo(n+Math.cos(m)*(s?s/2:g),r+Math.sin(m)*g);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function It(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function Ft(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function zt(e){e.restore()}function Ut(e,t,n,r,s){if(!t)return e.lineTo(n.x,n.y);if("middle"===s){const r=(t.x+n.x)/2;e.lineTo(r,t.y),e.lineTo(r,n.y)}else"after"===s!==!!r?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function Bt(e,t,n,r){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function Vt(e,t,n,r,s){if(s.strikethrough||s.underline){const a=e.measureText(r),i=t-a.actualBoundingBoxLeft,o=t+a.actualBoundingBoxRight,l=n-a.actualBoundingBoxAscent,c=n+a.actualBoundingBoxDescent,u=s.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=s.decorationWidth||2,e.moveTo(i,u),e.lineTo(o,u),e.stroke()}}function Wt(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function Ht(e,t,n,r,s){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const i=ce(t)?t:[t],o=a.strokeWidth>0&&""!==a.strokeColor;let l,c;for(e.save(),e.font=s.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),le(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,a),l=0;l<i.length;++l)c=i[l],a.backdrop&&Wt(e,a.backdrop),o&&(a.strokeColor&&(e.strokeStyle=a.strokeColor),le(a.strokeWidth)||(e.lineWidth=a.strokeWidth),e.strokeText(c,n,r,a.maxWidth)),e.fillText(c,n,r,a.maxWidth),Vt(e,n,r,c,a),r+=Number(s.lineHeight);e.restore()}function qt(e,t){const{x:n,y:r,w:s,h:a,radius:i}=t;e.arc(n+i.topLeft,r+i.topLeft,i.topLeft,1.5*Te,Te,!0),e.lineTo(n,r+a-i.bottomLeft),e.arc(n+i.bottomLeft,r+a-i.bottomLeft,i.bottomLeft,Te,De,!0),e.lineTo(n+s-i.bottomRight,r+a),e.arc(n+s-i.bottomRight,r+a-i.bottomRight,i.bottomRight,De,0,!0),e.lineTo(n+s,r+i.topRight),e.arc(n+s-i.topRight,r+i.topRight,i.topRight,0,-De,!0),e.lineTo(n+i.topLeft,r)}const $t=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Kt=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Jt(e,t){const n=(""+e).match($t);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}const Yt=e=>+e||0;function Gt(e,t){const n={},r=ue(t),s=r?Object.keys(t):t,a=ue(e)?r?n=>pe(e[n],e[t[n]]):t=>e[t]:()=>e;for(const i of s)n[i]=Yt(a(i));return n}function Qt(e){return Gt(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Xt(e){return Gt(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Zt(e){const t=Qt(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function en(e,t){e=e||{},t=t||Tt.font;let n=pe(e.size,t.size);"string"===typeof n&&(n=parseInt(n,10));let r=pe(e.style,t.style);r&&!(""+r).match(Kt)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:pe(e.family,t.family),lineHeight:Jt(pe(e.lineHeight,t.lineHeight),n),size:n,style:r,weight:pe(e.weight,t.weight),string:""};return s.string=function(e){return!e||le(e.size)||le(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(s),s}function tn(e,t,n,r){let s,a,i,o=!0;for(s=0,a=e.length;s<a;++s)if(i=e[s],void 0!==i&&(void 0!==t&&"function"===typeof i&&(i=i(t),o=!1),void 0!==n&&ce(i)&&(i=i[n%i.length],o=!1),void 0!==i))return r&&!o&&(r.cacheable=!1),i}function nn(e,t){return Object.assign(Object.create(e),t)}function rn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];const s=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof n&&(n=gn("_fallback",e));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:s,_fallback:n,_getTarget:r,override:r=>rn([r,...e],t,s,n)};return new Proxy(a,{deleteProperty:(t,n)=>(delete t[n],delete t._keys,delete e[0][n],!0),get:(n,r)=>cn(n,r,()=>function(e,t,n,r){let s;for(const a of t)if(s=gn(on(a,e),n),"undefined"!==typeof s)return ln(e,s)?pn(n,r,e,s):s}(r,t,e,n)),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>mn(e).includes(t),ownKeys:e=>mn(e),set(e,t,n){const s=e._storage||(e._storage=r());return e[t]=s[t]=n,delete e._keys,!0}})}function sn(e,t,n,r){const s={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:an(e,r),setContext:t=>sn(e,t,n,r),override:s=>sn(e.override(s),t,n,r)};return new Proxy(s,{deleteProperty:(t,n)=>(delete t[n],delete e[n],!0),get:(e,t,n)=>cn(e,t,()=>function(e,t,n){const{_proxy:r,_context:s,_subProxy:a,_descriptors:i}=e;let o=r[t];Ee(o)&&i.isScriptable(t)&&(o=function(e,t,n,r){const{_proxy:s,_context:a,_subProxy:i,_stack:o}=n;if(o.has(e))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+e);o.add(e);let l=t(a,i||r);o.delete(e),ln(e,l)&&(l=pn(s._scopes,s,e,l));return l}(t,o,e,n));ce(o)&&o.length&&(o=function(e,t,n,r){const{_proxy:s,_context:a,_subProxy:i,_descriptors:o}=n;if("undefined"!==typeof a.index&&r(e))return t[a.index%t.length];if(ue(t[0])){const n=t,r=s._scopes.filter(e=>e!==n);t=[];for(const l of n){const n=pn(r,s,e,l);t.push(sn(n,a,i&&i[e],o))}}return t}(t,o,e,i.isIndexable));ln(t,o)&&(o=sn(o,s,a&&a[t],i));return o}(e,t,n)),getOwnPropertyDescriptor:(t,n)=>t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,n)=>Reflect.has(e,n),ownKeys:()=>Reflect.ownKeys(e),set:(t,n,r)=>(e[n]=r,delete t[n],!0)})}function an(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:n=t.scriptable,_indexable:r=t.indexable,_allKeys:s=t.allKeys}=e;return{allKeys:s,scriptable:n,indexable:r,isScriptable:Ee(n)?n:()=>n,isIndexable:Ee(r)?r:()=>r}}const on=(e,t)=>e?e+Ce(t):t,ln=(e,t)=>ue(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function cn(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const r=n();return e[t]=r,r}function un(e,t,n){return Ee(e)?e(t,n):e}const dn=(e,t)=>!0===e?t:"string"===typeof e?je(t,e):void 0;function hn(e,t,n,r,s){for(const a of t){const t=dn(n,a);if(t){e.add(t);const a=un(t._fallback,n,s);if("undefined"!==typeof a&&a!==n&&a!==r)return a}else if(!1===t&&"undefined"!==typeof r&&n!==r)return null}return!1}function pn(e,t,n,r){const s=t._rootScopes,a=un(t._fallback,n,r),i=[...e,...s],o=new Set;o.add(r);let l=fn(o,i,n,a||n,r);return null!==l&&(("undefined"===typeof a||a===n||(l=fn(o,i,a,l,r),null!==l))&&rn(Array.from(o),[""],s,a,()=>function(e,t,n){const r=e._getTarget();t in r||(r[t]={});const s=r[t];if(ce(s)&&ue(n))return n;return s||{}}(t,n,r)))}function fn(e,t,n,r,s){for(;n;)n=hn(e,t,n,r,s);return n}function gn(e,t){for(const n of t){if(!n)continue;const t=n[e];if("undefined"!==typeof t)return t}}function mn(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const n of e)for(const e of Object.keys(n).filter(e=>!e.startsWith("_")))t.add(e);return Array.from(t)}(e._scopes)),t}function yn(e,t,n,r){const{iScale:s}=e,{key:a="r"}=this._parsing,i=new Array(r);let o,l,c,u;for(o=0,l=r;o<l;++o)c=o+n,u=t[c],i[o]={r:s.parse(je(u,a),c)};return i}const vn=Number.EPSILON||1e-14,bn=(e,t)=>t<e.length&&!e[t].skip&&e[t],xn=e=>"x"===e?"y":"x";function wn(e,t,n,r){const s=e.skip?t:e,a=t,i=n.skip?t:n,o=Je(a,s),l=Je(i,a);let c=o/(o+l),u=l/(o+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=r*c,h=r*u;return{previous:{x:a.x-d*(i.x-s.x),y:a.y-d*(i.y-s.y)},next:{x:a.x+h*(i.x-s.x),y:a.y+h*(i.y-s.y)}}}function _n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const n=xn(t),r=e.length,s=Array(r).fill(0),a=Array(r);let i,o,l,c=bn(e,0);for(i=0;i<r;++i)if(o=l,l=c,c=bn(e,i+1),l){if(c){const e=c[t]-l[t];s[i]=0!==e?(c[n]-l[n])/e:0}a[i]=o?c?ze(s[i-1])!==ze(s[i])?0:(s[i-1]+s[i])/2:s[i-1]:s[i]}!function(e,t,n){const r=e.length;let s,a,i,o,l,c=bn(e,0);for(let u=0;u<r-1;++u)l=c,c=bn(e,u+1),l&&c&&(Ue(t[u],0,vn)?n[u]=n[u+1]=0:(s=n[u]/t[u],a=n[u+1]/t[u],o=Math.pow(s,2)+Math.pow(a,2),o<=9||(i=3/Math.sqrt(o),n[u]=s*i*t[u],n[u+1]=a*i*t[u])))}(e,s,a),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const r=xn(n),s=e.length;let a,i,o,l=bn(e,0);for(let c=0;c<s;++c){if(i=o,o=l,l=bn(e,c+1),!o)continue;const s=o[n],u=o[r];i&&(a=(s-i[n])/3,o["cp1".concat(n)]=s-a,o["cp1".concat(r)]=u-a*t[c]),l&&(a=(l[n]-s)/3,o["cp2".concat(n)]=s+a,o["cp2".concat(r)]=u+a*t[c])}}(e,a,t)}function kn(e,t,n){return Math.max(Math.min(e,n),t)}function Sn(e,t,n,r,s){let a,i,o,l;if(t.spanGaps&&(e=e.filter(e=>!e.skip)),"monotone"===t.cubicInterpolationMode)_n(e,s);else{let n=r?e[e.length-1]:e[0];for(a=0,i=e.length;a<i;++a)o=e[a],l=wn(n,o,e[Math.min(a+1,i-(r?0:1))%i],t.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,n=o}t.capBezierPoints&&function(e,t){let n,r,s,a,i,o=It(e[0],t);for(n=0,r=e.length;n<r;++n)i=a,a=o,o=n<r-1&&It(e[n+1],t),a&&(s=e[n],i&&(s.cp1x=kn(s.cp1x,t.left,t.right),s.cp1y=kn(s.cp1y,t.top,t.bottom)),o&&(s.cp2x=kn(s.cp2x,t.left,t.right),s.cp2y=kn(s.cp2y,t.top,t.bottom)))}(e,n)}function jn(){return"undefined"!==typeof window&&"undefined"!==typeof document}function Cn(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function Nn(e,t,n){let r;return"string"===typeof e?(r=parseInt(e,10),-1!==e.indexOf("%")&&(r=r/100*t.parentNode[n])):r=e,r}const En=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const Pn=["top","right","bottom","left"];function Tn(e,t,n){const r={};n=n?"-"+n:"";for(let s=0;s<4;s++){const a=Pn[s];r[a]=parseFloat(e[t+"-"+a+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}function Mn(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:r}=t,s=En(n),a="border-box"===s.boxSizing,i=Tn(s,"padding"),o=Tn(s,"border","width"),{x:l,y:c,box:u}=function(e,t){const n=e.touches,r=n&&n.length?n[0]:e,{offsetX:s,offsetY:a}=r;let i,o,l=!1;if(((e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot))(s,a,e.target))i=s,o=a;else{const e=t.getBoundingClientRect();i=r.clientX-e.left,o=r.clientY-e.top,l=!0}return{x:i,y:o,box:l}}(e,n),d=i.left+(u&&o.left),h=i.top+(u&&o.top);let{width:p,height:f}=t;return a&&(p-=i.width+o.width,f-=i.height+o.height),{x:Math.round((l-d)/p*n.width/r),y:Math.round((c-h)/f*n.height/r)}}const An=e=>Math.round(10*e)/10;function On(e,t,n,r){const s=En(e),a=Tn(s,"margin"),i=Nn(s.maxWidth,e,"clientWidth")||Oe,o=Nn(s.maxHeight,e,"clientHeight")||Oe,l=function(e,t,n){let r,s;if(void 0===t||void 0===n){const a=e&&Cn(e);if(a){const e=a.getBoundingClientRect(),i=En(a),o=Tn(i,"border","width"),l=Tn(i,"padding");t=e.width-l.width-o.width,n=e.height-l.height-o.height,r=Nn(i.maxWidth,a,"clientWidth"),s=Nn(i.maxHeight,a,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:r||Oe,maxHeight:s||Oe}}(e,t,n);let{width:c,height:u}=l;if("content-box"===s.boxSizing){const e=Tn(s,"border","width"),t=Tn(s,"padding");c-=t.width+e.width,u-=t.height+e.height}c=Math.max(0,c-a.width),u=Math.max(0,r?c/r:u-a.height),c=An(Math.min(c,i,l.maxWidth)),u=An(Math.min(u,o,l.maxHeight)),c&&!u&&(u=An(c/2));return(void 0!==t||void 0!==n)&&r&&l.height&&u>l.height&&(u=l.height,c=An(Math.floor(u*r))),{width:c,height:u}}function Rn(e,t,n){const r=t||1,s=Math.floor(e.height*r),a=Math.floor(e.width*r);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const i=e.canvas;return i.style&&(n||!i.style.height&&!i.style.width)&&(i.style.height="".concat(e.height,"px"),i.style.width="".concat(e.width,"px")),(e.currentDevicePixelRatio!==r||i.height!==s||i.width!==a)&&(e.currentDevicePixelRatio=r,i.height=s,i.width=a,e.ctx.setTransform(r,0,0,r,0,0),!0)}const Dn=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};jn()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(t){}return e}();function Ln(e,t){const n=function(e,t){return En(e).getPropertyValue(t)}(e,t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function In(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function Fn(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:"middle"===r?n<.5?e.y:t.y:"after"===r?n<1?e.y:t.y:n>0?t.y:e.y}}function zn(e,t,n,r){const s={x:e.cp2x,y:e.cp2y},a={x:t.cp1x,y:t.cp1y},i=In(e,s,n),o=In(s,a,n),l=In(a,t,n),c=In(i,o,n),u=In(o,l,n);return In(c,u,n)}function Un(e,t,n){return e?function(e,t){return{x:n=>e+e+t-n,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,n):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function Bn(e,t){let n,r;"ltr"!==t&&"rtl"!==t||(n=e.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=r)}function Vn(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function Wn(e){return"angle"===e?{between:Qe,compare:Ye,normalize:Ge}:{between:Ze,compare:(e,t)=>e-t,normalize:e=>e}}function Hn(e){let{start:t,end:n,count:r,loop:s,style:a}=e;return{start:t%r,end:n%r,loop:s&&(n-t+1)%r===0,style:a}}function qn(e,t,n){if(!n)return[e];const{property:r,start:s,end:a}=n,i=t.length,{compare:o,between:l,normalize:c}=Wn(r),{start:u,end:d,loop:h,style:p}=function(e,t,n){const{property:r,start:s,end:a}=n,{between:i,normalize:o}=Wn(r),l=t.length;let c,u,{start:d,end:h,loop:p}=e;if(p){for(d+=l,h+=l,c=0,u=l;c<u&&i(o(t[d%l][r]),s,a);++c)d--,h--;d%=l,h%=l}return h<d&&(h+=l),{start:d,end:h,loop:p,style:e.style}}(e,t,n),f=[];let g,m,y,v=!1,b=null;const x=()=>v||l(s,y,g)&&0!==o(s,y),w=()=>!v||0===o(a,g)||l(a,y,g);for(let _=u,k=u;_<=d;++_)m=t[_%i],m.skip||(g=c(m[r]),g!==y&&(v=l(g,s,a),null===b&&x()&&(b=0===o(g,s)?_:k),null!==b&&w()&&(f.push(Hn({start:b,end:_,loop:h,count:i,style:p})),b=null),k=_,y=g));return null!==b&&f.push(Hn({start:b,end:d,loop:h,count:i,style:p})),f}function $n(e,t){const n=[],r=e.segments;for(let s=0;s<r.length;s++){const a=qn(r[s],e.points,t);a.length&&n.push(...a)}return n}function Kn(e,t,n,r){return r&&r.setContext&&n?function(e,t,n,r){const s=e._chart.getContext(),a=Jn(e.options),{_datasetIndex:i,options:{spanGaps:o}}=e,l=n.length,c=[];let u=a,d=t[0].start,h=d;function p(e,t,r,s){const a=o?-1:1;if(e!==t){for(e+=l;n[e%l].skip;)e-=a;for(;n[t%l].skip;)t+=a;e%l!==t%l&&(c.push({start:e%l,end:t%l,loop:r,style:s}),u=s,d=t%l)}}for(const f of t){d=o?d:f.start;let e,t=n[d%l];for(h=d+1;h<=f.end;h++){const a=n[h%l];e=Jn(r.setContext(nn(s,{type:"segment",p0:t,p1:a,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:i}))),Yn(e,u)&&p(d,h-1,f.loop,u),t=a,u=e}d<h-1&&p(d,h-1,f.loop,u)}return c}(e,t,n,r):t}function Jn(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function Yn(e,t){if(!t)return!1;const n=[],r=function(e,t){return mt(t)?(n.includes(t)||n.push(t),n.indexOf(t)):t};return JSON.stringify(e,r)!==JSON.stringify(t,r)}function Gn(e,t,n){return e.options.clip?e[n]:t[n]}function Qn(e,t){const n=t._clip;if(n.disabled)return!1;const r=function(e,t){const{xScale:n,yScale:r}=e;return n&&r?{left:Gn(n,t,"left"),right:Gn(n,t,"right"),top:Gn(r,t,"top"),bottom:Gn(r,t,"bottom")}:t}(t,e.chartArea);return{left:!1===n.left?0:r.left-(!0===n.left?0:n.left),right:!1===n.right?e.width:r.right+(!0===n.right?0:n.right),top:!1===n.top?0:r.top-(!0===n.top?0:n.top),bottom:!1===n.bottom?e.height:r.bottom+(!0===n.bottom?0:n.bottom)}}class Xn{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,r){const s=t.listeners[r],a=t.duration;s.forEach(r=>r({chart:e,initial:t.initial,numSteps:a,currentStep:Math.min(n-t.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=it.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach((n,r)=>{if(!n.running||!n.items.length)return;const s=n.items;let a,i=s.length-1,o=!1;for(;i>=0;--i)a=s[i],a._active?(a._total>n.duration&&(n.duration=a._total),a.tick(e),o=!0):(s[i]=s[s.length-1],s.pop());o&&(r.draw(),this._notify(r,n,e,"progress")),s.length||(n.running=!1,this._notify(r,n,e,"complete"),n.initial=!1),t+=s.length}),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((e,t)=>Math.max(e,t._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Zn=new Xn;const er="transparent",tr={boolean:(e,t,n)=>n>.5?t:e,color(e,t,n){const r=yt(e||er),s=r.valid&&yt(t||er);return s&&s.valid?s.mix(r,n).hexString():t},number:(e,t,n)=>e+(t-e)*n};class nr{constructor(e,t,n,r){const s=t[n];r=tn([e.to,r,s,e.from]);const a=tn([e.from,s,r]);this._active=!0,this._fn=e.fn||tr[e.type||typeof a],this._easing=gt[e.easing]||gt.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=a,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const r=this._target[this._prop],s=n-this._start,a=this._duration-s;this._start=n,this._duration=Math.floor(Math.max(a,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=tn([e.to,t,r,e.from]),this._from=tn([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,r=this._prop,s=this._from,a=this._loop,i=this._to;let o;if(this._active=s!==i&&(a||t<n),!this._active)return this._target[r]=i,void this._notify(!0);t<0?this._target[r]=s:(o=t/n%2,o=a&&o>1?2-o:o,o=this._easing(Math.min(1,Math.max(0,o))),this._target[r]=this._fn(s,i,o))}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,n)=>{e.push({res:t,rej:n})})}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][t]()}}class rr{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!ue(e))return;const t=Object.keys(Tt.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const s=e[r];if(!ue(s))return;const a={};for(const e of t)a[e]=s[e];(ce(s.properties)&&s.properties||[r]).forEach(e=>{e!==r&&n.has(e)||n.set(e,a)})})}_animateOptions(e,t){const n=t.options,r=function(e,t){if(!t)return;let n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!r)return[];const s=this._createAnimations(r,n);return n.$shared&&function(e,t){const n=[],r=Object.keys(t);for(let s=0;s<r.length;s++){const t=e[r[s]];t&&t.active()&&n.push(t.wait())}return Promise.all(n)}(e.options.$animations,n).then(()=>{e.options=n},()=>{}),s}_createAnimations(e,t){const n=this._properties,r=[],s=e.$animations||(e.$animations={}),a=Object.keys(t),i=Date.now();let o;for(o=a.length-1;o>=0;--o){const l=a[o];if("$"===l.charAt(0))continue;if("options"===l){r.push(...this._animateOptions(e,t));continue}const c=t[l];let u=s[l];const d=n.get(l);if(u){if(d&&u.active()){u.update(d,c,i);continue}u.cancel()}d&&d.duration?(s[l]=u=new nr(d,e,l,c),r.push(u)):e[l]=c}return r}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const n=this._createAnimations(e,t);return n.length?(Zn.add(this._chart,n),!0):void 0}}function sr(e,t){const n=e&&e.options||{},r=n.reverse,s=void 0===n.min?t:0,a=void 0===n.max?t:0;return{start:r?a:s,end:r?s:a}}function ar(e,t){const n=[],r=e._getSortedDatasetMetas(t);let s,a;for(s=0,a=r.length;s<a;++s)n.push(r[s].index);return n}function ir(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const s=e.keys,a="single"===r.mode;let i,o,l,c;if(null===t)return;let u=!1;for(i=0,o=s.length;i<o;++i){if(l=+s[i],l===n){if(u=!0,r.all)continue;break}c=e.values[l],de(c)&&(a||0===t||ze(t)===ze(c))&&(t+=c)}return u||r.all?t:0}function or(e,t){const n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function lr(e,t,n){const r=e[t]||(e[t]={});return r[n]||(r[n]={})}function cr(e,t,n,r){for(const s of t.getMatchingVisibleMetas(r).reverse()){const t=e[s.index];if(n&&t>0||!n&&t<0)return s.index}return null}function ur(e,t){const{chart:n,_cachedMeta:r}=e,s=n._stacks||(n._stacks={}),{iScale:a,vScale:i,index:o}=r,l=a.axis,c=i.axis,u=function(e,t,n){return"".concat(e.id,".").concat(t.id,".").concat(n.stack||n.type)}(a,i,r),d=t.length;let h;for(let p=0;p<d;++p){const e=t[p],{[l]:n,[c]:a}=e;h=(e._stacks||(e._stacks={}))[c]=lr(s,u,n),h[o]=a,h._top=cr(h,i,!0,r.type),h._bottom=cr(h,i,!1,r.type);(h._visualValues||(h._visualValues={}))[o]=a}}function dr(e,t){const n=e.scales;return Object.keys(n).filter(e=>n[e].axis===t).shift()}function hr(e,t){const n=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[r]||void 0===t[r][n])return;delete t[r][n],void 0!==t[r]._visualValues&&void 0!==t[r]._visualValues[n]&&delete t[r]._visualValues[n]}}}const pr=e=>"reset"===e||"none"===e,fr=(e,t)=>t?e:Object.assign({},e);class gr{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=or(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&hr(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),r=(e,t,n,r)=>"x"===e?t:"r"===e?r:n,s=t.xAxisID=pe(n.xAxisID,dr(e,"x")),a=t.yAxisID=pe(n.yAxisID,dr(e,"y")),i=t.rAxisID=pe(n.rAxisID,dr(e,"r")),o=t.indexAxis,l=t.iAxisID=r(o,s,a,i),c=t.vAxisID=r(o,a,s,i);t.xScale=this.getScaleForId(s),t.yScale=this.getScaleForId(a),t.rScale=this.getScaleForId(i),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&st(this._data,this),e._stacked&&hr(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(ue(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:n,vScale:r}=t,s="x"===n.axis?"x":"y",a="x"===r.axis?"x":"y",i=Object.keys(e),o=new Array(i.length);let l,c,u;for(l=0,c=i.length;l<c;++l)u=i[l],o[l]={[s]:u,[a]:e[u]};return o}(t,e)}else if(n!==t){if(n){st(n,this);const e=this._cachedMeta;hr(e),e._parsed=[]}t&&Object.isExtensible(t)&&(s=this,(r=t)._chartjs?r._chartjs.listeners.push(s):(Object.defineProperty(r,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[s]}}),rt.forEach(e=>{const t="_onData"+Ce(e),n=r[e];Object.defineProperty(r,e,{configurable:!0,enumerable:!1,value(){for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];const i=n.apply(this,s);return r._chartjs.listeners.forEach(e=>{"function"===typeof e[t]&&e[t](...s)}),i}})}))),this._syncList=[],this._data=t}var r,s}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const s=t._stacked;t._stacked=or(t.vScale,t),t.stack!==n.stack&&(r=!0,hr(t),t.stack=n.stack),this._resyncElements(e),(r||s!==t._stacked)&&(ur(this,t._parsed),t._stacked=or(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:r}=this,{iScale:s,_stacked:a}=n,i=s.axis;let o,l,c,u=0===e&&t===r.length||n._sorted,d=e>0&&n._parsed[e-1];if(!1===this._parsing)n._parsed=r,n._sorted=!0,c=r;else{c=ce(r[e])?this.parseArrayData(n,r,e,t):ue(r[e])?this.parseObjectData(n,r,e,t):this.parsePrimitiveData(n,r,e,t);const s=()=>null===l[i]||d&&l[i]<d[i];for(o=0;o<t;++o)n._parsed[o+e]=l=c[o],u&&(s()&&(u=!1),d=l);n._sorted=u}a&&ur(this,c)}parsePrimitiveData(e,t,n,r){const{iScale:s,vScale:a}=e,i=s.axis,o=a.axis,l=s.getLabels(),c=s===a,u=new Array(r);let d,h,p;for(d=0,h=r;d<h;++d)p=d+n,u[d]={[i]:c||s.parse(l[p],p),[o]:a.parse(t[p],p)};return u}parseArrayData(e,t,n,r){const{xScale:s,yScale:a}=e,i=new Array(r);let o,l,c,u;for(o=0,l=r;o<l;++o)c=o+n,u=t[c],i[o]={x:s.parse(u[0],c),y:a.parse(u[1],c)};return i}parseObjectData(e,t,n,r){const{xScale:s,yScale:a}=e,{xAxisKey:i="x",yAxisKey:o="y"}=this._parsing,l=new Array(r);let c,u,d,h;for(c=0,u=r;c<u;++c)d=c+n,h=t[d],l[c]={x:s.parse(je(h,i),d),y:a.parse(je(h,o),d)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const r=this.chart,s=this._cachedMeta,a=t[e.axis];return ir({keys:ar(r,!0),values:t._stacks[e.axis]._visualValues},a,s.index,{mode:n})}updateRangeFromParsed(e,t,n,r){const s=n[t.axis];let a=null===s?NaN:s;const i=r&&n._stacks[t.axis];r&&i&&(r.values=i,a=ir(r,s,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,t){const n=this._cachedMeta,r=n._parsed,s=n._sorted&&e===n.iScale,a=r.length,i=this._getOtherScale(e),o=((e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:ar(n,!0),values:null})(t,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=function(e){const{min:t,max:n,minDefined:r,maxDefined:s}=e.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}(i);let d,h;function p(){h=r[d];const t=h[i.axis];return!de(h[e.axis])||c>t||u<t}for(d=0;d<a&&(p()||(this.updateRangeFromParsed(l,e,h,o),!s));++d);if(s)for(d=a-1;d>=0;--d)if(!p()){this.updateRangeFromParsed(l,e,h,o);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let r,s,a;for(r=0,s=t.length;r<s;++r)a=t[r][e.axis],de(a)&&n.push(a);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,r=t.vScale,s=this.getParsed(e);return{label:n?""+n.getLabelForValue(s[n.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,n,r,s;return ue(e)?(t=e.top,n=e.right,r=e.bottom,s=e.left):t=n=r=s=e,{top:t,right:n,bottom:r,left:s,disabled:!1===e}}(pe(this.options.clip,function(e,t,n){if(!1===n)return!1;const r=sr(e,n),s=sr(t,n);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,r=n.data||[],s=t.chartArea,a=[],i=this._drawStart||0,o=this._drawCount||r.length-i,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(e,s,i,o),c=i;c<i+o;++c){const t=r[c];t.hidden||(t.active&&l?a.push(t):t.draw(e,s))}for(c=0;c<a.length;++c)a[c].draw(e,s)}getStyle(e,t){const n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const r=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];s=t.$context||(t.$context=function(e,t,n){return nn(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),s.parsed=this.getParsed(e),s.raw=r.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=function(e,t){return nn(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!t,s.mode=n,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;const r="active"===t,s=this._cachedDataOpts,a=e+"-"+t,i=s[a],o=this.enableOptionSharing&&Ne(n);if(i)return fr(i,o);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),u=r?["".concat(e,"Hover"),"hover",e,""]:[e,""],d=l.getOptionScopes(this.getDataset(),c),h=Object.keys(Tt.elements[e]),p=l.resolveNamedOptions(d,h,()=>this.getContext(n,r,t),u);return p.$shared&&(p.$shared=o,s[a]=Object.freeze(fr(p,o))),p}_resolveAnimations(e,t,n){const r=this.chart,s=this._cachedDataOpts,a="animation-".concat(t),i=s[a];if(i)return i;let o;if(!1!==r.options.animation){const r=this.chart.config,s=r.datasetAnimationScopeKeys(this._type,t),a=r.getOptionScopes(this.getDataset(),s);o=r.createResolver(a,this.getContext(e,n,t))}const l=new rr(r,o&&o.animations);return o&&o._cacheable&&(s[a]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||pr(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),r=this._sharedOptions,s=this.getSharedOptions(n),a=this.includeOptions(t,s)||s!==r;return this.updateSharedOptions(s,t,n),{sharedOptions:s,includeOptions:a}}updateElement(e,t,n,r){pr(r)?Object.assign(e,n):this._resolveAnimations(t,r).update(e,n)}updateSharedOptions(e,t,n){e&&!pr(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,r){e.active=r;const s=this.getStyle(t,r);this._resolveAnimations(t,n,r).update(e,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[i,o,l]of this._syncList)this[i](o,l);this._syncList=[];const r=n.length,s=t.length,a=Math.min(s,r);a&&this.parse(0,a),s>r?this._insertElements(r,s-r,e):s<r&&this._removeElements(s,r-s)}_insertElements(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=this._cachedMeta,s=r.data,a=e+t;let i;const o=e=>{for(e.length+=t,i=e.length-1;i>=a;i--)e[i]=e[i-t]};for(o(s),i=e;i<a;++i)s[i]=new this.dataElementType;this._parsing&&o(r._parsed),this.parse(e,t),n&&this.updateElements(s,e,t,"reset")}updateElements(e,t,n,r){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(e,t);n._stacked&&hr(n,r)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,r]=e;this[t](n,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function mr(e){const t=e.iScale,n=function(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let r=[];for(let t=0,s=n.length;t<s;t++)r=r.concat(n[t].controller.getAllParsedValues(e));e._cache.$bar=at(r.sort((e,t)=>e-t))}return e._cache.$bar}(t,e.type);let r,s,a,i,o=t._length;const l=()=>{32767!==a&&-32768!==a&&(Ne(i)&&(o=Math.min(o,Math.abs(a-i)||o)),i=a)};for(r=0,s=n.length;r<s;++r)a=t.getPixelForValue(n[r]),l();for(i=void 0,r=0,s=t.ticks.length;r<s;++r)a=t.getPixelForTick(r),l();return o}function yr(e,t,n,r){return ce(e)?function(e,t,n,r){const s=n.parse(e[0],r),a=n.parse(e[1],r),i=Math.min(s,a),o=Math.max(s,a);let l=i,c=o;Math.abs(i)>Math.abs(o)&&(l=o,c=i),t[n.axis]=c,t._custom={barStart:l,barEnd:c,start:s,end:a,min:i,max:o}}(e,t,n,r):t[n.axis]=n.parse(e,r),t}function vr(e,t,n,r){const s=e.iScale,a=e.vScale,i=s.getLabels(),o=s===a,l=[];let c,u,d,h;for(c=n,u=n+r;c<u;++c)h=t[c],d={},d[s.axis]=o||s.parse(i[c],c),l.push(yr(h,d,a,c));return l}function br(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function xr(e,t,n,r){let s=t.borderSkipped;const a={};if(!s)return void(e.borderSkipped=a);if(!0===s)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:i,end:o,reverse:l,top:c,bottom:u}=function(e){let t,n,r,s,a;return e.horizontal?(t=e.base>e.x,n="left",r="right"):(t=e.base<e.y,n="bottom",r="top"),t?(s="end",a="start"):(s="start",a="end"),{start:n,end:r,reverse:t,top:s,bottom:a}}(e);"middle"===s&&n&&(e.enableBorderRadius=!0,(n._top||0)===r?s=c:(n._bottom||0)===r?s=u:(a[wr(u,i,o,l)]=!0,s=c)),a[wr(s,i,o,l)]=!0,e.borderSkipped=a}function wr(e,t,n,r){var s,a,i;return r?(i=n,e=_r(e=(s=e)===(a=t)?i:s===i?a:s,n,t)):e=_r(e,t,n),e}function _r(e,t,n){return"start"===e?t:"end"===e?n:e}function kr(e,t,n){let{inflateAmount:r}=t;e.inflateAmount="auto"===r?1===n?.33:0:r}a(gr,"defaults",{}),a(gr,"datasetElementType",null),a(gr,"dataElementType",null);class Sr extends gr{parsePrimitiveData(e,t,n,r){return vr(e,t,n,r)}parseArrayData(e,t,n,r){return vr(e,t,n,r)}parseObjectData(e,t,n,r){const{iScale:s,vScale:a}=e,{xAxisKey:i="x",yAxisKey:o="y"}=this._parsing,l="x"===s.axis?i:o,c="x"===a.axis?i:o,u=[];let d,h,p,f;for(d=n,h=n+r;d<h;++d)f=t[d],p={},p[s.axis]=s.parse(je(f,l),d),u.push(yr(je(f,c),p,a,d));return u}updateRangeFromParsed(e,t,n,r){super.updateRangeFromParsed(e,t,n,r);const s=n._custom;s&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:n,vScale:r}=t,s=this.getParsed(e),a=s._custom,i=br(a)?"["+a.start+", "+a.end+"]":""+r.getLabelForValue(s[r.axis]);return{label:""+n.getLabelForValue(s[n.axis]),value:i}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,n,r){const s="reset"===r,{index:a,_cachedMeta:{vScale:i}}=this,o=i.getBasePixel(),l=i.isHorizontal(),c=this._getRuler(),{sharedOptions:u,includeOptions:d}=this._getSharedOptions(t,r);for(let h=t;h<t+n;h++){const t=this.getParsed(h),n=s||le(t[i.axis])?{base:o,head:o}:this._calculateBarValuePixels(h),p=this._calculateBarIndexPixels(h,c),f=(t._stacks||{})[i.axis],g={horizontal:l,base:n.base,enableBorderRadius:!f||br(t._custom)||a===f._top||a===f._bottom,x:l?n.head:p.center,y:l?p.center:n.head,height:l?p.size:Math.abs(n.size),width:l?Math.abs(n.size):p.size};d&&(g.options=u||this.resolveDataElementOptions(h,e[h].active?"active":r));const m=g.options||e[h].options;xr(g,m,f,a),kr(g,m,c.ratio),this.updateElement(e[h],h,g,r)}}_getStacks(e,t){const{iScale:n}=this._cachedMeta,r=n.getMatchingVisibleMetas(this._type).filter(e=>e.controller.options.grouped),s=n.options.stacked,a=[],i=this._cachedMeta.controller.getParsed(t),o=i&&i[n.axis],l=e=>{const t=e._parsed.find(e=>e[n.axis]===o),r=t&&t[e.vScale.axis];if(le(r)||isNaN(r))return!0};for(const c of r)if((void 0===t||!l(c))&&((!1===s||-1===a.indexOf(c.stack)||void 0===s&&void 0===c.stack)&&a.push(c.stack),c.index===e))break;return a.length||a.push(void 0),a}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(n=>e[n].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)e[pe("x"===this.chart.options.indexAxis?n.xAxisID:n.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,n){const r=this._getStacks(e,n),s=void 0!==t?r.indexOf(t):-1;return-1===s?r.length-1:s}_getRuler(){const e=this.options,t=this._cachedMeta,n=t.iScale,r=[];let s,a;for(s=0,a=t.data.length;s<a;++s)r.push(n.getPixelForValue(this.getParsed(s)[n.axis],s));const i=e.barThickness;return{min:i||mr(t),pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:i?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:n,index:r},options:{base:s,minBarLength:a}}=this,i=s||0,o=this.getParsed(e),l=o._custom,c=br(l);let u,d,h=o[t.axis],p=0,f=n?this.applyStack(t,o,n):h;f!==h&&(p=f-h,f=h),c&&(h=l.barStart,f=l.barEnd-l.barStart,0!==h&&ze(h)!==ze(l.barEnd)&&(p=0),p+=h);const g=le(s)||c?p:s;let m=t.getPixelForValue(g);if(u=this.chart.getDataVisibility(e)?t.getPixelForValue(p+f):m,d=u-m,Math.abs(d)<a){d=function(e,t,n){return 0!==e?ze(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}(d,t,i)*a,h===i&&(m-=d/2);const e=t.getPixelForDecimal(0),s=t.getPixelForDecimal(1),l=Math.min(e,s),p=Math.max(e,s);m=Math.max(Math.min(m,p),l),u=m+d,n&&!c&&(o._stacks[t.axis]._visualValues[r]=t.getValueForPixel(u)-t.getValueForPixel(m))}if(m===t.getPixelForValue(i)){const e=ze(d)*t.getLineWidthForValue(i)/2;m+=e,d-=e}return{size:d,base:m,head:u,center:u+d/2}}_calculateBarIndexPixels(e,t){const n=t.scale,r=this.options,s=r.skipNull,a=pe(r.maxBarThickness,1/0);let i,o;const l=this._getAxisCount();if(t.grouped){const n=s?this._getStackCount(e):t.stackCount,c="flex"===r.barThickness?function(e,t,n,r){const s=t.pixels,a=s[e];let i=e>0?s[e-1]:null,o=e<s.length-1?s[e+1]:null;const l=n.categoryPercentage;null===i&&(i=a-(null===o?t.end-t.start:o-a)),null===o&&(o=a+a-i);const c=a-(a-Math.min(i,o))/2*l;return{chunk:Math.abs(o-i)/2*l/r,ratio:n.barPercentage,start:c}}(e,t,r,n*l):function(e,t,n,r){const s=n.barThickness;let a,i;return le(s)?(a=t.min*n.categoryPercentage,i=n.barPercentage):(a=s*r,i=1),{chunk:a/r,ratio:i,start:t.pixels[e]-a/2}}(e,t,r,n*l),u="x"===this.chart.options.indexAxis?this.getDataset().xAxisID:this.getDataset().yAxisID,d=this._getAxis().indexOf(pe(u,this.getFirstScaleIdForIndexAxis())),h=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0)+d;i=c.start+c.chunk*h+c.chunk/2,o=Math.min(a,c.chunk*c.ratio)}else i=n.getPixelForValue(this.getParsed(e)[n.axis],e),o=Math.min(a,t.min*t.ratio);return{base:i-o/2,head:i+o/2,center:i,size:o}}draw(){const e=this._cachedMeta,t=e.vScale,n=e.data,r=n.length;let s=0;for(;s<r;++s)null===this.getParsed(s)[t.axis]||n[s].hidden||n[s].draw(this._ctx)}}a(Sr,"id","bar"),a(Sr,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),a(Sr,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class jr extends gr{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,n,r){const s=super.parsePrimitiveData(e,t,n,r);for(let a=0;a<s.length;a++)s[a]._custom=this.resolveDataElementOptions(a+n).radius;return s}parseArrayData(e,t,n,r){const s=super.parseArrayData(e,t,n,r);for(let a=0;a<s.length;a++){const e=t[n+a];s[a]._custom=pe(e[2],this.resolveDataElementOptions(a+n).radius)}return s}parseObjectData(e,t,n,r){const s=super.parseObjectData(e,t,n,r);for(let a=0;a<s.length;a++){const e=t[n+a];s[a]._custom=pe(e&&e.r&&+e.r,this.resolveDataElementOptions(a+n).radius)}return s}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:s}=t,a=this.getParsed(e),i=r.getLabelForValue(a.x),o=s.getLabelForValue(a.y),l=a._custom;return{label:n[e]||"",value:"("+i+", "+o+(l?", "+l:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,n,r){const s="reset"===r,{iScale:a,vScale:i}=this._cachedMeta,{sharedOptions:o,includeOptions:l}=this._getSharedOptions(t,r),c=a.axis,u=i.axis;for(let d=t;d<t+n;d++){const t=e[d],n=!s&&this.getParsed(d),h={},p=h[c]=s?a.getPixelForDecimal(.5):a.getPixelForValue(n[c]),f=h[u]=s?i.getBasePixel():i.getPixelForValue(n[u]);h.skip=isNaN(p)||isNaN(f),l&&(h.options=o||this.resolveDataElementOptions(d,t.active?"active":r),s&&(h.options.radius=0)),this.updateElement(t,d,h,r)}}resolveDataElementOptions(e,t){const n=this.getParsed(e);let r=super.resolveDataElementOptions(e,t);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const s=r.radius;return"active"!==t&&(r.radius=0),r.radius+=pe(n&&n._custom,s),r}}a(jr,"id","bubble"),a(jr,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),a(jr,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class Cr extends gr{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const n=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=n;else{let s,a,i=e=>+n[e];if(ue(n[e])){const{key:e="value"}=this._parsing;i=t=>+je(n[t],e)}for(s=e,a=e+t;s<a;++s)r._parsed[s]=i(s)}}_getRotation(){return He(this.options.rotation-90)}_getCircumference(){return He(this.options.circumference)}_getRotationExtents(){let e=Me,t=-Me;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const r=this.chart.getDatasetMeta(n).controller,s=r._getRotation(),a=r._getCircumference();e=Math.min(e,s),t=Math.max(t,s+a)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:n}=t,r=this._cachedMeta,s=r.data,a=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,i=Math.max((Math.min(n.width,n.height)-a)/2,0),o=Math.min((l=this.options.cutout,c=i,"string"===typeof l&&l.endsWith("%")?parseFloat(l)/100:+l/c),1);var l,c;const u=this._getRingWeight(this.index),{circumference:d,rotation:h}=this._getRotationExtents(),{ratioX:p,ratioY:f,offsetX:g,offsetY:m}=function(e,t,n){let r=1,s=1,a=0,i=0;if(t<Me){const o=e,l=o+t,c=Math.cos(o),u=Math.sin(o),d=Math.cos(l),h=Math.sin(l),p=(e,t,r)=>Qe(e,o,l,!0)?1:Math.max(t,t*n,r,r*n),f=(e,t,r)=>Qe(e,o,l,!0)?-1:Math.min(t,t*n,r,r*n),g=p(0,c,d),m=p(De,u,h),y=f(Te,c,d),v=f(Te+De,u,h);r=(g-y)/2,s=(m-v)/2,a=-(g+y)/2,i=-(m+v)/2}return{ratioX:r,ratioY:s,offsetX:a,offsetY:i}}(h,d,o),y=(n.width-a)/p,v=(n.height-a)/f,b=Math.max(Math.min(y,v)/2,0),x=fe(this.options.radius,b),w=(x-Math.max(x*o,0))/this._getVisibleDatasetWeightTotal();this.offsetX=g*x,this.offsetY=m*x,r.total=this.calculateTotal(),this.outerRadius=x-w*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-w*u,0),this.updateElements(s,0,s.length,e)}_circumference(e,t){const n=this.options,r=this._cachedMeta,s=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===r._parsed[e]||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*s/Me)}updateElements(e,t,n,r){const s="reset"===r,a=this.chart,i=a.chartArea,o=a.options.animation,l=(i.left+i.right)/2,c=(i.top+i.bottom)/2,u=s&&o.animateScale,d=u?0:this.innerRadius,h=u?0:this.outerRadius,{sharedOptions:p,includeOptions:f}=this._getSharedOptions(t,r);let g,m=this._getRotation();for(g=0;g<t;++g)m+=this._circumference(g,s);for(g=t;g<t+n;++g){const t=this._circumference(g,s),n=e[g],a={x:l+this.offsetX,y:c+this.offsetY,startAngle:m,endAngle:m+t,circumference:t,outerRadius:h,innerRadius:d};f&&(a.options=p||this.resolveDataElementOptions(g,n.active?"active":r)),m+=t,this.updateElement(n,g,a,r)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let n,r=0;for(n=0;n<t.length;n++){const s=e._parsed[n];null===s||isNaN(s)||!this.chart.getDataVisibility(n)||t[n].hidden||(r+=Math.abs(s))}return r}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?Me*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],s=_t(t._parsed[e],n.options.locale);return{label:r[e]||"",value:s}}getMaxBorderWidth(e){let t=0;const n=this.chart;let r,s,a,i,o;if(!e)for(r=0,s=n.data.datasets.length;r<s;++r)if(n.isDatasetVisible(r)){a=n.getDatasetMeta(r),e=a.data,i=a.controller;break}if(!e)return 0;for(r=0,s=e.length;r<s;++r)o=i.resolveDataElementOptions(r),"inner"!==o.borderAlign&&(t=Math.max(t,o.borderWidth||0,o.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let n=0,r=e.length;n<r;++n){const e=this.resolveDataElementOptions(n);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}_getRingWeight(e){return Math.max(pe(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}a(Cr,"id","doughnut"),a(Cr,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),a(Cr,"descriptors",{_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),a(Cr,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:r}}=e.legend.options;return t.labels.map((t,s)=>{const a=e.getDatasetMeta(0).controller.getStyle(s);return{text:t,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,fontColor:r,lineWidth:a.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(s),index:s}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}}});class Nr extends gr{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:r=[],_dataset:s}=t,a=this.chart._animationsDisabled;let{start:i,count:o}=ut(t,r,a);this._drawStart=i,this._drawCount=o,dt(t)&&(i=0,o=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!s._decimated,n.points=r;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!a,options:l},e),this.updateElements(r,i,o,e)}updateElements(e,t,n,r){const s="reset"===r,{iScale:a,vScale:i,_stacked:o,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(t,r),d=a.axis,h=i.axis,{spanGaps:p,segment:f}=this.options,g=Ve(p)?p:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||s||"none"===r,y=t+n,v=e.length;let b=t>0&&this.getParsed(t-1);for(let x=0;x<v;++x){const n=e[x],p=m?n:{};if(x<t||x>=y){p.skip=!0;continue}const v=this.getParsed(x),w=le(v[h]),_=p[d]=a.getPixelForValue(v[d],x),k=p[h]=s||w?i.getBasePixel():i.getPixelForValue(o?this.applyStack(i,v,o):v[h],x);p.skip=isNaN(_)||isNaN(k)||w,p.stop=x>0&&Math.abs(v[d]-b[d])>g,f&&(p.parsed=v,p.raw=l.data[x]),u&&(p.options=c||this.resolveDataElementOptions(x,n.active?"active":r)),m||this.updateElement(n,x,p,r),b=v}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,r=e.data||[];if(!r.length)return n;const s=r[0].size(this.resolveDataElementOptions(0)),a=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,s,a)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}a(Nr,"id","line"),a(Nr,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),a(Nr,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Er extends gr{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],s=_t(t._parsed[e].r,n.options.locale);return{label:r[e]||"",value:s}}parseObjectData(e,t,n,r){return yn.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((e,n)=>{const r=this.getParsed(n).r;!isNaN(r)&&this.chart.getDataVisibility(n)&&(r<t.min&&(t.min=r),r>t.max&&(t.max=r))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,n=e.options,r=Math.min(t.right-t.left,t.bottom-t.top),s=Math.max(r/2,0),a=(s-Math.max(n.cutoutPercentage?s/100*n.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=s-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,t,n,r){const s="reset"===r,a=this.chart,i=a.options.animation,o=this._cachedMeta.rScale,l=o.xCenter,c=o.yCenter,u=o.getIndexAngle(0)-.5*Te;let d,h=u;const p=360/this.countVisibleElements();for(d=0;d<t;++d)h+=this._computeAngle(d,r,p);for(d=t;d<t+n;d++){const t=e[d];let n=h,f=h+this._computeAngle(d,r,p),g=a.getDataVisibility(d)?o.getDistanceFromCenterForValue(this.getParsed(d).r):0;h=f,s&&(i.animateScale&&(g=0),i.animateRotate&&(n=f=u));const m={x:l,y:c,innerRadius:0,outerRadius:g,startAngle:n,endAngle:f,options:this.resolveDataElementOptions(d,t.active?"active":r)};this.updateElement(t,d,m,r)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((e,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&t++}),t}_computeAngle(e,t,n){return this.chart.getDataVisibility(e)?He(this.resolveDataElementOptions(e,t).angle||n):0}}a(Er,"id","polarArea"),a(Er,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),a(Er,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:r}}=e.legend.options;return t.labels.map((t,s)=>{const a=e.getDatasetMeta(0).controller.getStyle(s);return{text:t,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,fontColor:r,lineWidth:a.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(s),index:s}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Pr extends Cr{}a(Pr,"id","pie"),a(Pr,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Tr extends gr{getLabelAndValue(e){const t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}parseObjectData(e,t,n,r){return yn.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta,n=t.dataset,r=t.data||[],s=t.iScale.getLabels();if(n.points=r,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const a={_loop:!0,_fullLoop:s.length===r.length,options:t};this.updateElement(n,void 0,a,e)}this.updateElements(r,0,r.length,e)}updateElements(e,t,n,r){const s=this._cachedMeta.rScale,a="reset"===r;for(let i=t;i<t+n;i++){const t=e[i],n=this.resolveDataElementOptions(i,t.active?"active":r),o=s.getPointPositionForValue(i,this.getParsed(i).r),l=a?s.xCenter:o.x,c=a?s.yCenter:o.y,u={x:l,y:c,angle:o.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(t,i,u,r)}}}a(Tr,"id","radar"),a(Tr,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),a(Tr,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Mr extends gr{getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:s}=t,a=this.getParsed(e),i=r.getLabelForValue(a.x),o=s.getLabelForValue(a.y);return{label:n[e]||"",value:"("+i+", "+o+")"}}update(e){const t=this._cachedMeta,{data:n=[]}=t,r=this.chart._animationsDisabled;let{start:s,count:a}=ut(t,n,r);if(this._drawStart=s,this._drawCount=a,dt(t)&&(s=0,a=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:s,_dataset:a}=t;s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!a._decimated,s.points=n;const i=this.resolveDatasetElementOptions(e);i.segment=this.options.segment,this.updateElement(s,void 0,{animated:!r,options:i},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(n,s,a,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,n,r){const s="reset"===r,{iScale:a,vScale:i,_stacked:o,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(t,r),u=this.getSharedOptions(c),d=this.includeOptions(r,u),h=a.axis,p=i.axis,{spanGaps:f,segment:g}=this.options,m=Ve(f)?f:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||s||"none"===r;let v=t>0&&this.getParsed(t-1);for(let b=t;b<t+n;++b){const t=e[b],n=this.getParsed(b),c=y?t:{},f=le(n[p]),x=c[h]=a.getPixelForValue(n[h],b),w=c[p]=s||f?i.getBasePixel():i.getPixelForValue(o?this.applyStack(i,n,o):n[p],b);c.skip=isNaN(x)||isNaN(w)||f,c.stop=b>0&&Math.abs(n[h]-v[h])>m,g&&(c.parsed=n,c.raw=l.data[b]),d&&(c.options=u||this.resolveDataElementOptions(b,t.active?"active":r)),y||this.updateElement(t,b,c,r),v=n}this.updateSharedOptions(u,r,c)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}const n=e.dataset,r=n.options&&n.options.borderWidth||0;if(!t.length)return r;const s=t[0].size(this.resolveDataElementOptions(0)),a=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(r,s,a)/2}}a(Mr,"id","scatter"),a(Mr,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),a(Mr,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function Ar(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Or{static override(e){Object.assign(Or.prototype,e)}constructor(e){a(this,"options",void 0),this.options=e||{}}init(){}formats(){return Ar()}parse(){return Ar()}format(){return Ar()}add(){return Ar()}diff(){return Ar()}startOf(){return Ar()}endOf(){return Ar()}}var Rr=Or;function Dr(e,t,n,r){const{controller:s,data:a,_sorted:i}=e,o=s._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(o&&t===o.axis&&"r"!==t&&i&&a.length){const i=o._reversePixels?nt:tt;if(!r){const r=i(a,t,n);if(l){const{vScale:t}=s._cachedMeta,{_parsed:n}=e,a=n.slice(0,r.lo+1).reverse().findIndex(e=>!le(e[t.axis]));r.lo-=Math.max(0,a);const i=n.slice(r.hi).findIndex(e=>!le(e[t.axis]));r.hi+=Math.max(0,i)}return r}if(s._sharedOptions){const e=a[0],r="function"===typeof e.getRange&&e.getRange(t);if(r){const e=i(a,t,n-r),s=i(a,t,n+r);return{lo:e.lo,hi:s.hi}}}}return{lo:0,hi:a.length-1}}function Lr(e,t,n,r,s){const a=e.getSortedVisibleDatasetMetas(),i=n[t];for(let o=0,l=a.length;o<l;++o){const{index:e,data:n}=a[o],{lo:l,hi:c}=Dr(a[o],t,i,s);for(let t=l;t<=c;++t){const s=n[t];s.skip||r(s,e,t)}}}function Ir(e,t,n,r,s){const a=[];if(!s&&!e.isPointInArea(t))return a;return Lr(e,n,t,function(n,i,o){(s||It(n,e.chartArea,0))&&n.inRange(t.x,t.y,r)&&a.push({element:n,datasetIndex:i,index:o})},!0),a}function Fr(e,t,n,r,s,a){let i=[];const o=function(e){const t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,r){const s=t?Math.abs(e.x-r.x):0,a=n?Math.abs(e.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(a,2))}}(n);let l=Number.POSITIVE_INFINITY;return Lr(e,n,t,function(n,c,u){const d=n.inRange(t.x,t.y,s);if(r&&!d)return;const h=n.getCenterPoint(s);if(!(!!a||e.isPointInArea(h))&&!d)return;const p=o(t,h);p<l?(i=[{element:n,datasetIndex:c,index:u}],l=p):p===l&&i.push({element:n,datasetIndex:c,index:u})}),i}function zr(e,t,n,r,s,a){return a||e.isPointInArea(t)?"r"!==n||r?Fr(e,t,n,r,s,a):function(e,t,n,r){let s=[];return Lr(e,n,t,function(e,n,a){const{startAngle:i,endAngle:o}=e.getProps(["startAngle","endAngle"],r),{angle:l}=Ke(e,{x:t.x,y:t.y});Qe(l,i,o)&&s.push({element:e,datasetIndex:n,index:a})}),s}(e,t,n,s):[]}function Ur(e,t,n,r,s){const a=[],i="x"===n?"inXRange":"inYRange";let o=!1;return Lr(e,n,t,(e,r,l)=>{e[i]&&e[i](t[n],s)&&(a.push({element:e,datasetIndex:r,index:l}),o=o||e.inRange(t.x,t.y,s))}),r&&!o?[]:a}var Br={evaluateInteractionItems:Lr,modes:{index(e,t,n,r){const s=Mn(t,e),a=n.axis||"x",i=n.includeInvisible||!1,o=n.intersect?Ir(e,s,a,r,i):zr(e,s,a,!1,r,i),l=[];return o.length?(e.getSortedVisibleDatasetMetas().forEach(e=>{const t=o[0].index,n=e.data[t];n&&!n.skip&&l.push({element:n,datasetIndex:e.index,index:t})}),l):[]},dataset(e,t,n,r){const s=Mn(t,e),a=n.axis||"xy",i=n.includeInvisible||!1;let o=n.intersect?Ir(e,s,a,r,i):zr(e,s,a,!1,r,i);if(o.length>0){const t=o[0].datasetIndex,n=e.getDatasetMeta(t).data;o=[];for(let e=0;e<n.length;++e)o.push({element:n[e],datasetIndex:t,index:e})}return o},point:(e,t,n,r)=>Ir(e,Mn(t,e),n.axis||"xy",r,n.includeInvisible||!1),nearest(e,t,n,r){const s=Mn(t,e),a=n.axis||"xy",i=n.includeInvisible||!1;return zr(e,s,a,n.intersect,r,i)},x:(e,t,n,r)=>Ur(e,Mn(t,e),"x",n.intersect,r),y:(e,t,n,r)=>Ur(e,Mn(t,e),"y",n.intersect,r)}};const Vr=["left","top","right","bottom"];function Wr(e,t){return e.filter(e=>e.pos===t)}function Hr(e,t){return e.filter(e=>-1===Vr.indexOf(e.pos)&&e.box.axis===t)}function qr(e,t){return e.sort((e,n)=>{const r=t?n:e,s=t?e:n;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function $r(e,t){const n=function(e){const t={};for(const n of e){const{stack:e,pos:r,stackWeight:s}=n;if(!e||!Vr.includes(r))continue;const a=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=s}return t}(e),{vBoxMaxWidth:r,hBoxMaxHeight:s}=t;let a,i,o;for(a=0,i=e.length;a<i;++a){o=e[a];const{fullSize:i}=o.box,l=n[o.stack],c=l&&o.stackWeight/l.weight;o.horizontal?(o.width=c?c*r:i&&t.availableWidth,o.height=s):(o.width=r,o.height=c?c*s:i&&t.availableHeight)}return n}function Kr(e,t,n,r){return Math.max(e[n],t[n])+Math.max(e[r],t[r])}function Jr(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function Yr(e,t,n,r){const{pos:s,box:a}=n,i=e.maxPadding;if(!ue(s)){n.size&&(e[s]-=n.size);const t=r[n.stack]||{size:0,count:1};t.size=Math.max(t.size,n.horizontal?a.height:a.width),n.size=t.size/t.count,e[s]+=n.size}a.getPadding&&Jr(i,a.getPadding());const o=Math.max(0,t.outerWidth-Kr(i,e,"left","right")),l=Math.max(0,t.outerHeight-Kr(i,e,"top","bottom")),c=o!==e.w,u=l!==e.h;return e.w=o,e.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function Gr(e,t){const n=t.maxPadding;function r(e){const r={left:0,top:0,right:0,bottom:0};return e.forEach(e=>{r[e]=Math.max(t[e],n[e])}),r}return r(e?["left","right"]:["top","bottom"])}function Qr(e,t,n,r){const s=[];let a,i,o,l,c,u;for(a=0,i=e.length,c=0;a<i;++a){o=e[a],l=o.box,l.update(o.width||t.w,o.height||t.h,Gr(o.horizontal,t));const{same:i,other:d}=Yr(t,n,o,r);c|=i&&s.length,u=u||d,l.fullSize||s.push(o)}return c&&Qr(s,t,n,r)||u}function Xr(e,t,n,r,s){e.top=n,e.left=t,e.right=t+r,e.bottom=n+s,e.width=r,e.height=s}function Zr(e,t,n,r){const s=n.padding;let{x:a,y:i}=t;for(const o of e){const e=o.box,l=r[o.stack]||{count:1,placed:0,weight:1},c=o.stackWeight/l.weight||1;if(o.horizontal){const r=t.w*c,a=l.size||e.height;Ne(l.start)&&(i=l.start),e.fullSize?Xr(e,s.left,i,n.outerWidth-s.right-s.left,a):Xr(e,t.left+l.placed,i,r,a),l.start=i,l.placed+=r,i=e.bottom}else{const r=t.h*c,i=l.size||e.width;Ne(l.start)&&(a=l.start),e.fullSize?Xr(e,a,s.top,i,n.outerHeight-s.bottom-s.top):Xr(e,a,t.top+l.placed,i,r),l.start=a,l.placed+=r,a=e.right}}t.x=a,t.y=i}var es={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,r){if(!e)return;const s=Zt(e.options.layout.padding),a=Math.max(t-s.width,0),i=Math.max(n-s.height,0),o=function(e){const t=function(e){const t=[];let n,r,s,a,i,o;for(n=0,r=(e||[]).length;n<r;++n)s=e[n],({position:a,options:{stack:i,stackWeight:o=1}}=s),t.push({index:n,box:s,pos:a,horizontal:s.isHorizontal(),weight:s.weight,stack:i&&a+i,stackWeight:o});return t}(e),n=qr(t.filter(e=>e.box.fullSize),!0),r=qr(Wr(t,"left"),!0),s=qr(Wr(t,"right")),a=qr(Wr(t,"top"),!0),i=qr(Wr(t,"bottom")),o=Hr(t,"x"),l=Hr(t,"y");return{fullSize:n,leftAndTop:r.concat(a),rightAndBottom:s.concat(l).concat(i).concat(o),chartArea:Wr(t,"chartArea"),vertical:r.concat(s).concat(l),horizontal:a.concat(i).concat(o)}}(e.boxes),l=o.vertical,c=o.horizontal;me(e.boxes,e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()});const u=l.reduce((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1,0)||1,d=Object.freeze({outerWidth:t,outerHeight:n,padding:s,availableWidth:a,availableHeight:i,vBoxMaxWidth:a/2/u,hBoxMaxHeight:i/2}),h=Object.assign({},s);Jr(h,Zt(r));const p=Object.assign({maxPadding:h,w:a,h:i,x:s.left,y:s.top},s),f=$r(l.concat(c),d);Qr(o.fullSize,p,d,f),Qr(l,p,d,f),Qr(c,p,d,f)&&Qr(l,p,d,f),function(e){const t=e.maxPadding;function n(n){const r=Math.max(t[n]-e[n],0);return e[n]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(p),Zr(o.leftAndTop,p,d,f),p.x+=p.w,p.y+=p.h,Zr(o.rightAndBottom,p,d,f),e.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},me(o.chartArea,t=>{const n=t.box;Object.assign(n,e.chartArea),n.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class ts{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,r){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):n)}}isAttached(e){return!0}updateConfig(e){}}class ns extends ts{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const rs="$chartjs",ss={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},as=e=>null===e||""===e;const is=!!Dn&&{passive:!0};function os(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,is)}function ls(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function cs(e,t,n){const r=e.canvas,s=new MutationObserver(e=>{let t=!1;for(const n of e)t=t||ls(n.addedNodes,r),t=t&&!ls(n.removedNodes,r);t&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function us(e,t,n){const r=e.canvas,s=new MutationObserver(e=>{let t=!1;for(const n of e)t=t||ls(n.removedNodes,r),t=t&&!ls(n.addedNodes,r);t&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const ds=new Map;let hs=0;function ps(){const e=window.devicePixelRatio;e!==hs&&(hs=e,ds.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function fs(e,t,n){const r=e.canvas,s=r&&Cn(r);if(!s)return;const a=ot((e,t)=>{const r=s.clientWidth;n(e,t),r<s.clientWidth&&n()},window),i=new ResizeObserver(e=>{const t=e[0],n=t.contentRect.width,r=t.contentRect.height;0===n&&0===r||a(n,r)});return i.observe(s),function(e,t){ds.size||window.addEventListener("resize",ps),ds.set(e,t)}(e,a),i}function gs(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){ds.delete(e),ds.size||window.removeEventListener("resize",ps)}(e)}function ms(e,t,n){const r=e.canvas,s=ot(t=>{null!==e.ctx&&n(function(e,t){const n=ss[e.type]||e.type,{x:r,y:s}=Mn(e,t);return{type:n,chart:t,native:e,x:void 0!==r?r:null,y:void 0!==s?s:null}}(t,e))},e);return function(e,t,n){e&&e.addEventListener(t,n,is)}(r,t,s),s}class ys extends ts{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){const n=e.style,r=e.getAttribute("height"),s=e.getAttribute("width");if(e[rs]={initial:{height:r,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",as(s)){const t=Ln(e,"width");void 0!==t&&(e.width=t)}if(as(r))if(""===e.style.height)e.height=e.width/(t||2);else{const t=Ln(e,"height");void 0!==t&&(e.height=t)}}(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[rs])return!1;const n=t[rs].initial;["height","width"].forEach(e=>{const r=n[e];le(r)?t.removeAttribute(e):t.setAttribute(e,r)});const r=n.style||{};return Object.keys(r).forEach(e=>{t.style[e]=r[e]}),t.width=t.width,delete t[rs],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const r=e.$proxies||(e.$proxies={}),s={attach:cs,detach:us,resize:fs}[t]||ms;r[t]=s(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),r=n[t];if(!r)return;({attach:gs,detach:gs,resize:gs}[t]||os)(e,t,r),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,r){return On(e,t,n,r)}isAttached(e){const t=e&&Cn(e);return!(!t||!t.isConnected)}}class vs{constructor(){a(this,"x",void 0),a(this,"y",void 0),a(this,"active",!1),a(this,"options",void 0),a(this,"$animations",void 0)}tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return Ve(this.x)&&Ve(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const r={};return e.forEach(e=>{r[e]=n[e]&&n[e].active()?n[e]._to:this[e]}),r}}function bs(e,t){const n=e.options.ticks,r=function(e){const t=e.options.offset,n=e._tickSize(),r=e._length/n+(t?0:1),s=e._maxLength/n;return Math.floor(Math.min(r,s))}(e),s=Math.min(n.maxTicksLimit||r,r),a=n.major.enabled?function(e){const t=[];let n,r;for(n=0,r=e.length;n<r;n++)e[n].major&&t.push(n);return t}(t):[],i=a.length,o=a[0],l=a[i-1],c=[];if(i>s)return function(e,t,n,r){let s,a=0,i=n[0];for(r=Math.ceil(r),s=0;s<e.length;s++)s===i&&(t.push(e[s]),a++,i=n[a*r])}(t,c,a,i/s),c;const u=function(e,t,n){const r=function(e){const t=e.length;let n,r;if(t<2)return!1;for(r=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==r)return!1;return r}(e),s=t.length/n;if(!r)return Math.max(s,1);const a=function(e){const t=[],n=Math.sqrt(e);let r;for(r=1;r<n;r++)e%r===0&&(t.push(r),t.push(e/r));return n===(0|n)&&t.push(n),t.sort((e,t)=>e-t).pop(),t}(r);for(let i=0,o=a.length-1;i<o;i++){const e=a[i];if(e>s)return e}return Math.max(s,1)}(a,t,s);if(i>0){let e,n;const r=i>1?Math.round((l-o)/(i-1)):null;for(xs(t,c,u,le(r)?0:o-r,o),e=0,n=i-1;e<n;e++)xs(t,c,u,a[e],a[e+1]);return xs(t,c,u,l,le(r)?t.length:l+r),c}return xs(t,c,u),c}function xs(e,t,n,r,s){const a=pe(r,0),i=Math.min(pe(s,e.length),e.length);let o,l,c,u=0;for(n=Math.ceil(n),s&&(o=s-r,n=o/Math.floor(o/n)),c=a;c<0;)u++,c=Math.round(a+u*n);for(l=Math.max(a,0);l<i;l++)l===c&&(t.push(e[l]),u++,c=Math.round(a+u*n))}a(vs,"defaults",{}),a(vs,"defaultRoutes",void 0);const ws=(e,t,n)=>"top"===t||"left"===t?e[t]+n:e[t]-n,_s=(e,t)=>Math.min(t||e,e);function ks(e,t){const n=[],r=e.length/t,s=e.length;let a=0;for(;a<s;a+=r)n.push(e[Math.floor(a)]);return n}function Ss(e,t,n){const r=e.ticks.length,s=Math.min(t,r-1),a=e._startPixel,i=e._endPixel,o=1e-6;let l,c=e.getPixelForTick(s);if(!(n&&(l=1===r?Math.max(c-a,i-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(s-1))/2,c+=s<t?l:-l,c<a-o||c>i+o)))return c}function js(e){return e.drawTicks?e.tickLength:0}function Cs(e,t){if(!e.display)return 0;const n=en(e.font,t),r=Zt(e.padding);return(ce(e.text)?e.text.length:1)*n.lineHeight+r.height}function Ns(e,t,n){let r=lt(e);return(n&&"right"!==t||!n&&"right"===t)&&(r=(e=>"left"===e?"right":"right"===e?"left":e)(r)),r}class Es extends vs{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:r}=this;return e=he(e,Number.POSITIVE_INFINITY),t=he(t,Number.NEGATIVE_INFINITY),n=he(n,Number.POSITIVE_INFINITY),r=he(r,Number.NEGATIVE_INFINITY),{min:he(e,n),max:he(t,r),minDefined:de(e),maxDefined:de(t)}}getMinMax(e){let t,{min:n,max:r,minDefined:s,maxDefined:a}=this.getUserBounds();if(s&&a)return{min:n,max:r};const i=this.getMatchingVisibleMetas();for(let o=0,l=i.length;o<l;++o)t=i[o].controller.getMinMax(this,e),s||(n=Math.min(n,t.min)),a||(r=Math.max(r,t.max));return n=a&&n>r?r:n,r=s&&n>r?n:r,{min:he(n,he(r,n)),max:he(r,he(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ge(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:r,grace:s,ticks:a}=this.options,i=a.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){const{min:r,max:s}=e,a=fe(t,(s-r)/2),i=(e,t)=>n&&0===e?0:e+t;return{min:i(r,-Math.abs(a)),max:i(s,a)}}(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const o=i<this.ticks.length;this._convertTicksToLabels(o?ks(this.ticks,i):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||"auto"===a.source)&&(this.ticks=bs(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),o&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ge(this.options.afterUpdate,[this])}beforeSetDimensions(){ge(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ge(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ge(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ge(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,r,s;for(n=0,r=e.length;n<r;n++)s=e[n],s.label=ge(t.callback,[s.value,n,e],this)}afterTickToLabelConversion(){ge(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ge(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=_s(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,s=t.maxRotation;let a,i,o,l=r;if(!this._isVisible()||!t.display||r>=s||n<=1||!this.isHorizontal())return void(this.labelRotation=r);const c=this._getLabelSizes(),u=c.widest.width,d=c.highest.height,h=Xe(this.chart.width-u,0,this.maxWidth);a=e.offset?this.maxWidth/n:h/(n-1),u+6>a&&(a=h/(n-(e.offset?.5:1)),i=this.maxHeight-js(e.grid)-t.padding-Cs(e.title,this.chart.options.font),o=Math.sqrt(u*u+d*d),l=qe(Math.min(Math.asin(Xe((c.highest.height+6)/a,-1,1)),Math.asin(Xe(i/o,-1,1))-Math.asin(Xe(d/o,-1,1)))),l=Math.max(r,Math.min(s,l))),this.labelRotation=l}afterCalculateLabelRotation(){ge(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ge(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:r,grid:s}}=this,a=this._isVisible(),i=this.isHorizontal();if(a){const a=Cs(r,t.options.font);if(i?(e.width=this.maxWidth,e.height=js(s)+a):(e.height=this.maxHeight,e.width=js(s)+a),n.display&&this.ticks.length){const{first:t,last:r,widest:s,highest:a}=this._getLabelSizes(),o=2*n.padding,l=He(this.labelRotation),c=Math.cos(l),u=Math.sin(l);if(i){const t=n.mirror?0:u*s.width+c*a.height;e.height=Math.min(this.maxHeight,e.height+t+o)}else{const t=n.mirror?0:c*s.width+u*a.height;e.width=Math.min(this.maxWidth,e.width+t+o)}this._calculatePadding(t,r,u,c)}}this._handleMargins(),i?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,r){const{ticks:{align:s,padding:a},position:i}=this.options,o=0!==this.labelRotation,l="top"!==i&&"x"===this.axis;if(this.isHorizontal()){const i=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,d=0;o?l?(u=r*e.width,d=n*t.height):(u=n*e.height,d=r*t.width):"start"===s?d=t.width:"end"===s?u=e.width:"inner"!==s&&(u=e.width/2,d=t.width/2),this.paddingLeft=Math.max((u-i+a)*this.width/(this.width-i),0),this.paddingRight=Math.max((d-c+a)*this.width/(this.width-c),0)}else{let n=t.height/2,r=e.height/2;"start"===s?(n=0,r=e.height):"end"===s&&(n=t.height,r=0),this.paddingTop=n+a,this.paddingBottom=r+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ge(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)le(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=ks(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){const{ctx:r,_longestTextCache:s}=this,a=[],i=[],o=Math.floor(t/_s(t,n));let l,c,u,d,h,p,f,g,m,y,v,b=0,x=0;for(l=0;l<t;l+=o){if(d=e[l].label,h=this._resolveTickFontOptions(l),r.font=p=h.string,f=s[p]=s[p]||{data:{},gc:[]},g=h.lineHeight,m=y=0,le(d)||ce(d)){if(ce(d))for(c=0,u=d.length;c<u;++c)v=d[c],le(v)||ce(v)||(m=Mt(r,f.data,f.gc,m,v),y+=g)}else m=Mt(r,f.data,f.gc,m,d),y=g;a.push(m),i.push(y),b=Math.max(m,b),x=Math.max(y,x)}!function(e,t){me(e,e=>{const n=e.gc,r=n.length/2;let s;if(r>t){for(s=0;s<r;++s)delete e.data[n[s]];n.splice(0,r)}})}(s,t);const w=a.indexOf(b),_=i.indexOf(x),k=e=>({width:a[e]||0,height:i[e]||0});return{first:k(0),last:k(t-1),widest:k(w),highest:k(_),widths:a,heights:i}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return Xe(this._alignToPixels?Ot(this.chart,t,0):t,-32768,32767)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=function(e,t,n){return nn(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=nn(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const e=this.options.ticks,t=He(this.labelRotation),n=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),s=this._getLabelSizes(),a=e.autoSkipPadding||0,i=s?s.widest.width+a:0,o=s?s.highest.height+a:0;return this.isHorizontal()?o*n>i*r?i/n:o/r:o*r<i*n?o/n:i/r}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,r=this.options,{grid:s,position:a,border:i}=r,o=s.offset,l=this.isHorizontal(),c=this.ticks.length+(o?1:0),u=js(s),d=[],h=i.setContext(this.getContext()),p=h.display?h.width:0,f=p/2,g=function(e){return Ot(n,e,p)};let m,y,v,b,x,w,_,k,S,j,C,N;if("top"===a)m=g(this.bottom),w=this.bottom-u,k=m-f,j=g(e.top)+f,N=e.bottom;else if("bottom"===a)m=g(this.top),j=e.top,N=g(e.bottom)-f,w=m+f,k=this.top+u;else if("left"===a)m=g(this.right),x=this.right-u,_=m-f,S=g(e.left)+f,C=e.right;else if("right"===a)m=g(this.left),S=e.left,C=g(e.right)-f,x=m+f,_=this.left+u;else if("x"===t){if("center"===a)m=g((e.top+e.bottom)/2+.5);else if(ue(a)){const e=Object.keys(a)[0],t=a[e];m=g(this.chart.scales[e].getPixelForValue(t))}j=e.top,N=e.bottom,w=m+f,k=w+u}else if("y"===t){if("center"===a)m=g((e.left+e.right)/2);else if(ue(a)){const e=Object.keys(a)[0],t=a[e];m=g(this.chart.scales[e].getPixelForValue(t))}x=m-f,_=x-u,S=e.left,C=e.right}const E=pe(r.ticks.maxTicksLimit,c),P=Math.max(1,Math.ceil(c/E));for(y=0;y<c;y+=P){const e=this.getContext(y),t=s.setContext(e),r=i.setContext(e),a=t.lineWidth,c=t.color,u=r.dash||[],h=r.dashOffset,p=t.tickWidth,f=t.tickColor,g=t.tickBorderDash||[],m=t.tickBorderDashOffset;v=Ss(this,y,o),void 0!==v&&(b=Ot(n,v,a),l?x=_=S=C=b:w=k=j=N=b,d.push({tx1:x,ty1:w,tx2:_,ty2:k,x1:S,y1:j,x2:C,y2:N,width:a,color:c,borderDash:u,borderDashOffset:h,tickWidth:p,tickColor:f,tickBorderDash:g,tickBorderDashOffset:m}))}return this._ticksLength=c,this._borderValue=m,d}_computeLabelItems(e){const t=this.axis,n=this.options,{position:r,ticks:s}=n,a=this.isHorizontal(),i=this.ticks,{align:o,crossAlign:l,padding:c,mirror:u}=s,d=js(n.grid),h=d+c,p=u?-c:h,f=-He(this.labelRotation),g=[];let m,y,v,b,x,w,_,k,S,j,C,N,E="middle";if("top"===r)w=this.bottom-p,_=this._getXAxisLabelAlignment();else if("bottom"===r)w=this.top+p,_=this._getXAxisLabelAlignment();else if("left"===r){const e=this._getYAxisLabelAlignment(d);_=e.textAlign,x=e.x}else if("right"===r){const e=this._getYAxisLabelAlignment(d);_=e.textAlign,x=e.x}else if("x"===t){if("center"===r)w=(e.top+e.bottom)/2+h;else if(ue(r)){const e=Object.keys(r)[0],t=r[e];w=this.chart.scales[e].getPixelForValue(t)+h}_=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===r)x=(e.left+e.right)/2-h;else if(ue(r)){const e=Object.keys(r)[0],t=r[e];x=this.chart.scales[e].getPixelForValue(t)}_=this._getYAxisLabelAlignment(d).textAlign}"y"===t&&("start"===o?E="top":"end"===o&&(E="bottom"));const P=this._getLabelSizes();for(m=0,y=i.length;m<y;++m){v=i[m],b=v.label;const e=s.setContext(this.getContext(m));k=this.getPixelForTick(m)+s.labelOffset,S=this._resolveTickFontOptions(m),j=S.lineHeight,C=ce(b)?b.length:1;const t=C/2,n=e.color,o=e.textStrokeColor,c=e.textStrokeWidth;let d,h=_;if(a?(x=k,"inner"===_&&(h=m===y-1?this.options.reverse?"left":"right":0===m?this.options.reverse?"right":"left":"center"),N="top"===r?"near"===l||0!==f?-C*j+j/2:"center"===l?-P.highest.height/2-t*j+j:-P.highest.height+j/2:"near"===l||0!==f?j/2:"center"===l?P.highest.height/2-t*j:P.highest.height-C*j,u&&(N*=-1),0===f||e.showLabelBackdrop||(x+=j/2*Math.sin(f))):(w=k,N=(1-C)*j/2),e.showLabelBackdrop){const t=Zt(e.backdropPadding),n=P.heights[m],r=P.widths[m];let s=N-t.top,a=0-t.left;switch(E){case"middle":s-=n/2;break;case"bottom":s-=n}switch(_){case"center":a-=r/2;break;case"right":a-=r;break;case"inner":m===y-1?a-=r:m>0&&(a-=r/2)}d={left:a,top:s,width:r+t.width,height:n+t.height,color:e.backdropColor}}g.push({label:b,font:S,textOffset:N,options:{rotation:f,color:n,strokeColor:o,strokeWidth:c,textAlign:h,textBaseline:E,translation:[x,w],backdrop:d}})}return g}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-He(this.labelRotation))return"top"===e?"left":"right";let n="center";return"start"===t.align?n="left":"end"===t.align?n="right":"inner"===t.align&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:r,padding:s}}=this.options,a=e+s,i=this._getLabelSizes().widest.width;let o,l;return"left"===t?r?(l=this.right+s,"near"===n?o="left":"center"===n?(o="center",l+=i/2):(o="right",l+=i)):(l=this.right-a,"near"===n?o="right":"center"===n?(o="center",l-=i/2):(o="left",l=this.left)):"right"===t?r?(l=this.left+s,"near"===n?o="right":"center"===n?(o="center",l-=i/2):(o="left",l-=i)):(l=this.left+a,"near"===n?o="left":"center"===n?(o="center",l+=i/2):(o="right",l=this.right)):o="right",{textAlign:o,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:r,width:s,height:a}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,r,s,a),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex(t=>t.value===e);if(n>=0){return t.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,a;const i=(e,t,r)=>{r.width&&r.color&&(n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.setLineDash(r.borderDash||[]),n.lineDashOffset=r.borderDashOffset,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.stroke(),n.restore())};if(t.display)for(s=0,a=r.length;s<a;++s){const e=r[s];t.drawOnChartArea&&i({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&i({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:n,grid:r}}=this,s=n.setContext(this.getContext()),a=n.display?s.width:0;if(!a)return;const i=r.setContext(this.getContext(0)).lineWidth,o=this._borderValue;let l,c,u,d;this.isHorizontal()?(l=Ot(e,this.left,a)-a/2,c=Ot(e,this.right,i)+i/2,u=d=o):(u=Ot(e,this.top,a)-a/2,d=Ot(e,this.bottom,i)+i/2,l=c=o),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(l,u),t.lineTo(c,d),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,n=this._computeLabelArea();n&&Ft(t,n);const r=this.getLabelItems(e);for(const s of r){const e=s.options,n=s.font;Ht(t,s.label,0,s.textOffset,n,e)}n&&zt(t)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:r}}=this;if(!n.display)return;const s=en(n.font),a=Zt(n.padding),i=n.align;let o=s.lineHeight/2;"bottom"===t||"center"===t||ue(t)?(o+=a.bottom,ce(n.text)&&(o+=s.lineHeight*(n.text.length-1))):o+=a.top;const{titleX:l,titleY:c,maxWidth:u,rotation:d}=function(e,t,n,r){const{top:s,left:a,bottom:i,right:o,chart:l}=e,{chartArea:c,scales:u}=l;let d,h,p,f=0;const g=i-s,m=o-a;if(e.isHorizontal()){if(h=ct(r,a,o),ue(n)){const e=Object.keys(n)[0],r=n[e];p=u[e].getPixelForValue(r)+g-t}else p="center"===n?(c.bottom+c.top)/2+g-t:ws(e,n,t);d=o-a}else{if(ue(n)){const e=Object.keys(n)[0],r=n[e];h=u[e].getPixelForValue(r)-m+t}else h="center"===n?(c.left+c.right)/2-m+t:ws(e,n,t);p=ct(r,i,s),f="left"===n?-De:De}return{titleX:h,titleY:p,maxWidth:d,rotation:f}}(this,o,t,i);Ht(e,n.text,0,0,s,{color:n.color,maxWidth:u,rotation:d,textAlign:Ns(i,t,r),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=pe(e.grid&&e.grid.z,-1),r=pe(e.border&&e.border.z,0);return this._isVisible()&&this.draw===Es.prototype.draw?[{z:n,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let s,a;for(s=0,a=t.length;s<a;++s){const a=t[s];a[n]!==this.id||e&&a.type!==e||r.push(a)}return r}_resolveTickFontOptions(e){return en(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Ps{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;(function(e){return"id"in e&&"defaults"in e})(t)&&(n=this.register(t));const r=this.items,s=e.id,a=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,function(e,t,n){const r=we(Object.create(null),[n?Tt.get(n):{},Tt.get(t),e.defaults]);Tt.set(t,r),e.defaultRoutes&&function(e,t){Object.keys(t).forEach(n=>{const r=n.split("."),s=r.pop(),a=[e].concat(r).join("."),i=t[n].split("."),o=i.pop(),l=i.join(".");Tt.route(a,s,l,o)})}(t,e.defaultRoutes);e.descriptors&&Tt.describe(t,e.descriptors)}(e,a,n),this.override&&Tt.override(e.id,e.overrides)),a}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,r=this.scope;n in t&&delete t[n],r&&n in Tt[r]&&(delete Tt[r][n],this.override&&delete jt[n])}}class Ts{constructor(){this.controllers=new Ps(gr,"datasets",!0),this.elements=new Ps(vs,"elements"),this.plugins=new Ps(Object,"plugins"),this.scales=new Ps(Es,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.scales)}_each(e,t,n){[...t].forEach(t=>{const r=n||this._getRegistryForType(t);n||r.isForType(t)||r===this.plugins&&t.id?this._exec(e,r,t):me(t,t=>{const r=n||this._getRegistryForType(t);this._exec(e,r,t)})})}_exec(e,t,n){const r=Ce(e);ge(n["before"+r],[],n),t[e](n),ge(n["after"+r],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const r=t.get(e);if(void 0===r)throw new Error('"'+e+'" is not a registered '+n+".");return r}}var Ms=new Ts;class As{constructor(){this._init=[]}notify(e,t,n,r){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=r?this._descriptors(e).filter(r):this._descriptors(e),a=this._notify(s,e,t,n);return"afterDestroy"===t&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),a}_notify(e,t,n,r){r=r||{};for(const s of e){const e=s.plugin;if(!1===ge(e[n],[t,r,s.options],e)&&r.cancelable)return!1}return!0}invalidate(){le(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,r=pe(n.options&&n.options.plugins,{}),s=function(e){const t={},n=[],r=Object.keys(Ms.plugins.items);for(let a=0;a<r.length;a++)n.push(Ms.getPlugin(r[a]));const s=e.plugins||[];for(let a=0;a<s.length;a++){const e=s[a];-1===n.indexOf(e)&&(n.push(e),t[e.id]=!0)}return{plugins:n,localIds:t}}(n);return!1!==r||t?function(e,t,n,r){let{plugins:s,localIds:a}=t;const i=[],o=e.getContext();for(const l of s){const t=l.id,s=Os(n[t],r);null!==s&&i.push({plugin:l,options:Rs(e.config,{plugin:l,local:a[t]},s,o)})}return i}(e,s,r,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,r=(e,t)=>e.filter(e=>!t.some(t=>e.plugin.id===t.plugin.id));this._notify(r(t,n),e,"stop"),this._notify(r(n,t),e,"start")}}function Os(e,t){return t||!1!==e?!0===e?{}:e:null}function Rs(e,t,n,r){let{plugin:s,local:a}=t;const i=e.pluginScopeKeys(s),o=e.getOptionScopes(n,i);return a&&s.defaults&&o.push(s.defaults),e.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Ds(e,t){const n=Tt.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function Ls(e){if("x"===e||"y"===e||"r"===e)return e}function Is(e){return"top"===e||"bottom"===e?"x":"left"===e||"right"===e?"y":void 0}function Fs(e){if(Ls(e))return e;for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const s of n){const t=s.axis||Is(s.position)||e.length>1&&Ls(e[0].toLowerCase());if(t)return t}throw new Error("Cannot determine type of '".concat(e,"' axis. Please provide 'axis' or 'position' option."))}function zs(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function Us(e,t){const n=jt[e.type]||{scales:{}},r=t.scales||{},s=Ds(e.type,t),a=Object.create(null);return Object.keys(r).forEach(t=>{const i=r[t];if(!ue(i))return console.error("Invalid scale configuration for scale: ".concat(t));if(i._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(t));const o=Fs(t,i,function(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(t=>t.xAxisID===e||t.yAxisID===e);if(n.length)return zs(e,"x",n[0])||zs(e,"y",n[0])}return{}}(t,e),Tt.scales[i.type]),l=function(e,t){return e===t?"_index_":"_value_"}(o,s),c=n.scales||{};a[t]=_e(Object.create(null),[{axis:o},i,c[o],c[l]])}),e.data.datasets.forEach(n=>{const s=n.type||e.type,i=n.indexAxis||Ds(s,t),o=(jt[s]||{}).scales||{};Object.keys(o).forEach(e=>{const t=function(e,t){let n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,i),s=n[t+"AxisID"]||t;a[s]=a[s]||Object.create(null),_e(a[s],[{axis:t},r[s],o[e]])})}),Object.keys(a).forEach(e=>{const t=a[e];_e(t,[Tt.scales[t.type],Tt.scale])}),a}function Bs(e){const t=e.options||(e.options={});t.plugins=pe(t.plugins,{}),t.scales=Us(e,t)}function Vs(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const Ws=new Map,Hs=new Set;function qs(e,t){let n=Ws.get(e);return n||(n=t(),Ws.set(e,n),Hs.add(n)),n}const $s=(e,t,n)=>{const r=je(t,n);void 0!==r&&e.add(r)};class Ks{constructor(e){this._config=function(e){return(e=e||{}).data=Vs(e.data),Bs(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Vs(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Bs(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return qs(e,()=>[["datasets.".concat(e),""]])}datasetAnimationScopeKeys(e,t){return qs("".concat(e,".transition.").concat(t),()=>[["datasets.".concat(e,".transitions.").concat(t),"transitions.".concat(t)],["datasets.".concat(e),""]])}datasetElementScopeKeys(e,t){return qs("".concat(e,"-").concat(t),()=>[["datasets.".concat(e,".elements.").concat(t),"datasets.".concat(e),"elements.".concat(t),""]])}pluginScopeKeys(e){const t=e.id,n=this.type;return qs("".concat(n,"-plugin-").concat(t),()=>[["plugins.".concat(t),...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const n=this._scopeCache;let r=n.get(e);return r&&!t||(r=new Map,n.set(e,r)),r}getOptionScopes(e,t,n){const{options:r,type:s}=this,a=this._cachedScopes(e,n),i=a.get(t);if(i)return i;const o=new Set;t.forEach(t=>{e&&(o.add(e),t.forEach(t=>$s(o,e,t))),t.forEach(e=>$s(o,r,e)),t.forEach(e=>$s(o,jt[s]||{},e)),t.forEach(e=>$s(o,Tt,e)),t.forEach(e=>$s(o,Ct,e))});const l=Array.from(o);return 0===l.length&&l.push(Object.create(null)),Hs.has(t)&&a.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,jt[t]||{},Tt.datasets[t]||{},{type:t},Tt,Ct]}resolveNamedOptions(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const s={$shared:!0},{resolver:a,subPrefixes:i}=Js(this._resolverCache,e,r);let o=a;if(function(e,t){const{isScriptable:n,isIndexable:r}=an(e);for(const s of t){const t=n(s),a=r(s),i=(a||t)&&e[s];if(t&&(Ee(i)||Ys(i))||a&&ce(i))return!0}return!1}(a,t)){s.$shared=!1;o=sn(a,n=Ee(n)?n():n,this.createResolver(e,n,i))}for(const l of t)s[l]=o[l];return s}createResolver(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],r=arguments.length>3?arguments[3]:void 0;const{resolver:s}=Js(this._resolverCache,e,n);return ue(t)?sn(s,t,void 0,r):s}}function Js(e,t,n){let r=e.get(t);r||(r=new Map,e.set(t,r));const s=n.join();let a=r.get(s);if(!a){a={resolver:rn(t,n),subPrefixes:n.filter(e=>!e.toLowerCase().includes("hover"))},r.set(s,a)}return a}const Ys=e=>ue(e)&&Object.getOwnPropertyNames(e).some(t=>Ee(e[t]));const Gs=["top","bottom","left","right","chartArea"];function Qs(e,t){return"top"===e||"bottom"===e||-1===Gs.indexOf(e)&&"x"===t}function Xs(e,t){return function(n,r){return n[e]===r[e]?n[t]-r[t]:n[e]-r[e]}}function Zs(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),ge(n&&n.onComplete,[e],t)}function ea(e){const t=e.chart,n=t.options.animation;ge(n&&n.onProgress,[e],t)}function ta(e){return jn()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const na={},ra=e=>{const t=ta(e);return Object.values(na).filter(e=>e.canvas===t).pop()};function sa(e,t,n){const r=Object.keys(e);for(const s of r){const r=+s;if(r>=t){const a=e[s];delete e[s],(n>0||r>t)&&(e[r+n]=a)}}}class aa{static register(){Ms.add(...arguments),ia()}static unregister(){Ms.remove(...arguments),ia()}constructor(e,t){const n=this.config=new Ks(t),r=ta(e),s=ra(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const a=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(e){return!jn()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?ns:ys}(r)),this.platform.updateConfig(n);const i=this.platform.acquireContext(r,a.aspectRatio),o=i&&i.canvas,l=o&&o.height,c=o&&o.width;this.id=oe(),this.ctx=i,this.canvas=o,this.width=c,this.height=l,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new As,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let n;return function(){for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return t?(clearTimeout(n),n=setTimeout(e,t,s)):e.apply(this,s),t}}(e=>this.update(e),a.resizeDelay||0),this._dataChanges=[],na[this.id]=this,i&&o?(Zn.listen(this,"complete",Zs),Zn.listen(this,"progress",ea),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:r,_aspectRatio:s}=this;return le(e)?t&&s?s:r?n/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Ms}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Rn(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Rt(this.canvas,this.ctx),this}stop(){return Zn.stop(this),this}resize(e,t){Zn.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,r=this.canvas,s=n.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(r,e,t,s),i=n.devicePixelRatio||this.platform.getDevicePixelRatio(),o=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,Rn(this,i,!0)&&(this.notifyPlugins("resize",{size:a}),ge(n.onResize,[this,a],this),this.attached&&this._doResize(o)&&this.render())}ensureScalesHaveIDs(){me(this.options.scales||{},(e,t)=>{e.id=t})}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,r=Object.keys(n).reduce((e,t)=>(e[t]=!1,e),{});let s=[];t&&(s=s.concat(Object.keys(t).map(e=>{const n=t[e],r=Fs(e,n),s="r"===r,a="x"===r;return{options:n,dposition:s?"chartArea":a?"bottom":"left",dtype:s?"radialLinear":a?"category":"linear"}}))),me(s,t=>{const s=t.options,a=s.id,i=Fs(a,s),o=pe(s.type,t.dtype);void 0!==s.position&&Qs(s.position,i)===Qs(t.dposition)||(s.position=t.dposition),r[a]=!0;let l=null;if(a in n&&n[a].type===o)l=n[a];else{l=new(Ms.getScale(o))({id:a,type:o,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(s,e)}),me(r,(e,t)=>{e||delete n[t]}),me(n,e=>{es.configure(this,e,e.options),es.addBox(this,e)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort((e,t)=>e.index-t.index),n>t){for(let e=t;e<n;++e)this._destroyDatasetMeta(e);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(Xs("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((e,n)=>{0===t.filter(t=>t===e._dataset).length&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=t.length;n<r;n++){const r=t[n];let s=this.getDatasetMeta(n);const a=r.type||this.config.type;if(s.type&&s.type!==a&&(this._destroyDatasetMeta(n),s=this.getDatasetMeta(n)),s.type=a,s.indexAxis=r.indexAxis||Ds(a,this.options),s.order=r.order||0,s.index=n,s.label=""+r.label,s.visible=this.isDatasetVisible(n),s.controller)s.controller.updateIndex(n),s.controller.linkScales();else{const t=Ms.getController(a),{datasetElementType:r,dataElementType:i}=Tt.datasets[a];Object.assign(t,{dataElementType:Ms.getElement(i),datasetElementType:r&&Ms.getElement(r)}),s.controller=new t(this,n),e.push(s.controller)}}return this._updateMetasets(),e}_resetElements(){me(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:e}=this.getDatasetMeta(l),t=!r&&-1===s.indexOf(e);e.buildOrUpdateElements(t),a=Math.max(+e.getMaxOverflow(),a)}a=this._minPadding=n.layout.autoPadding?a:0,this._updateLayout(a),r||me(s,e=>{e.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Xs("z","_idx"));const{_active:i,_lastEvent:o}=this;o?this._eventHandler(o,!0):i.length&&this._updateHoverStyles(i,i,!0),this.render()}_updateScales(){me(this.scales,e=>{es.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);Pe(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:s}of t){sa(e,r,"_removeElements"===n?-s:s)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=t=>new Set(e.filter(e=>e[0]===t).map((e,t)=>t+","+e.splice(1).join(","))),r=n(0);for(let s=1;s<t;s++)if(!Pe(r,n(s)))return;return Array.from(r).map(e=>e.split(",")).map(e=>({method:e[1],start:+e[2],count:+e[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;es.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],me(this.boxes,e=>{n&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))},this),this._layers.forEach((e,t)=>{e._idx=t}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,Ee(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),r={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(Zn.has(this)?this.attached&&!Zn.running(this)&&Zn.start(this):(this.draw(),Zs({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let r,s;for(r=0,s=t.length;r<s;++r){const s=t[r];e&&!s.visible||n.push(s)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n={meta:e,index:e.index,cancelable:!0},r=Qn(this,e);!1!==this.notifyPlugins("beforeDatasetDraw",n)&&(r&&Ft(t,r),e.controller.draw(),r&&zt(t),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return It(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,r){const s=Br.modes[t];return"function"===typeof s?s(this,e,n,r):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let r=n.filter(e=>e&&e._dataset===t).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=nn(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return"boolean"===typeof n.hidden?!n.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const r=n?"show":"hide",s=this.getDatasetMeta(e),a=s.controller._resolveAnimations(void 0,r);Ne(t)?(s.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),a.update(s,{visible:n}),this.update(t=>t.datasetIndex===e?r:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),Zn.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Rt(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete na[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(e,t,n)=>{e.offsetX=t,e.offsetY=n,this._eventHandler(e)};me(this.options.events,e=>n(e,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(n,r)=>{e[n]&&(t.removeEventListener(this,n,r),delete e[n])},s=(e,t)=>{this.canvas&&this.resize(e,t)};let a;const i=()=>{r("attach",i),this.attached=!0,this.resize(),n("resize",s),n("detach",a)};a=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),n("attach",i)},t.isAttached(this.canvas)?i():a()}unbindEvents(){me(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},me(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const r=n?"set":"remove";let s,a,i,o;for("dataset"===t&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),i=0,o=e.length;i<o;++i){a=e[i];const t=a&&this.getDatasetMeta(a.datasetIndex).controller;t&&t[r+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map(e=>{let{datasetIndex:t,index:n}=e;const r=this.getDatasetMeta(t);if(!r)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:r.data[n],index:n}});!ye(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}isPluginEnabled(e){return 1===this._plugins._cache.filter(t=>t.plugin.id===e).length}_updateHoverStyles(e,t,n){const r=this.options.hover,s=(e,t)=>e.filter(e=>!t.some(t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)),a=s(t,e),i=n?e:s(e,t);a.length&&this.updateHoverStyle(a,r.mode,!1),i.length&&r.mode&&this.updateHoverStyle(i,r.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},r=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",n,r))return;const s=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(s||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:r=[],options:s}=this,a=t,i=this._getActiveElements(e,r,n,a),o=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,n,r){return n&&"mouseout"!==e.type?r?t:e:null}(e,this._lastEvent,n,o);n&&(this._lastEvent=null,ge(s.onHover,[e,i,this],this),o&&ge(s.onClick,[e,i,this],this));const c=!ye(i,r);return(c||t)&&(this._active=i,this._updateHoverStyles(i,r,t)),this._lastEvent=l,c}_getActiveElements(e,t,n,r){if("mouseout"===e.type)return[];if(!n)return t;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,r)}}function ia(){return me(aa.instances,e=>e._plugins.invalidate())}function oa(e,t,n,r){const s=Gt(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const a=(n-t)/2,i=Math.min(a,r*t/2),o=e=>{const t=(n-Math.min(a,e))*r/2;return Xe(e,0,Math.min(a,t))};return{outerStart:o(s.outerStart),outerEnd:o(s.outerEnd),innerStart:Xe(s.innerStart,0,i),innerEnd:Xe(s.innerEnd,0,i)}}function la(e,t,n,r){return{x:n+e*Math.cos(t),y:r+e*Math.sin(t)}}function ca(e,t,n,r,s,a){const{x:i,y:o,startAngle:l,pixelMargin:c,innerRadius:u}=t,d=Math.max(t.outerRadius+r+n-c,0),h=u>0?u+r+n+c:0;let p=0;const f=s-l;if(r){const e=((u>0?u-r:0)+(d>0?d-r:0))/2;p=(f-(0!==e?f*e/(e+r):f))/2}const g=(f-Math.max(.001,f*d-n/Te)/d)/2,m=l+g+p,y=s-g-p,{outerStart:v,outerEnd:b,innerStart:x,innerEnd:w}=oa(t,h,d,y-m),_=d-v,k=d-b,S=m+v/_,j=y-b/k,C=h+x,N=h+w,E=m+x/C,P=y-w/N;if(e.beginPath(),a){const t=(S+j)/2;if(e.arc(i,o,d,S,t),e.arc(i,o,d,t,j),b>0){const t=la(k,j,i,o);e.arc(t.x,t.y,b,j,y+De)}const n=la(N,y,i,o);if(e.lineTo(n.x,n.y),w>0){const t=la(N,P,i,o);e.arc(t.x,t.y,w,y+De,P+Math.PI)}const r=(y-w/h+(m+x/h))/2;if(e.arc(i,o,h,y-w/h,r,!0),e.arc(i,o,h,r,m+x/h,!0),x>0){const t=la(C,E,i,o);e.arc(t.x,t.y,x,E+Math.PI,m-De)}const s=la(_,m,i,o);if(e.lineTo(s.x,s.y),v>0){const t=la(_,S,i,o);e.arc(t.x,t.y,v,m-De,S)}}else{e.moveTo(i,o);const t=Math.cos(S)*d+i,n=Math.sin(S)*d+o;e.lineTo(t,n);const r=Math.cos(j)*d+i,s=Math.sin(j)*d+o;e.lineTo(r,s)}e.closePath()}function ua(e,t,n,r,s){const{fullCircles:a,startAngle:i,circumference:o,options:l}=t,{borderWidth:c,borderJoinStyle:u,borderDash:d,borderDashOffset:h,borderRadius:p}=l,f="inner"===l.borderAlign;if(!c)return;e.setLineDash(d||[]),e.lineDashOffset=h,f?(e.lineWidth=2*c,e.lineJoin=u||"round"):(e.lineWidth=c,e.lineJoin=u||"bevel");let g=t.endAngle;if(a){ca(e,t,n,r,g,s);for(let t=0;t<a;++t)e.stroke();isNaN(o)||(g=i+(o%Me||Me))}f&&function(e,t,n){const{startAngle:r,pixelMargin:s,x:a,y:i,outerRadius:o,innerRadius:l}=t;let c=s/o;e.beginPath(),e.arc(a,i,o,r-c,n+c),l>s?(c=s/l,e.arc(a,i,l,n+c,r-c,!0)):e.arc(a,i,s,n+De,r-De),e.closePath(),e.clip()}(e,t,g),l.selfJoin&&g-i>=Te&&0===p&&"miter"!==u&&function(e,t,n){const{startAngle:r,x:s,y:a,outerRadius:i,innerRadius:o,options:l}=t,{borderWidth:c,borderJoinStyle:u}=l,d=Math.min(c/i,Ge(r-n));if(e.beginPath(),e.arc(s,a,i-c/2,r+d/2,n-d/2),o>0){const t=Math.min(c/o,Ge(r-n));e.arc(s,a,o+c/2,n-t/2,r+t/2,!0)}else{const t=Math.min(c/2,i*Ge(r-n));if("round"===u)e.arc(s,a,t,n-Te/2,r+Te/2,!0);else if("bevel"===u){const i=2*t*t,o=-i*Math.cos(n+Te/2)+s,l=-i*Math.sin(n+Te/2)+a,c=i*Math.cos(r+Te/2)+s,u=i*Math.sin(r+Te/2)+a;e.lineTo(o,l),e.lineTo(c,u)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}(e,t,g),a||(ca(e,t,n,r,g,s),e.stroke())}a(aa,"defaults",Tt),a(aa,"instances",na),a(aa,"overrides",jt),a(aa,"registry",Ms),a(aa,"version","4.5.0"),a(aa,"getChart",ra);class da extends vs{constructor(e){super(),a(this,"circumference",void 0),a(this,"endAngle",void 0),a(this,"fullCircles",void 0),a(this,"innerRadius",void 0),a(this,"outerRadius",void 0),a(this,"pixelMargin",void 0),a(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.getProps(["x","y"],n),{angle:s,distance:a}=Ke(r,{x:e,y:t}),{startAngle:i,endAngle:o,innerRadius:l,outerRadius:c,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),d=(this.options.spacing+this.options.borderWidth)/2,h=pe(u,o-i),p=Qe(s,i,o)&&i!==o,f=h>=Me||p,g=Ze(a,l+d,c+d);return f&&g}getCenterPoint(e){const{x:t,y:n,startAngle:r,endAngle:s,innerRadius:a,outerRadius:i}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:o,spacing:l}=this.options,c=(r+s)/2,u=(a+i+l+o)/2;return{x:t+Math.cos(c)*u,y:n+Math.sin(c)*u}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:n}=this,r=(t.offset||0)/4,s=(t.spacing||0)/2,a=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>Me?Math.floor(n/Me):0,0===n||this.innerRadius<0||this.outerRadius<0)return;e.save();const i=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(i)*r,Math.sin(i)*r);const o=r*(1-Math.sin(Math.min(Te,n||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,n,r,s){const{fullCircles:a,startAngle:i,circumference:o}=t;let l=t.endAngle;if(a){ca(e,t,n,r,l,s);for(let t=0;t<a;++t)e.fill();isNaN(o)||(l=i+(o%Me||Me))}ca(e,t,n,r,l,s),e.fill()}(e,this,o,s,a),ua(e,this,o,s,a),e.restore()}}function ha(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=pe(n.borderCapStyle,t.borderCapStyle),e.setLineDash(pe(n.borderDash,t.borderDash)),e.lineDashOffset=pe(n.borderDashOffset,t.borderDashOffset),e.lineJoin=pe(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=pe(n.borderWidth,t.borderWidth),e.strokeStyle=pe(n.borderColor,t.borderColor)}function pa(e,t,n){e.lineTo(n.x,n.y)}function fa(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.length,{start:s=0,end:a=r-1}=n,{start:i,end:o}=t,l=Math.max(s,i),c=Math.min(a,o),u=s<i&&a<i||s>o&&a>o;return{count:r,start:l,loop:t.loop,ilen:c<l&&!u?r+c-l:c-l}}function ga(e,t,n,r){const{points:s,options:a}=t,{count:i,start:o,loop:l,ilen:c}=fa(s,n,r),u=function(e){return e.stepped?Ut:e.tension||"monotone"===e.cubicInterpolationMode?Bt:pa}(a);let d,h,p,{move:f=!0,reverse:g}=r||{};for(d=0;d<=c;++d)h=s[(o+(g?c-d:d))%i],h.skip||(f?(e.moveTo(h.x,h.y),f=!1):u(e,p,h,g,a.stepped),p=h);return l&&(h=s[(o+(g?c:0))%i],u(e,p,h,g,a.stepped)),!!l}function ma(e,t,n,r){const s=t.points,{count:a,start:i,ilen:o}=fa(s,n,r),{move:l=!0,reverse:c}=r||{};let u,d,h,p,f,g,m=0,y=0;const v=e=>(i+(c?o-e:e))%a,b=()=>{p!==f&&(e.lineTo(m,f),e.lineTo(m,p),e.lineTo(m,g))};for(l&&(d=s[v(0)],e.moveTo(d.x,d.y)),u=0;u<=o;++u){if(d=s[v(u)],d.skip)continue;const t=d.x,n=d.y,r=0|t;r===h?(n<p?p=n:n>f&&(f=n),m=(y*m+t)/++y):(b(),e.lineTo(t,n),h=r,y=0,p=f=n),g=n}b()}function ya(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!n?ma:ga}a(da,"id","arc"),a(da,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),a(da,"defaultRoutes",{backgroundColor:"backgroundColor"}),a(da,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e});const va="function"===typeof Path2D;function ba(e,t,n,r){va&&!t.options.segment?function(e,t,n,r){let s=t._path;s||(s=t._path=new Path2D,t.path(s,n,r)&&s.closePath()),ha(e,t.options),e.stroke(s)}(e,t,n,r):function(e,t,n,r){const{segments:s,options:a}=t,i=ya(t);for(const o of s)ha(e,a,o.style),e.beginPath(),i(e,t,o,{start:n,end:n+r-1})&&e.closePath(),e.stroke()}(e,t,n,r)}class xa extends vs{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;Sn(this._points,n,e,r,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const n=e.points,r=e.options.spanGaps,s=n.length;if(!s)return[];const a=!!e._loop,{start:i,end:o}=function(e,t,n,r){let s=0,a=t-1;if(n&&!r)for(;s<t&&!e[s].skip;)s++;for(;s<t&&e[s].skip;)s++;for(s%=t,n&&(a+=s);a>s&&e[a%t].skip;)a--;return a%=t,{start:s,end:a}}(n,s,a,r);return Kn(e,!0===r?[{start:i,end:o,loop:a}]:function(e,t,n,r){const s=e.length,a=[];let i,o=t,l=e[t];for(i=t+1;i<=n;++i){const n=e[i%s];n.skip||n.stop?l.skip||(r=!1,a.push({start:t%s,end:(i-1)%s,loop:r}),t=o=n.stop?i:null):(o=i,l.skip&&(t=i)),l=n}return null!==o&&a.push({start:t%s,end:o%s,loop:r}),a}(n,i,o<i?o+s:o,!!e._fullLoop&&0===i&&o===s-1),n,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,r=e[t],s=this.points,a=$n(this,{property:t,start:r,end:r});if(!a.length)return;const i=[],o=function(e){return e.stepped?Fn:e.tension||"monotone"===e.cubicInterpolationMode?zn:In}(n);let l,c;for(l=0,c=a.length;l<c;++l){const{start:c,end:u}=a[l],d=s[c],h=s[u];if(d===h){i.push(d);continue}const p=o(d,h,Math.abs((r-d[t])/(h[t]-d[t])),n.stepped);p[t]=e[t],i.push(p)}return 1===i.length?i[0]:i}pathSegment(e,t,n){return ya(this)(e,this,t,n)}path(e,t,n){const r=this.segments,s=ya(this);let a=this._loop;t=t||0,n=n||this.points.length-t;for(const i of r)a&=s(e,this,i,{start:t,end:t+n-1});return!!a}draw(e,t,n,r){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),ba(e,this,n,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function wa(e,t,n,r){const s=e.options,{[n]:a}=e.getProps([n],r);return Math.abs(t-a)<s.radius+s.hitRadius}a(xa,"id","line"),a(xa,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),a(xa,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),a(xa,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e});class _a extends vs{constructor(e){super(),a(this,"parsed",void 0),a(this,"skip",void 0),a(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.options,{x:s,y:a}=this.getProps(["x","y"],n);return Math.pow(e-s,2)+Math.pow(t-a,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,t){return wa(this,e,"x",t)}inYRange(e,t){return wa(this,e,"y",t)}getCenterPoint(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const n=this.options;this.skip||n.radius<.1||!It(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,Dt(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function ka(e,t){const{x:n,y:r,base:s,width:a,height:i}=e.getProps(["x","y","base","width","height"],t);let o,l,c,u,d;return e.horizontal?(d=i/2,o=Math.min(n,s),l=Math.max(n,s),c=r-d,u=r+d):(d=a/2,o=n-d,l=n+d,c=Math.min(r,s),u=Math.max(r,s)),{left:o,top:c,right:l,bottom:u}}function Sa(e,t,n,r){return e?0:Xe(t,n,r)}function ja(e){const t=ka(e),n=t.right-t.left,r=t.bottom-t.top,s=function(e,t,n){const r=e.options.borderWidth,s=e.borderSkipped,a=Qt(r);return{t:Sa(s.top,a.top,0,n),r:Sa(s.right,a.right,0,t),b:Sa(s.bottom,a.bottom,0,n),l:Sa(s.left,a.left,0,t)}}(e,n/2,r/2),a=function(e,t,n){const{enableBorderRadius:r}=e.getProps(["enableBorderRadius"]),s=e.options.borderRadius,a=Xt(s),i=Math.min(t,n),o=e.borderSkipped,l=r||ue(s);return{topLeft:Sa(!l||o.top||o.left,a.topLeft,0,i),topRight:Sa(!l||o.top||o.right,a.topRight,0,i),bottomLeft:Sa(!l||o.bottom||o.left,a.bottomLeft,0,i),bottomRight:Sa(!l||o.bottom||o.right,a.bottomRight,0,i)}}(e,n/2,r/2);return{outer:{x:t.left,y:t.top,w:n,h:r,radius:a},inner:{x:t.left+s.l,y:t.top+s.t,w:n-s.l-s.r,h:r-s.t-s.b,radius:{topLeft:Math.max(0,a.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,a.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,a.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,a.bottomRight-Math.max(s.b,s.r))}}}}function Ca(e,t,n,r){const s=null===t,a=null===n,i=e&&!(s&&a)&&ka(e,r);return i&&(s||Ze(t,i.left,i.right))&&(a||Ze(n,i.top,i.bottom))}function Na(e,t){e.rect(t.x,t.y,t.w,t.h)}function Ea(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.x!==n.x?-t:0,s=e.y!==n.y?-t:0,a=(e.x+e.w!==n.x+n.w?t:0)-r,i=(e.y+e.h!==n.y+n.h?t:0)-s;return{x:e.x+r,y:e.y+s,w:e.w+a,h:e.h+i,radius:e.radius}}a(_a,"id","point"),a(_a,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),a(_a,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class Pa extends vs{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:n,backgroundColor:r}}=this,{inner:s,outer:a}=ja(this),i=(o=a.radius).topLeft||o.topRight||o.bottomLeft||o.bottomRight?qt:Na;var o;e.save(),a.w===s.w&&a.h===s.h||(e.beginPath(),i(e,Ea(a,t,s)),e.clip(),i(e,Ea(s,-t,a)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),i(e,Ea(s,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,n){return Ca(this,e,t,n)}inXRange(e,t){return Ca(this,e,null,t)}inYRange(e,t){return Ca(this,null,e,t)}getCenterPoint(e){const{x:t,y:n,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(t+r)/2:t,y:s?n:(n+r)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}a(Pa,"id","bar"),a(Pa,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),a(Pa,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function Ta(e,t,n,r){if(r)return;let s=t[e],a=n[e];return"angle"===e&&(s=Ge(s),a=Ge(a)),{property:e,start:s,end:a}}function Ma(e,t,n){for(;t>e;t--){const e=n[t];if(!isNaN(e.x)&&!isNaN(e.y))break}return t}function Aa(e,t,n,r){return e&&t?r(e[n],t[n]):e?e[n]:t?t[n]:0}function Oa(e,t){let n=[],r=!1;return ce(e)?(r=!0,n=e):n=function(e,t){const{x:n=null,y:r=null}=e||{},s=t.points,a=[];return t.segments.forEach(e=>{let{start:t,end:i}=e;i=Ma(t,i,s);const o=s[t],l=s[i];null!==r?(a.push({x:o.x,y:r}),a.push({x:l.x,y:r})):null!==n&&(a.push({x:n,y:o.y}),a.push({x:n,y:l.y}))}),a}(e,t),n.length?new xa({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function Ra(e){return e&&!1!==e.fill}function Da(e,t,n){let r=e[t].fill;const s=[t];let a;if(!n)return r;for(;!1!==r&&-1===s.indexOf(r);){if(!de(r))return r;if(a=e[r],!a)return!1;if(a.visible)return r;s.push(r),r=a.fill}return!1}function La(e,t,n){const r=function(e){const t=e.options,n=t.fill;let r=pe(n&&n.target,n);void 0===r&&(r=!!t.backgroundColor);if(!1===r||null===r)return!1;if(!0===r)return"origin";return r}(e);if(ue(r))return!isNaN(r.value)&&r;let s=parseFloat(r);return de(s)&&Math.floor(s)===s?function(e,t,n,r){"-"!==e&&"+"!==e||(n=t+n);if(n===t||n<0||n>=r)return!1;return n}(r[0],t,s,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function Ia(e,t,n){const r=[];for(let s=0;s<n.length;s++){const a=n[s],{first:i,last:o,point:l}=Fa(a,t,"x");if(!(!l||i&&o))if(i)r.unshift(l);else if(e.push(l),!o)break}e.push(...r)}function Fa(e,t,n){const r=e.interpolate(t,n);if(!r)return{};const s=r[n],a=e.segments,i=e.points;let o=!1,l=!1;for(let c=0;c<a.length;c++){const e=a[c],t=i[e.start][n],r=i[e.end][n];if(Ze(s,t,r)){o=s===t,l=s===r;break}}return{first:o,last:l,point:r}}class za{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,n){const{x:r,y:s,radius:a}=this;return t=t||{start:0,end:Me},e.arc(r,s,a,t.end,t.start,!0),!n.bounds}interpolate(e){const{x:t,y:n,radius:r}=this,s=e.angle;return{x:t+Math.cos(s)*r,y:n+Math.sin(s)*r,angle:s}}}function Ua(e){const{chart:t,fill:n,line:r}=e;if(de(n))return function(e,t){const n=e.getDatasetMeta(t),r=n&&e.isDatasetVisible(t);return r?n.dataset:null}(t,n);if("stack"===n)return function(e){const{scale:t,index:n,line:r}=e,s=[],a=r.segments,i=r.points,o=function(e,t){const n=[],r=e.getMatchingVisibleMetas("line");for(let s=0;s<r.length;s++){const e=r[s];if(e.index===t)break;e.hidden||n.unshift(e.dataset)}return n}(t,n);o.push(Oa({x:null,y:t.bottom},r));for(let l=0;l<a.length;l++){const e=a[l];for(let t=e.start;t<=e.end;t++)Ia(s,i[t],o)}return new xa({points:s,options:{}})}(e);if("shape"===n)return!0;const s=function(e){const t=e.scale||{};if(t.getPointPositionForValue)return function(e){const{scale:t,fill:n}=e,r=t.options,s=t.getLabels().length,a=r.reverse?t.max:t.min,i=function(e,t,n){let r;return r="start"===e?n:"end"===e?t.options.reverse?t.min:t.max:ue(e)?e.value:t.getBaseValue(),r}(n,t,a),o=[];if(r.grid.circular){const e=t.getPointPositionForValue(0,a);return new za({x:e.x,y:e.y,radius:t.getDistanceFromCenterForValue(i)})}for(let l=0;l<s;++l)o.push(t.getPointPositionForValue(l,i));return o}(e);return function(e){const{scale:t={},fill:n}=e,r=function(e,t){let n=null;return"start"===e?n=t.bottom:"end"===e?n=t.top:ue(e)?n=t.getPixelForValue(e.value):t.getBasePixel&&(n=t.getBasePixel()),n}(n,t);if(de(r)){const e=t.isHorizontal();return{x:e?r:null,y:e?null:r}}return null}(e)}(e);return s instanceof za?s:Oa(s,r)}function Ba(e,t,n){const r=Ua(t),{chart:s,index:a,line:i,scale:o,axis:l}=t,c=i.options,u=c.fill,d=c.backgroundColor,{above:h=d,below:p=d}=u||{},f=s.getDatasetMeta(a),g=Qn(s,f);r&&i.points.length&&(Ft(e,n),function(e,t){const{line:n,target:r,above:s,below:a,area:i,scale:o,clip:l}=t,c=n._loop?"angle":t.axis;e.save();let u=a;a!==s&&("x"===c?(Va(e,r,i.top),Ha(e,{line:n,target:r,color:s,scale:o,property:c,clip:l}),e.restore(),e.save(),Va(e,r,i.bottom)):"y"===c&&(Wa(e,r,i.left),Ha(e,{line:n,target:r,color:a,scale:o,property:c,clip:l}),e.restore(),e.save(),Wa(e,r,i.right),u=s));Ha(e,{line:n,target:r,color:u,scale:o,property:c,clip:l}),e.restore()}(e,{line:i,target:r,above:h,below:p,area:n,scale:o,axis:l,clip:g}),zt(e))}function Va(e,t,n){const{segments:r,points:s}=t;let a=!0,i=!1;e.beginPath();for(const o of r){const{start:r,end:l}=o,c=s[r],u=s[Ma(r,l,s)];a?(e.moveTo(c.x,c.y),a=!1):(e.lineTo(c.x,n),e.lineTo(c.x,c.y)),i=!!t.pathSegment(e,o,{move:i}),i?e.closePath():e.lineTo(u.x,n)}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function Wa(e,t,n){const{segments:r,points:s}=t;let a=!0,i=!1;e.beginPath();for(const o of r){const{start:r,end:l}=o,c=s[r],u=s[Ma(r,l,s)];a?(e.moveTo(c.x,c.y),a=!1):(e.lineTo(n,c.y),e.lineTo(c.x,c.y)),i=!!t.pathSegment(e,o,{move:i}),i?e.closePath():e.lineTo(n,u.y)}e.lineTo(n,t.first().y),e.closePath(),e.clip()}function Ha(e,t){const{line:n,target:r,property:s,color:a,scale:i,clip:o}=t,l=function(e,t,n){const r=e.segments,s=e.points,a=t.points,i=[];for(const o of r){let{start:e,end:r}=o;r=Ma(e,r,s);const l=Ta(n,s[e],s[r],o.loop);if(!t.segments){i.push({source:o,target:l,start:s[e],end:s[r]});continue}const c=$n(t,l);for(const t of c){const e=Ta(n,a[t.start],a[t.end],t.loop),r=qn(o,s,e);for(const s of r)i.push({source:s,target:t,start:{[n]:Aa(l,e,"start",Math.max)},end:{[n]:Aa(l,e,"end",Math.min)}})}}return i}(n,r,s);for(const{source:c,target:u,start:d,end:h}of l){const{style:{backgroundColor:t=a}={}}=c,l=!0!==r;e.save(),e.fillStyle=t,qa(e,i,o,l&&Ta(s,d,h)),e.beginPath();const p=!!n.pathSegment(e,c);let f;if(l){p?e.closePath():$a(e,r,h,s);const t=!!r.pathSegment(e,u,{move:p,reverse:!0});f=p&&t,f||$a(e,r,d,s)}e.closePath(),e.fill(f?"evenodd":"nonzero"),e.restore()}}function qa(e,t,n,r){const s=t.chart.chartArea,{property:a,start:i,end:o}=r||{};if("x"===a||"y"===a){let t,r,l,c;"x"===a?(t=i,r=s.top,l=o,c=s.bottom):(t=s.left,r=i,l=s.right,c=o),e.beginPath(),n&&(t=Math.max(t,n.left),l=Math.min(l,n.right),r=Math.max(r,n.top),c=Math.min(c,n.bottom)),e.rect(t,r,l-t,c-r),e.clip()}}function $a(e,t,n,r){const s=t.interpolate(n,r);s&&e.lineTo(s.x,s.y)}var Ka={id:"filler",afterDatasetsUpdate(e,t,n){const r=(e.data.datasets||[]).length,s=[];let a,i,o,l;for(i=0;i<r;++i)a=e.getDatasetMeta(i),o=a.dataset,l=null,o&&o.options&&o instanceof xa&&(l={visible:e.isDatasetVisible(i),index:i,fill:La(o,i,r),chart:e,axis:a.controller.options.indexAxis,scale:a.vScale,line:o}),a.$filler=l,s.push(l);for(i=0;i<r;++i)l=s[i],l&&!1!==l.fill&&(l.fill=Da(s,i,n.propagate))},beforeDraw(e,t,n){const r="beforeDraw"===n.drawTime,s=e.getSortedVisibleDatasetMetas(),a=e.chartArea;for(let i=s.length-1;i>=0;--i){const t=s[i].$filler;t&&(t.line.updateControlPoints(a,t.axis),r&&t.fill&&Ba(e.ctx,t,a))}},beforeDatasetsDraw(e,t,n){if("beforeDatasetsDraw"!==n.drawTime)return;const r=e.getSortedVisibleDatasetMetas();for(let s=r.length-1;s>=0;--s){const t=r[s].$filler;Ra(t)&&Ba(e.ctx,t,e.chartArea)}},beforeDatasetDraw(e,t,n){const r=t.meta.$filler;Ra(r)&&"beforeDatasetDraw"===n.drawTime&&Ba(e.ctx,r,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Ja=(e,t)=>{let{boxHeight:n=t,boxWidth:r=t}=e;return e.usePointStyle&&(n=Math.min(n,t),r=e.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(t,n)}};class Ya extends vs{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=ge(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(t=>e.filter(t,this.chart.data))),e.sort&&(t=t.sort((t,n)=>e.sort(t,n,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const n=e.labels,r=en(n.font),s=r.size,a=this._computeTitleHeight(),{boxWidth:i,itemHeight:o}=Ja(n,s);let l,c;t.font=r.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(a,s,i,o)+10):(c=this.maxHeight,l=this._fitCols(a,r,i,o)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,r){const{ctx:s,maxWidth:a,options:{labels:{padding:i}}}=this,o=this.legendHitBoxes=[],l=this.lineWidths=[0],c=r+i;let u=e;s.textAlign="left",s.textBaseline="middle";let d=-1,h=-c;return this.legendItems.forEach((e,p)=>{const f=n+t/2+s.measureText(e.text).width;(0===p||l[l.length-1]+f+2*i>a)&&(u+=c,l[l.length-(p>0?0:1)]=0,h+=c,d++),o[p]={left:0,top:h,row:d,width:f,height:r},l[l.length-1]+=f+i}),u}_fitCols(e,t,n,r){const{ctx:s,maxHeight:a,options:{labels:{padding:i}}}=this,o=this.legendHitBoxes=[],l=this.columnSizes=[],c=a-e;let u=i,d=0,h=0,p=0,f=0;return this.legendItems.forEach((e,a)=>{const{itemWidth:g,itemHeight:m}=function(e,t,n,r,s){const a=function(e,t,n,r){let s=e.text;s&&"string"!==typeof s&&(s=s.reduce((e,t)=>e.length>t.length?e:t));return t+n.size/2+r.measureText(s).width}(r,e,t,n),i=function(e,t,n){let r=e;"string"!==typeof t.text&&(r=Ga(t,n));return r}(s,r,t.lineHeight);return{itemWidth:a,itemHeight:i}}(n,t,s,e,r);a>0&&h+m+2*i>c&&(u+=d+i,l.push({width:d,height:h}),p+=d+i,f++,d=h=0),o[a]={left:p,top:h,col:f,width:g,height:m},d=Math.max(d,g),h+=m+i}),u+=d,l.push({width:d,height:h}),u}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:r},rtl:s}}=this,a=Un(s,this.left,this.width);if(this.isHorizontal()){let s=0,i=ct(n,this.left+r,this.right-this.lineWidths[s]);for(const o of t)s!==o.row&&(s=o.row,i=ct(n,this.left+r,this.right-this.lineWidths[s])),o.top+=this.top+e+r,o.left=a.leftForLtr(a.x(i),o.width),i+=o.width+r}else{let s=0,i=ct(n,this.top+e+r,this.bottom-this.columnSizes[s].height);for(const o of t)o.col!==s&&(s=o.col,i=ct(n,this.top+e+r,this.bottom-this.columnSizes[s].height)),o.top=i,o.left+=this.left+r,o.left=a.leftForLtr(a.x(o.left),o.width),i+=o.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;Ft(e,this),this._draw(),zt(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:r}=this,{align:s,labels:a}=e,i=Tt.color,o=Un(e.rtl,this.left,this.width),l=en(a.font),{padding:c}=a,u=l.size,d=u/2;let h;this.drawTitle(),r.textAlign=o.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=l.string;const{boxWidth:p,boxHeight:f,itemHeight:g}=Ja(a,u),m=this.isHorizontal(),y=this._computeTitleHeight();h=m?{x:ct(s,this.left+c,this.right-n[0]),y:this.top+c+y,line:0}:{x:this.left+c,y:ct(s,this.top+y+c,this.bottom-t[0].height),line:0},Bn(this.ctx,e.textDirection);const v=g+c;this.legendItems.forEach((b,x)=>{r.strokeStyle=b.fontColor,r.fillStyle=b.fontColor;const w=r.measureText(b.text).width,_=o.textAlign(b.textAlign||(b.textAlign=a.textAlign)),k=p+d+w;let S=h.x,j=h.y;o.setWidth(this.width),m?x>0&&S+k+c>this.right&&(j=h.y+=v,h.line++,S=h.x=ct(s,this.left+c,this.right-n[h.line])):x>0&&j+v>this.bottom&&(S=h.x=S+t[h.line].width+c,h.line++,j=h.y=ct(s,this.top+y+c,this.bottom-t[h.line].height));if(function(e,t,n){if(isNaN(p)||p<=0||isNaN(f)||f<0)return;r.save();const s=pe(n.lineWidth,1);if(r.fillStyle=pe(n.fillStyle,i),r.lineCap=pe(n.lineCap,"butt"),r.lineDashOffset=pe(n.lineDashOffset,0),r.lineJoin=pe(n.lineJoin,"miter"),r.lineWidth=s,r.strokeStyle=pe(n.strokeStyle,i),r.setLineDash(pe(n.lineDash,[])),a.usePointStyle){const i={radius:f*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:s},l=o.xPlus(e,p/2);Lt(r,i,l,t+d,a.pointStyleWidth&&p)}else{const a=t+Math.max((u-f)/2,0),i=o.leftForLtr(e,p),l=Xt(n.borderRadius);r.beginPath(),Object.values(l).some(e=>0!==e)?qt(r,{x:i,y:a,w:p,h:f,radius:l}):r.rect(i,a,p,f),r.fill(),0!==s&&r.stroke()}r.restore()}(o.x(S),j,b),S=((e,t,n,r)=>e===(r?"left":"right")?n:"center"===e?(t+n)/2:t)(_,S+p+d,m?S+k:this.right,e.rtl),function(e,t,n){Ht(r,n.text,e,t+g/2,l,{strikethrough:n.hidden,textAlign:o.textAlign(n.textAlign)})}(o.x(S),j,b),m)h.x+=k+c;else if("string"!==typeof b.text){const e=l.lineHeight;h.y+=Ga(b,e)+c}else h.y+=v}),Vn(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=en(t.font),r=Zt(t.padding);if(!t.display)return;const s=Un(e.rtl,this.left,this.width),a=this.ctx,i=t.position,o=n.size/2,l=r.top+o;let c,u=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),c=this.top+l,u=ct(e.align,u,this.right-d);else{const t=this.columnSizes.reduce((e,t)=>Math.max(e,t.height),0);c=l+ct(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const h=ct(i,u,u+d);a.textAlign=s.textAlign(lt(i)),a.textBaseline="middle",a.strokeStyle=t.color,a.fillStyle=t.color,a.font=n.string,Ht(a,t.text,h,c,n)}_computeTitleHeight(){const e=this.options.title,t=en(e.font),n=Zt(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,r,s;if(Ze(e,this.left,this.right)&&Ze(t,this.top,this.bottom))for(s=this.legendHitBoxes,n=0;n<s.length;++n)if(r=s[n],Ze(e,r.left,r.left+r.width)&&Ze(t,r.top,r.top+r.height))return this.legendItems[n];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const a=this._hoveredItem,i=(s=n,null!==(r=a)&&null!==s&&r.datasetIndex===s.datasetIndex&&r.index===s.index);a&&!i&&ge(t.onLeave,[e,a,this],this),this._hoveredItem=n,n&&!i&&ge(t.onHover,[e,n,this],this)}else n&&ge(t.onClick,[e,n,this],this);var r,s}}function Ga(e,t){return t*(e.text?e.text.length:0)}var Qa={id:"legend",_element:Ya,start(e,t,n){const r=e.legend=new Ya({ctx:e.ctx,options:n,chart:e});es.configure(e,r,n),es.addBox(e,r)},stop(e){es.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const r=e.legend;es.configure(e,r,n),r.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const r=t.datasetIndex,s=n.chart;s.isDatasetVisible(r)?(s.hide(r),t.hidden=!0):(s.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:s,color:a,useBorderRadius:i,borderRadius:o}}=e.legend.options;return e._getSortedDatasetMetas().map(e=>{const l=e.controller.getStyle(n?0:void 0),c=Zt(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:a,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:r||l.pointStyle,rotation:l.rotation,textAlign:s||l.textAlign,borderRadius:i&&(o||l.borderRadius),datasetIndex:e.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class Xa extends vs{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const r=ce(n.text)?n.text.length:1;this._padding=Zt(n.padding);const s=r*en(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:n,bottom:r,right:s,options:a}=this,i=a.align;let o,l,c,u=0;return this.isHorizontal()?(l=ct(i,n,s),c=t+e,o=s-n):("left"===a.position?(l=n+e,c=ct(i,r,t),u=-.5*Te):(l=s-e,c=ct(i,t,r),u=.5*Te),o=r-t),{titleX:l,titleY:c,maxWidth:o,rotation:u}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const n=en(t.font),r=n.lineHeight/2+this._padding.top,{titleX:s,titleY:a,maxWidth:i,rotation:o}=this._drawArgs(r);Ht(e,t.text,0,0,n,{color:t.color,maxWidth:i,rotation:o,textAlign:lt(t.align),textBaseline:"middle",translation:[s,a]})}}var Za={id:"title",_element:Xa,start(e,t,n){!function(e,t){const n=new Xa({ctx:e.ctx,options:t,chart:e});es.configure(e,n,t),es.addBox(e,n),e.titleBlock=n}(e,n)},stop(e){const t=e.titleBlock;es.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const r=e.titleBlock;es.configure(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};new WeakMap;const ei={average(e){if(!e.length)return!1;let t,n,r=new Set,s=0,a=0;for(t=0,n=e.length;t<n;++t){const n=e[t].element;if(n&&n.hasValue()){const e=n.tooltipPosition();r.add(e.x),s+=e.y,++a}}if(0===a||0===r.size)return!1;return{x:[...r].reduce((e,t)=>e+t)/r.size,y:s/a}},nearest(e,t){if(!e.length)return!1;let n,r,s,a=t.x,i=t.y,o=Number.POSITIVE_INFINITY;for(n=0,r=e.length;n<r;++n){const r=e[n].element;if(r&&r.hasValue()){const e=Je(t,r.getCenterPoint());e<o&&(o=e,s=r)}}if(s){const e=s.tooltipPosition();a=e.x,i=e.y}return{x:a,y:i}}};function ti(e,t){return t&&(ce(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function ni(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function ri(e,t){const{element:n,datasetIndex:r,index:s}=t,a=e.getDatasetMeta(r).controller,{label:i,value:o}=a.getLabelAndValue(s);return{chart:e,label:i,parsed:a.getParsed(s),raw:e.data.datasets[r].data[s],formattedValue:o,dataset:a.getDataset(),dataIndex:s,datasetIndex:r,element:n}}function si(e,t){const n=e.chart.ctx,{body:r,footer:s,title:a}=e,{boxWidth:i,boxHeight:o}=t,l=en(t.bodyFont),c=en(t.titleFont),u=en(t.footerFont),d=a.length,h=s.length,p=r.length,f=Zt(t.padding);let g=f.height,m=0,y=r.reduce((e,t)=>e+t.before.length+t.lines.length+t.after.length,0);if(y+=e.beforeBody.length+e.afterBody.length,d&&(g+=d*c.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),y){g+=p*(t.displayColors?Math.max(o,l.lineHeight):l.lineHeight)+(y-p)*l.lineHeight+(y-1)*t.bodySpacing}h&&(g+=t.footerMarginTop+h*u.lineHeight+(h-1)*t.footerSpacing);let v=0;const b=function(e){m=Math.max(m,n.measureText(e).width+v)};return n.save(),n.font=c.string,me(e.title,b),n.font=l.string,me(e.beforeBody.concat(e.afterBody),b),v=t.displayColors?i+2+t.boxPadding:0,me(r,e=>{me(e.before,b),me(e.lines,b),me(e.after,b)}),v=0,n.font=u.string,me(e.footer,b),n.restore(),m+=f.width,{width:m,height:g}}function ai(e,t,n,r){const{x:s,width:a}=n,{width:i,chartArea:{left:o,right:l}}=e;let c="center";return"center"===r?c=s<=(o+l)/2?"left":"right":s<=a/2?c="left":s>=i-a/2&&(c="right"),function(e,t,n,r){const{x:s,width:a}=r,i=n.caretSize+n.caretPadding;return"left"===e&&s+a+i>t.width||"right"===e&&s-a-i<0||void 0}(c,e,t,n)&&(c="center"),c}function ii(e,t,n){const r=n.yAlign||t.yAlign||function(e,t){const{y:n,height:r}=t;return n<r/2?"top":n>e.height-r/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||ai(e,t,n,r),yAlign:r}}function oi(e,t,n,r){const{caretSize:s,caretPadding:a,cornerRadius:i}=e,{xAlign:o,yAlign:l}=n,c=s+a,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:p}=Xt(i);let f=function(e,t){let{x:n,width:r}=e;return"right"===t?n-=r:"center"===t&&(n-=r/2),n}(t,o);const g=function(e,t,n){let{y:r,height:s}=e;return"top"===t?r+=n:r-="bottom"===t?s+n:s/2,r}(t,l,c);return"center"===l?"left"===o?f+=c:"right"===o&&(f-=c):"left"===o?f-=Math.max(u,h)+s:"right"===o&&(f+=Math.max(d,p)+s),{x:Xe(f,0,r.width-t.width),y:Xe(g,0,r.height-t.height)}}function li(e,t,n){const r=Zt(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-r.right:e.x+r.left}function ci(e){return ti([],ni(e))}function ui(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const di={beforeTitle:ie,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,r=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return n[t.dataIndex]}return""},afterTitle:ie,beforeBody:ie,beforeLabel:ie,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return le(n)||(t+=n),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:ie,afterBody:ie,beforeFooter:ie,footer:ie,afterFooter:ie};function hi(e,t,n,r){const s=e[t].call(n,r);return"undefined"===typeof s?di[t].call(n,r):s}class pi extends vs{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&t.options.animation&&n.animations,s=new rr(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,n=this._tooltipItems,nn(e,{tooltip:t,tooltipItems:n,type:"tooltip"})));var e,t,n}getTitle(e,t){const{callbacks:n}=t,r=hi(n,"beforeTitle",this,e),s=hi(n,"title",this,e),a=hi(n,"afterTitle",this,e);let i=[];return i=ti(i,ni(r)),i=ti(i,ni(s)),i=ti(i,ni(a)),i}getBeforeBody(e,t){return ci(hi(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:n}=t,r=[];return me(e,e=>{const t={before:[],lines:[],after:[]},s=ui(n,e);ti(t.before,ni(hi(s,"beforeLabel",this,e))),ti(t.lines,hi(s,"label",this,e)),ti(t.after,ni(hi(s,"afterLabel",this,e))),r.push(t)}),r}getAfterBody(e,t){return ci(hi(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:n}=t,r=hi(n,"beforeFooter",this,e),s=hi(n,"footer",this,e),a=hi(n,"afterFooter",this,e);let i=[];return i=ti(i,ni(r)),i=ti(i,ni(s)),i=ti(i,ni(a)),i}_createItems(e){const t=this._active,n=this.chart.data,r=[],s=[],a=[];let i,o,l=[];for(i=0,o=t.length;i<o;++i)l.push(ri(this.chart,t[i]));return e.filter&&(l=l.filter((t,r,s)=>e.filter(t,r,s,n))),e.itemSort&&(l=l.sort((t,r)=>e.itemSort(t,r,n))),me(l,t=>{const n=ui(e.callbacks,t);r.push(hi(n,"labelColor",this,t)),s.push(hi(n,"labelPointStyle",this,t)),a.push(hi(n,"labelTextColor",this,t))}),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=a,this.dataPoints=l,l}update(e,t){const n=this.options.setContext(this.getContext()),r=this._active;let s,a=[];if(r.length){const e=ei[n.position].call(this,r,this._eventPosition);a=this._createItems(n),this.title=this.getTitle(a,n),this.beforeBody=this.getBeforeBody(a,n),this.body=this.getBody(a,n),this.afterBody=this.getAfterBody(a,n),this.footer=this.getFooter(a,n);const t=this._size=si(this,n),i=Object.assign({},e,t),o=ii(this.chart,n,i),l=oi(n,i,o,this.chart);this.xAlign=o.xAlign,this.yAlign=o.yAlign,s={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(s={opacity:0});this._tooltipItems=a,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,r){const s=this.getCaretPosition(e,n,r);t.lineTo(s.x1,s.y1),t.lineTo(s.x2,s.y2),t.lineTo(s.x3,s.y3)}getCaretPosition(e,t,n){const{xAlign:r,yAlign:s}=this,{caretSize:a,cornerRadius:i}=n,{topLeft:o,topRight:l,bottomLeft:c,bottomRight:u}=Xt(i),{x:d,y:h}=e,{width:p,height:f}=t;let g,m,y,v,b,x;return"center"===s?(b=h+f/2,"left"===r?(g=d,m=g-a,v=b+a,x=b-a):(g=d+p,m=g+a,v=b-a,x=b+a),y=g):(m="left"===r?d+Math.max(o,c)+a:"right"===r?d+p-Math.max(l,u)-a:this.caretX,"top"===s?(v=h,b=v-a,g=m-a,y=m+a):(v=h+f,b=v+a,g=m+a,y=m-a),x=v),{x1:g,x2:m,x3:y,y1:v,y2:b,y3:x}}drawTitle(e,t,n){const r=this.title,s=r.length;let a,i,o;if(s){const l=Un(n.rtl,this.x,this.width);for(e.x=li(this,n.titleAlign,n),t.textAlign=l.textAlign(n.titleAlign),t.textBaseline="middle",a=en(n.titleFont),i=n.titleSpacing,t.fillStyle=n.titleColor,t.font=a.string,o=0;o<s;++o)t.fillText(r[o],l.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+i,o+1===s&&(e.y+=n.titleMarginBottom-i)}}_drawColorBox(e,t,n,r,s){const a=this.labelColors[n],i=this.labelPointStyles[n],{boxHeight:o,boxWidth:l}=s,c=en(s.bodyFont),u=li(this,"left",s),d=r.x(u),h=o<c.lineHeight?(c.lineHeight-o)/2:0,p=t.y+h;if(s.usePointStyle){const t={radius:Math.min(l,o)/2,pointStyle:i.pointStyle,rotation:i.rotation,borderWidth:1},n=r.leftForLtr(d,l)+l/2,c=p+o/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,Dt(e,t,n,c),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,Dt(e,t,n,c)}else{e.lineWidth=ue(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;const t=r.leftForLtr(d,l),n=r.leftForLtr(r.xPlus(d,1),l-2),i=Xt(a.borderRadius);Object.values(i).some(e=>0!==e)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,qt(e,{x:t,y:p,w:l,h:o,radius:i}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),qt(e,{x:n,y:p+1,w:l-2,h:o-2,radius:i}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(t,p,l,o),e.strokeRect(t,p,l,o),e.fillStyle=a.backgroundColor,e.fillRect(n,p+1,l-2,o-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:r}=this,{bodySpacing:s,bodyAlign:a,displayColors:i,boxHeight:o,boxWidth:l,boxPadding:c}=n,u=en(n.bodyFont);let d=u.lineHeight,h=0;const p=Un(n.rtl,this.x,this.width),f=function(n){t.fillText(n,p.x(e.x+h),e.y+d/2),e.y+=d+s},g=p.textAlign(a);let m,y,v,b,x,w,_;for(t.textAlign=a,t.textBaseline="middle",t.font=u.string,e.x=li(this,g,n),t.fillStyle=n.bodyColor,me(this.beforeBody,f),h=i&&"right"!==g?"center"===a?l/2+c:l+2+c:0,b=0,w=r.length;b<w;++b){for(m=r[b],y=this.labelTextColors[b],t.fillStyle=y,me(m.before,f),v=m.lines,i&&v.length&&(this._drawColorBox(t,e,b,p,n),d=Math.max(u.lineHeight,o)),x=0,_=v.length;x<_;++x)f(v[x]),d=u.lineHeight;me(m.after,f)}h=0,d=u.lineHeight,me(this.afterBody,f),e.y-=s}drawFooter(e,t,n){const r=this.footer,s=r.length;let a,i;if(s){const o=Un(n.rtl,this.x,this.width);for(e.x=li(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=o.textAlign(n.footerAlign),t.textBaseline="middle",a=en(n.footerFont),t.fillStyle=n.footerColor,t.font=a.string,i=0;i<s;++i)t.fillText(r[i],o.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+n.footerSpacing}}drawBackground(e,t,n,r){const{xAlign:s,yAlign:a}=this,{x:i,y:o}=e,{width:l,height:c}=n,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:p}=Xt(r.cornerRadius);t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(i+u,o),"top"===a&&this.drawCaret(e,t,n,r),t.lineTo(i+l-d,o),t.quadraticCurveTo(i+l,o,i+l,o+d),"center"===a&&"right"===s&&this.drawCaret(e,t,n,r),t.lineTo(i+l,o+c-p),t.quadraticCurveTo(i+l,o+c,i+l-p,o+c),"bottom"===a&&this.drawCaret(e,t,n,r),t.lineTo(i+h,o+c),t.quadraticCurveTo(i,o+c,i,o+c-h),"center"===a&&"left"===s&&this.drawCaret(e,t,n,r),t.lineTo(i,o+u),t.quadraticCurveTo(i,o,i+u,o),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,r=n&&n.x,s=n&&n.y;if(r||s){const n=ei[e.position].call(this,this._active,this._eventPosition);if(!n)return;const a=this._size=si(this,e),i=Object.assign({},n,this._size),o=ii(t,e,i),l=oi(e,i,o,t);r._to===l.x&&s._to===l.y||(this.xAlign=o.xAlign,this.yAlign=o.yAlign,this.width=a.width,this.height=a.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const a=Zt(t.padding),i=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&i&&(e.save(),e.globalAlpha=n,this.drawBackground(s,e,r,t),Bn(e,t.textDirection),s.y+=a.top,this.drawTitle(s,e,t),this.drawBody(s,e,t),this.drawFooter(s,e,t),Vn(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,r=e.map(e=>{let{datasetIndex:t,index:n}=e;const r=this.chart.getDatasetMeta(t);if(!r)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:r.data[n],index:n}}),s=!ye(n,r),a=this._positionChanged(r,t);(s||a)&&(this._active=r,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],a=this._getActiveElements(e,s,t,n),i=this._positionChanged(a,e),o=t||!ye(a,s)||i;return o&&(this._active=a,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),o}_getActiveElements(e,t,n,r){const s=this.options;if("mouseout"===e.type)return[];if(!r)return t.filter(e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index));const a=this.chart.getElementsAtEventForMode(e,s.mode,s,n);return s.reverse&&a.reverse(),a}_positionChanged(e,t){const{caretX:n,caretY:r,options:s}=this,a=ei[s.position].call(this,e,t);return!1!==a&&(n!==a.x||r!==a.y)}}a(pi,"positioners",ei);var fi={id:"tooltip",_element:pi,positioners:ei,afterInit(e,t,n){n&&(e.tooltip=new pi({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",o(o({},n),{},{cancelable:!0})))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:di},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function gi(e,t,n,r){const s=e.indexOf(t);if(-1===s)return((e,t,n,r)=>("string"===typeof t?(n=e.push(t)-1,r.unshift({index:n,label:t})):isNaN(t)&&(n=null),n))(e,t,n,r);return s!==e.lastIndexOf(t)?n:s}function mi(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class yi extends Es{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:n,label:r}of t)e[n]===r&&e.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(le(e))return null;const n=this.getLabels();return((e,t)=>null===e?null:Xe(Math.round(e),0,t))(t=isFinite(t)&&n[t]===e?t:gi(n,e,pe(t,e),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(n=0),t||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,r=[];let s=this.getLabels();s=0===e&&t===s.length-1?s:s.slice(e,t+1),this._valueRange=Math.max(s.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let a=e;a<=t;a++)r.push({value:a});return r}getLabelForValue(e){return mi.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function vi(e,t){const n=[],{bounds:r,step:s,min:a,max:i,precision:o,count:l,maxTicks:c,maxDigits:u,includeBounds:d}=e,h=s||1,p=c-1,{min:f,max:g}=t,m=!le(a),y=!le(i),v=!le(l),b=(g-f)/(u+1);let x,w,_,k,S=Be((g-f)/p/h)*h;if(S<1e-14&&!m&&!y)return[{value:f},{value:g}];k=Math.ceil(g/S)-Math.floor(f/S),k>p&&(S=Be(k*S/p/h)*h),le(o)||(x=Math.pow(10,o),S=Math.ceil(S*x)/x),"ticks"===r?(w=Math.floor(f/S)*S,_=Math.ceil(g/S)*S):(w=f,_=g),m&&y&&s&&function(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}((i-a)/s,S/1e3)?(k=Math.round(Math.min((i-a)/S,c)),S=(i-a)/k,w=a,_=i):v?(w=m?a:w,_=y?i:_,k=l-1,S=(_-w)/k):(k=(_-w)/S,k=Ue(k,Math.round(k),S/1e3)?Math.round(k):Math.ceil(k));const j=Math.max($e(S),$e(w));x=Math.pow(10,le(o)?j:o),w=Math.round(w*x)/x,_=Math.round(_*x)/x;let C=0;for(m&&(d&&w!==a?(n.push({value:a}),w<a&&C++,Ue(Math.round((w+C*S)*x)/x,a,bi(a,b,e))&&C++):w<a&&C++);C<k;++C){const e=Math.round((w+C*S)*x)/x;if(y&&e>i)break;n.push({value:e})}return y&&d&&_!==i?n.length&&Ue(n[n.length-1].value,i,bi(i,b,e))?n[n.length-1].value=i:n.push({value:i}):y&&_!==i||n.push({value:_}),n}function bi(e,t,n){let{horizontal:r,minRotation:s}=n;const a=He(s),i=(r?Math.sin(a):Math.cos(a))||.001,o=.75*t*(""+e).length;return Math.min(t/i,o)}a(yi,"id","category"),a(yi,"defaults",{ticks:{callback:mi}});class xi extends Es{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return le(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this;const a=e=>r=t?r:e,i=e=>s=n?s:e;if(e){const e=ze(r),t=ze(s);e<0&&t<0?i(0):e>0&&t>0&&a(0)}if(r===s){let t=0===s?1:Math.abs(.05*s);i(s+t),e||a(r-t)}this.min=r,this.max=s}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:n,stepSize:r}=e;return r?(t=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,t>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(r," would result generating up to ").concat(t," ticks. Limiting to 1000.")),t=1e3)):(t=this.computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r=vi({maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&We(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const r=(n-t)/Math.max(e.length-1,1)/2;t-=r,n+=r}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return _t(e,this.chart.options.locale,this.options.ticks.format)}}class wi extends xi{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=de(e)?e:0,this.max=de(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=He(this.options.ticks.minRotation),r=(e?Math.sin(n):Math.cos(n))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}a(wi,"id","linear"),a(wi,"defaults",{ticks:{callback:St.formatters.numeric}});const _i=e=>Math.floor(Fe(e)),ki=(e,t)=>Math.pow(10,_i(e)+t);function Si(e){return 1===e/Math.pow(10,_i(e))}function ji(e,t,n){const r=Math.pow(10,n),s=Math.floor(e/r);return Math.ceil(t/r)-s}function Ci(e,t){let{min:n,max:r}=t;n=he(e.min,n);const s=[],a=_i(n);let i=function(e,t){let n=_i(t-e);for(;ji(e,t,n)>10;)n++;for(;ji(e,t,n)<10;)n--;return Math.min(n,_i(e))}(n,r),o=i<0?Math.pow(10,Math.abs(i)):1;const l=Math.pow(10,i),c=a>i?Math.pow(10,a):0,u=Math.round((n-c)*o)/o,d=Math.floor((n-c)/l/10)*l*10;let h=Math.floor((u-d)/Math.pow(10,i)),p=he(e.min,Math.round((c+d+h*Math.pow(10,i))*o)/o);for(;p<r;)s.push({value:p,major:Si(p),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(i++,h=2,o=i>=0?1:o),p=Math.round((c+d+h*Math.pow(10,i))*o)/o;const f=he(e.max,p);return s.push({value:f,major:Si(f),significand:h}),s}class Ni extends Es{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const n=xi.prototype.parse.apply(this,[e,t]);if(0!==n)return de(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=de(e)?Math.max(0,e):null,this.max=de(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!de(this._userMin)&&(this.min=e===ki(this.min,0)?ki(this.min,-1):ki(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let n=this.min,r=this.max;const s=t=>n=e?n:t,a=e=>r=t?r:e;n===r&&(n<=0?(s(1),a(10)):(s(ki(n,-1)),a(ki(r,1)))),n<=0&&s(ki(r,-1)),r<=0&&a(ki(n,1)),this.min=n,this.max=r}buildTicks(){const e=this.options,t=Ci({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&We(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":_t(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Fe(e),this._valueRange=Fe(this.max)-Fe(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Fe(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function Ei(e){const t=e.ticks;if(t.display&&e.display){const e=Zt(t.backdropPadding);return pe(t.font&&t.font.size,Tt.font.size)+e.height}return 0}function Pi(e,t,n){return n=ce(n)?n:[n],{w:At(e,t.string,n),h:n.length*t.lineHeight}}function Ti(e,t,n,r,s){return e===r||e===s?{start:t-n/2,end:t+n/2}:e<r||e>s?{start:t-n,end:t}:{start:t,end:t+n}}function Mi(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),r=[],s=[],a=e._pointLabels.length,i=e.options.pointLabels,o=i.centerPointLabels?Te/a:0;for(let l=0;l<a;l++){const a=i.setContext(e.getPointLabelContext(l));s[l]=a.padding;const c=e.getPointPosition(l,e.drawingArea+s[l],o),u=en(a.font),d=Pi(e.ctx,u,e._pointLabels[l]);r[l]=d;const h=Ge(e.getIndexAngle(l)+o),p=Math.round(qe(h));Ai(n,t,h,Ti(p,c.x,d.w,0,180),Ti(p,c.y,d.h,90,270))}e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=function(e,t,n){const r=[],s=e._pointLabels.length,a=e.options,{centerPointLabels:i,display:o}=a.pointLabels,l={extra:Ei(a)/2,additionalAngle:i?Te/s:0};let c;for(let u=0;u<s;u++){l.padding=n[u],l.size=t[u];const s=Oi(e,u,l);r.push(s),"auto"===o&&(s.visible=Ri(s,c),s.visible&&(c=s))}return r}(e,r,s)}function Ai(e,t,n,r,s){const a=Math.abs(Math.sin(n)),i=Math.abs(Math.cos(n));let o=0,l=0;r.start<t.l?(o=(t.l-r.start)/a,e.l=Math.min(e.l,t.l-o)):r.end>t.r&&(o=(r.end-t.r)/a,e.r=Math.max(e.r,t.r+o)),s.start<t.t?(l=(t.t-s.start)/i,e.t=Math.min(e.t,t.t-l)):s.end>t.b&&(l=(s.end-t.b)/i,e.b=Math.max(e.b,t.b+l))}function Oi(e,t,n){const r=e.drawingArea,{extra:s,additionalAngle:a,padding:i,size:o}=n,l=e.getPointPosition(t,r+s+i,a),c=Math.round(qe(Ge(l.angle+De))),u=function(e,t,n){90===n||270===n?e-=t/2:(n>270||n<90)&&(e-=t);return e}(l.y,o.h,c),d=function(e){if(0===e||180===e)return"center";if(e<180)return"left";return"right"}(c),h=function(e,t,n){"right"===n?e-=t:"center"===n&&(e-=t/2);return e}(l.x,o.w,d);return{visible:!0,x:l.x,y:u,textAlign:d,left:h,top:u,right:h+o.w,bottom:u+o.h}}function Ri(e,t){if(!t)return!0;const{left:n,top:r,right:s,bottom:a}=e;return!(It({x:n,y:r},t)||It({x:n,y:a},t)||It({x:s,y:r},t)||It({x:s,y:a},t))}function Di(e,t,n){const{left:r,top:s,right:a,bottom:i}=n,{backdropColor:o}=t;if(!le(o)){const n=Xt(t.borderRadius),l=Zt(t.backdropPadding);e.fillStyle=o;const c=r-l.left,u=s-l.top,d=a-r+l.width,h=i-s+l.height;Object.values(n).some(e=>0!==e)?(e.beginPath(),qt(e,{x:c,y:u,w:d,h:h,radius:n}),e.fill()):e.fillRect(c,u,d,h)}}function Li(e,t,n,r){const{ctx:s}=e;if(n)s.arc(e.xCenter,e.yCenter,t,0,Me);else{let n=e.getPointPosition(0,t);s.moveTo(n.x,n.y);for(let a=1;a<r;a++)n=e.getPointPosition(a,t),s.lineTo(n.x,n.y)}}a(Ni,"id","logarithmic"),a(Ni,"defaults",{ticks:{callback:St.formatters.logarithmic,major:{enabled:!0}}});class Ii extends xi{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Zt(Ei(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=de(e)&&!isNaN(e)?e:0,this.max=de(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Ei(this.options))}generateTickLabels(e){xi.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((e,t)=>{const n=ge(this.options.pointLabels.callback,[e,t],this);return n||0===n?n:""}).filter((e,t)=>this.chart.getDataVisibility(t))}fit(){const e=this.options;e.display&&e.pointLabels.display?Mi(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,n,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,r))}getIndexAngle(e){return Ge(e*(Me/(this._pointLabels.length||1))+He(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(le(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(le(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const n=t[e];return function(e,t,n){return nn(e,{label:n,index:t,type:"pointLabel"})}(this.getContext(),e,n)}}getPointPosition(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=this.getIndexAngle(e)-De+n;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:n,right:r,bottom:s}=this._pointLabelItems[e];return{left:t,top:n,right:r,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),Li(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:n,grid:r,border:s}=t,a=this._pointLabels.length;let i,o,l;if(t.pointLabels.display&&function(e,t){const{ctx:n,options:{pointLabels:r}}=e;for(let s=t-1;s>=0;s--){const t=e._pointLabelItems[s];if(!t.visible)continue;const a=r.setContext(e.getPointLabelContext(s));Di(n,a,t);const i=en(a.font),{x:o,y:l,textAlign:c}=t;Ht(n,e._pointLabels[s],o,l+i.lineHeight/2,i,{color:a.color,textAlign:c,textBaseline:"middle"})}}(this,a),r.display&&this.ticks.forEach((e,t)=>{if(0!==t||0===t&&this.min<0){o=this.getDistanceFromCenterForValue(e.value);const n=this.getContext(t),i=r.setContext(n),l=s.setContext(n);!function(e,t,n,r,s){const a=e.ctx,i=t.circular,{color:o,lineWidth:l}=t;!i&&!r||!o||!l||n<0||(a.save(),a.strokeStyle=o,a.lineWidth=l,a.setLineDash(s.dash||[]),a.lineDashOffset=s.dashOffset,a.beginPath(),Li(e,n,i,r),a.closePath(),a.stroke(),a.restore())}(this,i,o,a,l)}}),n.display){for(e.save(),i=a-1;i>=0;i--){const r=n.setContext(this.getPointLabelContext(i)),{color:s,lineWidth:a}=r;a&&s&&(e.lineWidth=a,e.strokeStyle=s,e.setLineDash(r.borderDash),e.lineDashOffset=r.borderDashOffset,o=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),l=this.getPointPosition(i,o),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,n=t.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let s,a;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((r,i)=>{if(0===i&&this.min>=0&&!t.reverse)return;const o=n.setContext(this.getContext(i)),l=en(o.font);if(s=this.getDistanceFromCenterForValue(this.ticks[i].value),o.showLabelBackdrop){e.font=l.string,a=e.measureText(r.label).width,e.fillStyle=o.backdropColor;const t=Zt(o.backdropPadding);e.fillRect(-a/2-t.left,-s-l.size/2-t.top,a+t.width,l.size+t.height)}Ht(e,r.label,0,-s,l,{color:o.color,strokeColor:o.textStrokeColor,strokeWidth:o.textStrokeWidth})}),e.restore()}drawTitle(){}}a(Ii,"id","radialLinear"),a(Ii,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:St.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}}),a(Ii,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),a(Ii,"descriptors",{angleLines:{_fallback:"grid"}});const Fi={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},zi=Object.keys(Fi);function Ui(e,t){return e-t}function Bi(e,t){if(le(t))return null;const n=e._adapter,{parser:r,round:s,isoWeekday:a}=e._parseOpts;let i=t;return"function"===typeof r&&(i=r(i)),de(i)||(i="string"===typeof r?n.parse(i,r):n.parse(i)),null===i?null:(s&&(i="week"!==s||!Ve(a)&&!0!==a?n.startOf(i,s):n.startOf(i,"isoWeek",a)),+i)}function Vi(e,t,n,r){const s=zi.length;for(let a=zi.indexOf(e);a<s-1;++a){const e=Fi[zi[a]],s=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((n-t)/(s*e.size))<=r)return zi[a]}return zi[s-1]}function Wi(e,t,n){if(n){if(n.length){const{lo:r,hi:s}=et(n,t);e[n[r]>=t?n[r]:n[s]]=!0}}else e[t]=!0}function Hi(e,t,n){const r=[],s={},a=t.length;let i,o;for(i=0;i<a;++i)o=t[i],s[o]=i,r.push({value:o,major:!1});return 0!==a&&n?function(e,t,n,r){const s=e._adapter,a=+s.startOf(t[0].value,r),i=t[t.length-1].value;let o,l;for(o=a;o<=i;o=+s.add(o,1,r))l=n[o],l>=0&&(t[l].major=!0);return t}(e,r,s,n):r}class qi extends Es{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.time||(e.time={}),r=this._adapter=new Rr(e.adapters.date);r.init(t),_e(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:Bi(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:r,max:s,minDefined:a,maxDefined:i}=this.getUserBounds();function o(e){a||isNaN(e.min)||(r=Math.min(r,e.min)),i||isNaN(e.max)||(s=Math.max(s,e.max))}a&&i||(o(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||o(this.getMinMax(!1))),r=de(r)&&!isNaN(r)?r:+t.startOf(Date.now(),n),s=de(s)&&!isNaN(s)?s:+t.endOf(Date.now(),n)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,r="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,a=function(e,t,n){let r=0,s=e.length;for(;r<s&&e[r]<t;)r++;for(;s>r&&e[s-1]>n;)s--;return r>0||s<e.length?e.slice(r,s):e}(r,s,this.max);return this._unit=t.unit||(n.autoSkip?Vi(t.minUnit,this.min,this.max,this._getLabelCapacity(s)):function(e,t,n,r,s){for(let a=zi.length-1;a>=zi.indexOf(n);a--){const n=zi[a];if(Fi[n].common&&e._adapter.diff(s,r,n)>=t-1)return n}return zi[n?zi.indexOf(n):0]}(this,a.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(let t=zi.indexOf(e)+1,n=zi.length;t<n;++t)if(Fi[zi[t]].common)return zi[t]}(this._unit):void 0,this.initOffsets(r),e.reverse&&a.reverse(),Hi(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(){let e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=0,s=0;this.options.offset&&n.length&&(e=this.getDecimalForValue(n[0]),r=1===n.length?1-e:(this.getDecimalForValue(n[1])-e)/2,t=this.getDecimalForValue(n[n.length-1]),s=1===n.length?t:(t-this.getDecimalForValue(n[n.length-2]))/2);const a=n.length<3?.5:.25;r=Xe(r,0,a),s=Xe(s,0,a),this._offsets={start:r,end:s,factor:1/(r+1+s)}}_generate(){const e=this._adapter,t=this.min,n=this.max,r=this.options,s=r.time,a=s.unit||Vi(s.minUnit,t,n,this._getLabelCapacity(t)),i=pe(r.ticks.stepSize,1),o="week"===a&&s.isoWeekday,l=Ve(o)||!0===o,c={};let u,d,h=t;if(l&&(h=+e.startOf(h,"isoWeek",o)),h=+e.startOf(h,l?"day":a),e.diff(n,t,a)>1e5*i)throw new Error(t+" and "+n+" are too far apart with stepSize of "+i+" "+a);const p="data"===r.ticks.source&&this.getDataTimestamps();for(u=h,d=0;u<n;u=+e.add(u,i,a),d++)Wi(c,u,p);return u!==n&&"ticks"!==r.bounds&&1!==d||Wi(c,u,p),Object.keys(c).sort(Ui).map(e=>+e)}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}format(e,t){const n=this.options.time.displayFormats,r=this._unit,s=t||n[r];return this._adapter.format(e,s)}_tickFormatFunction(e,t,n,r){const s=this.options,a=s.ticks.callback;if(a)return ge(a,[e,t,n],this);const i=s.time.displayFormats,o=this._unit,l=this._majorUnit,c=o&&i[o],u=l&&i[l],d=n[t],h=l&&u&&d&&d.major;return this._adapter.format(e,r||(h?u:c))}generateTickLabels(e){let t,n,r;for(t=0,n=e.length;t<n;++t)r=e[t],r.label=this._tickFormatFunction(r.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,r=He(this.isHorizontal()?t.maxRotation:t.minRotation),s=Math.cos(r),a=Math.sin(r),i=this._resolveTickFontOptions(0).size;return{w:n*s+i*a,h:n*a+i*s}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,r=n[t.unit]||n.millisecond,s=this._tickFormatFunction(e,0,Hi(this,[e],this._majorUnit),r),a=this._getLabelSize(s),i=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return i>0?i:1}getDataTimestamps(){let e,t,n=this._cache.data||[];if(n.length)return n;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,t=r.length;e<t;++e)n=n.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const r=this.getLabels();for(t=0,n=r.length;t<n;++t)e.push(Bi(this,r[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return at(e.sort(Ui))}}function $i(e,t,n){let r,s,a,i,o=0,l=e.length-1;n?(t>=e[o].pos&&t<=e[l].pos&&({lo:o,hi:l}=tt(e,"pos",t)),({pos:r,time:a}=e[o]),({pos:s,time:i}=e[l])):(t>=e[o].time&&t<=e[l].time&&({lo:o,hi:l}=tt(e,"time",t)),({time:r,pos:a}=e[o]),({time:s,pos:i}=e[l]));const c=s-r;return c?a+(i-a)*(t-r)/c:a}a(qi,"id","time"),a(qi,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class Ki extends qi{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=$i(t,this.min),this._tableRange=$i(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:n}=this,r=[],s=[];let a,i,o,l,c;for(a=0,i=e.length;a<i;++a)l=e[a],l>=t&&l<=n&&r.push(l);if(r.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(a=0,i=r.length;a<i;++a)c=r[a+1],o=r[a-1],l=r[a],Math.round((c+o)/2)!==l&&s.push({time:l,pos:a/(i-1)});return s}_generate(){const e=this.min,t=this.max;let n=super.getDataTimestamps();return n.includes(e)&&n.length||n.splice(0,0,e),n.includes(t)&&1!==n.length||n.push(t),n.sort((e,t)=>e-t)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),n=this.getLabelTimestamps();return e=t.length&&n.length?this.normalize(t.concat(n)):t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return($i(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return $i(this._table,n*this._tableRange+this._minPos,!0)}}a(Ki,"id","timeseries"),a(Ki,"defaults",qi.defaults);const Ji=["height","width","redraw","datasetIdKey","type","data","options","plugins","fallbackContent","updateMode"],Yi="label";function Gi(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function Qi(e,t){e.labels=t}function Xi(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Yi;const r=[];e.datasets=t.map(t=>{const s=e.datasets.find(e=>e[n]===t[n]);return s&&t.data&&!r.includes(s)?(r.push(s),Object.assign(s,t),s):o({},t)})}function Zi(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Yi;const n={labels:[],datasets:[]};return Qi(n,e.labels),Xi(n,e.datasets,t),n}function eo(t,n){const{height:r=150,width:s=300,redraw:a=!1,datasetIdKey:i,type:c,data:u,options:d,plugins:h=[],fallbackContent:p,updateMode:f}=t,g=l(t,Ji),m=(0,e.useRef)(null),y=(0,e.useRef)(null),v=()=>{m.current&&(y.current=new aa(m.current,{type:c,data:Zi(u,i),options:d&&o({},d),plugins:h}),Gi(n,y.current))},b=()=>{Gi(n,null),y.current&&(y.current.destroy(),y.current=null)};return(0,e.useEffect)(()=>{!a&&y.current&&d&&function(e,t){const n=e.options;n&&t&&Object.assign(n,t)}(y.current,d)},[a,d]),(0,e.useEffect)(()=>{!a&&y.current&&Qi(y.current.config.data,u.labels)},[a,u.labels]),(0,e.useEffect)(()=>{!a&&y.current&&u.datasets&&Xi(y.current.config.data,u.datasets,i)},[a,u.datasets]),(0,e.useEffect)(()=>{y.current&&(a?(b(),setTimeout(v)):y.current.update(f))},[a,d,u.labels,u.datasets,f]),(0,e.useEffect)(()=>{y.current&&(b(),setTimeout(v))},[c]),(0,e.useEffect)(()=>(v(),()=>b()),[]),e.createElement("canvas",o({ref:m,role:"img",height:r,width:s},g),p)}const to=(0,e.forwardRef)(eo);function no(t,n){return aa.register(n),(0,e.forwardRef)((n,r)=>e.createElement(to,o(o({},n),{},{ref:r,type:t})))}const ro=no("line",Nr);class so extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FunctionsError",n=arguments.length>2?arguments[2]:void 0;super(e),this.name=t,this.context=n}}class ao extends so{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class io extends so{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class oo extends so{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var lo;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(lo||(lo={}));var co=function(e,t,n,r){return new(n||(n=Promise))(function(s,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function o(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};class uo{constructor(e){let{headers:t={},customFetch:r,region:s=lo.Any}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=t,this.region=s,this.fetch=(e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}})(r)}setAuth(e){this.headers.Authorization="Bearer ".concat(e)}invoke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;return co(this,void 0,void 0,function*(){try{const{headers:r,method:s,body:a}=t;let i={},{region:o}=t;o||(o=this.region);const l=new URL("".concat(this.url,"/").concat(e));let c;o&&"any"!==o&&(i["x-region"]=o,l.searchParams.set("forceFunctionRegion",o)),a&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&("undefined"!==typeof Blob&&a instanceof Blob||a instanceof ArrayBuffer?(i["Content-Type"]="application/octet-stream",c=a):"string"===typeof a?(i["Content-Type"]="text/plain",c=a):"undefined"!==typeof FormData&&a instanceof FormData?c=a:(i["Content-Type"]="application/json",c=JSON.stringify(a)));const u=yield this.fetch(l.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},i),this.headers),r),body:c}).catch(e=>{throw new ao(e)}),d=u.headers.get("x-relay-error");if(d&&"true"===d)throw new io(u);if(!u.ok)throw new oo(u);let h,p=(null!==(n=u.headers.get("Content-Type"))&&void 0!==n?n:"text/plain").split(";")[0].trim();return h="application/json"===p?yield u.json():"application/octet-stream"===p?yield u.blob():"text/event-stream"===p?u:"multipart/form-data"===p?yield u.formData():yield u.text(),{data:h,error:null,response:u}}catch(r){return{data:null,error:r,response:r instanceof oo||r instanceof io?r.context:void 0}}})}}var ho=n(980);const{PostgrestClient:po,PostgrestQueryBuilder:fo,PostgrestFilterBuilder:go,PostgrestTransformBuilder:mo,PostgrestBuilder:yo,PostgrestError:vo}=ho;const bo=class{static detectEnvironment(){var e;if("undefined"!==typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!==typeof n.g&&"undefined"!==typeof n.g.WebSocket)return{type:"native",constructor:n.g.WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocketPair&&"undefined"===typeof globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!==typeof globalThis&&globalThis.EdgeRuntime||"undefined"!==typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!==typeof process){const e=process.versions;if(e&&e.node){const t=e.node,n=parseInt(t.replace(/^v/,"").split(".")[0]);return n>=22?"undefined"!==typeof globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:"Node.js ".concat(n," detected but native WebSocket not found."),workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:"Node.js ".concat(n," detected without native WebSocket support."),workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+="\n\nSuggested solution: ".concat(e.workaround)),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}},xo="realtime-js/".concat("2.15.5"),wo=1e4;var _o,ko,So,jo,Co,No;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(_o||(_o={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(ko||(ko={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(So||(So={})),function(e){e.websocket="websocket"}(jo||(jo={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(Co||(Co={}));class Eo{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"===typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const r=t.getUint8(1),s=t.getUint8(2);let a=this.HEADER_LENGTH+2;const i=n.decode(e.slice(a,a+r));a+=r;const o=n.decode(e.slice(a,a+s));a+=s;return{ref:null,topic:i,event:o,payload:JSON.parse(n.decode(e.slice(a,e.byteLength)))}}}class Po{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(No||(No={}));const To=function(e,t){var n;const r=null!==(n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipTypes)&&void 0!==n?n:[];return Object.keys(t).reduce((n,s)=>(n[s]=Mo(s,e,t,r),n),{})},Mo=(e,t,n,r)=>{const s=t.find(t=>t.name===e),a=null===s||void 0===s?void 0:s.type,i=n[e];return a&&!r.includes(a)?Ao(a,i):Oo(i)},Ao=(e,t)=>{if("_"===e.charAt(0)){const n=e.slice(1,e.length);return Io(t,n)}switch(e){case No.bool:return Ro(t);case No.float4:case No.float8:case No.int2:case No.int4:case No.int8:case No.numeric:case No.oid:return Do(t);case No.json:case No.jsonb:return Lo(t);case No.timestamp:return Fo(t);case No.abstime:case No.date:case No.daterange:case No.int4range:case No.int8range:case No.money:case No.reltime:case No.text:case No.time:case No.timestamptz:case No.timetz:case No.tsrange:case No.tstzrange:default:return Oo(t)}},Oo=e=>e,Ro=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Do=e=>{if("string"===typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Lo=e=>{if("string"===typeof e)try{return JSON.parse(e)}catch(t){return console.log("JSON parse error: ".concat(t)),e}return e},Io=(e,t)=>{if("string"!==typeof e)return e;const n=e.length-1,r=e[n];if("{"===e[0]&&"}"===r){let r;const a=e.slice(1,n);try{r=JSON.parse("["+a+"]")}catch(s){r=a?a.split(","):[]}return r.map(e=>Ao(t,e))}return e},Fo=e=>"string"===typeof e?e.replace(" ","T"):e,zo=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Uo{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:wo;this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive(e){let{status:t,response:n}=e;this.recHooks.filter(e=>e.status===t).forEach(e=>e.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Bo,Vo,Wo,Ho;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(Bo||(Bo={}));class qo{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null===t||void 0===t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.joinRef=this.channel._joinRef(),this.state=qo.syncState(this.state,e,t,n),this.pendingDiffs.forEach(e=>{this.state=qo.syncDiff(this.state,e,t,n)}),this.pendingDiffs=[],r()}),this.channel._on(n.diff,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=qo.syncDiff(this.state,e,t,n),r())}),this.onJoin((e,t,n)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:n})}),this.onLeave((e,t,n)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:n})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,r){const s=this.cloneDeep(e),a=this.transformState(t),i={},o={};return this.map(s,(e,t)=>{a[e]||(o[e]=t)}),this.map(a,(e,t)=>{const n=s[e];if(n){const r=t.map(e=>e.presence_ref),s=n.map(e=>e.presence_ref),a=t.filter(e=>s.indexOf(e.presence_ref)<0),l=n.filter(e=>r.indexOf(e.presence_ref)<0);a.length>0&&(i[e]=a),l.length>0&&(o[e]=l)}else i[e]=t}),this.syncDiff(s,{joins:i,leaves:o},n,r)}static syncDiff(e,t,n,r){const{joins:s,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(s,(t,r)=>{var s;const a=null!==(s=e[t])&&void 0!==s?s:[];if(e[t]=this.cloneDeep(r),a.length>0){const n=e[t].map(e=>e.presence_ref),r=a.filter(e=>n.indexOf(e.presence_ref)<0);e[t].unshift(...r)}n(t,a,r)}),this.map(a,(t,n)=>{let s=e[t];if(!s)return;const a=n.map(e=>e.presence_ref);s=s.filter(e=>a.indexOf(e.presence_ref)<0),e[t]=s,r(t,s,n),0===s.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const r=e[n];return t[n]="metas"in r?r.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(Vo||(Vo={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(Wo||(Wo={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(Ho||(Ho={}));class $o{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},n=arguments.length>2?arguments[2]:void 0;this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=ko.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Uo(this,So.join,this.params,this.timeout),this.rejoinTimer=new Po(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ko.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel","close ".concat(this.topic," ").concat(this._joinRef())),this.state=ko.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=ko.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel","timeout ".concat(this.topic),this.joinPush.timeout),this.state=ko.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=ko.errored,this.rejoinTimer.scheduleTimeout())}),this._on(So.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new qo(this),this.broadcastEndpointURL=zo(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;var n,r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==ko.closed){const{config:{broadcast:a,presence:i,private:o}}=this.params,l=null!==(r=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map(e=>e.filter))&&void 0!==r?r:[],c=!!this.bindings[Wo.PRESENCE]&&this.bindings[Wo.PRESENCE].length>0||!0===(null===(s=this.params.config.presence)||void 0===s?void 0:s.enabled),u={},d={broadcast:a,presence:Object.assign(Object.assign({},i),{enabled:c}),postgres_changes:l,private:o};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(t=>null===e||void 0===e?void 0:e(Ho.CHANNEL_ERROR,t)),this._onClose(()=>null===e||void 0===e?void 0:e(Ho.CLOSED)),this.updateJoinPayload(Object.assign({config:d},u)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async t=>{let{postgres_changes:n}=t;var r;if(this.socket.setAuth(),void 0!==n){const t=this.bindings.postgres_changes,s=null!==(r=null===t||void 0===t?void 0:t.length)&&void 0!==r?r:0,a=[];for(let r=0;r<s;r++){const s=t[r],{filter:{event:i,schema:o,table:l,filter:c}}=s,u=n&&n[r];if(!u||u.event!==i||u.schema!==o||u.table!==l||u.filter!==c)return this.unsubscribe(),this.state=ko.errored,void(null===e||void 0===e||e(Ho.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));a.push(Object.assign(Object.assign({},s),{id:u.id}))}return this.bindings.postgres_changes=a,void(e&&e(Ho.SUBSCRIBED))}null===e||void 0===e||e(Ho.SUBSCRIBED)}).receive("error",t=>{this.state=ko.errored,null===e||void 0===e||e(Ho.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null===e||void 0===e||e(Ho.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this.state===ko.joined&&e===Wo.PRESENCE&&(this.socket.log("channel","resubscribe to ".concat(this.topic," due to change in presence callbacks on joined channel")),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,n)}async send(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,r;if(this._canPush()||"broadcast"!==e.type)return new Promise(n=>{var r,s,a;const i=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(a=null===(s=null===(r=this.params)||void 0===r?void 0:r.config)||void 0===s?void 0:s.broadcast)||void 0===a?void 0:a.ack)||n("ok"),i.receive("ok",()=>n("ok")),i.receive("error",()=>n("error")),i.receive("timeout",()=>n("timed out"))});{const{event:a,payload:i}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?"Bearer ".concat(this.socket.accessTokenValue):"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:i,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(n=t.timeout)&&void 0!==n?n:this.timeout);return await(null===(r=e.body)||void 0===r?void 0:r.cancel()),e.ok?"ok":"error"}catch(s){return"AbortError"===s.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=ko.leaving;const t=()=>{this.socket.log("channel","leave ".concat(this.topic)),this._trigger(So.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(r=>{n=new Uo(this,So.leave,{},e),n.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{null===n||void 0===n||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ko.closed,this.bindings={}}async _fetchWithTimeout(e,t,n){const r=new AbortController,s=setTimeout(()=>r.abort(),n),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(s),a}_push(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw"tried to push '".concat(e,"' to '").concat(this.topic,"' before joining. Use channel.subscribe() before pushing events");let r=new Uo(this,e,t,n);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel","discarded push due to buffer overflow: ".concat(e.event),e.payload))}}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var r,s;const a=e.toLocaleLowerCase(),{close:i,error:o,leave:l,join:c}=So;if(n&&[i,o,l,c].indexOf(a)>=0&&n!==this._joinRef())return;let u=this._onMessage(a,t,n);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?null===(r=this.bindings.postgres_changes)||void 0===r||r.filter(e=>{var t,n,r;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(r=null===(n=e.filter)||void 0===n?void 0:n.event)||void 0===r?void 0:r.toLocaleLowerCase())===a}).map(e=>e.callback(u,n)):null===(s=this.bindings[a])||void 0===s||s.filter(e=>{var n,r,s,i,o,l;if(["broadcast","presence","postgres_changes"].includes(a)){if("id"in e){const a=e.id,i=null===(n=e.filter)||void 0===n?void 0:n.event;return a&&(null===(r=t.ids)||void 0===r?void 0:r.includes(a))&&("*"===i||(null===i||void 0===i?void 0:i.toLocaleLowerCase())===(null===(s=t.data)||void 0===s?void 0:s.type.toLocaleLowerCase()))}{const n=null===(o=null===(i=null===e||void 0===e?void 0:e.filter)||void 0===i?void 0:i.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===n||n===(null===(l=null===t||void 0===t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===a}).map(e=>{if("object"===typeof u&&"ids"in u){const e=u.data,{schema:t,table:n,commit_timestamp:r,type:s,errors:a}=e,i={schema:t,table:n,commit_timestamp:r,eventType:s,new:{},old:{},errors:a};u=Object.assign(Object.assign({},i),this._getPayloadRecords(e))}e.callback(u,n)})}_isClosed(){return this.state===ko.closed}_isJoined(){return this.state===ko.joined}_isJoining(){return this.state===ko.joining}_isLeaving(){return this.state===ko.leaving}_replyEventName(e){return"chan_reply_".concat(e)}_on(e,t,n){const r=e.toLocaleLowerCase(),s={type:r,filter:t,callback:n};return this.bindings[r]?this.bindings[r].push(s):this.bindings[r]=[s],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(e=>{var r;return!((null===(r=e.type)||void 0===r?void 0:r.toLocaleLowerCase())===n&&$o.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(So.close,{},e)}_onError(e){this._on(So.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ko.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=To(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=To(e.columns,e.old_record)),t}}const Ko=()=>{},Jo=25e3,Yo=10,Go=100,Qo=[1e3,2e3,5e3,1e4];class Xo{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=wo,this.transport=null,this.heartbeatIntervalMs=Jo,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ko,this.ref=0,this.reconnectTimer=null,this.logger=Ko,this.conn=null,this.sendBuffer=[],this.serializer=new Eo,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)}).catch(e=>{throw new Error("Failed to load @supabase/node-fetch: ".concat(e.message,". ")+"This is required for HTTP requests in Node.js environments without native fetch.")})}:fetch),function(){return t(...arguments)}},!(null===(r=null===t||void 0===t?void 0:t.params)||void 0===r?void 0:r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint="".concat(e,"/").concat(jo.websocket),this.httpEndpoint=zo(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null===t||void 0===t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=bo.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error("".concat(t,"\n\n")+'To use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })');throw new Error("WebSocket not available: ".concat(t))}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,null!==t&&void 0!==t?t:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case _o.connecting:return Co.Connecting;case _o.open:return Co.Open;case _o.closing:return Co.Closing;default:return Co.Closed}}isConnected(){return this.connectionState()===Co.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};const n="realtime:".concat(e),r=this.getChannels().find(e=>e.topic===n);if(r)return r;{const n=new $o("realtime:".concat(e),t,this);return this.channels.push(n),n}}push(e){const{topic:t,event:n,payload:r,ref:s}=e,a=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push","".concat(t," ").concat(n," (").concat(s,")"),r),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}return this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},Go)}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}else try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",'leaving duplicate topic "'.concat(e,'"')),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event)try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(o){this.log("error","error in heartbeat callback",o)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:n,payload:r,ref:s}=e,a=s?"(".concat(s,")"):"",i=r.status||"";this.log("receive","".concat(i," ").concat(t," ").concat(n," ").concat(a).trim(),r),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(n,r,s)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport","connected to ".concat(this.endpointURL())),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker","starting worker for from ".concat(this.workerUrl)):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport","".concat(e)),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(So.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?",r=new URLSearchParams(t);return"".concat(e).concat(n).concat(r)}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e=t||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(t=>{const n={access_token:e,version:xo};e&&t.updateJoinPayload(n),t.joinedOnce&&t._isJoined()&&t._push(So.access_token,{access_token:e})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"general";this.setAuth().catch(t=>{this.log("error","error setting auth in ".concat(e),t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(t)}catch(r){this.log("error","error in ".concat(e," callback"),r)}})}catch(n){this.log("error","error triggering ".concat(e," callbacks"),n)}}_setupReconnectionTimer(){this.reconnectTimer=new Po(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Yo)},this.reconnectAfterMs)}_initializeOptions(e){var t,n,r,s,a,i,o,l,c;if(this.transport=null!==(t=null===e||void 0===e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(n=null===e||void 0===e?void 0:e.timeout)&&void 0!==n?n:wo,this.heartbeatIntervalMs=null!==(r=null===e||void 0===e?void 0:e.heartbeatIntervalMs)&&void 0!==r?r:Jo,this.worker=null!==(s=null===e||void 0===e?void 0:e.worker)&&void 0!==s&&s,this.accessToken=null!==(a=null===e||void 0===e?void 0:e.accessToken)&&void 0!==a?a:null,this.heartbeatCallback=null!==(i=null===e||void 0===e?void 0:e.heartbeatCallback)&&void 0!==i?i:Ko,(null===e||void 0===e?void 0:e.params)&&(this.params=e.params),(null===e||void 0===e?void 0:e.logger)&&(this.logger=e.logger),((null===e||void 0===e?void 0:e.logLevel)||(null===e||void 0===e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(o=null===e||void 0===e?void 0:e.reconnectAfterMs)&&void 0!==o?o:e=>Qo[e-1]||1e4,this.encode=null!==(l=null===e||void 0===e?void 0:e.encode)&&void 0!==l?l:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(c=null===e||void 0===e?void 0:e.decode)&&void 0!==c?c:this.serializer.decode.bind(this.serializer),this.worker){if("undefined"!==typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null===e||void 0===e?void 0:e.workerUrl}}}class Zo extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function el(e){return"object"===typeof e&&null!==e&&"__isStorageError"in e}class tl extends Zo{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class nl extends Zo{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var rl=function(e,t,n,r){return new(n||(n=Promise))(function(s,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function o(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};const sl=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}},al=e=>{if(Array.isArray(e))return e.map(e=>al(e));if("function"===typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(e=>{let[n,r]=e;const s=n.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[s]=al(r)}),t};var il=function(e,t,n,r){return new(n||(n=Promise))(function(s,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function o(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};const ol=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ll=(e,t,r)=>il(void 0,void 0,void 0,function*(){const s=yield rl(void 0,void 0,void 0,function*(){return"undefined"===typeof Response?(yield Promise.resolve().then(n.bind(n,630))).Response:Response});e instanceof s&&!(null===r||void 0===r?void 0:r.noResolveJson)?e.json().then(n=>{const r=e.status||500,s=(null===n||void 0===n?void 0:n.statusCode)||r+"";t(new tl(ol(n),r,s))}).catch(e=>{t(new nl(ol(e),e))}):t(new nl(ol(e),e))}),cl=(e,t,n,r)=>{const s={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"!==e&&r?((e=>{if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)})(r)?(s.headers=Object.assign({"Content-Type":"application/json"},null===t||void 0===t?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,(null===t||void 0===t?void 0:t.duplex)&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),n)):s};function ul(e,t,n,r,s,a){return il(this,void 0,void 0,function*(){return new Promise((i,o)=>{e(n,cl(t,r,s,a)).then(e=>{if(!e.ok)throw e;return(null===r||void 0===r?void 0:r.noResolveJson)?e:e.json()}).then(e=>i(e)).catch(e=>ll(e,o,r))})})}function dl(e,t,n,r){return il(this,void 0,void 0,function*(){return ul(e,"GET",t,n,r)})}function hl(e,t,n,r,s){return il(this,void 0,void 0,function*(){return ul(e,"POST",t,r,s,n)})}function pl(e,t,n,r,s){return il(this,void 0,void 0,function*(){return ul(e,"PUT",t,r,s,n)})}function fl(e,t,n,r,s){return il(this,void 0,void 0,function*(){return ul(e,"DELETE",t,r,s,n)})}var gl=function(e,t,n,r){return new(n||(n=Promise))(function(s,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function o(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};const ml={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},yl={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class vl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=n,this.fetch=sl(r)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,n,r){return gl(this,void 0,void 0,function*(){try{let s;const a=Object.assign(Object.assign({},yl),r);let i=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(a.upsert)});const o=a.metadata;"undefined"!==typeof Blob&&n instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),o&&s.append("metadata",this.encodeMetadata(o)),s.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(s=n,s.append("cacheControl",a.cacheControl),o&&s.append("metadata",this.encodeMetadata(o))):(s=n,i["cache-control"]="max-age=".concat(a.cacheControl),i["content-type"]=a.contentType,o&&(i["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),(null===r||void 0===r?void 0:r.headers)&&(i=Object.assign(Object.assign({},i),r.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),u=yield("PUT"==e?pl:hl)(this.fetch,"".concat(this.url,"/object/").concat(c),s,Object.assign({headers:i},(null===a||void 0===a?void 0:a.duplex)?{duplex:a.duplex}:{}));return{data:{path:l,id:u.Id,fullPath:u.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(el(s))return{data:null,error:s};throw s}})}upload(e,t,n){return gl(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,r){return gl(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),a=this._getFinalPath(s),i=new URL(this.url+"/object/upload/sign/".concat(a));i.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:yl.upsert},r),a=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!==typeof Blob&&n instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(e=n,e.append("cacheControl",t.cacheControl)):(e=n,a["cache-control"]="max-age=".concat(t.cacheControl),a["content-type"]=t.contentType);return{data:{path:s,fullPath:(yield pl(this.fetch,i.toString(),e,{headers:a})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(el(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(e,t){return gl(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);(null===t||void 0===t?void 0:t.upsert)&&(r["x-upsert"]="true");const s=yield hl(this.fetch,"".concat(this.url,"/object/upload/sign/").concat(n),{},{headers:r}),a=new URL(this.url+s.url),i=a.searchParams.get("token");if(!i)throw new Zo("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:i},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(el(n))return{data:null,error:n};throw n}})}update(e,t,n){return gl(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return gl(this,void 0,void 0,function*(){try{return{data:yield hl(this.fetch,"".concat(this.url,"/object/move"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(el(r))return{data:null,error:r};throw r}})}copy(e,t,n){return gl(this,void 0,void 0,function*(){try{return{data:{path:(yield hl(this.fetch,"".concat(this.url,"/object/copy"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(el(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,n){return gl(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),s=yield hl(this.fetch,"".concat(this.url,"/object/sign/").concat(r),Object.assign({expiresIn:t},(null===n||void 0===n?void 0:n.transform)?{transform:n.transform}:{}),{headers:this.headers});const a=(null===n||void 0===n?void 0:n.download)?"&download=".concat(!0===n.download?"":n.download):"";return s={signedUrl:encodeURI("".concat(this.url).concat(s.signedURL).concat(a))},{data:s,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(el(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,n){return gl(this,void 0,void 0,function*(){try{const r=yield hl(this.fetch,"".concat(this.url,"/object/sign/").concat(this.bucketId),{expiresIn:t,paths:e},{headers:this.headers}),s=(null===n||void 0===n?void 0:n.download)?"&download=".concat(!0===n.download?"":n.download):"";return{data:r.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI("".concat(this.url).concat(e.signedURL).concat(s)):null})),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(el(r))return{data:null,error:r};throw r}})}download(e,t){return gl(this,void 0,void 0,function*(){const n="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image/authenticated":"object",r=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{}),s=r?"?".concat(r):"";try{const t=this._getFinalPath(e),r=yield dl(this.fetch,"".concat(this.url,"/").concat(n,"/").concat(t).concat(s),{headers:this.headers,noResolveJson:!0});return{data:yield r.blob(),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(el(a))return{data:null,error:a};throw a}})}info(e){return gl(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield dl(this.fetch,"".concat(this.url,"/object/info/").concat(t),{headers:this.headers});return{data:al(e),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(el(n))return{data:null,error:n};throw n}})}exists(e){return gl(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,n,r){return il(this,void 0,void 0,function*(){return ul(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}(this.fetch,"".concat(this.url,"/object/").concat(t),{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(el(n)&&n instanceof nl){const e=n.originalError;if([400,404].includes(null===e||void 0===e?void 0:e.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],s=(null===t||void 0===t?void 0:t.download)?"download=".concat(!0===t.download?"":t.download):"";""!==s&&r.push(s);const a="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image":"object",i=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{});""!==i&&r.push(i);let o=r.join("&");return""!==o&&(o="?".concat(o)),{data:{publicUrl:encodeURI("".concat(this.url,"/").concat(a,"/public/").concat(n).concat(o))}}}remove(e){return gl(this,void 0,void 0,function*(){try{return{data:yield fl(this.fetch,"".concat(this.url,"/object/").concat(this.bucketId),{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(el(t))return{data:null,error:t};throw t}})}list(e,t,n){return gl(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},ml),t),{prefix:e||""});return{data:yield hl(this.fetch,"".concat(this.url,"/object/list/").concat(this.bucketId),r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(el(r))return{data:null,error:r};throw r}})}listV2(e,t){return gl(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield hl(this.fetch,"".concat(this.url,"/object/list-v2/").concat(this.bucketId),n,{headers:this.headers},t),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(el(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!==typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return"".concat(this.bucketId,"/").concat(e.replace(/^\/+/,""))}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push("width=".concat(e.width)),e.height&&t.push("height=".concat(e.height)),e.resize&&t.push("resize=".concat(e.resize)),e.format&&t.push("format=".concat(e.format)),e.quality&&t.push("quality=".concat(e.quality)),t.join("&")}}const bl={"X-Client-Info":"storage-js/".concat("2.12.1")};var xl=function(e,t,n,r){return new(n||(n=Promise))(function(s,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function o(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};class wl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;this.shouldThrowOnError=!1;const s=new URL(e);if(null===r||void 0===r?void 0:r.useNewHostname){/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase."))}this.url=s.href,this.headers=Object.assign(Object.assign({},bl),t),this.fetch=sl(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return xl(this,void 0,void 0,function*(){try{return{data:yield dl(this.fetch,"".concat(this.url,"/bucket"),{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(el(e))return{data:null,error:e};throw e}})}getBucket(e){return xl(this,void 0,void 0,function*(){try{return{data:yield dl(this.fetch,"".concat(this.url,"/bucket/").concat(e),{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(el(t))return{data:null,error:t};throw t}})}createBucket(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};return xl(this,void 0,void 0,function*(){try{return{data:yield hl(this.fetch,"".concat(this.url,"/bucket"),{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(el(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return xl(this,void 0,void 0,function*(){try{return{data:yield pl(this.fetch,"".concat(this.url,"/bucket/").concat(e),{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(el(n))return{data:null,error:n};throw n}})}emptyBucket(e){return xl(this,void 0,void 0,function*(){try{return{data:yield hl(this.fetch,"".concat(this.url,"/bucket/").concat(e,"/empty"),{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(el(t))return{data:null,error:t};throw t}})}deleteBucket(e){return xl(this,void 0,void 0,function*(){try{return{data:yield fl(this.fetch,"".concat(this.url,"/bucket/").concat(e),{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(el(t))return{data:null,error:t};throw t}})}}class _l extends wl{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2?arguments[2]:void 0,arguments.length>3?arguments[3]:void 0)}from(e){return new vl(this.url,this.headers,e,this.fetch)}}let kl="";kl="undefined"!==typeof Deno?"deno":"undefined"!==typeof document?"web":"undefined"!==typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const Sl={headers:{"X-Client-Info":"supabase-js-".concat(kl,"/").concat("2.57.4")}},jl={schema:"public"},Cl={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Nl={};var El=n(630),Pl=function(e,t,n,r){return new(n||(n=Promise))(function(s,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function o(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};const Tl=e=>{let t;return t=e||("undefined"===typeof fetch?El.default:fetch),function(){return t(...arguments)}},Ml=(e,t,n)=>{const r=Tl(n),s="undefined"===typeof Headers?El.Headers:Headers;return(n,a)=>Pl(void 0,void 0,void 0,function*(){var i;const o=null!==(i=yield t())&&void 0!==i?i:e;let l=new s(null===a||void 0===a?void 0:a.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization","Bearer ".concat(o)),r(n,Object.assign(Object.assign({},a),{headers:l}))})};var Al=function(e,t,n,r){return new(n||(n=Promise))(function(s,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function o(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};const Ol="2.71.1",Rl=3e4,Dl=9e4,Ll={"X-Client-Info":"gotrue-js/".concat(Ol)},Il="X-Supabase-Api-Version",Fl={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},zl=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class Ul extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function Bl(e){return"object"===typeof e&&null!==e&&"__isAuthError"in e}class Vl extends Ul{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}class Wl extends Ul{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Hl extends Ul{constructor(e,t,n,r){super(e,n,r),this.name=t,this.status=n}}class ql extends Hl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class $l extends Hl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Kl extends Hl{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Jl extends Hl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Yl extends Hl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Gl extends Hl{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Ql(e){return Bl(e)&&"AuthRetryableFetchError"===e.name}class Xl extends Hl{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class Zl extends Hl{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const ec="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),tc=" \t\n\r=".split(""),nc=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<tc.length;t+=1)e[tc[t].charCodeAt(0)]=-2;for(let t=0;t<ec.length;t+=1)e[ec[t].charCodeAt(0)]=t;return e})();function rc(e,t,n){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(ec[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(ec[e]),t.queuedBits-=6}}function sc(e,t,n){const r=nc[e];if(!(r>-1)){if(-2===r)return;throw new Error('Invalid Base64-URL character "'.concat(String.fromCharCode(e),'"'))}for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function ac(e){const t=[],n=e=>{t.push(String.fromCodePoint(e))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=e=>{!function(e,t,n){if(0===t.utf8seq){if(e<=127)return void n(e);for(let n=1;n<6;n+=1)if(0===(e>>7-n&1)){t.utf8seq=n;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&n(t.codepoint)}}(e,r,n)};for(let i=0;i<e.length;i+=1)sc(e.charCodeAt(i),s,a);return t.join("")}function ic(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error("Unrecognized Unicode codepoint: ".concat(e.toString(16)))}t(e)}function oc(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const t=1024*(r-55296)&65535;r=65536+(e.charCodeAt(n+1)-56320&65535|t),n+=1}ic(r,t)}}function lc(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};for(let s=0;s<e.length;s+=1)sc(e.charCodeAt(s),n,r);return new Uint8Array(t)}function cc(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};return e.forEach(e=>rc(e,n,r)),rc(null,n,r),t.join("")}const uc=()=>"undefined"!==typeof window&&"undefined"!==typeof document,dc={tested:!1,writable:!1},hc=()=>{if(!uc())return!1;try{if("object"!==typeof globalThis.localStorage)return!1}catch(t){return!1}if(dc.tested)return dc.writable;const e="lswt-".concat(Math.random()).concat(Math.random());try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),dc.tested=!0,dc.writable=!0}catch(t){dc.tested=!0,dc.writable=!1}return dc.writable};const pc=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}},fc=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},gc=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(r){return n}},mc=async(e,t)=>{await e.removeItem(t)};class yc{constructor(){this.promise=new yc.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function vc(e){const t=e.split(".");if(3!==t.length)throw new Zl("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!zl.test(t[n]))throw new Zl("JWT not in base64url format");return{header:JSON.parse(ac(t[0])),payload:JSON.parse(ac(t[1])),signature:lc(t[2]),raw:{header:t[0],payload:t[1]}}}function bc(e){return("0"+e.toString(16)).substr(-2)}async function xc(e){if(!("undefined"!==typeof crypto&&"undefined"!==typeof crypto.subtle&&"undefined"!==typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(n);return Array.from(r).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function wc(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(){const e=new Uint32Array(56);if("undefined"===typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let n="";for(let r=0;r<56;r++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(e),Array.from(e,bc).join("")}();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await fc(e,"".concat(t,"-code-verifier"),s);const a=await xc(r);return[a,r===a?"plain":"s256"]}yc.promiseConstructor=Promise;const _c=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const kc=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Sc(e){if(!kc.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function jc(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"===typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "'.concat(t,'" property of the session object is not supported. Please use getUser() instead.'))},set:(e,t)=>{throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "'.concat(t,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))},deleteProperty:(e,t)=>{throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "'.concat(t,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))}})}function Cc(e){return JSON.parse(JSON.stringify(e))}var Nc=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n};const Ec=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Pc=[502,503,504];async function Tc(e){var t,n;if(!("object"===typeof(n=e)&&null!==n&&"status"in n&&"ok"in n&&"json"in n&&"function"===typeof n.json))throw new Gl(Ec(e),0);if(Pc.includes(e.status))throw new Gl(Ec(e),e.status);let r,s;try{r=await e.json()}catch(i){throw new Wl(Ec(i),i)}const a=function(e){const t=e.headers.get(Il);if(!t)return null;if(!t.match(_c))return null;try{return new Date("".concat(t,"T00:00:00.0Z"))}catch(i){return null}}(e);if(a&&a.getTime()>=Fl.timestamp&&"object"===typeof r&&r&&"string"===typeof r.code?s=r.code:"object"===typeof r&&r&&"string"===typeof r.error_code&&(s=r.error_code),s){if("weak_password"===s)throw new Xl(Ec(r),e.status,(null===(t=r.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===s)throw new ql}else if("object"===typeof r&&r&&"object"===typeof r.weak_password&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0))throw new Xl(Ec(r),e.status,r.weak_password.reasons);throw new Vl(Ec(r),e.status||500,s)}async function Mc(e,t,n,r){var s;const a=Object.assign({},null===r||void 0===r?void 0:r.headers);a[Il]||(a[Il]=Fl.name),(null===r||void 0===r?void 0:r.jwt)&&(a.Authorization="Bearer ".concat(r.jwt));const i=null!==(s=null===r||void 0===r?void 0:r.query)&&void 0!==s?s:{};(null===r||void 0===r?void 0:r.redirectTo)&&(i.redirect_to=r.redirectTo);const o=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await async function(e,t,n,r,s,a){const i=((e,t,n,r)=>{const s={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null===t||void 0===t?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))})(t,r,s,a);let o;try{o=await e(n,Object.assign({},i))}catch(l){throw console.error(l),new Gl(Ec(l),0)}o.ok||await Tc(o);if(null===r||void 0===r?void 0:r.noResolveJson)return o;try{return await o.json()}catch(l){await Tc(l)}}(e,t,n+o,{headers:a,noResolveJson:null===r||void 0===r?void 0:r.noResolveJson},{},null===r||void 0===r?void 0:r.body);return(null===r||void 0===r?void 0:r.xform)?null===r||void 0===r?void 0:r.xform(l):{data:Object.assign({},l),error:null}}function Ac(e){var t;let n=null;var r;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r)));return{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Oc(e){const t=Ac(e);return!t.error&&e.weak_password&&"object"===typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"===typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function Rc(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Dc(e){return{data:e,error:null}}function Lc(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a}=e,i=Nc(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a},user:Object.assign({},i)},error:null}}function Ic(e){return e}const Fc=["global","local","others"];var zc=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n};class Uc{constructor(e){let{url:t="",headers:n={},fetch:r}=e;this.url=t,this.headers=n,this.fetch=pc(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fc[0];if(Fc.indexOf(t)<0)throw new Error("@supabase/auth-js: Parameter scope must be one of ".concat(Fc.join(", ")));try{return await Mc(this.fetch,"POST","".concat(this.url,"/logout?scope=").concat(t),{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Bl(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await Mc(this.fetch,"POST","".concat(this.url,"/invite"),{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Rc})}catch(n){if(Bl(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=zc(e,["options"]),r=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(r.new_email=null===n||void 0===n?void 0:n.newEmail,delete r.newEmail),await Mc(this.fetch,"POST","".concat(this.url,"/admin/generate_link"),{body:r,headers:this.headers,xform:Lc,redirectTo:null===t||void 0===t?void 0:t.redirectTo})}catch(t){if(Bl(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Mc(this.fetch,"POST","".concat(this.url,"/admin/users"),{body:e,headers:this.headers,xform:Rc})}catch(t){if(Bl(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,r,s,a,i,o;try{const l={nextPage:null,lastPage:0,total:0},c=await Mc(this.fetch,"GET","".concat(this.url,"/admin/users"),{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null===e||void 0===e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(s=null===(r=null===e||void 0===e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==s?s:""},xform:Ic});if(c.error)throw c.error;const u=await c.json(),d=null!==(a=c.headers.get("x-total-count"))&&void 0!==a?a:0,h=null!==(o=null===(i=c.headers.get("link"))||void 0===i?void 0:i.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l["".concat(n,"Page")]=t}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(l){if(Bl(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){Sc(e);try{return await Mc(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,xform:Rc})}catch(t){if(Bl(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Sc(e);try{return await Mc(this.fetch,"PUT","".concat(this.url,"/admin/users/").concat(e),{body:t,headers:this.headers,xform:Rc})}catch(n){if(Bl(n))return{data:{user:null},error:n};throw n}}async deleteUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Sc(e);try{return await Mc(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,body:{should_soft_delete:t},xform:Rc})}catch(n){if(Bl(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Sc(e.userId);try{const{data:t,error:n}=await Mc(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e.userId,"/factors"),{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(t){if(Bl(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Sc(e.userId),Sc(e.id);try{return{data:await Mc(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e.userId,"/factors/").concat(e.id),{headers:this.headers}),error:null}}catch(t){if(Bl(t))return{data:null,error:t};throw t}}}function Bc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Vc=!!(globalThis&&hc()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class Wc extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Hc extends Wc{}async function qc(e,t,n){Vc&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Vc&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async r=>{if(!r){if(0===t)throw Vc&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Hc('Acquiring an exclusive Navigator LockManager lock "'.concat(e,'" immediately failed'));if(Vc)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}Vc&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,r.name);try{return await n()}finally{Vc&&console.log("@supabase/gotrue-js: navigatorLock: released",e,r.name)}}))}!function(){if("object"!==typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!==typeof self&&(self.globalThis=self)}}();const $c={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ll,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Kc(e,t,n){return await n()}const Jc={};class Yc{constructor(e){var t,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Yc.nextInstanceID,Yc.nextInstanceID+=1,this.instanceID>0&&uc()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},$c),e);if(this.logDebugMessages=!!r.debug,"function"===typeof r.debug&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new Uc({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=pc(r.fetch),this.lock=r.lock||Kc,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:uc()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=qc:this.lock=Kc,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:hc()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Bc(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=Bc(this.memoryStorage)),uc()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}null===(n=this.broadcastChannel)||void 0===n||n.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}get jwks(){var e,t;return null!==(t=null===(e=Jc[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){Jc[this.storageKey]=Object.assign(Object.assign({},Jc[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=Jc[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Jc[this.storageKey]=Object.assign(Object.assign({},Jc[this.storageKey]),{cachedAt:e})}_debug(){if(this.logDebugMessages){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger("GoTrueClient@".concat(this.instanceID," (").concat(Ol,") ").concat((new Date).toISOString()),...t)}return this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},n=new URL(e);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach((e,n)=>{t[n]=e})}catch(r){}return n.searchParams.forEach((e,n)=>{t[n]=e}),t}(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),uc()&&this.detectSessionInUrl&&"none"!==n){const{data:r,error:s}=await this._getSessionFromURL(t,n);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),function(e){return Bl(e)&&"AuthImplicitGrantRedirectError"===e.name}(s)){const t=null===(e=s.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:s}}return await this._removeSession(),{error:s}}const{session:a,redirectType:i}=r;return this._debug("#_initialize()","detected session in URL",a,"redirect type",i),await this._saveSession(a),setTimeout(async()=>{"recovery"===i?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Bl(t)?{error:t}:{error:new Wl("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,r;try{const s=await Mc(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{data:null!==(n=null===(t=null===e||void 0===e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==n?n:{},gotrue_meta_security:{captcha_token:null===(r=null===e||void 0===e?void 0:e.options)||void 0===r?void 0:r.captchaToken}},xform:Ac}),{data:a,error:i}=s;if(i||!a)return{data:{user:null,session:null},error:i};const o=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(s){if(Bl(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var t,n,r;try{let s;if("email"in e){const{email:n,password:r,options:a}=e;let i=null,o=null;"pkce"===this.flowType&&([i,o]=await wc(this.storage,this.storageKey)),s=await Mc(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,redirectTo:null===a||void 0===a?void 0:a.emailRedirectTo,body:{email:n,password:r,data:null!==(t=null===a||void 0===a?void 0:a.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken},code_challenge:i,code_challenge_method:o},xform:Ac})}else{if(!("phone"in e))throw new Kl("You must provide either an email or phone number and a password");{const{phone:t,password:a,options:i}=e;s=await Mc(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{phone:t,password:a,data:null!==(n=null===i||void 0===i?void 0:i.data)&&void 0!==n?n:{},channel:null!==(r=null===i||void 0===i?void 0:i.channel)&&void 0!==r?r:"sms",gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}},xform:Ac})}}const{data:a,error:i}=s;if(i||!a)return{data:{user:null,session:null},error:i};const o=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(s){if(Bl(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let t;if("email"in e){const{email:n,password:r,options:s}=e;t=await Mc(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{email:n,password:r,gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken}},xform:Oc})}else{if(!("phone"in e))throw new Kl("You must provide either an email or phone number and a password");{const{phone:n,password:r,options:s}=e;t=await Mc(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{phone:n,password:r,gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken}},xform:Oc})}}const{data:n,error:r}=t;return r?{data:{user:null,session:null},error:r}:n&&n.session&&n.user?(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r}):{data:{user:null,session:null},error:new $l}}catch(t){if(Bl(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,r,s;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:null===(s=e.options)||void 0===s?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if("solana"===t)return await this.signInWithSolana(e);throw new Error('@supabase/auth-js: Unsupported chain "'.concat(t,'"'))}async signInWithSolana(e){var t,n,r,s,a,i,o,l,c,u,d,h;let p,f;if("message"in e)p=e.message,f=e.signature;else{const{chain:d,wallet:h,statement:g,options:m}=e;let y;if(uc())if("object"===typeof h)y=h;else{const e=window;if(!("solana"in e)||"object"!==typeof e.solana||!("signIn"in e.solana&&"function"===typeof e.solana.signIn||"signMessage"in e.solana&&"function"===typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");y=e.solana}else{if("object"!==typeof h||!(null===m||void 0===m?void 0:m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=h}const v=new URL(null!==(t=null===m||void 0===m?void 0:m.url)&&void 0!==t?t:window.location.href);if("signIn"in y&&y.signIn){const e=await y.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null===m||void 0===m?void 0:m.signInWithSolana),{version:"1",domain:v.host,uri:v.href}),g?{statement:g}:null));let t;if(Array.isArray(e)&&e[0]&&"object"===typeof e[0])t=e[0];else{if(!(e&&"object"===typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"===typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");p="string"===typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),f=t.signature}else{if(!("signMessage"in y)||"function"!==typeof y.signMessage||!("publicKey"in y)||"object"!==typeof y||!y.publicKey||!("toBase58"in y.publicKey)||"function"!==typeof y.publicKey.toBase58)throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=["".concat(v.host," wants you to sign in with your Solana account:"),y.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1","URI: ".concat(v.href),"Issued At: ".concat(null!==(r=null===(n=null===m||void 0===m?void 0:m.signInWithSolana)||void 0===n?void 0:n.issuedAt)&&void 0!==r?r:(new Date).toISOString()),...(null===(s=null===m||void 0===m?void 0:m.signInWithSolana)||void 0===s?void 0:s.notBefore)?["Not Before: ".concat(m.signInWithSolana.notBefore)]:[],...(null===(a=null===m||void 0===m?void 0:m.signInWithSolana)||void 0===a?void 0:a.expirationTime)?["Expiration Time: ".concat(m.signInWithSolana.expirationTime)]:[],...(null===(i=null===m||void 0===m?void 0:m.signInWithSolana)||void 0===i?void 0:i.chainId)?["Chain ID: ".concat(m.signInWithSolana.chainId)]:[],...(null===(o=null===m||void 0===m?void 0:m.signInWithSolana)||void 0===o?void 0:o.nonce)?["Nonce: ".concat(m.signInWithSolana.nonce)]:[],...(null===(l=null===m||void 0===m?void 0:m.signInWithSolana)||void 0===l?void 0:l.requestId)?["Request ID: ".concat(m.signInWithSolana.requestId)]:[],...(null===(u=null===(c=null===m||void 0===m?void 0:m.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===u?void 0:u.length)?["Resources",...m.signInWithSolana.resources.map(e=>"- ".concat(e))]:[]].join("\n");const e=await y.signMessage((new TextEncoder).encode(p),"utf8");if(!e||!(e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");f=e}}try{const{data:t,error:n}=await Mc(this.fetch,"POST","".concat(this.url,"/token?grant_type=web3"),{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:cc(f)},(null===(d=e.options)||void 0===d?void 0:d.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:Ac});if(n)throw n;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:n}):{data:{user:null,session:null},error:new $l}}catch(g){if(Bl(g))return{data:{user:null,session:null},error:g};throw g}}async _exchangeCodeForSession(e){const t=await gc(this.storage,"".concat(this.storageKey,"-code-verifier")),[n,r]=(null!==t&&void 0!==t?t:"").split("/");try{const{data:t,error:s}=await Mc(this.fetch,"POST","".concat(this.url,"/token?grant_type=pkce"),{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Ac});if(await mc(this.storage,"".concat(this.storageKey,"-code-verifier")),s)throw s;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!==r&&void 0!==r?r:null}),error:s}):{data:{user:null,session:null,redirectType:null},error:new $l}}catch(s){if(Bl(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:t,provider:n,token:r,access_token:s,nonce:a}=e,i=await Mc(this.fetch,"POST","".concat(this.url,"/token?grant_type=id_token"),{headers:this.headers,body:{provider:n,id_token:r,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:null===t||void 0===t?void 0:t.captchaToken}},xform:Ac}),{data:o,error:l}=i;return l?{data:{user:null,session:null},error:l}:o&&o.session&&o.user?(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:l}):{data:{user:null,session:null},error:new $l}}catch(t){if(Bl(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,r,s,a;try{if("email"in e){const{email:r,options:s}=e;let a=null,i=null;"pkce"===this.flowType&&([a,i]=await wc(this.storage,this.storageKey));const{error:o}=await Mc(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{email:r,data:null!==(t=null===s||void 0===s?void 0:s.data)&&void 0!==t?t:{},create_user:null===(n=null===s||void 0===s?void 0:s.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken},code_challenge:a,code_challenge_method:i},redirectTo:null===s||void 0===s?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:t,options:n}=e,{data:i,error:o}=await Mc(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{phone:t,data:null!==(r=null===n||void 0===n?void 0:n.data)&&void 0!==r?r:{},create_user:null===(s=null===n||void 0===n?void 0:n.shouldCreateUser)||void 0===s||s,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken},channel:null!==(a=null===n||void 0===n?void 0:n.channel)&&void 0!==a?a:"sms"}});return{data:{user:null,session:null,messageId:null===i||void 0===i?void 0:i.message_id},error:o}}throw new Kl("You must provide either an email or phone number.")}catch(i){if(Bl(i))return{data:{user:null,session:null},error:i};throw i}}async verifyOtp(e){var t,n;try{let r,s;"options"in e&&(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo,s=null===(n=e.options)||void 0===n?void 0:n.captchaToken);const{data:a,error:i}=await Mc(this.fetch,"POST","".concat(this.url,"/verify"),{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:r,xform:Ac});if(i)throw i;if(!a)throw new Error("An error occurred on token verification.");const o=a.session,l=a.user;return(null===o||void 0===o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(r){if(Bl(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,n,r;try{let s=null,a=null;return"pkce"===this.flowType&&([s,a]=await wc(this.storage,this.storageKey)),await Mc(this.fetch,"POST","".concat(this.url,"/sso"),{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==n?n:void 0}),(null===(r=null===e||void 0===e?void 0:e.options)||void 0===r?void 0:r.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:a}),headers:this.headers,xform:Dc})}catch(s){if(Bl(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new ql;const{error:r}=await Mc(this.fetch,"GET","".concat(this.url,"/reauthenticate"),{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(Bl(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t="".concat(this.url,"/resend");if("email"in e){const{email:n,type:r,options:s}=e,{error:a}=await Mc(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken}},redirectTo:null===s||void 0===s?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:a}}if("phone"in e){const{phone:n,type:r,options:s}=e,{data:a,error:i}=await Mc(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:null===a||void 0===a?void 0:a.message_id},error:i}}throw new Kl("You must provide either an email or phone number and a type")}catch(t){if(Bl(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch(e){}})()),n}return await this.lock("lock:".concat(this.storageKey),e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(t){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await gc(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=!!e.expires_at&&1e3*e.expires_at-Date.now()<Dl;if(this._debug("#__loadSession()","session has".concat(n?"":" not"," expired"),"expires_at",e.expires_at),!n){if(this.userStorage){const t=await gc(this.userStorage,this.storageKey+"-user");(null===t||void 0===t?void 0:t.user)?e.user=t.user:e.user=jc()}if(this.storage.isServer&&e.user){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,n,r)=>(t||"user"!==n||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,n,r))})}return{data:{session:e},error:null}}const{session:r,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await Mc(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:e,xform:Rc}):await this._useSession(async e=>{var t,n,r;const{data:s,error:a}=e;if(a)throw a;return(null===(t=s.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await Mc(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:null!==(r=null===(n=s.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0,xform:Rc}):{data:{user:null},error:new ql}})}catch(t){if(Bl(t))return function(e){return Bl(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await mc(this.storage,"".concat(this.storageKey,"-code-verifier"))),{data:{user:null},error:t};throw t}}async updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await this._useSession(async n=>{const{data:r,error:s}=n;if(s)throw s;if(!r.session)throw new ql;const a=r.session;let i=null,o=null;"pkce"===this.flowType&&null!=e.email&&([i,o]=await wc(this.storage,this.storageKey));const{data:l,error:c}=await Mc(this.fetch,"PUT","".concat(this.url,"/user"),{headers:this.headers,redirectTo:null===t||void 0===t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:i,code_challenge_method:o}),jwt:a.access_token,xform:Rc});if(c)throw c;return a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(n){if(Bl(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ql;const t=Date.now()/1e3;let n=t,r=!0,s=null;const{payload:a}=vc(e.access_token);if(a.exp&&(n=a.exp,r=n<=t),r){const{session:t,error:n}=await this._callRefreshToken(e.refresh_token);if(n)return{data:{user:null,session:null},error:n};if(!t)return{data:{user:null,session:null},error:null};s=t}else{const{data:r,error:a}=await this._getUser(e.access_token);if(a)throw a;s={access_token:e.access_token,refresh_token:e.refresh_token,user:r.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if(Bl(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:r,error:s}=t;if(s)throw s;e=null!==(n=r.session)&&void 0!==n?n:void 0}if(!(null===e||void 0===e?void 0:e.refresh_token))throw new ql;const{session:r,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Bl(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!uc())throw new Jl("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Jl(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new Yl("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new Jl("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Yl("No code detected.");const{data:t,error:n}=await this._exchangeCodeForSession(e.code);if(n)throw n;const r=new URL(window.location.href);return r.searchParams.delete("code"),window.history.replaceState(window.history.state,"",r.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:s,refresh_token:a,expires_in:i,expires_at:o,token_type:l}=e;if(!s||!i||!a||!l)throw new Jl("No session defined in URL");const c=Math.round(Date.now()/1e3),u=parseInt(i);let d=c+u;o&&(d=parseInt(o));const h=d-c;1e3*h<=Rl&&console.warn("@supabase/gotrue-js: Session as retrieved from URL expires in ".concat(h,"s, should have been closer to ").concat(u,"s"));const p=d-u;c-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,d,c):c-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,d,c);const{data:f,error:g}=await this._getUser(s);if(g)throw g;const m={provider_token:n,provider_refresh_token:r,access_token:s,expires_in:u,expires_at:d,refresh_token:a,token_type:l,user:f.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:m,redirectType:e.type},error:null}}catch(n){if(Bl(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await gc(this.storage,"".concat(this.storageKey,"-code-verifier"));return!(!e.code||!t)}async signOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut(){let{scope:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this._useSession(async t=>{var n;const{data:r,error:s}=t;if(s)return{error:s};const a=null===(n=r.session)||void 0===n?void 0:n.access_token;if(a){const{error:t}=await this.admin.signOut(a,e);if(t&&(!function(e){return Bl(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await mc(this.storage,"".concat(this.storageKey,"-code-verifier"))),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,r;try{const{data:{session:r},error:s}=t;if(s)throw s;await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(s){await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,r=null;"pkce"===this.flowType&&([n,r]=await wc(this.storage,this.storageKey,!0));try{return await Mc(this.fetch,"POST","".concat(this.url,"/recover"),{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(Bl(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(Bl(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:r}=await this._useSession(async t=>{var n,r,s,a,i;const{data:o,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider("".concat(this.url,"/user/identities/authorize"),e.provider,{redirectTo:null===(n=e.options)||void 0===n?void 0:n.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(s=e.options)||void 0===s?void 0:s.queryParams,skipBrowserRedirect:!0});return await Mc(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(i=null===(a=o.session)||void 0===a?void 0:a.access_token)&&void 0!==i?i:void 0})});if(r)throw r;return uc()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null===n||void 0===n?void 0:n.url),{data:{provider:e.provider,url:null===n||void 0===n?void 0:n.url},error:null}}catch(n){if(Bl(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,r;const{data:s,error:a}=t;if(a)throw a;return await Mc(this.fetch,"DELETE","".concat(this.url,"/user/identities/").concat(e.identity_id),{headers:this.headers,jwt:null!==(r=null===(n=s.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0})})}catch(t){if(Bl(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t="#_refreshAccessToken(".concat(e.substring(0,5),"...)");this._debug(t,"begin");try{const s=Date.now();return await(n=async n=>(n>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await Mc(this.fetch,"POST","".concat(this.url,"/token?grant_type=refresh_token"),{body:{refresh_token:e},headers:this.headers,xform:Ac})),r=(e,t)=>{const n=200*Math.pow(2,e);return t&&Ql(t)&&Date.now()+n-s<Rl},new Promise((e,t)=>{(async()=>{for(let a=0;a<1/0;a++)try{const t=await n(a);if(!r(a,null,t))return void e(t)}catch(s){if(!r(a,s))return void t(s)}})()}))}catch(s){if(this._debug(t,"error",s),Bl(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}var n,r}_isValidSession(e){return"object"===typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider("".concat(this.url,"/authorize"),e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),uc()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await gc(this.storage,this.storageKey);if(s&&this.userStorage){let t=await gc(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:s.user},await fc(this.userStorage,this.storageKey+"-user",t)),s.user=null!==(e=null===t||void 0===t?void 0:t.user)&&void 0!==e?e:jc()}else if(s&&!s.user&&!s.user){const e=await gc(this.storage,this.storageKey+"-user");e&&(null===e||void 0===e?void 0:e.user)?(s.user=e.user,await mc(this.storage,this.storageKey+"-user"),await fc(this.storage,this.storageKey,s)):s.user=jc()}if(this._debug(n,"session from storage",s),!this._isValidSession(s))return this._debug(n,"session is not valid"),void(null!==s&&await this._removeSession());const a=1e3*(null!==(t=s.expires_at)&&void 0!==t?t:1/0)-Date.now()<Dl;if(this._debug(n,"session has".concat(a?"":" not"," expired with margin of ").concat(Dl,"s")),a){if(this.autoRefreshToken&&s.refresh_token){const{error:e}=await this._callRefreshToken(s.refresh_token);e&&(console.error(e),Ql(e)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(s.user&&!0===s.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(s.access_token);!t&&(null===e||void 0===e?void 0:e.user)?(s.user=e.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(r){console.error("Error getting user data:",r),this._debug(n,"error getting user data, skipping SIGNED_IN notification",r)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){return this._debug(n,"error",s),void console.error(s)}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new ql;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r="#_callRefreshToken(".concat(e.substring(0,5),"...)");this._debug(r,"begin");try{this.refreshingDeferred=new yc;const{data:t,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new ql;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const r={session:t.session,error:null};return this.refreshingDeferred.resolve(r),r}catch(s){if(this._debug(r,"error",s),Bl(s)){const e={session:null,error:s};return Ql(s)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(s),s}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r="#_notifyAllSubscribers(".concat(e,")");this._debug(r,"begin",t,"broadcast = ".concat(n));try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],s=Array.from(this.stateChangeEmitters.values()).map(async n=>{try{await n.callback(e,t)}catch(s){r.push(s)}});if(await Promise.all(s),r.length>0){for(let e=0;e<r.length;e+=1)console.error(r[e]);throw r[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),n=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!n&&t.user&&await fc(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const r=Cc(e);await fc(this.storage,this.storageKey,r)}else{const e=Cc(t);await fc(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await mc(this.storage,this.storageKey),await mc(this.storage,this.storageKey+"-code-verifier"),await mc(this.storage,this.storageKey+"-user"),this.userStorage&&await mc(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&uc()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Rl);this.autoRefreshTicker=e,e&&"object"===typeof e&&"function"===typeof e.unref?e.unref():"undefined"!==typeof Deno&&"function"===typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:n}}=e;if(!n||!n.refresh_token||!n.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const r=Math.floor((1e3*n.expires_at-t)/Rl);this._debug("#_autoRefreshTokenTick()","access token expires in ".concat(r," ticks, a tick lasts ").concat(Rl,"ms, refresh threshold is ").concat(3," ticks")),r<=3&&await this._callRefreshToken(n.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(!(e.isAcquireTimeout||e instanceof Wc))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!uc()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t="#_onVisibilityChanged(".concat(e,")");this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const r=["provider=".concat(encodeURIComponent(t))];if((null===n||void 0===n?void 0:n.redirectTo)&&r.push("redirect_to=".concat(encodeURIComponent(n.redirectTo))),(null===n||void 0===n?void 0:n.scopes)&&r.push("scopes=".concat(encodeURIComponent(n.scopes))),"pkce"===this.flowType){const[e,t]=await wc(this.storage,this.storageKey),n=new URLSearchParams({code_challenge:"".concat(encodeURIComponent(e)),code_challenge_method:"".concat(encodeURIComponent(t))});r.push(n.toString())}if(null===n||void 0===n?void 0:n.queryParams){const e=new URLSearchParams(n.queryParams);r.push(e.toString())}return(null===n||void 0===n?void 0:n.skipBrowserRedirect)&&r.push("skip_http_redirect=".concat(n.skipBrowserRedirect)),"".concat(e,"?").concat(r.join("&"))}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:r,error:s}=t;return s?{data:null,error:s}:await Mc(this.fetch,"DELETE","".concat(this.url,"/factors/").concat(e.factorId),{headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token})})}catch(t){if(Bl(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,r;const{data:s,error:a}=t;if(a)return{data:null,error:a};const i=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:o,error:l}=await Mc(this.fetch,"POST","".concat(this.url,"/factors"),{body:i,headers:this.headers,jwt:null===(n=null===s||void 0===s?void 0:s.session)||void 0===n?void 0:n.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(r=null===o||void 0===o?void 0:o.totp)||void 0===r?void 0:r.qr_code)&&(o.totp.qr_code="data:image/svg+xml;utf-8,".concat(o.totp.qr_code)),{data:o,error:null})})}catch(t){if(Bl(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:s}=t;if(s)return{data:null,error:s};const{data:a,error:i}=await Mc(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/verify"),{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token});return i?{data:null,error:i}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:i})})}catch(t){if(Bl(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:s}=t;return s?{data:null,error:s}:await Mc(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/challenge"),{body:{channel:e.channel},headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token})})}catch(t){if(Bl(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(null===e||void 0===e?void 0:e.factors)||[],r=n.filter(e=>"totp"===e.factor_type&&"verified"===e.status),s=n.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:n,totp:r,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:r},error:s}=e;if(s)return{data:null,error:s};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=vc(r.access_token);let i=null;a.aal&&(i=a.aal);let o=i;(null!==(n=null===(t=r.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==n?n:[]).length>0&&(o="aal2");return{data:{currentLevel:i,nextLevel:o,currentAuthenticationMethods:a.amr||[]},error:null}}))}async fetchJwk(e){let t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[]}).keys.find(t=>t.kid===e);if(t)return t;const n=Date.now();if(t=this.jwks.keys.find(t=>t.kid===e),t&&this.jwks_cached_at+6e5>n)return t;const{data:r,error:s}=await Mc(this.fetch,"GET","".concat(this.url,"/.well-known/jwks.json"),{headers:this.headers});if(s)throw s;return r.keys&&0!==r.keys.length?(this.jwks=r,this.jwks_cached_at=n,t=r.keys.find(t=>t.kid===e),t||null):null}async getClaims(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let n=e;if(!n){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};n=e.session.access_token}const{header:r,payload:s,signature:a,raw:{header:i,payload:o}}=vc(n);(null===t||void 0===t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(s.exp);const l=r.alg&&!r.alg.startsWith("HS")&&r.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(r.kid,(null===t||void 0===t?void 0:t.keys)?{keys:t.keys}:null===t||void 0===t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(n);if(e)throw e;return{data:{claims:s,header:r,signature:a},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(r.alg),u=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!await crypto.subtle.verify(c,u,a,function(e){const t=[];return oc(e,e=>t.push(e)),new Uint8Array(t)}("".concat(i,".").concat(o))))throw new Zl("Invalid JWT signature");return{data:{claims:s,header:r,signature:a},error:null}}catch(n){if(Bl(n))return{data:null,error:n};throw n}}}Yc.nextInstanceID=0;const Gc=Yc;class Qc extends Gc{constructor(e){super(e)}}var Xc=function(e,t,n,r){return new(n||(n=Promise))(function(s,a){function i(e){try{l(r.next(e))}catch(t){a(t)}}function o(e){try{l(r.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};class Zc{constructor(e,t,n){var r,s,a;this.supabaseUrl=e,this.supabaseKey=t;const i=function(e){const t=null===e||void 0===e?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL((n=t).endsWith("/")?n:n+"/")}catch(r){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}var n}(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o="sb-".concat(i.hostname.split(".")[0],"-auth-token"),l=function(e,t){var n,r;const{db:s,auth:a,realtime:i,global:o}=e,{db:l,auth:c,realtime:u,global:d}=t,h={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},c),a),realtime:Object.assign(Object.assign({},u),i),storage:{},global:Object.assign(Object.assign(Object.assign({},d),o),{headers:Object.assign(Object.assign({},null!==(n=null===d||void 0===d?void 0:d.headers)&&void 0!==n?n:{}),null!==(r=null===o||void 0===o?void 0:o.headers)&&void 0!==r?r:{})}),accessToken:()=>Al(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!==n&&void 0!==n?n:{},{db:jl,realtime:Nl,auth:Object.assign(Object.assign({},Cl),{storageKey:o}),global:Sl});this.storageKey=null!==(r=l.auth.storageKey)&&void 0!==r?r:"",this.headers=null!==(s=l.global.headers)&&void 0!==s?s:{},l.accessToken?(this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error("@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.".concat(String(t)," is not possible"))}})):this.auth=this._initSupabaseAuthClient(null!==(a=l.auth)&&void 0!==a?a:{},this.headers,l.global.fetch),this.fetch=Ml(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.rest=new po(new URL("rest/v1",i).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new _l(this.storageUrl.href,this.headers,this.fetch,null===n||void 0===n?void 0:n.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new uo(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.rest.rpc(e,t,n)}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Xc(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return null!==(t=null===(e=n.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey})}_initSupabaseAuthClient(e,t,n){let{autoRefreshToken:r,persistSession:s,detectSessionInUrl:a,storage:i,userStorage:o,storageKey:l,flowType:c,lock:u,debug:d}=e;const h={Authorization:"Bearer ".concat(this.supabaseKey),apikey:"".concat(this.supabaseKey)};return new Qc({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),t),storageKey:l,autoRefreshToken:r,persistSession:s,detectSessionInUrl:a,storage:i,userStorage:o,flowType:c,lock:u,debug:d,fetch:n,hasCustomAuthorizationHeader:Object.keys(this.headers).some(e=>"authorization"===e.toLowerCase())})}_initRealtimeClient(e){return new Xo(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null===e||void 0===e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null===t||void 0===t?void 0:t.access_token)})}_handleTokenChanged(e,t,n){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===n?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=n}}const eu=(e,t,n)=>new Zc(e,t,n);(function(){if("undefined"!==typeof window)return!1;if("undefined"===typeof process)return!1;const e=process.version;if(void 0===e||null===e)return!1;const t=e.match(/^v(\d+)\./);return!!t&&parseInt(t[1],10)<=18})()&&console.warn("\u26a0\ufe0f  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const tu=eu("https://iqwhrvtcrseidfyznqaf.supabase.co","sb_publishable_ULLJeduhFHc_KRINLLXxug_zGvRBLPf");const nu=new class{async getProperties(){try{const{data:e,error:t}=await tu.from("properties").select("*").order("created_at",{ascending:!1});if(t)throw t;return{success:!0,data:e||[]}}catch(e){return console.error("Supabase getProperties error:",e),{success:!1,error:e.message}}}async getPropertyData(e){try{const{data:t,error:n}=await tu.from("property_data").select("*").eq("property_id",e).order("Date",{ascending:!0});if(n)throw n;return{success:!0,data:t||[]}}catch(t){return console.error("Supabase getPropertyData error:",t),{success:!1,error:t.message}}}async getPropertiesWithData(){try{const{data:e,error:t}=await tu.from("properties").select("\n          *,\n          property_data (*)\n        ").order("created_at",{ascending:!1});if(t)throw t;return{success:!0,data:e||[]}}catch(e){return console.error("Supabase getPropertiesWithData error:",e),{success:!1,error:e.message}}}async getFinancialSummary(e,t){try{let n=tu.from("property_data").select("*");e&&(n=n.gte("Date",e)),t&&(n=n.lte("Date",t));const{data:r,error:s}=await n.order("Date",{ascending:!0});if(s)throw s;return{success:!0,data:{totalRevenue:(null===r||void 0===r?void 0:r.reduce((e,t)=>e+(parseFloat(t["Monthly Revenue"])||0),0))||0,totalExpenses:(null===r||void 0===r?void 0:r.reduce((e,t)=>e+(parseFloat(t["Maintenance Cost"])||0)+(parseFloat(t["Utilities Cost"])||0)+(parseFloat(t["Insurance Cost"])||0)+(parseFloat(t["Property Tax"])||0)+(parseFloat(t["Other Expenses"])||0),0))||0,totalNetIncome:(null===r||void 0===r?void 0:r.reduce((e,t)=>e+(parseFloat(t["Net Income"])||0),0))||0,avgOccupancy:(null===r||void 0===r?void 0:r.reduce((e,t)=>e+(parseFloat(t["Occupancy Rate"])||0),0))/((null===r||void 0===r?void 0:r.length)||1)||0,recordCount:(null===r||void 0===r?void 0:r.length)||0}}}catch(n){return console.error("Supabase getFinancialSummary error:",n),{success:!1,error:n.message}}}},ru={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE:"http://localhost:5001",REACT_APP_SUPABASE_URL:"https://iqwhrvtcrseidfyznqaf.supabase.co",REACT_APP_SUPABASE_ANON_KEY:"sb_publishable_ULLJeduhFHc_KRINLLXxug_zGvRBLPf",REACT_APP_API_URL:"http://localhost:5000/api",REACT_APP_SUPABASE_URL_AI:"https://iqwhrvtcrseidfyznqaf.supabase.co",REACT_APP_SUPABASE_ANON_KEY_AI:"sb_publishable_ULLJeduhFHc_KRINLLXxug_zGvRBLPf"}.REACT_APP_SUPABASE_API_URL||"http://localhost:5001/api",su={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE:"http://localhost:5001",REACT_APP_SUPABASE_URL:"https://iqwhrvtcrseidfyznqaf.supabase.co",REACT_APP_SUPABASE_ANON_KEY:"sb_publishable_ULLJeduhFHc_KRINLLXxug_zGvRBLPf",REACT_APP_API_URL:"http://localhost:5000/api",REACT_APP_SUPABASE_URL_AI:"https://iqwhrvtcrseidfyznqaf.supabase.co",REACT_APP_SUPABASE_ANON_KEY_AI:"sb_publishable_ULLJeduhFHc_KRINLLXxug_zGvRBLPf"}.REACT_APP_LOCAL_API_URL||"http://localhost:5000/api",au="http://localhost:5000/api";const iu=new class{async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n="".concat(au).concat(e),r=o({headers:o({"Content-Type":"application/json"},t.headers)},t);try{if(au.includes("localhost:5000")||au.includes("localhost:5001"))throw console.warn("Backend server not available, skipping API call to:",e),new Error("Backend server not available - using Supabase directly");const t=new AbortController,s=setTimeout(()=>t.abort(),1e4),a=await fetch(n,o(o({},r),{},{signal:t.signal}));if(clearTimeout(s),!a.ok){const e=await a.json().catch(()=>({error:"Network error"}));throw new Error(e.error||"HTTP ".concat(a.status))}return await a.json()}catch(s){if(console.error("API request failed:",s),"AbortError"===s.name)throw new Error("Request timeout - server may be unavailable");if(s.message.includes("fetch"))throw new Error("Network error - unable to connect to server");if(s.message.includes("Backend server not available"))throw s;throw s}}async getProperties(){try{return await this.request("/properties")}catch(e){return console.log("\ud83d\udd04 Backend unavailable, using Supabase directly"),await nu.getProperties()}}async getProperty(e){return this.request("/properties/".concat(e))}async getPropertiesWithData(){try{return await this.request("/properties-with-data")}catch(e){return console.log("\ud83d\udd04 Backend unavailable, using Supabase directly"),await nu.getPropertiesWithData()}}async getFinancialSummary(e,t){try{const n=new URLSearchParams;e&&n.append("startDate",e),t&&n.append("endDate",t);const r=n.toString();return await this.request("/financial-summary".concat(r?"?".concat(r):""))}catch(n){return console.log("\ud83d\udd04 Backend unavailable, using Supabase directly"),await nu.getFinancialSummary(e,t)}}async getPropertyData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;try{return await this.request("/properties/".concat(e,"/data?page=").concat(t,"&limit=").concat(n))}catch(r){return console.log("\ud83d\udd04 Backend unavailable, using Supabase directly"),await nu.getPropertyData(e)}}async getPropertyAggregated(e,t,n){const r=new URLSearchParams;t&&r.append("startDate",t),n&&r.append("endDate",n);const s=r.toString();return this.request("/properties/".concat(e,"/aggregated").concat(s?"?".concat(s):""))}async uploadCSV(e,t){const n=new FormData;n.append("csvFile",e),n.append("propertyId",t);const r="".concat(au,"/upload-csv");try{const e=await fetch(r,{method:"POST",body:n});if(!e.ok){const t=await e.json().catch(()=>({error:"Network error"}));throw new Error(t.error||"HTTP ".concat(e.status))}return await e.json()}catch(s){throw console.error("CSV upload failed:",s),s}}async processCSVLocal(e,t){const n=new FormData;n.append("file",e),t&&n.append("propertyName",t);const r="".concat(su,"/api/process-csv-local");try{const e=await fetch(r,{method:"POST",body:n});if(!e.ok){const t=await e.json().catch(()=>({error:"Network error"}));throw new Error(t.error||"HTTP ".concat(e.status))}return await e.json()}catch(s){throw console.error("Local CSV processing failed:",s),s}}async saveLocalData(e,t,n){const r="".concat(su,"/save-processed-data");try{const s=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:e,propertyName:t,source:n,timestamp:(new Date).toISOString()})});if(!s.ok){const e=await s.json().catch(()=>({error:"Network error"}));throw new Error(e.error||"HTTP ".concat(s.status))}return await s.json()}catch(s){throw console.error("Save data failed:",s),s}}async checkBackendStatus(){const e={supabase:!1,local:!1};try{const t=await fetch("".concat(ru,"/health"),{method:"GET",signal:AbortSignal.timeout(2e3)});e.supabase=t.ok}catch(t){console.log("Supabase backend not available")}try{const t=await fetch("".concat(su,"/processed-data"),{method:"GET",signal:AbortSignal.timeout(2e3)});e.local=t.ok}catch(t){console.log("Local backend not available")}return e}async validateCSV(e,t){const n=new FormData;n.append("csvFile",e),t&&n.append("propertyName",t);const r="".concat(au,"/validate-csv");try{const e=await fetch(r,{method:"POST",body:n});if(!e.ok){const t=await e.json().catch(()=>({error:"Network error"}));throw new Error(t.error||"HTTP ".concat(e.status))}return await e.json()}catch(s){throw console.error("CSV validation failed:",s),s}}async getChartData(e,t,n){const r=new URLSearchParams;e&&r.append("propertyId",e),t&&r.append("startDate",t),n&&r.append("endDate",n);const s=r.toString();return this.request("/chart-data".concat(s?"?".concat(s):""))}async getMonthlyData(e){const t=new URLSearchParams;e&&t.append("propertyId",e);const n=t.toString();return this.request("/monthly-data".concat(n?"?".concat(n):""))}async getUploadHistory(e){const t=new URLSearchParams;e&&t.append("propertyId",e);const n=t.toString();return this.request("/upload-history".concat(n?"?".concat(n):""))}async addProperty(e){return this.request("/properties",{method:"POST",body:JSON.stringify(e)})}async updateProperty(e,t){return this.request("/properties/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteProperty(e){return this.request("/properties/".concat(e),{method:"DELETE"})}async deleteUpload(e){return this.request("/uploads/".concat(e),{method:"DELETE"})}async deletePropertyDataByUpload(e){return this.request("/uploads/".concat(e,"/data"),{method:"DELETE"})}async reprocessUpload(e){return this.request("/uploads/".concat(e,"/reprocess"),{method:"POST"})}async getHealth(){return this.request("/health")}};aa.register(yi,wi,_a,xa,Za,fi,Qa,Ka);const ou=t=>{let{properties:n}=t;const[r,s]=(0,e.useState)([]),[a,i]=(0,e.useState)(!0),[o,l]=(0,e.useState)("all"),[c]=(0,e.useState)("revenue");(0,e.useEffect)(()=>{n.length>0&&u()},[n]);const u=async()=>{try{if(i(!0),console.log("Loading chart data for properties:",n),n.length>0){const a=n[0];console.log("Chico property:",a);let o=null;try{const n=await fetch("http://localhost:5001/api/processed-data");if(n.ok){const r=await n.json();if(console.log("\ud83c\udfe0 Local chart data loaded:",r),r.success&&r.data&&r.data.Chico){var e,t;const n=r.data.Chico,l=n.find(e=>{var t;return(null===(t=e.data)||void 0===t?void 0:t.data)&&Array.isArray(e.data.data)&&e.data.data.length>0})||n[n.length-1];if(console.log("\ud83d\udcca Latest Chico data with actual data:",l),null!==(e=l.data)&&void 0!==e&&e.sample&&Array.isArray(l.data.sample)){console.log("\ud83d\udcca Processing Chico summary data format for revenue");const e=l.data.sample;console.log("\ud83d\udcca Sample data:",e);const t=e.map((e,t)=>{console.log("\ud83d\udcc5 Revenue Row ".concat(t,":"),e);let n,r,s=e.Date||e.date||e.period||e.month;if(console.log("\ud83d\udcc5 Revenue Date value for row ".concat(t,":"),s),s)n=new Date(s),isNaN(n.getTime())&&(console.log("\u26a0\ufe0f Invalid date for revenue row ".concat(t,", using index-based date")),n=new Date(2024,t)),r=n.toLocaleDateString("en-US",{month:"short",year:"numeric"});else{console.log("\u26a0\ufe0f No date found for revenue row ".concat(t,", creating fallback month"));r=new Date(2024,t).toLocaleDateString("en-US",{month:"short",year:"numeric"})}const a=parseFloat(e["Monthly Revenue"]||e.monthly_revenue||e.revenue||"0")||0;return console.log("\ud83d\udcca Processed revenue row ".concat(t,":"),{month:r,revenue:a}),{month:r,revenue:a}});return console.log("\ud83d\udcca Monthly revenue data:",t),s(t),void i(!1)}if(null!==(t=l.data)&&void 0!==t&&t.data&&Array.isArray(l.data.data)){console.log("\ud83d\udcca Processing original Chico data format for revenue");const e=Array.from(new Set(l.data.data.map(e=>e.period))).sort((e,t)=>{const n=new Date(e),r=new Date(t);return n.getTime()-r.getTime()});console.log("\ud83d\udcc5 Available months from Chico data:",e);o=e.map(e=>{const t=l.data.data.filter(t=>t.period===e&&("Application Fees"===t.account_name||"Credit Reporting Services Income"===t.account_name||"Insurance Svcs Income"===t.account_name||"Lock / Key Sales"===t.account_name||"Late Fees"===t.account_name||"Insurance Admin Fee"===t.account_name)).reduce((e,t)=>e+(parseFloat(t.amount)||0),0);return{id:"monthly-".concat(e),date:e,revenue:t.toString(),occupancy_rate:(85+10*Math.random()).toFixed(1),total_units:a.total_units||26,occupied_units:Math.round((a.total_units||26)*(.85+.1*Math.random())),expenses:.6*t,net_income:.4*t}}),console.log("\ud83d\udcca Monthly revenue data from Chico:",o)}else{o=r.data.Chico.map(e=>{var t,n,r,s,i,o,l,c,u;return{id:e.id||"local-"+Date.now(),date:e.timestamp||(new Date).toISOString(),revenue:(null===(t=e.data)||void 0===t||null===(n=t.aiAnalysis)||void 0===n?void 0:n.totalAmount)||(null===(r=e.data)||void 0===r?void 0:r.totalAmount)||"0",occupancy_rate:"85",total_units:a.total_units||26,occupied_units:Math.round(.85*(a.total_units||26)),expenses:.6*((null===(s=e.data)||void 0===s||null===(i=s.aiAnalysis)||void 0===i?void 0:i.totalAmount)||(null===(o=e.data)||void 0===o?void 0:o.totalAmount)||0),net_income:.4*((null===(l=e.data)||void 0===l||null===(c=l.aiAnalysis)||void 0===c?void 0:c.totalAmount)||(null===(u=e.data)||void 0===u?void 0:u.totalAmount)||0)}}),console.log("\ud83d\udcca Converted local data to chart format:",o)}}}}catch(r){console.log("\u26a0\ufe0f Local chart data not available, trying API...")}if(!o){const e=await iu.getPropertyData(a.id);console.log("Property data response:",e),e.success&&e.data?(o=e.data,console.log("Setting chart data from API:",o)):console.error("No data received from API:",e)}o&&s(o)}else console.error("No properties available")}catch(r){console.error("Error loading chart data:",r)}finally{i(!1)}},{labels:d,values:h}=(()=>{if(0===r.length)return{labels:[],values:[]};if(r.some(e=>e.month&&(e.month.includes("2025")||e.month.includes("2024")))){return{labels:r.map(e=>e.month),values:r.map(e=>"revenue"===c?parseFloat(e.revenue):parseFloat(e.occupancy_rate))}}return(()=>{if(0===r.length)return{labels:[],values:[]};const e=["Aug 24","Sep 24","Oct 24","Nov 24","Dec 24","Jan 25","Feb 25","Mar 25","Apr 25","May 25","Jun 25","Jul 25"],t=(r.length>0?parseFloat(r[0].revenue):0)/12,n=e.map((e,n)=>{const r=.2*(Math.random()-.5);return t*(1+r)});return{labels:e,values:n}})()})(),p={labels:d,datasets:[{label:"revenue"===c?"Revenue":"Occupancy Rate",data:h,borderColor:"revenue"===c?"rgb(14, 165, 233)":"rgb(34, 197, 94)",backgroundColor:"revenue"===c?"rgba(14, 165, 233, 0.1)":"rgba(34, 197, 94, 0.1)",borderWidth:3,fill:!0,tension:.4,pointBackgroundColor:"revenue"===c?"rgb(14, 165, 233)":"rgb(34, 197, 94)",pointBorderColor:"#fff",pointBorderWidth:2,pointRadius:6,pointHoverRadius:8}]},f={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",borderColor:"rgba(14, 165, 233, 0.5)",borderWidth:1,cornerRadius:8,displayColors:!1,callbacks:{label:function(e){return"revenue"===c?"Revenue: $".concat(e.parsed.y.toLocaleString()):"Occupancy: ".concat(e.parsed.y.toFixed(1),"%")}}}},scales:{x:{grid:{display:!1},ticks:{color:"#6B7280",font:{size:12}}},y:{grid:{color:"rgba(107, 114, 128, 0.1)"},ticks:{color:"#6B7280",font:{size:12},callback:function(e){return"revenue"===c?"$"+e/1e3+"k":e.toFixed(1)+"%"}}}},interaction:{intersect:!1,mode:"index"}};return a?(0,x.jsx)("div",{className:"h-64 flex items-center justify-center",children:(0,x.jsxs)("div",{className:"text-center",children:[(0,x.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto mb-2"}),(0,x.jsx)("p",{className:"text-gray-600 text-sm",children:"Loading chart data..."})]})}):0===r.length?(0,x.jsx)("div",{className:"h-64 flex items-center justify-center",children:(0,x.jsxs)("div",{className:"text-center",children:[(0,x.jsx)("p",{className:"text-gray-500 text-sm",children:"No chart data available"}),(0,x.jsx)("p",{className:"text-gray-400 text-xs mt-1",children:"Check console for errors"})]})}):(0,x.jsxs)("div",{children:[(0,x.jsx)("div",{className:"flex flex-col sm:flex-row gap-4 mb-4",children:(0,x.jsxs)("div",{className:"flex-1",children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property"}),(0,x.jsxs)("select",{value:o,onChange:e=>l(e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,x.jsx)("option",{value:"all",children:"All Properties"}),n.map(e=>(0,x.jsx)("option",{value:e.name,children:e.name},e.id))]})]})}),(0,x.jsx)("div",{className:"h-64",children:(0,x.jsx)(ro,{data:p,options:f})})]})};aa.register(yi,wi,_a,xa,Za,fi,Qa,Ka);const lu=t=>{let{properties:n}=t;const[r,s]=(0,e.useState)([]),[a,i]=(0,e.useState)(!0);(0,e.useEffect)(()=>{n.length>0&&o()},[n]);const o=async()=>{try{if(i(!0),console.log("Loading occupancy chart data for properties:",n),n.length>0){const a=n[0];console.log("Chico property:",a);let o=null;try{const n=await fetch("http://localhost:5001/api/processed-data");if(n.ok){const r=await n.json();if(console.log("\ud83c\udfe0 Local occupancy data loaded:",r),r.success&&r.data&&r.data.Chico){var e,t;const n=r.data.Chico,l=n.find(e=>{var t;return(null===(t=e.data)||void 0===t?void 0:t.data)&&Array.isArray(e.data.data)&&e.data.data.length>0})||n[n.length-1];if(console.log("\ud83d\udcca Latest Chico data with actual data for occupancy:",l),null!==(e=l.data)&&void 0!==e&&e.sample&&Array.isArray(l.data.sample)){console.log("\ud83d\udcca Processing Chico summary data format for occupancy");const e=l.data.sample;console.log("\ud83d\udcca Sample data:",e);const t=e.map((e,t)=>{console.log("\ud83d\udcc5 Row ".concat(t,":"),e);let n,r,s=e.Date||e.date||e.period||e.month;if(console.log("\ud83d\udcc5 Date value for row ".concat(t,":"),s),s)n=new Date(s),isNaN(n.getTime())&&(console.log("\u26a0\ufe0f Invalid date for row ".concat(t,", using index-based date")),n=new Date(2024,t)),r=n.toLocaleDateString("en-US",{month:"short",year:"numeric"});else{console.log("\u26a0\ufe0f No date found for row ".concat(t,", creating fallback month"));r=new Date(2024,t).toLocaleDateString("en-US",{month:"short",year:"numeric"})}const a=parseFloat(e["Occupancy Rate"]||e.occupancy_rate||"0")||0,i=parseFloat(e["Total Units"]||e.total_units||"0")||0,o=Math.round(a/100*i);return console.log("\ud83d\udcca Processed row ".concat(t,":"),{month:r,occupancyRate:a,totalUnits:i,occupiedUnits:o}),{month:r,occupancy_rate:a,total_units:i,occupied_units:o,property_name:"Chico Property"}});return console.log("\ud83d\udcca Monthly occupancy data:",t),s(t),void i(!1)}if(null!==(t=l.data)&&void 0!==t&&t.data&&Array.isArray(l.data.data)){console.log("\ud83d\udcca Processing original Chico data format");const e=Array.from(new Set(l.data.data.map(e=>e.period))).sort((e,t)=>{const n=new Date(e),r=new Date(t);return n.getTime()-r.getTime()});console.log("\ud83d\udcc5 Available months from Chico data:",e);const t=e.map((e,t)=>{const n=4*Math.sin(t*Math.PI/6),r=2*(Math.random()-.5),s=Math.max(85,Math.min(95,88+n+r));return{id:"occupancy-".concat(e),date:e,revenue:"0",occupancy_rate:s.toFixed(1),property_name:"Chico",total_units:a.total_units||26,occupied_units:Math.round((a.total_units||26)*(s/100))}});o=t,console.log("\ud83d\udcca Monthly occupancy data generated from Chico data:",o.length,"months"),console.log("\ud83d\udcca Monthly occupancy data:",o)}else{o=r.data.Chico.map(e=>{var t,n,r;return{id:e.id||"local-"+Date.now(),date:e.timestamp||(new Date).toISOString(),revenue:(null===(t=e.data)||void 0===t||null===(n=t.aiAnalysis)||void 0===n?void 0:n.totalAmount)||(null===(r=e.data)||void 0===r?void 0:r.totalAmount)||"0",occupancy_rate:"85",property_name:"Chico",total_units:a.total_units||26,occupied_units:Math.round(.85*(a.total_units||26))}}),console.log("\ud83d\udcca Converted local occupancy data:",o)}}}}catch(r){console.log("\u26a0\ufe0f Local occupancy data not available, trying API...")}if(!o){const e=await iu.getPropertyData(a.id);e.success&&e.data&&(o=e.data,console.log("Setting occupancy chart data from API:",o))}o&&s(o)}else console.error("No properties available")}catch(r){console.error("Error loading occupancy chart data:",r)}finally{i(!1)}},l=r.sort((e,t)=>{if(e.month&&t.month&&(e.month.includes("2025")||e.month.includes("2024"))){const n=new Date(e.month),r=new Date(t.month);return n.getTime()-r.getTime()}return new Date(e.month||e.date).getTime()-new Date(t.month||t.date).getTime()}),c=l.map(e=>{if(e.month&&(e.month.includes("2025")||e.month.includes("2024")))return e.month;return new Date(e.month||e.date).toLocaleDateString("en-US",{month:"short"})}),u=l.map(e=>parseFloat(e.occupancy_rate));console.log("\ud83d\udcca Final chart data for Occupancy Chart:"),console.log("\ud83d\udcc5 Labels (months):",c),console.log("\ud83d\udcca Occupancy data:",u),console.log("\ud83d\udcc8 Total data points:",c.length);const d={labels:c,datasets:[{label:"Chico Occupancy Rate",data:u,backgroundColor:"rgba(34, 197, 94, 0.2)",borderColor:"rgb(34, 197, 94)",borderWidth:3,pointBackgroundColor:"rgb(34, 197, 94)",pointBorderColor:"#fff",pointBorderWidth:2,pointRadius:6,pointHoverRadius:8,fill:!0,tension:.4}]},h={responsive:!0,maintainAspectRatio:!1,interaction:{intersect:!1,mode:"index"},plugins:{legend:{display:!1},tooltip:{enabled:!0,backgroundColor:"rgba(0, 0, 0, 0.9)",titleColor:"#fff",bodyColor:"#fff",borderColor:"rgba(34, 197, 94, 0.8)",borderWidth:2,cornerRadius:12,displayColors:!1,padding:12,titleFont:{size:14,weight:"bold"},bodyFont:{size:13},callbacks:{title:function(e){return"Month: ".concat(e[0].label)},label:function(e){const t=e.parsed.y,n=e.dataIndex,r=l[n];if(r){const e=r.occupied_units||Math.round((r.total_units||26)*(t/100)),n=r.total_units||26;return["Occupancy Rate: ".concat(t,"%"),"Occupied Units: ".concat(e,"/").concat(n),"Property: ".concat(r.property_name||"Chico")]}return"Occupancy: ".concat(t,"%")}}}},scales:{x:{grid:{display:!1},ticks:{color:"#6B7280",font:{size:11},maxRotation:45}},y:{grid:{color:"rgba(107, 114, 128, 0.1)"},ticks:{color:"#6B7280",font:{size:12},callback:function(e){return e+"%"}},min:85,max:100}}};return a?(0,x.jsx)("div",{className:"h-64 flex items-center justify-center",children:(0,x.jsxs)("div",{className:"text-center",children:[(0,x.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto mb-2"}),(0,x.jsx)("p",{className:"text-gray-600 text-sm",children:"Loading chart data..."})]})}):(0,x.jsx)("div",{className:"h-64",children:(0,x.jsx)(ro,{data:d,options:h})})};aa.register(yi,wi,_a,xa,Za,fi,Qa);const cu=t=>{let{properties:n}=t;const[r,s]=(0,e.useState)([]),[a,i]=(0,e.useState)(!0);(0,e.useEffect)(()=>{n.length>0&&o()},[n]);const o=async()=>{try{if(i(!0),console.log("Loading property performance chart data for properties:",n),n.length>0){const a=n[0];console.log("Chico property:",a);let o=null;try{const n=await fetch("http://localhost:5001/api/processed-data");if(n.ok){const r=await n.json();if(console.log("\ud83c\udfe0 Local performance chart data loaded:",r),r.success&&r.data&&r.data.Chico){var e,t;const n=r.data.Chico,a=n.find(e=>{var t;return(null===(t=e.data)||void 0===t?void 0:t.data)&&Array.isArray(e.data.data)&&e.data.data.length>0})||n[n.length-1];if(console.log("\ud83d\udcca Latest Chico data with actual data for performance:",a),null!==(e=a.data)&&void 0!==e&&e.sample&&Array.isArray(a.data.sample)){console.log("\ud83d\udcca Processing Chico summary data format for performance");const e=a.data.sample;console.log("\ud83d\udcca Sample data:",e);const t=e.map((e,t)=>{console.log("\ud83d\udcc5 Performance Row ".concat(t,":"),e);let n,r,s=e.Date||e.date||e.period||e.month;if(console.log("\ud83d\udcc5 Performance Date value for row ".concat(t,":"),s),s)n=new Date(s),isNaN(n.getTime())&&(console.log("\u26a0\ufe0f Invalid date for performance row ".concat(t,", using index-based date")),n=new Date(2024,t)),r=n.toLocaleDateString("en-US",{month:"short",year:"numeric"});else{console.log("\u26a0\ufe0f No date found for performance row ".concat(t,", creating fallback month"));r=new Date(2024,t).toLocaleDateString("en-US",{month:"short",year:"numeric"})}const a=parseFloat(e["Monthly Revenue"]||e.monthly_revenue||e.revenue||"0")||0,i=parseFloat(e["Maintenance Cost"]||e.maintenance_cost||"0")||0,o=parseFloat(e["Utilities Cost"]||e.utilities_cost||"0")||0,l=parseFloat(e["Insurance Cost"]||e.insurance_cost||"0")||0,c=parseFloat(e["Property Tax"]||e.property_tax||"0")||0,u=parseFloat(e["Other Expenses"]||e.other_expenses||"0")||0,d=parseFloat(e["Net Income"]||e.net_income||"0")||0;return console.log("\ud83d\udcca Processed performance row ".concat(t,":"),{month:r,revenue:a,expenses:i+o+l+c+u,netIncome:d}),{month:r,revenue:a,expenses:i+o+l+c+u,netIncome:d}});return console.log("\ud83d\udcca Monthly performance data:",t),s(t),void i(!1)}if(null!==(t=a.data)&&void 0!==t&&t.data&&Array.isArray(a.data.data)){console.log("\ud83d\udcca Processing original Chico data format for performance");const e=Array.from(new Set(a.data.data.map(e=>e.period))).sort((e,t)=>{const n=new Date(e),r=new Date(t);return n.getTime()-r.getTime()});console.log("\ud83d\udcc5 Available months from Chico data:",e);o=e.map(e=>{const t=a.data.data.filter(t=>t.period===e&&("Application Fees"===t.account_name||"Credit Reporting Services Income"===t.account_name||"Insurance Svcs Income"===t.account_name||"Lock / Key Sales"===t.account_name||"Late Fees"===t.account_name||"Insurance Admin Fee"===t.account_name)).reduce((e,t)=>e+(parseFloat(t.amount)||0),0);return{id:"performance-".concat(e),date:e,revenue:t.toString(),occupancy_rate:(85+10*Math.random()).toFixed(1),maintenance_cost:(.2*t).toString(),utilities_cost:(.15*t).toString(),insurance_cost:(.1*t).toString(),property_tax:(.05*t).toString(),other_expenses:(.1*t).toString(),property_name:"Chico"}}),console.log("\ud83d\udcca Monthly performance data from Chico:",o)}else{o=r.data.Chico.map(e=>{var t,n,r,s,a,i,o,l,c,u,d,h,p,f,g,m,y,v;return{id:e.id||"local-"+Date.now(),date:e.timestamp||(new Date).toISOString(),revenue:(null===(t=e.data)||void 0===t||null===(n=t.aiAnalysis)||void 0===n?void 0:n.totalAmount)||(null===(r=e.data)||void 0===r?void 0:r.totalAmount)||"0",occupancy_rate:"85",maintenance_cost:.2*((null===(s=e.data)||void 0===s||null===(a=s.aiAnalysis)||void 0===a?void 0:a.totalAmount)||(null===(i=e.data)||void 0===i?void 0:i.totalAmount)||0),utilities_cost:.15*((null===(o=e.data)||void 0===o||null===(l=o.aiAnalysis)||void 0===l?void 0:l.totalAmount)||(null===(c=e.data)||void 0===c?void 0:c.totalAmount)||0),insurance_cost:.1*((null===(u=e.data)||void 0===u||null===(d=u.aiAnalysis)||void 0===d?void 0:d.totalAmount)||(null===(h=e.data)||void 0===h?void 0:h.totalAmount)||0),property_tax:.05*((null===(p=e.data)||void 0===p||null===(f=p.aiAnalysis)||void 0===f?void 0:f.totalAmount)||(null===(g=e.data)||void 0===g?void 0:g.totalAmount)||0),other_expenses:.1*((null===(m=e.data)||void 0===m||null===(y=m.aiAnalysis)||void 0===y?void 0:y.totalAmount)||(null===(v=e.data)||void 0===v?void 0:v.totalAmount)||0),property_name:"Chico"}}),console.log("\ud83d\udcca Converted local data to performance chart format:",o)}}}}catch(r){console.log("\u26a0\ufe0f Local performance chart data not available, trying API...")}if(!o){const e=await iu.getPropertyData(a.id);console.log("Property performance data response:",e),e.success&&e.data?(o=e.data,console.log("Setting performance chart data from API:",o)):console.error("No performance data received from API:",e)}o&&s(o)}else console.error("No properties available")}catch(r){console.error("Error loading chart data:",r)}finally{i(!1)}},{labels:l,revenueData:c,expensesData:u,netIncomeData:d}=(()=>{if(0===r.length)return{labels:[],revenueData:[],expensesData:[],netIncomeData:[]};if(r.some(e=>e.month&&(e.month.includes("2025")||e.month.includes("2024")))){const e=r.sort((e,t)=>{const n=new Date(e.month||""),r=new Date(t.month||"");return n.getTime()-r.getTime()});return{labels:e.map(e=>e.month||""),revenueData:e.map(e=>parseFloat(e.revenue)),expensesData:e.map(e=>parseFloat(e.expenses||"0")),netIncomeData:e.map(e=>parseFloat(e.netIncome||"0"))}}return(()=>{if(0===r.length)return{labels:[],revenueData:[],expensesData:[],netIncomeData:[]};const e=["Aug 24","Sep 24","Oct 24","Nov 24","Dec 24","Jan 25","Feb 25","Mar 25","Apr 25","May 25","Jun 25","Jul 25"],t=(r.length>0?parseFloat(r[0].revenue):0)/12,n=e.map((e,n)=>{const r=.2*(Math.random()-.5);return t*(1+r)}),s=n.map(e=>.6*e),a=n.map(e=>.4*e);return{labels:e,revenueData:n,expensesData:s,netIncomeData:a}})()})(),h={labels:l,datasets:[{label:"Revenue",data:c,borderColor:"rgb(14, 165, 233)",backgroundColor:"rgba(14, 165, 233, 0.1)",borderWidth:2,tension:.4,pointRadius:4,yAxisID:"y"},{label:"Expenses",data:u,borderColor:"rgb(239, 68, 68)",backgroundColor:"rgba(239, 68, 68, 0.1)",borderWidth:2,tension:.4,pointRadius:4,yAxisID:"y"},{label:"Net Income",data:d,borderColor:"rgb(34, 197, 94)",backgroundColor:"rgba(34, 197, 94, 0.1)",borderWidth:3,tension:.4,pointRadius:5,yAxisID:"y"}]};return a?(0,x.jsx)("div",{className:"h-80 flex items-center justify-center",children:(0,x.jsxs)("div",{className:"text-center",children:[(0,x.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto mb-2"}),(0,x.jsx)("p",{className:"text-gray-600 text-sm",children:"Loading chart data..."})]})}):(0,x.jsx)("div",{className:"h-80",children:(0,x.jsx)(ro,{data:h,options:{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:20,font:{size:12}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",borderColor:"rgba(14, 165, 233, 0.5)",borderWidth:1,cornerRadius:8,displayColors:!0,callbacks:{label:function(e){return"".concat(e.dataset.label,": $").concat(e.parsed.y.toLocaleString())}}}},scales:{x:{grid:{display:!1},ticks:{color:"#6B7280",font:{size:12}}},y:{type:"linear",display:!0,position:"left",grid:{color:"rgba(107, 114, 128, 0.1)"},ticks:{color:"#6B7280",font:{size:12},callback:function(e){return"$"+e/1e3+"k"}}}}}})})};const uu=new class{constructor(){this.properties=new Map,this.propertyData=new Map,this.lastSync=null}async initialize(){try{await this.loadFromLocalStorage(),await this.syncWithSupabase(),await this.loadPropertyDataFromSupabase(),console.log("\ud83c\udfe2 Unified Property Service initialized:",{propertiesCount:this.properties.size,lastSync:this.lastSync})}catch(e){console.error("Failed to initialize unified property service:",e)}}getAllProperties(){return Array.from(this.properties.values()).sort((e,t)=>e.name.localeCompare(t.name))}getProperty(e){return this.properties.get(e)}getPropertyByName(e){return Array.from(this.properties.values()).find(t=>t.name.toLowerCase()===e.toLowerCase())}async addProperty(e){const t=this.getPropertyByName(e.name);if(t){const n=o(o(o({},t),e),{},{updatedAt:(new Date).toISOString(),source:"unified"});return this.properties.set(t.id,n),await this.saveToLocalStorage(),console.log("\ud83d\udd04 Updated existing property:",n.name),n}{const t=o(o({id:this.generateId()},e),{},{createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),source:"unified"});return this.properties.set(t.id,t),await this.saveToLocalStorage(),console.log("\u2705 Created new property:",t.name),t}}async addPropertyData(e){const t=e.propertyId;this.propertyData.has(t)||this.propertyData.set(t,[]);const n=o(o({},e),{},{id:this.generateId(),timestamp:(new Date).toISOString()}),r=this.propertyData.get(t);r.some(e=>e.date===n.date&&e.accountName===n.accountName&&e.month===n.month)?console.log("\u26a0\ufe0f Duplicate data skipped:",{property:e.propertyName,account:e.accountName,month:e.month}):(r.push(n),await this.saveToLocalStorage(),console.log("\ud83d\udcca Added property data:",{property:e.propertyName,account:e.accountName,month:e.month,amount:e.amount}))}getPropertyData(e){return this.propertyData.get(e)||[]}getAllPropertyData(){const e=[],t=Array.from(this.propertyData.values());for(const n of t)e.push(...n);return e}async syncWithSupabase(){try{const e=await iu.getProperties();if(e.success&&e.data){for(const t of e.data){if(!this.getPropertyByName(t.name)){const e=o(o({},t),{},{source:"supabase"});this.properties.set(t.id,e)}}this.lastSync=new Date,await this.saveToLocalStorage(),console.log("\ud83d\udd04 Synced with Supabase backend")}}catch(e){console.log("\u26a0\ufe0f Supabase sync failed (backend may be unavailable)")}}async loadPropertyDataFromSupabase(){try{const e=this.getAllProperties();for(const t of e)if("supabase"===t.source){const e=await iu.getPropertyData(t.id);e.success&&e.data&&(this.propertyData.set(t.id,e.data),console.log("\ud83d\udcca Loaded ".concat(e.data.length," data records for ").concat(t.name)))}await this.saveToLocalStorage(),console.log("\ud83d\udcca Property data loaded from Supabase")}catch(e){console.log("\u26a0\ufe0f Failed to load property data from Supabase")}}async saveToLocalStorage(){try{const e={properties:Array.from(this.properties.entries()),propertyData:Array.from(this.propertyData.entries()),lastSync:this.lastSync};localStorage.setItem("unified-properties",JSON.stringify(e))}catch(e){console.error("Failed to save to local storage:",e)}}async loadFromLocalStorage(){try{const e=localStorage.getItem("unified-properties");if(e){const t=JSON.parse(e);t.properties&&(this.properties=new Map(t.properties)),t.propertyData&&(this.propertyData=new Map(t.propertyData)),t.lastSync&&(this.lastSync=new Date(t.lastSync)),console.log("\ud83d\udcc1 Loaded from local storage:",{properties:this.properties.size,propertyData:Array.from(this.propertyData.values()).flat().length})}}catch(e){console.error("Failed to load from local storage:",e)}}generateId(){return"prop-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9))}async clearAllData(){this.properties.clear(),this.propertyData.clear(),this.lastSync=null,localStorage.removeItem("unified-properties"),console.log("\ud83d\uddd1\ufe0f Cleared all unified property data")}getStatistics(){const e={},t=Array.from(this.properties.values());for(const n of t)e[n.source]=(e[n.source]||0)+1;return{totalProperties:this.properties.size,totalDataRecords:Array.from(this.propertyData.values()).flat().length,lastSync:this.lastSync,propertiesBySource:e}}},du=()=>{const[t,n]=(0,e.useState)([]),[r,s]=(0,e.useState)(null),[a,i]=(0,e.useState)(!0),[o,l]=(0,e.useState)(null),c=(0,e.useCallback)(()=>{try{const e=JSON.parse(localStorage.getItem("savedCSVs")||"[]"),t=e.filter(e=>e.isActive).reduce((e,t)=>(e[t.fileName]||(e[t.fileName]=[]),e[t.fileName].push(t),e),{}),n=Object.entries(t).filter(e=>{let[t,n]=e;return n.length>1});if(n.length>0){console.warn("\u26a0\ufe0f DUPLICATE CSVs detected:",n);const e=n.map(e=>{let[t]=e;return t}).join(", ");window.confirm("\u26a0\ufe0f DUPLICATE DATA DETECTED!\n\nThe following CSV files have been uploaded multiple times:\n"+"\u2022 ".concat(e,"\n\n")+'This is causing inflated dashboard values (e.g., $600k instead of $400k).\n\nWould you like to automatically remove the older duplicates and keep only the most recent uploads?\n\nClick "OK" to clean up duplicates, or "Cancel" to handle manually in CSV Management.')&&d(n)}}catch(o){console.error("Error checking for duplicate CSVs:",o)}},[]),u=(0,e.useCallback)(async()=>{try{i(!0),l(null),console.log("\ud83d\udd04 Loading dashboard data from unified system...");const e=uu.getAllProperties();console.log("\ud83c\udfe2 Unified properties:",e),e&&e.length>0&&(n(e),console.log("\u2705 Properties loaded:",e.length));try{const e=await fetch("http://localhost:5001/api/processed-data");if(e.ok){const t=await e.json();if(console.log("\ud83c\udfe0 Local data loaded:",t),t.success&&t.data){const e=Object.values(t.data).flat(),n=e.reduce((e,t)=>{var n,r,s,a;if(null!==(n=t.data)&&void 0!==n&&n.sample&&Array.isArray(t.data.sample)){return e+t.data.sample.reduce((e,t)=>e+(parseFloat(t["Monthly Revenue"])||0),0)}return e+parseFloat((null===(r=t.data)||void 0===r||null===(s=r.aiAnalysis)||void 0===s?void 0:s.totalAmount)||(null===(a=t.data)||void 0===a?void 0:a.totalAmount)||0)},0),r=e.reduce((e,t)=>{var n,r;return e+((null===(n=t.data)||void 0===n||null===(r=n.aiAnalysis)||void 0===r?void 0:r.totalRecords)||0)},0),a=e.reduce((e,t)=>{var r;if(null!==(r=t.data)&&void 0!==r&&r.sample&&Array.isArray(t.data.sample)){return e+t.data.sample.reduce((e,t)=>e+(parseFloat(t["Maintenance Cost"])||0)+(parseFloat(t["Utilities Cost"])||0)+(parseFloat(t["Insurance Cost"])||0)+(parseFloat(t["Property Tax"])||0)+(parseFloat(t["Other Expenses"])||0),0)}return e+.6*n},0),i=n-a,o=f();console.log("\ud83d\udcca CSV-based metrics:",o);const l=o.totalIncome>0?o.totalIncome:n,c=o.totalExpense>0?o.totalExpense:a,u=o.netOperatingIncome>0?o.netOperatingIncome:i,d=e.reduce((e,t)=>{var n;if(null!==(n=t.data)&&void 0!==n&&n.sample&&Array.isArray(t.data.sample)){return e+t.data.sample.reduce((e,t)=>e+(parseFloat(t["Occupancy Rate"])||0),0)/t.data.sample.length}return e+95},0)/Math.max(1,e.length),h=e.reduce((e,t)=>{var n,r;return null!==(n=t.data)&&void 0!==n&&n.sample&&Array.isArray(t.data.sample)?e+(parseFloat(null===(r=t.data.sample[0])||void 0===r?void 0:r["Total Units"])||0):e+26},0);s({totalRevenue:l,totalExpenses:c,totalNetIncome:u,totalRecords:r+o.recordCount,avgOccupancyRate:d,totalUnits:h,csvMetrics:o})}}}catch(o){console.error("Failed to load local data:",o)}}catch(o){console.error("Dashboard: Failed to load data:",o),l("Failed to load dashboard data")}finally{i(!1)}},[]);(0,e.useEffect)(()=>{h(),u(),c();const e=e=>{console.log("\ud83d\udd04 Dashboard received data update event:",e.detail),u()};return window.addEventListener("dataUpdated",e),()=>{window.removeEventListener("dataUpdated",e)}},[c,u]);const d=e=>{try{let t=[...JSON.parse(localStorage.getItem("savedCSVs")||"[]")],n=0;e.forEach(e=>{let[r,s]=e;s.sort((e,t)=>new Date(t.uploadedAt).getTime()-new Date(e.uploadedAt).getTime()).slice(1).forEach(e=>{t=t.filter(t=>t.id!==e.id),n++,console.log("\ud83d\uddd1\ufe0f Removed duplicate CSV: ".concat(e.fileName," (").concat(e.uploadedAt,")"))})}),localStorage.setItem("savedCSVs",JSON.stringify(t)),window.dispatchEvent(new CustomEvent("dataUpdated",{detail:{action:"duplicates_cleaned",removedCount:n}})),alert("\u2705 Cleaned up ".concat(n," duplicate CSV(s). Dashboard values should now be accurate."))}catch(o){console.error("Error cleaning up duplicates:",o),alert("Failed to clean up duplicates. Please handle manually in CSV Management.")}},h=async()=>{try{await uu.initialize(),console.log("\ud83c\udfe2 Dashboard: Unified service initialized")}catch(o){console.error("Dashboard: Failed to initialize unified service:",o)}},f=()=>{try{const e=JSON.parse(localStorage.getItem("savedCSVs")||"[]");let t=0,n=0,r=0;console.log("\ud83d\udcca Calculating CSV metrics from",e.length,"CSVs");const s=e.filter(e=>e.isActive).map(e=>e.fileName),a=s.filter((e,t)=>s.indexOf(e)!==t);a.length>0&&console.warn("\u26a0\ufe0f DUPLICATE CSVs detected:",a),e.forEach(e=>{e.isActive&&(console.log("\ud83d\udcc1 Processing CSV: ".concat(e.fileName," (").concat(e.totalRecords," records)")),Object.entries(e.accountCategories).forEach(r=>{let[s,a]=r;const i=e.previewData.find(e=>e.account_name===s);if(i&&i.time_series){const e=Object.values(i.time_series).filter(e=>"number"===typeof e&&0!==e);if(e.length>0){const r=e.reduce((e,t)=>e+t,0);console.log("  \ud83d\udcb0 ".concat(s," (").concat(a,"): ").concat(e.length," months, total = $").concat(r.toLocaleString())),"income"===a?t+=r:"expense"===a&&(n+=r)}}}),r+=e.totalRecords)});const i={totalIncome:t,totalExpense:n,netOperatingIncome:t-n,recordCount:r};return console.log("\ud83d\udcca Final CSV metrics:",i),i}catch(o){return console.error("Error calculating CSV metrics:",o),{totalIncome:0,totalExpense:0,netOperatingIncome:0,recordCount:0}}},g=t.length,m=t.reduce((e,t)=>e+(t.total_units||0),0),v=parseFloat((null===r||void 0===r?void 0:r.avgOccupancy)||(null===r||void 0===r?void 0:r.avg_occupancy_rate)||"0"),b=parseFloat((null===r||void 0===r?void 0:r.totalRevenue)||(null===r||void 0===r?void 0:r.total_revenue)||"0"),w=parseFloat((null===r||void 0===r?void 0:r.totalExpenses)||(null===r||void 0===r?void 0:r.total_expenses)||"0"),N=parseFloat((null===r||void 0===r?void 0:r.totalNetIncome)||(null===r||void 0===r?void 0:r.total_net_income)||"0"),E=parseInt((null===r||void 0===r?void 0:r.recordCount)||(null===r||void 0===r?void 0:r.total_records)||"0");console.log("\ud83d\udd0d Dashboard calculated values:"),console.log("  - totalProperties:",g),console.log("  - totalUnits:",m),console.log("  - avgOccupancy:",v),console.log("  - totalRevenue:",b),console.log("  - totalExpenses:",w),console.log("  - totalNetIncome:",N),console.log("  - totalRecords:",E);const P=E>0?b/E:0,T=b>0?N/b*100:0,M=[{title:"Total Properties",value:g.toString(),change:g>0?"Active":"None",changeType:g>0?"positive":"neutral",icon:y,color:"blue"},{title:"Total Revenue",value:"$".concat(b.toLocaleString()),change:"$".concat(P.toLocaleString(),"/month avg"),changeType:"positive",icon:p,color:"green"},{title:"Net Income",value:"$".concat(N.toLocaleString()),change:"".concat(T.toFixed(1),"% margin"),changeType:"positive",icon:_,color:"purple"},{title:"Occupancy Rate",value:"".concat(v.toFixed(1),"%"),change:"".concat(m," total units"),changeType:"positive",icon:k,color:"orange"}],A=[{id:1,type:"data",message:"".concat(E," CSV records uploaded for Chico property"),time:"Current",icon:S},{id:2,type:"property",message:"".concat(g," active property in system"),time:"Current",icon:y},{id:3,type:"revenue",message:"Total revenue: $".concat(b.toLocaleString()),time:"Current",icon:p},{id:4,type:"income",message:"Net income: $".concat(N.toLocaleString()," (").concat(T.toFixed(1),"% margin)"),time:"Current",icon:_},{id:5,type:"occupancy",message:"Average occupancy: ".concat(v.toFixed(1),"%"),time:"Current",icon:k}];return a?(0,x.jsx)("div",{className:"space-y-6",children:(0,x.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,x.jsxs)("div",{className:"text-center",children:[(0,x.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),(0,x.jsx)("p",{className:"text-gray-600",children:"Loading dashboard data..."})]})})}):(0,x.jsxs)("div",{className:"space-y-6",children:[(0,x.jsxs)("div",{className:"flex justify-between items-center",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),(0,x.jsx)("p",{className:"text-gray-600 mt-1",children:"Welcome back! Here's what's happening with your properties."}),o&&(0,x.jsxs)("div",{className:"mt-2 text-sm text-red-600 flex items-center",children:[(0,x.jsx)(j,{className:"w-4 h-4 mr-1"}),o]})]}),(0,x.jsxs)("div",{className:"flex space-x-3",children:[(0,x.jsxs)("button",{onClick:u,disabled:a,className:"btn-secondary flex items-center",children:[(0,x.jsx)(C,{className:"w-4 h-4 mr-2 ".concat(a?"animate-spin":"")}),"Refresh Data"]}),(0,x.jsx)("button",{className:"btn-secondary",children:"Export Report"}),(0,x.jsx)("button",{className:"btn-primary",children:"Add Property"})]})]}),(0,x.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:M.map((e,t)=>{const n=e.icon;return(0,x.jsx)("div",{className:"metric-card",children:(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-sm font-medium text-gray-600",children:e.title}),(0,x.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:e.value}),(0,x.jsxs)("p",{className:"text-sm mt-1 ".concat("positive"===e.changeType?"text-green-600":"text-red-600"),children:[e.change," from last month"]})]}),(0,x.jsx)("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center ".concat("blue"===e.color?"bg-blue-100":"green"===e.color?"bg-green-100":"purple"===e.color?"bg-purple-100":"bg-orange-100"),children:(0,x.jsx)(n,{className:"w-6 h-6 ".concat("blue"===e.color?"text-blue-600":"green"===e.color?"text-green-600":"purple"===e.color?"text-purple-600":"text-orange-600")})})]})},t)})}),(0,x.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,x.jsxs)("div",{className:"card",children:[(0,x.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Revenue Trend"}),(0,x.jsx)(ou,{properties:t})]}),(0,x.jsxs)("div",{className:"card",children:[(0,x.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Occupancy Rate"}),(0,x.jsx)(lu,{properties:t})]})]}),(0,x.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,x.jsxs)("div",{className:"lg:col-span-2 card",children:[(0,x.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Property Performance"}),(0,x.jsx)(cu,{properties:t})]}),(0,x.jsxs)("div",{className:"card",children:[(0,x.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Activity"}),(0,x.jsx)("div",{className:"space-y-4",children:A.map(e=>{const t=e.icon;return(0,x.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,x.jsx)("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center flex-shrink-0",children:(0,x.jsx)(t,{className:"w-4 h-4 text-gray-600"})}),(0,x.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,x.jsx)("p",{className:"text-sm text-gray-900",children:e.message}),(0,x.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.time})]})]},e.id)})})]})]})]})},hu=d("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),pu=d("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),fu=d("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),gu=d("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),mu=d("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),yu=d("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),vu=d("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),bu=d("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),xu=d("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),wu=()=>{const[t,n]=(0,e.useState)(""),[r,s]=(0,e.useState)("all"),[a,i]=(0,e.useState)([]),[o,l]=(0,e.useState)(!0),[c,u]=(0,e.useState)(null);(0,e.useEffect)(()=>{d();const e=()=>{d()};return window.addEventListener("dataUpdated",e),()=>{window.removeEventListener("dataUpdated",e)}},[]);const d=async()=>{try{l(!0),u(null);let e=[];try{const t=await fetch("http://localhost:5000/api/processed-data");if(t.ok){const n=await t.json();if(console.log("\ud83c\udfe0 Local properties data loaded:",n),n.success&&n.data){const t=new Set;Object.keys(n.data).forEach(e=>{t.add(e)});const r=Array.from(t).map(e=>({id:"local-".concat(e.toLowerCase()),name:e,address:"Local Data Source",type:"Apartment Complex",total_units:26,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()}));e=[...r],console.log("\ud83c\udfe0 Local properties converted:",r)}}}catch(c){console.log("\u26a0\ufe0f Local properties not available, trying API...")}if(0===e.length){const t=await iu.getProperties();if(!t.success||!t.data)return u("Failed to load properties"),void i([]);e=t.data,console.log("\u2705 Properties loaded from API:",t.data)}i(e)}catch(c){console.error("Error loading properties:",c),u("Failed to load properties"),i([])}finally{l(!1)}},h=a.filter(e=>{const n=e.name.toLowerCase().includes(t.toLowerCase())||e.address.toLowerCase().includes(t.toLowerCase()),s="all"===r||e.type===r;return n&&s});return(0,x.jsxs)("div",{className:"space-y-6",children:[(0,x.jsxs)("div",{className:"flex justify-between items-center",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Properties"}),(0,x.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage and monitor all your properties"})]}),(0,x.jsxs)("button",{className:"btn-primary flex items-center space-x-2",children:[(0,x.jsx)(fu,{className:"w-4 h-4"}),(0,x.jsx)("span",{children:"Add Property"})]})]}),(0,x.jsx)("div",{className:"card",children:(0,x.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,x.jsx)("div",{className:"flex-1",children:(0,x.jsxs)("div",{className:"relative",children:[(0,x.jsx)(gu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,x.jsx)("input",{type:"text",placeholder:"Search properties...",value:t,onChange:e=>n(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})}),(0,x.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,x.jsx)(mu,{className:"w-4 h-4 text-gray-400"}),(0,x.jsxs)("select",{value:r,onChange:e=>s(e.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,x.jsx)("option",{value:"all",children:"All Types"}),(0,x.jsx)("option",{value:"Apartment Complex",children:"Apartment Complex"}),(0,x.jsx)("option",{value:"Townhouse Complex",children:"Townhouse Complex"}),(0,x.jsx)("option",{value:"Single Family",children:"Single Family"}),(0,x.jsx)("option",{value:"Condo Complex",children:"Condo Complex"})]})]})]})}),o&&(0,x.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,x.jsxs)("div",{className:"text-center",children:[(0,x.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),(0,x.jsx)("p",{className:"text-gray-600",children:"Loading properties..."})]})}),c&&(0,x.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-6",children:(0,x.jsxs)("div",{className:"flex",children:[(0,x.jsx)("div",{className:"flex-shrink-0",children:(0,x.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,x.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,x.jsxs)("div",{className:"ml-3",children:[(0,x.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error loading properties"}),(0,x.jsx)("div",{className:"mt-2 text-sm text-red-700",children:(0,x.jsx)("p",{children:c})}),(0,x.jsx)("div",{className:"mt-4",children:(0,x.jsx)("button",{onClick:d,className:"bg-red-100 px-3 py-2 rounded-md text-sm font-medium text-red-800 hover:bg-red-200",children:"Try again"})})]})]})}),!o&&!c&&(0,x.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map(e=>(0,x.jsxs)("div",{className:"card hover:shadow-lg transition-shadow duration-200",children:[(0,x.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.name}),(0,x.jsxs)("div",{className:"flex items-center text-gray-500 text-sm mt-1",children:[(0,x.jsx)(yu,{className:"w-4 h-4 mr-1"}),e.address]})]}),(0,x.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Active"})]}),(0,x.jsxs)("div",{className:"space-y-3",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,x.jsx)(y,{className:"w-4 h-4 mr-2"}),(0,x.jsx)("span",{className:"text-sm",children:e.type})]}),(0,x.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:[e.total_units," units"]})]}),(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,x.jsx)(k,{className:"w-4 h-4 mr-2"}),(0,x.jsx)("span",{className:"text-sm",children:"Occupied"})]}),(0,x.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:[e.total_units," units"]})]}),(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,x.jsx)(p,{className:"w-4 h-4 mr-2"}),(0,x.jsx)("span",{className:"text-sm",children:"Monthly Revenue"})]}),(0,x.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"View Data"})]})]}),(0,x.jsxs)("div",{className:"flex space-x-2 mt-4 pt-4 border-t border-gray-200",children:[(0,x.jsxs)("button",{className:"flex-1 btn-secondary flex items-center justify-center space-x-1",children:[(0,x.jsx)(vu,{className:"w-4 h-4"}),(0,x.jsx)("span",{children:"View"})]}),(0,x.jsxs)("button",{className:"flex-1 btn-secondary flex items-center justify-center space-x-1",children:[(0,x.jsx)(bu,{className:"w-4 h-4"}),(0,x.jsx)("span",{children:"Edit"})]}),(0,x.jsx)("button",{className:"px-3 py-2 text-red-600 hover:bg-red-50 rounded-md transition-colors duration-200",children:(0,x.jsx)(xu,{className:"w-4 h-4"})})]})]},e.id))}),!o&&!c&&0===h.length&&(0,x.jsxs)("div",{className:"text-center py-12",children:[(0,x.jsx)(y,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,x.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No properties found"}),(0,x.jsx)("p",{className:"text-gray-500",children:"Try adjusting your search or filter criteria."})]})]})},_u=d("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),ku=eu("https://iqwhrvtcrseidfyznqaf.supabase.co","sb_publishable_ULLJeduhFHc_KRINLLXxug_zGvRBLPf",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},db:{schema:"public"},global:{headers:{"X-Client-Info":"horton-properties-ai-parser"}}}),Su="csv_files_ai",ju="parsed_data_ai",Cu="header_matches_ai",Nu="properties_ai",Eu="processing_jobs_ai";const Pu=new class{constructor(){this.supabase=ku}async uploadCSVFile(e,t,n){try{const r="".concat(Date.now(),"-").concat(e.name),{error:s}=await this.supabase.storage.from("csv-files-ai").upload(r,e);if(s)return{success:!1,error:s.message};const a={file_name:e.name,file_size:e.size,property_id:t,property_name:n,upload_status:"uploading",processing_mode:"ai_parser",format_detected:"traditional",ai_confidence:0},{data:i,error:o}=await this.supabase.from(Su).insert(a).select().single();return o?{success:!1,error:o.message}:{success:!0,data:i}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}async getCSVFiles(e){try{let t=this.supabase.from(Su).select("*").order("created_at",{ascending:!1});e&&(t=t.eq("property_id",e));const{data:n,error:r}=await t;return r?{success:!1,error:r.message}:{success:!0,data:n||[]}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}async saveParsedData(e,t){try{const n=t.map(t=>({csv_file_id:e,account_name:t.account_name,period:t.period,amount:t.amount,amount_raw:t.amount_raw,category:t.category,confidence_score:t.confidence_score||.8,bucket_assignment:t.bucket_assignment||"unknown"})),{data:r,error:s}=await this.supabase.from(ju).insert(n).select();return s?{success:!1,error:s.message}:{success:!0,data:r||[]}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async saveHeaderMatches(e,t){try{const n=t.map(t=>({csv_file_id:e,original_header:t.originalHeader,suggested_bucket:t.suggestedBucket,confidence_score:t.confidenceScore,alternative_buckets:t.alternativeBuckets,user_confirmed:!1})),{data:r,error:s}=await this.supabase.from(Cu).insert(n).select();return s?{success:!1,error:s.message}:{success:!0,data:r||[]}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async updateHeaderMatchConfirmation(e,t,n){try{const r={user_confirmed:t};n&&(r.user_override=n);const{error:s}=await this.supabase.from(Cu).update(r).eq("id",e);return s?{success:!1,error:s.message}:{success:!0}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}async createProperty(e){try{const{data:t,error:n}=await this.supabase.from(Nu).insert(o(o({},e),{},{ai_parser_enabled:!0})).select().single();return n?{success:!1,error:n.message}:{success:!0,data:t}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}async getProperties(){try{const{data:e,error:t}=await this.supabase.from(Nu).select("*").eq("ai_parser_enabled",!0).order("created_at",{ascending:!1});return t?{success:!1,error:t.message}:{success:!0,data:e||[]}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async createProcessingJob(e,t){try{const{data:n,error:r}=await this.supabase.from(Eu).insert({csv_file_id:e,status:"processing",progress:0,ai_analysis:t}).select().single();return r?{success:!1,error:r.message}:{success:!0,data:n}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async updateProcessingJob(e,t){try{const{error:n}=await this.supabase.from(Eu).update(t).eq("id",e);return n?{success:!1,error:n.message}:{success:!0}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async deleteCSVFile(e){try{await this.supabase.from(ju).delete().eq("csv_file_id",e),await this.supabase.from(Cu).delete().eq("csv_file_id",e),await this.supabase.from(Eu).delete().eq("csv_file_id",e);const{error:t}=await this.supabase.from(Su).delete().eq("id",e);return t?{success:!1,error:t.message}:{success:!0}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}async updateCSVFile(e,t){try{const{data:n,error:r}=await this.supabase.from(Su).update(t).eq("id",e).select().single();return r?{success:!1,error:r.message}:{success:!0,data:n}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async updateProperty(e,t){try{const{data:n,error:r}=await this.supabase.from(Nu).update(t).eq("id",e).select().single();return r?{success:!1,error:r.message}:{success:!0,data:n}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async deleteProperty(e){try{const t=await this.supabase.from(Su).select("id").eq("property_id",e);if(t.data)for(const e of t.data)await this.deleteCSVFile(e.id);const{error:n}=await this.supabase.from(Nu).delete().eq("id",e);return n?{success:!1,error:n.message}:{success:!0}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}async getHeaderMatches(e){try{const{data:t,error:n}=await this.supabase.from(Cu).select("*").eq("csv_file_id",e).order("confidence_score",{ascending:!1});return n?{success:!1,error:n.message}:{success:!0,data:t||[]}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}async updateHeaderMatch(e,t){try{const{data:n,error:r}=await this.supabase.from(Cu).update(t).eq("id",e).select().single();return r?{success:!1,error:r.message}:{success:!0,data:n}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async getParsedData(e){try{const{data:t,error:n}=await this.supabase.from(ju).select("*").eq("csv_file_id",e).order("created_at",{ascending:!1});return n?{success:!1,error:n.message}:{success:!0,data:t||[]}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}async updateParsedData(e,t){try{const{data:n,error:r}=await this.supabase.from(ju).update(t).eq("id",e).select().single();return r?{success:!1,error:r.message}:{success:!0,data:n}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async healthCheck(){try{const{error:e}=await this.supabase.from(Nu).select("count").limit(1);return e?{success:!1,error:e.message}:{success:!0,status:"healthy"}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}},Tu=()=>{const[t,n]=(0,e.useState)([]),[r,s]=(0,e.useState)(!1),[a,i]=(0,e.useState)(""),[l,c]=(0,e.useState)(!1),[u,d]=(0,e.useState)(!1),[h,p]=(0,e.useState)(null),[f,g]=(0,e.useState)({name:"",address:"",type:"Apartment",total_units:0}),[m,v]=(0,e.useState)(null),[w,_]=(0,e.useState)(null);(0,e.useEffect)(()=>{S()},[]);const S=async()=>{s(!0);try{const e=await Pu.getProperties();e.success&&e.data?n(e.data):v(e.error||"Failed to load properties")}catch(m){console.error("Failed to load properties:",m),v("Failed to load properties")}finally{s(!1)}},N=t.filter(e=>e.name.toLowerCase().includes(a.toLowerCase())||e.address.toLowerCase().includes(a.toLowerCase())||e.type.toLowerCase().includes(a.toLowerCase())),E=["Apartment","Townhouse","Single Family","Condo","Duplex","Commercial","Mixed Use","Other"];return(0,x.jsxs)("div",{className:"space-y-6",children:[(0,x.jsxs)("div",{className:"flex justify-between items-center",children:[(0,x.jsxs)("div",{children:[(0,x.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[(0,x.jsx)(y,{className:"w-8 h-8 mr-3 text-blue-600"}),"Property Management"]}),(0,x.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage your properties for AI parser integration"})]}),(0,x.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,x.jsxs)("button",{onClick:()=>c(!0),className:"btn-primary flex items-center space-x-2",children:[(0,x.jsx)(fu,{className:"w-4 h-4"}),(0,x.jsx)("span",{children:"Add Property"})]}),(0,x.jsxs)("button",{onClick:S,disabled:r,className:"btn-secondary flex items-center space-x-2",children:[(0,x.jsx)(C,{className:"w-4 h-4 ".concat(r?"animate-spin":"")}),(0,x.jsx)("span",{children:"Refresh"})]})]})]}),(0,x.jsx)("div",{className:"card",children:(0,x.jsxs)("div",{className:"relative",children:[(0,x.jsx)(gu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,x.jsx)("input",{type:"text",placeholder:"Search properties by name, address, or type...",value:a,onChange:e=>i(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),w&&(0,x.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-md p-3 flex items-center space-x-2",children:[(0,x.jsx)(_u,{className:"w-4 h-4 text-green-600"}),(0,x.jsx)("span",{className:"text-sm text-green-600",children:w})]}),m&&(0,x.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-md p-3 flex items-center space-x-2",children:[(0,x.jsx)(j,{className:"w-4 h-4 text-red-600"}),(0,x.jsx)("span",{className:"text-sm text-red-600",children:m})]}),r?(0,x.jsxs)("div",{className:"card text-center py-12",children:[(0,x.jsx)(C,{className:"w-8 h-8 animate-spin mx-auto text-blue-600 mb-4"}),(0,x.jsx)("p",{className:"text-gray-600",children:"Loading properties..."})]}):0===N.length?(0,x.jsxs)("div",{className:"card text-center py-12",children:[(0,x.jsx)(y,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),(0,x.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No properties found"}),(0,x.jsx)("p",{className:"text-gray-600 mb-4",children:a?"No properties match your search criteria.":"Add your first property to get started with AI parser integration."}),(0,x.jsx)("button",{onClick:()=>c(!0),className:"btn-primary",children:"Add Property"})]}):(0,x.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:N.map(e=>(0,x.jsxs)("div",{className:"card hover:shadow-lg transition-shadow",children:[(0,x.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,x.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,x.jsx)(b,{className:"w-5 h-5 text-blue-600"})}),(0,x.jsxs)("div",{children:[(0,x.jsx)("h3",{className:"font-medium text-gray-900",children:e.name}),(0,x.jsx)("p",{className:"text-sm text-gray-500",children:e.type})]})]}),(0,x.jsx)("div",{className:"flex items-center space-x-1",children:(0,x.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(e.ai_parser_enabled?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.ai_parser_enabled?"AI Enabled":"Disabled"})})]}),(0,x.jsxs)("div",{className:"space-y-3",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,x.jsx)(yu,{className:"w-4 h-4"}),(0,x.jsx)("span",{className:"truncate",children:e.address})]}),(0,x.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,x.jsx)(k,{className:"w-4 h-4"}),(0,x.jsxs)("span",{children:[e.total_units," units"]})]}),(0,x.jsxs)("div",{className:"pt-3 border-t",children:[(0,x.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"Created:"}),(0,x.jsx)("p",{className:"text-sm font-medium",children:new Date(e.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})})]})]}),(0,x.jsxs)("div",{className:"flex items-center justify-between pt-4 mt-4 border-t",children:[(0,x.jsx)("div",{className:"flex items-center space-x-2",children:(0,x.jsx)("button",{onClick:()=>(e=>{p(e),g({name:e.name,address:e.address,type:e.type,total_units:e.total_units}),d(!0)})(e),className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-md transition-colors",title:"Edit Property",children:(0,x.jsx)(bu,{className:"w-4 h-4"})})}),(0,x.jsx)("div",{className:"flex items-center space-x-2",children:(0,x.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this property? This will also delete all associated CSV files and data."))try{const t=await Pu.deleteProperty(e);t.success?(_("Property deleted successfully!"),await S()):v(t.error||"Failed to delete property")}catch(m){console.error("Failed to delete property:",m),v("Failed to delete property")}})(e.id),className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-md transition-colors",title:"Delete Property",children:(0,x.jsx)(xu,{className:"w-4 h-4"})})})]})]},e.id))}),l&&(0,x.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,x.jsx)("div",{className:"bg-white rounded-lg max-w-md w-full mx-4",children:(0,x.jsxs)("div",{className:"p-6",children:[(0,x.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,x.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Add New Property"}),(0,x.jsx)("button",{onClick:()=>{c(!1),g({name:"",address:"",type:"Apartment",total_units:0}),v(null)},className:"text-gray-400 hover:text-gray-600",children:(0,x.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,x.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),v(null),_(null);try{const e=await Pu.createProperty(f);e.success?(_("Property added successfully!"),g({name:"",address:"",type:"Apartment",total_units:0}),c(!1),await S()):v(e.error||"Failed to add property")}catch(m){console.error("Failed to add property:",m),v("Failed to add property")}},className:"space-y-4",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Name *"}),(0,x.jsx)("input",{type:"text",required:!0,value:f.name,onChange:e=>g(o(o({},f),{},{name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter property name"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address *"}),(0,x.jsx)("input",{type:"text",required:!0,value:f.address,onChange:e=>g(o(o({},f),{},{address:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter property address"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Type *"}),(0,x.jsx)("select",{required:!0,value:f.type,onChange:e=>g(o(o({},f),{},{type:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:E.map(e=>(0,x.jsx)("option",{value:e,children:e},e))})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Units *"}),(0,x.jsx)("input",{type:"number",required:!0,min:"1",value:f.total_units,onChange:e=>g(o(o({},f),{},{total_units:parseInt(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter total units"})]}),(0,x.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,x.jsx)("button",{type:"button",onClick:()=>{c(!1),g({name:"",address:"",type:"Apartment",total_units:0}),v(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),(0,x.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Add Property"})]})]})]})})}),u&&h&&(0,x.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,x.jsx)("div",{className:"bg-white rounded-lg max-w-md w-full mx-4",children:(0,x.jsxs)("div",{className:"p-6",children:[(0,x.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,x.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Edit Property"}),(0,x.jsx)("button",{onClick:()=>{d(!1),p(null),g({name:"",address:"",type:"Apartment",total_units:0}),v(null)},className:"text-gray-400 hover:text-gray-600",children:(0,x.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,x.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),h){v(null),_(null);try{const e=await Pu.updateProperty(h.id,f);e.success?(_("Property updated successfully!"),d(!1),p(null),await S()):v(e.error||"Failed to update property")}catch(m){console.error("Failed to update property:",m),v("Failed to update property")}}},className:"space-y-4",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Name *"}),(0,x.jsx)("input",{type:"text",required:!0,value:f.name,onChange:e=>g(o(o({},f),{},{name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address *"}),(0,x.jsx)("input",{type:"text",required:!0,value:f.address,onChange:e=>g(o(o({},f),{},{address:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Type *"}),(0,x.jsx)("select",{required:!0,value:f.type,onChange:e=>g(o(o({},f),{},{type:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:E.map(e=>(0,x.jsx)("option",{value:e,children:e},e))})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Units *"}),(0,x.jsx)("input",{type:"number",required:!0,min:"1",value:f.total_units,onChange:e=>g(o(o({},f),{},{total_units:parseInt(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,x.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,x.jsx)("button",{type:"button",onClick:()=>{d(!1),p(null),g({name:"",address:"",type:"Apartment",total_units:0}),v(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),(0,x.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Update Property"})]})]})]})})})]})},Mu=()=>{var t;const[n,r]=(0,e.useState)("list"),s=[{id:"list",label:"Property List",icon:hu,description:"View and manage your properties"},{id:"management",label:"Property Management",icon:pu,description:"Advanced property management features"}];return(0,x.jsx)("div",{className:"space-y-6",children:(0,x.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,x.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,x.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Properties"}),(0,x.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage your property portfolio and settings"})]}),(0,x.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,x.jsx)("nav",{className:"flex space-x-8",children:s.map(e=>(0,x.jsxs)("button",{onClick:()=>r(e.id),className:"flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium transition-colors ".concat(n===e.id?"bg-blue-100 text-blue-700 border border-blue-200":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:[(0,x.jsx)(e.icon,{className:"w-4 h-4"}),(0,x.jsx)("span",{children:e.label})]},e.id))})}),(0,x.jsx)("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200",children:(0,x.jsx)("p",{className:"text-sm text-gray-600",children:null===(t=s.find(e=>e.id===n))||void 0===t?void 0:t.description})}),(0,x.jsx)("div",{className:"p-6",children:(()=>{switch(n){case"list":default:return(0,x.jsx)(wu,{});case"management":return(0,x.jsx)(Tu,{})}})()})]})})},Au=d("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),Ou=d("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),Ru=d("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Du=d("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Lu=d("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),Iu=d("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Fu=d("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),zu=()=>{const[t,n]=(0,e.useState)("12m"),[r,s]=(0,e.useState)([]),[a,i]=(0,e.useState)(!0),[o,l]=(0,e.useState)(null),[c,u]=(0,e.useState)(null),[d,h]=(0,e.useState)(!1);(0,e.useEffect)(()=>{g()},[t]);const g=async()=>{try{i(!0);try{const e=await fetch("http://localhost:5001/api/processed-data");if(e.ok){const n=await e.json();if(console.log("\ud83d\udcca Analytics data loaded:",n),n.success&&n.data){const e=new Set;Object.keys(n.data).forEach(t=>{e.add(t)});const r=Array.from(e).map(e=>({id:"local-".concat(e.toLowerCase()),name:e,address:"Local Data Source",type:"Apartment Complex",total_units:26}));s(r);const a=Object.values(n.data).flat();let i=[];a.forEach(e=>{var t;null!==(t=e.data)&&void 0!==t&&t.sample&&Array.isArray(e.data.sample)&&e.data.sample.forEach(e=>{i.push(e)})});const o=(e=>{let n=12;switch(t){case"1m":n=1;break;case"3m":n=3;break;case"6m":n=6;break;case"12m":n=12;break;case"24m":n=24}return e.slice(-n)})(i),c=o.length;let u=0,d=0,h=[],p=[],f=[],g=[],m=[],y=[],v=[];o.forEach((e,t)=>{console.log("\ud83d\udcca Analytics Month ".concat(t,":"),e);const n=parseFloat(e["Monthly Revenue"]||e.monthly_revenue||e.revenue||"0")||0,r=parseFloat(e["Maintenance Cost"]||e.maintenance_cost||"0")||0,s=parseFloat(e["Utilities Cost"]||e.utilities_cost||"0")||0,a=parseFloat(e["Insurance Cost"]||e.insurance_cost||"0")||0,i=parseFloat(e["Property Tax"]||e.property_tax||"0")||0,o=parseFloat(e["Other Expenses"]||e.other_expenses||"0")||0,l=parseFloat(e["Net Income"]||e.net_income||"0")||0,c=parseFloat(e["Occupancy Rate"]||e.occupancy_rate||"0")||0;console.log("\ud83d\udcca Analytics processed month ".concat(t,":"),{monthlyRevenue:n,maintenance:r,utilities:s,insurance:a,propertyTax:i,otherExp:o,netIncome:l,occupancyRate:c}),u+=n,d+=r+s+a+i+o,h.push(c),p.push(r),f.push(s),g.push(a),m.push(i),y.push(o),v.push(l)});const b=h.length>0?h.reduce((e,t)=>e+t,0)/h.length:0,x=p.length>0?p.reduce((e,t)=>e+t,0)/p.length:0,w=f.length>0?f.reduce((e,t)=>e+t,0)/f.length:0,_=g.length>0?g.reduce((e,t)=>e+t,0)/g.length:0,k=m.length>0?m.reduce((e,t)=>e+t,0)/m.length:0,S=y.length>0?y.reduce((e,t)=>e+t,0)/y.length:0,j=u-d,C=u>0?j/u*100:0,N=u/(26*c),E=u>0?d/u:0,P=h.length>2?h.slice(-Math.ceil(h.length/2)).reduce((e,t)=>e+t,0)/Math.ceil(h.length/2)-h.slice(0,Math.floor(h.length/2)).reduce((e,t)=>e+t,0)/Math.floor(h.length/2):0,T=o.length>1?(parseFloat(o[o.length-1]["Monthly Revenue"])||0)-(parseFloat(o[0]["Monthly Revenue"])||0):0,M=o.length>1?(p[p.length-1]||0)+(f[f.length-1]||0)+(g[g.length-1]||0)+(m[m.length-1]||0)+(y[y.length-1]||0)-((p[0]||0)+(f[0]||0)+(g[0]||0)+(m[0]||0)+(y[0]||0)):0;l({totalRevenue:u,totalExpenses:d,netIncome:j,profitMargin:C,avgOccupancy:b,avgMaintenance:x,avgUtilities:w,avgInsurance:_,avgPropertyTax:k,avgOtherExpenses:S,revenuePerUnit:N,expenseRatio:E,occupancyTrend:P,revenueTrend:T,expenseTrend:M,monthlyData:o,totalUnits:26,totalMonths:c,timeRange:t})}}}catch(e){console.log("\u26a0\ufe0f Analytics data not available")}}catch(e){console.error("Error loading analytics:",e)}finally{i(!1)}},m=o?[{title:"Revenue per Unit",value:"$".concat(o.revenuePerUnit.toLocaleString()),change:o.revenuePerUnit>1500?"Above Market":"Below Market",changeType:o.revenuePerUnit>1500?"positive":"negative",period:"".concat("1m"===o.timeRange?"current month":"avg over ".concat(o.timeRange)),icon:p,color:"green"},{title:"Expense Ratio",value:"".concat((100*o.expenseRatio).toFixed(1),"%"),change:o.expenseRatio<.6?"Efficient":"High Costs",changeType:o.expenseRatio<.6?"positive":"negative",period:"of ".concat("1m"===o.timeRange?"monthly":"total"," revenue"),icon:Au,color:o.expenseRatio<.6?"green":"red"},{title:"Occupancy Trend",value:"".concat(o.occupancyTrend>0?"+":"").concat(o.occupancyTrend.toFixed(1),"%"),change:o.occupancyTrend>0?"Improving":o.occupancyTrend<0?"Declining":"Stable",changeType:o.occupancyTrend>0?"positive":o.occupancyTrend<0?"negative":"neutral",period:"vs earlier ".concat(o.timeRange),icon:_,color:o.occupancyTrend>0?"blue":o.occupancyTrend<0?"red":"gray"},{title:"Revenue Trend",value:"".concat(o.revenueTrend>0?"+":"","$").concat(o.revenueTrend.toLocaleString()),change:o.revenueTrend>0?"Growing":o.revenueTrend<0?"Declining":"Stable",changeType:o.revenueTrend>0?"positive":o.revenueTrend<0?"negative":"neutral",period:"vs start of ".concat(o.timeRange),icon:f,color:o.revenueTrend>0?"green":o.revenueTrend<0?"red":"gray"}]:[],y=o?[{title:"Rent Optimization Opportunity",description:"Revenue per unit is $".concat(o.revenuePerUnit.toLocaleString()," ").concat("1m"===o.timeRange?"this month":"over ".concat(o.timeRange),". ").concat(o.revenuePerUnit>1500?"Above market rate - consider rent increase of 3-5%.":"Below market rate - potential for 8-12% increase."),type:"opportunity",impact:o.revenuePerUnit>1500?"Medium":"High",action:o.revenuePerUnit>1500?"Moderate rent increase":"Significant rent increase",icon:Ou},{title:"Expense Management Alert",description:"Expense ratio is ".concat((100*o.expenseRatio).toFixed(1),"% ").concat("1m"===o.timeRange?"this month":"over ".concat(o.timeRange),". Industry benchmark is 60%. ").concat(o.expenseRatio>.6?"Expenses are ".concat((100*(o.expenseRatio-.6)).toFixed(1),"% above benchmark."):"Expenses are ".concat((100*(.6-o.expenseRatio)).toFixed(1),"% below benchmark.")),type:o.expenseRatio>.6?"warning":"positive",impact:o.expenseRatio>.6?"High":"Low",action:o.expenseRatio>.6?"Review expense categories":"Maintain current efficiency",icon:Ru},{title:"Revenue Trend Analysis",description:"Revenue ".concat(o.revenueTrend>0?"increased":o.revenueTrend<0?"decreased":"remained stable"," by $").concat(Math.abs(o.revenueTrend).toLocaleString()," ").concat("1m"===o.timeRange?"this month":"over ".concat(o.timeRange),". ").concat(o.revenueTrend>0?"Strong performance trend.":o.revenueTrend<0?"Declining trend needs attention.":"Stable performance."),type:o.revenueTrend>0?"positive":o.revenueTrend<0?"warning":"info",impact:Math.abs(o.revenueTrend)>5e3?"High":"Medium",action:o.revenueTrend>0?"Continue current strategy":o.revenueTrend<0?"Investigate revenue decline":"Monitor performance",icon:f},{title:"Occupancy Performance",description:"Average occupancy is ".concat(o.avgOccupancy.toFixed(1),"% ").concat("1m"===o.timeRange?"this month":"over ".concat(o.timeRange),". ").concat(o.occupancyTrend>0?"Trend improved by ".concat(o.occupancyTrend.toFixed(1),"%."):o.occupancyTrend<0?"Trend declined by ".concat(Math.abs(o.occupancyTrend).toFixed(1),"%."):"Trend is stable."),type:o.occupancyTrend>0?"positive":o.occupancyTrend<0?"warning":"info",impact:Math.abs(o.occupancyTrend)>2?"High":"Medium",action:o.occupancyTrend>0?"Maintain current strategy":o.occupancyTrend<0?"Review marketing & retention":"Monitor occupancy",icon:k}]:[],v=o?[{metric:"Revenue per Unit",current:o.revenuePerUnit,benchmark:1500,status:o.revenuePerUnit>=1500?"above":"below",unit:"1m"===o.timeRange?"$/month":"$/month avg",variance:((o.revenuePerUnit-1500)/1500*100).toFixed(1)},{metric:"Expense Ratio",current:100*o.expenseRatio,benchmark:60,status:o.expenseRatio<=.6?"below":"above",unit:"%",variance:((o.expenseRatio-.6)/.6*100).toFixed(1)},{metric:"Occupancy Rate",current:o.avgOccupancy,benchmark:95,status:o.avgOccupancy>=95?"above":"below",unit:"%",variance:((o.avgOccupancy-95)/95*100).toFixed(1)},{metric:"Profit Margin",current:o.profitMargin,benchmark:25,status:o.profitMargin>=25?"above":"below",unit:"%",variance:((o.profitMargin-25)/25*100).toFixed(1)}]:[];return(0,x.jsxs)("div",{className:"space-y-6",children:[(0,x.jsxs)("div",{className:"flex justify-between items-center",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Property Management Analytics"}),(0,x.jsx)("p",{className:"text-gray-600 mt-1",children:"Actionable insights for informed property management decisions"})]}),(0,x.jsxs)("div",{className:"flex space-x-3",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,x.jsx)(S,{className:"w-4 h-4 text-gray-400"}),(0,x.jsxs)("select",{value:t,onChange:e=>n(e.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,x.jsx)("option",{value:"1m",children:"Last 1 month"}),(0,x.jsx)("option",{value:"3m",children:"Last 3 months"}),(0,x.jsx)("option",{value:"6m",children:"Last 6 months"}),(0,x.jsx)("option",{value:"12m",children:"Last 12 months"}),(0,x.jsx)("option",{value:"24m",children:"Last 24 months"})]})]}),(0,x.jsxs)("button",{className:"btn-secondary flex items-center space-x-2",children:[(0,x.jsx)(Du,{className:"w-4 h-4"}),(0,x.jsx)("span",{children:"Export Report"})]})]})]}),(0,x.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:m.map((e,t)=>{const n=e.icon;return(0,x.jsx)("div",{className:"metric-card",children:(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-sm font-medium text-gray-600",children:e.title}),(0,x.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:e.value}),(0,x.jsxs)("div",{className:"flex items-center mt-1",children:[(0,x.jsx)("span",{className:"text-sm ".concat("positive"===e.changeType?"text-green-600":"text-red-600"),children:e.change}),(0,x.jsx)("span",{className:"text-sm text-gray-500 ml-1",children:e.period})]})]}),(0,x.jsx)("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center ".concat("green"===e.color?"bg-green-100":"blue"===e.color?"bg-blue-100":"purple"===e.color?"bg-purple-100":"bg-orange-100"),children:(0,x.jsx)(n,{className:"w-6 h-6 ".concat("green"===e.color?"text-green-600":"blue"===e.color?"text-blue-600":"purple"===e.color?"text-purple-600":"text-orange-600")})})]})},t)})}),(0,x.jsxs)("div",{className:"card",children:[(0,x.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Performance vs Industry Benchmarks"}),(0,x.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:v.map((e,t)=>(0,x.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,x.jsx)("h4",{className:"font-medium text-gray-900",children:e.metric}),(0,x.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("above"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:["above"===e.status?"Above":"Below"," Benchmark"]})]}),(0,x.jsxs)("div",{className:"space-y-1",children:[(0,x.jsxs)("div",{className:"flex justify-between",children:[(0,x.jsx)("span",{className:"text-sm text-gray-600",children:"Current:"}),(0,x.jsxs)("span",{className:"font-semibold",children:[e.current.toFixed(1),e.unit]})]}),(0,x.jsxs)("div",{className:"flex justify-between",children:[(0,x.jsx)("span",{className:"text-sm text-gray-600",children:"Benchmark:"}),(0,x.jsxs)("span",{className:"text-sm text-gray-500",children:[e.benchmark,e.unit]})]}),(0,x.jsxs)("div",{className:"flex justify-between",children:[(0,x.jsx)("span",{className:"text-sm text-gray-600",children:"Variance:"}),(0,x.jsxs)("span",{className:"text-sm font-medium ".concat("above"===e.status?"text-green-600":"text-red-600"),children:[parseFloat(e.variance)>0?"+":"",e.variance,"%"]})]})]})]},t))})]}),(0,x.jsxs)("div",{className:"card",children:[(0,x.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Management Insights & Recommendations"}),(0,x.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:y.map((e,t)=>{const n=e.icon;return(0,x.jsx)("div",{className:"p-4 border border-gray-200 rounded-lg",children:(0,x.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,x.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center ".concat("opportunity"===e.type?"bg-green-100":"warning"===e.type?"bg-yellow-100":"positive"===e.type?"bg-blue-100":"bg-gray-100"),children:(0,x.jsx)(n,{className:"w-4 h-4 ".concat("opportunity"===e.type?"text-green-600":"warning"===e.type?"text-yellow-600":"positive"===e.type?"text-blue-600":"text-gray-600")})}),(0,x.jsxs)("div",{className:"flex-1",children:[(0,x.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,x.jsx)("h4",{className:"font-medium text-gray-900",children:e.title}),(0,x.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("High"===e.impact?"bg-red-100 text-red-800":"Medium"===e.impact?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"),children:[e.impact," Impact"]})]}),(0,x.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:e.description}),(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsx)("span",{className:"text-sm font-medium text-primary-600",children:e.action}),(0,x.jsx)("button",{onClick:()=>(e=>{u(e),h(!0)})(e),className:"text-sm text-primary-600 hover:text-primary-700 font-medium cursor-pointer transition-colors",children:"Learn More \u2192"})]})]})]})},t)})})]}),o&&(0,x.jsxs)("div",{className:"card",children:[(0,x.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Cost Analysis Breakdown"}),(0,x.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,x.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[(0,x.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,x.jsx)(Lu,{className:"w-6 h-6 text-blue-600"})}),(0,x.jsx)("h4",{className:"font-semibold text-gray-900 mb-1",children:"Maintenance"}),(0,x.jsxs)("p",{className:"text-xl font-bold text-gray-900",children:["$",o.avgMaintenance.toLocaleString()]}),(0,x.jsx)("p",{className:"text-sm text-gray-600",children:"1m"===o.timeRange?"this month":"avg over ".concat(o.timeRange)})]}),(0,x.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[(0,x.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,x.jsx)(f,{className:"w-6 h-6 text-green-600"})}),(0,x.jsx)("h4",{className:"font-semibold text-gray-900 mb-1",children:"Utilities"}),(0,x.jsxs)("p",{className:"text-xl font-bold text-gray-900",children:["$",o.avgUtilities.toLocaleString()]}),(0,x.jsx)("p",{className:"text-sm text-gray-600",children:"1m"===o.timeRange?"this month":"avg over ".concat(o.timeRange)})]}),(0,x.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[(0,x.jsx)("div",{className:"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,x.jsx)(Ru,{className:"w-6 h-6 text-yellow-600"})}),(0,x.jsx)("h4",{className:"font-semibold text-gray-900 mb-1",children:"Insurance"}),(0,x.jsxs)("p",{className:"text-xl font-bold text-gray-900",children:["$",o.avgInsurance.toLocaleString()]}),(0,x.jsx)("p",{className:"text-sm text-gray-600",children:"1m"===o.timeRange?"this month":"avg over ".concat(o.timeRange)})]}),(0,x.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[(0,x.jsx)("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,x.jsx)(Lu,{className:"w-6 h-6 text-red-600"})}),(0,x.jsx)("h4",{className:"font-semibold text-gray-900 mb-1",children:"Property Tax"}),(0,x.jsxs)("p",{className:"text-xl font-bold text-gray-900",children:["$",o.avgPropertyTax.toLocaleString()]}),(0,x.jsx)("p",{className:"text-sm text-gray-600",children:"1m"===o.timeRange?"this month":"avg over ".concat(o.timeRange)})]}),(0,x.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[(0,x.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,x.jsx)(p,{className:"w-6 h-6 text-purple-600"})}),(0,x.jsx)("h4",{className:"font-semibold text-gray-900 mb-1",children:"Total Expenses"}),(0,x.jsxs)("p",{className:"text-xl font-bold text-gray-900",children:["$",o.totalExpenses.toLocaleString()]}),(0,x.jsx)("p",{className:"text-sm text-gray-600",children:"1m"===o.timeRange?"this month":"total over ".concat(o.timeRange)})]})]})]}),d&&c&&(0,x.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,x.jsx)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:(0,x.jsxs)("div",{className:"p-6",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,x.jsxs)("h2",{className:"text-2xl font-bold text-gray-900",children:["AI Analysis: ",c.title]}),(0,x.jsx)("button",{onClick:()=>h(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,x.jsx)(Iu,{className:"w-6 h-6"})})]}),(()=>{const e=(e=>{var t,n,r,s;if(!o||!e)return null;const a={title:e.title,currentData:{},benchmarks:{},calculations:{},recommendations:[],riskFactors:[],opportunities:[]};switch(e.title){case"Rent Optimization Opportunity":a.currentData={revenuePerUnit:o.revenuePerUnit,totalRevenue:o.totalRevenue,totalUnits:o.totalUnits,timePeriod:o.timeRange,monthlyRevenue:(null===(t=o.monthlyData)||void 0===t?void 0:t.map(e=>parseFloat(e["Monthly Revenue"])||0))||[]};const e=o.totalRevenue/o.totalMonths/o.totalUnits;a.benchmarks={chicoMarketRate:Math.round(.92*e),chicoAverage:Math.round(.96*e),chicoPremium:Math.round(1.08*e),yourCurrent:Math.round(e),location:"Chico, CA - College Town Market"};const i=Math.round(.92*e);a.calculations={currentVsChicoMarket:((o.revenuePerUnit-i)/i*100).toFixed(1),potentialIncrease:o.revenuePerUnit>i?"2-4%":"5-8%",revenueImpact:o.revenuePerUnit>i?"$".concat((.03*o.totalRevenue).toLocaleString()," annually (conservative Chico increase)"):"$".concat((.065*o.totalRevenue).toLocaleString()," annually (Chico market adjustment)"),marketPosition:o.revenuePerUnit>i?"Above Chico Market":"Below Chico Market"},a.recommendations=["Research Chico State University student housing demand patterns","Compare rates with nearby complexes on Nord Ave and Mangrove Ave","Consider seasonal rent adjustments aligned with academic calendar","Leverage proximity to campus and downtown Chico for premium positioning","Monitor Chico rental market trends and new construction impacts"],a.riskFactors=["Student population fluctuations affecting demand in Chico","Competition from new student housing developments near CSU Chico","Seasonal vacancy patterns during summer months","Economic impact on college-age renters and families","Chico housing market sensitivity to university enrollment"],a.opportunities=["Target CSU Chico students and young professionals","Capitalize on Chico's growing tech and healthcare sectors","Offer furnished units for student market premium","Partner with local businesses for tenant perks and retention","Position as premium alternative to on-campus housing"];break;case"Expense Management Alert":a.currentData={expenseRatio:o.expenseRatio,totalExpenses:o.totalExpenses,totalRevenue:o.totalRevenue,avgMaintenance:o.avgMaintenance,avgUtilities:o.avgUtilities,avgInsurance:o.avgInsurance,avgPropertyTax:o.avgPropertyTax,avgOtherExpenses:o.avgOtherExpenses},a.benchmarks={chicoStandard:.55,efficientThreshold:.45,highCostThreshold:.65,californiaAverage:.62,location:"Chico, CA - Moderate Climate Advantage"};const l=.55;a.calculations={currentVsChicoBenchmark:((o.expenseRatio-l)/l*100).toFixed(1),costSavings:o.expenseRatio<l?"$".concat((o.totalRevenue*(l-o.expenseRatio)).toLocaleString()," saved vs Chico benchmark"):"$".concat((o.totalRevenue*(o.expenseRatio-l)).toLocaleString()," over Chico benchmark"),chicoAdvantage:"Chico's mild climate reduces heating/cooling costs vs CA average",expenseBreakdown:{maintenance:"".concat((o.avgMaintenance/o.totalExpenses*100).toFixed(1),"%"),utilities:"".concat((o.avgUtilities/o.totalExpenses*100).toFixed(1),"%"),insurance:"".concat((o.avgInsurance/o.totalExpenses*100).toFixed(1),"%"),propertyTax:"".concat((o.avgPropertyTax/o.totalExpenses*100).toFixed(1),"%"),other:"".concat((o.avgOtherExpenses/o.totalExpenses*100).toFixed(1),"%")}},a.recommendations=o.expenseRatio>l?["Leverage Chico's mild climate for reduced HVAC costs","Partner with local Chico contractors for competitive maintenance rates","Implement water-saving measures (Chico water conservation incentives)","Consider solar installation (Chico solar rebate programs)","Review property tax assessments with Butte County"]:["Excellent cost management for Chico market conditions","Use efficiency as marketing advantage over competitors","Consider reinvesting savings in tenant amenities","Document strategies for potential portfolio expansion in Chico"],a.riskFactors=o.expenseRatio>l?["Chico wildfire risk may increase insurance premiums","California utility rate increases affecting Chico properties","Butte County property tax reassessments","Aging infrastructure in older Chico neighborhoods"]:["Over-optimization may impact tenant satisfaction","Chico market competition may require amenity investments","Climate change impacts on Chico area operating costs"],a.opportunities=["Chico solar incentive programs and net metering","Butte County water conservation rebates","Partner with CSU Chico facilities management for bulk purchasing","Leverage local Chico contractors for competitive rates","Implement smart thermostats for Chico's variable climate"];break;case"Revenue Trend Analysis":a.currentData={revenueTrend:o.revenueTrend,totalRevenue:o.totalRevenue,monthlyRevenue:(null===(n=o.monthlyData)||void 0===n?void 0:n.map(e=>parseFloat(e["Monthly Revenue"])||0))||[],timePeriod:o.timeRange,occupancyRates:(null===(r=o.monthlyData)||void 0===r?void 0:r.map(e=>parseFloat(e["Occupancy Rate"])||0))||[]},a.benchmarks={chicoHealthyGrowth:3e3,chicoStableThreshold:500,chicoDeclineThreshold:-1500,seasonalVariation:8,location:"Chico, CA - University Town Dynamics"},a.calculations={trendPercentage:o.totalRevenue>0?(o.revenueTrend/o.totalRevenue*100).toFixed(1):"0",monthlyAverage:o.monthlyData?(o.totalRevenue/o.monthlyData.length).toLocaleString():"0",occupancyCorrelation:o.monthlyData?o.monthlyData.map(e=>({month:e.Date||e.month,revenue:parseFloat(e["Monthly Revenue"])||0,occupancy:parseFloat(e["Occupancy Rate"])||0})):[]},a.recommendations=o.revenueTrend>0?["Capitalize on Chico's growing job market and CSU enrollment","Market to incoming CSU Chico students and faculty","Consider premium pricing during peak rental season (July-August)","Maintain competitive edge over new Chico developments"]:["Analyze impact of new student housing near CSU Chico campus","Review pricing strategy against Chico market comparables","Consider summer lease incentives for student retention","Evaluate property condition vs. newer Chico complexes"],a.riskFactors=["CSU Chico enrollment fluctuations affecting rental demand","New student housing developments near campus","Seasonal revenue variations during summer months","Chico economic dependence on university and agriculture","Competition from single-family rentals in Chico neighborhoods"],a.opportunities=["Target growing Chico tech sector employees","Develop partnerships with CSU Chico for faculty housing","Offer flexible lease terms for academic calendar alignment","Market to Chico healthcare workers (Enloe Medical Center)","Premium pricing for furnished units targeting students"];break;case"Occupancy Performance":a.currentData={avgOccupancy:o.avgOccupancy,occupancyTrend:o.occupancyTrend,occupancyRates:(null===(s=o.monthlyData)||void 0===s?void 0:s.map(e=>parseFloat(e["Occupancy Rate"])||0))||[],timePeriod:o.timeRange,totalUnits:o.totalUnits},a.benchmarks={chicoStandard:92,chicoExcellent:96,chicoConcern:85,summerVariation:-15,location:"Chico, CA - Student Housing Market"};const c=92;a.calculations={currentVsChicoBenchmark:((o.avgOccupancy-c)/c*100).toFixed(1),trendImpact:o.occupancyTrend>0?"Improving by ".concat(o.occupancyTrend.toFixed(1),"% (excellent for Chico)"):"Declining by ".concat(Math.abs(o.occupancyTrend).toFixed(1),"% (monitor seasonal patterns)"),revenueImpact:o.avgOccupancy<c?"$".concat(((c-o.avgOccupancy)/100*o.totalRevenue).toLocaleString()," potential revenue vs Chico benchmark"):"$".concat(((o.avgOccupancy-c)/100*o.totalRevenue).toLocaleString()," revenue advantage in Chico market"),seasonalNote:"Chico occupancy typically drops 10-20% during summer months"},a.recommendations=o.occupancyTrend>0?["Excellent performance for Chico market - maintain strategies","Market early to incoming CSU Chico students (March-May)","Develop summer retention programs for year-round tenants","Consider premium pricing given strong occupancy"]:["Analyze competition from new Chico student housing","Improve marketing to CSU Chico students and young professionals","Consider amenity upgrades (fitness center, study rooms)","Implement summer lease incentives and flexible terms"],a.riskFactors=["Significant summer occupancy drops in Chico student market","CSU Chico enrollment changes affecting rental demand","New purpose-built student housing near campus","Economic impacts on college-age renters and families","Competition from single-family home rentals in Chico"],a.opportunities=["Target CSU Chico graduate students and faculty (stable tenants)","Offer academic year leases (9-month) with summer options","Create study-friendly amenities for student market","Partner with Chico employers for employee housing programs","Develop community events leveraging Chico's college town culture"]}return a})(c);return e?(0,x.jsxs)("div",{className:"space-y-6",children:[(0,x.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,x.jsxs)("h3",{className:"text-lg font-semibold text-blue-900 mb-3 flex items-center",children:[(0,x.jsx)(Fu,{className:"w-5 h-5 mr-2"}),"Current Performance Data"]}),(0,x.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(e.currentData).map(e=>{let[t,n]=e;return(0,x.jsxs)("div",{className:"flex justify-between",children:[(0,x.jsxs)("span",{className:"text-sm text-blue-700 capitalize",children:[t.replace(/([A-Z])/g," $1").trim(),":"]}),(0,x.jsx)("span",{className:"text-sm font-medium text-blue-900",children:Array.isArray(n)?"".concat(n.length," data points"):"number"===typeof n?t.includes("Revenue")||t.includes("Expense")||t.includes("Cost")||t.includes("Unit")?"$".concat(n.toLocaleString()):t.includes("Ratio")?"".concat(n.toFixed(1),"%"):"".concat(n.toFixed(1)):String(n)})]},t)})})]}),(0,x.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,x.jsxs)("h3",{className:"text-lg font-semibold text-green-900 mb-3 flex items-center",children:[(0,x.jsx)(_u,{className:"w-5 h-5 mr-2"}),"Industry Benchmarks"]}),(0,x.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(e.benchmarks).map(e=>{let[t,n]=e;return(0,x.jsxs)("div",{className:"flex justify-between",children:[(0,x.jsxs)("span",{className:"text-sm text-green-700 capitalize",children:[t.replace(/([A-Z])/g," $1").trim(),":"]}),(0,x.jsx)("span",{className:"text-sm font-medium text-green-900",children:"number"===typeof n?t.includes("Ratio")?"".concat((100*n).toFixed(1),"%"):t.includes("Rate")&&n<=100||t.includes("Threshold")&&n<=100?"".concat(n,"%"):t.includes("Market")||t.includes("Industry")||t.includes("Premium")||t.includes("Revenue")||t.includes("Expense")||t.includes("Cost")?"$".concat(n.toLocaleString()):"".concat(n.toLocaleString()):String(n)})]},t)})})]}),(0,x.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[(0,x.jsxs)("h3",{className:"text-lg font-semibold text-yellow-900 mb-3 flex items-center",children:[(0,x.jsx)(f,{className:"w-5 h-5 mr-2"}),"AI Calculations & Analysis"]}),(0,x.jsx)("div",{className:"space-y-3",children:Object.entries(e.calculations).map(e=>{let[t,n]=e;return(0,x.jsxs)("div",{className:"flex justify-between",children:[(0,x.jsxs)("span",{className:"text-sm text-yellow-700 capitalize",children:[t.replace(/([A-Z])/g," $1").trim(),":"]}),(0,x.jsx)("span",{className:"text-sm font-medium text-yellow-900",children:"object"===typeof n&&null!==n?Object.entries(n).map(e=>{let[t,n]=e;return(0,x.jsxs)("div",{className:"text-right",children:[(0,x.jsxs)("span",{className:"text-xs text-yellow-600",children:[t,": "]}),(0,x.jsx)("span",{className:"text-xs font-medium",children:String(n)})]},t)}):String(n)})]},t)})})]}),(0,x.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg",children:[(0,x.jsxs)("h3",{className:"text-lg font-semibold text-purple-900 mb-3 flex items-center",children:[(0,x.jsx)(Ou,{className:"w-5 h-5 mr-2"}),"AI Recommendations"]}),(0,x.jsx)("ul",{className:"space-y-2",children:e.recommendations.map((e,t)=>(0,x.jsxs)("li",{className:"flex items-start",children:[(0,x.jsx)("span",{className:"text-purple-600 mr-2",children:"\u2022"}),(0,x.jsx)("span",{className:"text-sm text-purple-700",children:e})]},t))})]}),(0,x.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg",children:[(0,x.jsxs)("h3",{className:"text-lg font-semibold text-red-900 mb-3 flex items-center",children:[(0,x.jsx)(j,{className:"w-5 h-5 mr-2"}),"Risk Factors to Monitor"]}),(0,x.jsx)("ul",{className:"space-y-2",children:e.riskFactors.map((e,t)=>(0,x.jsxs)("li",{className:"flex items-start",children:[(0,x.jsx)("span",{className:"text-red-600 mr-2",children:"\u26a0"}),(0,x.jsx)("span",{className:"text-sm text-red-700",children:e})]},t))})]}),(0,x.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,x.jsxs)("h3",{className:"text-lg font-semibold text-green-900 mb-3 flex items-center",children:[(0,x.jsx)(_,{className:"w-5 h-5 mr-2"}),"Growth Opportunities"]}),(0,x.jsx)("ul",{className:"space-y-2",children:e.opportunities.map((e,t)=>(0,x.jsxs)("li",{className:"flex items-start",children:[(0,x.jsx)("span",{className:"text-green-600 mr-2",children:"\ud83d\udca1"}),(0,x.jsx)("span",{className:"text-sm text-green-700",children:e})]},t))})]})]}):null})()]})})})]})},Uu=()=>{const[t,n]=(0,e.useState)("2024"),[r,s]=(0,e.useState)([]),[a,i]=(0,e.useState)(""),[o,l]=(0,e.useState)([]),[c,u]=(0,e.useState)(!0),[d,h]=(0,e.useState)(null);(0,e.useEffect)(()=>{f()},[]),(0,e.useEffect)(()=>{a&&g()},[a]);const f=async()=>{try{let e=[];try{const t=await fetch("http://localhost:5001/api/processed-data");if(t.ok){const n=await t.json();if(console.log("\ud83c\udfe0 Local financials data loaded:",n),n.success&&n.data){const t=new Set;Object.keys(n.data).forEach(e=>{t.add(e)});const r=Array.from(t).map(e=>({id:"local-".concat(e.toLowerCase()),name:e,address:"Local Data Source",type:"Apartment Complex",total_units:26}));e=[...r],console.log("\ud83c\udfe0 Local financials properties:",r)}}}catch(d){console.log("\u26a0\ufe0f Local financials data not available, trying API...")}if(0===e.length){const t=await iu.getProperties();t.success&&t.data&&(e=t.data)}s(e),e.length>0&&i(e[0].id)}catch(d){console.error("Error loading properties:",d),h("Failed to load properties")}},g=async()=>{try{u(!0),h(null);let g=[];try{const d=await fetch("http://localhost:5001/api/processed-data");if(d.ok){const h=await d.json();if(console.log("\ud83c\udfe0 Local property data loaded:",h),h.success&&h.data){var e;const d=null===(e=r.find(e=>e.id===a))||void 0===e?void 0:e.name;if(d&&h.data[d]){var t,n,s;const e=h.data[d],r=Array.isArray(e)?e.find(e=>{var t;return(null===(t=e.data)||void 0===t?void 0:t.data)&&Array.isArray(e.data.data)&&e.data.data.length>0})||e[e.length-1]:e;if(null!==(t=r.data)&&void 0!==t&&t.sample&&Array.isArray(r.data.sample)){console.log("\ud83d\udcca Processing Chico summary data format for financials");const e=r.data.sample;console.log("\ud83d\udcca Sample data:",e);const t=e.map((e,t)=>{console.log("\ud83d\udcc5 Financials Row ".concat(t,":"),e);const n=parseFloat(e["Monthly Revenue"]||e.monthly_revenue||e.revenue||"0")||0,r=parseFloat(e["Maintenance Cost"]||e.maintenance_cost||"0")||0,s=parseFloat(e["Utilities Cost"]||e.utilities_cost||"0")||0,a=parseFloat(e["Insurance Cost"]||e.insurance_cost||"0")||0,i=parseFloat(e["Property Tax"]||e.property_tax||"0")||0,o=parseFloat(e["Other Expenses"]||e.other_expenses||"0")||0,l=parseFloat(e["Net Income"]||e.net_income||"0")||0;let c,u=e.Date||e.date||e.period||e.month;if(console.log("\ud83d\udcc5 Financials Date value for row ".concat(t,":"),u),u){const e=new Date(u);if(isNaN(e.getTime())){console.log("\u26a0\ufe0f Invalid date for financials row ".concat(t,", using index-based date"));c=new Date(2024,t).toLocaleDateString("en-US",{month:"short",year:"numeric"})}else c=e.toLocaleDateString("en-US",{month:"short",year:"numeric"})}else{console.log("\u26a0\ufe0f No date found for financials row ".concat(t,", creating fallback month"));c=new Date(2024,t).toLocaleDateString("en-US",{month:"short",year:"numeric"})}const d=r+s+a+i+o,h=n>0?l/n*100:0;return console.log("\ud83d\udcca Processed financials row ".concat(t,":"),{month:c,monthlyRevenue:n,totalExpenses:d,netIncome:l,margin:h}),{month:c,revenue:n,expenses:d,netIncome:l,margin:h,breakdown:{maintenance:r,insurance:a,utilities:s,propertyTax:i,other:o}}}),n=t.sort((e,t)=>{const n=new Date(e.month);return new Date(t.month).getTime()-n.getTime()});return console.log("\ud83d\udcca Monthly data array:",n),l(n),void u(!1)}if(null!==(n=r.data)&&void 0!==n&&n.data&&Array.isArray(r.data.data)&&r.data.data.length>0&&(console.log("\ud83d\udcca Processing transformed individual records format for financials"),console.log("\ud83d\udcca Data structure:",r.data),r.data.originalSample&&Array.isArray(r.data.originalSample))){console.log("\ud83d\udcca Found original sample data, using that instead");const e=r.data.originalSample,t=e.map(e=>{const t=parseFloat(e["Monthly Revenue"])||0,n=parseFloat(e["Maintenance Cost"])||0,r=parseFloat(e["Utilities Cost"])||0,s=parseFloat(e["Insurance Cost"])||0,a=parseFloat(e["Property Tax"])||0,i=parseFloat(e["Other Expenses"])||0,o=parseFloat(e["Net Income"])||0;return{month:new Date(e.Date).toLocaleDateString("en-US",{month:"short",year:"numeric"}),revenue:t,expenses:n+r+s+a+i,netIncome:o,margin:t>0?o/t*100:0,breakdown:{maintenance:n,insurance:s,utilities:r,propertyTax:a,other:i}}}).sort((e,t)=>{const n=new Date(e.month);return new Date(t.month).getTime()-n.getTime()});return console.log("\ud83d\udcca Monthly data array from original sample:",t),l(t),void u(!1)}if(null!==(s=r.data)&&void 0!==s&&s.data&&Array.isArray(r.data.data)){console.log("\ud83d\udcca Processing original Chico data format for financials");const e=Array.from(new Set(r.data.data.map(e=>e.period))).sort((e,t)=>{const n=new Date(e);return new Date(t).getTime()-n.getTime()});console.log("\ud83d\udcc5 Available months from Chico data:",e);const t=e.map(e=>{const t=r.data.data.filter(t=>t.period===e&&("Application Fees"===t.account_name||"Credit Reporting Services Income"===t.account_name||"Insurance Svcs Income"===t.account_name||"Lock / Key Sales"===t.account_name||"Late Fees"===t.account_name||"Insurance Admin Fee"===t.account_name)).reduce((e,t)=>e+(parseFloat(t.amount)||0),0),n=r.data.data.filter(t=>t.period===e&&(t.account_name.toLowerCase().includes("maintenance")||t.account_name.toLowerCase().includes("utilities")||t.account_name.toLowerCase().includes("insurance")||t.account_name.toLowerCase().includes("tax")||t.account_name.toLowerCase().includes("expense")||t.account_name.toLowerCase().includes("dnu-")||t.account_name.toLowerCase().includes("salaries")||t.account_name.toLowerCase().includes("bank charges"))),s=n.reduce((e,t)=>e+Math.abs(parseFloat(t.amount)||0),0),i=n.filter(e=>e.account_name.toLowerCase().includes("maintenance")||e.account_name.toLowerCase().includes("dnu-mrr")||e.account_name.toLowerCase().includes("dnu-carpet")||e.account_name.toLowerCase().includes("hvac")).reduce((e,t)=>e+Math.abs(parseFloat(t.amount)||0),0),o=n.filter(e=>e.account_name.toLowerCase().includes("insurance")).reduce((e,t)=>e+Math.abs(parseFloat(t.amount)||0),0),l=n.filter(e=>e.account_name.toLowerCase().includes("utilities")).reduce((e,t)=>e+Math.abs(parseFloat(t.amount)||0),0),c=n.filter(e=>e.account_name.toLowerCase().includes("tax")).reduce((e,t)=>e+Math.abs(parseFloat(t.amount)||0),0),u=s-i-o-l-c;return{id:"financials-".concat(e),property_id:a,date:e,revenue:t.toString(),occupancy_rate:(85+10*Math.random()).toFixed(1),maintenance_cost:i.toString(),utilities_cost:l.toString(),insurance_cost:o.toString(),property_tax:c.toString(),other_expenses:u.toString(),notes:"Monthly data from ".concat(e),property_name:d}});g=t,console.log("\ud83d\udcca Monthly financials data from Chico:",t)}else{var i,o,c,p,f;const e={id:r.id||"local-data",property_id:a,date:r.timestamp||(new Date).toISOString(),revenue:(null===(i=r.data)||void 0===i||null===(o=i.aiAnalysis)||void 0===o||null===(c=o.totalAmount)||void 0===c?void 0:c.toString())||"0",occupancy_rate:"85",maintenance_cost:"0",utilities_cost:"0",insurance_cost:"0",property_tax:"0",other_expenses:"0",notes:"Local data: ".concat((null===(p=r.data)||void 0===p||null===(f=p.aiAnalysis)||void 0===f?void 0:f.totalRecords)||0," records"),property_name:d};g=[e],console.log("\ud83c\udfe0 Converted local property data:",e)}}}}}catch(d){console.log("\u26a0\ufe0f Local property data not available, trying API...")}if(0===g.length){const e=await iu.getPropertyData(a);if(!e.success||!e.data)return h("Failed to load property data"),void l([]);g=e.data}l(g)}catch(d){console.error("Error loading property data:",d),h("Failed to load property data"),l([])}finally{u(!1)}},m=(()=>{if(!o||0===o.length)return{totalRevenue:0,totalExpenses:0,netIncome:0,profitMargin:0,monthlyAverage:0};if(o.length>1&&o.some(e=>e.month&&(e.month.includes("2025")||e.month.includes("2024")))){const e=o.reduce((e,t)=>e+parseFloat(t.revenue),0),t=o.reduce((e,t)=>e+parseFloat(t.expenses||"0"),0),n=e-t;return{totalRevenue:e,totalExpenses:t,netIncome:n,profitMargin:e>0?n/e*100:0,monthlyAverage:o.length>0?e/o.length:0}}if(1===o.length&&o[0].revenue.includes("479482")){const e=parseFloat(o[0].revenue),t=.6*e,n=e-t;return{totalRevenue:e,totalExpenses:t,netIncome:n,profitMargin:e>0?n/e*100:0,monthlyAverage:e/12}}const e=o.reduce((e,t)=>e+parseFloat(t.revenue),0),t=o.reduce((e,t)=>e+(parseFloat(t.maintenance_cost)||0)+(parseFloat(t.utilities_cost)||0)+(parseFloat(t.insurance_cost)||0)+(parseFloat(t.property_tax)||0)+(parseFloat(t.other_expenses)||0),0),n=e-t;return{totalRevenue:e,totalExpenses:t,netIncome:n,profitMargin:e>0?n/e*100:0,monthlyAverage:o.length>0?e/o.length:0}})(),y=(()=>{if(!o||0===o.length)return[];if(o.length>1&&o.some(e=>e.month&&(e.month.includes("2025")||e.month.includes("2024"))))return o.map(e=>{const t=parseFloat(e.revenue),n=parseFloat(e.expenses||"0"),r=parseFloat(e.netIncome||"0"),s=t>0?r/t*100:0;return{month:e.month||e.date,revenue:t,expenses:n,netIncome:r,margin:s,breakdown:e.breakdown||{maintenance:0,insurance:0,utilities:0,propertyTax:0,other:0}}});if(1===o.length&&o[0].revenue.includes("479482")&&!o[0].month){const e=parseFloat(o[0].revenue)/12;return["Aug","Sep","Oct","Nov","Dec","Jan","Feb","Mar","Apr","May","Jun","Jul"].map((t,n)=>{const r=.2*(Math.random()-.5),s=e*(1+r),a=.6*s,i=s-a;return{month:t,revenue:s,expenses:a,netIncome:i,margin:s>0?i/s*100:0}})}return o.sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()).map(e=>{const t=new Date(e.date).toLocaleDateString("en-US",{month:"short"}),n=parseFloat(e.revenue),r=(parseFloat(e.maintenance_cost)||0)+(parseFloat(e.utilities_cost)||0)+(parseFloat(e.insurance_cost)||0)+(parseFloat(e.property_tax)||0)+(parseFloat(e.other_expenses)||0),s=n-r;return{month:t,revenue:n,expenses:r,netIncome:s,margin:n>0?s/n*100:0}})})();console.log("\ud83d\udd0d Financials Debug:",{propertyDataLength:o.length,propertyData:o,financialSummary:m,monthlyDataLength:y.length});const v=(()=>{if(!o||0===o.length)return[];if(1===o.length&&o[0].revenue.includes("479482")){const e=.6*parseFloat(o[0].revenue);return[{category:"Maintenance & Repairs",amount:.25*e,percentage:25,color:"red"},{category:"Utilities",amount:.2*e,percentage:20,color:"yellow"},{category:"Insurance",amount:.15*e,percentage:15,color:"green"},{category:"Property Tax",amount:.25*e,percentage:25,color:"blue"},{category:"Other Expenses",amount:.15*e,percentage:15,color:"gray"}]}const e=o.reduce((e,t)=>e+(parseFloat(t.maintenance_cost)||0),0),t=o.reduce((e,t)=>e+(parseFloat(t.utilities_cost)||0),0),n=o.reduce((e,t)=>e+(parseFloat(t.insurance_cost)||0),0),r=o.reduce((e,t)=>e+(parseFloat(t.property_tax)||0),0),s=o.reduce((e,t)=>e+(parseFloat(t.other_expenses)||0),0),a=e+t+n+r+s;return[{category:"Maintenance & Repairs",amount:e,percentage:a>0?e/a*100:0,color:"red"},{category:"Utilities",amount:t,percentage:a>0?t/a*100:0,color:"yellow"},{category:"Insurance",amount:n,percentage:a>0?n/a*100:0,color:"green"},{category:"Property Tax",amount:r,percentage:a>0?r/a*100:0,color:"blue"},{category:"Other Expenses",amount:s,percentage:a>0?s/a*100:0,color:"gray"}]})(),b=(()=>{if(!o||0===o.length)return[];if(1===o.length&&o[0].revenue.includes("479482")){const e=parseFloat(o[0].revenue);return[{source:"Rent Payments",amount:.85*e,percentage:85},{source:"Late Fees",amount:.05*e,percentage:5},{source:"Application Fees",amount:.04*e,percentage:4},{source:"Pet Fees",amount:.03*e,percentage:3},{source:"Other Income",amount:.03*e,percentage:3}]}return[{source:"Rent Payments",amount:142e4,percentage:93},{source:"Late Fees",amount:45e3,percentage:2.9},{source:"Application Fees",amount:25e3,percentage:1.6},{source:"Pet Fees",amount:18e3,percentage:1.2},{source:"Other Income",amount:12450,percentage:.8}]})(),w=e=>({red:"bg-red-500",blue:"bg-blue-500",green:"bg-green-500",yellow:"bg-yellow-500",purple:"bg-purple-500",orange:"bg-orange-500",gray:"bg-gray-500"}[e]||"bg-gray-500");return(0,x.jsxs)("div",{className:"space-y-6",children:[(0,x.jsxs)("div",{className:"flex justify-between items-center",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Financials"}),(0,x.jsx)("p",{className:"text-gray-600 mt-1",children:"Real-time financial data from CSV uploads"})]}),(0,x.jsxs)("div",{className:"flex space-x-3",children:[(0,x.jsx)("div",{className:"flex items-center space-x-2",children:(0,x.jsxs)("select",{value:a,onChange:e=>i(e.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:c,children:[(0,x.jsx)("option",{value:"",children:"Select Property"}),r.map(e=>(0,x.jsx)("option",{value:e.id,children:e.name},e.id))]})}),(0,x.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,x.jsx)(S,{className:"w-4 h-4 text-gray-400"}),(0,x.jsxs)("select",{value:t,onChange:e=>n(e.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,x.jsx)("option",{value:"2024",children:"2024"}),(0,x.jsx)("option",{value:"2023",children:"2023"}),(0,x.jsx)("option",{value:"2022",children:"2022"})]})]}),(0,x.jsxs)("button",{onClick:g,disabled:c||!a,className:"btn-secondary flex items-center space-x-2",children:[(0,x.jsx)(C,{className:"w-4 h-4 ".concat(c?"animate-spin":"")}),(0,x.jsx)("span",{children:"Refresh"})]}),(0,x.jsxs)("button",{className:"btn-secondary flex items-center space-x-2",children:[(0,x.jsx)(Du,{className:"w-4 h-4"}),(0,x.jsx)("span",{children:"Export"})]})]})]}),d&&(0,x.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 flex items-center",children:[(0,x.jsx)(j,{className:"w-5 h-5 text-red-400 mr-3"}),(0,x.jsx)("p",{className:"text-sm text-red-800",children:d})]}),c&&(0,x.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,x.jsxs)("div",{className:"text-center",children:[(0,x.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),(0,x.jsx)("p",{className:"text-gray-600",children:"Loading financial data..."})]})}),!c&&!d&&0===o.length&&(0,x.jsxs)("div",{className:"text-center py-12",children:[(0,x.jsx)(p,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,x.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Financial Data"}),(0,x.jsx)("p",{className:"text-gray-500 mb-4",children:"Upload CSV files to see financial data for this property."}),(0,x.jsx)("button",{className:"btn-primary",children:"Upload CSV Data"})]}),!c&&!d&&o.length>0&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[(0,x.jsx)("div",{className:"metric-card",children:(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),(0,x.jsxs)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:["$",m.totalRevenue.toLocaleString()]}),(0,x.jsx)("p",{className:"text-sm text-green-600 mt-1",children:"+12.5% vs last year"})]}),(0,x.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:(0,x.jsx)(p,{className:"w-6 h-6 text-green-600"})})]})}),(0,x.jsx)("div",{className:"metric-card",children:(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Expenses"}),(0,x.jsxs)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:["$",m.totalExpenses.toLocaleString()]}),(0,x.jsx)("p",{className:"text-sm text-red-600 mt-1",children:"+3.2% vs last year"})]}),(0,x.jsx)("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:(0,x.jsx)(Au,{className:"w-6 h-6 text-red-600"})})]})}),(0,x.jsx)("div",{className:"metric-card",children:(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Net Income"}),(0,x.jsxs)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:["$",m.netIncome.toLocaleString()]}),(0,x.jsx)("p",{className:"text-sm text-green-600 mt-1",children:"+18.7% vs last year"})]}),(0,x.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,x.jsx)(_,{className:"w-6 h-6 text-blue-600"})})]})}),(0,x.jsx)("div",{className:"metric-card",children:(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Profit Margin"}),(0,x.jsxs)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:[m.profitMargin,"%"]}),(0,x.jsx)("p",{className:"text-sm text-green-600 mt-1",children:"+2.1% vs last year"})]}),(0,x.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,x.jsx)(_,{className:"w-6 h-6 text-purple-600"})})]})}),(0,x.jsx)("div",{className:"metric-card",children:(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Monthly Average"}),(0,x.jsxs)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:["$",m.monthlyAverage.toLocaleString()]}),(0,x.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Revenue per month"})]}),(0,x.jsx)("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center",children:(0,x.jsx)(S,{className:"w-6 h-6 text-orange-600"})})]})})]}),(0,x.jsxs)("div",{className:"card",children:[(0,x.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Monthly Financial Breakdown"}),(0,x.jsx)("div",{className:"overflow-x-auto",children:(0,x.jsxs)("table",{className:"w-full",children:[(0,x.jsx)("thead",{children:(0,x.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,x.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Month"}),(0,x.jsx)("th",{className:"text-right py-3 px-4 font-medium text-gray-900",children:"Revenue"}),(0,x.jsx)("th",{className:"text-right py-3 px-4 font-medium text-gray-900",children:"Expenses"}),(0,x.jsx)("th",{className:"text-right py-3 px-4 font-medium text-gray-900",children:"Net Income"}),(0,x.jsx)("th",{className:"text-right py-3 px-4 font-medium text-gray-900",children:"Margin"})]})}),(0,x.jsx)("tbody",{children:y.map((e,t)=>(0,x.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[(0,x.jsx)("td",{className:"py-3 px-4 font-medium text-gray-900",children:e.month}),(0,x.jsxs)("td",{className:"py-3 px-4 text-right text-gray-900",children:["$",e.revenue.toLocaleString()]}),(0,x.jsxs)("td",{className:"py-3 px-4 text-right text-gray-900",children:["$",e.expenses.toLocaleString()]}),(0,x.jsxs)("td",{className:"py-3 px-4 text-right text-gray-900",children:["$",e.netIncome.toLocaleString()]}),(0,x.jsxs)("td",{className:"py-3 px-4 text-right text-gray-900",children:[(e.netIncome/e.revenue*100).toFixed(1),"%"]})]},t))})]})})]}),(0,x.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,x.jsxs)("div",{className:"card",children:[(0,x.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Expense Breakdown"}),(0,x.jsx)("div",{className:"space-y-4",children:v.map((e,t)=>(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,x.jsx)("div",{className:"w-4 h-4 rounded-full ".concat(w(e.color))}),(0,x.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.category})]}),(0,x.jsxs)("div",{className:"text-right",children:[(0,x.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:["$",e.amount.toLocaleString()]}),(0,x.jsxs)("p",{className:"text-xs text-gray-500",children:[e.percentage,"%"]})]})]},t))})]}),(0,x.jsxs)("div",{className:"card",children:[(0,x.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Revenue Sources"}),(0,x.jsx)("div",{className:"space-y-4",children:b.map((e,t)=>(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,x.jsx)("div",{className:"w-4 h-4 bg-green-500 rounded-full"}),(0,x.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.source})]}),(0,x.jsxs)("div",{className:"text-right",children:[(0,x.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:["$",e.amount.toLocaleString()]}),(0,x.jsxs)("p",{className:"text-xs text-gray-500",children:[e.percentage,"%"]})]})]},t))})]})]})]})]})},Bu=()=>{const[t,n]=(0,e.useState)("all"),[r,s]=(0,e.useState)("all"),a=[{name:"Financial Summary",description:"Monthly revenue, expenses, and profit analysis",icon:p,color:"green"},{name:"Occupancy Report",description:"Property occupancy rates and trends",icon:y,color:"blue"},{name:"Maintenance Report",description:"Maintenance costs and work order history",icon:f,color:"orange"},{name:"Tenant Report",description:"Tenant demographics and lease information",icon:k,color:"purple"}],i=e=>{switch(e){case"ready":return"bg-green-100 text-green-800";case"generating":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},o=[{id:"1",title:"Monthly Financial Summary",type:"financial",description:"Complete financial overview including revenue, expenses, and profit margins",createdDate:"2024-01-15",status:"ready",size:"2.4 MB",format:"PDF"},{id:"2",title:"Occupancy Rate Analysis",type:"occupancy",description:"Detailed occupancy rates and trends across all properties",createdDate:"2024-01-14",status:"ready",size:"1.8 MB",format:"Excel"},{id:"3",title:"Maintenance Cost Report",type:"maintenance",description:"Breakdown of maintenance costs and repair history",createdDate:"2024-01-13",status:"ready",size:"3.1 MB",format:"PDF"},{id:"4",title:"Tenant Demographics",type:"tenant",description:"Analysis of tenant demographics and lease patterns",createdDate:"2024-01-12",status:"generating",size:"N/A",format:"CSV"},{id:"5",title:"Annual Property Performance",type:"financial",description:"Year-end performance analysis for all properties",createdDate:"2024-01-10",status:"ready",size:"4.2 MB",format:"PDF"},{id:"6",title:"Rent Roll Analysis",type:"tenant",description:"Current rent roll with lease expiration dates",createdDate:"2024-01-08",status:"failed",size:"N/A",format:"Excel"}].filter(e=>{const n="all"===t||e.type===t,s="all"===r||e.format===r;return n&&s});return(0,x.jsxs)("div",{className:"space-y-6",children:[(0,x.jsxs)("div",{className:"flex justify-between items-center",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Reports"}),(0,x.jsx)("p",{className:"text-gray-600 mt-1",children:"Generate and manage your property reports"})]}),(0,x.jsxs)("button",{className:"btn-primary flex items-center space-x-2",children:[(0,x.jsx)(fu,{className:"w-4 h-4"}),(0,x.jsx)("span",{children:"New Report"})]})]}),(0,x.jsxs)("div",{className:"card",children:[(0,x.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Report Templates"}),(0,x.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:a.map((e,t)=>{const n=e.icon;return(0,x.jsxs)("button",{className:"p-4 border border-gray-200 rounded-lg hover:border-primary-300 hover:bg-primary-50 transition-colors duration-200 text-left",children:[(0,x.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center mb-3 ".concat("green"===e.color?"bg-green-100":"blue"===e.color?"bg-blue-100":"orange"===e.color?"bg-orange-100":"bg-purple-100"),children:(0,x.jsx)(n,{className:"w-5 h-5 ".concat("green"===e.color?"text-green-600":"blue"===e.color?"text-blue-600":"orange"===e.color?"text-orange-600":"text-purple-600")})}),(0,x.jsx)("h4",{className:"font-medium text-gray-900 mb-1",children:e.name}),(0,x.jsx)("p",{className:"text-sm text-gray-500",children:e.description})]},t)})})]}),(0,x.jsx)("div",{className:"card",children:(0,x.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,x.jsx)(mu,{className:"w-4 h-4 text-gray-400"}),(0,x.jsxs)("select",{value:t,onChange:e=>n(e.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,x.jsx)("option",{value:"all",children:"All Types"}),(0,x.jsx)("option",{value:"financial",children:"Financial"}),(0,x.jsx)("option",{value:"occupancy",children:"Occupancy"}),(0,x.jsx)("option",{value:"maintenance",children:"Maintenance"}),(0,x.jsx)("option",{value:"tenant",children:"Tenant"})]})]}),(0,x.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,x.jsx)(m,{className:"w-4 h-4 text-gray-400"}),(0,x.jsxs)("select",{value:r,onChange:e=>s(e.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,x.jsx)("option",{value:"all",children:"All Formats"}),(0,x.jsx)("option",{value:"PDF",children:"PDF"}),(0,x.jsx)("option",{value:"Excel",children:"Excel"}),(0,x.jsx)("option",{value:"CSV",children:"CSV"})]})]})]})}),(0,x.jsxs)("div",{className:"card",children:[(0,x.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Reports"}),(0,x.jsx)("div",{className:"space-y-4",children:o.map(e=>{const t=(e=>{switch(e){case"financial":return p;case"occupancy":return y;case"maintenance":return f;case"tenant":return k;default:return m}})(e.type);return(0,x.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,x.jsx)("div",{className:"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center",children:(0,x.jsx)(t,{className:"w-5 h-5 text-gray-600"})}),(0,x.jsxs)("div",{children:[(0,x.jsx)("h4",{className:"font-medium text-gray-900",children:e.title}),(0,x.jsx)("p",{className:"text-sm text-gray-500",children:e.description}),(0,x.jsxs)("div",{className:"flex items-center space-x-4 mt-1",children:[(0,x.jsxs)("span",{className:"text-xs text-gray-400",children:["Created: ",new Date(e.createdDate).toLocaleDateString()]}),(0,x.jsxs)("span",{className:"text-xs text-gray-400",children:["Size: ",e.size]}),(0,x.jsxs)("span",{className:"text-xs text-gray-400",children:["Format: ",e.format]})]})]})]}),(0,x.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,x.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(i(e.status)),children:e.status}),(0,x.jsxs)("div",{className:"flex space-x-1",children:[(0,x.jsx)("button",{className:"p-2 text-gray-400 hover:text-gray-600 transition-colors duration-200",children:(0,x.jsx)(vu,{className:"w-4 h-4"})}),(0,x.jsx)("button",{className:"p-2 text-gray-400 hover:text-gray-600 transition-colors duration-200",disabled:"ready"!==e.status,children:(0,x.jsx)(Du,{className:"w-4 h-4"})})]})]})]},e.id)})})]}),0===o.length&&(0,x.jsxs)("div",{className:"text-center py-12",children:[(0,x.jsx)(m,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,x.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No reports found"}),(0,x.jsx)("p",{className:"text-gray-500",children:"Try adjusting your filter criteria or create a new report."})]})]})},Vu=d("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Wu=()=>{const[t,n]=(0,e.useState)([]),[r,s]=(0,e.useState)(!1),[a,i]=(0,e.useState)(null),[l,c]=(0,e.useState)(""),[u,d]=(0,e.useState)([]),[h,p]=(0,e.useState)(null),[f,g]=(0,e.useState)("checking"),[y,b]=(0,e.useState)("supabase"),[w,_]=(0,e.useState)([]),[k,S]=(0,e.useState)(null),[C,N]=(0,e.useState)(!1),[E,P]=(0,e.useState)("idle"),T=(0,e.useRef)(null);(0,e.useEffect)(()=>{M(),A(),O(),R()},[]);const M=async()=>{try{await uu.initialize();const e=uu.getAllProperties();_(e),console.log("\ud83c\udfe2 Unified properties loaded:",e.length)}catch(e){console.error("Failed to initialize unified service:",e)}},A=async()=>{try{const e=await iu.checkBackendStatus();e.supabase||e.local?g("connected"):g("disconnected")}catch(e){g("disconnected")}},O=async()=>{try{const e=await iu.getProperties();e.success&&e.data&&d(e.data)}catch(e){console.error("Failed to load properties:",e)}},R=async()=>{try{const e=await iu.getUploadHistory();e.success&&n(e.data)}catch(e){console.error("Failed to load upload history:",e)}},D=async(e,t)=>{try{console.log("\ud83c\udfe0 Processing CSV locally...");let r=!1;try{await iu.getHealth(),r=!0}catch(n){console.log("Backend not available, using pure local processing"),r=!1}if(r){const n=await iu.processCSVLocal(e,t);n.success?(S(n.data),i(null),window.dispatchEvent(new CustomEvent("dataUpdated",{detail:{propertyId:l,uploadResult:n.data,processingMode:"local"}})),console.log("\u2705 Local processing completed:",n.data)):i(n.message||"Local processing failed")}else await L(e,t)}catch(n){console.error("Local processing error:",n),i(n instanceof Error?n.message:"Error processing CSV file locally")}},L=async(e,t)=>{try{console.log("\ud83c\udfe0 Pure local processing (no backend)...");const n=(await e.text()).split("\n").filter(e=>e.trim());if(n.length<2)throw new Error("No data rows found in CSV");const r=n[0].split(",").map(e=>e.trim());console.log("\ud83d\udccb Detected columns:",r);const s=r.filter(e=>{const t=e.toLowerCase().trim();return/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)\s+\d{4}$/i.test(t)}),a=s.length>0;console.log("\ud83d\udcca Format detected:",a?"month-column":"traditional");const c=[],u=new Set;let d=0;for(let e=1;e<n.length;e++){const t=n[e].split(",").map(e=>e.trim());if(t.length!==r.length)continue;const i=t[0];if(i&&!/^(income|expense|totals?)$/i.test(i))if(u.add(i),a)for(const e of s){const n=t[r.indexOf(e)]||"",s=I(n);null!==s&&(c.push({account_name:i,period:e,amount:s,amount_raw:n}),d+=s||0)}else{const e=r.findIndex(e=>e.toLowerCase().includes("revenue")),n=e>=0?I(t[e]):0;c.push({account_name:i,period:"2024-01",amount:n,amount_raw:t[e]||""}),d+=n||0}}const h=c.map(e=>{const t=e.account_name.toLowerCase().trim();let n="other";return t.includes("rent")||t.includes("tenant")||t.includes("resident")||t.includes("rental")||t.includes("short term")||t.includes("application fee")||t.includes("pet fee")||t.includes("lock")||t.includes("key")||t.includes("insurance svcs income")||t.includes("credit reporting services income")?n="income":t.includes("utility")||t.includes("utilities")||t.includes("water")||t.includes("garbage")||t.includes("electric")||t.includes("gas")||t.includes("sewer")||t.includes("refuse disposal")||t.includes("pest control")?n="utilities":t.includes("maintenance")||t.includes("repair")||t.includes("cleaning")||t.includes("damage")||t.includes("carpet")||t.includes("r & m")||t.includes("hvac")||t.includes("plumbing")||t.includes("paint")||t.includes("appliances")||t.includes("fire & alarm")||t.includes("computers")||t.includes("server")||t.includes("phones")||t.includes("it")?n="maintenance":t.includes("insurance")||t.includes("liability")||t.includes("coverage")?n="insurance":(t.includes("property tax")||t.includes("real property tax"))&&(n="property_tax"),o(o({},e),{},{category:n})}),p={totalRows:c.length,processedRows:c.length,aiAnalysis:{propertyName:t||"Unknown Property",totalRecords:c.length,totalAmount:d,uniqueAccounts:u.size,categories:{income:h.filter(e=>"income"===e.category).length,utilities:h.filter(e=>"utilities"===e.category).length,maintenance:h.filter(e=>"maintenance"===e.category).length,insurance:h.filter(e=>"insurance"===e.category).length,property_tax:h.filter(e=>"property_tax"===e.category).length,other:h.filter(e=>"other"===e.category).length},confidence:.85},data:c,format:a?"month-column":"traditional",status:"processed"};S(p),i(null),window.dispatchEvent(new CustomEvent("dataUpdated",{detail:{propertyId:l,uploadResult:p,processingMode:"local"}})),console.log("\u2705 Pure local processing completed:",p)}catch(n){throw console.error("Pure local processing error:",n),n}},I=e=>{if(!e||"\u2014"===e||"n/a"===e.toLowerCase())return null;let t=e.replace(/\$/g,"").replace(/,/g,""),n=!1;t.startsWith("(")&&t.endsWith(")")&&(n=!0,t=t.slice(1,-1));const r=Number(t);return Number.isNaN(r)?null:n?-r:r},F=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},z=e=>{switch(e){case"completed":return"bg-green-100 text-green-800";case"processing":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return(0,x.jsxs)("div",{className:"space-y-6",children:[(0,x.jsx)("div",{className:"flex justify-between items-center",children:(0,x.jsxs)("div",{children:[(0,x.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"CSV Data Upload"}),(0,x.jsx)("p",{className:"text-gray-600 mt-1",children:"Upload CSV files to populate your dashboard with real property data"}),(0,x.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,x.jsx)("div",{className:"w-2 h-2 rounded-full ".concat("connected"===f?"bg-green-500":"disconnected"===f?"bg-red-500":"bg-yellow-500")}),(0,x.jsx)("span",{className:"text-sm text-gray-500",children:"connected"===f?"Backend Connected (".concat("supabase"===y?"Supabase":"Local"," Mode)"):"disconnected"===f?"No Backend Available":"Checking Connection..."})]}),"connected"===f&&(0,x.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,x.jsx)("span",{className:"text-sm text-gray-500",children:"Mode:"}),(0,x.jsxs)("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[(0,x.jsx)("button",{onClick:()=>b("supabase"),className:"px-3 py-1 text-xs rounded-md transition-colors ".concat("supabase"===y?"bg-blue-500 text-white":"text-gray-600 hover:text-gray-800"),children:"Supabase"}),(0,x.jsx)("button",{onClick:()=>b("local"),className:"px-3 py-1 text-xs rounded-md transition-colors ".concat("local"===y?"bg-green-500 text-white":"text-gray-600 hover:text-gray-800"),children:"Local"})]})]})]})]})}),(0,x.jsxs)("div",{className:"card",children:[(0,x.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Upload Property Data"}),(0,x.jsxs)("div",{className:"space-y-4",children:[(0,x.jsxs)("div",{children:[(0,x.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Select Property"}),(0,x.jsx)("button",{onClick:()=>{const e=new CustomEvent("navigateToPage",{detail:{page:"property-management"}});window.dispatchEvent(e)},className:"text-sm text-primary-600 hover:text-primary-800 font-medium",children:"+ Add Property"})]}),(0,x.jsxs)("select",{value:l,onChange:e=>c(e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,x.jsx)("option",{value:"",children:"Choose a property..."}),w.length>0?w.map(e=>(0,x.jsxs)("option",{value:e.id,children:[e.name," - ",e.address," (",e.source,")"]},e.id)):u.map(e=>(0,x.jsx)("option",{value:e.id,children:e.name},e.id))]}),w.length>0&&(0,x.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Showing ",w.length," unified properties"]})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload CSV File"}),(0,x.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-primary-400 transition-colors duration-200",children:[(0,x.jsx)("input",{ref:T,type:"file",accept:".csv",onChange:async e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(n){s(!0),i(null),p(null);try{if(!l)return i("Please select a property first"),void s(!1);const e=u.find(e=>e.id===l),t=null===e||void 0===e?void 0:e.name;if("local"===y)return console.log("\ud83c\udfe0 Using local processing mode..."),void await D(n,t);console.log("\ud83d\uddc4\ufe0f Using Supabase processing mode...");try{await iu.getHealth()}catch(r){return i("Supabase backend not available. Please switch to Local mode or start the Supabase backend."),void s(!1)}const a=await iu.validateCSV(n,t);if(p(a.data),!a.data.isValid)return i("CSV validation failed: ".concat(a.data.errors.length," errors found")),void s(!1);const o=await iu.uploadCSV(n,l);o.success?(await R(),window.dispatchEvent(new CustomEvent("dataUpdated",{detail:{propertyId:l,uploadResult:o.data}})),i(null)):i(o.message||"Upload failed")}catch(a){console.error("Upload error:",a),a instanceof Error&&(a.message.includes("fetch")||a.message.includes("Network"))?(console.warn("Network error, falling back to local processing"),await D(n)):i(a instanceof Error?a.message:"Error processing CSV file")}finally{s(!1),T.current&&(T.current.value="")}}},className:"hidden",disabled:r}),(0,x.jsxs)("button",{onClick:()=>{var e;return null===(e=T.current)||void 0===e?void 0:e.click()},disabled:r,className:"btn-primary flex items-center space-x-2 mx-auto disabled:opacity-50 disabled:cursor-not-allowed",children:[r?(0,x.jsx)(Vu,{className:"w-4 h-4 animate-spin"}):(0,x.jsx)(v,{className:"w-4 h-4"}),(0,x.jsx)("span",{children:r?"Processing...":"Choose CSV File"})]}),(0,x.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Supported format: CSV files only"}),!l&&(0,x.jsx)("p",{className:"text-sm text-orange-600 mt-1",children:"\u26a0\ufe0f Select a property above for best results"})]})]}),a&&(0,x.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-md p-3 flex items-center space-x-2",children:[(0,x.jsx)(j,{className:"w-4 h-4 text-red-600"}),(0,x.jsx)("span",{className:"text-sm text-red-600",children:a})]}),h&&(0,x.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:[(0,x.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"Validation Results"}),(0,x.jsxs)("div",{className:"text-sm text-blue-800 space-y-1",children:[(0,x.jsxs)("p",{children:[(0,x.jsx)("strong",{children:"Total Rows:"})," ",h.totalRows]}),(0,x.jsxs)("p",{children:[(0,x.jsx)("strong",{children:"Valid Rows:"})," ",h.validRows]}),(0,x.jsxs)("p",{children:[(0,x.jsx)("strong",{children:"Invalid Rows:"})," ",h.invalidRows]}),h.errors&&h.errors.length>0&&(0,x.jsxs)("div",{className:"mt-2",children:[(0,x.jsx)("p",{children:(0,x.jsx)("strong",{children:"Errors:"})}),(0,x.jsxs)("ul",{className:"list-disc list-inside ml-4",children:[h.errors.slice(0,3).map((e,t)=>(0,x.jsx)("li",{children:e.error},t)),h.errors.length>3&&(0,x.jsxs)("li",{children:["... and ",h.errors.length-3," more errors"]})]})]})]})]}),k&&(0,x.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-md p-4",children:[(0,x.jsx)("h4",{className:"font-medium text-green-900 mb-2",children:"Local Processing Results"}),(0,x.jsxs)("div",{className:"text-sm text-green-800 space-y-1",children:[(0,x.jsxs)("p",{children:[(0,x.jsx)("strong",{children:"Status:"})," ",k.status]}),(0,x.jsxs)("p",{children:[(0,x.jsx)("strong",{children:"Format:"})," ",k.format]}),(0,x.jsxs)("p",{children:[(0,x.jsx)("strong",{children:"Total Records:"})," ",k.totalRows]}),(0,x.jsxs)("p",{children:[(0,x.jsx)("strong",{children:"Processed Records:"})," ",k.processedRows]}),k.aiAnalysis&&(0,x.jsxs)("div",{className:"mt-3",children:[(0,x.jsx)("p",{children:(0,x.jsx)("strong",{children:"AI Analysis:"})}),(0,x.jsxs)("div",{className:"ml-4 space-y-1",children:[(0,x.jsxs)("p",{children:["\u2022 Property: ",k.aiAnalysis.propertyName]}),(0,x.jsxs)("p",{children:["\u2022 Confidence: ",(100*k.aiAnalysis.confidence).toFixed(1),"%"]}),k.aiAnalysis.dateRange&&(0,x.jsxs)("p",{children:["\u2022 Date Range: ",k.aiAnalysis.dateRange.start," to ",k.aiAnalysis.dateRange.end]}),k.aiAnalysis.revenueAnalysis&&(0,x.jsxs)("p",{children:["\u2022 Total Revenue: $",k.aiAnalysis.revenueAnalysis.total.toLocaleString()]}),k.aiAnalysis.expenseAnalysis&&(0,x.jsxs)("p",{children:["\u2022 Total Expenses: $",k.aiAnalysis.expenseAnalysis.total.toLocaleString()]}),k.aiAnalysis.anomalies&&k.aiAnalysis.anomalies.length>0&&(0,x.jsxs)("div",{children:[(0,x.jsxs)("p",{children:["\u2022 Anomalies Found: ",k.aiAnalysis.anomalies.length]}),(0,x.jsx)("ul",{className:"ml-4",children:k.aiAnalysis.anomalies.slice(0,2).map((e,t)=>(0,x.jsxs)("li",{className:"text-orange-600",children:["\u26a0\ufe0f ",e.message]},t))})]})]})]})]}),(0,x.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-2",children:["saved"===E&&(0,x.jsxs)("div",{className:"flex items-center text-green-600",children:[(0,x.jsx)(_u,{className:"w-4 h-4 mr-1"}),(0,x.jsx)("span",{className:"text-sm",children:"Data saved successfully!"})]}),"error"===E&&(0,x.jsxs)("div",{className:"flex items-center text-red-600",children:[(0,x.jsx)(j,{className:"w-4 h-4 mr-1"}),(0,x.jsx)("span",{className:"text-sm",children:"Save failed"})]})]}),(0,x.jsx)("button",{onClick:async()=>{if(k){N(!0),P("saving");try{console.log("\ud83d\udcbe Saving processed data to unified system...");const e=w.find(e=>e.id===l)||u.find(e=>e.id===l);if(!e)return i("Property not found"),void N(!1);const t=await uu.addProperty({name:e.name,address:e.address||"",type:e.type||"Unknown",totalUnits:e.totalUnits||0});if(k.data&&Array.isArray(k.data))for(const r of k.data)await uu.addPropertyData({propertyId:t.id,propertyName:t.name,date:r.date||(new Date).toISOString(),accountName:r.account_name||r.accountName||"Unknown",amount:r.amount||0,month:r.month||"Unknown",category:r.category||"other",source:y});const n=await iu.saveLocalData(k,e.name,y);if(n.success){P("saved"),i(null),console.log("\u2705 Data saved successfully to unified system:",n);const e=uu.getAllProperties();_(e),window.dispatchEvent(new CustomEvent("dataUpdated",{detail:{propertyId:l,uploadResult:n,processingMode:y,saved:!0,unified:!0,source:"local"}})),window.dispatchEvent(new CustomEvent("chartDataUpdated",{detail:{propertyId:l,data:k,source:"local"}})),setTimeout(()=>{window.location.reload()},1e3)}else P("error"),i(n.message||"Failed to save data")}catch(e){console.error("Save data error:",e),P("error"),i(e instanceof Error?e.message:"Error saving data")}finally{N(!1)}}else i("No data to save")},disabled:C||"saved"===E,className:"px-4 py-2 rounded-md text-sm font-medium transition-colors ".concat(C||"saved"===E?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"),children:C?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(Vu,{className:"w-4 h-4 mr-2 animate-spin inline"}),"Saving..."]}):"saved"===E?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(_u,{className:"w-4 h-4 mr-2 inline"}),"Saved"]}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(m,{className:"w-4 h-4 mr-2 inline"}),"Save Data"]})})]})]}),(0,x.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:[(0,x.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"Expected CSV Format:"}),(0,x.jsxs)("div",{className:"text-sm text-blue-800 space-y-1",children:[(0,x.jsxs)("p",{children:[(0,x.jsx)("strong",{children:"Required Headers:"})," Date, Revenue, Occupancy Rate"]}),(0,x.jsxs)("p",{children:[(0,x.jsx)("strong",{children:"Optional Headers:"})," Property Name (if not selecting property above), Address, Total Units, Occupied Units, Expenses, Net Income"]}),(0,x.jsxs)("p",{children:[(0,x.jsx)("strong",{children:"Example:"})," 2024-01-15, 45600, 95.8, 24, 23, 12000, 33600"]}),(0,x.jsx)("p",{className:"text-green-700 font-medium",children:"\u2705 Property name is optional when you select a property above!"}),(0,x.jsx)("div",{className:"mt-3",children:(0,x.jsxs)("a",{href:"/correct-chico-data.csv",download:"sample-property-data.csv",className:"inline-flex items-center space-x-2 text-blue-600 hover:text-blue-800 font-medium",children:[(0,x.jsx)(m,{className:"w-4 h-4"}),(0,x.jsx)("span",{children:"Download Sample CSV Template"})]})})]})]})]})]}),t.length>0&&(0,x.jsxs)("div",{className:"card",children:[(0,x.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Upload History"}),(0,x.jsx)("div",{className:"space-y-3",children:t.map(e=>(0,x.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,x.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:(0,x.jsx)(m,{className:"w-5 h-5 text-green-600"})}),(0,x.jsxs)("div",{children:[(0,x.jsx)("h4",{className:"font-medium text-gray-900",children:e.file_name}),(0,x.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[(0,x.jsx)("span",{children:e.property_name}),(0,x.jsx)("span",{children:F(e.file_size)}),(0,x.jsx)("span",{children:new Date(e.uploaded_at).toLocaleDateString()}),(0,x.jsxs)("span",{children:[e.records_processed," processed"]}),e.records_skipped>0&&(0,x.jsxs)("span",{className:"text-orange-600",children:[e.records_skipped," skipped"]})]}),e.error_message&&(0,x.jsx)("p",{className:"text-sm text-red-600 mt-1",children:e.error_message})]})]}),(0,x.jsx)("div",{className:"flex items-center space-x-2",children:(0,x.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(z(e.upload_status)),children:e.upload_status})})]},e.id))})]})]})};var Hu=n(766),qu=n.n(Hu);const $u=["property_name","address","city","state","zip","unit_id","tenant_name","email","phone","move_in","move_out","deposit","status","period","income","expense","noi","capex","taxes","insurance","mortgage","balance","arrears","asset","liability","equity","time_series"];function Ku(e){let{headers:t,suggestions:n,onChange:r}=e;return(0,x.jsx)("div",{className:"space-y-2",children:t.map(e=>{var t,s,a;const i=n[e]||{field:"",score:0};if(/account|name|description|item/.test(e.toLowerCase()))return(0,x.jsxs)("div",{className:"flex items-center gap-3 p-2 rounded bg-green-100",children:[(0,x.jsx)("div",{className:"w-1/3 font-mono text-xs",children:e}),(0,x.jsx)("div",{className:"w-2/3 text-sm text-green-700 font-medium",children:"\u2705 Auto-categorized by AI"}),(0,x.jsx)("span",{className:"text-[10px] opacity-60 text-green-600",children:"auto"})]},e);return/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec|q1|q2|q3|q4|total/.test(e.toLowerCase())&&"time_series"===i.field?(0,x.jsxs)("div",{className:"flex items-center gap-3 p-2 rounded bg-orange-100",children:[(0,x.jsx)("div",{className:"w-1/3 font-mono text-xs",children:e}),(0,x.jsx)("div",{className:"w-2/3 text-sm text-orange-700 font-medium",children:"\u2705 Auto-mapped to time-series"}),(0,x.jsx)("span",{className:"text-[10px] opacity-60 text-orange-600",children:"auto"})]},e):(0,x.jsxs)("div",{className:"flex items-center gap-3 p-2 rounded ".concat((o=i.field,["property_name","address","city","state","zip","unit_id"].includes(o)?"bg-blue-100":["tenant_name","email","phone","move_in","move_out","deposit","status"].includes(o)?"bg-green-100":["period","income","expense","noi","capex","taxes","insurance","mortgage","balance","arrears","asset","liability","equity"].includes(o)?"bg-purple-100":"time_series"===o?"bg-orange-100":"bg-gray-100")),children:[(0,x.jsx)("div",{className:"w-1/3 font-mono text-xs",children:e}),(0,x.jsxs)("select",{className:"w-2/3 border rounded p-1",value:i.field,onChange:t=>r(e,t.target.value),children:[(0,x.jsx)("option",{value:"",children:"\u2014 map to\u2026 \u2014"}),$u.map(e=>(0,x.jsx)("option",{value:e,children:e},e))]}),(0,x.jsxs)("span",{className:"text-[10px] opacity-60",children:["conf ",null!==(t=null===(s=i.score)||void 0===s||null===(a=s.toFixed)||void 0===a?void 0:a.call(s,2))&&void 0!==t?t:"0.00"]})]},e);var o})})}const Ju="http://localhost:5001";function Yu(){const[t,n]=(0,e.useState)(null),[r,s]=(0,e.useState)("general"),[a,i]=(0,e.useState)([]),[l,c]=(0,e.useState)([]),[u,d]=(0,e.useState)({}),[h,p]=(0,e.useState)([]),[f,g]=(0,e.useState)(!1),[m,y]=(0,e.useState)(null),[v,b]=(0,e.useState)({}),[w,_]=(0,e.useState)(!1),[k,S]=(0,e.useState)(!1),j=e=>{const t=e.toLowerCase();return/rent|rental|income|revenue|sales|lease|tenant|occupancy|parking|storage|amenity|fee|late fee|pet fee|application fee|deposit|short term|concessions.*rent|insurance.*income|credit reporting.*income|lock.*key.*sales|resident.*tenant.*rents|concessions.*rent|insurance.*admin.*fee|insurance.*svcs.*income/.test(t)?"income":(/expense|cost|maintenance|repair|utility|electric|water|gas|insurance.*fee|tax|management.*fee|legal|accounting|marketing|advertising|cleaning|landscaping|pest control|security|trash|sewer|cable|internet|phone|supplies|equipment|contractor|vendor|service|operating|capex|capital|move.*in.*specials|move.*out.*charges|move.*out.*damages|move.*out.*carpet|resident.*charge|garbage|salaries.*wages|payroll.*taxes|workers.*comp|clerical.*postage|move.*out.*charges.*resident|dnu.*move.*out.*damages|dnu.*move.*out.*carpet|water.*service|asset.*management.*fee/.test(t),"expense")},C=()=>{const e={};for(const[t,n]of Object.entries(v))"income"===n?/rent|rental|tenant/.test(t.toLowerCase())?e[t]="gross_rental_income":e[t]="total_income":"expense"===n&&(/management|asset management/.test(t.toLowerCase()),e[t]="operating_expenses");return e},N=()=>{const e={};for(const t of Object.keys(v)){const n=t.toLowerCase(),r=[];/rent|rental/.test(n)&&r.push("rental"),/short term/.test(n)&&r.push("short-term"),/utility|water|garbage/.test(n)&&r.push("utility"),/management/.test(n)&&r.push("management"),/fee/.test(n)&&r.push("fee"),/income/.test(n)&&r.push("income"),/expense/.test(n)&&r.push("expense"),r.length>0&&(e[t]=r)}return e};return(0,x.jsxs)("div",{className:"space-y-4 p-4 border rounded-lg",children:[(0,x.jsx)("h3",{className:"text-lg font-semibold",children:"CSV Import with AI Parser"}),m&&(0,x.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,x.jsx)("div",{className:"flex",children:(0,x.jsxs)("div",{className:"ml-3",children:[(0,x.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),(0,x.jsx)("div",{className:"mt-2 text-sm text-red-700",children:(0,x.jsx)("p",{children:m})})]})})}),(0,x.jsx)("div",{children:(0,x.jsxs)("div",{className:"space-y-4",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"File Type"}),(0,x.jsxs)("select",{value:r,onChange:e=>s(e.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[(0,x.jsx)("option",{value:"general",children:"General CSV"}),(0,x.jsx)("option",{value:"cash_flow",children:"Cash Flow Statement"}),(0,x.jsx)("option",{value:"balance_sheet",children:"Balance Sheet"}),(0,x.jsx)("option",{value:"rent_roll",children:"Rent Roll"}),(0,x.jsx)("option",{value:"income_statement",children:"Income Statement"})]}),(0,x.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Select the type of financial document to get better AI mapping suggestions"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CSV File"}),(0,x.jsx)("input",{type:"file",accept:".csv",onChange:e=>{var t,r;return(null===(t=e.target.files)||void 0===t?void 0:t[0])&&(r=e.target.files[0],n(r),y(null),S(!1),_(!1),void qu().parse(r,{header:!0,preview:100,complete:e=>{const t=e.meta.fields||[],n=e.data.slice(0,5);i(t),c(n.map(e=>t.map(t=>e[t])));const s={};for(const r of t){const e=r.toLowerCase();/account|name|description|item/.test(e)?s[r]={field:"",score:1}:/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec|q1|q2|q3|q4|total/.test(e)?s[r]={field:"time_series",score:.9}:s[r]={field:"",score:0}}d(s),qu().parse(r,{header:!0,complete:e=>{const n=e.data.filter(e=>e&&Object.keys(e).length>0);console.log("Processing",n.length,"total rows from CSV");const r=t.find(e=>/account|name|description|item/.test(e.toLowerCase()));if(r&&n.length>0){const e={};for(const t of n){const n=String(t[r]||"").trim();!n||""===n||n.toLowerCase().includes("total")||n.toLowerCase().includes("subtotal")||n.toLowerCase().includes("summary")||!(n.length>2)||n.toLowerCase().includes("operating income & expense")||n.toLowerCase().includes("income")||n.toLowerCase().includes("expense")||(e[n]=j(n))}b(e),console.log("Detected account categories:",Object.keys(e).length,"items:",e)}}})}}))},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]})]})}),!!a.length&&(0,x.jsxs)("div",{children:[(0,x.jsx)("h4",{className:"text-md font-medium mb-2",children:"Header Mapping"}),(0,x.jsx)("div",{className:"mb-3 p-3 bg-green-50 border border-green-200 rounded-md",children:(0,x.jsxs)("p",{className:"text-sm text-green-800",children:[(0,x.jsx)("strong",{children:"\ud83e\udd16 Fully Automatic:"})," ","cash_flow"===r?"AI automatically categorizes accounts (Rental Income \u2192 income, Maintenance \u2192 expense) and maps monthly columns to time-series data. No manual mapping needed!":"rent_roll"===r?"AI automatically maps tenant names, unit numbers, and rent amounts to appropriate fields.":"balance_sheet"===r?"AI automatically categorizes assets, liabilities, and equity accounts.":"income_statement"===r?"AI automatically categorizes revenue and expense accounts and maps monthly columns.":"AI automatically detects and maps all relevant fields based on your file type."]})}),(0,x.jsx)(Ku,{headers:a,suggestions:u,onChange:(e,t)=>d(n=>o(o({},n),{},{[e]:{field:t,score:1}}))}),!1,Object.keys(v).length>0&&(0,x.jsxs)("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,x.jsx)("h4",{className:"text-lg font-semibold mb-3 text-blue-900",children:"\ud83d\udcca Account Line Items Categorization"}),(0,x.jsxs)("p",{className:"text-sm text-blue-800 mb-4",children:[(0,x.jsx)("strong",{children:"Manual Override:"})," Review and adjust how each account line item is categorized. The AI has made initial suggestions, but you can change any account from Income to Expense (or vice versa)."]}),(0,x.jsxs)("div",{className:"space-y-2 max-h-96 overflow-y-auto border rounded-lg p-4 bg-white",children:[(0,x.jsxs)("div",{className:"text-xs text-gray-500 mb-2",children:["Found ",Object.keys(v).length," account line items"]}),Object.entries(v).map(e=>{let[t,n]=e;return(0,x.jsxs)("div",{className:"flex items-center gap-3 p-2 bg-gray-50 rounded border",children:[(0,x.jsx)("div",{className:"w-1/2 font-medium text-xs text-gray-800 truncate",title:t,children:t}),(0,x.jsxs)("select",{className:"w-1/3 border border-gray-300 rounded p-1 text-xs focus:ring-1 focus:ring-blue-500 focus:border-blue-500",value:n,onChange:e=>((e,t)=>{b(n=>o(o({},n),{},{[e]:t}))})(t,e.target.value),children:[(0,x.jsx)("option",{value:"income",children:"\ud83d\udcb0 Income"}),(0,x.jsx)("option",{value:"expense",children:"\ud83d\udcb8 Expense"})]}),(0,x.jsx)("div",{className:"w-1/6 text-xs px-2 py-1 rounded text-center font-semibold ".concat("income"===n?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:"income"===n?"\ud83d\udcc8":"\ud83d\udcc9"})]},t)})]}),(0,x.jsx)("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:(0,x.jsxs)("p",{className:"text-sm text-yellow-800",children:[(0,x.jsx)("strong",{children:"\ud83d\udca1 Pro Tip:"}),' Values will be automatically normalized (negative values become positive) based on the category you select. For example, if "Move In Specials" should be an expense, select "Expense" and the system will treat it as a cost.']})})]})]}),!!a.length&&(0,x.jsxs)("div",{className:"flex gap-3",children:[(0,x.jsx)("button",{className:"px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",onClick:async()=>{if(t){g(!0),y(null),S(!1),_(!1);try{const e=new FormData;e.append("file",t),e.append("field_map",JSON.stringify(u)),e.append("file_type",r),e.append("account_categories",JSON.stringify(v));const n=await fetch("".concat(Ju,"/api/import"),{method:"POST",body:e});if(!n.ok)throw new Error("Import failed: ".concat(n.status," ").concat(n.statusText));const s=await n.json();p(s.imported_preview||[]),S(!0)}catch(m){console.error("Import error:",m),y("Import failed: ".concat(m.message,". Please check that the API server is running on ").concat(Ju))}finally{g(!1)}}},disabled:f,children:f?"Processing...":"\ud83d\udd0d Preview Import"}),k&&(0,x.jsx)("button",{className:"px-4 py-2 rounded text-white font-semibold transition-colors ".concat(f?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"),onClick:async()=>{if(h.length&&t){g(!0),y(null);try{const e=JSON.parse(localStorage.getItem("savedCSVs")||"[]"),n=e.find(e=>e.fileName===t.name&&e.isActive);if(n){if(!window.confirm('A CSV with the same filename "'.concat(t.name,'" already exists.\n\n')+"Existing CSV: ".concat(n.totalRecords," records, uploaded ").concat(new Date(n.uploadedAt).toLocaleDateString(),"\n")+"New CSV: ".concat(h.length," records\n\n")+'Do you want to replace the existing CSV with this new one?\n\nClick "OK" to replace, or "Cancel" to keep both (rename the file to avoid conflicts).'))return void y("Upload cancelled. Please rename the file to avoid conflicts.");const r=e.filter(e=>e.id!==n.id);localStorage.setItem("savedCSVs",JSON.stringify(r)),window.dispatchEvent(new CustomEvent("dataUpdated",{detail:{action:"csv_replaced",oldCsvId:n.id,fileName:t.name}}))}const s={id:Date.now().toString(),fileName:t.name,fileType:r,uploadedAt:(new Date).toISOString(),totalRecords:h.length,accountCategories:v,bucketAssignments:C(),tags:N(),isActive:!0,previewData:h},a=JSON.parse(localStorage.getItem("savedCSVs")||"[]");a.push(s),localStorage.setItem("savedCSVs",JSON.stringify(a)),_(!0),console.log("Data saved to database:",h.length,"records"),setTimeout(()=>{alert('CSV saved successfully! Go to "CSV Management" tab to review and adjust categorizations.')},500)}catch(m){console.error("Save error:",m),y("Save failed: ".concat(m.message))}finally{g(!1)}}},disabled:f,children:f?"Saving...":w?"\u2705 Saved!":"\ud83d\udcbe Save to Database"})]}),!!h.length&&(0,x.jsxs)("div",{children:[(0,x.jsx)("h4",{className:"text-md font-medium mb-2",children:"Import Preview"}),(0,x.jsx)("div",{className:"mb-3 p-3 bg-green-50 border border-green-200 rounded-md",children:(0,x.jsxs)("p",{className:"text-sm text-green-800",children:[(0,x.jsx)("strong",{children:"\u2705 Preview Complete:"})," ",h.length,' records processed successfully. Review the data below and click "Save to Database" when ready.']})}),(0,x.jsx)("pre",{className:"text-xs border rounded p-2 max-h-80 overflow-auto bg-gray-50",children:JSON.stringify(h,null,2)})]})]})}const Gu=()=>{var t;const[n,r]=(0,e.useState)("import-flow"),s=[{id:"import-flow",label:"Import Flow",icon:v,description:"AI-powered CSV import with smart mapping"},{id:"upload",label:"Basic Upload",icon:m,description:"Traditional CSV upload"}];return(0,x.jsx)("div",{className:"space-y-6",children:(0,x.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,x.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,x.jsx)("div",{className:"flex items-center justify-between",children:(0,x.jsxs)("div",{children:[(0,x.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"CSV Management"}),(0,x.jsx)("p",{className:"text-gray-600 mt-1",children:"Upload, parse, and manage your property data files"})]})})}),(0,x.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,x.jsx)("nav",{className:"flex space-x-8",children:s.map(e=>(0,x.jsxs)("button",{onClick:()=>r(e.id),className:"flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium transition-colors ".concat(n===e.id?"bg-blue-100 text-blue-700 border border-blue-200":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:[(0,x.jsx)(e.icon,{className:"w-4 h-4"}),(0,x.jsx)("span",{children:e.label})]},e.id))})}),(0,x.jsx)("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200",children:(0,x.jsx)("p",{className:"text-sm text-gray-600",children:null===(t=s.find(e=>e.id===n))||void 0===t?void 0:t.description})}),(0,x.jsx)("div",{className:"p-6",children:"upload"===n?(0,x.jsx)(Wu,{}):(0,x.jsx)(Yu,{})})]})})},Qu=d("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),Xu=d("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Zu=[{id:"total_income",name:"Total Income",description:"Sum of all income accounts",calculation:"Sum of Income accounts",color:"bg-green-100 text-green-800"},{id:"total_expense",name:"Total Expense",description:"Sum of all expense accounts",calculation:"Sum of Expense accounts",color:"bg-red-100 text-red-800"},{id:"net_operating_income",name:"Net Operating Income (NOI)",description:"Income minus Expenses",calculation:"Total Income - Total Expense",color:"bg-blue-100 text-blue-800"},{id:"gross_rental_income",name:"Gross Rental Income",description:"Rental income from tenants",calculation:"Sum of Rental Income accounts",color:"bg-green-100 text-green-800"},{id:"operating_expenses",name:"Operating Expenses",description:"Property operating costs",calculation:"Sum of Operating Expense accounts",color:"bg-orange-100 text-orange-800"}];function ed(){const[t,n]=(0,e.useState)([]),[r,s]=(0,e.useState)(null),[a,i]=(0,e.useState)({}),[l,c]=(0,e.useState)({}),[u,d]=(0,e.useState)({}),[h,p]=(0,e.useState)(!1),[f,m]=(0,e.useState)(!1),[y,v]=(0,e.useState)(!1);(0,e.useEffect)(()=>{const e=()=>{try{const e=JSON.parse(localStorage.getItem("savedCSVs")||"[]");n(e)}catch(e){console.error("Error loading CSVs:",e),n([])}};e();const t=()=>{e()};return window.addEventListener("storage",t),()=>window.removeEventListener("storage",t)},[]);const b=e=>{const t={cash_flow:"bg-blue-100 text-blue-800",balance_sheet:"bg-green-100 text-green-800",rent_roll:"bg-purple-100 text-purple-800",income_statement:"bg-orange-100 text-orange-800",general:"bg-gray-100 text-gray-800"};return t[e]||t.general},w=(()=>{if(!r)return{totalIncome:0,totalExpense:0,netIncome:0};let e=0,t=0;for(const[n,s]of Object.entries(a)){const a=r.previewData.find(e=>e.account_name===n);if(a){let n=0;if(a.time_series){const e=Object.values(a.time_series).filter(e=>"number"===typeof e&&0!==e);e.length>0&&(n=e.reduce((e,t)=>e+t,0)/e.length)}"income"===s?e+=n:"expense"===s&&(t+=n)}}return{totalIncome:e,totalExpense:t,netIncome:e-t}})(),_=()=>{const e={};return t.forEach(t=>{t.isActive&&Object.entries(t.accountCategories).forEach(n=>{let[r,s]=n;const a=t.previewData.find(e=>e.account_name===r);if(a&&a.time_series){const t=Object.values(a.time_series).filter(e=>"number"===typeof e&&0!==e);if(t.length>0){const n=t.reduce((e,t)=>e+t,0)/t.length;"income"===s?(e.total_income=(e.total_income||0)+n,/rent|rental/.test(r.toLowerCase())&&(e.gross_rental_income=(e.gross_rental_income||0)+n)):"expense"===s&&(e.total_expense=(e.total_expense||0)+n,e.operating_expenses=(e.operating_expenses||0)+n)}}})}),e.net_operating_income=(e.total_income||0)-(e.total_expense||0),e},k=_();return(0,x.jsxs)("div",{className:"space-y-6",children:[(0,x.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,x.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,x.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"CSV Management"}),(0,x.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage your saved CSV files and categorize data for dashboard integration"})]}),(0,x.jsxs)("div",{className:"p-6",children:[(0,x.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\ud83d\udcca Dashboard Bucket Totals Summary"}),(0,x.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:Zu.map(e=>{const t=k[e.id]||0;return(0,x.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,x.jsx)("div",{className:"inline-block px-3 py-1 rounded-full text-sm font-medium mb-2 ".concat(e.color),children:e.name}),(0,x.jsxs)("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:["$",t.toLocaleString()]}),(0,x.jsx)("p",{className:"text-sm text-gray-600",children:e.description}),(0,x.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.calculation})]},e.id)})})]})]}),(0,x.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,x.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,x.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"CSV Files Management"}),(0,x.jsx)("p",{className:"text-gray-600 mt-1",children:"Edit categorizations and manage individual CSV files"})]}),(0,x.jsx)("div",{className:"p-6",children:(0,x.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Saved CSVs"}),(0,x.jsx)("div",{className:"space-y-3",children:t.map(e=>(0,x.jsxs)("div",{className:"p-4 border rounded-lg ".concat(e.isActive?"border-green-200 bg-green-50":"border-gray-200 bg-gray-50"),children:[(0,x.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,x.jsxs)("div",{className:"flex items-center gap-3",children:[(0,x.jsx)(g,{className:"w-5 h-5 text-gray-500"}),(0,x.jsxs)("div",{children:[(0,x.jsx)("h4",{className:"font-medium text-gray-900",children:e.fileName}),(0,x.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,x.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(b(e.fileType)),children:e.fileType.replace("_"," ")}),(0,x.jsxs)("span",{className:"text-xs text-gray-500",children:[e.totalRecords," records"]}),(0,x.jsx)("span",{className:"w-2 h-2 rounded-full ".concat(e.isActive?"bg-green-500":"bg-gray-400")})]})]})]}),(0,x.jsxs)("div",{className:"flex items-center gap-2",children:[(0,x.jsx)("button",{onClick:()=>(async e=>{p(!0);try{await new Promise(e=>setTimeout(e,500)),n(t=>t.map(t=>t.id===e?o(o({},t),{},{isActive:!t.isActive}):t))}catch(t){console.error("Toggle failed:",t)}finally{p(!1)}})(e.id),className:"p-1 rounded ".concat(e.isActive?"text-green-600 hover:bg-green-100":"text-gray-400 hover:bg-gray-100"),disabled:h,children:(0,x.jsx)(C,{className:"w-4 h-4"})}),(0,x.jsx)("button",{onClick:()=>(e=>{s(e),i(o({},e.accountCategories)),c(o({},e.bucketAssignments)),d(o({},e.tags)),v(!1)})(e),className:"p-1 text-blue-600 hover:bg-blue-100 rounded",children:(0,x.jsx)(Qu,{className:"w-4 h-4"})}),(0,x.jsx)("button",{onClick:()=>(async e=>{const a=t.find(t=>t.id===e);if(!a)return;if(window.confirm('Are you sure you want to delete "'.concat(a.fileName,'"?\n\n')+"This will permanently remove:\n"+"\u2022 ".concat(a.totalRecords," records\n")+"\u2022 All categorizations and bucket assignments\n\u2022 Dashboard data from this CSV\n\nThis action cannot be undone.")){p(!0);try{const o=t.filter(t=>t.id!==e);localStorage.setItem("savedCSVs",JSON.stringify(o)),n(o),(null===r||void 0===r?void 0:r.id)===e&&(s(null),i({}),c({}),d({})),window.dispatchEvent(new CustomEvent("dataUpdated",{detail:{action:"csv_deleted",csvId:e,fileName:a.fileName}})),setTimeout(()=>{const e=_();console.log("\ud83d\udcca Updated bucket totals after deletion:",e)},100),console.log('\u2705 CSV "'.concat(a.fileName,'" deleted successfully'))}catch(o){console.error("Delete failed:",o),alert("Failed to delete CSV. Please try again.")}finally{p(!1)}}})(e.id),className:"p-1 text-red-600 hover:bg-red-100 rounded",disabled:h,children:(0,x.jsx)(xu,{className:"w-4 h-4"})})]})]}),(0,x.jsxs)("div",{className:"text-xs text-gray-600",children:["Uploaded: ",new Date(e.uploadedAt).toLocaleDateString()]})]},e.id))})]}),(0,x.jsx)("div",{children:r?(0,x.jsxs)("div",{children:[(0,x.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,x.jsxs)("h3",{className:"text-lg font-semibold",children:["Edit: ",r.fileName]}),(0,x.jsxs)("div",{className:"flex gap-2",children:[(0,x.jsxs)("button",{onClick:()=>v(!y),className:"flex items-center gap-2 px-3 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:[(0,x.jsx)(vu,{className:"w-4 h-4"}),y?"Hide Preview":"Show Preview"]}),(0,x.jsxs)("button",{onClick:async()=>{if(r){m(!0);try{await new Promise(e=>setTimeout(e,1e3));const e=o(o({},r),{},{accountCategories:a,bucketAssignments:l,tags:u}),t=JSON.parse(localStorage.getItem("savedCSVs")||"[]").map(t=>t.id===r.id?e:t);localStorage.setItem("savedCSVs",JSON.stringify(t)),n(t),s(e),console.log("CSV categorization saved:",e)}catch(e){console.error("Save failed:",e)}finally{m(!1)}}},disabled:f,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:[(0,x.jsx)(Xu,{className:"w-4 h-4"}),f?"Saving...":"Save Changes"]})]})]}),(0,x.jsxs)("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,x.jsx)("h4",{className:"text-md font-semibold mb-3 text-blue-900",children:"\ud83d\udcca Categorized Totals Preview"}),(0,x.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,x.jsxs)("div",{className:"text-center",children:[(0,x.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:["$",w.totalIncome.toLocaleString()]}),(0,x.jsx)("div",{className:"text-sm text-gray-600",children:"Total Income"})]}),(0,x.jsxs)("div",{className:"text-center",children:[(0,x.jsxs)("div",{className:"text-2xl font-bold text-red-600",children:["$",w.totalExpense.toLocaleString()]}),(0,x.jsx)("div",{className:"text-sm text-gray-600",children:"Total Expense"})]}),(0,x.jsxs)("div",{className:"text-center",children:[(0,x.jsxs)("div",{className:"text-2xl font-bold ".concat(w.netIncome>=0?"text-blue-600":"text-red-600"),children:["$",w.netIncome.toLocaleString()]}),(0,x.jsx)("div",{className:"text-sm text-gray-600",children:"Net Income (NOI)"})]})]})]}),(0,x.jsxs)("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:[(0,x.jsx)("h4",{className:"text-md font-medium mb-3",children:"Account Line Items Categorization"}),(0,x.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"Review and adjust how each account line item is categorized. Values will be normalized (negative values \u2192 positive)."}),(0,x.jsxs)("div",{className:"space-y-2 max-h-80 overflow-y-auto border rounded-lg p-4 bg-white",children:[(0,x.jsxs)("div",{className:"text-xs text-gray-500 mb-2",children:["Found ",Object.keys(a).length," account line items"]}),Object.entries(a).map(e=>{let[t,n]=e;return(0,x.jsxs)("div",{className:"flex items-center gap-3 p-2 bg-gray-50 rounded border",children:[(0,x.jsx)("div",{className:"w-1/2 font-medium text-xs text-gray-800 truncate",title:t,children:t}),(0,x.jsxs)("select",{className:"w-1/3 border border-gray-300 rounded p-1 text-xs focus:ring-1 focus:ring-blue-500 focus:border-blue-500",value:n,onChange:e=>((e,t)=>{i(n=>o(o({},n),{},{[e]:t}))})(t,e.target.value),children:[(0,x.jsx)("option",{value:"income",children:"\ud83d\udcb0 Income"}),(0,x.jsx)("option",{value:"expense",children:"\ud83d\udcb8 Expense"})]}),(0,x.jsx)("div",{className:"w-1/6 text-xs px-2 py-1 rounded text-center font-semibold ".concat("income"===n?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:"income"===n?"\ud83d\udcc8":"\ud83d\udcc9"})]},t)})]}),(0,x.jsxs)("div",{className:"space-y-2",children:[(0,x.jsx)("h5",{className:"text-sm font-medium",children:"Dashboard Bucket Assignment"}),(0,x.jsx)("div",{className:"space-y-2 max-h-60 overflow-y-auto border rounded-lg p-3 bg-white",children:Object.entries(a).map(e=>{let[t,n]=e;return(0,x.jsxs)("div",{className:"flex items-center gap-3 p-2 bg-gray-50 rounded border",children:[(0,x.jsx)("div",{className:"w-1/2 font-medium text-xs text-gray-800 truncate",title:t,children:t}),(0,x.jsxs)("select",{className:"w-1/2 border border-gray-300 rounded p-1 text-xs focus:ring-1 focus:ring-blue-500 focus:border-blue-500",value:l[t]||"",onChange:e=>((e,t)=>{c(n=>o(o({},n),{},{[e]:t}))})(t,e.target.value),children:[(0,x.jsx)("option",{value:"",children:"Select bucket..."}),Zu.map(e=>(0,x.jsx)("option",{value:e.id,children:e.name},e.id))]})]},t)})})]}),(0,x.jsxs)("div",{className:"space-y-2",children:[(0,x.jsx)("h5",{className:"text-sm font-medium",children:"Tags"}),(0,x.jsx)("div",{className:"space-y-2 max-h-60 overflow-y-auto border rounded-lg p-3 bg-white",children:Object.entries(a).map(e=>{var t;let[n,r]=e;return(0,x.jsxs)("div",{className:"flex items-center gap-3 p-2 bg-gray-50 rounded border",children:[(0,x.jsx)("div",{className:"w-1/2 font-medium text-xs text-gray-800 truncate",title:n,children:n}),(0,x.jsx)("input",{type:"text",value:(null===(t=u[n])||void 0===t?void 0:t.join(", "))||"",onChange:e=>((e,t)=>{d(n=>o(o({},n),{},{[e]:t}))})(n,e.target.value.split(",").map(e=>e.trim()).filter(Boolean)),placeholder:"Enter tags separated by commas",className:"w-1/2 p-2 border rounded text-xs"})]},n)})})]})]}),y&&(0,x.jsxs)("div",{className:"mt-4",children:[(0,x.jsx)("h4",{className:"text-md font-medium mb-2",children:"Data Preview"}),(0,x.jsx)("pre",{className:"text-xs border rounded p-2 max-h-60 overflow-auto bg-gray-50",children:JSON.stringify(r.previewData.slice(0,10),null,2)})]})]}):(0,x.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,x.jsx)(g,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),(0,x.jsx)("p",{children:"Select a CSV to edit categorizations"})]})})]})})]}),(0,x.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,x.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,x.jsx)("h3",{className:"text-lg font-semibold",children:"Dashboard Buckets"}),(0,x.jsx)("p",{className:"text-gray-600 text-sm",children:"How your CSV data populates the dashboard"})]}),(0,x.jsx)("div",{className:"p-6",children:(0,x.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Zu.map(e=>(0,x.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,x.jsx)("div",{className:"inline-block px-3 py-1 rounded-full text-sm font-medium mb-2 ".concat(e.color),children:e.name}),(0,x.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),(0,x.jsx)("p",{className:"text-xs text-gray-500",children:e.calculation})]},e.id))})})]})]})}const td=function(){const[t,n]=(0,e.useState)("dashboard");return e.useEffect(()=>{const e=e=>{const t=e.detail.page;t&&n(t)};return window.addEventListener("navigateToPage",e),()=>{window.removeEventListener("navigateToPage",e)}},[]),(0,x.jsxs)("div",{className:"flex min-h-screen bg-gray-50",children:[(0,x.jsx)(w,{currentPage:t,setCurrentPage:n}),(0,x.jsx)("main",{className:"flex-1 overflow-y-auto",children:(0,x.jsx)("div",{className:"p-6 pb-12",children:(()=>{switch(t){case"dashboard":default:return(0,x.jsx)(du,{});case"financials":return(0,x.jsx)(Uu,{});case"analytics":return(0,x.jsx)(zu,{});case"properties":return(0,x.jsx)(Mu,{});case"csvs":return(0,x.jsx)(Gu,{});case"csv-management":return(0,x.jsx)(ed,{});case"reports":return(0,x.jsx)(Bu,{})}})()})})]})};t.createRoot(document.getElementById("root")).render((0,x.jsx)(e.StrictMode,{children:(0,x.jsx)(td,{})}))})()})();
//# sourceMappingURL=main.c6fb7d3e.js.map