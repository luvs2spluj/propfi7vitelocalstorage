/*! For license information please see main.ab249af1.js.LICENSE.txt */
(()=>{var e={477:()=>{},548:function(e,t,n){!function(){var t;e.exports=(t=n(4488),n(2238),t.pad.ZeroPadding={pad:function(e,t){var n=4*t;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},unpad:function(e){var t=e.words,n=e.sigBytes-1;for(n=e.sigBytes-1;n>=0;n--)if(t[n>>>2]>>>24-n%4*8&255){e.sigBytes=n+1;break}}},t.pad.ZeroPadding)}()},579:(e,t,n)=>{"use strict";e.exports=n(1153)},1112:function(e,t,n){!function(){var t;e.exports=(t=n(4488),n(2238),t.mode.CFB=function(){var e=t.lib.BlockCipherMode.extend();function n(e,t,n,r){var s,i=this._iv;i?(s=i.slice(0),this._iv=void 0):s=this._prevBlock,r.encryptBlock(s,0);for(var a=0;a<n;a++)e[t+a]^=s[a]}return e.Encryptor=e.extend({processBlock:function(e,t){var r=this._cipher,s=r.blockSize;n.call(this,e,t,s,r),this._prevBlock=e.slice(t,t+s)}}),e.Decryptor=e.extend({processBlock:function(e,t){var r=this._cipher,s=r.blockSize,i=e.slice(t,t+s);n.call(this,e,t,s,r),this._prevBlock=i}}),e}(),t.mode.CFB)}()},1153:(e,t,n)=>{"use strict";var r=n(5043),s=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,d=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:s,type:e,key:c,ref:d,props:i,_owner:o.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},1210:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(n(8829)),i=r(n(5736));class a{constructor(e){let{headers:t={},schema:n,fetch:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=new Headers(t),this.schemaName=n,this.fetch=r}from(e){const t=new URL("".concat(this.url,"/").concat(e));return new s.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new a(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{head:n=!1,get:r=!1,count:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var a;let o;const l=new URL("".concat(this.url,"/rpc/").concat(e));let c;n||r?(o=n?"HEAD":"GET",Object.entries(t).filter(e=>{let[t,n]=e;return void 0!==n}).map(e=>{let[t,n]=e;return[t,Array.isArray(n)?"{".concat(n.join(","),"}"):"".concat(n)]}).forEach(e=>{let[t,n]=e;l.searchParams.append(t,n)})):(o="POST",c=t);const d=new Headers(this.headers);return s&&d.set("Prefer","count=".concat(s)),new i.default({method:o,url:l,headers:d,schema:this.schemaName,body:c,fetch:null!==(a=this.fetch)&&void 0!==a?a:fetch})}}t.default=a},1641:function(e,t,n){!function(){var t;e.exports=(t=n(4488),n(6368),function(){var e=t,n=e.lib.WordArray,r=e.algo,s=r.SHA256,i=r.SHA224=s.extend({_doReset:function(){this._hash=new n.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=s._doFinalize.call(this);return e.sigBytes-=4,e}});e.SHA224=s._createHelper(i),e.HmacSHA224=s._createHmacHelper(i)}(),t.SHA224)}()},1659:function(e,t,n){!function(){var t;e.exports=(t=n(4488),n(8523),n(4199),n(8211),n(2238),function(){var e=t,n=e.lib.StreamCipher,r=e.algo,s=[],i=[],a=[],o=r.RabbitLegacy=n.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],r=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var s=0;s<4;s++)l.call(this);for(s=0;s<8;s++)r[s]^=n[s+4&7];if(t){var i=t.words,a=i[0],o=i[1],c=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),d=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),u=c>>>16|4294901760&d,h=d<<16|65535&c;for(r[0]^=c,r[1]^=u,r[2]^=d,r[3]^=h,r[4]^=c,r[5]^=u,r[6]^=d,r[7]^=h,s=0;s<4;s++)l.call(this)}},_doProcessBlock:function(e,t){var n=this._X;l.call(this),s[0]=n[0]^n[5]>>>16^n[3]<<16,s[1]=n[2]^n[7]>>>16^n[5]<<16,s[2]=n[4]^n[1]>>>16^n[7]<<16,s[3]=n[6]^n[3]>>>16^n[1]<<16;for(var r=0;r<4;r++)s[r]=16711935&(s[r]<<8|s[r]>>>24)|4278255360&(s[r]<<24|s[r]>>>8),e[t+r]^=s[r]},blockSize:4,ivSize:2});function l(){for(var e=this._X,t=this._C,n=0;n<8;n++)i[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<i[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<i[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<i[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<i[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<i[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<i[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<i[6]>>>0?1:0)|0,this._b=t[7]>>>0<i[7]>>>0?1:0,n=0;n<8;n++){var r=e[n]+t[n],s=65535&r,o=r>>>16,l=((s*s>>>17)+s*o>>>15)+o*o,c=((4294901760&r)*r|0)+((65535&r)*r|0);a[n]=l^c}e[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,e[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,e[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,e[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,e[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,e[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,e[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,e[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}e.RabbitLegacy=n._createHelper(o)}(),t.RabbitLegacy)}()},1884:function(e,t,n){!function(){var t;e.exports=(t=n(4488),n(2238),t.pad.AnsiX923={pad:function(e,t){var n=e.sigBytes,r=4*t,s=r-n%r,i=n+s-1;e.clamp(),e.words[i>>>2]|=s<<24-i%4*8,e.sigBytes+=s},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},t.pad.Ansix923)}()},2002:function(e,t,n){!function(){var t;e.exports=(t=n(4488),function(){var e=t,n=e.lib,r=n.WordArray,s=n.Hasher,i=e.algo,a=[],o=i.SHA1=s.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],s=n[1],i=n[2],o=n[3],l=n[4],c=0;c<80;c++){if(c<16)a[c]=0|e[t+c];else{var d=a[c-3]^a[c-8]^a[c-14]^a[c-16];a[c]=d<<1|d>>>31}var u=(r<<5|r>>>27)+l+a[c];u+=c<20?1518500249+(s&i|~s&o):c<40?1859775393+(s^i^o):c<60?(s&i|s&o|i&o)-1894007588:(s^i^o)-899497514,l=o,o=i,i=s<<30|s>>>2,s=r,r=u}n[0]=n[0]+r|0,n[1]=n[1]+s|0,n[2]=n[2]+i|0,n[3]=n[3]+o|0,n[4]=n[4]+l|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=s._createHelper(o),e.HmacSHA1=s._createHmacHelper(o)}(),t.SHA1)}()},2238:function(e,t,n){!function(){var t;e.exports=(t=n(4488),n(8211),void(t.lib.Cipher||function(e){var n=t,r=n.lib,s=r.Base,i=r.WordArray,a=r.BufferedBlockAlgorithm,o=n.enc,l=(o.Utf8,o.Base64),c=n.algo.EvpKDF,d=r.Cipher=a.extend({cfg:s.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?b:y}return function(t){return{encrypt:function(n,r,s){return e(r).encrypt(t,n,r,s)},decrypt:function(n,r,s){return e(r).decrypt(t,n,r,s)}}}}()}),u=(r.StreamCipher=d.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),n.mode={}),h=r.BlockCipherMode=s.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),p=u.CBC=function(){var t=h.extend();function n(t,n,r){var s,i=this._iv;i?(s=i,this._iv=e):s=this._prevBlock;for(var a=0;a<r;a++)t[n+a]^=s[a]}return t.Encryptor=t.extend({processBlock:function(e,t){var r=this._cipher,s=r.blockSize;n.call(this,e,t,s),r.encryptBlock(e,t),this._prevBlock=e.slice(t,t+s)}}),t.Decryptor=t.extend({processBlock:function(e,t){var r=this._cipher,s=r.blockSize,i=e.slice(t,t+s);r.decryptBlock(e,t),n.call(this,e,t,s),this._prevBlock=i}}),t}(),f=(n.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,r=n-e.sigBytes%n,s=r<<24|r<<16|r<<8|r,a=[],o=0;o<r;o+=4)a.push(s);var l=i.create(a,r);e.concat(l)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},g=(r.BlockCipher=d.extend({cfg:d.cfg.extend({mode:p,padding:f}),reset:function(){var e;d.reset.call(this);var t=this.cfg,n=t.iv,r=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=r.createEncryptor:(e=r.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,n&&n.words):(this._mode=e.call(r,this,n&&n.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),r.CipherParams=s.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),m=(n.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,n=e.salt;return(n?i.create([1398893684,1701076831]).concat(n).concat(t):t).toString(l)},parse:function(e){var t,n=l.parse(e),r=n.words;return 1398893684==r[0]&&1701076831==r[1]&&(t=i.create(r.slice(2,4)),r.splice(0,4),n.sigBytes-=16),g.create({ciphertext:n,salt:t})}},y=r.SerializableCipher=s.extend({cfg:s.extend({format:m}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var s=e.createEncryptor(n,r),i=s.finalize(t),a=s.cfg;return g.create({ciphertext:i,key:n,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),x=(n.kdf={}).OpenSSL={execute:function(e,t,n,r,s){if(r||(r=i.random(8)),s)a=c.create({keySize:t+n,hasher:s}).compute(e,r);else var a=c.create({keySize:t+n}).compute(e,r);var o=i.create(a.words.slice(t),4*n);return a.sigBytes=4*t,g.create({key:a,iv:o,salt:r})}},b=r.PasswordBasedCipher=y.extend({cfg:y.cfg.extend({kdf:x}),encrypt:function(e,t,n,r){var s=(r=this.cfg.extend(r)).kdf.execute(n,e.keySize,e.ivSize,r.salt,r.hasher);r.iv=s.iv;var i=y.encrypt.call(this,e,t,s.key,r);return i.mixIn(s),i},decrypt:function(e,t,n,r){r=this.cfg.extend(r),t=this._parse(t,r.format);var s=r.kdf.execute(n,e.keySize,e.ivSize,t.salt,r.hasher);return r.iv=s.iv,y.decrypt.call(this,e,t,s.key,r)}})}()))}()},2330:(e,t,n)=>{"use strict";var r=n(5043);var s="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},i=r.useState,a=r.useEffect,o=r.useLayoutEffect,l=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!s(e,n)}catch(r){return!0}}var d="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=i({inst:{value:n,getSnapshot:t}}),s=r[0].inst,d=r[1];return o(function(){s.value=n,s.getSnapshot=t,c(s)&&d({inst:s})},[e,n,t]),a(function(){return c(s)&&d({inst:s}),e(function(){c(s)&&d({inst:s})})},[e]),l(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:d},2611:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}t.default=n},2730:(e,t,n)=>{"use strict";var r=n(5043),s=n(8853);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function g(e,t,n,r,s,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){m[e]=new g(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){m[e]=new g(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){m[e]=new g(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){m[e]=new g(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){m[e]=new g(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function x(e){return e[1].toUpperCase()}function b(e,t,n,r){var s=m.hasOwnProperty(t)?m[t]:null;(null!==s?0!==s.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,s,r)&&(n=null),r||null===s?function(e){return!!u.call(f,e)||!u.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=null===n?3!==s.type&&"":n:(t=s.attributeName,r=s.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,x);m[t]=new g(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,x);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,x);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)}),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)});var v=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),C=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var M=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var I=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=I&&e[I]||e["@@iterator"])?e:null}var L,D=Object.assign;function z(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var F=!1;function U(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var s=c.stack.split("\n"),i=r.stack.split("\n"),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(1!==a||1!==o)do{if(a--,0>--o||s[a]!==i[o]){var l="\n"+s[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function B(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case _:return"Portal";case S:return"Profiler";case j:return"StrictMode";case A:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case N:return(e._context.displayName||"Context")+".Provider";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case T:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return V(e(t))}catch(n){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===j?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function $(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var n=t.checked;return D({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function X(e,t){Q(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return D({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ie(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return de(e,t)})}:de);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),s=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}Object.keys(pe).forEach(function(e){fe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]})});var ye=D({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xe(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ve=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,ke=null,je=null;function Se(e){if(e=bs(e)){if("function"!==typeof _e)throw Error(i(280));var t=e.stateNode;t&&(t=ws(t),_e(e.stateNode,e.type,t))}}function Ne(e){ke?je?je.push(e):je=[e]:ke=e}function Ce(){if(ke){var e=ke,t=je;if(je=ke=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ee(e,t){return e(t)}function Ae(){}var Pe=!1;function Te(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return Ee(e,t,n)}finally{Pe=!1,(null!==ke||null!==je)&&(Ae(),Ce())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=ws(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Me=!1;if(d)try{var Ie={};Object.defineProperty(Ie,"passive",{get:function(){Me=!0}}),window.addEventListener("test",Ie,Ie),window.removeEventListener("test",Ie,Ie)}catch(de){Me=!1}function Re(e,t,n,r,s,i,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var Le=!1,De=null,ze=!1,Fe=null,Ue={onError:function(e){Le=!0,De=e}};function Be(e,t,n,r,s,i,a,o,l){Le=!1,De=null,Re.apply(Ue,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Ve(e)!==e)throw Error(i(188))}function qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var a=s.alternate;if(null===a){if(null!==(r=s.return)){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return He(s),e;if(a===r)return He(s),t;a=a.sibling}throw Error(i(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var $e=s.unstable_scheduleCallback,Ge=s.unstable_cancelCallback,Je=s.unstable_shouldYield,Ye=s.unstable_requestPaint,Qe=s.unstable_now,Xe=s.unstable_getCurrentPriorityLevel,Ze=s.unstable_ImmediatePriority,et=s.unstable_UserBlockingPriority,tt=s.unstable_NormalPriority,nt=s.unstable_LowPriority,rt=s.unstable_IdlePriority,st=null,it=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~s;0!==o?r=ut(o):0!==(i&=a)&&(r=ut(i))}else 0!==(a=n&~s)?r=ut(a):0!==i&&(r=ut(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&s)&&((s=r&-r)>=(i=t&-t)||16===s&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)s=1<<(n=31-at(t)),r|=e[n],t&=~s;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function xt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var bt=0;function vt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,kt,jt,St,Nt=!1,Ct=[],Et=null,At=null,Pt=null,Tt=new Map,Ot=new Map,Mt=[],It="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rt(e,t){switch(e){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Tt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Lt(e,t,n,r,s,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},null!==t&&(null!==(t=bs(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Dt(e){var t=xs(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=We(n)))return e.blockedOn=t,void St(e.priority,function(){kt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function zt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bs(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);ve=r,n.target.dispatchEvent(r),ve=null,t.shift()}return!0}function Ft(e,t,n){zt(e)&&n.delete(t)}function Ut(){Nt=!1,null!==Et&&zt(Et)&&(Et=null),null!==At&&zt(At)&&(At=null),null!==Pt&&zt(Pt)&&(Pt=null),Tt.forEach(Ft),Ot.forEach(Ft)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Nt||(Nt=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Ut)))}function Vt(e){function t(t){return Bt(t,e)}if(0<Ct.length){Bt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Et&&Bt(Et,e),null!==At&&Bt(At,e),null!==Pt&&Bt(Pt,e),Tt.forEach(t),Ot.forEach(t),n=0;n<Mt.length;n++)(r=Mt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Mt.length&&null===(n=Mt[0]).blockedOn;)Dt(n),null===n.blockedOn&&Mt.shift()}var Wt=v.ReactCurrentBatchConfig,Ht=!0;function qt(e,t,n,r){var s=bt,i=Wt.transition;Wt.transition=null;try{bt=1,$t(e,t,n,r)}finally{bt=s,Wt.transition=i}}function Kt(e,t,n,r){var s=bt,i=Wt.transition;Wt.transition=null;try{bt=4,$t(e,t,n,r)}finally{bt=s,Wt.transition=i}}function $t(e,t,n,r){if(Ht){var s=Jt(e,t,n,r);if(null===s)Hr(e,t,r,Gt,n),Rt(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return Et=Lt(Et,e,t,n,r,s),!0;case"dragenter":return At=Lt(At,e,t,n,r,s),!0;case"mouseover":return Pt=Lt(Pt,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Tt.set(i,Lt(Tt.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ot.set(i,Lt(Ot.get(i)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(Rt(e,r),4&t&&-1<It.indexOf(e)){for(;null!==s;){var i=bs(s);if(null!==i&&wt(i),null===(i=Jt(e,t,n,r))&&Hr(e,t,r,Gt,n),i===s)break;s=i}null!==s&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Gt=null;function Jt(e,t,n,r){if(Gt=null,null!==(e=xs(e=we(r))))if(null===(t=Ve(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Qt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,s="value"in Qt?Qt.value:Qt.textContent,i=s.length;for(e=0;e<r&&n[e]===s[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===s[i-t];t++);return Zt=s.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,s,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return D(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=sn(cn),un=D({},cn,{view:0,detail:0}),hn=sn(un),pn=D({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),fn=sn(pn),gn=sn(D({},pn,{dataTransfer:0})),mn=sn(D({},un,{relatedTarget:0})),yn=sn(D({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),xn=D({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=sn(xn),vn=sn(D({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function Sn(){return jn}var Nn=D({},un,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=sn(Nn),En=sn(D({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=sn(D({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),Pn=sn(D({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Tn=D({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=sn(Tn),Mn=[9,13,27,32],In=d&&"CompositionEvent"in window,Rn=null;d&&"documentMode"in document&&(Rn=document.documentMode);var Ln=d&&"TextEvent"in window&&!Rn,Dn=d&&(!In||Rn&&8<Rn&&11>=Rn),zn=String.fromCharCode(32),Fn=!1;function Un(e,t){switch(e){case"keyup":return-1!==Mn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function qn(e,t,n,r){Ne(r),0<(t=Kr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,$n=null;function Gn(e){zr(e,0)}function Jn(e){if($(vs(e)))return e}function Yn(e,t){if("change"===e)return t}var Qn=!1;if(d){var Xn;if(d){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Qn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),$n=Kn=null)}function nr(e){if("value"===e.propertyName&&Jn($n)){var t=[];qn(t,$n,e,we(e)),Te(Gn,t)}}function rr(e,t,n){"focusin"===e?(tr(),$n=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn($n)}function ir(e,t){if("click"===e)return Jn(t)}function ar(e,t){if("input"===e||"change"===e)return Jn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!u.call(t,s)||!or(e[s],t[s]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function ur(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ur(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ur(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=void 0===r.end?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=dr(n,i);var a=dr(n,r);s&&a&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=d&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,xr=null,br=!1;function vr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==mr||mr!==G(r)||("selectionStart"in(r=mr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},xr&&lr(xr,r)||(xr=r,0<(r=Kr(yr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},kr={},jr={};function Sr(e){if(kr[e])return kr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in jr)return kr[e]=n[t];return e}d&&(jr=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Nr=Sr("animationend"),Cr=Sr("animationiteration"),Er=Sr("animationstart"),Ar=Sr("transitionend"),Pr=new Map,Tr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Pr.set(e,t),l(t,[e])}for(var Mr=0;Mr<Tr.length;Mr++){var Ir=Tr[Mr];Or(Ir.toLowerCase(),"on"+(Ir[0].toUpperCase()+Ir.slice(1)))}Or(Nr,"onAnimationEnd"),Or(Cr,"onAnimationIteration"),Or(Er,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rr));function Dr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,s,a,o,l,c){if(Be.apply(this,arguments),Le){if(!Le)throw Error(i(198));var d=De;Le=!1,De=null,ze||(ze=!0,Fe=d)}}(r,t,void 0,e),e.currentTarget=null}function zr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;Dr(s,o,c),i=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;Dr(s,o,c),i=l}}}if(ze)throw e=Fe,ze=!1,Fe=null,e}function Fr(e,t){var n=t[gs];void 0===n&&(n=t[gs]=new Set);var r=e+"__bubble";n.has(r)||(Wr(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),Wr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function Vr(e){if(!e[Br]){e[Br]=!0,a.forEach(function(t){"selectionchange"!==t&&(Lr.has(t)||Ur(t,!1,e),Ur(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Ur("selectionchange",!1,t))}}function Wr(e,t,n,r){switch(Yt(t)){case 1:var s=qt;break;case 4:s=Kt;break;default:s=$t}n=s.bind(null,t,n,e),s=void 0,!Me||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,s){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===s||8===o.nodeType&&o.parentNode===s)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;a=a.return}for(;null!==o;){if(null===(a=xs(o)))return;if(5===(l=a.tag)||6===l){r=i=a;continue e}o=o.parentNode}}r=r.return}Te(function(){var r=i,s=we(n),a=[];e:{var o=Pr.get(e);if(void 0!==o){var l=dn,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case Nr:case Cr:case Er:l=yn;break;case Ar:l=Pn;break;case"scroll":l=hn;break;case"wheel":l=On;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=En}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==o?o+"Capture":null:o;d=[];for(var p,f=r;null!==f;){var g=(p=f).stateNode;if(5===p.tag&&null!==g&&(p=g,null!==h&&(null!=(g=Oe(f,h))&&d.push(qr(f,g,p)))),u)break;f=f.return}0<d.length&&(o=new l(o,c,null,n,s),a.push({event:o,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===ve||!(c=n.relatedTarget||n.fromElement)||!xs(c)&&!c[fs])&&(l||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?xs(c):null)&&(c!==(u=Ve(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(d=fn,g="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(d=En,g="onPointerLeave",h="onPointerEnter",f="pointer"),u=null==l?o:vs(l),p=null==c?o:vs(c),(o=new d(g,f+"leave",l,n,s)).target=u,o.relatedTarget=p,g=null,xs(s)===r&&((d=new d(h,f+"enter",c,n,s)).target=p,d.relatedTarget=u,g=d),u=g,l&&c)e:{for(h=c,f=0,p=d=l;p;p=$r(p))f++;for(p=0,g=h;g;g=$r(g))p++;for(;0<f-p;)d=$r(d),f--;for(;0<p-f;)h=$r(h),p--;for(;f--;){if(d===h||null!==h&&d===h.alternate)break e;d=$r(d),h=$r(h)}d=null}else d=null;null!==l&&Gr(a,o,l,d,!1),null!==c&&null!==u&&Gr(a,u,c,d,!0)}if("select"===(l=(o=r?vs(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var m=Yn;else if(Hn(o))if(Qn)m=ar;else{m=sr;var y=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(m=ir);switch(m&&(m=m(e,r))?qn(a,m,n,s):(y&&y(e,o,r),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&ee(o,"number",o.value)),y=r?vs(r):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,xr=null);break;case"focusout":xr=yr=mr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,vr(a,n,s);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":vr(a,n,s)}var x;if(In)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Vn?Un(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Dn&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Vn&&(x=en()):(Xt="value"in(Qt=s)?Qt.value:Qt.textContent,Vn=!0)),0<(y=Kr(r,b)).length&&(b=new vn(b,e,null,n,s),a.push({event:b,listeners:y}),x?b.data=x:null!==(x=Bn(n))&&(b.data=x))),(x=Ln?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Fn=!0,zn);case"textInput":return(e=t.data)===zn&&Fn?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!In&&Un(e,t)?(e=en(),Zt=Xt=Qt=null,Vn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(s=new vn("onBeforeInput","beforeinput",null,n,s),a.push({event:s,listeners:r}),s.data=x))}zr(a,t)})}function qr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,i=s.stateNode;5===s.tag&&null!==i&&(s=i,null!=(i=Oe(e,n))&&r.unshift(qr(e,i,s)),null!=(i=Oe(e,t))&&r.push(qr(e,i,s))),e=e.return}return r}function $r(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gr(e,t,n,r,s){for(var i=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,s?null!=(l=Oe(n,i))&&a.unshift(qr(n,l,o)):s||null!=(l=Oe(n,i))&&a.push(qr(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Jr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Qr(e){return("string"===typeof e?e:""+e).replace(Jr,"\n").replace(Yr,"")}function Xr(e,t,n){if(t=Qr(t),Qr(e)!==t&&n)throw Error(i(425))}function Zr(){}var es=null,ts=null;function ns(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var rs="function"===typeof setTimeout?setTimeout:void 0,ss="function"===typeof clearTimeout?clearTimeout:void 0,is="function"===typeof Promise?Promise:void 0,as="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof is?function(e){return is.resolve(null).then(e).catch(os)}:rs;function os(e){setTimeout(function(){throw e})}function ls(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===r)return e.removeChild(s),void Vt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=s}while(n);Vt(t)}function cs(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ds(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var us=Math.random().toString(36).slice(2),hs="__reactFiber$"+us,ps="__reactProps$"+us,fs="__reactContainer$"+us,gs="__reactEvents$"+us,ms="__reactListeners$"+us,ys="__reactHandles$"+us;function xs(e){var t=e[hs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fs]||n[hs]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ds(e);null!==e;){if(n=e[hs])return n;e=ds(e)}return t}n=(e=n).parentNode}return null}function bs(e){return!(e=e[hs]||e[fs])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function vs(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function ws(e){return e[ps]||null}var _s=[],ks=-1;function js(e){return{current:e}}function Ss(e){0>ks||(e.current=_s[ks],_s[ks]=null,ks--)}function Ns(e,t){ks++,_s[ks]=e.current,e.current=t}var Cs={},Es=js(Cs),As=js(!1),Ps=Cs;function Ts(e,t){var n=e.type.contextTypes;if(!n)return Cs;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s,i={};for(s in n)i[s]=t[s];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Os(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ms(){Ss(As),Ss(Es)}function Is(e,t,n){if(Es.current!==Cs)throw Error(i(168));Ns(Es,t),Ns(As,n)}function Rs(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in t))throw Error(i(108,W(e)||"Unknown",s));return D({},n,r)}function Ls(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Cs,Ps=Es.current,Ns(Es,e),Ns(As,As.current),!0}function Ds(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Rs(e,t,Ps),r.__reactInternalMemoizedMergedChildContext=e,Ss(As),Ss(Es),Ns(Es,e)):Ss(As),Ns(As,n)}var zs=null,Fs=!1,Us=!1;function Bs(e){null===zs?zs=[e]:zs.push(e)}function Vs(){if(!Us&&null!==zs){Us=!0;var e=0,t=bt;try{var n=zs;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}zs=null,Fs=!1}catch(s){throw null!==zs&&(zs=zs.slice(e+1)),$e(Ze,Vs),s}finally{bt=t,Us=!1}}return null}var Ws=[],Hs=0,qs=null,Ks=0,$s=[],Gs=0,Js=null,Ys=1,Qs="";function Xs(e,t){Ws[Hs++]=Ks,Ws[Hs++]=qs,qs=e,Ks=t}function Zs(e,t,n){$s[Gs++]=Ys,$s[Gs++]=Qs,$s[Gs++]=Js,Js=e;var r=Ys;e=Qs;var s=32-at(r)-1;r&=~(1<<s),n+=1;var i=32-at(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Ys=1<<32-at(t)+s|n<<s|r,Qs=i+e}else Ys=1<<i|n<<s|r,Qs=e}function ei(e){null!==e.return&&(Xs(e,1),Zs(e,1,0))}function ti(e){for(;e===qs;)qs=Ws[--Hs],Ws[Hs]=null,Ks=Ws[--Hs],Ws[Hs]=null;for(;e===Js;)Js=$s[--Gs],$s[Gs]=null,Qs=$s[--Gs],$s[Gs]=null,Ys=$s[--Gs],$s[Gs]=null}var ni=null,ri=null,si=!1,ii=null;function ai(e,t){var n=Tc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function oi(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ni=e,ri=cs(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ni=e,ri=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Js?{id:Ys,overflow:Qs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Tc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ni=e,ri=null,!0);default:return!1}}function li(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ci(e){if(si){var t=ri;if(t){var n=t;if(!oi(e,t)){if(li(e))throw Error(i(418));t=cs(n.nextSibling);var r=ni;t&&oi(e,t)?ai(r,n):(e.flags=-4097&e.flags|2,si=!1,ni=e)}}else{if(li(e))throw Error(i(418));e.flags=-4097&e.flags|2,si=!1,ni=e}}}function di(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ni=e}function ui(e){if(e!==ni)return!1;if(!si)return di(e),si=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ns(e.type,e.memoizedProps)),t&&(t=ri)){if(li(e))throw hi(),Error(i(418));for(;t;)ai(e,t),t=cs(t.nextSibling)}if(di(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ri=cs(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ri=null}}else ri=ni?cs(e.stateNode.nextSibling):null;return!0}function hi(){for(var e=ri;e;)e=cs(e.nextSibling)}function pi(){ri=ni=null,si=!1}function fi(e){null===ii?ii=[e]:ii.push(e)}var gi=v.ReactCurrentBatchConfig;function mi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var s=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=s.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function yi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function xi(e){return(0,e._init)(e._payload)}function bi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Mc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Dc(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===k?u(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===O&&xi(i)===t.type)?((r=s(t,n.props)).ref=mi(e,t,n),r.return=e,r):((r=Ic(n.type,n.key,n.props,null,e.mode,r)).ref=mi(e,t,n),r.return=e,r)}function d(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zc(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function u(e,t,n,r,i){return null===t||7!==t.tag?((t=Rc(n,e.mode,r,i)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Dc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Ic(t.type,t.key,t.props,null,e.mode,n)).ref=mi(e,null,t),n.return=e,n;case _:return(t=zc(t,e.mode,n)).return=e,t;case O:return h(e,(0,t._init)(t._payload),n)}if(te(t)||R(t))return(t=Rc(t,e.mode,n,null)).return=e,t;yi(e,t)}return null}function p(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==s?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===s?c(e,t,n,r):null;case _:return n.key===s?d(e,t,n,r):null;case O:return p(e,t,(s=n._init)(n._payload),r)}if(te(n)||R(n))return null!==s?null:u(e,t,n,r,null);yi(e,n)}return null}function f(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case _:return d(t,e=e.get(null===r.key?n:r.key)||null,r,s);case O:return f(e,t,n,(0,r._init)(r._payload),s)}if(te(r)||R(r))return u(t,e=e.get(n)||null,r,s,null);yi(t,r)}return null}function g(s,i,o,l){for(var c=null,d=null,u=i,g=i=0,m=null;null!==u&&g<o.length;g++){u.index>g?(m=u,u=null):m=u.sibling;var y=p(s,u,o[g],l);if(null===y){null===u&&(u=m);break}e&&u&&null===y.alternate&&t(s,u),i=a(y,i,g),null===d?c=y:d.sibling=y,d=y,u=m}if(g===o.length)return n(s,u),si&&Xs(s,g),c;if(null===u){for(;g<o.length;g++)null!==(u=h(s,o[g],l))&&(i=a(u,i,g),null===d?c=u:d.sibling=u,d=u);return si&&Xs(s,g),c}for(u=r(s,u);g<o.length;g++)null!==(m=f(u,s,g,o[g],l))&&(e&&null!==m.alternate&&u.delete(null===m.key?g:m.key),i=a(m,i,g),null===d?c=m:d.sibling=m,d=m);return e&&u.forEach(function(e){return t(s,e)}),si&&Xs(s,g),c}function m(s,o,l,c){var d=R(l);if("function"!==typeof d)throw Error(i(150));if(null==(l=d.call(l)))throw Error(i(151));for(var u=d=null,g=o,m=o=0,y=null,x=l.next();null!==g&&!x.done;m++,x=l.next()){g.index>m?(y=g,g=null):y=g.sibling;var b=p(s,g,x.value,c);if(null===b){null===g&&(g=y);break}e&&g&&null===b.alternate&&t(s,g),o=a(b,o,m),null===u?d=b:u.sibling=b,u=b,g=y}if(x.done)return n(s,g),si&&Xs(s,m),d;if(null===g){for(;!x.done;m++,x=l.next())null!==(x=h(s,x.value,c))&&(o=a(x,o,m),null===u?d=x:u.sibling=x,u=x);return si&&Xs(s,m),d}for(g=r(s,g);!x.done;m++,x=l.next())null!==(x=f(g,s,m,x.value,c))&&(e&&null!==x.alternate&&g.delete(null===x.key?m:x.key),o=a(x,o,m),null===u?d=x:u.sibling=x,u=x);return e&&g.forEach(function(e){return t(s,e)}),si&&Xs(s,m),d}return function e(r,i,a,l){if("object"===typeof a&&null!==a&&a.type===k&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,d=i;null!==d;){if(d.key===c){if((c=a.type)===k){if(7===d.tag){n(r,d.sibling),(i=s(d,a.props.children)).return=r,r=i;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===O&&xi(c)===d.type){n(r,d.sibling),(i=s(d,a.props)).ref=mi(r,d,a),i.return=r,r=i;break e}n(r,d);break}t(r,d),d=d.sibling}a.type===k?((i=Rc(a.props.children,r.mode,l,a.key)).return=r,r=i):((l=Ic(a.type,a.key,a.props,null,r.mode,l)).ref=mi(r,i,a),l.return=r,r=l)}return o(r);case _:e:{for(d=a.key;null!==i;){if(i.key===d){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(r,i.sibling),(i=s(i,a.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=zc(a,r.mode,l)).return=r,r=i}return o(r);case O:return e(r,i,(d=a._init)(a._payload),l)}if(te(a))return g(r,i,a,l);if(R(a))return m(r,i,a,l);yi(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==i&&6===i.tag?(n(r,i.sibling),(i=s(i,a)).return=r,r=i):(n(r,i),(i=Dc(a,r.mode,l)).return=r,r=i),o(r)):n(r,i)}}var vi=bi(!0),wi=bi(!1),_i=js(null),ki=null,ji=null,Si=null;function Ni(){Si=ji=ki=null}function Ci(e){var t=_i.current;Ss(_i),e._currentValue=t}function Ei(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ai(e,t){ki=e,Si=ji=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bo=!0),e.firstContext=null)}function Pi(e){var t=e._currentValue;if(Si!==e)if(e={context:e,memoizedValue:t,next:null},null===ji){if(null===ki)throw Error(i(308));ji=e,ki.dependencies={lanes:0,firstContext:e}}else ji=ji.next=e;return t}var Ti=null;function Oi(e){null===Ti?Ti=[e]:Ti.push(e)}function Mi(e,t,n,r){var s=t.interleaved;return null===s?(n.next=n,Oi(t)):(n.next=s.next,s.next=n),t.interleaved=n,Ii(e,r)}function Ii(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ri=!1;function Li(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Di(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function zi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fi(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&El)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Ii(e,n)}return null===(s=r.interleaved)?(t.next=t,Oi(r)):(t.next=s.next,s.next=t),r.interleaved=t,Ii(e,n)}function Ui(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,xt(e,n)}}function Bi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?s=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?s=i=t:i=i.next=t}else s=i=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Vi(e,t,n,r){var s=e.updateQueue;Ri=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==a&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(null!==i){var u=s.baseState;for(a=0,d=c=l=null,o=i;;){var h=o.lane,p=o.eventTime;if((r&h)===h){null!==d&&(d=d.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=e,g=o;switch(h=t,p=n,g.tag){case 1:if("function"===typeof(f=g.payload)){u=f.call(p,u,h);break e}u=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=g.payload)?f.call(p,u,h):f)||void 0===h)break e;u=D({},u,h);break e;case 2:Ri=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=s.effects)?s.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=p,l=u):d=d.next=p,a|=h;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(h=o).next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}if(null===d&&(l=u),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,null!==(t=s.shared.interleaved)){s=t;do{a|=s.lane,s=s.next}while(s!==t)}else null===i&&(s.shared.lanes=0);Ll|=a,e.lanes=a,e.memoizedState=u}}function Wi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(null!==s){if(r.callback=null,r=n,"function"!==typeof s)throw Error(i(191,s));s.call(r)}}}var Hi={},qi=js(Hi),Ki=js(Hi),$i=js(Hi);function Gi(e){if(e===Hi)throw Error(i(174));return e}function Ji(e,t){switch(Ns($i,t),Ns(Ki,e),Ns(qi,Hi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ss(qi),Ns(qi,t)}function Yi(){Ss(qi),Ss(Ki),Ss($i)}function Qi(e){Gi($i.current);var t=Gi(qi.current),n=le(t,e.type);t!==n&&(Ns(Ki,e),Ns(qi,n))}function Xi(e){Ki.current===e&&(Ss(qi),Ss(Ki))}var Zi=js(0);function ea(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ta=[];function na(){for(var e=0;e<ta.length;e++)ta[e]._workInProgressVersionPrimary=null;ta.length=0}var ra=v.ReactCurrentDispatcher,sa=v.ReactCurrentBatchConfig,ia=0,aa=null,oa=null,la=null,ca=!1,da=!1,ua=0,ha=0;function pa(){throw Error(i(321))}function fa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function ga(e,t,n,r,s,a){if(ia=a,aa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ra.current=null===e||null===e.memoizedState?Xa:Za,e=n(r,s),da){a=0;do{if(da=!1,ua=0,25<=a)throw Error(i(301));a+=1,la=oa=null,t.updateQueue=null,ra.current=eo,e=n(r,s)}while(da)}if(ra.current=Qa,t=null!==oa&&null!==oa.next,ia=0,la=oa=aa=null,ca=!1,t)throw Error(i(300));return e}function ma(){var e=0!==ua;return ua=0,e}function ya(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?aa.memoizedState=la=e:la=la.next=e,la}function xa(){if(null===oa){var e=aa.alternate;e=null!==e?e.memoizedState:null}else e=oa.next;var t=null===la?aa.memoizedState:la.next;if(null!==t)la=t,oa=e;else{if(null===e)throw Error(i(310));e={memoizedState:(oa=e).memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},null===la?aa.memoizedState=la=e:la=la.next=e}return la}function ba(e,t){return"function"===typeof t?t(e):t}function va(e){var t=xa(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=oa,s=r.baseQueue,a=n.pending;if(null!==a){if(null!==s){var o=s.next;s.next=a.next,a.next=o}r.baseQueue=s=a,n.pending=null}if(null!==s){a=s.next,r=r.baseState;var l=o=null,c=null,d=a;do{var u=d.lane;if((ia&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,aa.lanes|=u,Ll|=u}d=d.next}while(null!==d&&d!==a);null===c?o=r:c.next=l,or(r,t.memoizedState)||(bo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){s=e;do{a=s.lane,aa.lanes|=a,Ll|=a,s=s.next}while(s!==e)}else null===s&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wa(e){var t=xa(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,a=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{a=e(a,o.action),o=o.next}while(o!==s);or(a,t.memoizedState)||(bo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function _a(){}function ka(e,t){var n=aa,r=xa(),s=t(),a=!or(r.memoizedState,s);if(a&&(r.memoizedState=s,bo=!0),r=r.queue,Ra(Na.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,Pa(9,Sa.bind(null,n,r,s,t),void 0,null),null===Al)throw Error(i(349));0!==(30&ia)||ja(n,t,s)}return s}function ja(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Sa(e,t,n,r){t.value=n,t.getSnapshot=r,Ca(t)&&Ea(e)}function Na(e,t,n){return n(function(){Ca(t)&&Ea(e)})}function Ca(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function Ea(e){var t=Ii(e,1);null!==t&&nc(t,e,1,-1)}function Aa(e){var t=ya();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:e},t.queue=e,e=e.dispatch=$a.bind(null,aa,e),[t.memoizedState,e]}function Pa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ta(){return xa().memoizedState}function Oa(e,t,n,r){var s=ya();aa.flags|=e,s.memoizedState=Pa(1|t,n,void 0,void 0===r?null:r)}function Ma(e,t,n,r){var s=xa();r=void 0===r?null:r;var i=void 0;if(null!==oa){var a=oa.memoizedState;if(i=a.destroy,null!==r&&fa(r,a.deps))return void(s.memoizedState=Pa(t,n,i,r))}aa.flags|=e,s.memoizedState=Pa(1|t,n,i,r)}function Ia(e,t){return Oa(8390656,8,e,t)}function Ra(e,t){return Ma(2048,8,e,t)}function La(e,t){return Ma(4,2,e,t)}function Da(e,t){return Ma(4,4,e,t)}function za(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Fa(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ma(4,4,za.bind(null,t,e),n)}function Ua(){}function Ba(e,t){var n=xa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Va(e,t){var n=xa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Wa(e,t,n){return 0===(21&ia)?(e.baseState&&(e.baseState=!1,bo=!0),e.memoizedState=n):(or(n,t)||(n=gt(),aa.lanes|=n,Ll|=n,e.baseState=!0),t)}function Ha(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=sa.transition;sa.transition={};try{e(!1),t()}finally{bt=n,sa.transition=r}}function qa(){return xa().memoizedState}function Ka(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ga(e))Ja(t,n);else if(null!==(n=Mi(e,t,n,r))){nc(n,e,r,ec()),Ya(n,t,r)}}function $a(e,t,n){var r=tc(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ga(e))Ja(t,s);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,or(o,a)){var l=t.interleaved;return null===l?(s.next=s,Oi(t)):(s.next=l.next,l.next=s),void(t.interleaved=s)}}catch(c){}null!==(n=Mi(e,t,s,r))&&(nc(n,e,r,s=ec()),Ya(n,t,r))}}function Ga(e){var t=e.alternate;return e===aa||null!==t&&t===aa}function Ja(e,t){da=ca=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ya(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,xt(e,n)}}var Qa={readContext:Pi,useCallback:pa,useContext:pa,useEffect:pa,useImperativeHandle:pa,useInsertionEffect:pa,useLayoutEffect:pa,useMemo:pa,useReducer:pa,useRef:pa,useState:pa,useDebugValue:pa,useDeferredValue:pa,useTransition:pa,useMutableSource:pa,useSyncExternalStore:pa,useId:pa,unstable_isNewReconciler:!1},Xa={readContext:Pi,useCallback:function(e,t){return ya().memoizedState=[e,void 0===t?null:t],e},useContext:Pi,useEffect:Ia,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oa(4194308,4,za.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Oa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Oa(4,2,e,t)},useMemo:function(e,t){var n=ya();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ya();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ka.bind(null,aa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ya().memoizedState=e},useState:Aa,useDebugValue:Ua,useDeferredValue:function(e){return ya().memoizedState=e},useTransition:function(){var e=Aa(!1),t=e[0];return e=Ha.bind(null,e[1]),ya().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=aa,s=ya();if(si){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Al)throw Error(i(349));0!==(30&ia)||ja(r,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,Ia(Na.bind(null,r,a,e),[e]),r.flags|=2048,Pa(9,Sa.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=ya(),t=Al.identifierPrefix;if(si){var n=Qs;t=":"+t+"R"+(n=(Ys&~(1<<32-at(Ys)-1)).toString(32)+n),0<(n=ua++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ha++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Za={readContext:Pi,useCallback:Ba,useContext:Pi,useEffect:Ra,useImperativeHandle:Fa,useInsertionEffect:La,useLayoutEffect:Da,useMemo:Va,useReducer:va,useRef:Ta,useState:function(){return va(ba)},useDebugValue:Ua,useDeferredValue:function(e){return Wa(xa(),oa.memoizedState,e)},useTransition:function(){return[va(ba)[0],xa().memoizedState]},useMutableSource:_a,useSyncExternalStore:ka,useId:qa,unstable_isNewReconciler:!1},eo={readContext:Pi,useCallback:Ba,useContext:Pi,useEffect:Ra,useImperativeHandle:Fa,useInsertionEffect:La,useLayoutEffect:Da,useMemo:Va,useReducer:wa,useRef:Ta,useState:function(){return wa(ba)},useDebugValue:Ua,useDeferredValue:function(e){var t=xa();return null===oa?t.memoizedState=e:Wa(t,oa.memoizedState,e)},useTransition:function(){return[wa(ba)[0],xa().memoizedState]},useMutableSource:_a,useSyncExternalStore:ka,useId:qa,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=D({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:D({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),s=tc(e),i=zi(r,s);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Fi(e,i,s))&&(nc(t,e,s,r),Ui(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),s=tc(e),i=zi(r,s);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Fi(e,i,s))&&(nc(t,e,s,r),Ui(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),s=zi(n,r);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=Fi(e,s,r))&&(nc(t,e,r,n),Ui(t,e,r))}};function so(e,t,n,r,s,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(s,i))}function io(e,t,n){var r=!1,s=Cs,i=t.contextType;return"object"===typeof i&&null!==i?i=Pi(i):(s=Os(t)?Ps:Es.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ts(e,s):Cs),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function ao(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Li(e);var i=t.contextType;"object"===typeof i&&null!==i?s.context=Pi(i):(i=Os(t)?Ps:Es.current,s.context=Ts(e,i)),s.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(no(e,t,i,n),s.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(t=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&ro.enqueueReplaceState(s,s.state,null),Vi(e,n,s,r),s.state=e.memoizedState),"function"===typeof s.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var s=n}catch(i){s="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:s,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ho="function"===typeof WeakMap?WeakMap:Map;function po(e,t,n){(n=zi(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,ql=r),uo(0,t)},n}function fo(e,t,n){(n=zi(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){uo(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof r&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function go(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ho;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function mo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function yo(e,t,n,r,s){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=zi(-1,1)).tag=2,Fi(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var xo=v.ReactCurrentOwner,bo=!1;function vo(e,t,n,r){t.child=null===e?wi(t,null,n,r):vi(t,e.child,n,r)}function wo(e,t,n,r,s){n=n.render;var i=t.ref;return Ai(t,s),r=ga(e,t,n,r,i,s),n=ma(),null===e||bo?(si&&n&&ei(t),t.flags|=1,vo(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ho(e,t,s))}function _o(e,t,n,r,s){if(null===e){var i=n.type;return"function"!==typeof i||Oc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ic(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,ko(e,t,i,r,s))}if(i=e.child,0===(e.lanes&s)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Ho(e,t,s)}return t.flags|=1,(e=Mc(i,r)).ref=t.ref,e.return=t,t.child=e}function ko(e,t,n,r,s){if(null!==e){var i=e.memoizedProps;if(lr(i,r)&&e.ref===t.ref){if(bo=!1,t.pendingProps=r=i,0===(e.lanes&s))return t.lanes=e.lanes,Ho(e,t,s);0!==(131072&e.flags)&&(bo=!0)}}return No(e,t,n,r,s)}function jo(e,t,n){var r=t.pendingProps,s=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ns(Ml,Ol),Ol|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ns(Ml,Ol),Ol|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Ns(Ml,Ol),Ol|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Ns(Ml,Ol),Ol|=r;return vo(e,t,s,n),t.child}function So(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function No(e,t,n,r,s){var i=Os(n)?Ps:Es.current;return i=Ts(t,i),Ai(t,s),n=ga(e,t,n,r,i,s),r=ma(),null===e||bo?(si&&r&&ei(t),t.flags|=1,vo(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ho(e,t,s))}function Co(e,t,n,r,s){if(Os(n)){var i=!0;Ls(t)}else i=!1;if(Ai(t,s),null===t.stateNode)Wo(e,t),io(t,n,r),oo(t,n,r,s),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Pi(c):c=Ts(t,c=Os(n)?Ps:Es.current);var d=n.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof a.getSnapshotBeforeUpdate;u||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==c)&&ao(t,a,r,c),Ri=!1;var h=t.memoizedState;a.state=h,Vi(t,r,a,s),l=t.memoizedState,o!==r||h!==l||As.current||Ri?("function"===typeof d&&(no(t,n,d,r),l=t.memoizedState),(o=Ri||so(t,n,o,r,h,l,c))?(u||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Di(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),a.props=c,u=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Pi(l):l=Ts(t,l=Os(n)?Ps:Es.current);var p=n.getDerivedStateFromProps;(d="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==u||h!==l)&&ao(t,a,r,l),Ri=!1,h=t.memoizedState,a.state=h,Vi(t,r,a,s);var f=t.memoizedState;o!==u||h!==f||As.current||Ri?("function"===typeof p&&(no(t,n,p,r),f=t.memoizedState),(c=Ri||so(t,n,c,r,h,f,l)||!1)?(d||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Eo(e,t,n,r,i,s)}function Eo(e,t,n,r,s,i){So(e,t);var a=0!==(128&t.flags);if(!r&&!a)return s&&Ds(t,n,!1),Ho(e,t,i);r=t.stateNode,xo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=vi(t,e.child,null,i),t.child=vi(t,null,o,i)):vo(e,t,o,i),t.memoizedState=r.state,s&&Ds(t,n,!0),t.child}function Ao(e){var t=e.stateNode;t.pendingContext?Is(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Is(0,t.context,!1),Ji(e,t.containerInfo)}function Po(e,t,n,r,s){return pi(),fi(s),t.flags|=256,vo(e,t,n,r),t.child}var To,Oo,Mo,Io,Ro={dehydrated:null,treeContext:null,retryLane:0};function Lo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Do(e,t,n){var r,s=t.pendingProps,a=Zi.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ns(Zi,1&a),null===e)return ci(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=s.children,e=s.fallback,o?(s=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&s)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Lc(l,s,0,null),e=Rc(e,s,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Lo(n),t.memoizedState=Ro,e):zo(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,s,a,o){if(n)return 256&t.flags?(t.flags&=-257,Fo(e,t,o,r=co(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,s=t.mode,r=Lc({mode:"visible",children:r.children},s,0,null),(a=Rc(a,s,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&vi(t,e.child,null,o),t.child.memoizedState=Lo(o),t.memoizedState=Ro,a);if(0===(1&t.mode))return Fo(e,t,o,null);if("$!"===s.data){if(r=s.nextSibling&&s.nextSibling.dataset)var l=r.dgst;return r=l,Fo(e,t,o,r=co(a=Error(i(419)),r,void 0))}if(l=0!==(o&e.childLanes),bo||l){if(null!==(r=Al)){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(r.suspendedLanes|o))?0:s)&&s!==a.retryLane&&(a.retryLane=s,Ii(e,s),nc(r,e,s,-1))}return gc(),Fo(e,t,o,r=co(Error(i(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,ri=cs(s.nextSibling),ni=t,si=!0,ii=null,null!==e&&($s[Gs++]=Ys,$s[Gs++]=Qs,$s[Gs++]=Js,Ys=e.id,Qs=e.overflow,Js=t),t=zo(t,r.children),t.flags|=4096,t)}(e,t,l,s,r,a,n);if(o){o=s.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:s.children};return 0===(1&l)&&t.child!==a?((s=t.child).childLanes=0,s.pendingProps=c,t.deletions=null):(s=Mc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=Mc(r,o):(o=Rc(o,l,n,null)).flags|=2,o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,l=null===(l=e.child.memoizedState)?Lo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Ro,s}return e=(o=e.child).sibling,s=Mc(o,{mode:"visible",children:s.children}),0===(1&t.mode)&&(s.lanes=n),s.return=t,s.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function zo(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fo(e,t,n,r){return null!==r&&fi(r),vi(t,e.child,null,n),(e=zo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Uo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ei(e.return,t,n)}function Bo(e,t,n,r,s){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Vo(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(vo(e,t,r.children,n),0!==(2&(r=Zi.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Uo(e,n,t);else if(19===e.tag)Uo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ns(Zi,r),0===(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===ea(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Bo(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===ea(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Bo(t,!0,n,null,i);break;case"together":Bo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ho(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Mc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Mc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function qo(e,t){if(!si)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ko(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=14680064&s.subtreeFlags,r|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function $o(e,t,n){var r=t.pendingProps;switch(ti(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ko(t),null;case 1:case 17:return Os(t.type)&&Ms(),Ko(t),null;case 3:return r=t.stateNode,Yi(),Ss(As),Ss(Es),na(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ui(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ii&&(ac(ii),ii=null))),Oo(e,t),Ko(t),null;case 5:Xi(t);var s=Gi($i.current);if(n=t.type,null!==e&&null!=t.stateNode)Mo(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Ko(t),null}if(e=Gi(qi.current),ui(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[hs]=t,r[ps]=a,e=0!==(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(s=0;s<Rr.length;s++)Fr(Rr[s],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":Y(r,a),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Fr("invalid",r);break;case"textarea":se(r,a),Fr("invalid",r)}for(var l in xe(n,a),s=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Xr(r.textContent,c,e),s=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Xr(r.textContent,c,e),s=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Fr("scroll",r)}switch(n){case"input":K(r),Z(r,a,!0);break;case"textarea":K(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=s,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hs]=t,e[ps]=r,To(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),s=r;break;case"iframe":case"object":case"embed":Fr("load",e),s=r;break;case"video":case"audio":for(s=0;s<Rr.length;s++)Fr(Rr[s],e);s=r;break;case"source":Fr("error",e),s=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),s=r;break;case"details":Fr("toggle",e),s=r;break;case"input":Y(e,r),s=J(e,r),Fr("invalid",e);break;case"option":default:s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=D({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":se(e,r),s=re(e,r),Fr("invalid",e)}for(a in xe(n,s),c=s)if(c.hasOwnProperty(a)){var d=c[a];"style"===a?me(e,d):"dangerouslySetInnerHTML"===a?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===a?"string"===typeof d?("textarea"!==n||""!==d)&&he(e,d):"number"===typeof d&&he(e,""+d):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=d&&"onScroll"===a&&Fr("scroll",e):null!=d&&b(e,a,d,l))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ko(t),null;case 6:if(e&&null!=t.stateNode)Io(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=Gi($i.current),Gi(qi.current),ui(t)){if(r=t.stateNode,n=t.memoizedProps,r[hs]=t,(a=r.nodeValue!==n)&&null!==(e=ni))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hs]=t,t.stateNode=r}return Ko(t),null;case 13:if(Ss(Zi),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(si&&null!==ri&&0!==(1&t.mode)&&0===(128&t.flags))hi(),pi(),t.flags|=98560,a=!1;else if(a=ui(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[hs]=t}else pi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ko(t),a=!1}else null!==ii&&(ac(ii),ii=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zi.current)?0===Il&&(Il=3):gc())),null!==t.updateQueue&&(t.flags|=4),Ko(t),null);case 4:return Yi(),Oo(e,t),null===e&&Vr(t.stateNode.containerInfo),Ko(t),null;case 10:return Ci(t.type._context),Ko(t),null;case 19:if(Ss(Zi),null===(a=t.memoizedState))return Ko(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)qo(a,!1);else{if(0!==Il||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ea(e))){for(t.flags|=128,qo(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ns(Zi,1&Zi.current|2),t.child}e=e.sibling}null!==a.tail&&Qe()>Vl&&(t.flags|=128,r=!0,qo(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ea(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),qo(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!si)return Ko(t),null}else 2*Qe()-a.renderingStartTime>Vl&&1073741824!==n&&(t.flags|=128,r=!0,qo(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Qe(),t.sibling=null,n=Zi.current,Ns(Zi,r?1&n|2:1&n),t):(Ko(t),null);case 22:case 23:return uc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ol)&&(Ko(t),6&t.subtreeFlags&&(t.flags|=8192)):Ko(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Go(e,t){switch(ti(t),t.tag){case 1:return Os(t.type)&&Ms(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Yi(),Ss(As),Ss(Es),na(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xi(t),null;case 13:if(Ss(Zi),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));pi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ss(Zi),null;case 4:return Yi(),null;case 10:return Ci(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}To=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Oo=function(){},Mo=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Gi(qi.current);var i,a=null;switch(n){case"input":s=J(e,s),r=J(e,r),a=[];break;case"select":s=D({},s,{value:void 0}),r=D({},r,{value:void 0}),a=[];break;case"textarea":s=re(e,s),r=re(e,r),a=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(d in xe(n,r),n=null,s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&null!=s[d])if("style"===d){var l=s[d];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(o.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in r){var c=r[d];if(l=null!=s?s[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(a||(a=[]),a.push(d,n)),n=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(o.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Fr("scroll",e),a||l===c||(a=[])):(a=a||[]).push(d,c))}n&&(a=a||[]).push("style",n);var d=a;(t.updateQueue=d)&&(t.flags|=4)}},Io=function(e,t,n,r){n!==r&&(t.flags|=4)};var Jo=!1,Yo=!1,Qo="function"===typeof WeakSet?WeakSet:Set,Xo=null;function Zo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){jc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){jc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,void 0!==i&&el(t,n,i)}s=s.next}while(s!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function il(e){var t=e.alternate;null!==t&&(e.alternate=null,il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hs],delete t[ps],delete t[gs],delete t[ms],delete t[ys])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var dl=null,ul=!1;function hl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(st,n)}catch(o){}switch(n.tag){case 5:Yo||Zo(n,t);case 6:var r=dl,s=ul;dl=null,hl(e,t,n),ul=s,null!==(dl=r)&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?ls(e.parentNode,n):1===e.nodeType&&ls(e,n),Vt(e)):ls(dl,n.stateNode));break;case 4:r=dl,s=ul,dl=n.stateNode.containerInfo,ul=!0,hl(e,t,n),dl=r,ul=s;break;case 0:case 11:case 14:case 15:if(!Yo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&el(n,t,a),s=s.next}while(s!==r)}hl(e,t,n);break;case 1:if(!Yo&&(Zo(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){jc(n,t,o)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Yo=(r=Yo)||null!==n.memoizedState,hl(e,t,n),Yo=r):hl(e,t,n);break;default:hl(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qo),t.forEach(function(t){var r=Ec.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,ul=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===dl)throw Error(i(160));pl(a,o,s),dl=null,ul=!1;var c=s.alternate;null!==c&&(c.return=null),s.return=null}catch(d){jc(s,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ml(t,e),t=t.sibling}function ml(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),yl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(m){jc(e,e.return,m)}try{nl(5,e,e.return)}catch(m){jc(e,e.return,m)}}break;case 1:gl(t,e),yl(e),512&r&&null!==n&&Zo(n,n.return);break;case 5:if(gl(t,e),yl(e),512&r&&null!==n&&Zo(n,n.return),32&e.flags){var s=e.stateNode;try{he(s,"")}catch(m){jc(e,e.return,m)}}if(4&r&&null!=(s=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&Q(s,a),be(l,o);var d=be(l,a);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];"style"===u?me(s,h):"dangerouslySetInnerHTML"===u?ue(s,h):"children"===u?he(s,h):b(s,u,h,d)}switch(l){case"input":X(s,a);break;case"textarea":ie(s,a);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var f=a.value;null!=f?ne(s,!!a.multiple,f,!1):p!==!!a.multiple&&(null!=a.defaultValue?ne(s,!!a.multiple,a.defaultValue,!0):ne(s,!!a.multiple,a.multiple?[]:"",!1))}s[ps]=a}catch(m){jc(e,e.return,m)}}break;case 6:if(gl(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(i(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(m){jc(e,e.return,m)}}break;case 3:if(gl(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(m){jc(e,e.return,m)}break;case 4:default:gl(t,e),yl(e);break;case 13:gl(t,e),yl(e),8192&(s=e.child).flags&&(a=null!==s.memoizedState,s.stateNode.isHidden=a,!a||null!==s.alternate&&null!==s.alternate.memoizedState||(Bl=Qe())),4&r&&fl(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Yo=(d=Yo)||u,gl(t,e),Yo=d):gl(t,e),yl(e),8192&r){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Xo=e,u=e.child;null!==u;){for(h=Xo=u;null!==Xo;){switch(f=(p=Xo).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:Zo(p,p.return);var g=p.stateNode;if("function"===typeof g.componentWillUnmount){r=p,n=p.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){jc(r,n,m)}}break;case 5:Zo(p,p.return);break;case 22:if(null!==p.memoizedState){wl(h);continue}}null!==f?(f.return=p,Xo=f):wl(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{s=h.stateNode,d?"function"===typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",o))}catch(m){jc(e,e.return,m)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(m){jc(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:gl(t,e),yl(e),4&r&&fl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var s=r.stateNode;32&r.flags&&(he(s,""),r.flags&=-33),cl(e,ol(e),s);break;case 3:case 4:var a=r.stateNode.containerInfo;ll(e,ol(e),a);break;default:throw Error(i(161))}}catch(o){jc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function xl(e,t,n){Xo=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Xo;){var s=Xo,i=s.child;if(22===s.tag&&r){var a=null!==s.memoizedState||Jo;if(!a){var o=s.alternate,l=null!==o&&null!==o.memoizedState||Yo;o=Jo;var c=Yo;if(Jo=a,(Yo=l)&&!c)for(Xo=s;null!==Xo;)l=(a=Xo).child,22===a.tag&&null!==a.memoizedState?_l(s):null!==l?(l.return=a,Xo=l):_l(s);for(;null!==i;)Xo=i,bl(i,t,n),i=i.sibling;Xo=s,Jo=o,Yo=c}vl(e)}else 0!==(8772&s.subtreeFlags)&&null!==i?(i.return=s,Xo=i):vl(e)}}function vl(e){for(;null!==Xo;){var t=Xo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Yo||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Yo)if(null===n)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Wi(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Wi(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Vt(h)}}}break;default:throw Error(i(163))}Yo||512&t.flags&&sl(t)}catch(p){jc(t,t.return,p)}}if(t===e){Xo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xo=n;break}Xo=t.return}}function wl(e){for(;null!==Xo;){var t=Xo;if(t===e){Xo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xo=n;break}Xo=t.return}}function _l(e){for(;null!==Xo;){var t=Xo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){jc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var s=t.return;try{r.componentDidMount()}catch(l){jc(t,s,l)}}var i=t.return;try{sl(t)}catch(l){jc(t,i,l)}break;case 5:var a=t.return;try{sl(t)}catch(l){jc(t,a,l)}}}catch(l){jc(t,t.return,l)}if(t===e){Xo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Xo=o;break}Xo=t.return}}var kl,jl=Math.ceil,Sl=v.ReactCurrentDispatcher,Nl=v.ReactCurrentOwner,Cl=v.ReactCurrentBatchConfig,El=0,Al=null,Pl=null,Tl=0,Ol=0,Ml=js(0),Il=0,Rl=null,Ll=0,Dl=0,zl=0,Fl=null,Ul=null,Bl=0,Vl=1/0,Wl=null,Hl=!1,ql=null,Kl=null,$l=!1,Gl=null,Jl=0,Yl=0,Ql=null,Xl=-1,Zl=0;function ec(){return 0!==(6&El)?Qe():-1!==Xl?Xl:Xl=Qe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&El)&&0!==Tl?Tl&-Tl:null!==gi.transition?(0===Zl&&(Zl=gt()),Zl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function nc(e,t,n,r){if(50<Yl)throw Yl=0,Ql=null,Error(i(185));yt(e,n,r),0!==(2&El)&&e===Al||(e===Al&&(0===(2&El)&&(Dl|=n),4===Il&&oc(e,Tl)),rc(e,r),1===n&&0===El&&0===(1&t.mode)&&(Vl=Qe()+500,Fs&&Vs()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-at(i),o=1<<a,l=s[a];-1===l?0!==(o&n)&&0===(o&r)||(s[a]=pt(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}}(e,t);var r=ht(e,e===Al?Tl:0);if(0===r)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){Fs=!0,Bs(e)}(lc.bind(null,e)):Bs(lc.bind(null,e)),as(function(){0===(6&El)&&Vs()}),n=null;else{switch(vt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ac(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if(Xl=-1,Zl=0,0!==(6&El))throw Error(i(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ht(e,e===Al?Tl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var s=El;El|=2;var a=fc();for(Al===e&&Tl===t||(Wl=null,Vl=Qe()+500,hc(e,t));;)try{xc();break}catch(l){pc(e,l)}Ni(),Sl.current=a,El=s,null!==Pl?t=0:(Al=null,Tl=0,t=Il)}if(0!==t){if(2===t&&(0!==(s=ft(e))&&(r=s,t=ic(e,s))),1===t)throw n=Rl,hc(e,0),oc(e,r),rc(e,Qe()),n;if(6===t)oc(e,r);else{if(s=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!or(i(),s))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=mc(e,r))&&(0!==(a=ft(e))&&(r=a,t=ic(e,a))),1===t))throw n=Rl,hc(e,0),oc(e,r),rc(e,Qe()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:wc(e,Ul,Wl);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=Bl+500-Qe())){if(0!==ht(e,0))break;if(((s=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=rs(wc.bind(null,e,Ul,Wl),t);break}wc(e,Ul,Wl);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-at(r);a=1<<o,(o=t[o])>s&&(s=o),r&=~a}if(r=s,10<(r=(120>(r=Qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*jl(r/1960))-r)){e.timeoutHandle=rs(wc.bind(null,e,Ul,Wl),r);break}wc(e,Ul,Wl);break;default:throw Error(i(329))}}}return rc(e,Qe()),e.callbackNode===n?sc.bind(null,e):null}function ic(e,t){var n=Fl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=Ul,Ul=n,null!==t&&ac(t)),e}function ac(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function oc(e,t){for(t&=~zl,t&=~Dl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&El))throw Error(i(327));_c();var t=ht(e,0);if(0===(1&t))return rc(e,Qe()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=ic(e,r))}if(1===n)throw n=Rl,hc(e,0),oc(e,t),rc(e,Qe()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Ul,Wl),rc(e,Qe()),null}function cc(e,t){var n=El;El|=1;try{return e(t)}finally{0===(El=n)&&(Vl=Qe()+500,Fs&&Vs())}}function dc(e){null!==Gl&&0===Gl.tag&&0===(6&El)&&_c();var t=El;El|=1;var n=Cl.transition,r=bt;try{if(Cl.transition=null,bt=1,e)return e()}finally{bt=r,Cl.transition=n,0===(6&(El=t))&&Vs()}}function uc(){Ol=Ml.current,Ss(Ml)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ss(n)),null!==Pl)for(n=Pl.return;null!==n;){var r=n;switch(ti(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ms();break;case 3:Yi(),Ss(As),Ss(Es),na();break;case 5:Xi(r);break;case 4:Yi();break;case 13:case 19:Ss(Zi);break;case 10:Ci(r.type._context);break;case 22:case 23:uc()}n=n.return}if(Al=e,Pl=e=Mc(e.current,null),Tl=Ol=t,Il=0,Rl=null,zl=Dl=Ll=0,Ul=Fl=null,null!==Ti){for(t=0;t<Ti.length;t++)if(null!==(r=(n=Ti[t]).interleaved)){n.interleaved=null;var s=r.next,i=n.pending;if(null!==i){var a=i.next;i.next=s,r.next=a}n.pending=r}Ti=null}return e}function pc(e,t){for(;;){var n=Pl;try{if(Ni(),ra.current=Qa,ca){for(var r=aa.memoizedState;null!==r;){var s=r.queue;null!==s&&(s.pending=null),r=r.next}ca=!1}if(ia=0,la=oa=aa=null,da=!1,ua=0,Nl.current=null,null===n||null===n.return){Il=1,Rl=t,Pl=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Tl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=l,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=mo(o);if(null!==f){f.flags&=-257,yo(f,o,l,0,t),1&f.mode&&go(a,d,t),c=d;var g=(t=f).updateQueue;if(null===g){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}if(0===(1&t)){go(a,d,t),gc();break e}c=Error(i(426))}else if(si&&1&l.mode){var y=mo(o);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),yo(y,o,l,0,t),fi(lo(c,l));break e}}a=c=lo(c,l),4!==Il&&(Il=2),null===Fl?Fl=[a]:Fl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Bi(a,po(0,c,t));break e;case 1:l=c;var x=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof x.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Kl||!Kl.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Bi(a,fo(a,l,t));break e}}a=a.return}while(null!==a)}vc(n)}catch(v){t=v,Pl===n&&null!==n&&(Pl=n=n.return);continue}break}}function fc(){var e=Sl.current;return Sl.current=Qa,null===e?Qa:e}function gc(){0!==Il&&3!==Il&&2!==Il||(Il=4),null===Al||0===(268435455&Ll)&&0===(268435455&Dl)||oc(Al,Tl)}function mc(e,t){var n=El;El|=2;var r=fc();for(Al===e&&Tl===t||(Wl=null,hc(e,t));;)try{yc();break}catch(s){pc(e,s)}if(Ni(),El=n,Sl.current=r,null!==Pl)throw Error(i(261));return Al=null,Tl=0,Il}function yc(){for(;null!==Pl;)bc(Pl)}function xc(){for(;null!==Pl&&!Je();)bc(Pl)}function bc(e){var t=kl(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?vc(e):Pl=t,Nl.current=null}function vc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=$o(n,t,Ol)))return void(Pl=n)}else{if(null!==(n=Go(n,t)))return n.flags&=32767,void(Pl=n);if(null===e)return Il=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Il&&(Il=5)}function wc(e,t,n){var r=bt,s=Cl.transition;try{Cl.transition=null,bt=1,function(e,t,n,r){do{_c()}while(null!==Gl);if(0!==(6&El))throw Error(i(327));n=e.finishedWork;var s=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-at(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}(e,a),e===Al&&(Pl=Al=null,Tl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||$l||($l=!0,Ac(tt,function(){return _c(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Cl.transition,Cl.transition=null;var o=bt;bt=1;var l=El;El|=4,Nl.current=null,function(e,t){if(es=Ht,pr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(w){n=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==s&&3!==h.nodeType||(l=o+s),h!==a||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++d===s&&(l=o),p===a&&++u===r&&(c=o),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ts={focusedElem:e,selectionRange:n},Ht=!1,Xo=t;null!==Xo;)if(e=(t=Xo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xo=e;else for(;null!==Xo;){t=Xo;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,y=g.memoizedState,x=t.stateNode,b=x.getSnapshotBeforeUpdate(t.elementType===t.type?m:to(t.type,m),y);x.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var v=t.stateNode.containerInfo;1===v.nodeType?v.textContent="":9===v.nodeType&&v.documentElement&&v.removeChild(v.documentElement);break;default:throw Error(i(163))}}catch(w){jc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Xo=e;break}Xo=t.return}g=tl,tl=!1}(e,n),ml(n,e),fr(ts),Ht=!!es,ts=es=null,e.current=n,xl(n,e,s),Ye(),El=l,bt=o,Cl.transition=a}else e.current=n;if($l&&($l=!1,Gl=e,Jl=s),a=e.pendingLanes,0===a&&(Kl=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(st,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Hl)throw Hl=!1,e=ql,ql=null,e;0!==(1&Jl)&&0!==e.tag&&_c(),a=e.pendingLanes,0!==(1&a)?e===Ql?Yl++:(Yl=0,Ql=e):Yl=0,Vs()}(e,t,n,r)}finally{Cl.transition=s,bt=r}return null}function _c(){if(null!==Gl){var e=vt(Jl),t=Cl.transition,n=bt;try{if(Cl.transition=null,bt=16>e?16:e,null===Gl)var r=!1;else{if(e=Gl,Gl=null,Jl=0,0!==(6&El))throw Error(i(331));var s=El;for(El|=4,Xo=e.current;null!==Xo;){var a=Xo,o=a.child;if(0!==(16&Xo.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(Xo=d;null!==Xo;){var u=Xo;switch(u.tag){case 0:case 11:case 15:nl(8,u,a)}var h=u.child;if(null!==h)h.return=u,Xo=h;else for(;null!==Xo;){var p=(u=Xo).sibling,f=u.return;if(il(u),u===d){Xo=null;break}if(null!==p){p.return=f,Xo=p;break}Xo=f}}}var g=a.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Xo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Xo=o;else e:for(;null!==Xo;){if(0!==(2048&(a=Xo).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var x=a.sibling;if(null!==x){x.return=a.return,Xo=x;break e}Xo=a.return}}var b=e.current;for(Xo=b;null!==Xo;){var v=(o=Xo).child;if(0!==(2064&o.subtreeFlags)&&null!==v)v.return=o,Xo=v;else e:for(o=b;null!==Xo;){if(0!==(2048&(l=Xo).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(_){jc(l,l.return,_)}if(l===o){Xo=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Xo=w;break e}Xo=l.return}}if(El=s,Vs(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(st,e)}catch(_){}r=!0}return r}finally{bt=n,Cl.transition=t}}return!1}function kc(e,t,n){e=Fi(e,t=po(0,t=lo(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function jc(e,t,n){if(3===e.tag)kc(e,e,n);else for(;null!==t;){if(3===t.tag){kc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Kl||!Kl.has(r))){t=Fi(t,e=fo(t,e=lo(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Al===e&&(Tl&n)===n&&(4===Il||3===Il&&(130023424&Tl)===Tl&&500>Qe()-Bl?hc(e,0):zl|=n),rc(e,t)}function Nc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var n=ec();null!==(e=Ii(e,t))&&(yt(e,t,n),rc(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Nc(e,n)}function Ec(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),Nc(e,n)}function Ac(e,t){return $e(e,t)}function Pc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tc(e,t,n,r){return new Pc(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Mc(e,t){var n=e.alternate;return null===n?((n=Tc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ic(e,t,n,r,s,a){var o=2;if(r=e,"function"===typeof e)Oc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case k:return Rc(n.children,s,a,t);case j:o=8,s|=8;break;case S:return(e=Tc(12,n,t,2|s)).elementType=S,e.lanes=a,e;case A:return(e=Tc(13,n,t,s)).elementType=A,e.lanes=a,e;case P:return(e=Tc(19,n,t,s)).elementType=P,e.lanes=a,e;case M:return Lc(n,s,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case N:o=10;break e;case C:o=9;break e;case E:o=11;break e;case T:o=14;break e;case O:o=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Tc(o,n,t,s)).elementType=e,t.type=r,t.lanes=a,t}function Rc(e,t,n,r){return(e=Tc(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=Tc(22,e,r,t)).elementType=M,e.lanes=n,e.stateNode={isHidden:!1},e}function Dc(e,t,n){return(e=Tc(6,e,null,t)).lanes=n,e}function zc(e,t,n){return(t=Tc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fc(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,r,s,i,a,o,l){return e=new Fc(e,t,n,o,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Tc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Li(i),e}function Bc(e){if(!e)return Cs;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Os(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Os(n))return Rs(e,n,t)}return t}function Vc(e,t,n,r,s,i,a,o,l){return(e=Uc(n,r,!0,e,0,i,0,o,l)).context=Bc(null),n=e.current,(i=zi(r=ec(),s=tc(n))).callback=void 0!==t&&null!==t?t:null,Fi(n,i,s),e.current.lanes=s,yt(e,s,r),rc(e,r),e}function Wc(e,t,n,r){var s=t.current,i=ec(),a=tc(s);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=zi(i,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Fi(s,t,a))&&(nc(e,s,a,i),Ui(e,s,a)),a}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){qc(e,t),(e=e.alternate)&&qc(e,t)}kl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||As.current)bo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bo=!1,function(e,t,n){switch(t.tag){case 3:Ao(t),pi();break;case 5:Qi(t);break;case 1:Os(t.type)&&Ls(t);break;case 4:Ji(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Ns(_i,r._currentValue),r._currentValue=s;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ns(Zi,1&Zi.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Do(e,t,n):(Ns(Zi,1&Zi.current),null!==(e=Ho(e,t,n))?e.sibling:null);Ns(Zi,1&Zi.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Vo(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ns(Zi,Zi.current),r)break;return null;case 22:case 23:return t.lanes=0,jo(e,t,n)}return Ho(e,t,n)}(e,t,n);bo=0!==(131072&e.flags)}else bo=!1,si&&0!==(1048576&t.flags)&&Zs(t,Ks,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wo(e,t),e=t.pendingProps;var s=Ts(t,Es.current);Ai(t,n),s=ga(null,t,r,e,s,n);var a=ma();return t.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Os(r)?(a=!0,Ls(t)):a=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,Li(t),s.updater=ro,t.stateNode=s,s._reactInternals=t,oo(t,r,e,n),t=Eo(null,t,r,!0,a,n)):(t.tag=0,si&&a&&ei(t),vo(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wo(e,t),e=t.pendingProps,r=(s=r._init)(r._payload),t.type=r,s=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===E)return 11;if(e===T)return 14}return 2}(r),e=to(r,e),s){case 0:t=No(null,t,r,e,n);break e;case 1:t=Co(null,t,r,e,n);break e;case 11:t=wo(null,t,r,e,n);break e;case 14:t=_o(null,t,r,to(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,No(e,t,r,s=t.elementType===r?s:to(r,s),n);case 1:return r=t.type,s=t.pendingProps,Co(e,t,r,s=t.elementType===r?s:to(r,s),n);case 3:e:{if(Ao(t),null===e)throw Error(i(387));r=t.pendingProps,s=(a=t.memoizedState).element,Di(e,t),Vi(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Po(e,t,r,n,s=lo(Error(i(423)),t));break e}if(r!==s){t=Po(e,t,r,n,s=lo(Error(i(424)),t));break e}for(ri=cs(t.stateNode.containerInfo.firstChild),ni=t,si=!0,ii=null,n=wi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pi(),r===s){t=Ho(e,t,n);break e}vo(e,t,r,n)}t=t.child}return t;case 5:return Qi(t),null===e&&ci(t),r=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,o=s.children,ns(r,s)?o=null:null!==a&&ns(r,a)&&(t.flags|=32),So(e,t),vo(e,t,o,n),t.child;case 6:return null===e&&ci(t),null;case 13:return Do(e,t,n);case 4:return Ji(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=vi(t,null,r,n):vo(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,wo(e,t,r,s=t.elementType===r?s:to(r,s),n);case 7:return vo(e,t,t.pendingProps,n),t.child;case 8:case 12:return vo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,a=t.memoizedProps,o=s.value,Ns(_i,r._currentValue),r._currentValue=o,null!==a)if(or(a.value,o)){if(a.children===s.children&&!As.current){t=Ho(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=zi(-1,n&-n)).tag=2;var d=a.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Ei(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(i(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ei(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}vo(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Ai(t,n),r=r(s=Pi(s)),t.flags|=1,vo(e,t,r,n),t.child;case 14:return s=to(r=t.type,t.pendingProps),_o(e,t,r,s=to(r.type,s),n);case 15:return ko(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:to(r,s),Wo(e,t),t.tag=1,Os(r)?(e=!0,Ls(t)):e=!1,Ai(t,n),io(t,r,s),oo(t,r,s,n),Eo(null,t,r,!0,e,n);case 19:return Vo(e,t,n);case 22:return jo(e,t,n)}throw Error(i(156,t.tag))};var $c="function"===typeof reportError?reportError:function(e){console.error(e)};function Gc(e){this._internalRoot=e}function Jc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function Zc(e,t,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if("function"===typeof s){var o=s;s=function(){var e=Hc(a);o.call(e)}}Wc(t,a,e,s)}else a=function(e,t,n,r,s){if(s){if("function"===typeof r){var i=r;r=function(){var e=Hc(a);i.call(e)}}var a=Vc(t,r,e,0,null,!1,0,"",Xc);return e._reactRootContainer=a,e[fs]=a.current,Vr(8===e.nodeType?e.parentNode:e),dc(),a}for(;s=e.lastChild;)e.removeChild(s);if("function"===typeof r){var o=r;r=function(){var e=Hc(l);o.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=l,e[fs]=l.current,Vr(8===e.nodeType?e.parentNode:e),dc(function(){Wc(t,l,n,r)}),l}(n,t,e,s,r);return Hc(a)}Jc.prototype.render=Gc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Wc(e,t,null,null)},Jc.prototype.unmount=Gc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){Wc(null,e,null,null)}),t[fs]=null}},Jc.prototype.unstable_scheduleHydration=function(e){if(e){var t=jt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Mt.length&&0!==t&&t<Mt[n].priority;n++);Mt.splice(n,0,e),0===n&&Dt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(xt(t,1|n),rc(t,Qe()),0===(6&El)&&(Vl=Qe()+500,Vs()))}break;case 13:dc(function(){var t=Ii(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Kc(e,1)}},_t=function(e){if(13===e.tag){var t=Ii(e,134217728);if(null!==t)nc(t,e,134217728,ec());Kc(e,134217728)}},kt=function(e){if(13===e.tag){var t=tc(e),n=Ii(e,t);if(null!==n)nc(n,e,t,ec());Kc(e,t)}},jt=function(){return bt},St=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},_e=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=ws(r);if(!s)throw Error(i(90));$(r),X(r,s)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ee=cc,Ae=dc;var ed={usingClientEntryPoint:!1,Events:[bs,vs,ws,Ne,Ce,cc]},td={findFiberByHostInstance:xs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:v.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rd.isDisabled&&rd.supportsFiber)try{st=rd.inject(nd),it=rd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Yc(e))throw Error(i(299));var n=!1,r="",s=$c;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,r,s),e[fs]=t.current,Vr(8===e.nodeType?e.parentNode:e),new Gc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!Qc(t))throw Error(i(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,s=!1,a="",o=$c;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Vc(t,null,e,1,null!=n?n:null,s,0,a,o),e[fs]=t.current,Vr(e),r)for(e=0;e<r.length;e++)s=(s=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Jc(t)},t.render=function(e,t,n){if(!Qc(t))throw Error(i(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Qc(e))throw Error(i(40));return!!e._reactRootContainer&&(dc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[fs]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Qc(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},3930:function(e,t,n){!function(){var t;e.exports=(t=n(4488),n(6368),n(4220),function(){var e=t,n=e.lib,r=n.Base,s=n.WordArray,i=e.algo,a=i.SHA256,o=i.HMAC,l=i.PBKDF2=r.extend({cfg:r.extend({keySize:4,hasher:a,iterations:25e4}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,r=o.create(n.hasher,e),i=s.create(),a=s.create([1]),l=i.words,c=a.words,d=n.keySize,u=n.iterations;l.length<d;){var h=r.update(t).finalize(a);r.reset();for(var p=h.words,f=p.length,g=h,m=1;m<u;m++){g=r.finalize(g),r.reset();for(var y=g.words,x=0;x<f;x++)p[x]^=y[x]}i.concat(h),c[0]++}return i.sigBytes=4*d,i}});e.PBKDF2=function(e,t,n){return l.create(n).compute(e,t)}}(),t.PBKDF2)}()},4087:function(e,t,n){!function(){var t;e.exports=(t=n(4488),n(2238),t.pad.NoPadding={pad:function(){},unpad:function(){}},t.pad.NoPadding)}()},4199:function(e,t,n){!function(){var t;e.exports=(t=n(4488),function(e){var n=t,r=n.lib,s=r.WordArray,i=r.Hasher,a=n.algo,o=[];!function(){for(var t=0;t<64;t++)o[t]=4294967296*e.abs(e.sin(t+1))|0}();var l=a.MD5=i.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,s=e[r];e[r]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}var i=this._hash.words,a=e[t+0],l=e[t+1],p=e[t+2],f=e[t+3],g=e[t+4],m=e[t+5],y=e[t+6],x=e[t+7],b=e[t+8],v=e[t+9],w=e[t+10],_=e[t+11],k=e[t+12],j=e[t+13],S=e[t+14],N=e[t+15],C=i[0],E=i[1],A=i[2],P=i[3];C=c(C,E,A,P,a,7,o[0]),P=c(P,C,E,A,l,12,o[1]),A=c(A,P,C,E,p,17,o[2]),E=c(E,A,P,C,f,22,o[3]),C=c(C,E,A,P,g,7,o[4]),P=c(P,C,E,A,m,12,o[5]),A=c(A,P,C,E,y,17,o[6]),E=c(E,A,P,C,x,22,o[7]),C=c(C,E,A,P,b,7,o[8]),P=c(P,C,E,A,v,12,o[9]),A=c(A,P,C,E,w,17,o[10]),E=c(E,A,P,C,_,22,o[11]),C=c(C,E,A,P,k,7,o[12]),P=c(P,C,E,A,j,12,o[13]),A=c(A,P,C,E,S,17,o[14]),C=d(C,E=c(E,A,P,C,N,22,o[15]),A,P,l,5,o[16]),P=d(P,C,E,A,y,9,o[17]),A=d(A,P,C,E,_,14,o[18]),E=d(E,A,P,C,a,20,o[19]),C=d(C,E,A,P,m,5,o[20]),P=d(P,C,E,A,w,9,o[21]),A=d(A,P,C,E,N,14,o[22]),E=d(E,A,P,C,g,20,o[23]),C=d(C,E,A,P,v,5,o[24]),P=d(P,C,E,A,S,9,o[25]),A=d(A,P,C,E,f,14,o[26]),E=d(E,A,P,C,b,20,o[27]),C=d(C,E,A,P,j,5,o[28]),P=d(P,C,E,A,p,9,o[29]),A=d(A,P,C,E,x,14,o[30]),C=u(C,E=d(E,A,P,C,k,20,o[31]),A,P,m,4,o[32]),P=u(P,C,E,A,b,11,o[33]),A=u(A,P,C,E,_,16,o[34]),E=u(E,A,P,C,S,23,o[35]),C=u(C,E,A,P,l,4,o[36]),P=u(P,C,E,A,g,11,o[37]),A=u(A,P,C,E,x,16,o[38]),E=u(E,A,P,C,w,23,o[39]),C=u(C,E,A,P,j,4,o[40]),P=u(P,C,E,A,a,11,o[41]),A=u(A,P,C,E,f,16,o[42]),E=u(E,A,P,C,y,23,o[43]),C=u(C,E,A,P,v,4,o[44]),P=u(P,C,E,A,k,11,o[45]),A=u(A,P,C,E,N,16,o[46]),C=h(C,E=u(E,A,P,C,p,23,o[47]),A,P,a,6,o[48]),P=h(P,C,E,A,x,10,o[49]),A=h(A,P,C,E,S,15,o[50]),E=h(E,A,P,C,m,21,o[51]),C=h(C,E,A,P,k,6,o[52]),P=h(P,C,E,A,f,10,o[53]),A=h(A,P,C,E,w,15,o[54]),E=h(E,A,P,C,l,21,o[55]),C=h(C,E,A,P,b,6,o[56]),P=h(P,C,E,A,N,10,o[57]),A=h(A,P,C,E,y,15,o[58]),E=h(E,A,P,C,j,21,o[59]),C=h(C,E,A,P,g,6,o[60]),P=h(P,C,E,A,_,10,o[61]),A=h(A,P,C,E,p,15,o[62]),E=h(E,A,P,C,v,21,o[63]),i[0]=i[0]+C|0,i[1]=i[1]+E|0,i[2]=i[2]+A|0,i[3]=i[3]+P|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,s=8*t.sigBytes;n[s>>>5]|=128<<24-s%32;var i=e.floor(r/4294967296),a=r;n[15+(s+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),n[14+(s+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),t.sigBytes=4*(n.length+1),this._process();for(var o=this._hash,l=o.words,c=0;c<4;c++){var d=l[c];l[c]=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8)}return o},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});function c(e,t,n,r,s,i,a){var o=e+(t&n|~t&r)+s+a;return(o<<i|o>>>32-i)+t}function d(e,t,n,r,s,i,a){var o=e+(t&r|n&~r)+s+a;return(o<<i|o>>>32-i)+t}function u(e,t,n,r,s,i,a){var o=e+(t^n^r)+s+a;return(o<<i|o>>>32-i)+t}function h(e,t,n,r,s,i,a){var o=e+(n^(t|~r))+s+a;return(o<<i|o>>>32-i)+t}n.MD5=i._createHelper(l),n.HmacMD5=i._createHmacHelper(l)}(Math),t.MD5)}()},4202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}function x(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},x.prototype=y.prototype;var v=b.prototype=new x;v.constructor=b,g(v,y.prototype),v.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,k={current:null},j={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var s,i={},a=null,o=null;if(null!=t)for(s in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)_.call(t,s)&&!j.hasOwnProperty(s)&&(i[s]=t[s]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];i.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps)void 0===i[s]&&(i[s]=l[s]);return{$$typeof:n,type:e,key:a,ref:o,props:i,_owner:k.current}}function N(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function A(e,t,s,i,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===i?"."+E(l,0):i,w(a)?(s="",null!=e&&(s=e.replace(C,"$&/")+"/"),A(a,t,s,"",function(e){return e})):null!=a&&(N(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,s+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(C,"$&/")+"/")+e)),t.push(a)),1;if(l=0,i=""===i?".":i+":",w(e))for(var c=0;c<e.length;c++){var d=i+E(o=e[c],c);l+=A(o,t,s,d,a)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(o=e.next()).done;)l+=A(o=o.value,t,s,d=i+E(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,n){if(null==e)return e;var r=[],s=0;return A(e,r,"","",function(e){return t.call(n,e,s++)}),r}function T(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},M={transition:null},I={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:M,ReactCurrentOwner:k};function R(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:P,forEach:function(e,t,n){P(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return P(e,function(){t++}),t},toArray:function(e){return P(e,function(e){return e})||[]},only:function(e){if(!N(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=s,t.Profiler=a,t.PureComponent=b,t.StrictMode=i,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I,t.act=R,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=g({},e.props),i=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=k.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_.call(t,c)&&!j.hasOwnProperty(c)&&(s[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];s.children=l}return{$$typeof:n,type:e.type,key:i,ref:a,props:s,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=N,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:T}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=M.transition;M.transition={};try{e()}finally{M.transition=t}},t.unstable_act=R,t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.3.1"},4220:function(e,t,n){!function(){var t;e.exports=(t=n(4488),void function(){var e=t,n=e.lib.Base,r=e.enc.Utf8;e.algo.HMAC=n.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=r.parse(t));var n=e.blockSize,s=4*n;t.sigBytes>s&&(t=e.finalize(t)),t.clamp();for(var i=this._oKey=t.clone(),a=this._iKey=t.clone(),o=i.words,l=a.words,c=0;c<n;c++)o[c]^=1549556828,l[c]^=909522486;i.sigBytes=a.sigBytes=s,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})}())}()},4391:(e,t,n)=>{"use strict";var r=n(7950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4423:function(e,t,n){!function(){var t;e.exports=(t=n(4488),n(2238),t.pad.Iso97971={pad:function(e,n){e.concat(t.lib.WordArray.create([2147483648],1)),t.pad.ZeroPadding.pad(e,n)},unpad:function(e){t.pad.ZeroPadding.unpad(e),e.sigBytes--}},t.pad.Iso97971)}()},4488:function(e,t,n){e.exports=function(){var e=e||function(e,t){var r;if("undefined"!==typeof window&&window.crypto&&(r=window.crypto),"undefined"!==typeof self&&self.crypto&&(r=self.crypto),"undefined"!==typeof globalThis&&globalThis.crypto&&(r=globalThis.crypto),!r&&"undefined"!==typeof window&&window.msCrypto&&(r=window.msCrypto),!r&&"undefined"!==typeof n.g&&n.g.crypto&&(r=n.g.crypto),!r)try{r=n(477)}catch(m){}var s=function(){if(r){if("function"===typeof r.getRandomValues)try{return r.getRandomValues(new Uint32Array(1))[0]}catch(m){}if("function"===typeof r.randomBytes)try{return r.randomBytes(4).readInt32LE()}catch(m){}}throw new Error("Native crypto module could not be used to get secure random number.")},i=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),a={},o=a.lib={},l=o.Base={extend:function(e){var t=i(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},c=o.WordArray=l.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,s=e.sigBytes;if(this.clamp(),r%4)for(var i=0;i<s;i++){var a=n[i>>>2]>>>24-i%4*8&255;t[r+i>>>2]|=a<<24-(r+i)%4*8}else for(var o=0;o<s;o+=4)t[r+o>>>2]=n[o>>>2];return this.sigBytes+=s,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=l.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(s());return new c.init(t,e)}}),d=a.enc={},u=d.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],s=0;s<n;s++){var i=t[s>>>2]>>>24-s%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new c.init(n,t/2)}},h=d.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],s=0;s<n;s++){var i=t[s>>>2]>>>24-s%4*8&255;r.push(String.fromCharCode(i))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new c.init(n,t)}},p=d.Utf8={stringify:function(e){try{return decodeURIComponent(escape(h.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return h.parse(unescape(encodeURIComponent(e)))}},f=o.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=p.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,r=this._data,s=r.words,i=r.sigBytes,a=this.blockSize,o=i/(4*a),l=(o=t?e.ceil(o):e.max((0|o)-this._minBufferSize,0))*a,d=e.min(4*l,i);if(l){for(var u=0;u<l;u+=a)this._doProcessBlock(s,u);n=s.splice(0,l),r.sigBytes-=d}return new c.init(n,d)},clone:function(){var e=l.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),g=(o.Hasher=f.extend({cfg:l.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new g.HMAC.init(e,n).finalize(t)}}}),a.algo={});return a}(Math);return e}()},4503:function(e,t,n){!function(){var t;e.exports=(t=n(4488),function(){if("function"==typeof ArrayBuffer){var e=t.lib.WordArray,n=e.init,r=e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!==typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var t=e.byteLength,r=[],s=0;s<t;s++)r[s>>>2]|=e[s]<<24-s%4*8;n.call(this,r,t)}else n.apply(this,arguments)};r.prototype=e}}(),t.lib.WordArray)}()},4630:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Headers:()=>a,Request:()=>o,Response:()=>l,default:()=>i,fetch:()=>s});var r=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("unable to locate global object")}();const s=r.fetch,i=r.fetch.bind(r),a=r.Headers,o=r.Request,l=r.Response},4646:function(e,t,n){!function(){var t;e.exports=(t=n(4488),function(){var e=t,n=e.lib.WordArray;function r(e,t,r){for(var s=[],i=0,a=0;a<t;a++)if(a%4){var o=r[e.charCodeAt(a-1)]<<a%4*2|r[e.charCodeAt(a)]>>>6-a%4*2;s[i>>>2]|=o<<24-i%4*8,i++}return n.create(s,i)}e.enc.Base64url={stringify:function(e,t){void 0===t&&(t=!0);var n=e.words,r=e.sigBytes,s=t?this._safe_map:this._map;e.clamp();for(var i=[],a=0;a<r;a+=3)for(var o=(n[a>>>2]>>>24-a%4*8&255)<<16|(n[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|n[a+2>>>2]>>>24-(a+2)%4*8&255,l=0;l<4&&a+.75*l<r;l++)i.push(s.charAt(o>>>6*(3-l)&63));var c=s.charAt(64);if(c)for(;i.length%4;)i.push(c);return i.join("")},parse:function(e,t){void 0===t&&(t=!0);var n=e.length,s=t?this._safe_map:this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var a=0;a<s.length;a++)i[s.charCodeAt(a)]=a}var o=s.charAt(64);if(o){var l=e.indexOf(o);-1!==l&&(n=l)}return r(e,n,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}}(),t.enc.Base64url)}()},4705:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function s(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=r(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function i(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{A:()=>i})},4708:function(e,t,n){!function(){var t;e.exports=(t=n(4488),n(2238),function(){var e=t,n=e.lib.CipherParams,r=e.enc.Hex;e.format.Hex={stringify:function(e){return e.ciphertext.toString(r)},parse:function(e){var t=r.parse(e);return n.create({ciphertext:t})}}}(),t.format.Hex)}()},5043:(e,t,n)=>{"use strict";e.exports=n(4202)},5423:(e,t,n)=>{"use strict";n.d(t,{H:()=>i});var r=n(9379);const s=n(6111);const i=new class{constructor(){this.config=void 0,this.keyDerivationSalt=void 0,this.keyDerivationSalt=this.generateSalt(),this.config={key:this.deriveKey(),algorithm:"AES"}}generateSalt(){return s.lib.WordArray.random(32).toString()}deriveKey(){const e="".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SUPABASE_URL:"https://iqwhrvtcrseidfyznqaf.supabase.co",REACT_APP_SUPABASE_ANON_KEY:"sb_publishable_ULLJeduhFHc_KRINLLXxug_zGvRBLPf",REACT_APP_CLERK_PUBLISHABLE_KEY:"pk_test_ZmFtb3VzLXRyZWVmcm9nLTU3LmNsZXJrLmFjY291bnRzLmRldiQ",REACT_APP_API_URL:"http://localhost:5000/api",REACT_APP_API_BASE:"http://localhost:5001",REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_live_51QqScaHDhcVKRRbwKUmZ9DGrIAUb7aFxwIm1rS6RFZxOjlm3B9vGkG1CPGUe3J5fMh5VAE9cD7fp40bpZRgAc1Gl00rg9q88z1"}.REACT_APP_ENCRYPTION_SECRET||"default-secret","_").concat(this.keyDerivationSalt);return s.PBKDF2(e,this.keyDerivationSalt,{keySize:8,iterations:1e4}).toString()}encrypt(e){try{const t=JSON.stringify(e);return s.AES.encrypt(t,this.config.key).toString()}catch(t){throw console.error("Encryption error:",t),new Error("Failed to encrypt data")}}decrypt(e){try{const t=s.AES.decrypt(e,this.config.key).toString(s.enc.Utf8);if(!t)throw new Error("Invalid encrypted data");return JSON.parse(t)}catch(t){throw console.error("Decryption error:",t),new Error("Failed to decrypt data")}}encryptCSVData(e){const t=(0,r.A)({},e);return["account_name","account_categories","preview_data","bucket_assignments","tags"].forEach(e=>{t[e]&&(t[e]=this.encrypt(t[e]))}),t}decryptCSVData(e){const t=(0,r.A)({},e);return["account_name","account_categories","preview_data","bucket_assignments","tags"].forEach(e=>{if(t[e]&&"string"===typeof t[e])try{t[e]=this.decrypt(t[e])}catch(n){console.warn("Failed to decrypt field ".concat(e,":"),n)}}),t}encryptPropertyData(e){const t=(0,r.A)({},e);return["name","address","property_type"].forEach(e=>{t[e]&&(t[e]=this.encrypt(t[e]))}),t}decryptPropertyData(e){const t=(0,r.A)({},e);return["name","address","property_type"].forEach(e=>{if(t[e]&&"string"===typeof t[e])try{t[e]=this.decrypt(t[e])}catch(n){console.warn("Failed to decrypt field ".concat(e,":"),n)}}),t}encryptOrganizationData(e){const t=(0,r.A)({},e);return["name"].forEach(e=>{t[e]&&(t[e]=this.encrypt(t[e]))}),t}decryptOrganizationData(e){const t=(0,r.A)({},e);return["name"].forEach(e=>{if(t[e]&&"string"===typeof t[e])try{t[e]=this.decrypt(t[e])}catch(n){console.warn("Failed to decrypt field ".concat(e,":"),n)}}),t}generateHash(e){const t=JSON.stringify(e);return s.SHA256(t).toString()}verifyIntegrity(e,t){return this.generateHash(e)===t}anonymizeData(e){const t=(0,r.A)({},e);t.account_name&&(t.account_name=this.anonymizeString(t.account_name)),t.name&&(t.name=this.anonymizeString(t.name)),t.address&&(t.address=this.anonymizeString(t.address));const n={};return["id","user_id","created_at","updated_at","file_type","total_records","is_active"].forEach(e=>{void 0!==t[e]&&(n[e]=t[e])}),n}anonymizeString(e){return e&&0!==e.length?e.length<=2?"*".repeat(e.length):e[0]+"*".repeat(e.length-2)+e[e.length-1]:e}}},5472:(e,t,n)=>{"use strict";n.d(t,{MC:()=>p,jo:()=>g,getCSVData:()=>h,h2:()=>m,ai:()=>f,Ck:()=>u});var r=n(9379),s=n(6069),i=n(5423),a=n(9079);const o=new class{constructor(){this.config=void 0,this.logs=[],this.config={enableLogging:!0,logLevel:"standard",retentionDays:90}}logDataAccess(e,t,n){if(!this.config.enableLogging)return;const r=a.j.getCurrentUser();if(!r)return;const s={userId:r.id,action:"DATA_ACCESS",resource:e,resourceId:t,details:this.sanitizeDetails(n),timestamp:(new Date).toISOString(),ipAddress:this.getClientIP(),userAgent:navigator.userAgent};this.addLog(s)}logDataModification(e,t,n){if(!this.config.enableLogging)return;const r=a.j.getCurrentUser();if(!r)return;const s={userId:r.id,action:"DATA_MODIFICATION",resource:e,resourceId:t,details:this.sanitizeDetails(n),timestamp:(new Date).toISOString(),ipAddress:this.getClientIP(),userAgent:navigator.userAgent};this.addLog(s)}logDataDeletion(e,t,n){if(!this.config.enableLogging)return;const r=a.j.getCurrentUser();if(!r)return;const s={userId:r.id,action:"DATA_DELETION",resource:e,resourceId:t,details:this.sanitizeDetails(n),timestamp:(new Date).toISOString(),ipAddress:this.getClientIP(),userAgent:navigator.userAgent};this.addLog(s)}logAuthentication(e,t){if(!this.config.enableLogging)return;const n=a.j.getCurrentUser();if(!n)return;const r={userId:n.id,action:"AUTH_".concat(e.toUpperCase()),resource:"USER_SESSION",details:this.sanitizeDetails(t),timestamp:(new Date).toISOString(),ipAddress:this.getClientIP(),userAgent:navigator.userAgent};this.addLog(r)}logEncryption(e,t,n){if(!this.config.enableLogging||"minimal"===this.config.logLevel)return;const r=a.j.getCurrentUser();if(!r)return;const s={userId:r.id,action:"DATA_".concat(e),resource:t,resourceId:n,timestamp:(new Date).toISOString(),ipAddress:this.getClientIP(),userAgent:navigator.userAgent};this.addLog(s)}getUserAuditLogs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return this.logs.filter(t=>t.userId===e).sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()).slice(0,t)}getResourceAuditLogs(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;return this.logs.filter(n=>n.resource===e&&(!t||n.resourceId===t)).sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()).slice(0,n)}getAllAuditLogs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return this.logs.sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()).slice(0,e)}exportAuditLogs(e){const t=e.map(e=>[e.timestamp,e.userId,e.action,e.resource,e.resourceId||"",e.ipAddress||"",e.userAgent||""]);return[["Timestamp","User ID","Action","Resource","Resource ID","IP Address","User Agent"].join(","),...t.map(e=>e.join(","))].join("\n")}cleanupOldLogs(){const e=new Date;e.setDate(e.getDate()-this.config.retentionDays),this.logs=this.logs.filter(t=>new Date(t.timestamp)>e)}addLog(e){this.logs.push(e);try{const t=JSON.parse(localStorage.getItem("auditLogs")||"[]");t.push(e);const n=t.sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()).slice(0,1e3);localStorage.setItem("auditLogs",JSON.stringify(n))}catch(t){console.warn("Failed to store audit log:",t)}}sanitizeDetails(e){if(!e)return e;const t=(0,r.A)({},e);return["password","token","key","secret","ssn","credit_card","bank_account"].forEach(e=>{t[e]&&(t[e]="[REDACTED]")}),t}getClientIP(){return"client-side"}loadStoredLogs(){try{const e=JSON.parse(localStorage.getItem("auditLogs")||"[]");this.logs=e}catch(e){console.warn("Failed to load stored audit logs:",e),this.logs=[]}}};o.loadStoredLogs();const l="https://iqwhrvtcrseidfyznqaf.supabase.co",c="sb_publishable_ULLJeduhFHc_KRINLLXxug_zGvRBLPf",d=l&&c?(0,s.UU)(l,c,{auth:{persistSession:!1}}):null;async function u(e,t){if(!d)return console.error("Supabase not available - cannot save data"),null;try{var n;const s=i.H.encryptCSVData(e),a=t?(0,r.A)((0,r.A)({},s),{},{user_id:t}):s,{data:l,error:c}=await d.from("csv_data").insert([a]).select();return c?(console.error("Error saving CSV data to Supabase:",c),null):(o.logDataModification("CSV_DATA",null===(n=l[0])||void 0===n?void 0:n.id,{fileName:e.file_name,fileType:e.file_type,recordCount:e.total_records}),console.log("CSV data saved to Supabase (encrypted)"),l[0])}catch(s){return console.error("Error saving CSV data:",s),null}}async function h(e){if(!d)return console.error("Supabase not available - cannot load data"),[];try{let t=d.from("csv_data").select("*").order("uploaded_at",{ascending:!1});e&&(t=t.eq("user_id",e));const{data:n,error:r}=await t;if(r)return console.error("Error fetching CSV data from Supabase:",r),[];const s=(n||[]).map(e=>i.H.decryptCSVData(e));return o.logDataAccess("CSV_DATA",void 0,{recordCount:s.length,userId:e}),console.log("CSV data fetched from Supabase (decrypted):",s.length,"records"),s}catch(t){return console.error("Error fetching CSV data:",t),[]}}async function p(e,t){if(!d)return console.error("Supabase not available - cannot delete data"),null;try{let n=d.from("csv_data").delete().eq("id",e);t&&(n=n.eq("user_id",t));const{error:r}=await n;return r?(console.error("Error deleting CSV data from Supabase:",r),null):(o.logDataDeletion("CSV_DATA",e,{userId:t}),console.log("CSV data deleted from Supabase:",e),!0)}catch(n){return console.error("Error deleting CSV data:",n),null}}async function f(e,t,n,s){if(!d)return console.error("Supabase not available - cannot save AI learning"),null;try{const i=(0,r.A)({file_type:e,account_name:t,user_category:n,confidence_score:1,usage_count:1,updated_at:(new Date).toISOString()},s&&{user_id:s}),{error:a}=await d.from("ai_learning").upsert(i,{onConflict:s?"file_type,account_name,user_id":"file_type,account_name"});return a?(console.error("Error saving AI learning:",a),null):(console.log("\u2705 AI learning saved:",{fileType:e,accountName:t,userCategory:n,userId:s}),!0)}catch(i){return console.error("Error saving AI learning:",i),null}}async function g(e,t){if(!d)return console.error("Supabase not available - cannot get AI learning"),{};try{let n=d.from("ai_learning").select("account_name, user_category, confidence_score, usage_count").eq("file_type",e);t&&(n=n.eq("user_id",t));const{data:r,error:s}=await n;if(s)return console.error("Error getting AI learning:",s),{};const i={};return null===r||void 0===r||r.forEach(e=>{i[e.account_name]=e.user_category}),console.log("\u2705 AI learning loaded for",e,":",Object.keys(i).length,"items"),i}catch(n){return console.error("Error getting AI learning:",n),{}}}async function m(e){if(!d)return console.error("Supabase not available - cannot migrate data"),{success:!1,error:"Supabase not available"};try{console.log("\ud83d\udd04 Starting localStorage to Supabase migration...");const n=JSON.parse(localStorage.getItem("savedCSVs")||"[]");if(console.log("\ud83d\udcf1 Found",n.length,"CSVs in localStorage"),0===n.length)return console.log("\u2705 No localStorage data to migrate"),{success:!0,migrated:0};let r=0,s=0;for(const i of n)try{const t={file_name:i.fileName,file_type:i.fileType,uploaded_at:i.uploadedAt,total_records:i.totalRecords,account_categories:i.accountCategories,bucket_assignments:i.bucketAssignments,is_active:i.isActive,preview_data:i.previewData,user_id:e};await u(t,e)?(r++,console.log("\u2705 Migrated: ".concat(i.fileName))):(s++,console.error("\u274c Failed to migrate: ".concat(i.fileName)))}catch(t){s++,console.error("\u274c Error migrating ".concat(i.fileName,":"),t)}return r>0&&(localStorage.removeItem("savedCSVs"),console.log("\ud83d\uddd1\ufe0f Cleared localStorage after migration")),console.log("\ud83c\udf89 Migration complete: ".concat(r," migrated, ").concat(s," errors")),{success:!0,migrated:r,errors:s,total:n.length}}catch(t){return console.error("Migration failed:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}},5736:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(n(7374));class i extends s.default{eq(e,t){return this.url.searchParams.append(e,"eq.".concat(t)),this}neq(e,t){return this.url.searchParams.append(e,"neq.".concat(t)),this}gt(e,t){return this.url.searchParams.append(e,"gt.".concat(t)),this}gte(e,t){return this.url.searchParams.append(e,"gte.".concat(t)),this}lt(e,t){return this.url.searchParams.append(e,"lt.".concat(t)),this}lte(e,t){return this.url.searchParams.append(e,"lte.".concat(t)),this}like(e,t){return this.url.searchParams.append(e,"like.".concat(t)),this}likeAllOf(e,t){return this.url.searchParams.append(e,"like(all).{".concat(t.join(","),"}")),this}likeAnyOf(e,t){return this.url.searchParams.append(e,"like(any).{".concat(t.join(","),"}")),this}ilike(e,t){return this.url.searchParams.append(e,"ilike.".concat(t)),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,"ilike(all).{".concat(t.join(","),"}")),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,"ilike(any).{".concat(t.join(","),"}")),this}is(e,t){return this.url.searchParams.append(e,"is.".concat(t)),this}in(e,t){const n=Array.from(new Set(t)).map(e=>"string"===typeof e&&new RegExp("[,()]").test(e)?'"'.concat(e,'"'):"".concat(e)).join(",");return this.url.searchParams.append(e,"in.(".concat(n,")")),this}contains(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cs.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cs.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cs.".concat(JSON.stringify(t))),this}containedBy(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cd.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cd.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cd.".concat(JSON.stringify(t))),this}rangeGt(e,t){return this.url.searchParams.append(e,"sr.".concat(t)),this}rangeGte(e,t){return this.url.searchParams.append(e,"nxl.".concat(t)),this}rangeLt(e,t){return this.url.searchParams.append(e,"sl.".concat(t)),this}rangeLte(e,t){return this.url.searchParams.append(e,"nxr.".concat(t)),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,"adj.".concat(t)),this}overlaps(e,t){return"string"===typeof t?this.url.searchParams.append(e,"ov.".concat(t)):this.url.searchParams.append(e,"ov.{".concat(t.join(","),"}")),this}textSearch(e,t){let{config:n,type:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s="";"plain"===r?s="pl":"phrase"===r?s="ph":"websearch"===r&&(s="w");const i=void 0===n?"":"(".concat(n,")");return this.url.searchParams.append(e,"".concat(s,"fts").concat(i,".").concat(t)),this}match(e){return Object.entries(e).forEach(e=>{let[t,n]=e;this.url.searchParams.append(t,"eq.".concat(n))}),this}not(e,t,n){return this.url.searchParams.append(e,"not.".concat(t,".").concat(n)),this}or(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=n?"".concat(n,".or"):"or";return this.url.searchParams.append(r,"(".concat(e,")")),this}filter(e,t,n){return this.url.searchParams.append(e,"".concat(t,".").concat(n)),this}}t.default=i},5766:function(e,t){var n,r,s;r=[],n=function e(){var t,n="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:{},r=!n.document&&!!n.postMessage,s=n.IS_PAPA_WORKER||!1,i={},a=0,o={};function l(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(e){var t=b(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null),this._handle=new p(t),(this._handle.streamer=this)._config=t}.call(this,e),this.parseChunk=function(e,t){var r=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<r){let t=this._config.newline;t||(i=this._config.quoteChar||'"',t=this._handle.guessLineEndings(e,i)),e=[...e.split(t).slice(r)].join(t)}this.isFirstChunk&&w(this._config.beforeFirstChunk)&&void 0!==(i=this._config.beforeFirstChunk(e))&&(e=i),this.isFirstChunk=!1,this._halted=!1,r=this._partialLine+e;var i=(this._partialLine="",this._handle.parse(r,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(e=i.meta.cursor,this._finished||(this._partialLine=r.substring(e-this._baseIndex),this._baseIndex=e),i&&i.data&&(this._rowCount+=i.data.length),r=this._finished||this._config.preview&&this._rowCount>=this._config.preview,s)n.postMessage({results:i,workerId:o.WORKER_ID,finished:r});else if(w(this._config.chunk)&&!t){if(this._config.chunk(i,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=i=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(i.data),this._completeResults.errors=this._completeResults.errors.concat(i.errors),this._completeResults.meta=i.meta),this._completed||!r||!w(this._config.complete)||i&&i.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),r||i&&i.meta.paused||this._nextChunk(),i}this._halted=!0},this._sendError=function(e){w(this._config.error)?this._config.error(e):s&&this._config.error&&n.postMessage({workerId:o.WORKER_ID,error:e,finished:!1})}}function c(e){var t;(e=e||{}).chunkSize||(e.chunkSize=o.RemoteChunkSize),l.call(this,e),this._nextChunk=r?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),r||(t.onload=v(this._chunkLoaded,this),t.onerror=v(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!r),this._config.downloadRequestHeaders){var e,n=this._config.downloadRequestHeaders;for(e in n)t.setRequestHeader(e,n[e])}var s;this._config.chunkSize&&(s=this._start+this._config.chunkSize-1,t.setRequestHeader("Range","bytes="+this._start+"-"+s));try{t.send(this._config.downloadRequestBody)}catch(e){this._chunkError(e.message)}r&&0===t.status&&this._chunkError()}},this._chunkLoaded=function(){4===t.readyState&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize||t.responseText.length,this._finished=!this._config.chunkSize||this._start>=(e=>null!==(e=e.getResponseHeader("Content-Range"))?parseInt(e.substring(e.lastIndexOf("/")+1)):-1)(t),this.parseChunk(t.responseText)))},this._chunkError=function(e){e=t.statusText||e,this._sendError(new Error(e))}}function d(e){(e=e||{}).chunkSize||(e.chunkSize=o.LocalChunkSize),l.call(this,e);var t,n,r="undefined"!=typeof FileReader;this.stream=function(e){this._input=e,n=e.slice||e.webkitSlice||e.mozSlice,r?((t=new FileReader).onload=v(this._chunkLoaded,this),t.onerror=v(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input,s=(this._config.chunkSize&&(s=Math.min(this._start+this._config.chunkSize,this._input.size),e=n.call(e,this._start,s)),t.readAsText(e,this._config.encoding));r||this._chunkLoaded({target:{result:s}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(t.error)}}function u(e){var t;l.call(this,e=e||{}),this.stream=function(e){return t=e,this._nextChunk()},this._nextChunk=function(){var e,n;if(!this._finished)return e=this._config.chunkSize,t=e?(n=t.substring(0,e),t.substring(e)):(n=t,""),this._finished=!t,this.parseChunk(n)}}function h(e){l.call(this,e=e||{});var t=[],n=!0,r=!1;this.pause=function(){l.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){l.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){r&&1===t.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):n=!0},this._streamData=v(function(e){try{t.push("string"==typeof e?e:e.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(e){this._streamError(e)}},this),this._streamError=v(function(e){this._streamCleanUp(),this._sendError(e)},this),this._streamEnd=v(function(){this._streamCleanUp(),r=!0,this._streamData("")},this),this._streamCleanUp=v(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function p(e){var t,n,r,s,i=Math.pow(2,53),a=-i,l=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,c=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,d=this,u=0,h=0,p=!1,m=!1,y=[],x={data:[],errors:[],meta:{}};function v(t){return"greedy"===e.skipEmptyLines?""===t.join("").trim():1===t.length&&0===t[0].length}function _(){if(x&&r&&(j("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+o.DefaultDelimiter+"'"),r=!1),e.skipEmptyLines&&(x.data=x.data.filter(function(e){return!v(e)})),k()){if(x)if(Array.isArray(x.data[0])){for(var t=0;k()&&t<x.data.length;t++)x.data[t].forEach(n);x.data.splice(0,1)}else x.data.forEach(n);function n(t,n){w(e.transformHeader)&&(t=e.transformHeader(t,n)),y.push(t)}}function s(t,n){for(var r=e.header?{}:[],s=0;s<t.length;s++){var o=s,d=t[s];d=((t,n)=>(t=>(e.dynamicTypingFunction&&void 0===e.dynamicTyping[t]&&(e.dynamicTyping[t]=e.dynamicTypingFunction(t)),!0===(e.dynamicTyping[t]||e.dynamicTyping)))(t)?"true"===n||"TRUE"===n||"false"!==n&&"FALSE"!==n&&((e=>{if(l.test(e)&&(e=parseFloat(e),a<e&&e<i))return 1})(n)?parseFloat(n):c.test(n)?new Date(n):""===n?null:n):n)(o=e.header?s>=y.length?"__parsed_extra":y[s]:o,d=e.transform?e.transform(d,o):d),"__parsed_extra"===o?(r[o]=r[o]||[],r[o].push(d)):r[o]=d}return e.header&&(s>y.length?j("FieldMismatch","TooManyFields","Too many fields: expected "+y.length+" fields but parsed "+s,h+n):s<y.length&&j("FieldMismatch","TooFewFields","Too few fields: expected "+y.length+" fields but parsed "+s,h+n)),r}var d;x&&(e.header||e.dynamicTyping||e.transform)&&(d=1,!x.data.length||Array.isArray(x.data[0])?(x.data=x.data.map(s),d=x.data.length):x.data=s(x.data,0),e.header&&x.meta&&(x.meta.fields=y),h+=d)}function k(){return e.header&&0===y.length}function j(e,t,n,r){e={type:e,code:t,message:n},void 0!==r&&(e.row=r),x.errors.push(e)}w(e.step)&&(s=e.step,e.step=function(t){x=t,k()?_():(_(),0!==x.data.length&&(u+=t.data.length,e.preview&&u>e.preview?n.abort():(x.data=x.data[0],s(x,d))))}),this.parse=function(s,i,a){var l=e.quoteChar||'"';return e.newline||(e.newline=this.guessLineEndings(s,l)),r=!1,e.delimiter?w(e.delimiter)&&(e.delimiter=e.delimiter(s),x.meta.delimiter=e.delimiter):((l=((t,n,r,s,i)=>{var a,l,c,d;i=i||[",","\t","|",";",o.RECORD_SEP,o.UNIT_SEP];for(var u=0;u<i.length;u++){for(var h,p=i[u],f=0,m=0,y=0,x=(c=void 0,new g({comments:s,delimiter:p,newline:n,preview:10}).parse(t)),b=0;b<x.data.length;b++)r&&v(x.data[b])?y++:(m+=h=x.data[b].length,void 0===c?c=h:0<h&&(f+=Math.abs(h-c),c=h));0<x.data.length&&(m/=x.data.length-y),(void 0===l||f<=l)&&(void 0===d||d<m)&&1.99<m&&(l=f,a=p,d=m)}return{successful:!!(e.delimiter=a),bestDelimiter:a}})(s,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess)).successful?e.delimiter=l.bestDelimiter:(r=!0,e.delimiter=o.DefaultDelimiter),x.meta.delimiter=e.delimiter),l=b(e),e.preview&&e.header&&l.preview++,t=s,n=new g(l),x=n.parse(t,i,a),_(),p?{meta:{paused:!0}}:x||{meta:{paused:!1}}},this.paused=function(){return p},this.pause=function(){p=!0,n.abort(),t=w(e.chunk)?"":t.substring(n.getCharIndex())},this.resume=function(){d.streamer._halted?(p=!1,d.streamer.parseChunk(t,!0)):setTimeout(d.resume,3)},this.aborted=function(){return m},this.abort=function(){m=!0,n.abort(),x.meta.aborted=!0,w(e.complete)&&e.complete(x),t=""},this.guessLineEndings=function(e,t){e=e.substring(0,1048576),t=new RegExp(f(t)+"([^]*?)"+f(t),"gm");var n=(e=e.replace(t,"")).split("\r");if(e=1<(t=e.split("\n")).length&&t[0].length<n[0].length,1===n.length||e)return"\n";for(var r=0,s=0;s<n.length;s++)"\n"===n[s][0]&&r++;return r>=n.length/2?"\r\n":"\r"}}function f(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function g(e){var t=(e=e||{}).delimiter,n=e.newline,r=e.comments,s=e.step,i=e.preview,a=e.fastMode,l=null,c=!1,d=null==e.quoteChar?'"':e.quoteChar,u=d;if(void 0!==e.escapeChar&&(u=e.escapeChar),("string"!=typeof t||-1<o.BAD_DELIMITERS.indexOf(t))&&(t=","),r===t)throw new Error("Comment character same as delimiter");!0===r?r="#":("string"!=typeof r||-1<o.BAD_DELIMITERS.indexOf(r))&&(r=!1),"\n"!==n&&"\r"!==n&&"\r\n"!==n&&(n="\n");var h=0,p=!1;this.parse=function(o,g,m){if("string"!=typeof o)throw new Error("Input must be a string");var y=o.length,x=t.length,b=n.length,v=r.length,_=w(s),k=[],j=[],S=[],N=h=0;if(!o)return z();if(a||!1!==a&&-1===o.indexOf(d)){for(var C=o.split(n),E=0;E<C.length;E++){if(S=C[E],h+=S.length,E!==C.length-1)h+=n.length;else if(m)return z();if(!r||S.substring(0,v)!==r){if(_){if(k=[],I(S.split(t)),F(),p)return z()}else I(S.split(t));if(i&&i<=E)return k=k.slice(0,i),z(!0)}}return z()}for(var A=o.indexOf(t,h),P=o.indexOf(n,h),T=new RegExp(f(u)+f(d),"g"),O=o.indexOf(d,h);;)if(o[h]===d)for(O=h,h++;;){if(-1===(O=o.indexOf(d,O+1)))return m||j.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:k.length,index:h}),L();if(O===y-1)return L(o.substring(h,O).replace(T,d));if(d===u&&o[O+1]===u)O++;else if(d===u||0===O||o[O-1]!==u){-1!==A&&A<O+1&&(A=o.indexOf(t,O+1));var M=R(-1===(P=-1!==P&&P<O+1?o.indexOf(n,O+1):P)?A:Math.min(A,P));if(o.substr(O+1+M,x)===t){S.push(o.substring(h,O).replace(T,d)),o[h=O+1+M+x]!==d&&(O=o.indexOf(d,h)),A=o.indexOf(t,h),P=o.indexOf(n,h);break}if(M=R(P),o.substring(O+1+M,O+1+M+b)===n){if(S.push(o.substring(h,O).replace(T,d)),D(O+1+M+b),A=o.indexOf(t,h),O=o.indexOf(d,h),_&&(F(),p))return z();if(i&&k.length>=i)return z(!0);break}j.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:k.length,index:h}),O++}}else if(r&&0===S.length&&o.substring(h,h+v)===r){if(-1===P)return z();h=P+b,P=o.indexOf(n,h),A=o.indexOf(t,h)}else if(-1!==A&&(A<P||-1===P))S.push(o.substring(h,A)),h=A+x,A=o.indexOf(t,h);else{if(-1===P)break;if(S.push(o.substring(h,P)),D(P+b),_&&(F(),p))return z();if(i&&k.length>=i)return z(!0)}return L();function I(e){k.push(e),N=h}function R(e){var t=0;return-1!==e&&(e=o.substring(O+1,e))&&""===e.trim()?e.length:t}function L(e){return m||(void 0===e&&(e=o.substring(h)),S.push(e),h=y,I(S),_&&F()),z()}function D(e){h=e,I(S),S=[],P=o.indexOf(n,h)}function z(r){if(e.header&&!g&&k.length&&!c){var s=k[0],i=Object.create(null),a=new Set(s);let t=!1;for(let n=0;n<s.length;n++){let r=s[n];if(i[r=w(e.transformHeader)?e.transformHeader(r,n):r]){let e,o=i[r];for(;e=r+"_"+o,o++,a.has(e););a.add(e),s[n]=e,i[r]++,t=!0,(l=null===l?{}:l)[e]=r}else i[r]=1,s[n]=r;a.add(r)}t&&console.warn("Duplicate headers found and renamed."),c=!0}return{data:k,errors:j,meta:{delimiter:t,linebreak:n,aborted:p,truncated:!!r,cursor:N+(g||0),renamedHeaders:l}}}function F(){s(z()),k=[],j=[]}},this.abort=function(){p=!0},this.getCharIndex=function(){return h}}function m(e){var t=e.data,n=i[t.workerId],r=!1;if(t.error)n.userError(t.error,t.file);else if(t.results&&t.results.data){var s={abort:function(){r=!0,y(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:x,resume:x};if(w(n.userStep)){for(var a=0;a<t.results.data.length&&(n.userStep({data:t.results.data[a],errors:t.results.errors,meta:t.results.meta},s),!r);a++);delete t.results}else w(n.userChunk)&&(n.userChunk(t.results,s,t.file),delete t.results)}t.finished&&!r&&y(t.workerId,t.results)}function y(e,t){var n=i[e];w(n.userComplete)&&n.userComplete(t),n.terminate(),delete i[e]}function x(){throw new Error("Not implemented.")}function b(e){if("object"!=typeof e||null===e)return e;var t,n=Array.isArray(e)?[]:{};for(t in e)n[t]=b(e[t]);return n}function v(e,t){return function(){e.apply(t,arguments)}}function w(e){return"function"==typeof e}return o.parse=function(t,r){var s=(r=r||{}).dynamicTyping||!1;if(w(s)&&(r.dynamicTypingFunction=s,s={}),r.dynamicTyping=s,r.transform=!!w(r.transform)&&r.transform,!r.worker||!o.WORKERS_SUPPORTED)return s=null,o.NODE_STREAM_INPUT,"string"==typeof t?(t=(e=>65279!==e.charCodeAt(0)?e:e.slice(1))(t),s=new(r.download?c:u)(r)):!0===t.readable&&w(t.read)&&w(t.on)?s=new h(r):(n.File&&t instanceof File||t instanceof Object)&&(s=new d(r)),s.stream(t);(s=(()=>{var t;return!!o.WORKERS_SUPPORTED&&(t=(()=>{var t=n.URL||n.webkitURL||null,r=e.toString();return o.BLOB_URL||(o.BLOB_URL=t.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",r,")();"],{type:"text/javascript"})))})(),(t=new n.Worker(t)).onmessage=m,t.id=a++,i[t.id]=t)})()).userStep=r.step,s.userChunk=r.chunk,s.userComplete=r.complete,s.userError=r.error,r.step=w(r.step),r.chunk=w(r.chunk),r.complete=w(r.complete),r.error=w(r.error),delete r.worker,s.postMessage({input:t,config:r,workerId:s.id})},o.unparse=function(e,t){var n=!1,r=!0,s=",",i="\r\n",a='"',l=a+a,c=!1,d=null,u=!1,h=((()=>{if("object"==typeof t){if("string"!=typeof t.delimiter||o.BAD_DELIMITERS.filter(function(e){return-1!==t.delimiter.indexOf(e)}).length||(s=t.delimiter),"boolean"!=typeof t.quotes&&"function"!=typeof t.quotes&&!Array.isArray(t.quotes)||(n=t.quotes),"boolean"!=typeof t.skipEmptyLines&&"string"!=typeof t.skipEmptyLines||(c=t.skipEmptyLines),"string"==typeof t.newline&&(i=t.newline),"string"==typeof t.quoteChar&&(a=t.quoteChar),"boolean"==typeof t.header&&(r=t.header),Array.isArray(t.columns)){if(0===t.columns.length)throw new Error("Option columns is empty");d=t.columns}void 0!==t.escapeChar&&(l=t.escapeChar+a),t.escapeFormulae instanceof RegExp?u=t.escapeFormulae:"boolean"==typeof t.escapeFormulae&&t.escapeFormulae&&(u=/^[=+\-@\t\r].*$/)}})(),new RegExp(f(a),"g"));if("string"==typeof e&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return p(null,e,c);if("object"==typeof e[0])return p(d||Object.keys(e[0]),e,c)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||d),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:"object"==typeof e.data[0]?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||"object"==typeof e.data[0]||(e.data=[e.data])),p(e.fields||[],e.data||[],c);throw new Error("Unable to serialize unrecognized input");function p(e,t,n){var a="",o=("string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t)),Array.isArray(e)&&0<e.length),l=!Array.isArray(t[0]);if(o&&r){for(var c=0;c<e.length;c++)0<c&&(a+=s),a+=g(e[c],c);0<t.length&&(a+=i)}for(var d=0;d<t.length;d++){var u=(o?e:t[d]).length,h=!1,p=o?0===Object.keys(t[d]).length:0===t[d].length;if(n&&!o&&(h="greedy"===n?""===t[d].join("").trim():1===t[d].length&&0===t[d][0].length),"greedy"===n&&o){for(var f=[],m=0;m<u;m++){var y=l?e[m]:m;f.push(t[d][y])}h=""===f.join("").trim()}if(!h){for(var x=0;x<u;x++){0<x&&!p&&(a+=s);var b=o&&l?e[x]:x;a+=g(t[d][b],x)}d<t.length-1&&(!n||0<u&&!p)&&(a+=i)}}return a}function g(e,t){var r,i;return null==e?"":e.constructor===Date?JSON.stringify(e).slice(1,25):(i=!1,u&&"string"==typeof e&&u.test(e)&&(e="'"+e,i=!0),r=e.toString().replace(h,l),(i=i||!0===n||"function"==typeof n&&n(e,t)||Array.isArray(n)&&n[t]||((e,t)=>{for(var n=0;n<t.length;n++)if(-1<e.indexOf(t[n]))return!0;return!1})(r,o.BAD_DELIMITERS)||-1<r.indexOf(s)||" "===r.charAt(0)||" "===r.charAt(r.length-1))?a+r+a:r)}},o.RECORD_SEP=String.fromCharCode(30),o.UNIT_SEP=String.fromCharCode(31),o.BYTE_ORDER_MARK="\ufeff",o.BAD_DELIMITERS=["\r","\n",'"',o.BYTE_ORDER_MARK],o.WORKERS_SUPPORTED=!r&&!!n.Worker,o.NODE_STREAM_INPUT=1,o.LocalChunkSize=10485760,o.RemoteChunkSize=5242880,o.DefaultDelimiter=",",o.Parser=g,o.ParserHandle=p,o.NetworkStreamer=c,o.FileStreamer=d,o.StringStreamer=u,o.ReadableStreamStreamer=h,n.jQuery&&((t=n.jQuery).fn.parse=function(e){var r=e.config||{},s=[];return this.each(function(e){if("INPUT"!==t(this).prop("tagName").toUpperCase()||"file"!==t(this).attr("type").toLowerCase()||!n.FileReader||!this.files||0===this.files.length)return!0;for(var i=0;i<this.files.length;i++)s.push({file:this.files[i],inputElem:this,instanceConfig:t.extend({},r)})}),i(),this;function i(){if(0===s.length)w(e.complete)&&e.complete();else{var n,r,i,l,c=s[0];if(w(e.before)){var d=e.before(c.file,c.inputElem);if("object"==typeof d){if("abort"===d.action)return n="AbortError",r=c.file,i=c.inputElem,l=d.reason,void(w(e.error)&&e.error({name:n},r,i,l));if("skip"===d.action)return void a();"object"==typeof d.config&&(c.instanceConfig=t.extend(c.instanceConfig,d.config))}else if("skip"===d)return void a()}var u=c.instanceConfig.complete;c.instanceConfig.complete=function(e){w(u)&&u(e,c.file,c.inputElem),a()},o.parse(c.file,c.instanceConfig)}}function a(){s.splice(0,1),i()}}),s&&(n.onmessage=function(e){e=e.data,void 0===o.WORKER_ID&&e&&(o.WORKER_ID=e.workerId),"string"==typeof e.input?n.postMessage({workerId:o.WORKER_ID,results:o.parse(e.input,e.config),finished:!0}):(n.File&&e.input instanceof File||e.input instanceof Object)&&(e=o.parse(e.input,e.config))&&n.postMessage({workerId:o.WORKER_ID,results:e,finished:!0})}),(c.prototype=Object.create(l.prototype)).constructor=c,(d.prototype=Object.create(l.prototype)).constructor=d,(u.prototype=Object.create(u.prototype)).constructor=u,(h.prototype=Object.create(l.prototype)).constructor=h,o},void 0===(s="function"===typeof n?n.apply(t,r):n)||(e.exports=s)},5865:(e,t,n)=>{"use strict";n.d(t,{createCheckoutSession:()=>b,du:()=>v,uS:()=>w});var r,s="basil",i="https://js.stripe.com",a="".concat(i,"/").concat(s,"/stripe.js"),o=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,l=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,c="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",d=function(e){return o.test(e)||l.test(e)},u=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(a).concat(t);var r=document.head||document.body;if(!r)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(n),n},h=null,p=null,f=null,g=function(e){return null!==h?h:(h=new Promise(function(t,n){if("undefined"!==typeof window&&"undefined"!==typeof document)if(window.Stripe&&e&&console.warn(c),window.Stripe)t(window.Stripe);else try{var r=function(){for(var e=document.querySelectorAll('script[src^="'.concat(i,'"]')),t=0;t<e.length;t++){var n=e[t];if(d(n.src))return n}return null}();if(r&&e)console.warn(c);else if(r){if(r&&null!==f&&null!==p){var s;r.removeEventListener("load",f),r.removeEventListener("error",p),null===(s=r.parentNode)||void 0===s||s.removeChild(r),r=u(e)}}else r=u(e);f=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}}(t,n),p=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}}(n),r.addEventListener("load",f),r.addEventListener("error",p)}catch(a){return void n(a)}else t(null)})).catch(function(e){return h=null,Promise.reject(e)})},m=!1,y=function(){return r||(r=g(null).catch(function(e){return r=null,Promise.reject(e)}))};Promise.resolve().then(function(){return y()}).catch(function(e){m||console.warn(e)});const x=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];m=!0;var r=Date.now();return y().then(function(e){return function(e,t,n){if(null===e)return null;var r=t[0].match(/^pk_test/),i=function(e){return 3===e?"v3":e}(e.version),a=s;r&&i!==a&&console.warn("Stripe.js@".concat(i," was loaded on the page, but @stripe/stripe-js@").concat("7.9.0"," expected Stripe.js@").concat(a,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var o=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"7.9.0",startTime:t})}(o,n),o}(e,t,r)})}("pk_live_51QqScaHDhcVKRRbwKUmZ9DGrIAUb7aFxwIm1rS6RFZxOjlm3B9vGkG1CPGUe3J5fMh5VAE9cD7fp40bpZRgAc1Gl00rg9q88z1"),b=async e=>{try{const t=await fetch("/api/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to create checkout session");const{sessionId:n}=await t.json(),r=await x;if(!r)throw new Error("Stripe failed to load");const{error:s}=await r.redirectToCheckout({sessionId:n});if(s)throw new Error(s.message)}catch(t){throw console.error("Error creating checkout session:",t),t}},v=async e=>{try{const t=await fetch("/api/create-portal-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerId:e})});if(!t.ok)throw new Error("Failed to create portal session");const{url:n}=await t.json();window.location.href=n}catch(t){throw console.error("Error creating portal session:",t),t}},w=async e=>{try{const t=await fetch("/api/subscription-status?userId=".concat(e));if(!t.ok)throw new Error("Failed to get subscription status");return await t.json()}catch(t){throw console.error("Error getting subscription status:",t),t}}},6069:(e,t,n)=>{"use strict";n.d(t,{UU:()=>Xt});class r extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FunctionsError",n=arguments.length>2?arguments[2]:void 0;super(e),this.name=t,this.context=n}}class s extends r{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class i extends r{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class a extends r{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var o;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(o||(o={}));var l=function(e,t,n,r){return new(n||(n=Promise))(function(s,i){function a(e){try{l(r.next(e))}catch(t){i(t)}}function o(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((r=r.apply(e,t||[])).next())})};class c{constructor(e){let{headers:t={},customFetch:r,region:s=o.Any}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=t,this.region=s,this.fetch=(e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,4630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}})(r)}setAuth(e){this.headers.Authorization="Bearer ".concat(e)}invoke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;return l(this,void 0,void 0,function*(){try{const{headers:r,method:o,body:l}=t;let c={},{region:d}=t;d||(d=this.region);const u=new URL("".concat(this.url,"/").concat(e));let h;d&&"any"!==d&&(c["x-region"]=d,u.searchParams.set("forceFunctionRegion",d)),l&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&("undefined"!==typeof Blob&&l instanceof Blob||l instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",h=l):"string"===typeof l?(c["Content-Type"]="text/plain",h=l):"undefined"!==typeof FormData&&l instanceof FormData?h=l:(c["Content-Type"]="application/json",h=JSON.stringify(l)));const p=yield this.fetch(u.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),r),body:h}).catch(e=>{throw new s(e)}),f=p.headers.get("x-relay-error");if(f&&"true"===f)throw new i(p);if(!p.ok)throw new a(p);let g,m=(null!==(n=p.headers.get("Content-Type"))&&void 0!==n?n:"text/plain").split(";")[0].trim();return g="application/json"===m?yield p.json():"application/octet-stream"===m?yield p.blob():"text/event-stream"===m?p:"multipart/form-data"===m?yield p.formData():yield p.text(),{data:g,error:null,response:p}}catch(r){return{data:null,error:r,response:r instanceof a||r instanceof i?r.context:void 0}}})}}var d=n(7980);const{PostgrestClient:u,PostgrestQueryBuilder:h,PostgrestFilterBuilder:p,PostgrestTransformBuilder:f,PostgrestBuilder:g,PostgrestError:m}=d;const y=class{static detectEnvironment(){var e;if("undefined"!==typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!==typeof n.g&&"undefined"!==typeof n.g.WebSocket)return{type:"native",constructor:n.g.WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocketPair&&"undefined"===typeof globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!==typeof globalThis&&globalThis.EdgeRuntime||"undefined"!==typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!==typeof process){const e=process.versions;if(e&&e.node){const t=e.node,n=parseInt(t.replace(/^v/,"").split(".")[0]);return n>=22?"undefined"!==typeof globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:"Node.js ".concat(n," detected but native WebSocket not found."),workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:"Node.js ".concat(n," detected without native WebSocket support."),workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+="\n\nSuggested solution: ".concat(e.workaround)),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}},x="realtime-js/".concat("2.15.5"),b=1e4;var v,w,_,k,j,S;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(v||(v={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(w||(w={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(_||(_={})),function(e){e.websocket="websocket"}(k||(k={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(j||(j={}));class N{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"===typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const r=t.getUint8(1),s=t.getUint8(2);let i=this.HEADER_LENGTH+2;const a=n.decode(e.slice(i,i+r));i+=r;const o=n.decode(e.slice(i,i+s));i+=s;return{ref:null,topic:a,event:o,payload:JSON.parse(n.decode(e.slice(i,e.byteLength)))}}}class C{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(S||(S={}));const E=function(e,t){var n;const r=null!==(n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipTypes)&&void 0!==n?n:[];return Object.keys(t).reduce((n,s)=>(n[s]=A(s,e,t,r),n),{})},A=(e,t,n,r)=>{const s=t.find(t=>t.name===e),i=null===s||void 0===s?void 0:s.type,a=n[e];return i&&!r.includes(i)?P(i,a):T(a)},P=(e,t)=>{if("_"===e.charAt(0)){const n=e.slice(1,e.length);return R(t,n)}switch(e){case S.bool:return O(t);case S.float4:case S.float8:case S.int2:case S.int4:case S.int8:case S.numeric:case S.oid:return M(t);case S.json:case S.jsonb:return I(t);case S.timestamp:return L(t);case S.abstime:case S.date:case S.daterange:case S.int4range:case S.int8range:case S.money:case S.reltime:case S.text:case S.time:case S.timestamptz:case S.timetz:case S.tsrange:case S.tstzrange:default:return T(t)}},T=e=>e,O=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},M=e=>{if("string"===typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},I=e=>{if("string"===typeof e)try{return JSON.parse(e)}catch(t){return console.log("JSON parse error: ".concat(t)),e}return e},R=(e,t)=>{if("string"!==typeof e)return e;const n=e.length-1,r=e[n];if("{"===e[0]&&"}"===r){let r;const i=e.slice(1,n);try{r=JSON.parse("["+i+"]")}catch(s){r=i?i.split(","):[]}return r.map(e=>P(t,e))}return e},L=e=>"string"===typeof e?e.replace(" ","T"):e,D=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class z{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:b;this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive(e){let{status:t,response:n}=e;this.recHooks.filter(e=>e.status===t).forEach(e=>e.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var F,U,B,V;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(F||(F={}));class W{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null===t||void 0===t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.joinRef=this.channel._joinRef(),this.state=W.syncState(this.state,e,t,n),this.pendingDiffs.forEach(e=>{this.state=W.syncDiff(this.state,e,t,n)}),this.pendingDiffs=[],r()}),this.channel._on(n.diff,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=W.syncDiff(this.state,e,t,n),r())}),this.onJoin((e,t,n)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:n})}),this.onLeave((e,t,n)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:n})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,r){const s=this.cloneDeep(e),i=this.transformState(t),a={},o={};return this.map(s,(e,t)=>{i[e]||(o[e]=t)}),this.map(i,(e,t)=>{const n=s[e];if(n){const r=t.map(e=>e.presence_ref),s=n.map(e=>e.presence_ref),i=t.filter(e=>s.indexOf(e.presence_ref)<0),l=n.filter(e=>r.indexOf(e.presence_ref)<0);i.length>0&&(a[e]=i),l.length>0&&(o[e]=l)}else a[e]=t}),this.syncDiff(s,{joins:a,leaves:o},n,r)}static syncDiff(e,t,n,r){const{joins:s,leaves:i}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(s,(t,r)=>{var s;const i=null!==(s=e[t])&&void 0!==s?s:[];if(e[t]=this.cloneDeep(r),i.length>0){const n=e[t].map(e=>e.presence_ref),r=i.filter(e=>n.indexOf(e.presence_ref)<0);e[t].unshift(...r)}n(t,i,r)}),this.map(i,(t,n)=>{let s=e[t];if(!s)return;const i=n.map(e=>e.presence_ref);s=s.filter(e=>i.indexOf(e.presence_ref)<0),e[t]=s,r(t,s,n),0===s.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const r=e[n];return t[n]="metas"in r?r.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(U||(U={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(B||(B={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(V||(V={}));class H{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},n=arguments.length>2?arguments[2]:void 0;this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=w.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new z(this,_.join,this.params,this.timeout),this.rejoinTimer=new C(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=w.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel","close ".concat(this.topic," ").concat(this._joinRef())),this.state=w.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=w.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel","timeout ".concat(this.topic),this.joinPush.timeout),this.state=w.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=w.errored,this.rejoinTimer.scheduleTimeout())}),this._on(_.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new W(this),this.broadcastEndpointURL=D(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;var n,r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==w.closed){const{config:{broadcast:i,presence:a,private:o}}=this.params,l=null!==(r=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map(e=>e.filter))&&void 0!==r?r:[],c=!!this.bindings[B.PRESENCE]&&this.bindings[B.PRESENCE].length>0||!0===(null===(s=this.params.config.presence)||void 0===s?void 0:s.enabled),d={},u={broadcast:i,presence:Object.assign(Object.assign({},a),{enabled:c}),postgres_changes:l,private:o};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(t=>null===e||void 0===e?void 0:e(V.CHANNEL_ERROR,t)),this._onClose(()=>null===e||void 0===e?void 0:e(V.CLOSED)),this.updateJoinPayload(Object.assign({config:u},d)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async t=>{let{postgres_changes:n}=t;var r;if(this.socket.setAuth(),void 0!==n){const t=this.bindings.postgres_changes,s=null!==(r=null===t||void 0===t?void 0:t.length)&&void 0!==r?r:0,i=[];for(let r=0;r<s;r++){const s=t[r],{filter:{event:a,schema:o,table:l,filter:c}}=s,d=n&&n[r];if(!d||d.event!==a||d.schema!==o||d.table!==l||d.filter!==c)return this.unsubscribe(),this.state=w.errored,void(null===e||void 0===e||e(V.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));i.push(Object.assign(Object.assign({},s),{id:d.id}))}return this.bindings.postgres_changes=i,void(e&&e(V.SUBSCRIBED))}null===e||void 0===e||e(V.SUBSCRIBED)}).receive("error",t=>{this.state=w.errored,null===e||void 0===e||e(V.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null===e||void 0===e||e(V.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this.state===w.joined&&e===B.PRESENCE&&(this.socket.log("channel","resubscribe to ".concat(this.topic," due to change in presence callbacks on joined channel")),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,n)}async send(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,r;if(this._canPush()||"broadcast"!==e.type)return new Promise(n=>{var r,s,i;const a=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(i=null===(s=null===(r=this.params)||void 0===r?void 0:r.config)||void 0===s?void 0:s.broadcast)||void 0===i?void 0:i.ack)||n("ok"),a.receive("ok",()=>n("ok")),a.receive("error",()=>n("error")),a.receive("timeout",()=>n("timed out"))});{const{event:i,payload:a}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?"Bearer ".concat(this.socket.accessTokenValue):"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(n=t.timeout)&&void 0!==n?n:this.timeout);return await(null===(r=e.body)||void 0===r?void 0:r.cancel()),e.ok?"ok":"error"}catch(s){return"AbortError"===s.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=w.leaving;const t=()=>{this.socket.log("channel","leave ".concat(this.topic)),this._trigger(_.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(r=>{n=new z(this,_.leave,{},e),n.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{null===n||void 0===n||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=w.closed,this.bindings={}}async _fetchWithTimeout(e,t,n){const r=new AbortController,s=setTimeout(()=>r.abort(),n),i=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(s),i}_push(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw"tried to push '".concat(e,"' to '").concat(this.topic,"' before joining. Use channel.subscribe() before pushing events");let r=new z(this,e,t,n);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel","discarded push due to buffer overflow: ".concat(e.event),e.payload))}}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var r,s;const i=e.toLocaleLowerCase(),{close:a,error:o,leave:l,join:c}=_;if(n&&[a,o,l,c].indexOf(i)>=0&&n!==this._joinRef())return;let d=this._onMessage(i,t,n);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?null===(r=this.bindings.postgres_changes)||void 0===r||r.filter(e=>{var t,n,r;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(r=null===(n=e.filter)||void 0===n?void 0:n.event)||void 0===r?void 0:r.toLocaleLowerCase())===i}).map(e=>e.callback(d,n)):null===(s=this.bindings[i])||void 0===s||s.filter(e=>{var n,r,s,a,o,l;if(["broadcast","presence","postgres_changes"].includes(i)){if("id"in e){const i=e.id,a=null===(n=e.filter)||void 0===n?void 0:n.event;return i&&(null===(r=t.ids)||void 0===r?void 0:r.includes(i))&&("*"===a||(null===a||void 0===a?void 0:a.toLocaleLowerCase())===(null===(s=t.data)||void 0===s?void 0:s.type.toLocaleLowerCase()))}{const n=null===(o=null===(a=null===e||void 0===e?void 0:e.filter)||void 0===a?void 0:a.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===n||n===(null===(l=null===t||void 0===t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===i}).map(e=>{if("object"===typeof d&&"ids"in d){const e=d.data,{schema:t,table:n,commit_timestamp:r,type:s,errors:i}=e,a={schema:t,table:n,commit_timestamp:r,eventType:s,new:{},old:{},errors:i};d=Object.assign(Object.assign({},a),this._getPayloadRecords(e))}e.callback(d,n)})}_isClosed(){return this.state===w.closed}_isJoined(){return this.state===w.joined}_isJoining(){return this.state===w.joining}_isLeaving(){return this.state===w.leaving}_replyEventName(e){return"chan_reply_".concat(e)}_on(e,t,n){const r=e.toLocaleLowerCase(),s={type:r,filter:t,callback:n};return this.bindings[r]?this.bindings[r].push(s):this.bindings[r]=[s],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(e=>{var r;return!((null===(r=e.type)||void 0===r?void 0:r.toLocaleLowerCase())===n&&H.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(_.close,{},e)}_onError(e){this._on(_.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=w.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=E(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=E(e.columns,e.old_record)),t}}const q=()=>{},K=25e3,$=10,G=100,J=[1e3,2e3,5e3,1e4];class Y{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=b,this.transport=null,this.heartbeatIntervalMs=K,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=q,this.ref=0,this.reconnectTimer=null,this.logger=q,this.conn=null,this.sendBuffer=[],this.serializer=new N,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,4630)).then(e=>{let{default:n}=e;return n(...t)}).catch(e=>{throw new Error("Failed to load @supabase/node-fetch: ".concat(e.message,". ")+"This is required for HTTP requests in Node.js environments without native fetch.")})}:fetch),function(){return t(...arguments)}},!(null===(r=null===t||void 0===t?void 0:t.params)||void 0===r?void 0:r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint="".concat(e,"/").concat(k.websocket),this.httpEndpoint=D(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null===t||void 0===t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=y.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error("".concat(t,"\n\n")+'To use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })');throw new Error("WebSocket not available: ".concat(t))}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,null!==t&&void 0!==t?t:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case v.connecting:return j.Connecting;case v.open:return j.Open;case v.closing:return j.Closing;default:return j.Closed}}isConnected(){return this.connectionState()===j.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};const n="realtime:".concat(e),r=this.getChannels().find(e=>e.topic===n);if(r)return r;{const n=new H("realtime:".concat(e),t,this);return this.channels.push(n),n}}push(e){const{topic:t,event:n,payload:r,ref:s}=e,i=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push","".concat(t," ").concat(n," (").concat(s,")"),r),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}return this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},G)}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}else try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",'leaving duplicate topic "'.concat(e,'"')),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event)try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(o){this.log("error","error in heartbeat callback",o)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:n,payload:r,ref:s}=e,i=s?"(".concat(s,")"):"",a=r.status||"";this.log("receive","".concat(a," ").concat(t," ").concat(n," ").concat(i).trim(),r),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(n,r,s)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport","connected to ".concat(this.endpointURL())),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker","starting worker for from ".concat(this.workerUrl)):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport","".concat(e)),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(_.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?",r=new URLSearchParams(t);return"".concat(e).concat(n).concat(r)}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e=t||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(t=>{const n={access_token:e,version:x};e&&t.updateJoinPayload(n),t.joinedOnce&&t._isJoined()&&t._push(_.access_token,{access_token:e})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"general";this.setAuth().catch(t=>{this.log("error","error setting auth in ".concat(e),t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(t)}catch(r){this.log("error","error in ".concat(e," callback"),r)}})}catch(n){this.log("error","error triggering ".concat(e," callbacks"),n)}}_setupReconnectionTimer(){this.reconnectTimer=new C(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},$)},this.reconnectAfterMs)}_initializeOptions(e){var t,n,r,s,i,a,o,l,c;if(this.transport=null!==(t=null===e||void 0===e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(n=null===e||void 0===e?void 0:e.timeout)&&void 0!==n?n:b,this.heartbeatIntervalMs=null!==(r=null===e||void 0===e?void 0:e.heartbeatIntervalMs)&&void 0!==r?r:K,this.worker=null!==(s=null===e||void 0===e?void 0:e.worker)&&void 0!==s&&s,this.accessToken=null!==(i=null===e||void 0===e?void 0:e.accessToken)&&void 0!==i?i:null,this.heartbeatCallback=null!==(a=null===e||void 0===e?void 0:e.heartbeatCallback)&&void 0!==a?a:q,(null===e||void 0===e?void 0:e.params)&&(this.params=e.params),(null===e||void 0===e?void 0:e.logger)&&(this.logger=e.logger),((null===e||void 0===e?void 0:e.logLevel)||(null===e||void 0===e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(o=null===e||void 0===e?void 0:e.reconnectAfterMs)&&void 0!==o?o:e=>J[e-1]||1e4,this.encode=null!==(l=null===e||void 0===e?void 0:e.encode)&&void 0!==l?l:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(c=null===e||void 0===e?void 0:e.decode)&&void 0!==c?c:this.serializer.decode.bind(this.serializer),this.worker){if("undefined"!==typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null===e||void 0===e?void 0:e.workerUrl}}}class Q extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function X(e){return"object"===typeof e&&null!==e&&"__isStorageError"in e}class Z extends Q{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ee extends Q{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var te=function(e,t,n,r){return new(n||(n=Promise))(function(s,i){function a(e){try{l(r.next(e))}catch(t){i(t)}}function o(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((r=r.apply(e,t||[])).next())})};const ne=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,4630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}},re=e=>{if(Array.isArray(e))return e.map(e=>re(e));if("function"===typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(e=>{let[n,r]=e;const s=n.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[s]=re(r)}),t};var se=function(e,t,n,r){return new(n||(n=Promise))(function(s,i){function a(e){try{l(r.next(e))}catch(t){i(t)}}function o(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((r=r.apply(e,t||[])).next())})};const ie=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ae=(e,t,r)=>se(void 0,void 0,void 0,function*(){const s=yield te(void 0,void 0,void 0,function*(){return"undefined"===typeof Response?(yield Promise.resolve().then(n.bind(n,4630))).Response:Response});e instanceof s&&!(null===r||void 0===r?void 0:r.noResolveJson)?e.json().then(n=>{const r=e.status||500,s=(null===n||void 0===n?void 0:n.statusCode)||r+"";t(new Z(ie(n),r,s))}).catch(e=>{t(new ee(ie(e),e))}):t(new ee(ie(e),e))}),oe=(e,t,n,r)=>{const s={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"!==e&&r?((e=>{if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)})(r)?(s.headers=Object.assign({"Content-Type":"application/json"},null===t||void 0===t?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,(null===t||void 0===t?void 0:t.duplex)&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),n)):s};function le(e,t,n,r,s,i){return se(this,void 0,void 0,function*(){return new Promise((a,o)=>{e(n,oe(t,r,s,i)).then(e=>{if(!e.ok)throw e;return(null===r||void 0===r?void 0:r.noResolveJson)?e:e.json()}).then(e=>a(e)).catch(e=>ae(e,o,r))})})}function ce(e,t,n,r){return se(this,void 0,void 0,function*(){return le(e,"GET",t,n,r)})}function de(e,t,n,r,s){return se(this,void 0,void 0,function*(){return le(e,"POST",t,r,s,n)})}function ue(e,t,n,r,s){return se(this,void 0,void 0,function*(){return le(e,"PUT",t,r,s,n)})}function he(e,t,n,r,s){return se(this,void 0,void 0,function*(){return le(e,"DELETE",t,r,s,n)})}var pe=function(e,t,n,r){return new(n||(n=Promise))(function(s,i){function a(e){try{l(r.next(e))}catch(t){i(t)}}function o(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((r=r.apply(e,t||[])).next())})};const fe={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ge={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class me{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=n,this.fetch=ne(r)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,n,r){return pe(this,void 0,void 0,function*(){try{let s;const i=Object.assign(Object.assign({},ge),r);let a=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(i.upsert)});const o=i.metadata;"undefined"!==typeof Blob&&n instanceof Blob?(s=new FormData,s.append("cacheControl",i.cacheControl),o&&s.append("metadata",this.encodeMetadata(o)),s.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(s=n,s.append("cacheControl",i.cacheControl),o&&s.append("metadata",this.encodeMetadata(o))):(s=n,a["cache-control"]="max-age=".concat(i.cacheControl),a["content-type"]=i.contentType,o&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),(null===r||void 0===r?void 0:r.headers)&&(a=Object.assign(Object.assign({},a),r.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),d=yield("PUT"==e?ue:de)(this.fetch,"".concat(this.url,"/object/").concat(c),s,Object.assign({headers:a},(null===i||void 0===i?void 0:i.duplex)?{duplex:i.duplex}:{}));return{data:{path:l,id:d.Id,fullPath:d.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(X(s))return{data:null,error:s};throw s}})}upload(e,t,n){return pe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,r){return pe(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),i=this._getFinalPath(s),a=new URL(this.url+"/object/upload/sign/".concat(i));a.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:ge.upsert},r),i=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!==typeof Blob&&n instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(e=n,e.append("cacheControl",t.cacheControl)):(e=n,i["cache-control"]="max-age=".concat(t.cacheControl),i["content-type"]=t.contentType);return{data:{path:s,fullPath:(yield ue(this.fetch,a.toString(),e,{headers:i})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(X(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(e,t){return pe(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);(null===t||void 0===t?void 0:t.upsert)&&(r["x-upsert"]="true");const s=yield de(this.fetch,"".concat(this.url,"/object/upload/sign/").concat(n),{},{headers:r}),i=new URL(this.url+s.url),a=i.searchParams.get("token");if(!a)throw new Q("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:a},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(X(n))return{data:null,error:n};throw n}})}update(e,t,n){return pe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return pe(this,void 0,void 0,function*(){try{return{data:yield de(this.fetch,"".concat(this.url,"/object/move"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(X(r))return{data:null,error:r};throw r}})}copy(e,t,n){return pe(this,void 0,void 0,function*(){try{return{data:{path:(yield de(this.fetch,"".concat(this.url,"/object/copy"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(X(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,n){return pe(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),s=yield de(this.fetch,"".concat(this.url,"/object/sign/").concat(r),Object.assign({expiresIn:t},(null===n||void 0===n?void 0:n.transform)?{transform:n.transform}:{}),{headers:this.headers});const i=(null===n||void 0===n?void 0:n.download)?"&download=".concat(!0===n.download?"":n.download):"";return s={signedUrl:encodeURI("".concat(this.url).concat(s.signedURL).concat(i))},{data:s,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(X(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,n){return pe(this,void 0,void 0,function*(){try{const r=yield de(this.fetch,"".concat(this.url,"/object/sign/").concat(this.bucketId),{expiresIn:t,paths:e},{headers:this.headers}),s=(null===n||void 0===n?void 0:n.download)?"&download=".concat(!0===n.download?"":n.download):"";return{data:r.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI("".concat(this.url).concat(e.signedURL).concat(s)):null})),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(X(r))return{data:null,error:r};throw r}})}download(e,t){return pe(this,void 0,void 0,function*(){const n="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image/authenticated":"object",r=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{}),s=r?"?".concat(r):"";try{const t=this._getFinalPath(e),r=yield ce(this.fetch,"".concat(this.url,"/").concat(n,"/").concat(t).concat(s),{headers:this.headers,noResolveJson:!0});return{data:yield r.blob(),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(X(i))return{data:null,error:i};throw i}})}info(e){return pe(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield ce(this.fetch,"".concat(this.url,"/object/info/").concat(t),{headers:this.headers});return{data:re(e),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(X(n))return{data:null,error:n};throw n}})}exists(e){return pe(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,n,r){return se(this,void 0,void 0,function*(){return le(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}(this.fetch,"".concat(this.url,"/object/").concat(t),{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(X(n)&&n instanceof ee){const e=n.originalError;if([400,404].includes(null===e||void 0===e?void 0:e.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],s=(null===t||void 0===t?void 0:t.download)?"download=".concat(!0===t.download?"":t.download):"";""!==s&&r.push(s);const i="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image":"object",a=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{});""!==a&&r.push(a);let o=r.join("&");return""!==o&&(o="?".concat(o)),{data:{publicUrl:encodeURI("".concat(this.url,"/").concat(i,"/public/").concat(n).concat(o))}}}remove(e){return pe(this,void 0,void 0,function*(){try{return{data:yield he(this.fetch,"".concat(this.url,"/object/").concat(this.bucketId),{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(X(t))return{data:null,error:t};throw t}})}list(e,t,n){return pe(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},fe),t),{prefix:e||""});return{data:yield de(this.fetch,"".concat(this.url,"/object/list/").concat(this.bucketId),r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(X(r))return{data:null,error:r};throw r}})}listV2(e,t){return pe(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield de(this.fetch,"".concat(this.url,"/object/list-v2/").concat(this.bucketId),n,{headers:this.headers},t),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(X(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!==typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return"".concat(this.bucketId,"/").concat(e.replace(/^\/+/,""))}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push("width=".concat(e.width)),e.height&&t.push("height=".concat(e.height)),e.resize&&t.push("resize=".concat(e.resize)),e.format&&t.push("format=".concat(e.format)),e.quality&&t.push("quality=".concat(e.quality)),t.join("&")}}const ye={"X-Client-Info":"storage-js/".concat("2.12.1")};var xe=function(e,t,n,r){return new(n||(n=Promise))(function(s,i){function a(e){try{l(r.next(e))}catch(t){i(t)}}function o(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((r=r.apply(e,t||[])).next())})};class be{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;this.shouldThrowOnError=!1;const s=new URL(e);if(null===r||void 0===r?void 0:r.useNewHostname){/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase."))}this.url=s.href,this.headers=Object.assign(Object.assign({},ye),t),this.fetch=ne(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return xe(this,void 0,void 0,function*(){try{return{data:yield ce(this.fetch,"".concat(this.url,"/bucket"),{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(X(e))return{data:null,error:e};throw e}})}getBucket(e){return xe(this,void 0,void 0,function*(){try{return{data:yield ce(this.fetch,"".concat(this.url,"/bucket/").concat(e),{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(X(t))return{data:null,error:t};throw t}})}createBucket(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};return xe(this,void 0,void 0,function*(){try{return{data:yield de(this.fetch,"".concat(this.url,"/bucket"),{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(X(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return xe(this,void 0,void 0,function*(){try{return{data:yield ue(this.fetch,"".concat(this.url,"/bucket/").concat(e),{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(X(n))return{data:null,error:n};throw n}})}emptyBucket(e){return xe(this,void 0,void 0,function*(){try{return{data:yield de(this.fetch,"".concat(this.url,"/bucket/").concat(e,"/empty"),{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(X(t))return{data:null,error:t};throw t}})}deleteBucket(e){return xe(this,void 0,void 0,function*(){try{return{data:yield he(this.fetch,"".concat(this.url,"/bucket/").concat(e),{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(X(t))return{data:null,error:t};throw t}})}}class ve extends be{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2?arguments[2]:void 0,arguments.length>3?arguments[3]:void 0)}from(e){return new me(this.url,this.headers,e,this.fetch)}}let we="";we="undefined"!==typeof Deno?"deno":"undefined"!==typeof document?"web":"undefined"!==typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const _e={headers:{"X-Client-Info":"supabase-js-".concat(we,"/").concat("2.57.4")}},ke={schema:"public"},je={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Se={};var Ne=n(4630),Ce=function(e,t,n,r){return new(n||(n=Promise))(function(s,i){function a(e){try{l(r.next(e))}catch(t){i(t)}}function o(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((r=r.apply(e,t||[])).next())})};const Ee=e=>{let t;return t=e||("undefined"===typeof fetch?Ne.default:fetch),function(){return t(...arguments)}},Ae=(e,t,n)=>{const r=Ee(n),s="undefined"===typeof Headers?Ne.Headers:Headers;return(n,i)=>Ce(void 0,void 0,void 0,function*(){var a;const o=null!==(a=yield t())&&void 0!==a?a:e;let l=new s(null===i||void 0===i?void 0:i.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization","Bearer ".concat(o)),r(n,Object.assign(Object.assign({},i),{headers:l}))})};var Pe=function(e,t,n,r){return new(n||(n=Promise))(function(s,i){function a(e){try{l(r.next(e))}catch(t){i(t)}}function o(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((r=r.apply(e,t||[])).next())})};const Te="2.71.1",Oe=3e4,Me=9e4,Ie={"X-Client-Info":"gotrue-js/".concat(Te)},Re="X-Supabase-Api-Version",Le={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},De=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class ze extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function Fe(e){return"object"===typeof e&&null!==e&&"__isAuthError"in e}class Ue extends ze{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}class Be extends ze{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Ve extends ze{constructor(e,t,n,r){super(e,n,r),this.name=t,this.status=n}}class We extends Ve{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class He extends Ve{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class qe extends Ve{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ke extends Ve{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class $e extends Ve{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ge extends Ve{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Je(e){return Fe(e)&&"AuthRetryableFetchError"===e.name}class Ye extends Ve{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class Qe extends Ve{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Xe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ze=" \t\n\r=".split(""),et=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Ze.length;t+=1)e[Ze[t].charCodeAt(0)]=-2;for(let t=0;t<Xe.length;t+=1)e[Xe[t].charCodeAt(0)]=t;return e})();function tt(e,t,n){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(Xe[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(Xe[e]),t.queuedBits-=6}}function nt(e,t,n){const r=et[e];if(!(r>-1)){if(-2===r)return;throw new Error('Invalid Base64-URL character "'.concat(String.fromCharCode(e),'"'))}for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function rt(e){const t=[],n=e=>{t.push(String.fromCodePoint(e))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=e=>{!function(e,t,n){if(0===t.utf8seq){if(e<=127)return void n(e);for(let n=1;n<6;n+=1)if(0===(e>>7-n&1)){t.utf8seq=n;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&n(t.codepoint)}}(e,r,n)};for(let a=0;a<e.length;a+=1)nt(e.charCodeAt(a),s,i);return t.join("")}function st(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error("Unrecognized Unicode codepoint: ".concat(e.toString(16)))}t(e)}function it(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const t=1024*(r-55296)&65535;r=65536+(e.charCodeAt(n+1)-56320&65535|t),n+=1}st(r,t)}}function at(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};for(let s=0;s<e.length;s+=1)nt(e.charCodeAt(s),n,r);return new Uint8Array(t)}function ot(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};return e.forEach(e=>tt(e,n,r)),tt(null,n,r),t.join("")}const lt=()=>"undefined"!==typeof window&&"undefined"!==typeof document,ct={tested:!1,writable:!1},dt=()=>{if(!lt())return!1;try{if("object"!==typeof globalThis.localStorage)return!1}catch(t){return!1}if(ct.tested)return ct.writable;const e="lswt-".concat(Math.random()).concat(Math.random());try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ct.tested=!0,ct.writable=!0}catch(t){ct.tested=!0,ct.writable=!1}return ct.writable};const ut=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,4630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}},ht=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},pt=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(r){return n}},ft=async(e,t)=>{await e.removeItem(t)};class gt{constructor(){this.promise=new gt.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function mt(e){const t=e.split(".");if(3!==t.length)throw new Qe("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!De.test(t[n]))throw new Qe("JWT not in base64url format");return{header:JSON.parse(rt(t[0])),payload:JSON.parse(rt(t[1])),signature:at(t[2]),raw:{header:t[0],payload:t[1]}}}function yt(e){return("0"+e.toString(16)).substr(-2)}async function xt(e){if(!("undefined"!==typeof crypto&&"undefined"!==typeof crypto.subtle&&"undefined"!==typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(n);return Array.from(r).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function bt(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(){const e=new Uint32Array(56);if("undefined"===typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let n="";for(let r=0;r<56;r++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(e),Array.from(e,yt).join("")}();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await ht(e,"".concat(t,"-code-verifier"),s);const i=await xt(r);return[i,r===i?"plain":"s256"]}gt.promiseConstructor=Promise;const vt=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const wt=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function _t(e){if(!wt.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function kt(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"===typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "'.concat(t,'" property of the session object is not supported. Please use getUser() instead.'))},set:(e,t)=>{throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "'.concat(t,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))},deleteProperty:(e,t)=>{throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "'.concat(t,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))}})}function jt(e){return JSON.parse(JSON.stringify(e))}var St=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n};const Nt=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Ct=[502,503,504];async function Et(e){var t,n;if(!("object"===typeof(n=e)&&null!==n&&"status"in n&&"ok"in n&&"json"in n&&"function"===typeof n.json))throw new Ge(Nt(e),0);if(Ct.includes(e.status))throw new Ge(Nt(e),e.status);let r,s;try{r=await e.json()}catch(a){throw new Be(Nt(a),a)}const i=function(e){const t=e.headers.get(Re);if(!t)return null;if(!t.match(vt))return null;try{return new Date("".concat(t,"T00:00:00.0Z"))}catch(a){return null}}(e);if(i&&i.getTime()>=Le.timestamp&&"object"===typeof r&&r&&"string"===typeof r.code?s=r.code:"object"===typeof r&&r&&"string"===typeof r.error_code&&(s=r.error_code),s){if("weak_password"===s)throw new Ye(Nt(r),e.status,(null===(t=r.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===s)throw new We}else if("object"===typeof r&&r&&"object"===typeof r.weak_password&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0))throw new Ye(Nt(r),e.status,r.weak_password.reasons);throw new Ue(Nt(r),e.status||500,s)}async function At(e,t,n,r){var s;const i=Object.assign({},null===r||void 0===r?void 0:r.headers);i[Re]||(i[Re]=Le.name),(null===r||void 0===r?void 0:r.jwt)&&(i.Authorization="Bearer ".concat(r.jwt));const a=null!==(s=null===r||void 0===r?void 0:r.query)&&void 0!==s?s:{};(null===r||void 0===r?void 0:r.redirectTo)&&(a.redirect_to=r.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await async function(e,t,n,r,s,i){const a=((e,t,n,r)=>{const s={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null===t||void 0===t?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))})(t,r,s,i);let o;try{o=await e(n,Object.assign({},a))}catch(l){throw console.error(l),new Ge(Nt(l),0)}o.ok||await Et(o);if(null===r||void 0===r?void 0:r.noResolveJson)return o;try{return await o.json()}catch(l){await Et(l)}}(e,t,n+o,{headers:i,noResolveJson:null===r||void 0===r?void 0:r.noResolveJson},{},null===r||void 0===r?void 0:r.body);return(null===r||void 0===r?void 0:r.xform)?null===r||void 0===r?void 0:r.xform(l):{data:Object.assign({},l),error:null}}function Pt(e){var t;let n=null;var r;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r)));return{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Tt(e){const t=Pt(e);return!t.error&&e.weak_password&&"object"===typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"===typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function Ot(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Mt(e){return{data:e,error:null}}function It(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=e,a=St(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},user:Object.assign({},a)},error:null}}function Rt(e){return e}const Lt=["global","local","others"];var Dt=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n};class zt{constructor(e){let{url:t="",headers:n={},fetch:r}=e;this.url=t,this.headers=n,this.fetch=ut(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lt[0];if(Lt.indexOf(t)<0)throw new Error("@supabase/auth-js: Parameter scope must be one of ".concat(Lt.join(", ")));try{return await At(this.fetch,"POST","".concat(this.url,"/logout?scope=").concat(t),{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Fe(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await At(this.fetch,"POST","".concat(this.url,"/invite"),{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Ot})}catch(n){if(Fe(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=Dt(e,["options"]),r=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(r.new_email=null===n||void 0===n?void 0:n.newEmail,delete r.newEmail),await At(this.fetch,"POST","".concat(this.url,"/admin/generate_link"),{body:r,headers:this.headers,xform:It,redirectTo:null===t||void 0===t?void 0:t.redirectTo})}catch(t){if(Fe(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await At(this.fetch,"POST","".concat(this.url,"/admin/users"),{body:e,headers:this.headers,xform:Ot})}catch(t){if(Fe(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,r,s,i,a,o;try{const l={nextPage:null,lastPage:0,total:0},c=await At(this.fetch,"GET","".concat(this.url,"/admin/users"),{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null===e||void 0===e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(s=null===(r=null===e||void 0===e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==s?s:""},xform:Rt});if(c.error)throw c.error;const d=await c.json(),u=null!==(i=c.headers.get("x-total-count"))&&void 0!==i?i:0,h=null!==(o=null===(a=c.headers.get("link"))||void 0===a?void 0:a.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l["".concat(n,"Page")]=t}),l.total=parseInt(u)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(Fe(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){_t(e);try{return await At(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,xform:Ot})}catch(t){if(Fe(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){_t(e);try{return await At(this.fetch,"PUT","".concat(this.url,"/admin/users/").concat(e),{body:t,headers:this.headers,xform:Ot})}catch(n){if(Fe(n))return{data:{user:null},error:n};throw n}}async deleteUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];_t(e);try{return await At(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,body:{should_soft_delete:t},xform:Ot})}catch(n){if(Fe(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){_t(e.userId);try{const{data:t,error:n}=await At(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e.userId,"/factors"),{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(t){if(Fe(t))return{data:null,error:t};throw t}}async _deleteFactor(e){_t(e.userId),_t(e.id);try{return{data:await At(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e.userId,"/factors/").concat(e.id),{headers:this.headers}),error:null}}catch(t){if(Fe(t))return{data:null,error:t};throw t}}}function Ft(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Ut=!!(globalThis&&dt()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class Bt extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Vt extends Bt{}async function Wt(e,t,n){Ut&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Ut&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async r=>{if(!r){if(0===t)throw Ut&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Vt('Acquiring an exclusive Navigator LockManager lock "'.concat(e,'" immediately failed'));if(Ut)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}Ut&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,r.name);try{return await n()}finally{Ut&&console.log("@supabase/gotrue-js: navigatorLock: released",e,r.name)}}))}!function(){if("object"!==typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!==typeof self&&(self.globalThis=self)}}();const Ht={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ie,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function qt(e,t,n){return await n()}const Kt={};class $t{constructor(e){var t,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=$t.nextInstanceID,$t.nextInstanceID+=1,this.instanceID>0&&lt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},Ht),e);if(this.logDebugMessages=!!r.debug,"function"===typeof r.debug&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new zt({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=ut(r.fetch),this.lock=r.lock||qt,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:lt()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=Wt:this.lock=qt,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:dt()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ft(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=Ft(this.memoryStorage)),lt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}null===(n=this.broadcastChannel)||void 0===n||n.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}get jwks(){var e,t;return null!==(t=null===(e=Kt[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){Kt[this.storageKey]=Object.assign(Object.assign({},Kt[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=Kt[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Kt[this.storageKey]=Object.assign(Object.assign({},Kt[this.storageKey]),{cachedAt:e})}_debug(){if(this.logDebugMessages){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger("GoTrueClient@".concat(this.instanceID," (").concat(Te,") ").concat((new Date).toISOString()),...t)}return this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},n=new URL(e);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach((e,n)=>{t[n]=e})}catch(r){}return n.searchParams.forEach((e,n)=>{t[n]=e}),t}(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),lt()&&this.detectSessionInUrl&&"none"!==n){const{data:r,error:s}=await this._getSessionFromURL(t,n);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),function(e){return Fe(e)&&"AuthImplicitGrantRedirectError"===e.name}(s)){const t=null===(e=s.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:s}}return await this._removeSession(),{error:s}}const{session:i,redirectType:a}=r;return this._debug("#_initialize()","detected session in URL",i,"redirect type",a),await this._saveSession(i),setTimeout(async()=>{"recovery"===a?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Fe(t)?{error:t}:{error:new Be("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,r;try{const s=await At(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{data:null!==(n=null===(t=null===e||void 0===e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==n?n:{},gotrue_meta_security:{captcha_token:null===(r=null===e||void 0===e?void 0:e.options)||void 0===r?void 0:r.captchaToken}},xform:Pt}),{data:i,error:a}=s;if(a||!i)return{data:{user:null,session:null},error:a};const o=i.session,l=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(s){if(Fe(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var t,n,r;try{let s;if("email"in e){const{email:n,password:r,options:i}=e;let a=null,o=null;"pkce"===this.flowType&&([a,o]=await bt(this.storage,this.storageKey)),s=await At(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,redirectTo:null===i||void 0===i?void 0:i.emailRedirectTo,body:{email:n,password:r,data:null!==(t=null===i||void 0===i?void 0:i.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken},code_challenge:a,code_challenge_method:o},xform:Pt})}else{if(!("phone"in e))throw new qe("You must provide either an email or phone number and a password");{const{phone:t,password:i,options:a}=e;s=await At(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{phone:t,password:i,data:null!==(n=null===a||void 0===a?void 0:a.data)&&void 0!==n?n:{},channel:null!==(r=null===a||void 0===a?void 0:a.channel)&&void 0!==r?r:"sms",gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken}},xform:Pt})}}const{data:i,error:a}=s;if(a||!i)return{data:{user:null,session:null},error:a};const o=i.session,l=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(s){if(Fe(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let t;if("email"in e){const{email:n,password:r,options:s}=e;t=await At(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{email:n,password:r,gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken}},xform:Tt})}else{if(!("phone"in e))throw new qe("You must provide either an email or phone number and a password");{const{phone:n,password:r,options:s}=e;t=await At(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{phone:n,password:r,gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken}},xform:Tt})}}const{data:n,error:r}=t;return r?{data:{user:null,session:null},error:r}:n&&n.session&&n.user?(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r}):{data:{user:null,session:null},error:new He}}catch(t){if(Fe(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,r,s;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:null===(s=e.options)||void 0===s?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if("solana"===t)return await this.signInWithSolana(e);throw new Error('@supabase/auth-js: Unsupported chain "'.concat(t,'"'))}async signInWithSolana(e){var t,n,r,s,i,a,o,l,c,d,u,h;let p,f;if("message"in e)p=e.message,f=e.signature;else{const{chain:u,wallet:h,statement:g,options:m}=e;let y;if(lt())if("object"===typeof h)y=h;else{const e=window;if(!("solana"in e)||"object"!==typeof e.solana||!("signIn"in e.solana&&"function"===typeof e.solana.signIn||"signMessage"in e.solana&&"function"===typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");y=e.solana}else{if("object"!==typeof h||!(null===m||void 0===m?void 0:m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=h}const x=new URL(null!==(t=null===m||void 0===m?void 0:m.url)&&void 0!==t?t:window.location.href);if("signIn"in y&&y.signIn){const e=await y.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null===m||void 0===m?void 0:m.signInWithSolana),{version:"1",domain:x.host,uri:x.href}),g?{statement:g}:null));let t;if(Array.isArray(e)&&e[0]&&"object"===typeof e[0])t=e[0];else{if(!(e&&"object"===typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"===typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");p="string"===typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),f=t.signature}else{if(!("signMessage"in y)||"function"!==typeof y.signMessage||!("publicKey"in y)||"object"!==typeof y||!y.publicKey||!("toBase58"in y.publicKey)||"function"!==typeof y.publicKey.toBase58)throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=["".concat(x.host," wants you to sign in with your Solana account:"),y.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1","URI: ".concat(x.href),"Issued At: ".concat(null!==(r=null===(n=null===m||void 0===m?void 0:m.signInWithSolana)||void 0===n?void 0:n.issuedAt)&&void 0!==r?r:(new Date).toISOString()),...(null===(s=null===m||void 0===m?void 0:m.signInWithSolana)||void 0===s?void 0:s.notBefore)?["Not Before: ".concat(m.signInWithSolana.notBefore)]:[],...(null===(i=null===m||void 0===m?void 0:m.signInWithSolana)||void 0===i?void 0:i.expirationTime)?["Expiration Time: ".concat(m.signInWithSolana.expirationTime)]:[],...(null===(a=null===m||void 0===m?void 0:m.signInWithSolana)||void 0===a?void 0:a.chainId)?["Chain ID: ".concat(m.signInWithSolana.chainId)]:[],...(null===(o=null===m||void 0===m?void 0:m.signInWithSolana)||void 0===o?void 0:o.nonce)?["Nonce: ".concat(m.signInWithSolana.nonce)]:[],...(null===(l=null===m||void 0===m?void 0:m.signInWithSolana)||void 0===l?void 0:l.requestId)?["Request ID: ".concat(m.signInWithSolana.requestId)]:[],...(null===(d=null===(c=null===m||void 0===m?void 0:m.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===d?void 0:d.length)?["Resources",...m.signInWithSolana.resources.map(e=>"- ".concat(e))]:[]].join("\n");const e=await y.signMessage((new TextEncoder).encode(p),"utf8");if(!e||!(e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");f=e}}try{const{data:t,error:n}=await At(this.fetch,"POST","".concat(this.url,"/token?grant_type=web3"),{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:ot(f)},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:Pt});if(n)throw n;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:n}):{data:{user:null,session:null},error:new He}}catch(g){if(Fe(g))return{data:{user:null,session:null},error:g};throw g}}async _exchangeCodeForSession(e){const t=await pt(this.storage,"".concat(this.storageKey,"-code-verifier")),[n,r]=(null!==t&&void 0!==t?t:"").split("/");try{const{data:t,error:s}=await At(this.fetch,"POST","".concat(this.url,"/token?grant_type=pkce"),{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Pt});if(await ft(this.storage,"".concat(this.storageKey,"-code-verifier")),s)throw s;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!==r&&void 0!==r?r:null}),error:s}):{data:{user:null,session:null,redirectType:null},error:new He}}catch(s){if(Fe(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:t,provider:n,token:r,access_token:s,nonce:i}=e,a=await At(this.fetch,"POST","".concat(this.url,"/token?grant_type=id_token"),{headers:this.headers,body:{provider:n,id_token:r,access_token:s,nonce:i,gotrue_meta_security:{captcha_token:null===t||void 0===t?void 0:t.captchaToken}},xform:Pt}),{data:o,error:l}=a;return l?{data:{user:null,session:null},error:l}:o&&o.session&&o.user?(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:l}):{data:{user:null,session:null},error:new He}}catch(t){if(Fe(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,r,s,i;try{if("email"in e){const{email:r,options:s}=e;let i=null,a=null;"pkce"===this.flowType&&([i,a]=await bt(this.storage,this.storageKey));const{error:o}=await At(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{email:r,data:null!==(t=null===s||void 0===s?void 0:s.data)&&void 0!==t?t:{},create_user:null===(n=null===s||void 0===s?void 0:s.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken},code_challenge:i,code_challenge_method:a},redirectTo:null===s||void 0===s?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:t,options:n}=e,{data:a,error:o}=await At(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{phone:t,data:null!==(r=null===n||void 0===n?void 0:n.data)&&void 0!==r?r:{},create_user:null===(s=null===n||void 0===n?void 0:n.shouldCreateUser)||void 0===s||s,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken},channel:null!==(i=null===n||void 0===n?void 0:n.channel)&&void 0!==i?i:"sms"}});return{data:{user:null,session:null,messageId:null===a||void 0===a?void 0:a.message_id},error:o}}throw new qe("You must provide either an email or phone number.")}catch(a){if(Fe(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,n;try{let r,s;"options"in e&&(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo,s=null===(n=e.options)||void 0===n?void 0:n.captchaToken);const{data:i,error:a}=await At(this.fetch,"POST","".concat(this.url,"/verify"),{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:r,xform:Pt});if(a)throw a;if(!i)throw new Error("An error occurred on token verification.");const o=i.session,l=i.user;return(null===o||void 0===o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(r){if(Fe(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,n,r;try{let s=null,i=null;return"pkce"===this.flowType&&([s,i]=await bt(this.storage,this.storageKey)),await At(this.fetch,"POST","".concat(this.url,"/sso"),{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==n?n:void 0}),(null===(r=null===e||void 0===e?void 0:e.options)||void 0===r?void 0:r.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:i}),headers:this.headers,xform:Mt})}catch(s){if(Fe(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new We;const{error:r}=await At(this.fetch,"GET","".concat(this.url,"/reauthenticate"),{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(Fe(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t="".concat(this.url,"/resend");if("email"in e){const{email:n,type:r,options:s}=e,{error:i}=await At(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken}},redirectTo:null===s||void 0===s?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:i}}if("phone"in e){const{phone:n,type:r,options:s}=e,{data:i,error:a}=await At(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:null===i||void 0===i?void 0:i.message_id},error:a}}throw new qe("You must provide either an email or phone number and a type")}catch(t){if(Fe(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch(e){}})()),n}return await this.lock("lock:".concat(this.storageKey),e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(t){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await pt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=!!e.expires_at&&1e3*e.expires_at-Date.now()<Me;if(this._debug("#__loadSession()","session has".concat(n?"":" not"," expired"),"expires_at",e.expires_at),!n){if(this.userStorage){const t=await pt(this.userStorage,this.storageKey+"-user");(null===t||void 0===t?void 0:t.user)?e.user=t.user:e.user=kt()}if(this.storage.isServer&&e.user){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,n,r)=>(t||"user"!==n||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,n,r))})}return{data:{session:e},error:null}}const{session:r,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await At(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:e,xform:Ot}):await this._useSession(async e=>{var t,n,r;const{data:s,error:i}=e;if(i)throw i;return(null===(t=s.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await At(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:null!==(r=null===(n=s.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0,xform:Ot}):{data:{user:null},error:new We}})}catch(t){if(Fe(t))return function(e){return Fe(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await ft(this.storage,"".concat(this.storageKey,"-code-verifier"))),{data:{user:null},error:t};throw t}}async updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await this._useSession(async n=>{const{data:r,error:s}=n;if(s)throw s;if(!r.session)throw new We;const i=r.session;let a=null,o=null;"pkce"===this.flowType&&null!=e.email&&([a,o]=await bt(this.storage,this.storageKey));const{data:l,error:c}=await At(this.fetch,"PUT","".concat(this.url,"/user"),{headers:this.headers,redirectTo:null===t||void 0===t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:o}),jwt:i.access_token,xform:Ot});if(c)throw c;return i.user=l.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(n){if(Fe(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new We;const t=Date.now()/1e3;let n=t,r=!0,s=null;const{payload:i}=mt(e.access_token);if(i.exp&&(n=i.exp,r=n<=t),r){const{session:t,error:n}=await this._callRefreshToken(e.refresh_token);if(n)return{data:{user:null,session:null},error:n};if(!t)return{data:{user:null,session:null},error:null};s=t}else{const{data:r,error:i}=await this._getUser(e.access_token);if(i)throw i;s={access_token:e.access_token,refresh_token:e.refresh_token,user:r.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if(Fe(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:r,error:s}=t;if(s)throw s;e=null!==(n=r.session)&&void 0!==n?n:void 0}if(!(null===e||void 0===e?void 0:e.refresh_token))throw new We;const{session:r,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Fe(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!lt())throw new Ke("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ke(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new $e("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new Ke("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new $e("No code detected.");const{data:t,error:n}=await this._exchangeCodeForSession(e.code);if(n)throw n;const r=new URL(window.location.href);return r.searchParams.delete("code"),window.history.replaceState(window.history.state,"",r.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:s,refresh_token:i,expires_in:a,expires_at:o,token_type:l}=e;if(!s||!a||!i||!l)throw new Ke("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(a);let u=c+d;o&&(u=parseInt(o));const h=u-c;1e3*h<=Oe&&console.warn("@supabase/gotrue-js: Session as retrieved from URL expires in ".concat(h,"s, should have been closer to ").concat(d,"s"));const p=u-d;c-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,u,c):c-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,u,c);const{data:f,error:g}=await this._getUser(s);if(g)throw g;const m={provider_token:n,provider_refresh_token:r,access_token:s,expires_in:d,expires_at:u,refresh_token:i,token_type:l,user:f.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:m,redirectType:e.type},error:null}}catch(n){if(Fe(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await pt(this.storage,"".concat(this.storageKey,"-code-verifier"));return!(!e.code||!t)}async signOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut(){let{scope:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this._useSession(async t=>{var n;const{data:r,error:s}=t;if(s)return{error:s};const i=null===(n=r.session)||void 0===n?void 0:n.access_token;if(i){const{error:t}=await this.admin.signOut(i,e);if(t&&(!function(e){return Fe(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await ft(this.storage,"".concat(this.storageKey,"-code-verifier"))),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,r;try{const{data:{session:r},error:s}=t;if(s)throw s;await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(s){await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,r=null;"pkce"===this.flowType&&([n,r]=await bt(this.storage,this.storageKey,!0));try{return await At(this.fetch,"POST","".concat(this.url,"/recover"),{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(Fe(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(Fe(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:r}=await this._useSession(async t=>{var n,r,s,i,a;const{data:o,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider("".concat(this.url,"/user/identities/authorize"),e.provider,{redirectTo:null===(n=e.options)||void 0===n?void 0:n.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(s=e.options)||void 0===s?void 0:s.queryParams,skipBrowserRedirect:!0});return await At(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(a=null===(i=o.session)||void 0===i?void 0:i.access_token)&&void 0!==a?a:void 0})});if(r)throw r;return lt()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null===n||void 0===n?void 0:n.url),{data:{provider:e.provider,url:null===n||void 0===n?void 0:n.url},error:null}}catch(n){if(Fe(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,r;const{data:s,error:i}=t;if(i)throw i;return await At(this.fetch,"DELETE","".concat(this.url,"/user/identities/").concat(e.identity_id),{headers:this.headers,jwt:null!==(r=null===(n=s.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0})})}catch(t){if(Fe(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t="#_refreshAccessToken(".concat(e.substring(0,5),"...)");this._debug(t,"begin");try{const s=Date.now();return await(n=async n=>(n>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await At(this.fetch,"POST","".concat(this.url,"/token?grant_type=refresh_token"),{body:{refresh_token:e},headers:this.headers,xform:Pt})),r=(e,t)=>{const n=200*Math.pow(2,e);return t&&Je(t)&&Date.now()+n-s<Oe},new Promise((e,t)=>{(async()=>{for(let i=0;i<1/0;i++)try{const t=await n(i);if(!r(i,null,t))return void e(t)}catch(s){if(!r(i,s))return void t(s)}})()}))}catch(s){if(this._debug(t,"error",s),Fe(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}var n,r}_isValidSession(e){return"object"===typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider("".concat(this.url,"/authorize"),e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),lt()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await pt(this.storage,this.storageKey);if(s&&this.userStorage){let t=await pt(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:s.user},await ht(this.userStorage,this.storageKey+"-user",t)),s.user=null!==(e=null===t||void 0===t?void 0:t.user)&&void 0!==e?e:kt()}else if(s&&!s.user&&!s.user){const e=await pt(this.storage,this.storageKey+"-user");e&&(null===e||void 0===e?void 0:e.user)?(s.user=e.user,await ft(this.storage,this.storageKey+"-user"),await ht(this.storage,this.storageKey,s)):s.user=kt()}if(this._debug(n,"session from storage",s),!this._isValidSession(s))return this._debug(n,"session is not valid"),void(null!==s&&await this._removeSession());const i=1e3*(null!==(t=s.expires_at)&&void 0!==t?t:1/0)-Date.now()<Me;if(this._debug(n,"session has".concat(i?"":" not"," expired with margin of ").concat(Me,"s")),i){if(this.autoRefreshToken&&s.refresh_token){const{error:e}=await this._callRefreshToken(s.refresh_token);e&&(console.error(e),Je(e)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(s.user&&!0===s.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(s.access_token);!t&&(null===e||void 0===e?void 0:e.user)?(s.user=e.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(r){console.error("Error getting user data:",r),this._debug(n,"error getting user data, skipping SIGNED_IN notification",r)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){return this._debug(n,"error",s),void console.error(s)}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new We;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r="#_callRefreshToken(".concat(e.substring(0,5),"...)");this._debug(r,"begin");try{this.refreshingDeferred=new gt;const{data:t,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new We;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const r={session:t.session,error:null};return this.refreshingDeferred.resolve(r),r}catch(s){if(this._debug(r,"error",s),Fe(s)){const e={session:null,error:s};return Je(s)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(s),s}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r="#_notifyAllSubscribers(".concat(e,")");this._debug(r,"begin",t,"broadcast = ".concat(n));try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],s=Array.from(this.stateChangeEmitters.values()).map(async n=>{try{await n.callback(e,t)}catch(s){r.push(s)}});if(await Promise.all(s),r.length>0){for(let e=0;e<r.length;e+=1)console.error(r[e]);throw r[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),n=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!n&&t.user&&await ht(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const r=jt(e);await ht(this.storage,this.storageKey,r)}else{const e=jt(t);await ht(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await ft(this.storage,this.storageKey),await ft(this.storage,this.storageKey+"-code-verifier"),await ft(this.storage,this.storageKey+"-user"),this.userStorage&&await ft(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&lt()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Oe);this.autoRefreshTicker=e,e&&"object"===typeof e&&"function"===typeof e.unref?e.unref():"undefined"!==typeof Deno&&"function"===typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:n}}=e;if(!n||!n.refresh_token||!n.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const r=Math.floor((1e3*n.expires_at-t)/Oe);this._debug("#_autoRefreshTokenTick()","access token expires in ".concat(r," ticks, a tick lasts ").concat(Oe,"ms, refresh threshold is ").concat(3," ticks")),r<=3&&await this._callRefreshToken(n.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(!(e.isAcquireTimeout||e instanceof Bt))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!lt()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t="#_onVisibilityChanged(".concat(e,")");this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const r=["provider=".concat(encodeURIComponent(t))];if((null===n||void 0===n?void 0:n.redirectTo)&&r.push("redirect_to=".concat(encodeURIComponent(n.redirectTo))),(null===n||void 0===n?void 0:n.scopes)&&r.push("scopes=".concat(encodeURIComponent(n.scopes))),"pkce"===this.flowType){const[e,t]=await bt(this.storage,this.storageKey),n=new URLSearchParams({code_challenge:"".concat(encodeURIComponent(e)),code_challenge_method:"".concat(encodeURIComponent(t))});r.push(n.toString())}if(null===n||void 0===n?void 0:n.queryParams){const e=new URLSearchParams(n.queryParams);r.push(e.toString())}return(null===n||void 0===n?void 0:n.skipBrowserRedirect)&&r.push("skip_http_redirect=".concat(n.skipBrowserRedirect)),"".concat(e,"?").concat(r.join("&"))}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:r,error:s}=t;return s?{data:null,error:s}:await At(this.fetch,"DELETE","".concat(this.url,"/factors/").concat(e.factorId),{headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token})})}catch(t){if(Fe(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,r;const{data:s,error:i}=t;if(i)return{data:null,error:i};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:o,error:l}=await At(this.fetch,"POST","".concat(this.url,"/factors"),{body:a,headers:this.headers,jwt:null===(n=null===s||void 0===s?void 0:s.session)||void 0===n?void 0:n.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(r=null===o||void 0===o?void 0:o.totp)||void 0===r?void 0:r.qr_code)&&(o.totp.qr_code="data:image/svg+xml;utf-8,".concat(o.totp.qr_code)),{data:o,error:null})})}catch(t){if(Fe(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:s}=t;if(s)return{data:null,error:s};const{data:i,error:a}=await At(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/verify"),{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:a})})}catch(t){if(Fe(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:s}=t;return s?{data:null,error:s}:await At(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/challenge"),{body:{channel:e.channel},headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token})})}catch(t){if(Fe(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(null===e||void 0===e?void 0:e.factors)||[],r=n.filter(e=>"totp"===e.factor_type&&"verified"===e.status),s=n.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:n,totp:r,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:r},error:s}=e;if(s)return{data:null,error:s};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=mt(r.access_token);let a=null;i.aal&&(a=i.aal);let o=a;(null!==(n=null===(t=r.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==n?n:[]).length>0&&(o="aal2");return{data:{currentLevel:a,nextLevel:o,currentAuthenticationMethods:i.amr||[]},error:null}}))}async fetchJwk(e){let t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[]}).keys.find(t=>t.kid===e);if(t)return t;const n=Date.now();if(t=this.jwks.keys.find(t=>t.kid===e),t&&this.jwks_cached_at+6e5>n)return t;const{data:r,error:s}=await At(this.fetch,"GET","".concat(this.url,"/.well-known/jwks.json"),{headers:this.headers});if(s)throw s;return r.keys&&0!==r.keys.length?(this.jwks=r,this.jwks_cached_at=n,t=r.keys.find(t=>t.kid===e),t||null):null}async getClaims(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let n=e;if(!n){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};n=e.session.access_token}const{header:r,payload:s,signature:i,raw:{header:a,payload:o}}=mt(n);(null===t||void 0===t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(s.exp);const l=r.alg&&!r.alg.startsWith("HS")&&r.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(r.kid,(null===t||void 0===t?void 0:t.keys)?{keys:t.keys}:null===t||void 0===t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(n);if(e)throw e;return{data:{claims:s,header:r,signature:i},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(r.alg),d=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!await crypto.subtle.verify(c,d,i,function(e){const t=[];return it(e,e=>t.push(e)),new Uint8Array(t)}("".concat(a,".").concat(o))))throw new Qe("Invalid JWT signature");return{data:{claims:s,header:r,signature:i},error:null}}catch(n){if(Fe(n))return{data:null,error:n};throw n}}}$t.nextInstanceID=0;const Gt=$t;class Jt extends Gt{constructor(e){super(e)}}var Yt=function(e,t,n,r){return new(n||(n=Promise))(function(s,i){function a(e){try{l(r.next(e))}catch(t){i(t)}}function o(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((r=r.apply(e,t||[])).next())})};class Qt{constructor(e,t,n){var r,s,i;this.supabaseUrl=e,this.supabaseKey=t;const a=function(e){const t=null===e||void 0===e?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL((n=t).endsWith("/")?n:n+"/")}catch(r){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}var n}(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const o="sb-".concat(a.hostname.split(".")[0],"-auth-token"),l=function(e,t){var n,r;const{db:s,auth:i,realtime:a,global:o}=e,{db:l,auth:c,realtime:d,global:u}=t,h={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},d),a),storage:{},global:Object.assign(Object.assign(Object.assign({},u),o),{headers:Object.assign(Object.assign({},null!==(n=null===u||void 0===u?void 0:u.headers)&&void 0!==n?n:{}),null!==(r=null===o||void 0===o?void 0:o.headers)&&void 0!==r?r:{})}),accessToken:()=>Pe(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!==n&&void 0!==n?n:{},{db:ke,realtime:Se,auth:Object.assign(Object.assign({},je),{storageKey:o}),global:_e});this.storageKey=null!==(r=l.auth.storageKey)&&void 0!==r?r:"",this.headers=null!==(s=l.global.headers)&&void 0!==s?s:{},l.accessToken?(this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error("@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.".concat(String(t)," is not possible"))}})):this.auth=this._initSupabaseAuthClient(null!==(i=l.auth)&&void 0!==i?i:{},this.headers,l.global.fetch),this.fetch=Ae(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.rest=new u(new URL("rest/v1",a).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new ve(this.storageUrl.href,this.headers,this.fetch,null===n||void 0===n?void 0:n.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new c(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.rest.rpc(e,t,n)}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Yt(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return null!==(t=null===(e=n.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey})}_initSupabaseAuthClient(e,t,n){let{autoRefreshToken:r,persistSession:s,detectSessionInUrl:i,storage:a,userStorage:o,storageKey:l,flowType:c,lock:d,debug:u}=e;const h={Authorization:"Bearer ".concat(this.supabaseKey),apikey:"".concat(this.supabaseKey)};return new Jt({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),t),storageKey:l,autoRefreshToken:r,persistSession:s,detectSessionInUrl:i,storage:a,userStorage:o,flowType:c,lock:d,debug:u,fetch:n,hasCustomAuthorizationHeader:Object.keys(this.headers).some(e=>"authorization"===e.toLowerCase())})}_initRealtimeClient(e){return new Y(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null===e||void 0===e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null===t||void 0===t?void 0:t.access_token)})}_handleTokenChanged(e,t,n){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===n?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=n}}const Xt=(e,t,n)=>new Qt(e,t,n);(function(){if("undefined"!==typeof window)return!1;if("undefined"===typeof process)return!1;const e=process.version;if(void 0===e||null===e)return!1;const t=e.match(/^v(\d+)\./);return!!t&&parseInt(t[1],10)<=18})()&&console.warn("\u26a0\ufe0f  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")},6111:function(e,t,n){!function(){var t;e.exports=(t=n(4488),n(9749),n(4503),n(8168),n(8523),n(4646),n(4199),n(2002),n(6368),n(1641),n(7061),n(9092),n(6600),n(7423),n(4220),n(3930),n(8211),n(2238),n(1112),n(7962),n(8049),n(6380),n(8099),n(1884),n(9132),n(4423),n(548),n(4087),n(4708),n(7780),n(9475),n(9638),n(8875),n(1659),n(6501),t)}()},6368:function(e,t,n){!function(){var t;e.exports=(t=n(4488),function(e){var n=t,r=n.lib,s=r.WordArray,i=r.Hasher,a=n.algo,o=[],l=[];!function(){function t(t){for(var n=e.sqrt(t),r=2;r<=n;r++)if(!(t%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var r=2,s=0;s<64;)t(r)&&(s<8&&(o[s]=n(e.pow(r,.5))),l[s]=n(e.pow(r,1/3)),s++),r++}();var c=[],d=a.SHA256=i.extend({_doReset:function(){this._hash=new s.init(o.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],s=n[1],i=n[2],a=n[3],o=n[4],d=n[5],u=n[6],h=n[7],p=0;p<64;p++){if(p<16)c[p]=0|e[t+p];else{var f=c[p-15],g=(f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3,m=c[p-2],y=(m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10;c[p]=g+c[p-7]+y+c[p-16]}var x=r&s^r&i^s&i,b=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),v=h+((o<<26|o>>>6)^(o<<21|o>>>11)^(o<<7|o>>>25))+(o&d^~o&u)+l[p]+c[p];h=u,u=d,d=o,o=a+v|0,a=i,i=s,s=r,r=v+(b+x)|0}n[0]=n[0]+r|0,n[1]=n[1]+s|0,n[2]=n[2]+i|0,n[3]=n[3]+a|0,n[4]=n[4]+o|0,n[5]=n[5]+d|0,n[6]=n[6]+u|0,n[7]=n[7]+h|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,s=8*t.sigBytes;return n[s>>>5]|=128<<24-s%32,n[14+(s+64>>>9<<4)]=e.floor(r/4294967296),n[15+(s+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});n.SHA256=i._createHelper(d),n.HmacSHA256=i._createHmacHelper(d)}(Math),t.SHA256)}()},6380:function(e,t,n){!function(){var t;e.exports=(t=n(4488),n(2238),t.mode.OFB=function(){var e=t.lib.BlockCipherMode.extend(),n=e.Encryptor=e.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,s=this._iv,i=this._keystream;s&&(i=this._keystream=s.slice(0),this._iv=void 0),n.encryptBlock(i,0);for(var a=0;a<r;a++)e[t+a]^=i[a]}});return e.Decryptor=n,e}(),t.mode.OFB)}()},6501:function(e,t,n){!function(){var t;e.exports=(t=n(4488),n(8523),n(4199),n(8211),n(2238),function(){var e=t,n=e.lib.BlockCipher,r=e.algo;const s=16,i=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],a=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var o={pbox:[],sbox:[]};function l(e,t){let n=t>>24&255,r=t>>16&255,s=t>>8&255,i=255&t,a=e.sbox[0][n]+e.sbox[1][r];return a^=e.sbox[2][s],a+=e.sbox[3][i],a}function c(e,t,n){let r,i=t,a=n;for(let o=0;o<s;++o)i^=e.pbox[o],a=l(e,i)^a,r=i,i=a,a=r;return r=i,i=a,a=r,a^=e.pbox[s],i^=e.pbox[s+1],{left:i,right:a}}function d(e,t,n){let r,i=t,a=n;for(let o=s+1;o>1;--o)i^=e.pbox[o],a=l(e,i)^a,r=i,i=a,a=r;return r=i,i=a,a=r,a^=e.pbox[1],i^=e.pbox[0],{left:i,right:a}}function u(e,t,n){for(let s=0;s<4;s++){e.sbox[s]=[];for(let t=0;t<256;t++)e.sbox[s][t]=a[s][t]}let r=0;for(let a=0;a<s+2;a++)e.pbox[a]=i[a]^t[r],r++,r>=n&&(r=0);let o=0,l=0,d=0;for(let i=0;i<s+2;i+=2)d=c(e,o,l),o=d.left,l=d.right,e.pbox[i]=o,e.pbox[i+1]=l;for(let s=0;s<4;s++)for(let t=0;t<256;t+=2)d=c(e,o,l),o=d.left,l=d.right,e.sbox[s][t]=o,e.sbox[s][t+1]=l;return!0}var h=r.Blowfish=n.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4;u(o,t,n)}},encryptBlock:function(e,t){var n=c(o,e[t],e[t+1]);e[t]=n.left,e[t+1]=n.right},decryptBlock:function(e,t){var n=d(o,e[t],e[t+1]);e[t]=n.left,e[t+1]=n.right},blockSize:2,keySize:4,ivSize:2});e.Blowfish=n._createHelper(h)}(),t.Blowfish)}()},6600:function(e,t,n){!function(){var t;e.exports=(t=n(4488),n(9749),function(e){var n=t,r=n.lib,s=r.WordArray,i=r.Hasher,a=n.x64.Word,o=n.algo,l=[],c=[],d=[];!function(){for(var e=1,t=0,n=0;n<24;n++){l[e+5*t]=(n+1)*(n+2)/2%64;var r=(2*e+3*t)%5;e=t%5,t=r}for(e=0;e<5;e++)for(t=0;t<5;t++)c[e+5*t]=t+(2*e+3*t)%5*5;for(var s=1,i=0;i<24;i++){for(var o=0,u=0,h=0;h<7;h++){if(1&s){var p=(1<<h)-1;p<32?u^=1<<p:o^=1<<p-32}128&s?s=s<<1^113:s<<=1}d[i]=a.create(o,u)}}();var u=[];!function(){for(var e=0;e<25;e++)u[e]=a.create()}();var h=o.SHA3=i.extend({cfg:i.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new a.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var n=this._state,r=this.blockSize/2,s=0;s<r;s++){var i=e[t+2*s],a=e[t+2*s+1];i=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),(E=n[s]).high^=a,E.low^=i}for(var o=0;o<24;o++){for(var h=0;h<5;h++){for(var p=0,f=0,g=0;g<5;g++)p^=(E=n[h+5*g]).high,f^=E.low;var m=u[h];m.high=p,m.low=f}for(h=0;h<5;h++){var y=u[(h+4)%5],x=u[(h+1)%5],b=x.high,v=x.low;for(p=y.high^(b<<1|v>>>31),f=y.low^(v<<1|b>>>31),g=0;g<5;g++)(E=n[h+5*g]).high^=p,E.low^=f}for(var w=1;w<25;w++){var _=(E=n[w]).high,k=E.low,j=l[w];j<32?(p=_<<j|k>>>32-j,f=k<<j|_>>>32-j):(p=k<<j-32|_>>>64-j,f=_<<j-32|k>>>64-j);var S=u[c[w]];S.high=p,S.low=f}var N=u[0],C=n[0];for(N.high=C.high,N.low=C.low,h=0;h<5;h++)for(g=0;g<5;g++){var E=n[w=h+5*g],A=u[w],P=u[(h+1)%5+5*g],T=u[(h+2)%5+5*g];E.high=A.high^~P.high&T.high,E.low=A.low^~P.low&T.low}E=n[0];var O=d[o];E.high^=O.high,E.low^=O.low}},_doFinalize:function(){var t=this._data,n=t.words,r=(this._nDataBytes,8*t.sigBytes),i=32*this.blockSize;n[r>>>5]|=1<<24-r%32,n[(e.ceil((r+1)/i)*i>>>5)-1]|=128,t.sigBytes=4*n.length,this._process();for(var a=this._state,o=this.cfg.outputLength/8,l=o/8,c=[],d=0;d<l;d++){var u=a[d],h=u.high,p=u.low;h=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8),p=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8),c.push(p),c.push(h)}return new s.init(c,o)},clone:function(){for(var e=i.clone.call(this),t=e._state=this._state.slice(0),n=0;n<25;n++)t[n]=t[n].clone();return e}});n.SHA3=i._createHelper(h),n.HmacSHA3=i._createHmacHelper(h)}(Math),t.SHA3)}()},7061:function(e,t,n){!function(){var t;e.exports=(t=n(4488),n(9749),function(){var e=t,n=e.lib.Hasher,r=e.x64,s=r.Word,i=r.WordArray,a=e.algo;function o(){return s.create.apply(s,arguments)}var l=[o(1116352408,3609767458),o(1899447441,602891725),o(3049323471,3964484399),o(3921009573,2173295548),o(961987163,4081628472),o(1508970993,3053834265),o(2453635748,2937671579),o(2870763221,3664609560),o(3624381080,2734883394),o(310598401,1164996542),o(607225278,1323610764),o(1426881987,3590304994),o(1925078388,4068182383),o(2162078206,991336113),o(2614888103,633803317),o(3248222580,3479774868),o(3835390401,2666613458),o(4022224774,944711139),o(264347078,2341262773),o(604807628,2007800933),o(770255983,1495990901),o(1249150122,1856431235),o(1555081692,3175218132),o(1996064986,2198950837),o(2554220882,3999719339),o(2821834349,766784016),o(2952996808,2566594879),o(3210313671,3203337956),o(3336571891,1034457026),o(3584528711,2466948901),o(113926993,3758326383),o(338241895,168717936),o(666307205,1188179964),o(773529912,1546045734),o(1294757372,1522805485),o(1396182291,2643833823),o(1695183700,2343527390),o(1986661051,1014477480),o(2177026350,1206759142),o(2456956037,344077627),o(2730485921,1290863460),o(2820302411,3158454273),o(3259730800,3505952657),o(3345764771,106217008),o(3516065817,3606008344),o(3600352804,1432725776),o(4094571909,1467031594),o(275423344,851169720),o(430227734,3100823752),o(506948616,1363258195),o(659060556,3750685593),o(883997877,3785050280),o(958139571,3318307427),o(1322822218,3812723403),o(1537002063,2003034995),o(1747873779,3602036899),o(1955562222,1575990012),o(2024104815,1125592928),o(2227730452,2716904306),o(2361852424,442776044),o(2428436474,593698344),o(2756734187,3733110249),o(3204031479,2999351573),o(3329325298,3815920427),o(3391569614,3928383900),o(3515267271,566280711),o(3940187606,3454069534),o(4118630271,4000239992),o(116418474,1914138554),o(174292421,2731055270),o(289380356,3203993006),o(460393269,320620315),o(685471733,587496836),o(852142971,1086792851),o(1017036298,365543100),o(1126000580,2618297676),o(1288033470,3409855158),o(1501505948,4234509866),o(1607167915,987167468),o(1816402316,1246189591)],c=[];!function(){for(var e=0;e<80;e++)c[e]=o()}();var d=a.SHA512=n.extend({_doReset:function(){this._hash=new i.init([new s.init(1779033703,4089235720),new s.init(3144134277,2227873595),new s.init(1013904242,4271175723),new s.init(2773480762,1595750129),new s.init(1359893119,2917565137),new s.init(2600822924,725511199),new s.init(528734635,4215389547),new s.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],s=n[1],i=n[2],a=n[3],o=n[4],d=n[5],u=n[6],h=n[7],p=r.high,f=r.low,g=s.high,m=s.low,y=i.high,x=i.low,b=a.high,v=a.low,w=o.high,_=o.low,k=d.high,j=d.low,S=u.high,N=u.low,C=h.high,E=h.low,A=p,P=f,T=g,O=m,M=y,I=x,R=b,L=v,D=w,z=_,F=k,U=j,B=S,V=N,W=C,H=E,q=0;q<80;q++){var K,$,G=c[q];if(q<16)$=G.high=0|e[t+2*q],K=G.low=0|e[t+2*q+1];else{var J=c[q-15],Y=J.high,Q=J.low,X=(Y>>>1|Q<<31)^(Y>>>8|Q<<24)^Y>>>7,Z=(Q>>>1|Y<<31)^(Q>>>8|Y<<24)^(Q>>>7|Y<<25),ee=c[q-2],te=ee.high,ne=ee.low,re=(te>>>19|ne<<13)^(te<<3|ne>>>29)^te>>>6,se=(ne>>>19|te<<13)^(ne<<3|te>>>29)^(ne>>>6|te<<26),ie=c[q-7],ae=ie.high,oe=ie.low,le=c[q-16],ce=le.high,de=le.low;$=($=($=X+ae+((K=Z+oe)>>>0<Z>>>0?1:0))+re+((K+=se)>>>0<se>>>0?1:0))+ce+((K+=de)>>>0<de>>>0?1:0),G.high=$,G.low=K}var ue,he=D&F^~D&B,pe=z&U^~z&V,fe=A&T^A&M^T&M,ge=P&O^P&I^O&I,me=(A>>>28|P<<4)^(A<<30|P>>>2)^(A<<25|P>>>7),ye=(P>>>28|A<<4)^(P<<30|A>>>2)^(P<<25|A>>>7),xe=(D>>>14|z<<18)^(D>>>18|z<<14)^(D<<23|z>>>9),be=(z>>>14|D<<18)^(z>>>18|D<<14)^(z<<23|D>>>9),ve=l[q],we=ve.high,_e=ve.low,ke=W+xe+((ue=H+be)>>>0<H>>>0?1:0),je=ye+ge;W=B,H=V,B=F,V=U,F=D,U=z,D=R+(ke=(ke=(ke=ke+he+((ue+=pe)>>>0<pe>>>0?1:0))+we+((ue+=_e)>>>0<_e>>>0?1:0))+$+((ue+=K)>>>0<K>>>0?1:0))+((z=L+ue|0)>>>0<L>>>0?1:0)|0,R=M,L=I,M=T,I=O,T=A,O=P,A=ke+(me+fe+(je>>>0<ye>>>0?1:0))+((P=ue+je|0)>>>0<ue>>>0?1:0)|0}f=r.low=f+P,r.high=p+A+(f>>>0<P>>>0?1:0),m=s.low=m+O,s.high=g+T+(m>>>0<O>>>0?1:0),x=i.low=x+I,i.high=y+M+(x>>>0<I>>>0?1:0),v=a.low=v+L,a.high=b+R+(v>>>0<L>>>0?1:0),_=o.low=_+z,o.high=w+D+(_>>>0<z>>>0?1:0),j=d.low=j+U,d.high=k+F+(j>>>0<U>>>0?1:0),N=u.low=N+V,u.high=S+B+(N>>>0<V>>>0?1:0),E=h.low=E+H,h.high=C+W+(E>>>0<H>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[30+(r+128>>>10<<5)]=Math.floor(n/4294967296),t[31+(r+128>>>10<<5)]=n,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});e.SHA512=n._createHelper(d),e.HmacSHA512=n._createHmacHelper(d)}(),t.SHA512)}()},7234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,a=s>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,d=e[c];if(0>i(l,n))c<s&&0>i(d,l)?(e[r]=d,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<s&&0>i(d,n)))break e;e[r]=d,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,p=3,f=!1,g=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,x="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function v(e){for(var t=r(d);null!==t;){if(null===t.callback)s(d);else{if(!(t.startTime<=e))break;s(d),t.sortIndex=t.expirationTime,n(c,t)}t=r(d)}}function w(e){if(m=!1,v(e),!g)if(null!==r(c))g=!0,M(_);else{var t=r(d);null!==t&&I(w,t.startTime-e)}}function _(e,n){g=!1,m&&(m=!1,x(N),N=-1),f=!0;var i=p;try{for(v(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!A());){var a=h.callback;if("function"===typeof a){h.callback=null,p=h.priorityLevel;var o=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&s(c),v(n)}else s(c);h=r(c)}if(null!==h)var l=!0;else{var u=r(d);null!==u&&I(w,u.startTime-n),l=!1}return l}finally{h=null,p=i,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,j=!1,S=null,N=-1,C=5,E=-1;function A(){return!(t.unstable_now()-E<C)}function P(){if(null!==S){var e=t.unstable_now();E=e;var n=!0;try{n=S(!0,e)}finally{n?k():(j=!1,S=null)}}else j=!1}if("function"===typeof b)k=function(){b(P)};else if("undefined"!==typeof MessageChannel){var T=new MessageChannel,O=T.port2;T.port1.onmessage=P,k=function(){O.postMessage(null)}}else k=function(){y(P,0)};function M(e){S=e,j||(j=!0,k())}function I(e,n){N=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||f||(g=!0,M(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,s,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:s,priorityLevel:e,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>a?(e.sortIndex=i,n(d,e),null===r(c)&&e===r(d)&&(m?(x(N),N=-1):m=!0,I(w,i-a))):(e.sortIndex=o,n(c,e),g||f||(g=!0,M(_))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},7374:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(n(9286));class i extends s.default{select(e){let t=!1;const n=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e){let{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:s=r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=s?"".concat(s,".order"):"order",a=this.url.searchParams.get(i);return this.url.searchParams.set(i,"".concat(a?"".concat(a,","):"").concat(e,".").concat(t?"asc":"desc").concat(void 0===n?"":n?".nullsfirst":".nullslast")),this}limit(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r="undefined"===typeof n?"limit":"".concat(n,".limit");return this.url.searchParams.set(r,"".concat(e)),this}range(e,t){let{foreignTable:n,referencedTable:r=n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s="undefined"===typeof r?"offset":"".concat(r,".offset"),i="undefined"===typeof r?"limit":"".concat(r,".limit");return this.url.searchParams.set(s,"".concat(e)),this.url.searchParams.set(i,"".concat(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain(){let{analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:s=!1,format:i="text"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var a;const o=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),l=null!==(a=this.headers.get("Accept"))&&void 0!==a?a:"application/json";return this.headers.set("Accept","application/vnd.pgrst.plan+".concat(i,'; for="').concat(l,'"; options=').concat(o,";")),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer","max-affected=".concat(e)),this}}t.default=i},7423:function(e,t,n){!function(){var t;e.exports=(t=n(4488),function(){var e=t,n=e.lib,r=n.WordArray,s=n.Hasher,i=e.algo,a=r.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),o=r.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),l=r.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),c=r.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),d=r.create([0,1518500249,1859775393,2400959708,2840853838]),u=r.create([1352829926,1548603684,1836072691,2053994217,0]),h=i.RIPEMD160=s.extend({_doReset:function(){this._hash=r.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,s=e[r];e[r]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}var i,h,b,v,w,_,k,j,S,N,C,E=this._hash.words,A=d.words,P=u.words,T=a.words,O=o.words,M=l.words,I=c.words;for(_=i=E[0],k=h=E[1],j=b=E[2],S=v=E[3],N=w=E[4],n=0;n<80;n+=1)C=i+e[t+T[n]]|0,C+=n<16?p(h,b,v)+A[0]:n<32?f(h,b,v)+A[1]:n<48?g(h,b,v)+A[2]:n<64?m(h,b,v)+A[3]:y(h,b,v)+A[4],C=(C=x(C|=0,M[n]))+w|0,i=w,w=v,v=x(b,10),b=h,h=C,C=_+e[t+O[n]]|0,C+=n<16?y(k,j,S)+P[0]:n<32?m(k,j,S)+P[1]:n<48?g(k,j,S)+P[2]:n<64?f(k,j,S)+P[3]:p(k,j,S)+P[4],C=(C=x(C|=0,I[n]))+N|0,_=N,N=S,S=x(j,10),j=k,k=C;C=E[1]+b+S|0,E[1]=E[2]+v+N|0,E[2]=E[3]+w+_|0,E[3]=E[4]+i+k|0,E[4]=E[0]+h+j|0,E[0]=C},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process();for(var s=this._hash,i=s.words,a=0;a<5;a++){var o=i[a];i[a]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}return s},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}});function p(e,t,n){return e^t^n}function f(e,t,n){return e&t|~e&n}function g(e,t,n){return(e|~t)^n}function m(e,t,n){return e&n|t&~n}function y(e,t,n){return e^(t|~n)}function x(e,t){return e<<t|e>>>32-t}e.RIPEMD160=s._createHelper(h),e.HmacRIPEMD160=s._createHmacHelper(h)}(Math),t.RIPEMD160)}()},7780:function(e,t,n){!function(){var t;e.exports=(t=n(4488),n(8523),n(4199),n(8211),n(2238),function(){var e=t,n=e.lib.BlockCipher,r=e.algo,s=[],i=[],a=[],o=[],l=[],c=[],d=[],u=[],h=[],p=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var n=0,r=0;for(t=0;t<256;t++){var f=r^r<<1^r<<2^r<<3^r<<4;f=f>>>8^255&f^99,s[n]=f,i[f]=n;var g=e[n],m=e[g],y=e[m],x=257*e[f]^16843008*f;a[n]=x<<24|x>>>8,o[n]=x<<16|x>>>16,l[n]=x<<8|x>>>24,c[n]=x,x=16843009*y^65537*m^257*g^16843008*n,d[f]=x<<24|x>>>8,u[f]=x<<16|x>>>16,h[f]=x<<8|x>>>24,p[f]=x,n?(n=g^e[e[e[y^g]]],r^=e[e[r]]):n=r=1}}();var f=[0,1,2,4,8,16,32,64,128,27,54],g=r.AES=n.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4,r=4*((this._nRounds=n+6)+1),i=this._keySchedule=[],a=0;a<r;a++)a<n?i[a]=t[a]:(c=i[a-1],a%n?n>6&&a%n==4&&(c=s[c>>>24]<<24|s[c>>>16&255]<<16|s[c>>>8&255]<<8|s[255&c]):(c=s[(c=c<<8|c>>>24)>>>24]<<24|s[c>>>16&255]<<16|s[c>>>8&255]<<8|s[255&c],c^=f[a/n|0]<<24),i[a]=i[a-n]^c);for(var o=this._invKeySchedule=[],l=0;l<r;l++){if(a=r-l,l%4)var c=i[a];else c=i[a-4];o[l]=l<4||a<=4?c:d[s[c>>>24]]^u[s[c>>>16&255]]^h[s[c>>>8&255]]^p[s[255&c]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,a,o,l,c,s)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,d,u,h,p,i),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,s,i,a,o){for(var l=this._nRounds,c=e[t]^n[0],d=e[t+1]^n[1],u=e[t+2]^n[2],h=e[t+3]^n[3],p=4,f=1;f<l;f++){var g=r[c>>>24]^s[d>>>16&255]^i[u>>>8&255]^a[255&h]^n[p++],m=r[d>>>24]^s[u>>>16&255]^i[h>>>8&255]^a[255&c]^n[p++],y=r[u>>>24]^s[h>>>16&255]^i[c>>>8&255]^a[255&d]^n[p++],x=r[h>>>24]^s[c>>>16&255]^i[d>>>8&255]^a[255&u]^n[p++];c=g,d=m,u=y,h=x}g=(o[c>>>24]<<24|o[d>>>16&255]<<16|o[u>>>8&255]<<8|o[255&h])^n[p++],m=(o[d>>>24]<<24|o[u>>>16&255]<<16|o[h>>>8&255]<<8|o[255&c])^n[p++],y=(o[u>>>24]<<24|o[h>>>16&255]<<16|o[c>>>8&255]<<8|o[255&d])^n[p++],x=(o[h>>>24]<<24|o[c>>>16&255]<<16|o[d>>>8&255]<<8|o[255&u])^n[p++],e[t]=g,e[t+1]=m,e[t+2]=y,e[t+3]=x},keySize:8});e.AES=n._createHelper(g)}(),t.AES)}()},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},7962:function(e,t,n){!function(){var t;e.exports=(t=n(4488),n(2238),t.mode.CTR=function(){var e=t.lib.BlockCipherMode.extend(),n=e.Encryptor=e.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,s=this._iv,i=this._counter;s&&(i=this._counter=s.slice(0),this._iv=void 0);var a=i.slice(0);n.encryptBlock(a,0),i[r-1]=i[r-1]+1|0;for(var o=0;o<r;o++)e[t+o]^=a[o]}});return e.Decryptor=n,e}(),t.mode.CTR)}()},7979:(e,t,n)=>{"use strict";n.r(t),n.d(t,{BUCKET_DEFINITIONS:()=>r,CHART_BUCKET_MAPPINGS:()=>s,getBucketColor:()=>c,getBucketDefinition:()=>i,getBucketIcon:()=>l,getChartBuckets:()=>a,getPrimaryBucket:()=>o});const r={income_item:{id:"income_item",name:"Income Item",label:"Income Item",description:"Individual income line items (rent, fees, etc.)",category:"income",color:"bg-green-100 text-green-800",icon:"\ud83d\udcb0",emoji:"\ud83d\udcb0",calculation:"Sum of individual income accounts"},income_total:{id:"income_total",name:"Income Total",label:"Income Total",description:"Total income calculations and summaries",category:"income",color:"bg-green-100 text-green-800",icon:"\ud83d\udcc8",emoji:"\ud83d\udcc8",calculation:"Sum of all income accounts"},rental_income:{id:"rental_income",name:"Rental Income",label:"Rental Income",description:"Primary rental revenue from tenants",category:"income",color:"bg-green-100 text-green-800",icon:"\ud83c\udfe0",emoji:"\ud83c\udfe0",calculation:"Sum of rental income accounts"},other_income:{id:"other_income",name:"Other Income",label:"Other Income",description:"Additional income sources (fees, late charges, etc.)",category:"income",color:"bg-green-100 text-green-800",icon:"\ud83d\udcb5",emoji:"\ud83d\udcb5",calculation:"Sum of other income accounts"},total_income:{id:"total_income",name:"Total Income",label:"Total Income",description:"Sum of all income sources",category:"income",color:"bg-green-100 text-green-800",icon:"\ud83d\udcca",emoji:"\ud83d\udcca",calculation:"Sum of all income accounts"},total_operating_income:{id:"total_operating_income",name:"Total Operating Income",label:"Operating Income",description:"Total operating revenue",category:"income",color:"bg-emerald-100 text-emerald-800",icon:"\ud83d\udcc8",emoji:"\ud83d\udcc8",calculation:"Sum of operating income accounts"},expense_item:{id:"expense_item",name:"Expense Item",label:"Expense Item",description:"Individual expense line items (maintenance, utilities, etc.)",category:"expense",color:"bg-red-100 text-red-800",icon:"\ud83d\udcb8",emoji:"\ud83d\udcb8",calculation:"Sum of individual expense accounts"},expense_total:{id:"expense_total",name:"Expense Total",label:"Expense Total",description:"Total expense calculations and summaries",category:"expense",color:"bg-red-100 text-red-800",icon:"\ud83d\udcc9",emoji:"\ud83d\udcc9",calculation:"Sum of all expense accounts"},operating_expenses:{id:"operating_expenses",name:"Operating Expenses",label:"Operating Expenses",description:"Property operating costs",category:"expense",color:"bg-orange-100 text-orange-800",icon:"\ud83d\udd27",emoji:"\ud83d\udd27",calculation:"Sum of operating expense accounts"},maintenance_cost:{id:"maintenance_cost",name:"Maintenance Cost",label:"Maintenance",description:"Property maintenance and repair costs",category:"expense",color:"bg-yellow-100 text-yellow-800",icon:"\ud83d\udd28",emoji:"\ud83d\udd28",calculation:"Sum of maintenance accounts"},utilities_cost:{id:"utilities_cost",name:"Utilities Cost",label:"Utilities",description:"Utility costs (water, electric, gas, etc.)",category:"expense",color:"bg-blue-100 text-blue-800",icon:"\u26a1",emoji:"\u26a1",calculation:"Sum of utility accounts"},insurance_cost:{id:"insurance_cost",name:"Insurance Cost",label:"Insurance",description:"Property insurance costs",category:"expense",color:"bg-purple-100 text-purple-800",icon:"\ud83d\udee1\ufe0f",emoji:"\ud83d\udee1\ufe0f",calculation:"Sum of insurance accounts"},property_tax:{id:"property_tax",name:"Property Tax",label:"Property Tax",description:"Property tax expenses",category:"expense",color:"bg-indigo-100 text-indigo-800",icon:"\ud83c\udfdb\ufe0f",emoji:"\ud83c\udfdb\ufe0f",calculation:"Sum of property tax accounts"},cash_amount:{id:"cash_amount",name:"Cash Amount",label:"Cash Amount",description:"Cash and cash equivalents",category:"cash",color:"bg-purple-100 text-purple-800",icon:"\ud83d\udcb3",emoji:"\ud83d\udcb3",calculation:"Sum of cash accounts"},occupancy_rate:{id:"occupancy_rate",name:"Occupancy Rate",label:"Occupancy Rate",description:"Percentage of occupied units",category:"metric",color:"bg-blue-100 text-blue-800",icon:"\ud83c\udfe0",emoji:"\ud83c\udfe0",calculation:"Occupied Units / Total Units * 100"},net_operating_income:{id:"net_operating_income",name:"Net Operating Income",label:"Net Operating Income",description:"NOI - Net Operating Income",category:"metric",color:"bg-emerald-100 text-emerald-800",icon:"\ud83d\udc8e",emoji:"\ud83d\udc8e",calculation:"Total Operating Income - Total Operating Expenses"},net_income:{id:"net_income",name:"Net Income",label:"Net Income",description:"Total net income",category:"metric",color:"bg-green-100 text-green-800",icon:"\ud83d\udcb0",emoji:"\ud83d\udcb0",calculation:"Total Income - Total Expenses"}},s=[{chartId:"revenue-chart",chartName:"Revenue Trend",buckets:["total_income"],primaryBucket:"total_income"},{chartId:"occupancy-chart",chartName:"Occupancy Rate",buckets:["occupancy_rate"],primaryBucket:"occupancy_rate"},{chartId:"cash-flow-chart",chartName:"Cash Flow",buckets:["net_operating_income"],primaryBucket:"net_operating_income"},{chartId:"property-performance-chart",chartName:"Property Performance",buckets:["income_item"],primaryBucket:"income_item"},{chartId:"impact-trend-chart",chartName:"Impact Trend",buckets:["income_item"],primaryBucket:"income_item"}],i=e=>r[e],a=e=>{const t=s.find(t=>t.chartId===e);return(null===t||void 0===t?void 0:t.buckets)||[]},o=e=>{const t=s.find(t=>t.chartId===e);return null===t||void 0===t?void 0:t.primaryBucket},l=e=>{const t=i(e);return(null===t||void 0===t?void 0:t.emoji)||"\ud83d\udcca"},c=e=>{const t=i(e);return(null===t||void 0===t?void 0:t.color)||"bg-gray-100 text-gray-800"}},7980:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PostgrestError=t.PostgrestBuilder=t.PostgrestTransformBuilder=t.PostgrestFilterBuilder=t.PostgrestQueryBuilder=t.PostgrestClient=void 0;const s=r(n(1210));t.PostgrestClient=s.default;const i=r(n(8829));t.PostgrestQueryBuilder=i.default;const a=r(n(5736));t.PostgrestFilterBuilder=a.default;const o=r(n(7374));t.PostgrestTransformBuilder=o.default;const l=r(n(9286));t.PostgrestBuilder=l.default;const c=r(n(2611));t.PostgrestError=c.default,t.default={PostgrestClient:s.default,PostgrestQueryBuilder:i.default,PostgrestFilterBuilder:a.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:l.default,PostgrestError:c.default}},8049:function(e,t,n){!function(){var t;e.exports=(t=n(4488),n(2238),t.mode.CTRGladman=function(){var e=t.lib.BlockCipherMode.extend();function n(e){if(255===(e>>24&255)){var t=e>>16&255,n=e>>8&255,r=255&e;255===t?(t=0,255===n?(n=0,255===r?r=0:++r):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=r}else e+=1<<24;return e}function r(e){return 0===(e[0]=n(e[0]))&&(e[1]=n(e[1])),e}var s=e.Encryptor=e.extend({processBlock:function(e,t){var n=this._cipher,s=n.blockSize,i=this._iv,a=this._counter;i&&(a=this._counter=i.slice(0),this._iv=void 0),r(a);var o=a.slice(0);n.encryptBlock(o,0);for(var l=0;l<s;l++)e[t+l]^=o[l]}});return e.Decryptor=s,e}(),t.mode.CTRGladman)}()},8099:function(e,t,n){!function(){var t;e.exports=(t=n(4488),n(2238),t.mode.ECB=function(){var e=t.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),e.Decryptor=e.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),e}(),t.mode.ECB)}()},8168:function(e,t,n){!function(){var t;e.exports=(t=n(4488),function(){var e=t,n=e.lib.WordArray,r=e.enc;function s(e){return e<<8&4278255360|e>>>8&16711935}r.Utf16=r.Utf16BE={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],s=0;s<n;s+=2){var i=t[s>>>2]>>>16-s%4*8&65535;r.push(String.fromCharCode(i))}return r.join("")},parse:function(e){for(var t=e.length,r=[],s=0;s<t;s++)r[s>>>1]|=e.charCodeAt(s)<<16-s%2*16;return n.create(r,2*t)}},r.Utf16LE={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i+=2){var a=s(t[i>>>2]>>>16-i%4*8&65535);r.push(String.fromCharCode(a))}return r.join("")},parse:function(e){for(var t=e.length,r=[],i=0;i<t;i++)r[i>>>1]|=s(e.charCodeAt(i)<<16-i%2*16);return n.create(r,2*t)}}}(),t.enc.Utf16)}()},8211:function(e,t,n){!function(){var t;e.exports=(t=n(4488),n(2002),n(4220),function(){var e=t,n=e.lib,r=n.Base,s=n.WordArray,i=e.algo,a=i.MD5,o=i.EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:a,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n,r=this.cfg,i=r.hasher.create(),a=s.create(),o=a.words,l=r.keySize,c=r.iterations;o.length<l;){n&&i.update(n),n=i.update(e).finalize(t),i.reset();for(var d=1;d<c;d++)n=i.finalize(n),i.reset();a.concat(n)}return a.sigBytes=4*l,a}});e.EvpKDF=function(e,t,n){return o.create(n).compute(e,t)}}(),t.EvpKDF)}()},8523:function(e,t,n){!function(){var t;e.exports=(t=n(4488),function(){var e=t,n=e.lib.WordArray;function r(e,t,r){for(var s=[],i=0,a=0;a<t;a++)if(a%4){var o=r[e.charCodeAt(a-1)]<<a%4*2|r[e.charCodeAt(a)]>>>6-a%4*2;s[i>>>2]|=o<<24-i%4*8,i++}return n.create(s,i)}e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var s=[],i=0;i<n;i+=3)for(var a=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,o=0;o<4&&i+.75*o<n;o++)s.push(r.charAt(a>>>6*(3-o)&63));var l=r.charAt(64);if(l)for(;s.length%4;)s.push(l);return s.join("")},parse:function(e){var t=e.length,n=this._map,s=this._reverseMap;if(!s){s=this._reverseMap=[];for(var i=0;i<n.length;i++)s[n.charCodeAt(i)]=i}var a=n.charAt(64);if(a){var o=e.indexOf(a);-1!==o&&(t=o)}return r(e,t,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),t.enc.Base64)}()},8829:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(n(5736));t.default=class{constructor(e,t){let{headers:n={},schema:r,fetch:s}=t;this.url=e,this.headers=new Headers(n),this.schema=r,this.fetch=s}select(e){let{head:t=!1,count:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=t?"HEAD":"GET";let i=!1;const a=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!i?"":('"'===e&&(i=!i),e)).join("");return this.url.searchParams.set("select",a),n&&this.headers.append("Prefer","count=".concat(n)),new s.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e){let{count:t,defaultToNull:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r;if(t&&this.headers.append("Prefer","count=".concat(t)),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));this.url.searchParams.set("columns",e.join(","))}}return new s.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(r=this.fetch)&&void 0!==r?r:fetch})}upsert(e){let{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var a;if(this.headers.append("Prefer","resolution=".concat(n?"ignore":"merge","-duplicates")),void 0!==t&&this.url.searchParams.set("on_conflict",t),r&&this.headers.append("Prefer","count=".concat(r)),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));this.url.searchParams.set("columns",e.join(","))}}return new s.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(a=this.fetch)&&void 0!==a?a:fetch})}update(e){let{count:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;return t&&this.headers.append("Prefer","count=".concat(t)),new s.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(n=this.fetch)&&void 0!==n?n:fetch})}delete(){let{count:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;return e&&this.headers.append("Prefer","count=".concat(e)),new s.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(t=this.fetch)&&void 0!==t?t:fetch})}}},8853:(e,t,n)=>{"use strict";e.exports=n(7234)},8875:function(e,t,n){!function(){var t;e.exports=(t=n(4488),n(8523),n(4199),n(8211),n(2238),function(){var e=t,n=e.lib.StreamCipher,r=e.algo,s=[],i=[],a=[],o=r.Rabbit=n.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,n=0;n<4;n++)e[n]=16711935&(e[n]<<8|e[n]>>>24)|4278255360&(e[n]<<24|e[n]>>>8);var r=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],s=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,n=0;n<4;n++)l.call(this);for(n=0;n<8;n++)s[n]^=r[n+4&7];if(t){var i=t.words,a=i[0],o=i[1],c=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),d=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),u=c>>>16|4294901760&d,h=d<<16|65535&c;for(s[0]^=c,s[1]^=u,s[2]^=d,s[3]^=h,s[4]^=c,s[5]^=u,s[6]^=d,s[7]^=h,n=0;n<4;n++)l.call(this)}},_doProcessBlock:function(e,t){var n=this._X;l.call(this),s[0]=n[0]^n[5]>>>16^n[3]<<16,s[1]=n[2]^n[7]>>>16^n[5]<<16,s[2]=n[4]^n[1]>>>16^n[7]<<16,s[3]=n[6]^n[3]>>>16^n[1]<<16;for(var r=0;r<4;r++)s[r]=16711935&(s[r]<<8|s[r]>>>24)|4278255360&(s[r]<<24|s[r]>>>8),e[t+r]^=s[r]},blockSize:4,ivSize:2});function l(){for(var e=this._X,t=this._C,n=0;n<8;n++)i[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<i[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<i[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<i[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<i[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<i[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<i[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<i[6]>>>0?1:0)|0,this._b=t[7]>>>0<i[7]>>>0?1:0,n=0;n<8;n++){var r=e[n]+t[n],s=65535&r,o=r>>>16,l=((s*s>>>17)+s*o>>>15)+o*o,c=((4294901760&r)*r|0)+((65535&r)*r|0);a[n]=l^c}e[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,e[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,e[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,e[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,e[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,e[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,e[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,e[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}e.Rabbit=n._createHelper(o)}(),t.Rabbit)}()},9079:(e,t,n)=>{"use strict";n.d(t,{j:()=>o});var r=n(9379),s=n(6069),i=n(5423);const a=(0,s.UU)("https://iqwhrvtcrseidfyznqaf.supabase.co","sb_publishable_ULLJeduhFHc_KRINLLXxug_zGvRBLPf");const o=new class{constructor(){this.currentUser=null,this.initializeAuth()}async initializeAuth(){a.auth.onAuthStateChange((e,t)=>{"SIGNED_IN"===e&&t?this.currentUser=t.user:"SIGNED_OUT"===e&&(this.currentUser=null)})}async setCurrentUser(e){if(e)try{var t;const{data:n,error:r}=await a.rpc("ensure_user_exists",{clerk_user_id:e.id,user_email:(null===(t=e.emailAddresses[0])||void 0===t?void 0:t.emailAddress)||"",user_first_name:e.firstName||"",user_last_name:e.lastName||""});if(r)return void console.error("Error ensuring user exists:",r);const{data:s,error:i}=await a.from("users").select("\n          *,\n          organizations (*)\n        ").eq("clerk_user_id",e.id).single();if(i)return console.error("Error fetching user data:",i),void(this.currentUser={id:n,clerk_user_id:e.id});this.currentUser=s}catch(n){console.error("Error setting current user:",n)}else this.currentUser=null}getCurrentUser(){return this.currentUser}async getUserProperties(){if(!this.currentUser)throw new Error("User not authenticated");const{data:e,error:t}=await a.from("properties").select("*").order("created_at",{ascending:!1});if(t)throw console.error("Error fetching properties:",t),t;return e||[]}async createProperty(e){if(!this.currentUser)throw new Error("User not authenticated");const{data:t,error:n}=await a.from("properties").insert([(0,r.A)((0,r.A)({},e),{},{user_id:this.currentUser.id})]).select().single();if(n)throw console.error("Error creating property:",n),n;return t}async getUserCSVUploads(){if(!this.currentUser)throw new Error("User not authenticated");const{data:e,error:t}=await a.from("csv_uploads").select("*").order("upload_date",{ascending:!1});if(t)throw console.error("Error fetching CSV uploads:",t),t;return e||[]}async createCSVUpload(e){if(!this.currentUser)throw new Error("User not authenticated");const{data:t,error:n}=await a.from("csv_uploads").insert([(0,r.A)((0,r.A)({},e),{},{user_id:this.currentUser.id})]).select().single();if(n)throw console.error("Error creating CSV upload:",n),n;return t}async getCSVData(e){if(!this.currentUser)throw new Error("User not authenticated");const{data:t,error:n}=await a.from("csv_data").select("*").eq("csv_upload_id",e).order("row_index",{ascending:!0});if(n)throw console.error("Error fetching CSV data:",n),n;return t||[]}async saveCSVData(e){if(!this.currentUser)throw new Error("User not authenticated");const t=e.map(e=>(0,r.A)((0,r.A)({},e),{},{user_id:this.currentUser.id})),{data:n,error:s}=await a.from("csv_data").insert(t).select();if(s)throw console.error("Error saving CSV data:",s),s;return n||[]}async getUserBucketTerms(){if(!this.currentUser)throw new Error("User not authenticated");const{data:e,error:t}=await a.from("user_bucket_terms").select("*");if(t)throw console.error("Error fetching bucket terms:",t),t;const n={};return null===e||void 0===e||e.forEach(e=>{n[e.bucket_key]||(n[e.bucket_key]=[]),n[e.bucket_key].push(e.term)}),n}async saveUserBucketTerms(e){if(!this.currentUser)throw new Error("User not authenticated");await a.from("user_bucket_terms").delete().eq("user_id",this.currentUser.id);const t=Object.entries(e).flatMap(e=>{let[t,n]=e;return n.map(e=>({user_id:this.currentUser.id,bucket_key:t,term:e}))});if(t.length>0){const{error:e}=await a.from("user_bucket_terms").insert(t);if(e)throw console.error("Error saving bucket terms:",e),e}}async getUserCustomBuckets(){if(!this.currentUser)throw new Error("User not authenticated");const{data:e,error:t}=await a.from("user_custom_buckets").select("*");if(t)throw console.error("Error fetching custom buckets:",t),t;return e||[]}async saveUserCustomBuckets(e){if(!this.currentUser)throw new Error("User not authenticated");if(await a.from("user_custom_buckets").delete().eq("user_id",this.currentUser.id),e.length>0){const t=e.map(e=>(0,r.A)((0,r.A)({},e),{},{user_id:this.currentUser.id})),{error:n}=await a.from("user_custom_buckets").insert(t);if(n)throw console.error("Error saving custom buckets:",n),n}}async createOrganization(e){if(!this.currentUser)throw new Error("User not authenticated");try{const t=i.H.encryptOrganizationData({name:e}),{data:n,error:r}=await a.from("organizations").insert([t]).select().single();if(r)throw console.error("Error creating organization:",r),r;const{error:s}=await a.from("users").update({organization_id:n.id}).eq("id",this.currentUser.id);if(s)throw console.error("Error updating user with organization:",s),s;const o=i.H.decryptOrganizationData(n);return this.currentUser.organization_id=n.id,this.currentUser.organizations=o,o}catch(t){throw console.error("Error creating organization:",t),t}}async getUserOrganization(){if(!this.currentUser)throw new Error("User not authenticated");if(this.currentUser.organization_id){const{data:e,error:t}=await a.from("organizations").select("*").eq("id",this.currentUser.organization_id).single();if(t)return console.error("Error fetching organization:",t),null;return i.H.decryptOrganizationData(e)}return null}hasOrganization(){return!(!this.currentUser||!this.currentUser.organization_id)}getOrganizationName(){return this.currentUser&&this.currentUser.organizations?this.currentUser.organizations.name:null}clearUser(){this.currentUser=null}}},9092:function(e,t,n){!function(){var t;e.exports=(t=n(4488),n(9749),n(7061),function(){var e=t,n=e.x64,r=n.Word,s=n.WordArray,i=e.algo,a=i.SHA512,o=i.SHA384=a.extend({_doReset:function(){this._hash=new s.init([new r.init(3418070365,3238371032),new r.init(1654270250,914150663),new r.init(2438529370,812702999),new r.init(355462360,4144912697),new r.init(1731405415,4290775857),new r.init(2394180231,1750603025),new r.init(3675008525,1694076839),new r.init(1203062813,3204075428)])},_doFinalize:function(){var e=a._doFinalize.call(this);return e.sigBytes-=16,e}});e.SHA384=a._createHelper(o),e.HmacSHA384=a._createHmacHelper(o)}(),t.SHA384)}()},9132:function(e,t,n){!function(){var t;e.exports=(t=n(4488),n(2238),t.pad.Iso10126={pad:function(e,n){var r=4*n,s=r-e.sigBytes%r;e.concat(t.lib.WordArray.random(s-1)).concat(t.lib.WordArray.create([s<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},t.pad.Iso10126)}()},9286:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(n(4630)),i=r(n(2611));t.default=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(t=e.shouldThrowOnError)&&void 0!==t&&t,this.signal=e.signal,this.isMaybeSingle=null!==(n=e.isMaybeSingle)&&void 0!==n&&n,e.fetch?this.fetch=e.fetch:"undefined"===typeof fetch?this.fetch=s.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,n,r,s;let a=null,o=null,l=null,c=e.status,d=e.statusText;if(e.ok){if("HEAD"!==this.method){const n=await e.text();""===n||(o="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null===(t=this.headers.get("Accept"))||void 0===t?void 0:t.includes("application/vnd.pgrst.plan+text"))?n:JSON.parse(n))}const s=null===(n=this.headers.get("Prefer"))||void 0===n?void 0:n.match(/count=(exact|planned|estimated)/),i=null===(r=e.headers.get("content-range"))||void 0===r?void 0:r.split("/");s&&i&&i.length>1&&(l=parseInt(i[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(o)&&(o.length>1?(a={code:"PGRST116",details:"Results contain ".concat(o.length," rows, application/vnd.pgrst.object+json requires 1 row"),hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,l=null,c=406,d="Not Acceptable"):o=1===o.length?o[0]:null)}else{const t=await e.text();try{a=JSON.parse(t),Array.isArray(a)&&404===e.status&&(o=[],a=null,c=200,d="OK")}catch(u){404===e.status&&""===t?(c=204,d="No Content"):a={message:t}}if(a&&this.isMaybeSingle&&(null===(s=null===a||void 0===a?void 0:a.details)||void 0===s?void 0:s.includes("0 rows"))&&(a=null,c=200,d="OK"),a&&this.shouldThrowOnError)throw new i.default(a)}return{error:a,data:o,count:l,status:c,statusText:d}});return this.shouldThrowOnError||(n=n.catch(e=>{var t,n,r;return{error:{message:"".concat(null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:"FetchError",": ").concat(null===e||void 0===e?void 0:e.message),details:"".concat(null!==(n=null===e||void 0===e?void 0:e.stack)&&void 0!==n?n:""),hint:"",code:"".concat(null!==(r=null===e||void 0===e?void 0:e.code)&&void 0!==r?r:"")},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}}},9379:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(4705);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}},9461:(e,t,n)=>{"use strict";e.exports=n(2330)},9475:function(e,t,n){!function(){var t;e.exports=(t=n(4488),n(8523),n(4199),n(8211),n(2238),function(){var e=t,n=e.lib,r=n.WordArray,s=n.BlockCipher,i=e.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],o=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],l=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],c=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],d=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],u=i.DES=s.extend({_doReset:function(){for(var e=this._key.words,t=[],n=0;n<56;n++){var r=a[n]-1;t[n]=e[r>>>5]>>>31-r%32&1}for(var s=this._subKeys=[],i=0;i<16;i++){var c=s[i]=[],d=l[i];for(n=0;n<24;n++)c[n/6|0]|=t[(o[n]-1+d)%28]<<31-n%6,c[4+(n/6|0)]|=t[28+(o[n+24]-1+d)%28]<<31-n%6;for(c[0]=c[0]<<1|c[0]>>>31,n=1;n<7;n++)c[n]=c[n]>>>4*(n-1)+3;c[7]=c[7]<<5|c[7]>>>27}var u=this._invSubKeys=[];for(n=0;n<16;n++)u[n]=s[15-n]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,n){this._lBlock=e[t],this._rBlock=e[t+1],h.call(this,4,252645135),h.call(this,16,65535),p.call(this,2,858993459),p.call(this,8,16711935),h.call(this,1,1431655765);for(var r=0;r<16;r++){for(var s=n[r],i=this._lBlock,a=this._rBlock,o=0,l=0;l<8;l++)o|=c[l][((a^s[l])&d[l])>>>0];this._lBlock=a,this._rBlock=i^o}var u=this._lBlock;this._lBlock=this._rBlock,this._rBlock=u,h.call(this,1,1431655765),p.call(this,8,16711935),p.call(this,2,858993459),h.call(this,16,65535),h.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function h(e,t){var n=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=n,this._lBlock^=n<<e}function p(e,t){var n=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=n,this._rBlock^=n<<e}e.DES=s._createHelper(u);var f=i.TripleDES=s.extend({_doReset:function(){var e=this._key.words;if(2!==e.length&&4!==e.length&&e.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var t=e.slice(0,2),n=e.length<4?e.slice(0,2):e.slice(2,4),s=e.length<6?e.slice(0,2):e.slice(4,6);this._des1=u.createEncryptor(r.create(t)),this._des2=u.createEncryptor(r.create(n)),this._des3=u.createEncryptor(r.create(s))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});e.TripleDES=s._createHelper(f)}(),t.TripleDES)}()},9638:function(e,t,n){!function(){var t;e.exports=(t=n(4488),n(8523),n(4199),n(8211),n(2238),function(){var e=t,n=e.lib.StreamCipher,r=e.algo,s=r.RC4=n.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes,r=this._S=[],s=0;s<256;s++)r[s]=s;s=0;for(var i=0;s<256;s++){var a=s%n,o=t[a>>>2]>>>24-a%4*8&255;i=(i+r[s]+o)%256;var l=r[s];r[s]=r[i],r[i]=l}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=i.call(this)},keySize:8,ivSize:0});function i(){for(var e=this._S,t=this._i,n=this._j,r=0,s=0;s<4;s++){n=(n+e[t=(t+1)%256])%256;var i=e[t];e[t]=e[n],e[n]=i,r|=e[(e[t]+e[n])%256]<<24-8*s}return this._i=t,this._j=n,r}e.RC4=n._createHelper(s);var a=r.RC4Drop=s.extend({cfg:s.cfg.extend({drop:192}),_doReset:function(){s._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)i.call(this)}});e.RC4Drop=n._createHelper(a)}(),t.RC4)}()},9749:function(e,t,n){!function(){var t;e.exports=(t=n(4488),function(e){var n=t,r=n.lib,s=r.Base,i=r.WordArray,a=n.x64={};a.Word=s.extend({init:function(e,t){this.high=e,this.low=t}}),a.WordArray=s.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=n!=e?n:8*t.length},toX32:function(){for(var e=this.words,t=e.length,n=[],r=0;r<t;r++){var s=e[r];n.push(s.high),n.push(s.low)}return i.create(n,this.sigBytes)},clone:function(){for(var e=s.clone.call(this),t=e.words=this.words.slice(0),n=t.length,r=0;r<n;r++)t[r]=t[r].clone();return e}})}(),t)}()}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{SWRConfig:()=>Ue,default:()=>Be,mutate:()=>xe,preload:()=>Ce,unstable_serialize:()=>De,useSWRConfig:()=>Ne});var t=n(5043),r=n(4391),s=n(9379);function i(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function a(e){var t,n,r,s,i,a,o;return{code:e.code,message:e.message,longMessage:e.long_message,meta:{paramName:null===e||void 0===e||null===e.meta||void 0===t?void 0:t.param_name,sessionId:null===e||void 0===e||null===e.meta||void 0===n?void 0:n.session_id,emailAddresses:null===e||void 0===e||null===e.meta||void 0===r?void 0:r.email_addresses,identifiers:null===e||void 0===e||null===e.meta||void 0===s?void 0:s.identifiers,zxcvbn:null===e||void 0===e||null===e.meta||void 0===i?void 0:i.zxcvbn,plan:null===e||void 0===e||null===e.meta||void 0===a?void 0:a.plan,isPlanUpgradePossible:null===e||void 0===e||null===e.meta||void 0===o?void 0:o.is_plan_upgrade_possible}}}Error,Error,Error;var o=Object.freeze({InvalidProxyUrlErrorMessage:"The proxyUrl passed to Clerk is invalid. The expected value for proxyUrl is an absolute URL or a relative path with a leading '/'. (key={{url}})",InvalidPublishableKeyErrorMessage:"The publishableKey passed to Clerk is invalid. You can get your Publishable key at https://dashboard.clerk.com/last-active?path=api-keys. (key={{key}})",MissingPublishableKeyErrorMessage:"Missing publishableKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.",MissingSecretKeyErrorMessage:"Missing secretKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.",MissingClerkProvider:"{{source}} can only be used within the <ClerkProvider /> component. Learn more: https://clerk.com/docs/components/clerk-provider"});function l(e){let{packageName:t,customMessages:n}=e,r=t;function i(e,t){if(!t)return"".concat(r,": ").concat(e);let n=e;const s=e.matchAll(/{{([a-zA-Z0-9-_]+)}}/g);for(const r of s){const e=(t[r[1]]||"").toString();n=n.replace("{{".concat(r[1],"}}"),e)}return"".concat(r,": ").concat(n)}const a=(0,s.A)((0,s.A)({},o),n);return{setPackageName(e){let{packageName:t}=e;return"string"===typeof t&&(r=t),this},setMessages(e){let{customMessages:t}=e;return Object.assign(a,t||{}),this},throwInvalidPublishableKeyError(e){throw new Error(i(a.InvalidPublishableKeyErrorMessage,e))},throwInvalidProxyUrl(e){throw new Error(i(a.InvalidProxyUrlErrorMessage,e))},throwMissingPublishableKeyError(){throw new Error(i(a.MissingPublishableKeyErrorMessage))},throwMissingSecretKeyError(){throw new Error(i(a.MissingSecretKeyErrorMessage))},throwMissingClerkProviderError(e){throw new Error(i(a.MissingClerkProvider,e))},throw(e){throw new Error(i(e))}}}var c=Object.defineProperty,d=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,h=Object.prototype.hasOwnProperty,p=e=>{throw TypeError(e)},f=(e,t,n,r)=>{if(t&&"object"===typeof t||"function"===typeof t)for(let s of u(t))h.call(e,s)||s===n||c(e,s,{get:()=>t[s],enumerable:!(r=d(t,s))||r.enumerable});return e},g=(e,t,n)=>t.has(e)||p("Cannot "+n),m=(e,t,n)=>(g(e,t,"read from private field"),n?n.call(e):t.get(e)),y=(e,t,n,r)=>(g(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),x=(e,t,n)=>(g(e,t,"access private method"),n);var b=e=>{const t=n=>{if(!n)return n;if(Array.isArray(n))return n.map(e=>"object"===typeof e||Array.isArray(e)?t(e):e);const r=(0,s.A)({},n),i=Object.keys(r);for(const s of i){const n=e(s.toString());n!==s&&(r[n]=r[s],delete r[s]),"object"===typeof r[n]&&(r[n]=t(r[n]))}return r};return t};b(function(e){return e?e.replace(/[A-Z]/g,e=>"_".concat(e.toLowerCase())):""}),b(function(e){return e?e.replace(/([-_][a-z])/g,e=>e.toUpperCase().replace(/-|_/,"")):""});const v=["sk","pk","payload"];var w;w=new WeakMap,new WeakMap,new WeakSet;var _,k,j,S,N,C,E,A,P;_=new WeakMap,k=new WeakMap,j=new WeakMap,S=new WeakMap,N=new WeakMap,C=new WeakSet,E=function(e,t){const n=Math.random();return!!(n<=m(this,_).samplingRate&&(!1===m(this,_).perEventSampling||"undefined"===typeof t||n<=t))&&!m(this,k).isEventThrottled(e)},A=function(){const e=[...m(this,S)];if(y(this,S,[]),y(this,N,null),0===e.length)return;const t=e.filter(e=>"event"===e.kind).map(e=>e.value),n=e.filter(e=>"log"===e.kind).map(e=>e.value);if(t.length>0){const e=new URL("/v1/event",m(this,_).endpoint);fetch(e,{headers:{"Content-Type":"application/json"},keepalive:!0,method:"POST",body:JSON.stringify({events:t})}).catch(()=>{})}if(n.length>0){const e=new URL("/v1/logs",m(this,_).endpoint);fetch(e,{headers:{"Content-Type":"application/json"},keepalive:!0,method:"POST",body:JSON.stringify({logs:n})}).catch(()=>{})}},P=function(){const e={name:m(this,j).sdk,version:m(this,j).sdkVersion};if("undefined"!==typeof window){const n=window;if(n.Clerk){const r=n.Clerk;if("object"===typeof(t=r)&&null!==t&&"constructor"in t&&"function"===typeof t.constructor&&r.constructor.sdkMetadata){const{name:t,version:n}=r.constructor.sdkMetadata;void 0!==t&&(e.name=t),void 0!==n&&(e.version=n)}}}var t;return e};function T(e,t){return{event:"METHOD_CALLED",eventSamplingRate:.1,payload:(0,s.A)({method:e},t)}}var O=n(9461);var M=Object.prototype.hasOwnProperty;const I=new WeakMap,R=()=>{},L=R(),D=Object,z=e=>e===L,F=e=>"function"==typeof e,U=(e,t)=>(0,s.A)((0,s.A)({},e),t),B=e=>F(e.then),V={},W={},H="undefined",q=typeof window!=H,K=typeof document!=H,$=q&&"Deno"in window,G=(e,t)=>{const n=I.get(e);return[()=>!z(t)&&e.get(t)||V,r=>{if(!z(t)){const s=e.get(t);t in W||(W[t]=s),n[5](t,U(s,r),s||V)}},n[6],()=>!z(t)&&t in W?W[t]:!z(t)&&e.get(t)||V]};let J=!0;const[Y,Q]=q&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[R,R],X={isOnline:()=>J,isVisible:()=>{const e=K&&document.visibilityState;return z(e)||"hidden"!==e}},Z={initFocus:e=>(K&&document.addEventListener("visibilitychange",e),Y("focus",e),()=>{K&&document.removeEventListener("visibilitychange",e),Q("focus",e)}),initReconnect:e=>{const t=()=>{J=!0,e()},n=()=>{J=!1};return Y("online",t),Y("offline",n),()=>{Q("online",t),Q("offline",n)}}},ee=!t.useId,te=!q||$,ne=e=>q&&typeof window.requestAnimationFrame!=H?window.requestAnimationFrame(e):setTimeout(e,1),re=te?t.useEffect:t.useLayoutEffect,se="undefined"!==typeof navigator&&navigator.connection,ie=!te&&se&&(["slow-2g","2g"].includes(se.effectiveType)||se.saveData),ae=new WeakMap,oe=(e,t)=>e==="[object ".concat(t,"]");let le=0;const ce=e=>{const t=typeof e,n=(r=e,D.prototype.toString.call(r));var r;const s=oe(n,"Date"),i=oe(n,"RegExp"),a=oe(n,"Object");let o,l;if(D(e)!==e||s||i)o=s?e.toJSON():"symbol"==t?e.toString():"string"==t?JSON.stringify(e):""+e;else{if(o=ae.get(e),o)return o;if(o=++le+"~",ae.set(e,o),Array.isArray(e)){for(o="@",l=0;l<e.length;l++)o+=ce(e[l])+",";ae.set(e,o)}if(a){o="#";const t=D.keys(e).sort();for(;!z(l=t.pop());)z(e[l])||(o+=l+":"+ce(e[l])+",");ae.set(e,o)}}return o},de=e=>{if(F(e))try{e=e()}catch(n){e=""}const t=e;return[e="string"==typeof e?e:(Array.isArray(e)?e.length:e)?ce(e):"",t]};let ue=0;const he=()=>++ue;async function pe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const[r,s,i,a]=t,o=U({populateCache:!0,throwOnError:!0},"boolean"===typeof a?{revalidate:a}:a||{});let l=o.populateCache;const c=o.rollbackOnError;let d=o.optimisticData;const u=o.throwOnError;if(F(s)){const e=s,t=[],n=r.keys();for(const s of n)!/^\$(inf|sub)\$/.test(s)&&e(r.get(s)._k)&&t.push(s);return Promise.all(t.map(h))}return h(s);async function h(e){const[n]=de(e);if(!n)return;const[s,a]=G(r,n),[h,p,f,g]=I.get(r),m=()=>{const t=h[n];return(F(o.revalidate)?o.revalidate(s().data,e):!1!==o.revalidate)&&(delete f[n],delete g[n],t&&t[0])?t[0](2).then(()=>s().data):s().data};if(t.length<3)return m();let y,x=i,b=!1;const v=he();p[n]=[v,0];const w=!z(d),_=s(),k=_.data,j=_._c,S=z(j)?k:j;if(w&&(d=F(d)?d(S,k):d,a({data:d,_c:S})),F(x))try{x=x(S)}catch(N){y=N,b=!0}if(x&&B(x)){if(x=await x.catch(e=>{y=e,b=!0}),v!==p[n][0]){if(b)throw y;return x}b&&w&&(e=>"function"===typeof c?c(e):!1!==c)(y)&&(l=!0,a({data:S,_c:L}))}if(l&&!b)if(F(l)){const e=l(x,S);a({data:e,error:L,_c:L})}else a({data:x,error:L,_c:L});if(p[n][1]=he(),Promise.resolve(m()).then(()=>{a({_c:L})}),!b)return x;if(u)throw y}}const fe=(e,t)=>{for(const n in e)e[n][0]&&e[n][0](t)},ge=(e,t)=>{if(!I.has(e)){const n=U(Z,t),r=Object.create(null),s=pe.bind(L,e);let i=R;const a=Object.create(null),o=(e,t)=>{const n=a[e]||[];return a[e]=n,n.push(t),()=>n.splice(n.indexOf(t),1)},l=(t,n,r)=>{e.set(t,n);const s=a[t];if(s)for(const e of s)e(n,r)},c=()=>{if(!I.has(e)&&(I.set(e,[r,Object.create(null),Object.create(null),Object.create(null),s,l,o]),!te)){const t=n.initFocus(setTimeout.bind(L,fe.bind(L,r,0))),s=n.initReconnect(setTimeout.bind(L,fe.bind(L,r,1)));i=()=>{t&&t(),s&&s(),I.delete(e)}}};return c(),[e,s,c,i]}return[e,I.get(e)[4]]},me=function e(t,n){var r,s;if(t===n)return!0;if(t&&n&&(r=t.constructor)===n.constructor){if(r===Date)return t.getTime()===n.getTime();if(r===RegExp)return t.toString()===n.toString();if(r===Array){if((s=t.length)===n.length)for(;s--&&e(t[s],n[s]););return-1===s}if(!r||"object"===typeof t){for(r in s=0,t){if(M.call(t,r)&&++s&&!M.call(n,r))return!1;if(!(r in n)||!e(t[r],n[r]))return!1}return Object.keys(n).length===s}}return t!==t&&n!==n},[ye,xe]=ge(new Map),be=U({onLoadingSlow:R,onSuccess:R,onError:R,onErrorRetry:(e,t,n,r,s)=>{const i=n.errorRetryCount,a=s.retryCount,o=~~((Math.random()+.5)*(1<<(a<8?a:8)))*n.errorRetryInterval;!z(i)&&a>i||setTimeout(r,o,s)},onDiscarded:R,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:ie?1e4:5e3,focusThrottleInterval:5e3,dedupingInterval:2e3,loadingTimeout:ie?5e3:3e3,compare:me,isPaused:()=>!1,cache:ye,mutate:xe,fallback:{}},X),ve=(e,t)=>{const n=U(e,t);if(t){const{use:r,fallback:s}=e,{use:i,fallback:a}=t;r&&i&&(n.use=r.concat(i)),s&&a&&(n.fallback=U(s,a))}return n},we=(0,t.createContext)({}),_e="$inf$",ke=q&&window.__SWR_DEVTOOLS_USE__,je=ke?window.__SWR_DEVTOOLS_USE__:[],Se=e=>F(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(null===e[1]?e[2]:e[1])||{}],Ne=()=>U(be,(0,t.useContext)(we)),Ce=(e,t)=>{const[n,r]=de(e),[,,,s]=I.get(ye);if(s[n])return s[n];const i=t(r);return s[n]=i,i},Ee=je.concat(e=>(t,n,r)=>e(t,n&&function(){const[e]=de(t),[,,,r]=I.get(ye);if(e.startsWith(_e))return n(...arguments);const s=r[e];return z(s)?n(...arguments):(delete r[e],s)},r));ke&&(window.__SWR_DEVTOOLS_REACT__=t);const Ae=()=>{},Pe=Ae(),Te=Object,Oe=e=>e===Pe,Me=new WeakMap,Ie=(e,t)=>e==="[object ".concat(t,"]");let Re=0;const Le=e=>{const t=typeof e,n=(r=e,Te.prototype.toString.call(r));var r;const s=Ie(n,"Date"),i=Ie(n,"RegExp"),a=Ie(n,"Object");let o,l;if(Te(e)!==e||s||i)o=s?e.toJSON():"symbol"==t?e.toString():"string"==t?JSON.stringify(e):""+e;else{if(o=Me.get(e),o)return o;if(o=++Re+"~",Me.set(e,o),Array.isArray(e)){for(o="@",l=0;l<e.length;l++)o+=Le(e[l])+",";Me.set(e,o)}if(a){o="#";const t=Te.keys(e).sort();for(;!Oe(l=t.pop());)Oe(e[l])||(o+=l+":"+Le(e[l])+",");Me.set(e,o)}}return o},De=e=>(e=>{if("function"==typeof e)try{e=e()}catch(n){e=""}const t=e;return[e="string"==typeof e?e:(Array.isArray(e)?e.length:e)?Le(e):"",t]})(e)[0],ze=t.use||(e=>{switch(e.status){case"pending":throw e;case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e}}),Fe={dedupe:!0},Ue=D.defineProperty(e=>{const{value:n}=e,r=(0,t.useContext)(we),s=F(n),i=(0,t.useMemo)(()=>s?n(r):n,[s,r,n]),a=(0,t.useMemo)(()=>s?i:ve(r,i),[s,r,i]),o=i&&i.provider,l=(0,t.useRef)(L);o&&!l.current&&(l.current=ge(o(a.cache||ye),i));const c=l.current;return c&&(a.cache=c[0],a.mutate=c[1]),re(()=>{if(c)return c[2]&&c[2](),c[3]},[]),(0,t.createElement)(we.Provider,U(e,{value:a}))},"defaultValue",{value:be}),Be=(Ve=(e,n,r)=>{const{cache:i,compare:a,suspense:o,fallbackData:l,revalidateOnMount:c,revalidateIfStale:d,refreshInterval:u,refreshWhenHidden:h,refreshWhenOffline:p,keepPreviousData:f}=r,[g,m,y,x]=I.get(i),[b,v]=de(e),w=(0,t.useRef)(!1),_=(0,t.useRef)(!1),k=(0,t.useRef)(b),j=(0,t.useRef)(n),S=(0,t.useRef)(r),N=()=>S.current,C=()=>N().isVisible()&&N().isOnline(),[E,A,P,T]=G(i,b),M=(0,t.useRef)({}).current,R=z(l)?z(r.fallback)?L:r.fallback[b]:l,D=(e,t)=>{for(const n in M){const r=n;if("data"===r){if(!a(e[r],t[r])){if(!z(e[r]))return!1;if(!a(Q,t[r]))return!1}}else if(t[r]!==e[r])return!1}return!0},V=(0,t.useMemo)(()=>{const e=!!b&&!!n&&(z(c)?!N().isPaused()&&!o&&!1!==d:c),t=t=>{const n=U(t);return delete n._k,e?(0,s.A)({isValidating:!0,isLoading:!0},n):n},r=E(),i=T(),a=t(r),l=r===i?a:t(i);let u=a;return[()=>{const e=t(E());return D(e,u)?(u.data=e.data,u.isLoading=e.isLoading,u.isValidating=e.isValidating,u.error=e.error,u):(u=e,e)},()=>l]},[i,b]),W=(0,O.useSyncExternalStore)((0,t.useCallback)(e=>P(b,(t,n)=>{D(n,t)||e()}),[i,b]),V[0],V[1]),H=!w.current,q=g[b]&&g[b].length>0,K=W.data,$=z(K)?R&&B(R)?ze(R):R:K,J=W.error,Y=(0,t.useRef)($),Q=f?z(K)?z(Y.current)?$:Y.current:K:$,X=!(q&&!z(J))&&(H&&!z(c)?c:!N().isPaused()&&(o?!z($)&&d:z($)||d)),Z=!!(b&&n&&H&&X),se=z(W.isValidating)?Z:W.isValidating,ie=z(W.isLoading)?Z:W.isLoading,ae=(0,t.useCallback)(async e=>{const t=j.current;if(!b||!t||_.current||N().isPaused())return!1;let n,s,i=!0;const o=e||{},l=!y[b]||!o.dedupe,c=()=>ee?!_.current&&b===k.current&&w.current:b===k.current,d={isValidating:!1,isLoading:!1},u=()=>{A(d)},h=()=>{const e=y[b];e&&e[1]===s&&delete y[b]},p={isValidating:!0};z(E().data)&&(p.isLoading=!0);try{if(l&&(A(p),r.loadingTimeout&&z(E().data)&&setTimeout(()=>{i&&c()&&N().onLoadingSlow(b,r)},r.loadingTimeout),y[b]=[t(v),he()]),[n,s]=y[b],n=await n,l&&setTimeout(h,r.dedupingInterval),!y[b]||y[b][1]!==s)return l&&c()&&N().onDiscarded(b),!1;d.error=L;const e=m[b];if(!z(e)&&(s<=e[0]||s<=e[1]||0===e[1]))return u(),l&&c()&&N().onDiscarded(b),!1;const o=E().data;d.data=a(o,n)?o:n,l&&c()&&N().onSuccess(n,b,r)}catch(f){h();const e=N(),{shouldRetryOnError:t}=e;e.isPaused()||(d.error=f,l&&c()&&(e.onError(f,b,e),(!0===t||F(t)&&t(f))&&(N().revalidateOnFocus&&N().revalidateOnReconnect&&!C()||e.onErrorRetry(f,b,e,e=>{const t=g[b];t&&t[0]&&t[0](3,e)},{retryCount:(o.retryCount||0)+1,dedupe:!0}))))}return i=!1,u(),!0},[b,i]),oe=(0,t.useCallback)(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return pe(i,k.current,...t)},[]);if(re(()=>{j.current=n,S.current=r,z(K)||(Y.current=K)}),re(()=>{if(!b)return;const e=ae.bind(L,Fe);let t=0;if(N().revalidateOnFocus){const e=Date.now();t=e+N().focusThrottleInterval}const n=((e,t,n)=>{const r=t[e]||(t[e]=[]);return r.push(n),()=>{const e=r.indexOf(n);e>=0&&(r[e]=r[r.length-1],r.pop())}})(b,g,function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0==n){const n=Date.now();N().revalidateOnFocus&&n>t&&C()&&(t=n+N().focusThrottleInterval,e())}else if(1==n)N().revalidateOnReconnect&&C()&&e();else{if(2==n)return ae();if(3==n)return ae(r)}});return _.current=!1,k.current=b,w.current=!0,A({_k:v}),X&&(y[b]||(z($)||te?e():ne(e))),()=>{_.current=!0,n()}},[b]),re(()=>{let e;function t(){const t=F(u)?u(E().data):u;t&&-1!==e&&(e=setTimeout(n,t))}function n(){E().error||!h&&!N().isVisible()||!p&&!N().isOnline()?t():ae(Fe).then(t)}return t(),()=>{e&&(clearTimeout(e),e=-1)}},[u,h,p,b]),(0,t.useDebugValue)(Q),o&&z($)&&b){if(!ee&&te)throw new Error("Fallback data is required when using Suspense in SSR.");j.current=n,S.current=r,_.current=!1;const e=x[b];if(!z(e)){const t=oe(e);ze(t)}if(!z(J))throw J;{const e=ae(Fe);z(Q)||(e.status="fulfilled",e.value=!0),ze(e)}}return{mutate:oe,get data(){return M.data=!0,Q},get error(){return M.error=!0,J},get isValidating(){return M.isValidating=!0,se},get isLoading(){return M.isLoading=!0,ie}}},function(){const e=Ne();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];const[s,i,a]=Se(n),o=ve(e,a);let l=Ve;const{use:c}=o,d=(c||[]).concat(Ee);for(let u=d.length;u--;)l=d[u](l);return l(s,i||o.fetcher||null,o)});var Ve;const We=()=>{},He=We(),qe=Object,Ke=e=>e===He,$e=new WeakMap,Ge=(e,t)=>e==="[object ".concat(t,"]");let Je=0;const Ye=e=>{const t=typeof e,n=(r=e,qe.prototype.toString.call(r));var r;const s=Ge(n,"Date"),i=Ge(n,"RegExp"),a=Ge(n,"Object");let o,l;if(qe(e)!==e||s||i)o=s?e.toJSON():"symbol"==t?e.toString():"string"==t?JSON.stringify(e):""+e;else{if(o=$e.get(e),o)return o;if(o=++Je+"~",$e.set(e,o),Array.isArray(e)){for(o="@",l=0;l<e.length;l++)o+=Ye(e[l])+",";$e.set(e,o)}if(a){o="#";const t=qe.keys(e).sort();for(;!Ke(l=t.pop());)Ke(e[l])||(o+=l+":"+Ye(e[l])+",");$e.set(e,o)}}return o},Qe=e=>(e=>{if("function"==typeof e)try{e=e()}catch(n){e=""}const t=e;return[e="string"==typeof e?e:(Array.isArray(e)?e.length:e)?Ye(e):"",t]})(e?e(0,null):null)[0],Xe=Promise.resolve(),Ze=((e,t)=>function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];const[a,o,l]=Se(r),c=(l.use||[]).concat(t);return e(a,o,(0,s.A)((0,s.A)({},l),{},{use:c}))})(Be,e=>(n,r,i)=>{const a=(0,t.useRef)(!1),{cache:o,initialSize:l=1,revalidateAll:c=!1,persistSize:d=!1,revalidateFirstPage:u=!0,revalidateOnMount:h=!1,parallel:p=!1}=i,[,,,f]=I.get(ye);let g;try{g=Qe(n),g&&(g=_e+g)}catch(N){}const[m,y,x]=G(o,g),b=(0,t.useCallback)(()=>z(m()._l)?l:m()._l,[o,g,l]);(0,O.useSyncExternalStore)((0,t.useCallback)(e=>g?x(g,()=>{e()}):()=>{},[o,g]),b,b);const v=(0,t.useCallback)(()=>{const e=m()._l;return z(e)?l:e},[g,l]),w=(0,t.useRef)(v());re(()=>{a.current?g&&y({_l:d?w.current:v()}):a.current=!0},[g,o]);const _=h&&!a.current,k=e(g,async e=>{const t=m()._i,s=m()._r;y({_r:L});const a=[],l=v(),[d]=G(o,e),h=d().data,g=[];let x=null;for(let m=0;m<l;++m){const[e,l]=de(n(m,p?null:x));if(!e)break;const[d,y]=G(o,e);let b=d().data;const v=c||t||z(b)||u&&!m&&!z(h)||_||h&&!z(h[m])&&!i.compare(h[m],b);if(r&&("function"===typeof s?s(b,l):v)){const t=async()=>{if(e in f){const t=f[e];delete f[e],b=await t}else b=await r(l);y({data:b,_k:l}),a[m]=b};p?g.push(t):await t()}else a[m]=b;p||(x=b)}return p&&await Promise.all(g.map(e=>e())),y({_i:L}),a},i),j=(0,t.useCallback)(function(e,t){const n="boolean"===typeof t?{revalidate:t}:t||{},r=!1!==n.revalidate;return g?(r&&(z(e)?y({_i:!0,_r:n.revalidate}):y({_i:!1,_r:n.revalidate})),arguments.length?k.mutate(e,(0,s.A)((0,s.A)({},n),{},{revalidate:r})):k.mutate()):Xe},[g,o]),S=(0,t.useCallback)(e=>{if(!g)return Xe;const[,t]=G(o,g);let r;if(F(e)?r=e(v()):"number"==typeof e&&(r=e),"number"!=typeof r)return Xe;t({_l:r}),w.current=r;const s=[],[i]=G(o,g);let a=null;for(let l=0;l<r;++l){const[e]=de(n(l,a)),[t]=G(o,e),r=e?t().data:L;if(z(r))return j(i().data);s.push(r),a=r}return j(s)},[g,o,j,v]);return{size:v(),setSize:S,mutate:j,get data(){return k.data},get error(){return k.error},get isValidating(){return k.isValidating},get isLoading(){return k.isLoading}}});var et=Object.prototype.hasOwnProperty;function tt(e,t,n){for(n of e.keys())if(nt(n,t))return n}function nt(e,t){var n,r,s;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&nt(e[r],t[r]););return-1===r}if(n===Set){if(e.size!==t.size)return!1;for(r of e){if((s=r)&&"object"===typeof s&&!(s=tt(t,s)))return!1;if(!t.has(s))return!1}return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e){if((s=r[0])&&"object"===typeof s&&!(s=tt(t,s)))return!1;if(!nt(r[1],t.get(s)))return!1}return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return-1===r}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return-1===r}if(!n||"object"===typeof e){for(n in r=0,e){if(et.call(e,n)&&++r&&!et.call(t,n))return!1;if(!(n in t)||!nt(e[n],t[n]))return!1}return Object.keys(t).length===r}}return e!==e&&t!==t}const rt=["children"],st=["for"],it=["orgId"];function at(e,t){if(!e)throw"string"===typeof t?new Error(t):new Error("".concat(t.displayName," not found"))}var ot,lt,ct=(e,n)=>{const{assertCtxFn:r=at}=n||{},s=t.createContext(void 0);s.displayName=e;return[s,()=>{const n=t.useContext(s);return r(n,"".concat(e," not found")),n.value},()=>{const e=t.useContext(s);return e?e.value:{}}]},dt={};((e,t)=>{for(var n in t)c(e,n,{get:t[n],enumerable:!0})})(dt,{useSWR:()=>Be,useSWRInfinite:()=>Ze}),f(dt,ot=e,"default"),lt&&f(lt,ot,"default");var[ut,ht]=ct("ClerkInstanceContext"),[pt,ft]=ct("UserContext"),[gt,mt]=ct("ClientContext"),[yt,xt]=ct("SessionContext"),[bt,vt]=(t.createContext({}),ct("CheckoutContext")),wt=e=>{let{children:n}=e,r=i(e,rt);return t.createElement(bt.Provider,{value:{value:r}},n)};var[_t,kt]=ct("OrganizationContext"),jt=e=>{let{children:n,organization:r,swrConfig:s}=e;return t.createElement(dt.SWRConfig,{value:s},t.createElement(_t.Provider,{value:{value:{organization:r}}},n))};function St(e){if(!t.useContext(ut)){if("function"===typeof e)return void e();throw new Error("".concat(e," can only be used within the <ClerkProvider /> component.\n\nPossible fixes:\n1. Ensure that the <ClerkProvider /> is correctly wrapping your application where this component is used.\n2. Check for multiple versions of the `@clerk/shared` package in your project. Use a tool like `npm ls @clerk/shared` to identify multiple versions, and update your dependencies to only rely on one.\n\nLearn more: https://clerk.com/docs/components/clerk-provider").trim())}}function Nt(e,t){const n=new Set(Object.keys(t)),r={};for(const s of Object.keys(e))n.has(s)||(r[s]=e[s]);return r}var Ct=(e,n)=>{var r,i;const a="boolean"===typeof e&&e,o=(0,t.useRef)(a?n.initialPage:null!==(r=null===e||void 0===e?void 0:e.initialPage)&&void 0!==r?r:n.initialPage),l=(0,t.useRef)(a?n.pageSize:null!==(i=null===e||void 0===e?void 0:e.pageSize)&&void 0!==i?i:n.pageSize),c={};for(const t of Object.keys(n)){var d;c[t]=a?n[t]:null!==(d=null===e||void 0===e?void 0:e[t])&&void 0!==d?d:n[t]}return(0,s.A)((0,s.A)({},c),{},{initialPage:o.current,pageSize:l.current})},Et={dedupingInterval:6e4,focusThrottleInterval:12e4},At=(e,n,r,i)=>{var a,o,l,c,d,u,h;const[p,f]=(0,t.useState)(null!==(a=e.initialPage)&&void 0!==a?a:1),g=(0,t.useRef)(null!==(o=e.initialPage)&&void 0!==o?o:1),m=(0,t.useRef)(null!==(l=e.pageSize)&&void 0!==l?l:10),y=null===(c=r.enabled)||void 0===c||c,x="cache"===r.__experimental_mode,b=null!==(d=r.infinite)&&void 0!==d&&d,v=null!==(u=r.keepPreviousData)&&void 0!==u&&u,w=r.isSignedIn,_=(0,s.A)((0,s.A)((0,s.A)({},i),e),{},{initialPage:p,pageSize:m.current}),k=!b&&y&&(!!x||!!n),j=w||k?_:null,S=!x&&n?t=>{if(!1===w||!1===k)return null;const r=Nt(t,i);return n((0,s.A)((0,s.A)({},e),r))}:null,{data:N,isValidating:C,isLoading:E,error:A,mutate:P}=Be(j,S,(0,s.A)({keepPreviousData:v},Et)),{data:T,isLoading:O,isValidating:M,error:I,size:R,setSize:L,mutate:D}=Ze(t=>b&&y?(0,s.A)((0,s.A)((0,s.A)({},e),i),{},{initialPage:g.current+t,pageSize:m.current}):null,e=>{const t=Nt(e,i);return null===n||void 0===n?void 0:n(t)},Et),z=(0,t.useMemo)(()=>b?R:p,[b,R,p]),F=(0,t.useCallback)(e=>{if(!b)return f(e);L(e)},[L]),U=(0,t.useMemo)(()=>{var e,t;return b?null!==(t=null===T||void 0===T?void 0:T.map(e=>null===e||void 0===e?void 0:e.data).flat())&&void 0!==t?t:[]:null!==(e=null===N||void 0===N?void 0:N.data)&&void 0!==e?e:[]},[b,N,T]),B=(0,t.useMemo)(()=>{var e,t;return b?(null===T||void 0===T||null===(t=T[(null===T||void 0===T?void 0:T.length)-1])||void 0===t?void 0:t.total_count)||0:null!==(e=null===N||void 0===N?void 0:N.total_count)&&void 0!==e?e:0},[b,N,T]),V=b?O:E,W=b?M:C,H=null!==(h=b?I:A)&&void 0!==h?h:null,q=!!H,K=(0,t.useCallback)(()=>{F(e=>Math.max(0,e+1))},[F]),$=(0,t.useCallback)(()=>{F(e=>Math.max(0,e-1))},[F]),G=(g.current-1)*m.current,J=Math.ceil((B-G)/m.current),Y=B-G*m.current>z*m.current,Q=(z-1)*m.current>G*m.current;return{data:U,count:B,error:H,isLoading:V,isFetching:W,isError:q,page:z,pageCount:J,fetchPage:F,fetchNext:K,fetchPrevious:$,hasNextPage:Y,hasPreviousPage:Q,revalidate:b?()=>D():()=>P(),setData:b?e=>D(e,{revalidate:!1}):e=>P(e,{revalidate:!1})}};"undefined"!==typeof window?t.useLayoutEffect:t.useEffect;var Pt="useUser";function Tt(){var e;St(Pt);const t=ft();return null===(e=ht().telemetry)||void 0===e||e.record(T(Pt)),void 0===t?{isLoaded:!1,isSignedIn:void 0,user:void 0}:null===t?{isLoaded:!0,isSignedIn:!1,user:null}:{isLoaded:!0,isSignedIn:!0,user:t}}var Ot=()=>(St("useClerk"),ht()),Mt=nt;function It(e){let{hookName:t,resourceType:n,useFetcher:r,options:a}=e;return function(e){var o;const l=e||{},{for:c}=l,d=i(l,st);St(t);const u=r(c||"user"),h=Ct(d,{initialPage:1,pageSize:10,keepPreviousData:!1,infinite:!1,__experimental_mode:void 0}),p=ht(),f=p.__unstable__environment,g=ft(),{organization:m}=kt();null===(o=p.telemetry)||void 0===o||o.record(T(t));const y="undefined"===typeof d?void 0:(0,s.A)({initialPage:h.initialPage,pageSize:h.pageSize},"organization"===c?{orgId:null===m||void 0===m?void 0:m.id}:{}),x="organization"===c?null===f||void 0===f?void 0:f.commerceSettings.billing.organization.enabled:null===f||void 0===f?void 0:f.commerceSettings.billing.user.enabled,b=!!y&&p.loaded&&!!x;return At(y||{},u,(0,s.A)((0,s.A)({keepPreviousData:h.keepPreviousData,infinite:h.infinite,enabled:b},null!==a&&void 0!==a&&a.unauthenticated?{}:{isSignedIn:Boolean(g)}),{},{__experimental_mode:h.__experimental_mode}),(0,s.A)({type:n,userId:null===g||void 0===g?void 0:g.id},"organization"===c?{orgId:null===m||void 0===m?void 0:m.id}:{}))}}It({hookName:"useStatements",resourceType:"billing-statements",useFetcher:()=>{const e=ht();if(e.loaded)return e.billing.getStatements}}),It({hookName:"usePaymentAttempts",resourceType:"billing-payment-attempts",useFetcher:()=>{const e=ht();if(e.loaded)return e.billing.getPaymentAttempts}}),It({hookName:"usePaymentMethods",resourceType:"commerce-payment-methods",useFetcher:e=>{const{organization:t}=kt(),n=ft();return"organization"===e?null===t||void 0===t?void 0:t.getPaymentSources:null===n||void 0===n?void 0:n.getPaymentSources}}),It({hookName:"usePlans",resourceType:"billing-plans",useFetcher:e=>{const t=ht();if(t.loaded)return n=>{let{orgId:r}=n,a=i(n,it);return t.billing.getPlans((0,s.A)((0,s.A)({},a),{},{for:e}))}},options:{unauthenticated:!0}});var Rt=e=>{const n=(0,t.useRef)(e);return(0,t.useEffect)(()=>{n.current=e},[e]),n.current},Lt=(e,n,r)=>{const s=!!r,i=(0,t.useRef)(r);(0,t.useEffect)(()=>{i.current=r},[r]),(0,t.useEffect)(()=>{if(!s||!e)return()=>{};const t=function(){i.current&&i.current(...arguments)};return e.on(n,t),()=>{e.off(n,t)}},[s,n,e,i])},Dt=t.createContext(null);Dt.displayName="ElementsContext";var zt=(e,t)=>{if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},Ft=e=>null!==e&&"object"===typeof e,Ut=(e,t,n)=>Ft(e)?Object.keys(e).reduce((r,i)=>{const a=!Ft(t)||!Vt(e[i],t[i]);return n.includes(i)?(a&&console.warn("Unsupported prop change: options.".concat(i," is not a mutable property.")),r):a?(0,s.A)((0,s.A)({},r||{}),{},{[i]:e[i]}):r},null):null,Bt="[object Object]",Vt=(e,t)=>{if(!Ft(e)||!Ft(t))return e===t;const n=Array.isArray(e);if(n!==Array.isArray(t))return!1;const r=Object.prototype.toString.call(e)===Bt;if(r!==(Object.prototype.toString.call(t)===Bt))return!1;if(!r&&!n)return e===t;const s=Object.keys(e),i=Object.keys(t);if(s.length!==i.length)return!1;const a={};for(let d=0;d<s.length;d+=1)a[s[d]]=!0;for(let d=0;d<i.length;d+=1)a[i[d]]=!0;const o=Object.keys(a);if(o.length!==s.length)return!1;const l=e,c=t;return o.every(e=>Vt(l[e],c[e]))},Wt=e=>{const n=t.useContext(Dt);return zt(n,e)},[Ht,qt]=(((e,n)=>{const r="".concat((s=e).charAt(0).toUpperCase()+s.slice(1),"Element");var s;const i=n?e=>{Wt("mounts <".concat(r,">"));const{id:n,className:s}=e;return t.createElement("div",{id:n,className:s})}:n=>{let{id:s,className:i,fallback:a,options:o={},onBlur:l,onFocus:c,onReady:d,onChange:u,onEscape:h,onClick:p,onLoadError:f,onLoaderStart:g,onNetworksChange:m,onConfirm:y,onCancel:x,onShippingAddressChange:b,onShippingRateChange:v}=n;const w=Wt("mounts <".concat(r,">")),_="elements"in w?w.elements:null,[k,j]=t.useState(null),S=t.useRef(null),N=t.useRef(null),[C,E]=(0,t.useState)(!1);let A;Lt(k,"blur",l),Lt(k,"focus",c),Lt(k,"escape",h),Lt(k,"click",p),Lt(k,"loaderror",f),Lt(k,"loaderstart",g),Lt(k,"networkschange",m),Lt(k,"confirm",y),Lt(k,"cancel",x),Lt(k,"shippingaddresschange",b),Lt(k,"shippingratechange",v),Lt(k,"change",u),d&&(A=()=>{E(!0),d(k)}),Lt(k,"ready",A),t.useLayoutEffect(()=>{if(null===S.current&&null!==N.current&&_){let t=null;_&&(t=_.create(e,o)),S.current=t,j(t),t&&t.mount(N.current)}},[_,o]);const P=Rt(o);return t.useEffect(()=>{if(!S.current)return;const e=Ut(o,P,["paymentRequest"]);e&&"update"in S.current&&S.current.update(e)},[o,P]),t.useLayoutEffect(()=>()=>{if(S.current&&"function"===typeof S.current.destroy)try{S.current.destroy(),S.current=null}catch(e){}},[]),t.createElement(t.Fragment,null,!C&&a,t.createElement("div",{id:s,style:{height:C?"unset":"0px",visibility:C?"visible":"hidden"},className:i,ref:N}))};i.displayName=r,i.__elementType=e})("payment","undefined"===typeof window),ct("StripeLibsContext")),[Kt,$t]=ct("PaymentElementContext"),[Gt,Jt]=ct("StripeUtilsContext");var Yt=l({packageName:"@clerk/clerk-react"});var[Qt,Xt]=ct("AuthContext"),Zt=ut,en=ht,tn="Unsupported usage of isSatellite, domain or proxyUrl. The usage of isSatellite, domain or proxyUrl as function is not supported in non-browser environments.",nn=e=>{St(()=>{Yt.throwMissingClerkProviderError({source:e})})};var rn=(e,n)=>{const r=("string"===typeof n?n:null==n?void 0:n.component)||e.displayName||e.name||"Component";e.displayName=r;const i="string"===typeof n?void 0:n,a=n=>{nn(r||"withClerk");const a=en();return a.loaded||(null==i?void 0:i.renderWhileLoading)?t.createElement(e,(0,s.A)((0,s.A)({},n),{},{component:r,clerk:a})):null};return a.displayName="withClerk(".concat(r,")"),a},sn=new Set,an=(e,t,n)=>{const r=(()=>{try{return!1}catch(e){}return!1})()||(()=>{try{return!0}catch(e){}return!1})(),s=null!==n&&void 0!==n?n:e;sn.has(s)||r||(sn.add(s),console.warn('Clerk - DEPRECATION WARNING: "'.concat(e,'" is deprecated and will be removed in the next major release.\n').concat(t)))};const on=["clerk"],ln=["clerk"],cn=["clerk"],dn=["clerk"];rn(e=>{let{clerk:n}=e,r=i(e,on);const{client:s,session:a}=n,o=s.signedInSessions?s.signedInSessions.length>0:s.activeSessions&&s.activeSessions.length>0;return t.useEffect(()=>{null===a&&o?n.redirectToAfterSignOut():n.redirectToSignIn(r)},[]),null},"RedirectToSignIn"),rn(e=>{let{clerk:n}=e,r=i(e,ln);return t.useEffect(()=>{n.redirectToSignUp(r)},[]),null},"RedirectToSignUp"),rn(e=>{let{clerk:n}=e,r=i(e,cn);return t.useEffect(()=>{n.redirectToTasks(r)},[]),null},"RedirectToTasks"),rn(e=>{let{clerk:n}=e;return t.useEffect(()=>{an("RedirectToUserProfile","Use the `redirectToUserProfile()` method instead."),n.redirectToUserProfile()},[]),null},"RedirectToUserProfile"),rn(e=>{let{clerk:n}=e;return t.useEffect(()=>{an("RedirectToOrganizationProfile","Use the `redirectToOrganizationProfile()` method instead."),n.redirectToOrganizationProfile()},[]),null},"RedirectToOrganizationProfile"),rn(e=>{let{clerk:n}=e;return t.useEffect(()=>{an("RedirectToCreateOrganization","Use the `redirectToCreateOrganization()` method instead."),n.redirectToCreateOrganization()},[]),null},"RedirectToCreateOrganization"),rn(e=>{let{clerk:n}=e,r=i(e,dn);return t.useEffect(()=>{n.handleRedirectCallback(r)},[]),null},"AuthenticateWithRedirectCallback");var un=e=>{(()=>{try{return!1}catch(e){}return!1})()&&console.error("Clerk: ".concat(e))};function hn(e,t,n){return"function"===typeof e?e(t):"undefined"!==typeof e?e:"undefined"!==typeof n?n:void 0}var pn=n(7950),fn=function(e){const t=(0,s.A)({},e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(const s of r)delete t[s];return t};const gn=["mountIcon","unmountIcon"],mn=["clerk","component","fallback"],yn=["clerk","component","fallback"],xn=["clerk","component","fallback"],bn=["clerk","component","fallback"],vn=["clerk","component","fallback"],wn=["clerk","component","fallback"],_n=["clerk","component","fallback"],kn=["clerk","component","fallback"],jn=["clerk","component","fallback"],Sn=["clerk","component","fallback"],Nn=["clerk","component","fallback"],Cn=["clerk","component","fallback"],En=["clerk","component","fallback"];var An=e=>n=>{try{return t.Children.only(e)}catch(r){return Yt.throw((e=>"You've passed multiple children components to <".concat(e,"/>. You can only pass a single child component or text."))(n))}},Pn=(e,n)=>(e||(e=n),"string"===typeof e&&(e=t.createElement("button",null,e)),e),Tn=e=>function(){if(e&&"function"===typeof e)return e(...arguments)};var On=new Map;var Mn=e=>{const[n,r]=(0,t.useState)(new Map);return e.map(e=>({id:e.id,mount:t=>r(n=>new Map(n).set(String(e.id),t)),unmount:()=>r(t=>{const n=new Map(t);return n.set(String(e.id),null),n}),portal:()=>{const t=n.get(String(e.id));return t?(0,pn.createPortal)(e.component,t):null}}))},In=(e,n)=>!!e&&t.isValidElement(e)&&(null==e?void 0:e.type)===n,Rn=(e,t)=>zn({children:e,reorderItemsLabels:["account","security"],LinkComponent:er,PageComponent:Zn,MenuItemsComponent:sr,componentName:"UserProfile"},t),Ln=(e,t)=>zn({children:e,reorderItemsLabels:["general","members"],LinkComponent:cr,PageComponent:lr,componentName:"OrganizationProfile"},t),Dn=e=>{const n=[],r=[cr,lr,sr,Zn,er];return t.Children.forEach(e,e=>{r.some(t=>In(e,t))||n.push(e)}),n},zn=(e,n)=>{const{children:r,LinkComponent:s,PageComponent:i,MenuItemsComponent:a,reorderItemsLabels:o,componentName:l}=e,{allowForAnyChildren:c=!1}=n||{},d=[];t.Children.forEach(r,e=>{if(!In(e,i)&&!In(e,s)&&!In(e,a))return void(e&&!c&&un((e=>"<".concat(e," /> can only accept <").concat(e,".Page /> and <").concat(e,".Link /> as its children. Any other provided component will be ignored. Additionally, please ensure that the component is rendered in a client component."))(l)));const{props:t}=e,{children:n,label:r,url:u,labelIcon:h}=t;if(In(e,i))if(Fn(t,o))d.push({label:r});else{if(!Un(t))return void un((e=>"Missing props. <".concat(e,".Page /> component requires the following props: url, label, labelIcon, alongside with children to be rendered inside the page."))(l));d.push({label:r,labelIcon:h,children:n,url:u})}if(In(e,s)){if(!Bn(t))return void un((e=>"Missing props. <".concat(e,".Link /> component requires the following props: url, label and labelIcon."))(l));d.push({label:r,labelIcon:h,url:u})}});const u=[],h=[],p=[];d.forEach((e,t)=>{if(Un(e))return u.push({component:e.children,id:t}),void h.push({component:e.labelIcon,id:t});Bn(e)&&p.push({component:e.labelIcon,id:t})});const f=Mn(u),g=Mn(h),m=Mn(p),y=[],x=[];return d.forEach((e,t)=>{if(Fn(e,o))y.push({label:e.label});else{if(Un(e)){const{portal:n,mount:r,unmount:s}=f.find(e=>e.id===t),{portal:i,mount:a,unmount:o}=g.find(e=>e.id===t);return y.push({label:e.label,url:e.url,mount:r,unmount:s,mountIcon:a,unmountIcon:o}),x.push(n),void x.push(i)}if(Bn(e)){const{portal:n,mount:r,unmount:s}=m.find(e=>e.id===t);return y.push({label:e.label,url:e.url,mountIcon:r,unmountIcon:s}),void x.push(n)}}}),{customPages:y,customPagesPortals:x}},Fn=(e,t)=>{const{children:n,label:r,url:s,labelIcon:i}=e;return!n&&!s&&!i&&t.some(e=>e===r)},Un=e=>{const{children:t,label:n,url:r,labelIcon:s}=e;return!!t&&!!r&&!!s&&!!n},Bn=e=>{const{children:t,label:n,url:r,labelIcon:s}=e;return!t&&!!r&&!!s&&!!n},Vn=e=>{let{children:n,MenuItemsComponent:r,MenuActionComponent:i,MenuLinkComponent:a,UserProfileLinkComponent:o,UserProfilePageComponent:l,reorderItemsLabels:c,allowForAnyChildren:d=!1}=e;const u=[],h=[],p=[];t.Children.forEach(n,e=>{if(!In(e,r)&&!In(e,o)&&!In(e,l))return void(e&&!d&&un("<UserButton /> can only accept <UserButton.UserProfilePage />, <UserButton.UserProfileLink /> and <UserButton.MenuItems /> as its children. Any other provided component will be ignored. Additionally, please ensure that the component is rendered in a client component."));if(In(e,o)||In(e,l))return;const{props:n}=e;t.Children.forEach(n.children,e=>{if(!In(e,i)&&!In(e,a))return void(e&&un("<UserButton.MenuItems /> component can only accept <UserButton.Action /> and <UserButton.Link /> as its children. Any other provided component will be ignored. Additionally, please ensure that the component is rendered in a client component."));const{props:t}=e,{label:n,labelIcon:r,href:o,onClick:l,open:d}=t;if(In(e,i))if(Wn(t,c))u.push({label:n});else{if(!Hn(t))return void un("Missing props. <UserButton.Action /> component requires the following props: label.");{const e={label:n,labelIcon:r};if(void 0!==l)u.push((0,s.A)((0,s.A)({},e),{},{onClick:l}));else{if(void 0===d)return void un("Custom menu item must have either onClick or open property");u.push((0,s.A)((0,s.A)({},e),{},{open:d.startsWith("/")?d:"/".concat(d)}))}}}if(In(e,a)){if(!qn(t))return void un("Missing props. <UserButton.Link /> component requires the following props: href, label and labelIcon.");u.push({label:n,labelIcon:r,href:o})}})});const f=[],g=[];u.forEach((e,t)=>{Hn(e)&&f.push({component:e.labelIcon,id:t}),qn(e)&&g.push({component:e.labelIcon,id:t})});const m=Mn(f),y=Mn(g);return u.forEach((e,t)=>{if(Wn(e,c)&&h.push({label:e.label}),Hn(e)){const{portal:n,mount:r,unmount:s}=m.find(e=>e.id===t),i={label:e.label,mountIcon:r,unmountIcon:s};"onClick"in e?i.onClick=e.onClick:"open"in e&&(i.open=e.open),h.push(i),p.push(n)}if(qn(e)){const{portal:n,mount:r,unmount:s}=y.find(e=>e.id===t);h.push({label:e.label,href:e.href,mountIcon:r,unmountIcon:s}),p.push(n)}}),{customMenuItems:h,customMenuItemsPortals:p}},Wn=(e,t)=>{const{children:n,label:r,onClick:s,labelIcon:i}=e;return!n&&!s&&!i&&t.some(e=>e===r)},Hn=e=>{const{label:t,labelIcon:n,onClick:r,open:s}=e;return!!n&&!!t&&("function"===typeof r||"string"===typeof s)},qn=e=>{const{label:t,href:n,labelIcon:r}=e;return!!n&&!!r&&!!t},Kn=(e=>{const t=null==e?void 0:e.isReady;return n=>new Promise((r,s)=>{const{root:i=(null==document?void 0:document.body),selector:a,timeout:o=0}=n;if(!i)return void s(new Error("No root element provided"));let l=i;if(a&&(l=null==i?void 0:i.querySelector(a)),t(l,a))return void r();const c=new MutationObserver(n=>{for(const s of n)if(!l&&a&&(l=null==i?void 0:i.querySelector(a)),(e.childList&&"childList"===s.type||e.attributes&&"attributes"===s.type)&&t(l,a))return c.disconnect(),void r()});c.observe(i,e),o>0&&setTimeout(()=>{c.disconnect(),s(new Error("Timeout waiting for ".concat(a)))},o)})})({childList:!0,subtree:!0,isReady:(e,t)=>{var n;return!!(null==e?void 0:e.childElementCount)&&(null==(n=null==e?void 0:e.matches)?void 0:n.call(e,t))&&e.childElementCount>0}});function $n(e,n){const r=(0,t.useRef)(),[s,i]=(0,t.useState)("rendering");return(0,t.useEffect)(()=>{if(!e)throw new Error("Clerk: no component name provided, unable to detect mount.");if("undefined"!==typeof window&&!r.current){const t='[data-clerk-component="'.concat(e,'"]'),s=null==n?void 0:n.selector;r.current=Kn({selector:s?t+s:t}).then(()=>{i("rendered")}).catch(()=>{i("error")})}},[e,null==n?void 0:n.selector]),s}var Gn=e=>"mount"in e,Jn=e=>"open"in e,Yn=e=>null==e?void 0:e.map(e=>{let{mountIcon:t,unmountIcon:n}=e;return i(e,gn)}),Qn=class extends t.PureComponent{constructor(){super(...arguments),this.rootRef=t.createRef()}componentDidUpdate(e){var t,n,r,s;if(!Gn(e)||!Gn(this.props))return;const i=fn(e.props,"customPages","customMenuItems","children"),a=fn(this.props.props,"customPages","customMenuItems","children"),o=(null==(t=i.customPages)?void 0:t.length)!==(null==(n=a.customPages)?void 0:n.length),l=(null==(r=i.customMenuItems)?void 0:r.length)!==(null==(s=a.customMenuItems)?void 0:s.length),c=Yn(e.props.customMenuItems),d=Yn(this.props.props.customMenuItems);Mt(i,a)&&Mt(c,d)&&!o&&!l||this.rootRef.current&&this.props.updateProps({node:this.rootRef.current,props:this.props.props})}componentDidMount(){this.rootRef.current&&(Gn(this.props)&&this.props.mount(this.rootRef.current,this.props.props),Jn(this.props)&&this.props.open(this.props.props))}componentWillUnmount(){this.rootRef.current&&(Gn(this.props)&&this.props.unmount(this.rootRef.current),Jn(this.props)&&this.props.close())}render(){const{hideRootHtmlElement:e=!1}=this.props,n=(0,s.A)((0,s.A)({ref:this.rootRef},this.props.rootProps),this.props.component&&{"data-clerk-component":this.props.component});return t.createElement(t.Fragment,null,!e&&t.createElement("div",(0,s.A)({},n)),this.props.children)}},Xn=e=>{var n,r;return t.createElement(t.Fragment,null,null==(n=null==e?void 0:e.customPagesPortals)?void 0:n.map((e,n)=>(0,t.createElement)(e,{key:n})),null==(r=null==e?void 0:e.customMenuItemsPortals)?void 0:r.map((e,n)=>(0,t.createElement)(e,{key:n})))};rn(e=>{let{clerk:n,component:r,fallback:a}=e,o=i(e,mn);const l="rendering"===$n(r)||!n.loaded,c=(0,s.A)({},l&&a&&{style:{display:"none"}});return t.createElement(t.Fragment,null,l&&a,n.loaded&&t.createElement(Qn,{component:r,mount:n.mountSignIn,unmount:n.unmountSignIn,updateProps:n.__unstable__updateProps,props:o,rootProps:c}))},{component:"SignIn",renderWhileLoading:!0}),rn(e=>{let{clerk:n,component:r,fallback:a}=e,o=i(e,yn);const l="rendering"===$n(r)||!n.loaded,c=(0,s.A)({},l&&a&&{style:{display:"none"}});return t.createElement(t.Fragment,null,l&&a,n.loaded&&t.createElement(Qn,{component:r,mount:n.mountSignUp,unmount:n.unmountSignUp,updateProps:n.__unstable__updateProps,props:o,rootProps:c}))},{component:"SignUp",renderWhileLoading:!0});function Zn(e){let{children:n}=e;return un("<UserProfile.Page /> component needs to be a direct child of `<UserProfile />` or `<UserButton />`."),t.createElement(t.Fragment,null,n)}function er(e){let{children:n}=e;return un("<UserProfile.Link /> component needs to be a direct child of `<UserProfile />` or `<UserButton />`."),t.createElement(t.Fragment,null,n)}var tr=rn(e=>{let{clerk:n,component:r,fallback:a}=e,o=i(e,xn);const l="rendering"===$n(r)||!n.loaded,c=(0,s.A)({},l&&a&&{style:{display:"none"}}),{customPages:d,customPagesPortals:u}=Rn(o.children);return t.createElement(t.Fragment,null,l&&a,t.createElement(Qn,{component:r,mount:n.mountUserProfile,unmount:n.unmountUserProfile,updateProps:n.__unstable__updateProps,props:(0,s.A)((0,s.A)({},o),{},{customPages:d}),rootProps:c},t.createElement(Xn,{customPagesPortals:u})))},{component:"UserProfile",renderWhileLoading:!0}),nr=(Object.assign(tr,{Page:Zn,Link:er}),(0,t.createContext)({mount:()=>{},unmount:()=>{},updateProps:()=>{}})),rr=rn(e=>{let{clerk:n,component:r,fallback:a}=e,o=i(e,bn);const l="rendering"===$n(r)||!n.loaded,c=(0,s.A)({},l&&a&&{style:{display:"none"}}),{customPages:d,customPagesPortals:u}=Rn(o.children,{allowForAnyChildren:!!o.__experimental_asProvider}),h=Object.assign(o.userProfileProps||{},{customPages:d}),{customMenuItems:p,customMenuItemsPortals:f}=((e,t)=>{var n;return Vn({children:e,reorderItemsLabels:["manageAccount","signOut"],MenuItemsComponent:sr,MenuActionComponent:ir,MenuLinkComponent:ar,UserProfileLinkComponent:er,UserProfilePageComponent:Zn,allowForAnyChildren:null!=(n=null==t?void 0:t.allowForAnyChildren)&&n})})(o.children,{allowForAnyChildren:!!o.__experimental_asProvider}),g=Dn(o.children),m={mount:n.mountUserButton,unmount:n.unmountUserButton,updateProps:n.__unstable__updateProps,props:(0,s.A)((0,s.A)({},o),{},{userProfileProps:h,customMenuItems:p})},y={customPagesPortals:u,customMenuItemsPortals:f};return t.createElement(nr.Provider,{value:m},l&&a,n.loaded&&t.createElement(Qn,(0,s.A)((0,s.A)({component:r},m),{},{hideRootHtmlElement:!!o.__experimental_asProvider,rootProps:c}),o.__experimental_asProvider?g:null,t.createElement(Xn,(0,s.A)({},y))))},{component:"UserButton",renderWhileLoading:!0});function sr(e){let{children:n}=e;return un("<UserButton.MenuItems /> component needs to be a direct child of `<UserButton />`."),t.createElement(t.Fragment,null,n)}function ir(e){let{children:n}=e;return un("<UserButton.Action /> component needs to be a direct child of `<UserButton.MenuItems />`."),t.createElement(t.Fragment,null,n)}function ar(e){let{children:n}=e;return un("<UserButton.Link /> component needs to be a direct child of `<UserButton.MenuItems />`."),t.createElement(t.Fragment,null,n)}var or=Object.assign(rr,{UserProfilePage:Zn,UserProfileLink:er,MenuItems:sr,Action:ir,Link:ar,__experimental_Outlet:function(e){const n=(0,t.useContext)(nr),r=(0,s.A)((0,s.A)({},n),{},{props:(0,s.A)((0,s.A)({},n.props),e)});return t.createElement(Qn,(0,s.A)({},r))}});function lr(e){let{children:n}=e;return un("<OrganizationProfile.Page /> component needs to be a direct child of `<OrganizationProfile />` or `<OrganizationSwitcher />`."),t.createElement(t.Fragment,null,n)}function cr(e){let{children:n}=e;return un("<OrganizationProfile.Link /> component needs to be a direct child of `<OrganizationProfile />` or `<OrganizationSwitcher />`."),t.createElement(t.Fragment,null,n)}var dr=rn(e=>{let{clerk:n,component:r,fallback:a}=e,o=i(e,vn);const l="rendering"===$n(r)||!n.loaded,c=(0,s.A)({},l&&a&&{style:{display:"none"}}),{customPages:d,customPagesPortals:u}=Ln(o.children);return t.createElement(t.Fragment,null,l&&a,n.loaded&&t.createElement(Qn,{component:r,mount:n.mountOrganizationProfile,unmount:n.unmountOrganizationProfile,updateProps:n.__unstable__updateProps,props:(0,s.A)((0,s.A)({},o),{},{customPages:d}),rootProps:c},t.createElement(Xn,{customPagesPortals:u})))},{component:"OrganizationProfile",renderWhileLoading:!0}),ur=(Object.assign(dr,{Page:lr,Link:cr}),rn(e=>{let{clerk:n,component:r,fallback:a}=e,o=i(e,wn);const l="rendering"===$n(r)||!n.loaded,c=(0,s.A)({},l&&a&&{style:{display:"none"}});return t.createElement(t.Fragment,null,l&&a,n.loaded&&t.createElement(Qn,{component:r,mount:n.mountCreateOrganization,unmount:n.unmountCreateOrganization,updateProps:n.__unstable__updateProps,props:o,rootProps:c}))},{component:"CreateOrganization",renderWhileLoading:!0}),(0,t.createContext)({mount:()=>{},unmount:()=>{},updateProps:()=>{}})),hr=rn(e=>{let{clerk:n,component:r,fallback:a}=e,o=i(e,_n);const l="rendering"===$n(r)||!n.loaded,c=(0,s.A)({},l&&a&&{style:{display:"none"}}),{customPages:d,customPagesPortals:u}=Ln(o.children,{allowForAnyChildren:!!o.__experimental_asProvider}),h=Object.assign(o.organizationProfileProps||{},{customPages:d}),p=Dn(o.children),f={mount:n.mountOrganizationSwitcher,unmount:n.unmountOrganizationSwitcher,updateProps:n.__unstable__updateProps,props:(0,s.A)((0,s.A)({},o),{},{organizationProfileProps:h}),rootProps:c,component:r};return n.__experimental_prefetchOrganizationSwitcher(),t.createElement(ur.Provider,{value:f},t.createElement(t.Fragment,null,l&&a,n.loaded&&t.createElement(Qn,(0,s.A)((0,s.A)({},f),{},{hideRootHtmlElement:!!o.__experimental_asProvider}),o.__experimental_asProvider?p:null,t.createElement(Xn,{customPagesPortals:u}))))},{component:"OrganizationSwitcher",renderWhileLoading:!0});Object.assign(hr,{OrganizationProfilePage:lr,OrganizationProfileLink:cr,__experimental_Outlet:function(e){const n=(0,t.useContext)(ur),r=(0,s.A)((0,s.A)({},n),{},{props:(0,s.A)((0,s.A)({},n.props),e)});return t.createElement(Qn,(0,s.A)({},r))}}),rn(e=>{let{clerk:n,component:r,fallback:a}=e,o=i(e,kn);const l="rendering"===$n(r)||!n.loaded,c=(0,s.A)({},l&&a&&{style:{display:"none"}});return t.createElement(t.Fragment,null,l&&a,n.loaded&&t.createElement(Qn,{component:r,mount:n.mountOrganizationList,unmount:n.unmountOrganizationList,updateProps:n.__unstable__updateProps,props:o,rootProps:c}))},{component:"OrganizationList",renderWhileLoading:!0}),rn(e=>{let{clerk:n,component:r,fallback:a}=e,o=i(e,jn);const l="rendering"===$n(r)||!n.loaded,c=(0,s.A)({},l&&a&&{style:{display:"none"}});return t.createElement(t.Fragment,null,l&&a,n.loaded&&t.createElement(Qn,{component:r,open:n.openGoogleOneTap,close:n.closeGoogleOneTap,updateProps:n.__unstable__updateProps,props:o,rootProps:c}))},{component:"GoogleOneTap",renderWhileLoading:!0}),rn(e=>{let{clerk:n,component:r,fallback:a}=e,o=i(e,Sn);const l="rendering"===$n(r)||!n.loaded,c=(0,s.A)({},l&&a&&{style:{display:"none"}});return t.createElement(t.Fragment,null,l&&a,n.loaded&&t.createElement(Qn,{component:r,mount:n.mountWaitlist,unmount:n.unmountWaitlist,updateProps:n.__unstable__updateProps,props:o,rootProps:c}))},{component:"Waitlist",renderWhileLoading:!0}),rn(e=>{let{clerk:n,component:r,fallback:a}=e,o=i(e,Nn);const l="rendering"===$n(r,{selector:'[data-component-status="ready"]'})||!n.loaded,c=(0,s.A)({},l&&a&&{style:{display:"none"}});return t.createElement(t.Fragment,null,l&&a,n.loaded&&t.createElement(Qn,{component:r,mount:n.mountPricingTable,unmount:n.unmountPricingTable,updateProps:n.__unstable__updateProps,props:o,rootProps:c}))},{component:"PricingTable",renderWhileLoading:!0}),rn(e=>{let{clerk:n,component:r,fallback:a}=e,o=i(e,Cn);const l="rendering"===$n(r)||!n.loaded,c=(0,s.A)({},l&&a&&{style:{display:"none"}});return t.createElement(t.Fragment,null,l&&a,n.loaded&&t.createElement(Qn,{component:r,mount:n.mountApiKeys,unmount:n.unmountApiKeys,updateProps:n.__unstable__updateProps,props:o,rootProps:c}))},{component:"ApiKeys",renderWhileLoading:!0}),rn(e=>{let{clerk:n,component:r,fallback:a}=e,o=i(e,En);const l="rendering"===$n(r)||!n.loaded,c=(0,s.A)({},l&&a&&{style:{display:"none"}});return t.createElement(t.Fragment,null,l&&a,n.loaded&&t.createElement(Qn,{component:r,mount:n.mountTaskChooseOrganization,unmount:n.unmountTaskChooseOrganization,updateProps:n.__unstable__updateProps,props:o,rootProps:c}))},{component:"TaskChooseOrganization",renderWhileLoading:!0});var pr=e=>{throw TypeError(e)},fr=(e,t,n)=>t.has(e)||pr("Cannot "+n),gr=(e,t,n)=>(fr(e,t,"read from private field"),n?n.call(e):t.get(e)),mr=(e,t,n)=>t.has(e)?pr("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),yr=(e,t,n,r)=>(fr(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),xr=(e,t,n)=>(fr(e,t,"access private method"),n),br=e=>{var t;return null===(t=e.trim().replace(/^v/,"").match(/-(.+?)(\.|$)/))||void 0===t?void 0:t[1]},vr=e=>e.trim().replace(/^v/,"").split(".")[0];function wr(e){return e.startsWith("/")}var _r={initialDelay:125,maxDelayBetweenRetries:0,factor:2,shouldRetry:(e,t)=>t<5,retryImmediately:!1,jitter:!0},kr=async e=>new Promise(t=>setTimeout(t,e)),jr=(e,t)=>t?e*(1+Math.random()):e,Sr=e=>{let t=0;return async()=>{await kr((()=>{const n=e.initialDelay,r=e.factor;let s=n*Math.pow(r,t);return s=jr(s,e.jitter),Math.min(e.maxDelayBetweenRetries||s,s)})()),t++}};async function Nr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;const{async:n,defer:r,beforeLoad:i,crossOrigin:a,nonce:o}=t||{};return async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=0;const{shouldRetry:r,initialDelay:i,maxDelayBetweenRetries:a,factor:o,retryImmediately:l,jitter:c,onBeforeRetry:d}=(0,s.A)((0,s.A)({},_r),t),u=Sr({initialDelay:i,maxDelayBetweenRetries:a,factor:o,jitter:c});for(;;)try{return await e()}catch(h){if(n++,!r(h,n))throw h;d&&await d(n),l&&1===n?await kr(jr(100,c)):await u()}}(()=>new Promise((t,s)=>{e||s(new Error("loadScript cannot be called without a src")),document&&document.body||s("loadScript cannot be called when document does not exist");const l=document.createElement("script");a&&l.setAttribute("crossorigin",a),l.async=n||!1,l.defer=r||!1,l.addEventListener("load",()=>{l.remove(),t(l)}),l.addEventListener("error",()=>{l.remove(),s()}),l.src=e,l.nonce=o,null===i||void 0===i||i(l),document.body.appendChild(l)}),{shouldRetry:(e,t)=>t<=5})}var Cr=e=>"undefined"!==typeof atob&&"function"===typeof atob?atob(e):"undefined"!==typeof global&&global.Buffer?new global.Buffer(e,"base64").toString():e,Er=[".lcl.dev",".stg.dev",".lclstage.dev",".stgstage.dev",".dev.lclclerk.com",".stg.lclclerk.com",".accounts.lclclerk.com","accountsstage.dev","accounts.dev"];var Ar="pk_live_",Pr="pk_test_";function Tr(e){if(!e.endsWith("$"))return!1;const t=e.slice(0,-1);return!t.includes("$")&&t.includes(".")}function Or(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(e=e||"")||!Mr(e)){if(t.fatal&&!e)throw new Error("Publishable key is missing. Ensure that your publishable key is correctly configured. Double-check your environment configuration for your keys, or access them here: https://dashboard.clerk.com/last-active?path=api-keys");if(t.fatal&&!Mr(e))throw new Error("Publishable key not valid.");return null}const n=e.startsWith(Ar)?"production":"development";let r;try{r=Cr(e.split("_")[2])}catch(i){if(t.fatal)throw new Error("Publishable key not valid: Failed to decode key.");return null}if(!Tr(r)){if(t.fatal)throw new Error("Publishable key not valid: Decoded key has invalid format.");return null}let s=r.slice(0,-1);return t.proxyUrl?s=t.proxyUrl:"development"!==n&&t.domain&&t.isSatellite&&(s="clerk.".concat(t.domain)),{instanceType:n,frontendApi:s}}function Mr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{if(!(e.startsWith(Ar)||e.startsWith(Pr)))return!1;const t=e.split("_");if(3!==t.length)return!1;const n=t[2];if(!n)return!1;return Tr(Cr(n))}catch(t){return!1}}var Ir="Clerk: Failed to load Clerk",{isDevOrStagingUrl:Rr}=function(){const e=new Map;return{isDevOrStagingUrl:t=>{if(!t)return!1;const n="string"===typeof t?t:t.hostname;let r=e.get(n);return void 0===r&&(r=Er.some(e=>n.endsWith(e)),e.set(n,r)),r}}}(),Lr=l({packageName:"@clerk/shared"});function Dr(){if("undefined"===typeof window||!window.Clerk)return!1;const e=window.Clerk;return"object"===typeof e&&"function"===typeof e.load}function zr(e){return new Promise((t,n)=>{let r=!1;const s=(e,t)=>{clearTimeout(e),clearInterval(t)},i=()=>{r||Dr()&&(r=!0,s(a,o),t(null))},a=setTimeout(()=>{r||(r=!0,s(a,o),Dr()?t(null):n(new Error(Ir)))},e);i();const o=setInterval(()=>{r?clearInterval(o):i()},100)})}var Fr=e=>{var t;const{clerkJSUrl:n,clerkJSVariant:r,clerkJSVersion:s,proxyUrl:i,domain:a,publishableKey:o}=e;if(n)return n;let l="";if(i&&(!(u=i)||function(e){return/^http(s)?:\/\//.test(e||"")}(u)||wr(u)))l=(d=i,d?wr(d)?new URL(d,window.location.origin).toString():d:"").replace(/http(s)?:\/\//,"");else if(a&&!Rr((null===(t=Or(o))||void 0===t?void 0:t.frontendApi)||""))l=function(e){if(!e)return"";let t;if(e.match(/^(clerk\.)+\w*$/))t=/(clerk\.)*(?=clerk\.)/;else{if(e.match(/\.clerk.accounts/))return e;t=/^(clerk\.)*/gi}const n=e.replace(t,"");return"clerk.".concat(n)}(a);else{var c;l=(null===(c=Or(o))||void 0===c?void 0:c.frontendApi)||""}var d,u;const h=r?"".concat(r.replace(/\.+$/,""),"."):"",p=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"5.95.0";if(e)return e;const n=br(t);return n?"snapshot"===n?"5.95.0":n:vr(t)}(s);return"https://".concat(l,"/npm/@clerk/clerk-js@").concat(p,"/dist/clerk.").concat(h,"browser.js")},Ur=e=>t=>{const n=(e=>{const t={};return e.publishableKey&&(t["data-clerk-publishable-key"]=e.publishableKey),e.proxyUrl&&(t["data-clerk-proxy-url"]=e.proxyUrl),e.domain&&(t["data-clerk-domain"]=e.domain),e.nonce&&(t.nonce=e.nonce),t})(e);for(const e in n)t.setAttribute(e,n[e])},Br=e=>{const t=e.userId,n=e.user,r=e.sessionId,s=e.sessionStatus,i=e.sessionClaims;return{userId:t,user:n,sessionId:r,session:e.session,sessionStatus:s,sessionClaims:i,organization:e.organization,orgId:e.orgId,orgRole:e.orgRole,orgPermissions:e.orgPermissions,orgSlug:e.orgSlug,actor:e.actor,factorVerificationAge:e.factorVerificationAge}},Vr=e=>{var t,n,r;const s=e.user?e.user.id:e.user,i=e.user,a=e.session?e.session.id:e.session,o=e.session,l=null===(t=e.session)||void 0===t?void 0:t.status,c=e.session?null===(n=e.session.lastActiveToken)||void 0===n||null===(n=n.jwt)||void 0===n?void 0:n.claims:null,d=e.session?e.session.factorVerificationAge:null,u=null===o||void 0===o?void 0:o.actor,h=e.organization,p=e.organization?e.organization.id:e.organization,f=null===h||void 0===h?void 0:h.slug,g=h?null===i||void 0===i||null===(r=i.organizationMemberships)||void 0===r?void 0:r.find(e=>e.organization.id===p):h,m=g?g.permissions:g,y=g?g.role:g;return{userId:s,user:i,sessionId:a,session:o,sessionStatus:l,sessionClaims:c,organization:h,orgId:p,orgRole:y,orgSlug:f,orgPermissions:m,actor:u,factorVerificationAge:d}};function Wr(){return"undefined"!==typeof window}new RegExp(["bot","spider","crawl","APIs-Google","AdsBot","Googlebot","mediapartners","Google Favicon","FeedFetcher","Google-Read-Aloud","DuplexWeb-Google","googleweblight","bing","yandex","baidu","duckduck","yahoo","ecosia","ia_archiver","facebook","instagram","pinterest","reddit","slack","twitter","whatsapp","youtube","semrush"].join("|"),"i");var Hr=(e,t,n,r,s)=>{const{notify:i}=s||{};let a=e.get(n);a||(a=[],e.set(n,a)),a.push(r),i&&t.has(n)&&r(t.get(n))},qr=(e,t,n)=>(e.get(t)||[]).map(e=>e(n)),Kr=(e,t,n)=>{const r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},$r="status",Gr=()=>(()=>{const e=new Map,t=new Map,n=new Map;return{on:function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return Hr(e,t,...r)},prioritizedOn:function(){for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return Hr(n,t,...r)},emit:(r,s)=>{t.set(r,s),qr(n,r,s),qr(e,r,s)},off:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Kr(e,...n)},prioritizedOff:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Kr(n,...t)},internal:{retrieveListeners:t=>e.get(t)||[]}}})();const Jr=["clerk","children"],Yr=["signUpFallbackRedirectUrl","forceRedirectUrl","fallbackRedirectUrl","signUpForceRedirectUrl","mode","initialValues","withSignUp","oauthFlow"],Qr=["clerk","children"],Xr=["redirectUrl"],Zr=["clerk","children"],es=["redirectUrl","signOutOptions"],ts=["clerk","children"],ns=["fallbackRedirectUrl","forceRedirectUrl","signInFallbackRedirectUrl","signInForceRedirectUrl","mode","initialValues","oauthFlow"],rs=["initialState","children","__internal_bypassMissingPublishableKey"];"undefined"===typeof window||window.global||(window.global="undefined"===typeof global?window:global);var ss=rn(e=>{let{clerk:n,children:r}=e,a=i(e,Jr);const{signUpFallbackRedirectUrl:o,forceRedirectUrl:l,fallbackRedirectUrl:c,signUpForceRedirectUrl:d,mode:u,initialValues:h,withSignUp:p,oauthFlow:f}=a,g=i(a,Yr);r=Pn(r,"Sign in");const m=An(r)("SignInButton"),y=(0,s.A)((0,s.A)({},g),{},{onClick:async e=>(m&&"object"===typeof m&&"props"in m&&await Tn(m.props.onClick)(e),(()=>{const e={forceRedirectUrl:l,fallbackRedirectUrl:c,signUpFallbackRedirectUrl:o,signUpForceRedirectUrl:d,initialValues:h,withSignUp:p,oauthFlow:f};return"modal"===u?n.openSignIn((0,s.A)((0,s.A)({},e),{},{appearance:a.appearance})):n.redirectToSignIn((0,s.A)((0,s.A)({},e),{},{signInFallbackRedirectUrl:c,signInForceRedirectUrl:l}))})())});return t.cloneElement(m,y)},{component:"SignInButton",renderWhileLoading:!0}),is=(rn(e=>{let{clerk:n,children:r}=e,a=i(e,Qr);const{redirectUrl:o}=a,l=i(a,Xr);r=Pn(r,"Sign in with Metamask");const c=An(r)("SignInWithMetamaskButton"),d=(0,s.A)((0,s.A)({},l),{},{onClick:async e=>(await Tn(c.props.onClick)(e),(async()=>{!async function(){await n.authenticateWithMetamask({redirectUrl:o||void 0})}()})())});return t.cloneElement(c,d)},{component:"SignInWithMetamask",renderWhileLoading:!0}),rn(e=>{let{clerk:n,children:r}=e,a=i(e,Zr);const{redirectUrl:o="/",signOutOptions:l}=a,c=i(a,es);r=Pn(r,"Sign out");const d=An(r)("SignOutButton"),u=(0,s.A)((0,s.A)({},c),{},{onClick:async e=>(await Tn(d.props.onClick)(e),n.signOut((0,s.A)({redirectUrl:o},l)))});return t.cloneElement(d,u)},{component:"SignOutButton",renderWhileLoading:!0}),rn(e=>{let{clerk:n,children:r}=e,a=i(e,ts);const{fallbackRedirectUrl:o,forceRedirectUrl:l,signInFallbackRedirectUrl:c,signInForceRedirectUrl:d,mode:u,initialValues:h,oauthFlow:p}=a,f=i(a,ns);r=Pn(r,"Sign up");const g=An(r)("SignUpButton"),m=(0,s.A)((0,s.A)({},f),{},{onClick:async e=>(g&&"object"===typeof g&&"props"in g&&await Tn(g.props.onClick)(e),(()=>{const e={fallbackRedirectUrl:o,forceRedirectUrl:l,signInFallbackRedirectUrl:c,signInForceRedirectUrl:d,initialValues:h,oauthFlow:p};return"modal"===u?n.openSignUp((0,s.A)((0,s.A)({},e),{},{appearance:a.appearance,unsafeMetadata:a.unsafeMetadata})):n.redirectToSignUp((0,s.A)((0,s.A)({},e),{},{signUpFallbackRedirectUrl:o,signUpForceRedirectUrl:l}))})())});return t.cloneElement(g,m)},{component:"SignUpButton",renderWhileLoading:!0})),as=class{constructor(e){this.isomorphicClerk=e,this.signInSignalProxy=this.buildSignInProxy(),this.signUpSignalProxy=this.buildSignUpProxy()}signInSignal(){return this.signInSignalProxy}signUpSignal(){return this.signUpSignalProxy}buildSignInProxy(){const e=this.gateProperty.bind(this),t=()=>this.client.signIn.__internal_future;return{errors:{fields:{firstName:null,lastName:null,emailAddress:null,identifier:null,phoneNumber:null,password:null,username:null,code:null,captcha:null,legalAccepted:null},raw:null,global:null},fetchStatus:"idle",signIn:{status:"needs_identifier",availableStrategies:[],isTransferable:!1,get firstFactorVerification(){return e(t,"firstFactorVerification",{status:null,error:null,expireAt:null,externalVerificationRedirectURL:null,nonce:null,attempts:null,message:null,strategy:null,verifiedAtClient:null,verifiedFromTheSameClient:()=>!1,__internal_toSnapshot:()=>{throw new Error("__internal_toSnapshot called before Clerk is loaded")},pathRoot:"",reload:()=>{throw new Error("__internal_toSnapshot called before Clerk is loaded")}})},create:this.gateMethod(t,"create"),password:this.gateMethod(t,"password"),sso:this.gateMethod(t,"sso"),finalize:this.gateMethod(t,"finalize"),emailCode:this.wrapMethods(()=>t().emailCode,["sendCode","verifyCode"]),emailLink:this.wrapStruct(()=>t().emailLink,["sendLink","waitForVerification"],["verification"],{verification:null}),resetPasswordEmailCode:this.wrapMethods(()=>t().resetPasswordEmailCode,["sendCode","verifyCode","submitPassword"]),phoneCode:this.wrapMethods(()=>t().phoneCode,["sendCode","verifyCode"]),mfa:this.wrapMethods(()=>t().mfa,["sendPhoneCode","verifyPhoneCode","verifyTOTP","verifyBackupCode"]),ticket:this.gateMethod(t,"ticket")}}}buildSignUpProxy(){const e=this.gateProperty.bind(this),t=this.gateMethod.bind(this),n=this.wrapMethods.bind(this),r=()=>this.client.signUp.__internal_future;return{errors:{fields:{firstName:null,lastName:null,emailAddress:null,identifier:null,phoneNumber:null,password:null,username:null,code:null,captcha:null,legalAccepted:null},raw:null,global:null},fetchStatus:"idle",signUp:{get status(){return e(r,"status","missing_requirements")},get unverifiedFields(){return e(r,"unverifiedFields",[])},get isTransferable(){return e(r,"isTransferable",!1)},create:t(r,"create"),update:t(r,"update"),sso:t(r,"sso"),password:t(r,"password"),ticket:t(r,"ticket"),finalize:t(r,"finalize"),verifications:n(()=>r().verifications,["sendEmailCode","verifyEmailCode","sendPhoneCode","verifyPhoneCode"])}}}__internal_effect(e){throw new Error("__internal_effect called before Clerk is loaded")}__internal_computed(e){throw new Error("__internal_computed called before Clerk is loaded")}get client(){const e=this.isomorphicClerk.client;if(!e)throw new Error("Clerk client not ready");return e}gateProperty(e,t,n){return(()=>{if(!Wr()||!this.isomorphicClerk.loaded)return n;return e()[t]})()}gateMethod(e,t){var n=this;return async function(){if(!Wr())return Yt.throw("Attempted to call a method (".concat(t,") that is not supported on the server."));n.isomorphicClerk.loaded||await new Promise(e=>n.isomorphicClerk.addOnLoaded(e));const r=e();for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return r[t].apply(r,i)}}wrapMethods(e,t){return Object.fromEntries(t.map(t=>[t,this.gateMethod(e,t)]))}wrapStruct(e,t,n,r){const s={};for(const i of t)s[i]=this.gateMethod(e,i);for(const i of n)Object.defineProperty(s,i,{get:()=>this.gateProperty(e,i,r[i]),enumerable:!0});return s}};"undefined"===typeof globalThis.__BUILD_DISABLE_RHC__&&(globalThis.__BUILD_DISABLE_RHC__=!1);var os,ls,cs,ds,us,hs,ps,fs,gs,ms={name:"@clerk/clerk-react",version:"5.48.1",environment:"production"},ys=class e{constructor(e){var t=this;mr(this,fs),this.clerkjs=null,this.preopenOneTap=null,this.preopenUserVerification=null,this.preopenSignIn=null,this.preopenCheckout=null,this.preopenPlanDetails=null,this.preopenSubscriptionDetails=null,this.preopenSignUp=null,this.preopenUserProfile=null,this.preopenOrganizationProfile=null,this.preopenCreateOrganization=null,this.preOpenWaitlist=null,this.premountSignInNodes=new Map,this.premountSignUpNodes=new Map,this.premountUserProfileNodes=new Map,this.premountUserButtonNodes=new Map,this.premountOrganizationProfileNodes=new Map,this.premountCreateOrganizationNodes=new Map,this.premountOrganizationSwitcherNodes=new Map,this.premountOrganizationListNodes=new Map,this.premountMethodCalls=new Map,this.premountWaitlistNodes=new Map,this.premountPricingTableNodes=new Map,this.premountApiKeysNodes=new Map,this.premountOAuthConsentNodes=new Map,this.premountTaskChooseOrganizationNodes=new Map,this.premountAddListenerCalls=new Map,this.loadedListeners=[],mr(this,os,"loading"),mr(this,ls),mr(this,cs),mr(this,ds),mr(this,us,Gr()),mr(this,hs),this.buildSignInUrl=e=>{const t=()=>{var t;return(null==(t=this.clerkjs)?void 0:t.buildSignInUrl(e))||""};if(this.clerkjs&&this.loaded)return t();this.premountMethodCalls.set("buildSignInUrl",t)},this.buildSignUpUrl=e=>{const t=()=>{var t;return(null==(t=this.clerkjs)?void 0:t.buildSignUpUrl(e))||""};if(this.clerkjs&&this.loaded)return t();this.premountMethodCalls.set("buildSignUpUrl",t)},this.buildAfterSignInUrl=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];const s=()=>{var e;return(null==(e=t.clerkjs)?void 0:e.buildAfterSignInUrl(...n))||""};if(t.clerkjs&&t.loaded)return s();t.premountMethodCalls.set("buildAfterSignInUrl",s)},this.buildAfterSignUpUrl=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];const s=()=>{var e;return(null==(e=t.clerkjs)?void 0:e.buildAfterSignUpUrl(...n))||""};if(t.clerkjs&&t.loaded)return s();t.premountMethodCalls.set("buildAfterSignUpUrl",s)},this.buildAfterSignOutUrl=()=>{const e=()=>{var e;return(null==(e=this.clerkjs)?void 0:e.buildAfterSignOutUrl())||""};if(this.clerkjs&&this.loaded)return e();this.premountMethodCalls.set("buildAfterSignOutUrl",e)},this.buildNewSubscriptionRedirectUrl=()=>{const e=()=>{var e;return(null==(e=this.clerkjs)?void 0:e.buildNewSubscriptionRedirectUrl())||""};if(this.clerkjs&&this.loaded)return e();this.premountMethodCalls.set("buildNewSubscriptionRedirectUrl",e)},this.buildAfterMultiSessionSingleSignOutUrl=()=>{const e=()=>{var e;return(null==(e=this.clerkjs)?void 0:e.buildAfterMultiSessionSingleSignOutUrl())||""};if(this.clerkjs&&this.loaded)return e();this.premountMethodCalls.set("buildAfterMultiSessionSingleSignOutUrl",e)},this.buildUserProfileUrl=()=>{const e=()=>{var e;return(null==(e=this.clerkjs)?void 0:e.buildUserProfileUrl())||""};if(this.clerkjs&&this.loaded)return e();this.premountMethodCalls.set("buildUserProfileUrl",e)},this.buildCreateOrganizationUrl=()=>{const e=()=>{var e;return(null==(e=this.clerkjs)?void 0:e.buildCreateOrganizationUrl())||""};if(this.clerkjs&&this.loaded)return e();this.premountMethodCalls.set("buildCreateOrganizationUrl",e)},this.buildOrganizationProfileUrl=()=>{const e=()=>{var e;return(null==(e=this.clerkjs)?void 0:e.buildOrganizationProfileUrl())||""};if(this.clerkjs&&this.loaded)return e();this.premountMethodCalls.set("buildOrganizationProfileUrl",e)},this.buildWaitlistUrl=()=>{const e=()=>{var e;return(null==(e=this.clerkjs)?void 0:e.buildWaitlistUrl())||""};if(this.clerkjs&&this.loaded)return e();this.premountMethodCalls.set("buildWaitlistUrl",e)},this.buildTasksUrl=()=>{const e=()=>{var e;return(null==(e=this.clerkjs)?void 0:e.buildTasksUrl())||""};if(this.clerkjs&&this.loaded)return e();this.premountMethodCalls.set("buildTasksUrl",e)},this.buildUrlWithAuth=e=>{const t=()=>{var t;return(null==(t=this.clerkjs)?void 0:t.buildUrlWithAuth(e))||""};if(this.clerkjs&&this.loaded)return t();this.premountMethodCalls.set("buildUrlWithAuth",t)},this.handleUnauthenticated=async()=>{const e=()=>{var e;return null==(e=this.clerkjs)?void 0:e.handleUnauthenticated()};this.clerkjs&&this.loaded?e():this.premountMethodCalls.set("handleUnauthenticated",e)},this.on=function(){var e;if(null==(e=t.clerkjs)?void 0:e.on)return t.clerkjs.on(...arguments);gr(t,us).on(...arguments)},this.off=function(){var e;if(null==(e=t.clerkjs)?void 0:e.off)return t.clerkjs.off(...arguments);gr(t,us).off(...arguments)},this.addOnLoaded=e=>{this.loadedListeners.push(e),this.loaded&&this.emitLoaded()},this.emitLoaded=()=>{this.loadedListeners.forEach(e=>e()),this.loadedListeners=[]},this.beforeLoad=e=>{if(!e)throw new Error("Failed to hydrate latest Clerk JS")},this.hydrateClerkJS=e=>{var t;if(!e)throw new Error("Failed to hydrate latest Clerk JS");return this.clerkjs=e,this.premountMethodCalls.forEach(e=>e()),this.premountAddListenerCalls.forEach((t,n)=>{t.nativeUnsubscribe=e.addListener(n)}),null==(t=gr(this,us).internal.retrieveListeners("status"))||t.forEach(e=>{this.on("status",e,{notify:!0})}),null!==this.preopenSignIn&&e.openSignIn(this.preopenSignIn),null!==this.preopenCheckout&&e.__internal_openCheckout(this.preopenCheckout),null!==this.preopenPlanDetails&&e.__internal_openPlanDetails(this.preopenPlanDetails),null!==this.preopenSubscriptionDetails&&e.__internal_openSubscriptionDetails(this.preopenSubscriptionDetails),null!==this.preopenSignUp&&e.openSignUp(this.preopenSignUp),null!==this.preopenUserProfile&&e.openUserProfile(this.preopenUserProfile),null!==this.preopenUserVerification&&e.__internal_openReverification(this.preopenUserVerification),null!==this.preopenOneTap&&e.openGoogleOneTap(this.preopenOneTap),null!==this.preopenOrganizationProfile&&e.openOrganizationProfile(this.preopenOrganizationProfile),null!==this.preopenCreateOrganization&&e.openCreateOrganization(this.preopenCreateOrganization),null!==this.preOpenWaitlist&&e.openWaitlist(this.preOpenWaitlist),this.premountSignInNodes.forEach((t,n)=>{e.mountSignIn(n,t)}),this.premountSignUpNodes.forEach((t,n)=>{e.mountSignUp(n,t)}),this.premountUserProfileNodes.forEach((t,n)=>{e.mountUserProfile(n,t)}),this.premountUserButtonNodes.forEach((t,n)=>{e.mountUserButton(n,t)}),this.premountOrganizationListNodes.forEach((t,n)=>{e.mountOrganizationList(n,t)}),this.premountWaitlistNodes.forEach((t,n)=>{e.mountWaitlist(n,t)}),this.premountPricingTableNodes.forEach((t,n)=>{e.mountPricingTable(n,t)}),this.premountApiKeysNodes.forEach((t,n)=>{e.mountApiKeys(n,t)}),this.premountOAuthConsentNodes.forEach((t,n)=>{e.__internal_mountOAuthConsent(n,t)}),this.premountTaskChooseOrganizationNodes.forEach((t,n)=>{e.mountTaskChooseOrganization(n,t)}),"undefined"===typeof this.clerkjs.status&&gr(this,us).emit($r,"ready"),this.emitLoaded(),this.clerkjs},this.__experimental_checkout=function(){var e;return null==(e=t.clerkjs)?void 0:e.__experimental_checkout(...arguments)},this.__unstable__updateProps=async e=>{const t=await xr(this,fs,gs).call(this);if(t&&"__unstable__updateProps"in t)return t.__unstable__updateProps(e)},this.setActive=e=>this.clerkjs?this.clerkjs.setActive(e):Promise.reject(),this.openSignIn=e=>{this.clerkjs&&this.loaded?this.clerkjs.openSignIn(e):this.preopenSignIn=e},this.closeSignIn=()=>{this.clerkjs&&this.loaded?this.clerkjs.closeSignIn():this.preopenSignIn=null},this.__internal_openCheckout=e=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_openCheckout(e):this.preopenCheckout=e},this.__internal_closeCheckout=()=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_closeCheckout():this.preopenCheckout=null},this.__internal_openPlanDetails=e=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_openPlanDetails(e):this.preopenPlanDetails=e},this.__internal_closePlanDetails=()=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_closePlanDetails():this.preopenPlanDetails=null},this.__internal_openSubscriptionDetails=e=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_openSubscriptionDetails(e):this.preopenSubscriptionDetails=null!=e?e:null},this.__internal_closeSubscriptionDetails=()=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_closeSubscriptionDetails():this.preopenSubscriptionDetails=null},this.__internal_openReverification=e=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_openReverification(e):this.preopenUserVerification=e},this.__internal_closeReverification=()=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_closeReverification():this.preopenUserVerification=null},this.openGoogleOneTap=e=>{this.clerkjs&&this.loaded?this.clerkjs.openGoogleOneTap(e):this.preopenOneTap=e},this.closeGoogleOneTap=()=>{this.clerkjs&&this.loaded?this.clerkjs.closeGoogleOneTap():this.preopenOneTap=null},this.openUserProfile=e=>{this.clerkjs&&this.loaded?this.clerkjs.openUserProfile(e):this.preopenUserProfile=e},this.closeUserProfile=()=>{this.clerkjs&&this.loaded?this.clerkjs.closeUserProfile():this.preopenUserProfile=null},this.openOrganizationProfile=e=>{this.clerkjs&&this.loaded?this.clerkjs.openOrganizationProfile(e):this.preopenOrganizationProfile=e},this.closeOrganizationProfile=()=>{this.clerkjs&&this.loaded?this.clerkjs.closeOrganizationProfile():this.preopenOrganizationProfile=null},this.openCreateOrganization=e=>{this.clerkjs&&this.loaded?this.clerkjs.openCreateOrganization(e):this.preopenCreateOrganization=e},this.closeCreateOrganization=()=>{this.clerkjs&&this.loaded?this.clerkjs.closeCreateOrganization():this.preopenCreateOrganization=null},this.openWaitlist=e=>{this.clerkjs&&this.loaded?this.clerkjs.openWaitlist(e):this.preOpenWaitlist=e},this.closeWaitlist=()=>{this.clerkjs&&this.loaded?this.clerkjs.closeWaitlist():this.preOpenWaitlist=null},this.openSignUp=e=>{this.clerkjs&&this.loaded?this.clerkjs.openSignUp(e):this.preopenSignUp=e},this.closeSignUp=()=>{this.clerkjs&&this.loaded?this.clerkjs.closeSignUp():this.preopenSignUp=null},this.mountSignIn=(e,t)=>{this.clerkjs&&this.loaded?this.clerkjs.mountSignIn(e,t):this.premountSignInNodes.set(e,t)},this.unmountSignIn=e=>{this.clerkjs&&this.loaded?this.clerkjs.unmountSignIn(e):this.premountSignInNodes.delete(e)},this.mountSignUp=(e,t)=>{this.clerkjs&&this.loaded?this.clerkjs.mountSignUp(e,t):this.premountSignUpNodes.set(e,t)},this.unmountSignUp=e=>{this.clerkjs&&this.loaded?this.clerkjs.unmountSignUp(e):this.premountSignUpNodes.delete(e)},this.mountUserProfile=(e,t)=>{this.clerkjs&&this.loaded?this.clerkjs.mountUserProfile(e,t):this.premountUserProfileNodes.set(e,t)},this.unmountUserProfile=e=>{this.clerkjs&&this.loaded?this.clerkjs.unmountUserProfile(e):this.premountUserProfileNodes.delete(e)},this.mountOrganizationProfile=(e,t)=>{this.clerkjs&&this.loaded?this.clerkjs.mountOrganizationProfile(e,t):this.premountOrganizationProfileNodes.set(e,t)},this.unmountOrganizationProfile=e=>{this.clerkjs&&this.loaded?this.clerkjs.unmountOrganizationProfile(e):this.premountOrganizationProfileNodes.delete(e)},this.mountCreateOrganization=(e,t)=>{this.clerkjs&&this.loaded?this.clerkjs.mountCreateOrganization(e,t):this.premountCreateOrganizationNodes.set(e,t)},this.unmountCreateOrganization=e=>{this.clerkjs&&this.loaded?this.clerkjs.unmountCreateOrganization(e):this.premountCreateOrganizationNodes.delete(e)},this.mountOrganizationSwitcher=(e,t)=>{this.clerkjs&&this.loaded?this.clerkjs.mountOrganizationSwitcher(e,t):this.premountOrganizationSwitcherNodes.set(e,t)},this.unmountOrganizationSwitcher=e=>{this.clerkjs&&this.loaded?this.clerkjs.unmountOrganizationSwitcher(e):this.premountOrganizationSwitcherNodes.delete(e)},this.__experimental_prefetchOrganizationSwitcher=()=>{const e=()=>{var e;return null==(e=this.clerkjs)?void 0:e.__experimental_prefetchOrganizationSwitcher()};this.clerkjs&&this.loaded?e():this.premountMethodCalls.set("__experimental_prefetchOrganizationSwitcher",e)},this.mountOrganizationList=(e,t)=>{this.clerkjs&&this.loaded?this.clerkjs.mountOrganizationList(e,t):this.premountOrganizationListNodes.set(e,t)},this.unmountOrganizationList=e=>{this.clerkjs&&this.loaded?this.clerkjs.unmountOrganizationList(e):this.premountOrganizationListNodes.delete(e)},this.mountUserButton=(e,t)=>{this.clerkjs&&this.loaded?this.clerkjs.mountUserButton(e,t):this.premountUserButtonNodes.set(e,t)},this.unmountUserButton=e=>{this.clerkjs&&this.loaded?this.clerkjs.unmountUserButton(e):this.premountUserButtonNodes.delete(e)},this.mountWaitlist=(e,t)=>{this.clerkjs&&this.loaded?this.clerkjs.mountWaitlist(e,t):this.premountWaitlistNodes.set(e,t)},this.unmountWaitlist=e=>{this.clerkjs&&this.loaded?this.clerkjs.unmountWaitlist(e):this.premountWaitlistNodes.delete(e)},this.mountPricingTable=(e,t)=>{this.clerkjs&&this.loaded?this.clerkjs.mountPricingTable(e,t):this.premountPricingTableNodes.set(e,t)},this.unmountPricingTable=e=>{this.clerkjs&&this.loaded?this.clerkjs.unmountPricingTable(e):this.premountPricingTableNodes.delete(e)},this.mountApiKeys=(e,t)=>{this.clerkjs&&this.loaded?this.clerkjs.mountApiKeys(e,t):this.premountApiKeysNodes.set(e,t)},this.unmountApiKeys=e=>{this.clerkjs&&this.loaded?this.clerkjs.unmountApiKeys(e):this.premountApiKeysNodes.delete(e)},this.__internal_mountOAuthConsent=(e,t)=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_mountOAuthConsent(e,t):this.premountOAuthConsentNodes.set(e,t)},this.__internal_unmountOAuthConsent=e=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_unmountOAuthConsent(e):this.premountOAuthConsentNodes.delete(e)},this.mountTaskChooseOrganization=(e,t)=>{this.clerkjs&&this.loaded?this.clerkjs.mountTaskChooseOrganization(e,t):this.premountTaskChooseOrganizationNodes.set(e,t)},this.unmountTaskChooseOrganization=e=>{this.clerkjs&&this.loaded?this.clerkjs.unmountTaskChooseOrganization(e):this.premountTaskChooseOrganizationNodes.delete(e)},this.addListener=e=>{if(this.clerkjs)return this.clerkjs.addListener(e);{const t=()=>{var t;const n=this.premountAddListenerCalls.get(e);n&&(null==(t=n.nativeUnsubscribe)||t.call(n),this.premountAddListenerCalls.delete(e))};return this.premountAddListenerCalls.set(e,{unsubscribe:t,nativeUnsubscribe:void 0}),t}},this.navigate=e=>{const t=()=>{var t;return null==(t=this.clerkjs)?void 0:t.navigate(e)};this.clerkjs&&this.loaded?t():this.premountMethodCalls.set("navigate",t)},this.redirectWithAuth=async function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];const s=()=>{var e;return null==(e=t.clerkjs)?void 0:e.redirectWithAuth(...n)};return t.clerkjs&&t.loaded?s():void t.premountMethodCalls.set("redirectWithAuth",s)},this.redirectToSignIn=async e=>{const t=()=>{var t;return null==(t=this.clerkjs)?void 0:t.redirectToSignIn(e)};return this.clerkjs&&this.loaded?t():void this.premountMethodCalls.set("redirectToSignIn",t)},this.redirectToSignUp=async e=>{const t=()=>{var t;return null==(t=this.clerkjs)?void 0:t.redirectToSignUp(e)};return this.clerkjs&&this.loaded?t():void this.premountMethodCalls.set("redirectToSignUp",t)},this.redirectToUserProfile=async()=>{const e=()=>{var e;return null==(e=this.clerkjs)?void 0:e.redirectToUserProfile()};return this.clerkjs&&this.loaded?e():void this.premountMethodCalls.set("redirectToUserProfile",e)},this.redirectToAfterSignUp=()=>{const e=()=>{var e;return null==(e=this.clerkjs)?void 0:e.redirectToAfterSignUp()};if(this.clerkjs&&this.loaded)return e();this.premountMethodCalls.set("redirectToAfterSignUp",e)},this.redirectToAfterSignIn=()=>{const e=()=>{var e;return null==(e=this.clerkjs)?void 0:e.redirectToAfterSignIn()};this.clerkjs&&this.loaded?e():this.premountMethodCalls.set("redirectToAfterSignIn",e)},this.redirectToAfterSignOut=()=>{const e=()=>{var e;return null==(e=this.clerkjs)?void 0:e.redirectToAfterSignOut()};this.clerkjs&&this.loaded?e():this.premountMethodCalls.set("redirectToAfterSignOut",e)},this.redirectToOrganizationProfile=async()=>{const e=()=>{var e;return null==(e=this.clerkjs)?void 0:e.redirectToOrganizationProfile()};return this.clerkjs&&this.loaded?e():void this.premountMethodCalls.set("redirectToOrganizationProfile",e)},this.redirectToCreateOrganization=async()=>{const e=()=>{var e;return null==(e=this.clerkjs)?void 0:e.redirectToCreateOrganization()};return this.clerkjs&&this.loaded?e():void this.premountMethodCalls.set("redirectToCreateOrganization",e)},this.redirectToWaitlist=async()=>{const e=()=>{var e;return null==(e=this.clerkjs)?void 0:e.redirectToWaitlist()};return this.clerkjs&&this.loaded?e():void this.premountMethodCalls.set("redirectToWaitlist",e)},this.redirectToTasks=async e=>{const t=()=>{var t;return null==(t=this.clerkjs)?void 0:t.redirectToTasks(e)};return this.clerkjs&&this.loaded?t():void this.premountMethodCalls.set("redirectToTasks",t)},this.handleRedirectCallback=async e=>{var t;const n=()=>{var t;return null==(t=this.clerkjs)?void 0:t.handleRedirectCallback(e)};this.clerkjs&&this.loaded?null==(t=n())||t.catch(()=>{}):this.premountMethodCalls.set("handleRedirectCallback",n)},this.handleGoogleOneTapCallback=async(e,t)=>{var n;const r=()=>{var n;return null==(n=this.clerkjs)?void 0:n.handleGoogleOneTapCallback(e,t)};this.clerkjs&&this.loaded?null==(n=r())||n.catch(()=>{}):this.premountMethodCalls.set("handleGoogleOneTapCallback",r)},this.handleEmailLinkVerification=async e=>{const t=()=>{var t;return null==(t=this.clerkjs)?void 0:t.handleEmailLinkVerification(e)};if(this.clerkjs&&this.loaded)return t();this.premountMethodCalls.set("handleEmailLinkVerification",t)},this.authenticateWithMetamask=async e=>{const t=()=>{var t;return null==(t=this.clerkjs)?void 0:t.authenticateWithMetamask(e)};if(this.clerkjs&&this.loaded)return t();this.premountMethodCalls.set("authenticateWithMetamask",t)},this.authenticateWithCoinbaseWallet=async e=>{const t=()=>{var t;return null==(t=this.clerkjs)?void 0:t.authenticateWithCoinbaseWallet(e)};if(this.clerkjs&&this.loaded)return t();this.premountMethodCalls.set("authenticateWithCoinbaseWallet",t)},this.authenticateWithBase=async e=>{const t=()=>{var t;return null==(t=this.clerkjs)?void 0:t.authenticateWithBase(e)};if(this.clerkjs&&this.loaded)return t();this.premountMethodCalls.set("authenticateWithBase",t)},this.authenticateWithOKXWallet=async e=>{const t=()=>{var t;return null==(t=this.clerkjs)?void 0:t.authenticateWithOKXWallet(e)};if(this.clerkjs&&this.loaded)return t();this.premountMethodCalls.set("authenticateWithOKXWallet",t)},this.authenticateWithWeb3=async e=>{const t=()=>{var t;return null==(t=this.clerkjs)?void 0:t.authenticateWithWeb3(e)};if(this.clerkjs&&this.loaded)return t();this.premountMethodCalls.set("authenticateWithWeb3",t)},this.authenticateWithGoogleOneTap=async e=>(await xr(this,fs,gs).call(this)).authenticateWithGoogleOneTap(e),this.__internal_loadStripeJs=async()=>(await xr(this,fs,gs).call(this)).__internal_loadStripeJs(),this.createOrganization=async e=>{const t=()=>{var t;return null==(t=this.clerkjs)?void 0:t.createOrganization(e)};if(this.clerkjs&&this.loaded)return t();this.premountMethodCalls.set("createOrganization",t)},this.getOrganization=async e=>{const t=()=>{var t;return null==(t=this.clerkjs)?void 0:t.getOrganization(e)};if(this.clerkjs&&this.loaded)return t();this.premountMethodCalls.set("getOrganization",t)},this.joinWaitlist=async e=>{const t=()=>{var t;return null==(t=this.clerkjs)?void 0:t.joinWaitlist(e)};if(this.clerkjs&&this.loaded)return t();this.premountMethodCalls.set("joinWaitlist",t)},this.signOut=async function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];const s=()=>{var e;return null==(e=t.clerkjs)?void 0:e.signOut(...n)};if(t.clerkjs&&t.loaded)return s();t.premountMethodCalls.set("signOut",s)};const{Clerk:n=null,publishableKey:r}=e||{};yr(this,ds,r),yr(this,cs,null==e?void 0:e.proxyUrl),yr(this,ls,null==e?void 0:e.domain),this.options=e,this.Clerk=n,this.mode=Wr()?"browser":"server",yr(this,hs,new as(this)),this.options.sdkMetadata||(this.options.sdkMetadata=ms),gr(this,us).emit($r,"loading"),gr(this,us).prioritizedOn($r,e=>yr(this,os,e)),gr(this,ds)&&this.loadClerkJS()}get publishableKey(){return gr(this,ds)}get loaded(){var e;return(null==(e=this.clerkjs)?void 0:e.loaded)||!1}get status(){var e;return this.clerkjs?(null==(e=this.clerkjs)?void 0:e.status)||(this.clerkjs.loaded?"ready":"loading"):gr(this,os)}static getOrCreateInstance(t){return(!Wr()||!gr(this,ps)||t.Clerk&&gr(this,ps).Clerk!==t.Clerk||gr(this,ps).publishableKey!==t.publishableKey)&&yr(this,ps,new e(t)),gr(this,ps)}static clearInstance(){yr(this,ps,null)}get domain(){return"undefined"!==typeof window&&window.location?hn(gr(this,ls),new URL(window.location.href),""):"function"===typeof gr(this,ls)?Yt.throw(tn):gr(this,ls)||""}get proxyUrl(){return"undefined"!==typeof window&&window.location?hn(gr(this,cs),new URL(window.location.href),""):"function"===typeof gr(this,cs)?Yt.throw(tn):gr(this,cs)||""}__internal_getOption(e){var t,n;return(null==(t=this.clerkjs)?void 0:t.__internal_getOption)?null==(n=this.clerkjs)?void 0:n.__internal_getOption(e):this.options[e]}get sdkMetadata(){var e;return(null==(e=this.clerkjs)?void 0:e.sdkMetadata)||this.options.sdkMetadata||void 0}get instanceType(){var e;return null==(e=this.clerkjs)?void 0:e.instanceType}get frontendApi(){var e;return(null==(e=this.clerkjs)?void 0:e.frontendApi)||""}get isStandardBrowser(){var e;return(null==(e=this.clerkjs)?void 0:e.isStandardBrowser)||this.options.standardBrowser||!1}get isSatellite(){return"undefined"!==typeof window&&window.location?hn(this.options.isSatellite,new URL(window.location.href),!1):"function"===typeof this.options.isSatellite&&Yt.throw(tn)}async loadClerkJS(){var e;if("browser"===this.mode&&!this.loaded){"undefined"!==typeof window&&(window.__clerk_publishable_key=gr(this,ds),window.__clerk_proxy_url=this.proxyUrl,window.__clerk_domain=this.domain);try{if(this.Clerk){let e;"function"===typeof this.Clerk?(e=new this.Clerk(gr(this,ds),{proxyUrl:this.proxyUrl,domain:this.domain}),this.beforeLoad(e),await e.load(this.options)):(e=this.Clerk,e.loaded||(this.beforeLoad(e),await e.load(this.options))),global.Clerk=e}else if(!__BUILD_DISABLE_RHC__){if(global.Clerk||await(async e=>{var t;const n=null!==(t=null===e||void 0===e?void 0:e.scriptLoadTimeout)&&void 0!==t?t:15e3;if(Dr())return null;if(document.querySelector("script[data-clerk-js-script]"))return zr(n);if(null===e||void 0===e||!e.publishableKey)return Lr.throwMissingPublishableKeyError(),null;const r=zr(n);return Nr(Fr(e),{async:!0,crossOrigin:"anonymous",nonce:e.nonce,beforeLoad:Ur(e)}).catch(()=>{throw new Error(Ir)}),r})((0,s.A)((0,s.A)({},this.options),{},{publishableKey:gr(this,ds),proxyUrl:this.proxyUrl,domain:this.domain,nonce:this.options.nonce})),!global.Clerk)throw new Error("Failed to download latest ClerkJS. Contact support@clerk.com.");this.beforeLoad(global.Clerk),await global.Clerk.load(this.options)}return(null==(e=global.Clerk)?void 0:e.loaded)?this.hydrateClerkJS(global.Clerk):void 0}catch(t){const e=t;return gr(this,us).emit($r,"error"),void console.error(e.stack||e.message||e)}}}get version(){var e;return null==(e=this.clerkjs)?void 0:e.version}get client(){return this.clerkjs?this.clerkjs.client:void 0}get session(){return this.clerkjs?this.clerkjs.session:void 0}get user(){return this.clerkjs?this.clerkjs.user:void 0}get organization(){return this.clerkjs?this.clerkjs.organization:void 0}get telemetry(){return this.clerkjs?this.clerkjs.telemetry:void 0}get __unstable__environment(){return this.clerkjs?this.clerkjs.__unstable__environment:void 0}get isSignedIn(){return!!this.clerkjs&&this.clerkjs.isSignedIn}get billing(){var e;return null==(e=this.clerkjs)?void 0:e.billing}get __internal_state(){return this.loaded&&this.clerkjs?this.clerkjs.__internal_state:gr(this,hs)}get apiKeys(){var e;return null==(e=this.clerkjs)?void 0:e.apiKeys}__unstable__setEnvironment(){if(this.clerkjs&&"__unstable__setEnvironment"in this.clerkjs){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.clerkjs.__unstable__setEnvironment(t)}}};os=new WeakMap,ls=new WeakMap,cs=new WeakMap,ds=new WeakMap,us=new WeakMap,hs=new WeakMap,ps=new WeakMap,fs=new WeakSet,gs=function(){return new Promise(e=>{this.addOnLoaded(()=>e(this.clerkjs))})},mr(ys,ps);var xs=ys;function bs(e){const{isomorphicClerkOptions:n,initialState:r,children:i}=e,{isomorphicClerk:a,clerkStatus:o}=vs(n),[l,c]=t.useState({client:a.client,session:a.session,user:a.user,organization:a.organization});t.useEffect(()=>a.addListener(e=>c((0,s.A)({},e))),[]);const d=((e,t,n)=>!e&&n?Br(n):Vr(t))(a.loaded,l,r),u=t.useMemo(()=>({value:a}),[o]),h=t.useMemo(()=>({value:l.client}),[l.client]),{sessionId:p,sessionStatus:f,sessionClaims:g,session:m,userId:y,user:x,orgId:b,actor:v,organization:w,orgRole:_,orgSlug:k,orgPermissions:j,factorVerificationAge:S}=d,N=t.useMemo(()=>({value:{sessionId:p,sessionStatus:f,sessionClaims:g,userId:y,actor:v,orgId:b,orgRole:_,orgSlug:k,orgPermissions:j,factorVerificationAge:S}}),[p,f,y,v,b,_,k,S,null==g?void 0:g.__raw]),C=t.useMemo(()=>({value:m}),[p,m]),E=t.useMemo(()=>({value:x}),[y,x]),A=t.useMemo(()=>({value:{organization:w}}),[b,w]);return t.createElement(Zt.Provider,{value:u},t.createElement(gt.Provider,{value:h},t.createElement(yt.Provider,{value:C},t.createElement(jt,(0,s.A)({},A.value),t.createElement(Qt.Provider,{value:N},t.createElement(pt.Provider,{value:E},t.createElement(wt,{value:void 0},i)))))))}var vs=e=>{const n=t.useRef(xs.getOrCreateInstance(e)),[r,s]=t.useState(n.current.status);return t.useEffect(()=>{n.current.__unstable__updateProps({appearance:e.appearance})},[e.appearance]),t.useEffect(()=>{n.current.__unstable__updateProps({options:e})},[e.localization]),t.useEffect(()=>(n.current.on("status",s),()=>{n.current&&n.current.off("status",s),xs.clearInstance()}),[]),{isomorphicClerk:n.current,clerkStatus:r}};var ws,_s,ks=function(e,n,r){const i=e.displayName||e.name||n||"Component",a=i=>(function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;t.useEffect(()=>{const t=On.get(e)||0;return t==r?Yt.throw(n):(On.set(e,t+1),()=>{On.set(e,(On.get(e)||1)-1)})},[])}(n,r),t.createElement(e,(0,s.A)({},i)));return a.displayName="withMaxAllowedInstancesGuard(".concat(i,")"),a}(function(e){const{initialState:n,children:r,__internal_bypassMissingPublishableKey:s}=e,a=i(e,rs),{publishableKey:o="",Clerk:l}=a;return l||s||(o?o&&!Mr(o)&&Yt.throwInvalidPublishableKeyError({key:o}):Yt.throwMissingPublishableKeyError()),t.createElement(bs,{initialState:n,isomorphicClerkOptions:a},r)},"ClerkProvider","You've added multiple <ClerkProvider> components in your React component tree. Wrap your components in a single <ClerkProvider>.");ks.displayName="ClerkProvider",ws={packageName:"@clerk/clerk-react"},Yt.setMessages(ws).setPackageName(ws),_s="@clerk/clerk-react",Lr.setPackageName({packageName:_s});var js={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Ss=["color","size","strokeWidth","absoluteStrokeWidth","className","children"],Ns=(e,n)=>{const r=(0,t.forwardRef)((r,a)=>{let{color:o="currentColor",size:l=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:u="",children:h}=r,p=i(r,Ss);return(0,t.createElement)("svg",(0,s.A)((0,s.A)({ref:a},js),{},{width:l,height:l,stroke:o,strokeWidth:d?24*Number(c)/Number(l):c,className:["lucide","lucide-".concat((f=e,f.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim())),u].join(" ")},p),[...n.map(e=>{let[n,r]=e;return(0,t.createElement)(n,r)}),...Array.isArray(h)?h:[h]]);var f});return r.displayName="".concat(e),r},Cs=Ns("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),Es=Ns("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),As=Ns("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Ps=Ns("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),Ts=Ns("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),Os=Ns("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Ms=Ns("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Is=Ns("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),Rs=Ns("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),Ls=Ns("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Ds=Ns("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var zs=n(579);const Fs=e=>{let{size:t="md",showText:n=!0,className:r=""}=e;return(0,zs.jsxs)("div",{className:"flex items-center gap-3 ".concat(r),children:[(0,zs.jsx)("div",{className:"".concat({sm:"w-10 h-10",md:"w-14 h-14",lg:"w-20 h-20",xl:"w-24 h-24"}[t]," relative border-2 border-blue-500 rounded-lg p-1 bg-white shadow-sm"),children:(0,zs.jsx)("img",{src:"/propfi-logo.svg",alt:"PropFi",className:"w-full h-full object-contain rounded",style:{objectFit:"contain",aspectRatio:"1 / 1"},width:"100",height:"100"})}),n&&(0,zs.jsx)("span",{className:"font-bold text-gray-900 ".concat({sm:"text-sm",md:"text-lg",lg:"text-xl",xl:"text-2xl"}[t]),children:"PropFi"})]})};function Us(e,t){if("function"===typeof e)return e(t);null!==e&&void 0!==e&&(e.current=t)}function Bs(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{let n=!1;const r=t.map(t=>{const r=Us(t,e);return n||"function"!=typeof r||(n=!0),r});if(n)return()=>{for(let e=0;e<r.length;e++){const n=r[e];"function"==typeof n?n():Us(t[e],null)}}}}const Vs=["children"],Ws=["children"];function Hs(e){const n=Ks(e),r=t.forwardRef((e,r)=>{const{children:a}=e,o=i(e,Vs),l=t.Children.toArray(a),c=l.find(Gs);if(c){const e=c.props.children,i=l.map(n=>n===c?t.Children.count(e)>1?t.Children.only(null):t.isValidElement(e)?e.props.children:null:n);return(0,zs.jsx)(n,(0,s.A)((0,s.A)({},o),{},{ref:r,children:t.isValidElement(e)?t.cloneElement(e,void 0,i):null}))}return(0,zs.jsx)(n,(0,s.A)((0,s.A)({},o),{},{ref:r,children:a}))});return r.displayName="".concat(e,".Slot"),r}var qs=Hs("Slot");function Ks(e){const n=t.forwardRef((e,n)=>{const{children:r}=e,a=i(e,Ws);if(t.isValidElement(r)){const e=function(e){var t,n;let r=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,s=r&&"isReactWarning"in r&&r.isReactWarning;if(s)return e.ref;if(r=null===(n=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===n?void 0:n.get,s=r&&"isReactWarning"in r&&r.isReactWarning,s)return e.props.ref;return e.props.ref||e.ref}(r),i=function(e,t){const n=(0,s.A)({},t);for(const r in t){const i=e[r],a=t[r];/^on[A-Z]/.test(r)?i&&a?n[r]=function(){const e=a(...arguments);return i(...arguments),e}:i&&(n[r]=i):"style"===r?n[r]=(0,s.A)((0,s.A)({},i),a):"className"===r&&(n[r]=[i,a].filter(Boolean).join(" "))}return(0,s.A)((0,s.A)({},e),n)}(a,r.props);return r.type!==t.Fragment&&(i.ref=n?Bs(n,e):e),t.cloneElement(r,i)}return t.Children.count(r)>1?t.Children.only(null):null});return n.displayName="".concat(e,".SlotClone"),n}var $s=Symbol("radix.slottable");function Gs(e){return t.isValidElement(e)&&"function"===typeof e.type&&"__radixId"in e.type&&e.type.__radixId===$s}function Js(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=Js(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Ys(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=Js(e))&&(r&&(r+=" "),r+=t);return r}const Qs=["class","className"],Xs=e=>"boolean"===typeof e?"".concat(e):0===e?"0":e,Zs=Ys,ei=(e,t)=>n=>{var r;if(null==(null===t||void 0===t?void 0:t.variants))return Zs(e,null===n||void 0===n?void 0:n.class,null===n||void 0===n?void 0:n.className);const{variants:a,defaultVariants:o}=t,l=Object.keys(a).map(e=>{const t=null===n||void 0===n?void 0:n[e],r=null===o||void 0===o?void 0:o[e];if(null===t)return null;const s=Xs(t)||Xs(r);return a[e][s]}),c=n&&Object.entries(n).reduce((e,t)=>{let[n,r]=t;return void 0===r||(e[n]=r),e},{}),d=null===t||void 0===t||null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let{class:n,className:r}=t,a=i(t,Qs);return Object.entries(a).every(e=>{let[t,n]=e;return Array.isArray(n)?n.includes((0,s.A)((0,s.A)({},o),c)[t]):(0,s.A)((0,s.A)({},o),c)[t]===n})?[...e,n,r]:e},[]);return Zs(e,l,d,null===n||void 0===n?void 0:n.class,null===n||void 0===n?void 0:n.className)},ti=(e,t)=>{var n;if(0===e.length)return t.classGroupId;const r=e[0],s=t.nextPart.get(r),i=s?ti(e.slice(1),s):void 0;if(i)return i;if(0===t.validators.length)return;const a=e.join("-");return null===(n=t.validators.find(e=>{let{validator:t}=e;return t(a)}))||void 0===n?void 0:n.classGroupId},ni=/^\[(.+)\]$/,ri=e=>{if(ni.test(e)){const t=ni.exec(e)[1],n=null===t||void 0===t?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},si=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return li(Object.entries(e.classGroups),n).forEach(e=>{let[n,s]=e;ii(s,r,n,t)}),r},ii=(e,t,n,r)=>{e.forEach(e=>{if("string"===typeof e){return void((""===e?t:ai(t,e)).classGroupId=n)}if("function"===typeof e)return oi(e)?void ii(e(r),t,n,r):void t.validators.push({validator:e,classGroupId:n});Object.entries(e).forEach(e=>{let[s,i]=e;ii(i,ai(t,s),n,r)})})},ai=(e,t)=>{let n=e;return t.split("-").forEach(e=>{n.nextPart.has(e)||n.nextPart.set(e,{nextPart:new Map,validators:[]}),n=n.nextPart.get(e)}),n},oi=e=>e.isThemeGetter,li=(e,t)=>t?e.map(e=>{let[n,r]=e;return[n,r.map(e=>"string"===typeof e?t+e:"object"===typeof e?Object.fromEntries(Object.entries(e).map(e=>{let[n,r]=e;return[t+n,r]})):e)]}):e,ci=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const s=(s,i)=>{n.set(s,i),t++,t>e&&(t=0,r=n,n=new Map)};return{get(e){let t=n.get(e);return void 0!==t?t:void 0!==(t=r.get(e))?(s(e,t),t):void 0},set(e,t){n.has(e)?n.set(e,t):s(e,t)}}},di=e=>{const{separator:t,experimentalParseClassName:n}=e,r=1===t.length,s=t[0],i=t.length,a=e=>{const n=[];let a,o=0,l=0;for(let u=0;u<e.length;u++){let c=e[u];if(0===o){if(c===s&&(r||e.slice(u,u+i)===t)){n.push(e.slice(l,u)),l=u+i;continue}if("/"===c){a=u;continue}}"["===c?o++:"]"===c&&o--}const c=0===n.length?e:e.substring(l),d=c.startsWith("!");return{modifiers:n,hasImportantModifier:d,baseClassName:d?c.substring(1):c,maybePostfixModifierPosition:a&&a>l?a-l:void 0}};return n?e=>n({className:e,parseClassName:a}):a},ui=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(e=>{"["===e[0]?(t.push(...n.sort(),e),n=[]):n.push(e)}),t.push(...n.sort()),t},hi=e=>(0,s.A)({cache:ci(e.cacheSize),parseClassName:di(e)},(e=>{const t=si(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:e=>{const n=e.split("-");return""===n[0]&&1!==n.length&&n.shift(),ti(n,t)||ri(e)},getConflictingClassGroupIds:(e,t)=>{const s=n[e]||[];return t&&r[e]?[...s,...r[e]]:s}}})(e)),pi=/\s+/;function fi(){let e,t,n=0,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=gi(e))&&(r&&(r+=" "),r+=t);return r}const gi=e=>{if("string"===typeof e)return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=gi(e[r]))&&(n&&(n+=" "),n+=t);return n};function mi(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let s,i,a,o=function(t){const r=n.reduce((e,t)=>t(e),e());return s=hi(r),i=s.cache.get,a=s.cache.set,o=l,l(t)};function l(e){const t=i(e);if(t)return t;const n=((e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=t,i=[],a=e.trim().split(pi);let o="";for(let l=a.length-1;l>=0;l-=1){const e=a[l],{modifiers:t,hasImportantModifier:c,baseClassName:d,maybePostfixModifierPosition:u}=n(e);let h=Boolean(u),p=r(h?d.substring(0,u):d);if(!p){if(!h){o=e+(o.length>0?" "+o:o);continue}if(p=r(d),!p){o=e+(o.length>0?" "+o:o);continue}h=!1}const f=ui(t).join(":"),g=c?f+"!":f,m=g+p;if(i.includes(m))continue;i.push(m);const y=s(p,h);for(let n=0;n<y.length;++n){const e=y[n];i.push(g+e)}o=e+(o.length>0?" "+o:o)}return o})(e,s);return a(e,n),n}return function(){return o(fi.apply(null,arguments))}}const yi=e=>{const t=t=>t[e]||[];return t.isThemeGetter=!0,t},xi=/^\[(?:([a-z-]+):)?(.+)\]$/i,bi=/^\d+\/\d+$/,vi=new Set(["px","full","screen"]),wi=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,_i=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,ki=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,ji=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Si=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ni=e=>Ei(e)||vi.has(e)||bi.test(e),Ci=e=>Bi(e,"length",Vi),Ei=e=>Boolean(e)&&!Number.isNaN(Number(e)),Ai=e=>Bi(e,"number",Ei),Pi=e=>Boolean(e)&&Number.isInteger(Number(e)),Ti=e=>e.endsWith("%")&&Ei(e.slice(0,-1)),Oi=e=>xi.test(e),Mi=e=>wi.test(e),Ii=new Set(["length","size","percentage"]),Ri=e=>Bi(e,Ii,Wi),Li=e=>Bi(e,"position",Wi),Di=new Set(["image","url"]),zi=e=>Bi(e,Di,qi),Fi=e=>Bi(e,"",Hi),Ui=()=>!0,Bi=(e,t,n)=>{const r=xi.exec(e);return!!r&&(r[1]?"string"===typeof t?r[1]===t:t.has(r[1]):n(r[2]))},Vi=e=>_i.test(e)&&!ki.test(e),Wi=()=>!1,Hi=e=>ji.test(e),qi=e=>Si.test(e),Ki=(Symbol.toStringTag,()=>{const e=yi("colors"),t=yi("spacing"),n=yi("blur"),r=yi("brightness"),s=yi("borderColor"),i=yi("borderRadius"),a=yi("borderSpacing"),o=yi("borderWidth"),l=yi("contrast"),c=yi("grayscale"),d=yi("hueRotate"),u=yi("invert"),h=yi("gap"),p=yi("gradientColorStops"),f=yi("gradientColorStopPositions"),g=yi("inset"),m=yi("margin"),y=yi("opacity"),x=yi("padding"),b=yi("saturate"),v=yi("scale"),w=yi("sepia"),_=yi("skew"),k=yi("space"),j=yi("translate"),S=()=>["auto",Oi,t],N=()=>[Oi,t],C=()=>["",Ni,Ci],E=()=>["auto",Ei,Oi],A=()=>["","0",Oi],P=()=>[Ei,Oi];return{cacheSize:500,separator:":",theme:{colors:[Ui],spacing:[Ni,Ci],blur:["none","",Mi,Oi],brightness:P(),borderColor:[e],borderRadius:["none","","full",Mi,Oi],borderSpacing:N(),borderWidth:C(),contrast:P(),grayscale:A(),hueRotate:P(),invert:A(),gap:N(),gradientColorStops:[e],gradientColorStopPositions:[Ti,Ci],inset:S(),margin:S(),opacity:P(),padding:N(),saturate:P(),scale:P(),sepia:A(),skew:P(),space:N(),translate:N()},classGroups:{aspect:[{aspect:["auto","square","video",Oi]}],container:["container"],columns:[{columns:[Mi]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",Oi]}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Pi,Oi]}],basis:[{basis:S()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Oi]}],grow:[{grow:A()}],shrink:[{shrink:A()}],order:[{order:["first","last","none",Pi,Oi]}],"grid-cols":[{"grid-cols":[Ui]}],"col-start-end":[{col:["auto",{span:["full",Pi,Oi]},Oi]}],"col-start":[{"col-start":E()}],"col-end":[{"col-end":E()}],"grid-rows":[{"grid-rows":[Ui]}],"row-start-end":[{row:["auto",{span:[Pi,Oi]},Oi]}],"row-start":[{"row-start":E()}],"row-end":[{"row-end":E()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Oi]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Oi]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal","start","end","center","between","around","evenly","stretch"]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[m]}],mx:[{mx:[m]}],my:[{my:[m]}],ms:[{ms:[m]}],me:[{me:[m]}],mt:[{mt:[m]}],mr:[{mr:[m]}],mb:[{mb:[m]}],ml:[{ml:[m]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Oi,t]}],"min-w":[{"min-w":[Oi,t,"min","max","fit"]}],"max-w":[{"max-w":[Oi,t,"none","full","min","max","fit","prose",{screen:[Mi]},Mi]}],h:[{h:[Oi,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Oi,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Oi,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Oi,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Mi,Ci]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ai]}],"font-family":[{font:[Ui]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Oi]}],"line-clamp":[{"line-clamp":["none",Ei,Ai]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ni,Oi]}],"list-image":[{"list-image":["none",Oi]}],"list-style-type":[{list:["none","disc","decimal",Oi]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","none","wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ni,Ci]}],"underline-offset":[{"underline-offset":["auto",Ni,Oi]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Oi]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Oi]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",Li]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Ri]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},zi]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[f]}],"gradient-via-pos":[{via:[f]}],"gradient-to-pos":[{to:[f]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:["solid","dashed","dotted","double","none","hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:["solid","dashed","dotted","double","none"]}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["","solid","dashed","dotted","double","none"]}],"outline-offset":[{"outline-offset":[Ni,Oi]}],"outline-w":[{outline:[Ni,Ci]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:C()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[Ni,Ci]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Mi,Fi]}],"shadow-color":[{shadow:[Ui]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Mi,Oi]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[u]}],saturate:[{saturate:[b]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[u]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Oi]}],duration:[{duration:P()}],ease:[{ease:["linear","in","out","in-out",Oi]}],delay:[{delay:P()}],animate:[{animate:["none","spin","ping","pulse","bounce",Oi]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[v]}],"scale-x":[{"scale-x":[v]}],"scale-y":[{"scale-y":[v]}],rotate:[{rotate:[Pi,Oi]}],"translate-x":[{"translate-x":[j]}],"translate-y":[{"translate-y":[j]}],"skew-x":[{"skew-x":[_]}],"skew-y":[{"skew-y":[_]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Oi]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Oi]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Oi]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Ni,Ci,Ai]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}),$i=mi(Ki);function Gi(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return $i(Ys(t))}const Ji=["className","variant","size","asChild"],Yi=ei("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Qi=t.forwardRef((e,t)=>{let{className:n,variant:r,size:a,asChild:o=!1}=e,l=i(e,Ji);const c=o?qs:"button";return(0,zs.jsx)(c,(0,s.A)({className:Gi(Yi({variant:r,size:a,className:n})),ref:t},l))});Qi.displayName="Button";const Xi=["className"],Zi=["className"],ea=["className"],ta=["className"],na=["className"],ra=["className"],sa=t.forwardRef((e,t)=>{let{className:n}=e,r=i(e,Xi);return(0,zs.jsx)("div",(0,s.A)({ref:t,className:Gi("rounded-lg border bg-card text-card-foreground shadow-sm",n)},r))});sa.displayName="Card";const ia=t.forwardRef((e,t)=>{let{className:n}=e,r=i(e,Zi);return(0,zs.jsx)("div",(0,s.A)({ref:t,className:Gi("flex flex-col space-y-1.5 p-6",n)},r))});ia.displayName="CardHeader";const aa=t.forwardRef((e,t)=>{let{className:n}=e,r=i(e,ea);return(0,zs.jsx)("div",(0,s.A)({ref:t,className:Gi("text-2xl font-semibold leading-none tracking-tight",n)},r))});aa.displayName="CardTitle";const oa=t.forwardRef((e,t)=>{let{className:n}=e,r=i(e,ta);return(0,zs.jsx)("div",(0,s.A)({ref:t,className:Gi("text-sm text-muted-foreground",n)},r))});oa.displayName="CardDescription";const la=t.forwardRef((e,t)=>{let{className:n}=e,r=i(e,na);return(0,zs.jsx)("div",(0,s.A)({ref:t,className:Gi("p-6 pt-0",n)},r))});la.displayName="CardContent";t.forwardRef((e,t)=>{let{className:n}=e,r=i(e,ra);return(0,zs.jsx)("div",(0,s.A)({ref:t,className:Gi("flex items-center p-6 pt-0",n)},r))}).displayName="CardFooter";const ca=["className","type"],da=t.forwardRef((e,t)=>{let{className:n,type:r}=e,a=i(e,ca);return(0,zs.jsx)("input",(0,s.A)({type:r,className:Gi("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t},a))});da.displayName="Input";const ua=["asChild"];var ha=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,n)=>{const r=Hs("Primitive.".concat(n)),a=t.forwardRef((e,t)=>{const{asChild:a}=e,o=i(e,ua),l=a?r:n;return"undefined"!==typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,zs.jsx)(l,(0,s.A)((0,s.A)({},o),{},{ref:t}))});return a.displayName="Primitive.".concat(n),(0,s.A)((0,s.A)({},e),{},{[n]:a})},{});var pa=t.forwardRef((e,t)=>(0,zs.jsx)(ha.label,(0,s.A)((0,s.A)({},e),{},{ref:t,onMouseDown:t=>{var n;t.target.closest("button, input, select, textarea")||(null===(n=e.onMouseDown)||void 0===n||n.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}})));pa.displayName="Label";var fa=pa;const ga=["className"],ma=ei("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ya=t.forwardRef((e,t)=>{let{className:n}=e,r=i(e,ga);return(0,zs.jsx)(fa,(0,s.A)({ref:t,className:Gi(ma(),n)},r))});ya.displayName=fa.displayName;const xa=["className","variant"],ba=ei("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function va(e){let{className:t,variant:n}=e,r=i(e,xa);return(0,zs.jsx)("div",(0,s.A)({className:Gi(ba({variant:n}),t)},r))}const wa=Ns("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]),_a=Ns("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),ka=Ns("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),ja=Ns("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),Sa=Ns("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Na=Ns("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),Ca=e=>{let{organizationName:n,onClose:r}=e;const[i,a]=(0,t.useState)(""),[o,l]=(0,t.useState)("member"),[c,d]=(0,t.useState)(!1),[u,h]=(0,t.useState)(!1),[p,f]=(0,t.useState)([{id:"1",name:"Alex Horton",email:"alex@example.com",role:"admin",status:"active",joinedAt:"2024-01-15"},{id:"2",name:"Sarah Johnson",email:"sarah@example.com",role:"member",status:"active",joinedAt:"2024-01-20"},{id:"3",name:"Mike Chen",email:"mike@example.com",role:"viewer",status:"pending",joinedAt:"2024-01-25"}]),g=e=>{switch(e){case"admin":return(0,zs.jsx)(wa,{className:"h-4 w-4 text-yellow-600"});case"member":return(0,zs.jsx)(_a,{className:"h-4 w-4 text-blue-600"});case"viewer":return(0,zs.jsx)(ka,{className:"h-4 w-4 text-gray-600"});default:return(0,zs.jsx)(Ms,{className:"h-4 w-4"})}},m=e=>{switch(e){case"admin":return"bg-yellow-100 text-yellow-800";case"member":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},y=e=>{switch(e){case"active":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"invited":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return(0,zs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 dark:bg-black dark:bg-opacity-70 flex items-center justify-center p-4 z-50",onClick:e=>{e.target===e.currentTarget&&r()},children:(0,zs.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:(0,zs.jsxs)("div",{className:"p-6",children:[(0,zs.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,zs.jsxs)("div",{children:[(0,zs.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Team Management"}),(0,zs.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:n})]}),(0,zs.jsx)(Qi,{variant:"outline",onClick:r,className:"dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700",children:(0,zs.jsx)(Ds,{className:"h-4 w-4"})})]}),(0,zs.jsxs)(sa,{className:"mb-6 dark:bg-gray-700 dark:border-gray-600",children:[(0,zs.jsxs)(ia,{children:[(0,zs.jsxs)(aa,{className:"flex items-center gap-2 dark:text-white",children:[(0,zs.jsx)(ja,{className:"h-5 w-5"}),"Invite Team Members"]}),(0,zs.jsx)(oa,{className:"dark:text-gray-300",children:"Invite new members to collaborate on your property portfolio"})]}),(0,zs.jsx)(la,{children:u?(0,zs.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),i.trim()){d(!0);try{await new Promise(e=>setTimeout(e,1e3));const e={id:Date.now().toString(),name:i.split("@")[0],email:i,role:o,status:"invited",joinedAt:(new Date).toISOString().split("T")[0]};f(t=>[...t,e]),a(""),h(!1)}catch(t){console.error("Error inviting member:",t)}finally{d(!1)}}},className:"space-y-4",children:[(0,zs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,zs.jsxs)("div",{children:[(0,zs.jsx)(ya,{htmlFor:"email",children:"Email Address"}),(0,zs.jsx)(da,{id:"email",type:"email",placeholder:"colleague@example.com",value:i,onChange:e=>a(e.target.value),required:!0})]}),(0,zs.jsxs)("div",{children:[(0,zs.jsx)(ya,{htmlFor:"role",children:"Role"}),(0,zs.jsxs)("select",{id:"role",value:o,onChange:e=>l(e.target.value),className:"w-full h-10 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,zs.jsx)("option",{value:"member",children:"Member"}),(0,zs.jsx)("option",{value:"viewer",children:"Viewer"})]})]})]}),(0,zs.jsxs)("div",{className:"flex gap-2",children:[(0,zs.jsx)(Qi,{type:"submit",disabled:c,children:c?"Sending...":"Send Invitation"}),(0,zs.jsx)(Qi,{type:"button",variant:"outline",onClick:()=>h(!1),children:"Cancel"})]})]}):(0,zs.jsxs)(Qi,{onClick:()=>h(!0),children:[(0,zs.jsx)(ja,{className:"h-4 w-4 mr-2"}),"Invite Member"]})})]}),(0,zs.jsxs)(sa,{className:"dark:bg-gray-700 dark:border-gray-600",children:[(0,zs.jsx)(ia,{children:(0,zs.jsxs)(aa,{className:"flex items-center gap-2 dark:text-white",children:[(0,zs.jsx)(Ms,{className:"h-5 w-5"}),"Team Members (",p.length,")"]})}),(0,zs.jsx)(la,{children:(0,zs.jsx)("div",{className:"space-y-4",children:p.map(e=>(0,zs.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-600",children:[(0,zs.jsxs)("div",{className:"flex items-center gap-4",children:[(0,zs.jsx)("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center",children:(0,zs.jsx)("span",{className:"text-blue-600 dark:text-blue-400 font-medium",children:e.name.split(" ").map(e=>e[0]).join("")})}),(0,zs.jsxs)("div",{children:[(0,zs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zs.jsx)("h3",{className:"font-medium text-gray-900 dark:text-white",children:e.name}),(0,zs.jsx)(va,{className:y(e.status),children:e.status})]}),(0,zs.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-300",children:e.email}),(0,zs.jsxs)("p",{className:"text-xs text-gray-400 dark:text-gray-400",children:["Joined ",e.joinedAt]})]})]}),(0,zs.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zs.jsxs)("div",{className:"flex items-center gap-2",children:[g(e.role),(0,zs.jsx)(va,{className:m(e.role),children:e.role})]}),"admin"!==e.role&&(0,zs.jsxs)("div",{className:"flex items-center gap-1",children:[(0,zs.jsxs)("select",{value:e.role,onChange:t=>{return n=e.id,r=t.target.value,void f(e=>e.map(e=>e.id===n?(0,s.A)((0,s.A)({},e),{},{role:r}):e));var n,r},className:"text-sm border border-gray-300 rounded px-2 py-1",children:[(0,zs.jsx)("option",{value:"member",children:"Member"}),(0,zs.jsx)("option",{value:"viewer",children:"Viewer"})]}),(0,zs.jsx)(Qi,{variant:"outline",size:"sm",onClick:()=>{return t=e.id,void f(e=>e.filter(e=>e.id!==t));var t},className:"text-red-600 hover:text-red-700",children:(0,zs.jsx)(Sa,{className:"h-4 w-4"})})]})]})]},e.id))})})]}),(0,zs.jsxs)(sa,{className:"mt-6",children:[(0,zs.jsx)(ia,{children:(0,zs.jsxs)(aa,{className:"flex items-center gap-2",children:[(0,zs.jsx)(Na,{className:"h-5 w-5"}),"Role Permissions"]})}),(0,zs.jsx)(la,{children:(0,zs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,zs.jsxs)("div",{className:"p-4 border border-yellow-200 rounded-lg bg-yellow-50",children:[(0,zs.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,zs.jsx)(wa,{className:"h-4 w-4 text-yellow-600"}),(0,zs.jsx)("h3",{className:"font-medium text-yellow-900",children:"Admin"})]}),(0,zs.jsxs)("ul",{className:"text-sm text-yellow-800 space-y-1",children:[(0,zs.jsx)("li",{children:"\u2022 Full access to all data"}),(0,zs.jsx)("li",{children:"\u2022 Manage team members"}),(0,zs.jsx)("li",{children:"\u2022 Delete properties and data"}),(0,zs.jsx)("li",{children:"\u2022 Organization settings"})]})]}),(0,zs.jsxs)("div",{className:"p-4 border border-blue-200 rounded-lg bg-blue-50",children:[(0,zs.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,zs.jsx)(_a,{className:"h-4 w-4 text-blue-600"}),(0,zs.jsx)("h3",{className:"font-medium text-blue-900",children:"Member"})]}),(0,zs.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,zs.jsx)("li",{children:"\u2022 View and edit data"}),(0,zs.jsx)("li",{children:"\u2022 Upload CSV files"}),(0,zs.jsx)("li",{children:"\u2022 Manage properties"}),(0,zs.jsx)("li",{children:"\u2022 Create reports"})]})]}),(0,zs.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg bg-gray-50",children:[(0,zs.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,zs.jsx)(ka,{className:"h-4 w-4 text-gray-600"}),(0,zs.jsx)("h3",{className:"font-medium text-gray-900",children:"Viewer"})]}),(0,zs.jsxs)("ul",{className:"text-sm text-gray-800 space-y-1",children:[(0,zs.jsx)("li",{children:"\u2022 View data only"}),(0,zs.jsx)("li",{children:"\u2022 Read-only access"}),(0,zs.jsx)("li",{children:"\u2022 Generate reports"}),(0,zs.jsx)("li",{children:"\u2022 No editing permissions"})]})]})]})})]})]})})})},Ea=Ns("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Aa=Ns("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Pa=Ns("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Ta=Ns("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);var Oa=n(5865);const Ma=()=>{const{user:e}=Tt(),[n,r]=(0,t.useState)(null),[s,i]=(0,t.useState)(!0),[a,o]=(0,t.useState)(null),l=(0,t.useCallback)(async()=>{if(e)try{i(!0);const t=await(0,Oa.uS)(e.id);r(t)}catch(t){console.error("Error loading subscription status:",t),o("Failed to load subscription status")}finally{i(!1)}},[e]);(0,t.useEffect)(()=>{e&&l()},[e,l]);const c=e=>new Date(1e3*e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});if(s)return(0,zs.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,zs.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})});if(a)return(0,zs.jsx)("div",{className:"p-6",children:(0,zs.jsx)(sa,{className:"border-red-200",children:(0,zs.jsx)(la,{className:"pt-6",children:(0,zs.jsxs)("div",{className:"flex items-center space-x-2 text-red-600",children:[(0,zs.jsx)(Ea,{className:"w-5 h-5"}),(0,zs.jsx)("span",{children:a})]})})})});if(!n)return(0,zs.jsx)("div",{className:"p-6",children:(0,zs.jsxs)(sa,{children:[(0,zs.jsxs)(ia,{children:[(0,zs.jsxs)(aa,{className:"flex items-center space-x-2",children:[(0,zs.jsx)(Rs,{className:"w-5 h-5"}),(0,zs.jsx)("span",{children:"No Subscription Found"})]}),(0,zs.jsx)(oa,{children:"You don't have an active subscription. Start your free trial today!"})]}),(0,zs.jsx)(la,{children:(0,zs.jsx)(Qi,{onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:{page:"pricing"}})),className:"w-full",children:"View Pricing Plans"})})]})});const d="trialing"===n.status&&n.trialEnd,u="active"===n.status||"trialing"===n.status;return(0,zs.jsxs)("div",{className:"p-6 space-y-6",children:[(0,zs.jsxs)("div",{children:[(0,zs.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Subscription & Pricing"}),(0,zs.jsx)("p",{className:"text-gray-600",children:"Manage your PropFi subscription, billing, and pricing"})]}),(0,zs.jsxs)(sa,{children:[(0,zs.jsx)(ia,{children:(0,zs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zs.jsxs)("div",{children:[(0,zs.jsxs)(aa,{className:"flex items-center space-x-2",children:[(0,zs.jsx)(Rs,{className:"w-5 h-5"}),(0,zs.jsx)("span",{children:"Current Plan"})]}),(0,zs.jsx)(oa,{children:"PropFi Pro Plan"})]}),(e=>{switch(e){case"active":return(0,zs.jsx)(va,{className:"bg-green-100 text-green-800",children:"Active"});case"trialing":return(0,zs.jsx)(va,{className:"bg-blue-100 text-blue-800",children:"Free Trial"});case"past_due":return(0,zs.jsx)(va,{className:"bg-yellow-100 text-yellow-800",children:"Past Due"});case"canceled":return(0,zs.jsx)(va,{className:"bg-red-100 text-red-800",children:"Canceled"});default:return(0,zs.jsx)(va,{variant:"secondary",children:e})}})(n.status)]})}),(0,zs.jsxs)(la,{className:"space-y-4",children:[(0,zs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,zs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,zs.jsx)(Ts,{className:"w-4 h-4 text-gray-400"}),(0,zs.jsxs)("div",{children:[(0,zs.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:[n.properties," Properties"]}),(0,zs.jsx)("p",{className:"text-xs text-gray-500",children:"Included in plan"})]})]}),d&&n.trialEnd&&(0,zs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,zs.jsx)(Aa,{className:"w-4 h-4 text-gray-400"}),(0,zs.jsxs)("div",{children:[(0,zs.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Trial Ends"}),(0,zs.jsx)("p",{className:"text-xs text-gray-500",children:c(n.trialEnd)})]})]}),u&&n.currentPeriodEnd&&(0,zs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,zs.jsx)(Aa,{className:"w-4 h-4 text-gray-400"}),(0,zs.jsxs)("div",{children:[(0,zs.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Next Billing"}),(0,zs.jsx)("p",{className:"text-xs text-gray-500",children:c(n.currentPeriodEnd)})]})]})]}),d&&(0,zs.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,zs.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,zs.jsx)(Pa,{className:"w-5 h-5 text-blue-600 mt-0.5"}),(0,zs.jsxs)("div",{children:[(0,zs.jsx)("p",{className:"text-sm font-medium text-blue-900",children:"Free Trial Active"}),(0,zs.jsxs)("p",{className:"text-xs text-blue-700",children:["Your trial ends on ",n.trialEnd?c(n.trialEnd):"N/A",". You'll be charged automatically unless you cancel."]})]})]})}),(0,zs.jsxs)("div",{className:"flex space-x-3",children:[(0,zs.jsxs)(Qi,{onClick:async()=>{if(null!==n&&void 0!==n&&n.customerId)try{await(0,Oa.du)(n.customerId)}catch(e){console.error("Error opening customer portal:",e),o("Failed to open subscription management")}},className:"flex-1",disabled:!n.customerId,children:[(0,zs.jsx)(Ta,{className:"w-4 h-4 mr-2"}),"Manage Subscription"]}),(0,zs.jsx)(Qi,{variant:"outline",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:{page:"pricing"}})),children:"Change Plan"})]})]})]}),(0,zs.jsxs)(sa,{children:[(0,zs.jsxs)(ia,{children:[(0,zs.jsx)(aa,{children:"Plan Details"}),(0,zs.jsx)(oa,{children:"What's included in your PropFi Pro plan"})]}),(0,zs.jsx)(la,{children:(0,zs.jsx)("div",{className:"space-y-3",children:["Unlimited CSV uploads","AI-powered categorization","Real-time analytics dashboard","Team collaboration","Data export capabilities","Priority support","".concat(n.properties," properties at $20 each")].map((e,t)=>(0,zs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,zs.jsx)(Pa,{className:"w-4 h-4 text-green-500"}),(0,zs.jsx)("span",{className:"text-sm text-gray-600",children:e})]},t))})})]}),u&&(0,zs.jsxs)(sa,{children:[(0,zs.jsxs)(ia,{children:[(0,zs.jsx)(aa,{children:"Billing Information"}),(0,zs.jsx)(oa,{children:"Your current billing cycle and payment details"})]}),(0,zs.jsx)(la,{children:(0,zs.jsxs)("div",{className:"space-y-3",children:[(0,zs.jsxs)("div",{className:"flex justify-between",children:[(0,zs.jsxs)("span",{className:"text-sm text-gray-600",children:["Properties (",n.properties," \xd7 $20)"]}),(0,zs.jsxs)("span",{className:"text-sm font-medium",children:["$",20*n.properties,"/month"]})]}),(0,zs.jsxs)("div",{className:"border-t pt-3 flex justify-between",children:[(0,zs.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Total"}),(0,zs.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:["$",20*n.properties,"/month"]})]})]})})]}),(0,zs.jsxs)(sa,{children:[(0,zs.jsxs)(ia,{children:[(0,zs.jsxs)(aa,{className:"flex items-center space-x-2",children:[(0,zs.jsx)(Ts,{className:"w-5 h-5"}),(0,zs.jsx)("span",{children:"Pricing Plans"})]}),(0,zs.jsx)(oa,{children:"Current PropFi pricing structure"})]}),(0,zs.jsx)(la,{children:(0,zs.jsxs)("div",{className:"space-y-4",children:[(0,zs.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,zs.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,zs.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"PropFi Pro"}),(0,zs.jsx)(va,{className:"bg-blue-100 text-blue-800",children:"Current Plan"})]}),(0,zs.jsxs)("div",{className:"text-2xl font-bold text-gray-900 mb-2",children:["$20 ",(0,zs.jsx)("span",{className:"text-sm font-normal text-gray-600",children:"per property per month"})]}),(0,zs.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Start with a 1-month free trial, then pay only for what you need."}),(0,zs.jsx)("div",{className:"space-y-2",children:["Unlimited CSV uploads","AI-powered categorization","Real-time analytics dashboard","Team collaboration","Data export capabilities","Priority support","Secure cloud storage"].map((e,t)=>(0,zs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,zs.jsx)(Pa,{className:"w-4 h-4 text-green-500"}),(0,zs.jsx)("span",{className:"text-sm text-gray-600",children:e})]},t))})]}),(0,zs.jsx)("div",{className:"text-center",children:(0,zs.jsx)(Qi,{onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:{page:"pricing"}})),variant:"outline",className:"w-full",children:"View Full Pricing Details"})})]})})]})]})},Ia=e=>{var n,r,s,i;let{currentPage:a,setCurrentPage:o,onLogout:l,organizationName:c,isCollapsed:d=!1,onToggleCollapse:u}=e;const{user:h}=Tt(),[p,f]=(0,t.useState)(!1),[g,m]=(0,t.useState)(!1),[y,x]=(0,t.useState)(!1),b=[{id:"dashboard",label:"Dashboard",icon:Cs},{id:"financials",label:"Financials",icon:Es},{id:"analytics",label:"Analytics",icon:As},{id:"reports",label:"Reports",icon:Ps},{id:"properties",label:"Properties",icon:Ts},{id:"csvs",label:"CSV Upload & Management",icon:Os},{id:"team-management",label:"Team Management",icon:Ms}];return(0,zs.jsxs)(zs.Fragment,{children:[d&&(0,zs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:u}),(0,zs.jsxs)("div",{className:"".concat(d?"w-16":"w-64"," bg-white dark:bg-gray-800 shadow-lg border-r border-gray-200 dark:border-gray-700 flex flex-col h-screen transition-all duration-300 ease-in-out ").concat(d?"fixed lg:relative z-50":"relative"),children:[(0,zs.jsxs)("div",{className:"p-6",children:[!d&&(0,zs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,zs.jsx)(Fs,{size:"lg",showText:!1}),(0,zs.jsx)("div",{children:(0,zs.jsx)("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:c||"Property Management"})})]}),(0,zs.jsx)("div",{className:"".concat(d?"flex justify-center":"flex justify-end mt-4"),children:(0,zs.jsx)("button",{onClick:u,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:d?(0,zs.jsx)(Is,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}):(0,zs.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,zs.jsx)("svg",{className:"w-4 h-4 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),(0,zs.jsx)("svg",{className:"w-4 h-4 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})]})})})]}),(0,zs.jsx)("nav",{className:"mt-6 flex-1",children:b.map(e=>{const t=e.icon,n=a===e.id;return(0,zs.jsxs)("button",{onClick:()=>{"team-management"===e.id?f(!0):(o(e.id),window.innerWidth<1024&&u&&u())},className:"w-full flex items-center ".concat(d?"justify-center px-3":"space-x-3 px-6"," py-3 text-left transition-colors duration-200 ").concat(n?"bg-primary-50 dark:bg-primary-900/20 text-primary-700 dark:text-primary-300 border-r-2 border-primary-600":"text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white"),title:d?e.label:void 0,children:[(0,zs.jsx)(t,{className:"w-5 h-5 ".concat(n?"text-primary-600 dark:text-primary-400":"text-gray-400 dark:text-gray-500")}),!d&&(0,zs.jsx)("span",{className:"font-medium",children:e.label})]},e.id)})}),(0,zs.jsx)("div",{className:"p-6 space-y-4 border-t border-gray-200 dark:border-gray-700",children:(0,zs.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[(0,zs.jsxs)("div",{className:"flex items-center ".concat(d?"justify-center":"space-x-3"," mb-3 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 rounded-md p-2 -m-2 transition-colors duration-200"),onClick:()=>x(!y),children:[(0,zs.jsx)("div",{className:"w-8 h-8 bg-primary-600 rounded-full flex items-center justify-center",children:(0,zs.jsx)("span",{className:"text-white text-sm font-medium",children:(null===h||void 0===h||null===(n=h.firstName)||void 0===n?void 0:n[0])||(null===h||void 0===h||null===(r=h.emailAddresses[0])||void 0===r||null===(s=r.emailAddress)||void 0===s?void 0:s[0])||"U"})}),!d&&(0,zs.jsxs)(zs.Fragment,{children:[(0,zs.jsxs)("div",{className:"flex-1",children:[(0,zs.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:null!==h&&void 0!==h&&h.firstName&&null!==h&&void 0!==h&&h.lastName?"".concat(h.firstName," ").concat(h.lastName):(null===h||void 0===h||null===(i=h.emailAddresses[0])||void 0===i?void 0:i.emailAddress)||"User"}),(0,zs.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Property Manager"})]}),(0,zs.jsx)("div",{className:"transform transition-transform duration-200 ".concat(y?"rotate-180":""),children:(0,zs.jsx)("svg",{className:"w-4 h-4 text-gray-400 dark:text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),y&&!d&&(0,zs.jsxs)("div",{className:"mt-2 pt-2 border-t border-gray-200 dark:border-gray-600",children:[(0,zs.jsxs)("button",{onClick:()=>m(!0),className:"w-full flex items-center space-x-3 px-3 py-2 text-left text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600 hover:text-gray-900 dark:hover:text-white rounded-md transition-colors duration-200",children:[(0,zs.jsx)(Rs,{className:"w-4 h-4 text-gray-400 dark:text-gray-500"}),(0,zs.jsx)("span",{className:"text-sm font-medium",children:"Subscription"})]}),(0,zs.jsxs)("button",{onClick:l,className:"w-full flex items-center space-x-3 px-3 py-2 text-left text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 hover:text-red-700 dark:hover:text-red-300 rounded-md transition-colors duration-200",children:[(0,zs.jsx)(Ls,{className:"w-4 h-4 text-red-400 dark:text-red-500"}),(0,zs.jsx)("span",{className:"text-sm font-medium",children:"Sign Out"})]})]})]})})]}),p&&(0,zs.jsx)(Ca,{organizationName:c||"My Organization",onClose:()=>f(!1)}),g&&(0,zs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 dark:bg-black dark:bg-opacity-70 flex items-center justify-center z-50 p-4",onClick:e=>{e.target===e.currentTarget&&m(!1)},children:(0,zs.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:(0,zs.jsxs)("div",{className:"p-6",children:[(0,zs.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,zs.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Subscription Management"}),(0,zs.jsx)("button",{onClick:()=>m(!1),className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300",children:(0,zs.jsx)(Ds,{className:"w-6 h-6"})})]}),(0,zs.jsx)(Ma,{})]})})})]})},Ra=Ns("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),La=Ns("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var Da=n(4705);function za(e){return e+.5|0}const Fa=(e,t,n)=>Math.max(Math.min(e,n),t);function Ua(e){return Fa(za(2.55*e),0,255)}function Ba(e){return Fa(za(255*e),0,255)}function Va(e){return Fa(za(e/2.55)/100,0,1)}function Wa(e){return Fa(za(100*e),0,100)}const Ha={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},qa=[..."0123456789ABCDEF"],Ka=e=>qa[15&e],$a=e=>qa[(240&e)>>4]+qa[15&e],Ga=e=>(240&e)>>4===(15&e);function Ja(e){var t=(e=>Ga(e.r)&&Ga(e.g)&&Ga(e.b)&&Ga(e.a))(e)?Ka:$a;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const Ya=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Qa(e,t,n){const r=t*Math.min(n,1-n),s=function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return n-r*Math.max(Math.min(s-3,9-s,1),-1)};return[s(0),s(8),s(4)]}function Xa(e,t,n){const r=function(r){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(r+e/60)%6;return n-n*t*Math.max(Math.min(s,4-s,1),0)};return[r(5),r(3),r(1)]}function Za(e,t,n){const r=Qa(e,1,.5);let s;for(t+n>1&&(s=1/(t+n),t*=s,n*=s),s=0;s<3;s++)r[s]*=1-t-n,r[s]+=t;return r}function eo(e){const t=e.r/255,n=e.g/255,r=e.b/255,s=Math.max(t,n,r),i=Math.min(t,n,r),a=(s+i)/2;let o,l,c;return s!==i&&(c=s-i,l=a>.5?c/(2-s-i):c/(s+i),o=function(e,t,n,r,s){return e===s?(t-n)/r+(t<n?6:0):t===s?(n-e)/r+2:(e-t)/r+4}(t,n,r,c,s),o=60*o+.5),[0|o,l||0,a]}function to(e,t,n,r){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,r)).map(Ba)}function no(e,t,n){return to(Qa,e,t,n)}function ro(e){return(e%360+360)%360}function so(e){const t=Ya.exec(e);let n,r=255;if(!t)return;t[5]!==n&&(r=t[6]?Ua(+t[5]):Ba(+t[5]));const s=ro(+t[2]),i=+t[3]/100,a=+t[4]/100;return n="hwb"===t[1]?function(e,t,n){return to(Za,e,t,n)}(s,i,a):"hsv"===t[1]?function(e,t,n){return to(Xa,e,t,n)}(s,i,a):no(s,i,a),{r:n[0],g:n[1],b:n[2],a:r}}const io={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},ao={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let oo;function lo(e){oo||(oo=function(){const e={},t=Object.keys(ao),n=Object.keys(io);let r,s,i,a,o;for(r=0;r<t.length;r++){for(a=o=t[r],s=0;s<n.length;s++)i=n[s],o=o.replace(i,io[i]);i=parseInt(ao[a],16),e[o]=[i>>16&255,i>>8&255,255&i]}return e}(),oo.transparent=[0,0,0,0]);const t=oo[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const co=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const uo=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,ho=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function po(e,t,n){if(e){let r=eo(e);r[t]=Math.max(0,Math.min(r[t]+r[t]*n,0===t?360:1)),r=no(r),e.r=r[0],e.g=r[1],e.b=r[2]}}function fo(e,t){return e?Object.assign(t||{},e):e}function go(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Ba(e[3]))):(t=fo(e,{r:0,g:0,b:0,a:1})).a=Ba(t.a),t}function mo(e){return"r"===e.charAt(0)?function(e){const t=co.exec(e);let n,r,s,i=255;if(t){if(t[7]!==n){const e=+t[7];i=t[8]?Ua(e):Fa(255*e,0,255)}return n=+t[1],r=+t[3],s=+t[5],n=255&(t[2]?Ua(n):Fa(n,0,255)),r=255&(t[4]?Ua(r):Fa(r,0,255)),s=255&(t[6]?Ua(s):Fa(s,0,255)),{r:n,g:r,b:s,a:i}}}(e):so(e)}class yo{constructor(e){if(e instanceof yo)return e;const t=typeof e;let n;"object"===t?n=go(e):"string"===t&&(n=function(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*Ha[e[1]],g:255&17*Ha[e[2]],b:255&17*Ha[e[3]],a:5===n?17*Ha[e[4]]:255}:7!==n&&9!==n||(t={r:Ha[e[1]]<<4|Ha[e[2]],g:Ha[e[3]]<<4|Ha[e[4]],b:Ha[e[5]]<<4|Ha[e[6]],a:9===n?Ha[e[7]]<<4|Ha[e[8]]:255})),t}(e)||lo(e)||mo(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=fo(this._rgb);return e&&(e.a=Va(e.a)),e}set rgb(e){this._rgb=go(e)}rgbString(){return this._valid?(e=this._rgb)&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(Va(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")")):void 0;var e}hexString(){return this._valid?Ja(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=eo(e),n=t[0],r=Wa(t[1]),s=Wa(t[2]);return e.a<255?"hsla(".concat(n,", ").concat(r,"%, ").concat(s,"%, ").concat(Va(e.a),")"):"hsl(".concat(n,", ").concat(r,"%, ").concat(s,"%)")}(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,r=e.rgb;let s;const i=t===s?.5:t,a=2*i-1,o=n.a-r.a,l=((a*o===-1?a:(a+o)/(1+a*o))+1)/2;s=1-l,n.r=255&l*n.r+s*r.r+.5,n.g=255&l*n.g+s*r.g+.5,n.b=255&l*n.b+s*r.b+.5,n.a=i*n.a+(1-i)*r.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,n){const r=ho(Va(e.r)),s=ho(Va(e.g)),i=ho(Va(e.b));return{r:Ba(uo(r+n*(ho(Va(t.r))-r))),g:Ba(uo(s+n*(ho(Va(t.g))-s))),b:Ba(uo(i+n*(ho(Va(t.b))-i))),a:e.a+n*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new yo(this.rgb)}alpha(e){return this._rgb.a=Ba(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=za(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return po(this._rgb,2,e),this}darken(e){return po(this._rgb,2,-e),this}saturate(e){return po(this._rgb,1,e),this}desaturate(e){return po(this._rgb,1,-e),this}rotate(e){return function(e,t){var n=eo(e);n[0]=ro(n[0]+t),n=no(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}function xo(){}const bo=(()=>{let e=0;return()=>e++})();function vo(e){return null===e||void 0===e}function wo(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function _o(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function ko(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function jo(e,t){return ko(e)?e:t}function So(e,t){return"undefined"===typeof e?t:e}const No=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Co(e,t,n){if(e&&"function"===typeof e.call)return e.apply(n,t)}function Eo(e,t,n,r){let s,i,a;if(wo(e))if(i=e.length,r)for(s=i-1;s>=0;s--)t.call(n,e[s],s);else for(s=0;s<i;s++)t.call(n,e[s],s);else if(_o(e))for(a=Object.keys(e),i=a.length,s=0;s<i;s++)t.call(n,e[a[s]],a[s])}function Ao(e,t){let n,r,s,i;if(!e||!t||e.length!==t.length)return!1;for(n=0,r=e.length;n<r;++n)if(s=e[n],i=t[n],s.datasetIndex!==i.datasetIndex||s.index!==i.index)return!1;return!0}function Po(e){if(wo(e))return e.map(Po);if(_o(e)){const t=Object.create(null),n=Object.keys(e),r=n.length;let s=0;for(;s<r;++s)t[n[s]]=Po(e[n[s]]);return t}return e}function To(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function Oo(e,t,n,r){if(!To(e))return;const s=t[e],i=n[e];_o(s)&&_o(i)?Mo(s,i,r):t[e]=Po(i)}function Mo(e,t,n){const r=wo(t)?t:[t],s=r.length;if(!_o(e))return e;const i=(n=n||{}).merger||Oo;let a;for(let o=0;o<s;++o){if(a=r[o],!_o(a))continue;const t=Object.keys(a);for(let r=0,s=t.length;r<s;++r)i(t[r],e,a,n)}return e}function Io(e,t){return Mo(e,t,{merger:Ro})}function Ro(e,t,n){if(!To(e))return;const r=t[e],s=n[e];_o(r)&&_o(s)?Io(r,s):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Po(s))}const Lo={"":e=>e,x:e=>e.x,y:e=>e.y};function Do(e,t){const n=Lo[t]||(Lo[t]=function(e){const t=function(e){const t=e.split("."),n=[];let r="";for(const s of t)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}(e);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t));return n(e)}function zo(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Fo=e=>"undefined"!==typeof e,Uo=e=>"function"===typeof e,Bo=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};const Vo=Math.PI,Wo=2*Vo,Ho=Wo+Vo,qo=Number.POSITIVE_INFINITY,Ko=Vo/180,$o=Vo/2,Go=Vo/4,Jo=2*Vo/3,Yo=Math.log10,Qo=Math.sign;function Xo(e,t,n){return Math.abs(e-t)<n}function Zo(e){const t=Math.round(e);e=Xo(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(Yo(e))),r=e/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function el(e){return!function(e){return"symbol"===typeof e||"object"===typeof e&&null!==e&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function tl(e,t,n){let r,s,i;for(r=0,s=e.length;r<s;r++)i=e[r][n],isNaN(i)||(t.min=Math.min(t.min,i),t.max=Math.max(t.max,i))}function nl(e){return e*(Vo/180)}function rl(e){return e*(180/Vo)}function sl(e){if(!ko(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function il(e,t){const n=t.x-e.x,r=t.y-e.y,s=Math.sqrt(n*n+r*r);let i=Math.atan2(r,n);return i<-.5*Vo&&(i+=Wo),{angle:i,distance:s}}function al(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function ol(e,t){return(e-t+Ho)%Wo-Vo}function ll(e){return(e%Wo+Wo)%Wo}function cl(e,t,n,r){const s=ll(e),i=ll(t),a=ll(n),o=ll(i-s),l=ll(a-s),c=ll(s-i),d=ll(s-a);return s===i||s===a||r&&i===a||o>l&&c<d}function dl(e,t,n){return Math.max(t,Math.min(n,e))}function ul(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,n)-r&&e<=Math.max(t,n)+r}function hl(e,t,n){n=n||(n=>e[n]<t);let r,s=e.length-1,i=0;for(;s-i>1;)r=i+s>>1,n(r)?i=r:s=r;return{lo:i,hi:s}}const pl=(e,t,n,r)=>hl(e,n,r?r=>{const s=e[r][t];return s<n||s===n&&e[r+1][t]===n}:r=>e[r][t]<n),fl=(e,t,n)=>hl(e,n,r=>e[r][t]>=n);const gl=["push","pop","shift","splice","unshift"];function ml(e,t){const n=e._chartjs;if(!n)return;const r=n.listeners,s=r.indexOf(t);-1!==s&&r.splice(s,1),r.length>0||(gl.forEach(t=>{delete e[t]}),delete e._chartjs)}function yl(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const xl="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function bl(e,t){let n=[],r=!1;return function(){for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];n=i,r||(r=!0,xl.call(window,()=>{r=!1,e.apply(t,n)}))}}const vl=e=>"start"===e?"left":"end"===e?"right":"center",wl=(e,t,n)=>"start"===e?t:"end"===e?n:(t+n)/2;function _l(e,t,n){const r=t.length;let s=0,i=r;if(e._sorted){const{iScale:a,vScale:o,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,d=a.axis,{min:u,max:h,minDefined:p,maxDefined:f}=a.getUserBounds();if(p){if(s=Math.min(pl(l,d,u).lo,n?r:pl(t,d,a.getPixelForValue(u)).lo),c){const e=l.slice(0,s+1).reverse().findIndex(e=>!vo(e[o.axis]));s-=Math.max(0,e)}s=dl(s,0,r-1)}if(f){let e=Math.max(pl(l,a.axis,h,!0).hi+1,n?0:pl(t,d,a.getPixelForValue(h),!0).hi+1);if(c){const t=l.slice(e-1).findIndex(e=>!vo(e[o.axis]));e+=Math.max(0,t)}i=dl(e,s,r)-s}else i=r-s}return{start:s,count:i}}function kl(e){const{xScale:t,yScale:n,_scaleRanges:r}=e,s={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!r)return e._scaleRanges=s,!0;const i=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,s),i}const jl=e=>0===e||1===e,Sl=(e,t,n)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*Wo/n),Nl=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*Wo/n)+1,Cl={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*$o),easeOutSine:e=>Math.sin(e*$o),easeInOutSine:e=>-.5*(Math.cos(Vo*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>jl(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>jl(e)?e:Sl(e,.075,.3),easeOutElastic:e=>jl(e)?e:Nl(e,.075,.3),easeInOutElastic(e){const t=.1125;return jl(e)?e:e<.5?.5*Sl(2*e,t,.45):.5+.5*Nl(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-Cl.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:e=>e<.5?.5*Cl.easeInBounce(2*e):.5*Cl.easeOutBounce(2*e-1)+.5};function El(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function Al(e){return El(e)?e:new yo(e)}function Pl(e){return El(e)?e:new yo(e).saturate(.5).darken(.1).hexString()}const Tl=["x","y","borderWidth","radius","tension"],Ol=["color","borderColor","backgroundColor"];const Ml=new Map;function Il(e,t,n){return function(e,t){t=t||{};const n=e+JSON.stringify(t);let r=Ml.get(n);return r||(r=new Intl.NumberFormat(e,t),Ml.set(n,r)),r}(t,n).format(e)}const Rl={values:e=>wo(e)?e:""+e,numeric(e,t,n){if(0===e)return"0";const r=this.chart.options.locale;let s,i=e;if(n.length>1){const t=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(t<1e-4||t>1e15)&&(s="scientific"),i=function(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}const a=Yo(Math.abs(i)),o=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:s,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),Il(e,r,l)},logarithmic(e,t,n){if(0===e)return"0";const r=n[t].significand||e/Math.pow(10,Math.floor(Yo(e)));return[1,2,3,5,10,15].includes(r)||t>.8*n.length?Rl.numeric.call(this,e,t,n):""}};var Ll={formatters:Rl};const Dl=Object.create(null),zl=Object.create(null);function Fl(e,t){if(!t)return e;const n=t.split(".");for(let r=0,s=n.length;r<s;++r){const t=n[r];e=e[t]||(e[t]=Object.create(null))}return e}function Ul(e,t,n){return"string"===typeof t?Mo(Fl(e,t),n):Mo(Fl(e,""),t)}class Bl{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>Pl(t.backgroundColor),this.hoverBorderColor=(e,t)=>Pl(t.borderColor),this.hoverColor=(e,t)=>Pl(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return Ul(this,e,t)}get(e){return Fl(this,e)}describe(e,t){return Ul(zl,e,t)}override(e,t){return Ul(Dl,e,t)}route(e,t,n,r){const s=Fl(this,e),i=Fl(this,n),a="_"+t;Object.defineProperties(s,{[a]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[a],t=i[r];return _o(e)?Object.assign({},t,e):So(e,t)},set(e){this[a]=e}}})}apply(e){e.forEach(e=>e(this))}}var Vl=new Bl({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:Ol},numbers:{type:"number",properties:Tl}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ll.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function Wl(e,t,n,r,s){let i=t[s];return i||(i=t[s]=e.measureText(s).width,n.push(s)),i>r&&(r=i),r}function Hl(e,t,n,r){let s=(r=r||{}).data=r.data||{},i=r.garbageCollect=r.garbageCollect||[];r.font!==t&&(s=r.data={},i=r.garbageCollect=[],r.font=t),e.save(),e.font=t;let a=0;const o=n.length;let l,c,d,u,h;for(l=0;l<o;l++)if(u=n[l],void 0===u||null===u||wo(u)){if(wo(u))for(c=0,d=u.length;c<d;c++)h=u[c],void 0===h||null===h||wo(h)||(a=Wl(e,s,i,a,h))}else a=Wl(e,s,i,a,u);e.restore();const p=i.length/2;if(p>n.length){for(l=0;l<p;l++)delete s[i[l]];i.splice(0,p)}return a}function ql(e,t,n){const r=e.currentDevicePixelRatio,s=0!==n?Math.max(n/2,.5):0;return Math.round((t-s)*r)/r+s}function Kl(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function $l(e,t,n,r){Gl(e,t,n,r,null)}function Gl(e,t,n,r,s){let i,a,o,l,c,d,u,h;const p=t.pointStyle,f=t.rotation,g=t.radius;let m=(f||0)*Ko;if(p&&"object"===typeof p&&(i=p.toString(),"[object HTMLImageElement]"===i||"[object HTMLCanvasElement]"===i))return e.save(),e.translate(n,r),e.rotate(m),e.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),void e.restore();if(!(isNaN(g)||g<=0)){switch(e.beginPath(),p){default:s?e.ellipse(n,r,s/2,g,0,0,Wo):e.arc(n,r,g,0,Wo),e.closePath();break;case"triangle":d=s?s/2:g,e.moveTo(n+Math.sin(m)*d,r-Math.cos(m)*g),m+=Jo,e.lineTo(n+Math.sin(m)*d,r-Math.cos(m)*g),m+=Jo,e.lineTo(n+Math.sin(m)*d,r-Math.cos(m)*g),e.closePath();break;case"rectRounded":c=.516*g,l=g-c,a=Math.cos(m+Go)*l,u=Math.cos(m+Go)*(s?s/2-c:l),o=Math.sin(m+Go)*l,h=Math.sin(m+Go)*(s?s/2-c:l),e.arc(n-u,r-o,c,m-Vo,m-$o),e.arc(n+h,r-a,c,m-$o,m),e.arc(n+u,r+o,c,m,m+$o),e.arc(n-h,r+a,c,m+$o,m+Vo),e.closePath();break;case"rect":if(!f){l=Math.SQRT1_2*g,d=s?s/2:l,e.rect(n-d,r-l,2*d,2*l);break}m+=Go;case"rectRot":u=Math.cos(m)*(s?s/2:g),a=Math.cos(m)*g,o=Math.sin(m)*g,h=Math.sin(m)*(s?s/2:g),e.moveTo(n-u,r-o),e.lineTo(n+h,r-a),e.lineTo(n+u,r+o),e.lineTo(n-h,r+a),e.closePath();break;case"crossRot":m+=Go;case"cross":u=Math.cos(m)*(s?s/2:g),a=Math.cos(m)*g,o=Math.sin(m)*g,h=Math.sin(m)*(s?s/2:g),e.moveTo(n-u,r-o),e.lineTo(n+u,r+o),e.moveTo(n+h,r-a),e.lineTo(n-h,r+a);break;case"star":u=Math.cos(m)*(s?s/2:g),a=Math.cos(m)*g,o=Math.sin(m)*g,h=Math.sin(m)*(s?s/2:g),e.moveTo(n-u,r-o),e.lineTo(n+u,r+o),e.moveTo(n+h,r-a),e.lineTo(n-h,r+a),m+=Go,u=Math.cos(m)*(s?s/2:g),a=Math.cos(m)*g,o=Math.sin(m)*g,h=Math.sin(m)*(s?s/2:g),e.moveTo(n-u,r-o),e.lineTo(n+u,r+o),e.moveTo(n+h,r-a),e.lineTo(n-h,r+a);break;case"line":a=s?s/2:Math.cos(m)*g,o=Math.sin(m)*g,e.moveTo(n-a,r-o),e.lineTo(n+a,r+o);break;case"dash":e.moveTo(n,r),e.lineTo(n+Math.cos(m)*(s?s/2:g),r+Math.sin(m)*g);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function Jl(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function Yl(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Ql(e){e.restore()}function Xl(e,t,n,r,s){if(!t)return e.lineTo(n.x,n.y);if("middle"===s){const r=(t.x+n.x)/2;e.lineTo(r,t.y),e.lineTo(r,n.y)}else"after"===s!==!!r?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function Zl(e,t,n,r){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function ec(e,t,n,r,s){if(s.strikethrough||s.underline){const i=e.measureText(r),a=t-i.actualBoundingBoxLeft,o=t+i.actualBoundingBoxRight,l=n-i.actualBoundingBoxAscent,c=n+i.actualBoundingBoxDescent,d=s.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=s.decorationWidth||2,e.moveTo(a,d),e.lineTo(o,d),e.stroke()}}function tc(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function nc(e,t,n,r,s){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=wo(t)?t:[t],o=i.strokeWidth>0&&""!==i.strokeColor;let l,c;for(e.save(),e.font=s.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),vo(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,i),l=0;l<a.length;++l)c=a[l],i.backdrop&&tc(e,i.backdrop),o&&(i.strokeColor&&(e.strokeStyle=i.strokeColor),vo(i.strokeWidth)||(e.lineWidth=i.strokeWidth),e.strokeText(c,n,r,i.maxWidth)),e.fillText(c,n,r,i.maxWidth),ec(e,n,r,c,i),r+=Number(s.lineHeight);e.restore()}function rc(e,t){const{x:n,y:r,w:s,h:i,radius:a}=t;e.arc(n+a.topLeft,r+a.topLeft,a.topLeft,1.5*Vo,Vo,!0),e.lineTo(n,r+i-a.bottomLeft),e.arc(n+a.bottomLeft,r+i-a.bottomLeft,a.bottomLeft,Vo,$o,!0),e.lineTo(n+s-a.bottomRight,r+i),e.arc(n+s-a.bottomRight,r+i-a.bottomRight,a.bottomRight,$o,0,!0),e.lineTo(n+s,r+a.topRight),e.arc(n+s-a.topRight,r+a.topRight,a.topRight,0,-$o,!0),e.lineTo(n+a.topLeft,r)}const sc=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,ic=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function ac(e,t){const n=(""+e).match(sc);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}const oc=e=>+e||0;function lc(e,t){const n={},r=_o(t),s=r?Object.keys(t):t,i=_o(e)?r?n=>So(e[n],e[t[n]]):t=>e[t]:()=>e;for(const a of s)n[a]=oc(i(a));return n}function cc(e){return lc(e,{top:"y",right:"x",bottom:"y",left:"x"})}function dc(e){return lc(e,["topLeft","topRight","bottomLeft","bottomRight"])}function uc(e){const t=cc(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function hc(e,t){e=e||{},t=t||Vl.font;let n=So(e.size,t.size);"string"===typeof n&&(n=parseInt(n,10));let r=So(e.style,t.style);r&&!(""+r).match(ic)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:So(e.family,t.family),lineHeight:ac(So(e.lineHeight,t.lineHeight),n),size:n,style:r,weight:So(e.weight,t.weight),string:""};return s.string=function(e){return!e||vo(e.size)||vo(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(s),s}function pc(e,t,n,r){let s,i,a,o=!0;for(s=0,i=e.length;s<i;++s)if(a=e[s],void 0!==a&&(void 0!==t&&"function"===typeof a&&(a=a(t),o=!1),void 0!==n&&wo(a)&&(a=a[n%a.length],o=!1),void 0!==a))return r&&!o&&(r.cacheable=!1),a}function fc(e,t){return Object.assign(Object.create(e),t)}function gc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];const s=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof n&&(n=Nc("_fallback",e));const i={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:s,_fallback:n,_getTarget:r,override:r=>gc([r,...e],t,s,n)};return new Proxy(i,{deleteProperty:(t,n)=>(delete t[n],delete t._keys,delete e[0][n],!0),get:(n,r)=>vc(n,r,()=>function(e,t,n,r){let s;for(const i of t)if(s=Nc(xc(i,e),n),"undefined"!==typeof s)return bc(e,s)?jc(n,r,e,s):s}(r,t,e,n)),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>Cc(e).includes(t),ownKeys:e=>Cc(e),set(e,t,n){const s=e._storage||(e._storage=r());return e[t]=s[t]=n,delete e._keys,!0}})}function mc(e,t,n,r){const s={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:yc(e,r),setContext:t=>mc(e,t,n,r),override:s=>mc(e.override(s),t,n,r)};return new Proxy(s,{deleteProperty:(t,n)=>(delete t[n],delete e[n],!0),get:(e,t,n)=>vc(e,t,()=>function(e,t,n){const{_proxy:r,_context:s,_subProxy:i,_descriptors:a}=e;let o=r[t];Uo(o)&&a.isScriptable(t)&&(o=function(e,t,n,r){const{_proxy:s,_context:i,_subProxy:a,_stack:o}=n;if(o.has(e))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+e);o.add(e);let l=t(i,a||r);o.delete(e),bc(e,l)&&(l=jc(s._scopes,s,e,l));return l}(t,o,e,n));wo(o)&&o.length&&(o=function(e,t,n,r){const{_proxy:s,_context:i,_subProxy:a,_descriptors:o}=n;if("undefined"!==typeof i.index&&r(e))return t[i.index%t.length];if(_o(t[0])){const n=t,r=s._scopes.filter(e=>e!==n);t=[];for(const l of n){const n=jc(r,s,e,l);t.push(mc(n,i,a&&a[e],o))}}return t}(t,o,e,a.isIndexable));bc(t,o)&&(o=mc(o,s,i&&i[t],a));return o}(e,t,n)),getOwnPropertyDescriptor:(t,n)=>t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,n)=>Reflect.has(e,n),ownKeys:()=>Reflect.ownKeys(e),set:(t,n,r)=>(e[n]=r,delete t[n],!0)})}function yc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:n=t.scriptable,_indexable:r=t.indexable,_allKeys:s=t.allKeys}=e;return{allKeys:s,scriptable:n,indexable:r,isScriptable:Uo(n)?n:()=>n,isIndexable:Uo(r)?r:()=>r}}const xc=(e,t)=>e?e+zo(t):t,bc=(e,t)=>_o(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function vc(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const r=n();return e[t]=r,r}function wc(e,t,n){return Uo(e)?e(t,n):e}const _c=(e,t)=>!0===e?t:"string"===typeof e?Do(t,e):void 0;function kc(e,t,n,r,s){for(const i of t){const t=_c(n,i);if(t){e.add(t);const i=wc(t._fallback,n,s);if("undefined"!==typeof i&&i!==n&&i!==r)return i}else if(!1===t&&"undefined"!==typeof r&&n!==r)return null}return!1}function jc(e,t,n,r){const s=t._rootScopes,i=wc(t._fallback,n,r),a=[...e,...s],o=new Set;o.add(r);let l=Sc(o,a,n,i||n,r);return null!==l&&(("undefined"===typeof i||i===n||(l=Sc(o,a,i,l,r),null!==l))&&gc(Array.from(o),[""],s,i,()=>function(e,t,n){const r=e._getTarget();t in r||(r[t]={});const s=r[t];if(wo(s)&&_o(n))return n;return s||{}}(t,n,r)))}function Sc(e,t,n,r,s){for(;n;)n=kc(e,t,n,r,s);return n}function Nc(e,t){for(const n of t){if(!n)continue;const t=n[e];if("undefined"!==typeof t)return t}}function Cc(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const n of e)for(const e of Object.keys(n).filter(e=>!e.startsWith("_")))t.add(e);return Array.from(t)}(e._scopes)),t}function Ec(e,t,n,r){const{iScale:s}=e,{key:i="r"}=this._parsing,a=new Array(r);let o,l,c,d;for(o=0,l=r;o<l;++o)c=o+n,d=t[c],a[o]={r:s.parse(Do(d,i),c)};return a}const Ac=Number.EPSILON||1e-14,Pc=(e,t)=>t<e.length&&!e[t].skip&&e[t],Tc=e=>"x"===e?"y":"x";function Oc(e,t,n,r){const s=e.skip?t:e,i=t,a=n.skip?t:n,o=al(i,s),l=al(a,i);let c=o/(o+l),d=l/(o+l);c=isNaN(c)?0:c,d=isNaN(d)?0:d;const u=r*c,h=r*d;return{previous:{x:i.x-u*(a.x-s.x),y:i.y-u*(a.y-s.y)},next:{x:i.x+h*(a.x-s.x),y:i.y+h*(a.y-s.y)}}}function Mc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const n=Tc(t),r=e.length,s=Array(r).fill(0),i=Array(r);let a,o,l,c=Pc(e,0);for(a=0;a<r;++a)if(o=l,l=c,c=Pc(e,a+1),l){if(c){const e=c[t]-l[t];s[a]=0!==e?(c[n]-l[n])/e:0}i[a]=o?c?Qo(s[a-1])!==Qo(s[a])?0:(s[a-1]+s[a])/2:s[a-1]:s[a]}!function(e,t,n){const r=e.length;let s,i,a,o,l,c=Pc(e,0);for(let d=0;d<r-1;++d)l=c,c=Pc(e,d+1),l&&c&&(Xo(t[d],0,Ac)?n[d]=n[d+1]=0:(s=n[d]/t[d],i=n[d+1]/t[d],o=Math.pow(s,2)+Math.pow(i,2),o<=9||(a=3/Math.sqrt(o),n[d]=s*a*t[d],n[d+1]=i*a*t[d])))}(e,s,i),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const r=Tc(n),s=e.length;let i,a,o,l=Pc(e,0);for(let c=0;c<s;++c){if(a=o,o=l,l=Pc(e,c+1),!o)continue;const s=o[n],d=o[r];a&&(i=(s-a[n])/3,o["cp1".concat(n)]=s-i,o["cp1".concat(r)]=d-i*t[c]),l&&(i=(l[n]-s)/3,o["cp2".concat(n)]=s+i,o["cp2".concat(r)]=d+i*t[c])}}(e,i,t)}function Ic(e,t,n){return Math.max(Math.min(e,n),t)}function Rc(e,t,n,r,s){let i,a,o,l;if(t.spanGaps&&(e=e.filter(e=>!e.skip)),"monotone"===t.cubicInterpolationMode)Mc(e,s);else{let n=r?e[e.length-1]:e[0];for(i=0,a=e.length;i<a;++i)o=e[i],l=Oc(n,o,e[Math.min(i+1,a-(r?0:1))%a],t.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,n=o}t.capBezierPoints&&function(e,t){let n,r,s,i,a,o=Jl(e[0],t);for(n=0,r=e.length;n<r;++n)a=i,i=o,o=n<r-1&&Jl(e[n+1],t),i&&(s=e[n],a&&(s.cp1x=Ic(s.cp1x,t.left,t.right),s.cp1y=Ic(s.cp1y,t.top,t.bottom)),o&&(s.cp2x=Ic(s.cp2x,t.left,t.right),s.cp2y=Ic(s.cp2y,t.top,t.bottom)))}(e,n)}function Lc(){return"undefined"!==typeof window&&"undefined"!==typeof document}function Dc(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function zc(e,t,n){let r;return"string"===typeof e?(r=parseInt(e,10),-1!==e.indexOf("%")&&(r=r/100*t.parentNode[n])):r=e,r}const Fc=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const Uc=["top","right","bottom","left"];function Bc(e,t,n){const r={};n=n?"-"+n:"";for(let s=0;s<4;s++){const i=Uc[s];r[i]=parseFloat(e[t+"-"+i+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}function Vc(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:r}=t,s=Fc(n),i="border-box"===s.boxSizing,a=Bc(s,"padding"),o=Bc(s,"border","width"),{x:l,y:c,box:d}=function(e,t){const n=e.touches,r=n&&n.length?n[0]:e,{offsetX:s,offsetY:i}=r;let a,o,l=!1;if(((e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot))(s,i,e.target))a=s,o=i;else{const e=t.getBoundingClientRect();a=r.clientX-e.left,o=r.clientY-e.top,l=!0}return{x:a,y:o,box:l}}(e,n),u=a.left+(d&&o.left),h=a.top+(d&&o.top);let{width:p,height:f}=t;return i&&(p-=a.width+o.width,f-=a.height+o.height),{x:Math.round((l-u)/p*n.width/r),y:Math.round((c-h)/f*n.height/r)}}const Wc=e=>Math.round(10*e)/10;function Hc(e,t,n,r){const s=Fc(e),i=Bc(s,"margin"),a=zc(s.maxWidth,e,"clientWidth")||qo,o=zc(s.maxHeight,e,"clientHeight")||qo,l=function(e,t,n){let r,s;if(void 0===t||void 0===n){const i=e&&Dc(e);if(i){const e=i.getBoundingClientRect(),a=Fc(i),o=Bc(a,"border","width"),l=Bc(a,"padding");t=e.width-l.width-o.width,n=e.height-l.height-o.height,r=zc(a.maxWidth,i,"clientWidth"),s=zc(a.maxHeight,i,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:r||qo,maxHeight:s||qo}}(e,t,n);let{width:c,height:d}=l;if("content-box"===s.boxSizing){const e=Bc(s,"border","width"),t=Bc(s,"padding");c-=t.width+e.width,d-=t.height+e.height}c=Math.max(0,c-i.width),d=Math.max(0,r?c/r:d-i.height),c=Wc(Math.min(c,a,l.maxWidth)),d=Wc(Math.min(d,o,l.maxHeight)),c&&!d&&(d=Wc(c/2));return(void 0!==t||void 0!==n)&&r&&l.height&&d>l.height&&(d=l.height,c=Wc(Math.floor(d*r))),{width:c,height:d}}function qc(e,t,n){const r=t||1,s=Math.floor(e.height*r),i=Math.floor(e.width*r);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const a=e.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height="".concat(e.height,"px"),a.style.width="".concat(e.width,"px")),(e.currentDevicePixelRatio!==r||a.height!==s||a.width!==i)&&(e.currentDevicePixelRatio=r,a.height=s,a.width=i,e.ctx.setTransform(r,0,0,r,0,0),!0)}const Kc=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};Lc()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(t){}return e}();function $c(e,t){const n=function(e,t){return Fc(e).getPropertyValue(t)}(e,t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Gc(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function Jc(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:"middle"===r?n<.5?e.y:t.y:"after"===r?n<1?e.y:t.y:n>0?t.y:e.y}}function Yc(e,t,n,r){const s={x:e.cp2x,y:e.cp2y},i={x:t.cp1x,y:t.cp1y},a=Gc(e,s,n),o=Gc(s,i,n),l=Gc(i,t,n),c=Gc(a,o,n),d=Gc(o,l,n);return Gc(c,d,n)}function Qc(e,t,n){return e?function(e,t){return{x:n=>e+e+t-n,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,n):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function Xc(e,t){let n,r;"ltr"!==t&&"rtl"!==t||(n=e.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=r)}function Zc(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function ed(e){return"angle"===e?{between:cl,compare:ol,normalize:ll}:{between:ul,compare:(e,t)=>e-t,normalize:e=>e}}function td(e){let{start:t,end:n,count:r,loop:s,style:i}=e;return{start:t%r,end:n%r,loop:s&&(n-t+1)%r===0,style:i}}function nd(e,t,n){if(!n)return[e];const{property:r,start:s,end:i}=n,a=t.length,{compare:o,between:l,normalize:c}=ed(r),{start:d,end:u,loop:h,style:p}=function(e,t,n){const{property:r,start:s,end:i}=n,{between:a,normalize:o}=ed(r),l=t.length;let c,d,{start:u,end:h,loop:p}=e;if(p){for(u+=l,h+=l,c=0,d=l;c<d&&a(o(t[u%l][r]),s,i);++c)u--,h--;u%=l,h%=l}return h<u&&(h+=l),{start:u,end:h,loop:p,style:e.style}}(e,t,n),f=[];let g,m,y,x=!1,b=null;const v=()=>x||l(s,y,g)&&0!==o(s,y),w=()=>!x||0===o(i,g)||l(i,y,g);for(let _=d,k=d;_<=u;++_)m=t[_%a],m.skip||(g=c(m[r]),g!==y&&(x=l(g,s,i),null===b&&v()&&(b=0===o(g,s)?_:k),null!==b&&w()&&(f.push(td({start:b,end:_,loop:h,count:a,style:p})),b=null),k=_,y=g));return null!==b&&f.push(td({start:b,end:u,loop:h,count:a,style:p})),f}function rd(e,t){const n=[],r=e.segments;for(let s=0;s<r.length;s++){const i=nd(r[s],e.points,t);i.length&&n.push(...i)}return n}function sd(e,t,n,r){return r&&r.setContext&&n?function(e,t,n,r){const s=e._chart.getContext(),i=id(e.options),{_datasetIndex:a,options:{spanGaps:o}}=e,l=n.length,c=[];let d=i,u=t[0].start,h=u;function p(e,t,r,s){const i=o?-1:1;if(e!==t){for(e+=l;n[e%l].skip;)e-=i;for(;n[t%l].skip;)t+=i;e%l!==t%l&&(c.push({start:e%l,end:t%l,loop:r,style:s}),d=s,u=t%l)}}for(const f of t){u=o?u:f.start;let e,t=n[u%l];for(h=u+1;h<=f.end;h++){const i=n[h%l];e=id(r.setContext(fc(s,{type:"segment",p0:t,p1:i,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:a}))),ad(e,d)&&p(u,h-1,f.loop,d),t=i,d=e}u<h-1&&p(u,h-1,f.loop,d)}return c}(e,t,n,r):t}function id(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function ad(e,t){if(!t)return!1;const n=[],r=function(e,t){return El(t)?(n.includes(t)||n.push(t),n.indexOf(t)):t};return JSON.stringify(e,r)!==JSON.stringify(t,r)}function od(e,t,n){return e.options.clip?e[n]:t[n]}function ld(e,t){const n=t._clip;if(n.disabled)return!1;const r=function(e,t){const{xScale:n,yScale:r}=e;return n&&r?{left:od(n,t,"left"),right:od(n,t,"right"),top:od(r,t,"top"),bottom:od(r,t,"bottom")}:t}(t,e.chartArea);return{left:!1===n.left?0:r.left-(!0===n.left?0:n.left),right:!1===n.right?e.width:r.right+(!0===n.right?0:n.right),top:!1===n.top?0:r.top-(!0===n.top?0:n.top),bottom:!1===n.bottom?e.height:r.bottom+(!0===n.bottom?0:n.bottom)}}class cd{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,r){const s=t.listeners[r],i=t.duration;s.forEach(r=>r({chart:e,initial:t.initial,numSteps:i,currentStep:Math.min(n-t.start,i)}))}_refresh(){this._request||(this._running=!0,this._request=xl.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach((n,r)=>{if(!n.running||!n.items.length)return;const s=n.items;let i,a=s.length-1,o=!1;for(;a>=0;--a)i=s[a],i._active?(i._total>n.duration&&(n.duration=i._total),i.tick(e),o=!0):(s[a]=s[s.length-1],s.pop());o&&(r.draw(),this._notify(r,n,e,"progress")),s.length||(n.running=!1,this._notify(r,n,e,"complete"),n.initial=!1),t+=s.length}),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((e,t)=>Math.max(e,t._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var dd=new cd;const ud="transparent",hd={boolean:(e,t,n)=>n>.5?t:e,color(e,t,n){const r=Al(e||ud),s=r.valid&&Al(t||ud);return s&&s.valid?s.mix(r,n).hexString():t},number:(e,t,n)=>e+(t-e)*n};class pd{constructor(e,t,n,r){const s=t[n];r=pc([e.to,r,s,e.from]);const i=pc([e.from,s,r]);this._active=!0,this._fn=e.fn||hd[e.type||typeof i],this._easing=Cl[e.easing]||Cl.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=i,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const r=this._target[this._prop],s=n-this._start,i=this._duration-s;this._start=n,this._duration=Math.floor(Math.max(i,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=pc([e.to,t,r,e.from]),this._from=pc([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,r=this._prop,s=this._from,i=this._loop,a=this._to;let o;if(this._active=s!==a&&(i||t<n),!this._active)return this._target[r]=a,void this._notify(!0);t<0?this._target[r]=s:(o=t/n%2,o=i&&o>1?2-o:o,o=this._easing(Math.min(1,Math.max(0,o))),this._target[r]=this._fn(s,a,o))}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,n)=>{e.push({res:t,rej:n})})}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][t]()}}class fd{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!_o(e))return;const t=Object.keys(Vl.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const s=e[r];if(!_o(s))return;const i={};for(const e of t)i[e]=s[e];(wo(s.properties)&&s.properties||[r]).forEach(e=>{e!==r&&n.has(e)||n.set(e,i)})})}_animateOptions(e,t){const n=t.options,r=function(e,t){if(!t)return;let n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!r)return[];const s=this._createAnimations(r,n);return n.$shared&&function(e,t){const n=[],r=Object.keys(t);for(let s=0;s<r.length;s++){const t=e[r[s]];t&&t.active()&&n.push(t.wait())}return Promise.all(n)}(e.options.$animations,n).then(()=>{e.options=n},()=>{}),s}_createAnimations(e,t){const n=this._properties,r=[],s=e.$animations||(e.$animations={}),i=Object.keys(t),a=Date.now();let o;for(o=i.length-1;o>=0;--o){const l=i[o];if("$"===l.charAt(0))continue;if("options"===l){r.push(...this._animateOptions(e,t));continue}const c=t[l];let d=s[l];const u=n.get(l);if(d){if(u&&d.active()){d.update(u,c,a);continue}d.cancel()}u&&u.duration?(s[l]=d=new pd(u,e,l,c),r.push(d)):e[l]=c}return r}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const n=this._createAnimations(e,t);return n.length?(dd.add(this._chart,n),!0):void 0}}function gd(e,t){const n=e&&e.options||{},r=n.reverse,s=void 0===n.min?t:0,i=void 0===n.max?t:0;return{start:r?i:s,end:r?s:i}}function md(e,t){const n=[],r=e._getSortedDatasetMetas(t);let s,i;for(s=0,i=r.length;s<i;++s)n.push(r[s].index);return n}function yd(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const s=e.keys,i="single"===r.mode;let a,o,l,c;if(null===t)return;let d=!1;for(a=0,o=s.length;a<o;++a){if(l=+s[a],l===n){if(d=!0,r.all)continue;break}c=e.values[l],ko(c)&&(i||0===t||Qo(t)===Qo(c))&&(t+=c)}return d||r.all?t:0}function xd(e,t){const n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function bd(e,t,n){const r=e[t]||(e[t]={});return r[n]||(r[n]={})}function vd(e,t,n,r){for(const s of t.getMatchingVisibleMetas(r).reverse()){const t=e[s.index];if(n&&t>0||!n&&t<0)return s.index}return null}function wd(e,t){const{chart:n,_cachedMeta:r}=e,s=n._stacks||(n._stacks={}),{iScale:i,vScale:a,index:o}=r,l=i.axis,c=a.axis,d=function(e,t,n){return"".concat(e.id,".").concat(t.id,".").concat(n.stack||n.type)}(i,a,r),u=t.length;let h;for(let p=0;p<u;++p){const e=t[p],{[l]:n,[c]:i}=e;h=(e._stacks||(e._stacks={}))[c]=bd(s,d,n),h[o]=i,h._top=vd(h,a,!0,r.type),h._bottom=vd(h,a,!1,r.type);(h._visualValues||(h._visualValues={}))[o]=i}}function _d(e,t){const n=e.scales;return Object.keys(n).filter(e=>n[e].axis===t).shift()}function kd(e,t){const n=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[r]||void 0===t[r][n])return;delete t[r][n],void 0!==t[r]._visualValues&&void 0!==t[r]._visualValues[n]&&delete t[r]._visualValues[n]}}}const jd=e=>"reset"===e||"none"===e,Sd=(e,t)=>t?e:Object.assign({},e);class Nd{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=xd(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&kd(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),r=(e,t,n,r)=>"x"===e?t:"r"===e?r:n,s=t.xAxisID=So(n.xAxisID,_d(e,"x")),i=t.yAxisID=So(n.yAxisID,_d(e,"y")),a=t.rAxisID=So(n.rAxisID,_d(e,"r")),o=t.indexAxis,l=t.iAxisID=r(o,s,i,a),c=t.vAxisID=r(o,i,s,a);t.xScale=this.getScaleForId(s),t.yScale=this.getScaleForId(i),t.rScale=this.getScaleForId(a),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&ml(this._data,this),e._stacked&&kd(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(_o(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:n,vScale:r}=t,s="x"===n.axis?"x":"y",i="x"===r.axis?"x":"y",a=Object.keys(e),o=new Array(a.length);let l,c,d;for(l=0,c=a.length;l<c;++l)d=a[l],o[l]={[s]:d,[i]:e[d]};return o}(t,e)}else if(n!==t){if(n){ml(n,this);const e=this._cachedMeta;kd(e),e._parsed=[]}t&&Object.isExtensible(t)&&(s=this,(r=t)._chartjs?r._chartjs.listeners.push(s):(Object.defineProperty(r,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[s]}}),gl.forEach(e=>{const t="_onData"+zo(e),n=r[e];Object.defineProperty(r,e,{configurable:!0,enumerable:!1,value(){for(var e=arguments.length,s=new Array(e),i=0;i<e;i++)s[i]=arguments[i];const a=n.apply(this,s);return r._chartjs.listeners.forEach(e=>{"function"===typeof e[t]&&e[t](...s)}),a}})}))),this._syncList=[],this._data=t}var r,s}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const s=t._stacked;t._stacked=xd(t.vScale,t),t.stack!==n.stack&&(r=!0,kd(t),t.stack=n.stack),this._resyncElements(e),(r||s!==t._stacked)&&(wd(this,t._parsed),t._stacked=xd(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:r}=this,{iScale:s,_stacked:i}=n,a=s.axis;let o,l,c,d=0===e&&t===r.length||n._sorted,u=e>0&&n._parsed[e-1];if(!1===this._parsing)n._parsed=r,n._sorted=!0,c=r;else{c=wo(r[e])?this.parseArrayData(n,r,e,t):_o(r[e])?this.parseObjectData(n,r,e,t):this.parsePrimitiveData(n,r,e,t);const s=()=>null===l[a]||u&&l[a]<u[a];for(o=0;o<t;++o)n._parsed[o+e]=l=c[o],d&&(s()&&(d=!1),u=l);n._sorted=d}i&&wd(this,c)}parsePrimitiveData(e,t,n,r){const{iScale:s,vScale:i}=e,a=s.axis,o=i.axis,l=s.getLabels(),c=s===i,d=new Array(r);let u,h,p;for(u=0,h=r;u<h;++u)p=u+n,d[u]={[a]:c||s.parse(l[p],p),[o]:i.parse(t[p],p)};return d}parseArrayData(e,t,n,r){const{xScale:s,yScale:i}=e,a=new Array(r);let o,l,c,d;for(o=0,l=r;o<l;++o)c=o+n,d=t[c],a[o]={x:s.parse(d[0],c),y:i.parse(d[1],c)};return a}parseObjectData(e,t,n,r){const{xScale:s,yScale:i}=e,{xAxisKey:a="x",yAxisKey:o="y"}=this._parsing,l=new Array(r);let c,d,u,h;for(c=0,d=r;c<d;++c)u=c+n,h=t[u],l[c]={x:s.parse(Do(h,a),u),y:i.parse(Do(h,o),u)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const r=this.chart,s=this._cachedMeta,i=t[e.axis];return yd({keys:md(r,!0),values:t._stacks[e.axis]._visualValues},i,s.index,{mode:n})}updateRangeFromParsed(e,t,n,r){const s=n[t.axis];let i=null===s?NaN:s;const a=r&&n._stacks[t.axis];r&&a&&(r.values=a,i=yd(r,s,this._cachedMeta.index)),e.min=Math.min(e.min,i),e.max=Math.max(e.max,i)}getMinMax(e,t){const n=this._cachedMeta,r=n._parsed,s=n._sorted&&e===n.iScale,i=r.length,a=this._getOtherScale(e),o=((e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:md(n,!0),values:null})(t,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:d}=function(e){const{min:t,max:n,minDefined:r,maxDefined:s}=e.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}(a);let u,h;function p(){h=r[u];const t=h[a.axis];return!ko(h[e.axis])||c>t||d<t}for(u=0;u<i&&(p()||(this.updateRangeFromParsed(l,e,h,o),!s));++u);if(s)for(u=i-1;u>=0;--u)if(!p()){this.updateRangeFromParsed(l,e,h,o);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let r,s,i;for(r=0,s=t.length;r<s;++r)i=t[r][e.axis],ko(i)&&n.push(i);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,r=t.vScale,s=this.getParsed(e);return{label:n?""+n.getLabelForValue(s[n.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,n,r,s;return _o(e)?(t=e.top,n=e.right,r=e.bottom,s=e.left):t=n=r=s=e,{top:t,right:n,bottom:r,left:s,disabled:!1===e}}(So(this.options.clip,function(e,t,n){if(!1===n)return!1;const r=gd(e,n),s=gd(t,n);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,r=n.data||[],s=t.chartArea,i=[],a=this._drawStart||0,o=this._drawCount||r.length-a,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(e,s,a,o),c=a;c<a+o;++c){const t=r[c];t.hidden||(t.active&&l?i.push(t):t.draw(e,s))}for(c=0;c<i.length;++c)i[c].draw(e,s)}getStyle(e,t){const n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const r=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];s=t.$context||(t.$context=function(e,t,n){return fc(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),s.parsed=this.getParsed(e),s.raw=r.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=function(e,t){return fc(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!t,s.mode=n,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;const r="active"===t,s=this._cachedDataOpts,i=e+"-"+t,a=s[i],o=this.enableOptionSharing&&Fo(n);if(a)return Sd(a,o);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),d=r?["".concat(e,"Hover"),"hover",e,""]:[e,""],u=l.getOptionScopes(this.getDataset(),c),h=Object.keys(Vl.elements[e]),p=l.resolveNamedOptions(u,h,()=>this.getContext(n,r,t),d);return p.$shared&&(p.$shared=o,s[i]=Object.freeze(Sd(p,o))),p}_resolveAnimations(e,t,n){const r=this.chart,s=this._cachedDataOpts,i="animation-".concat(t),a=s[i];if(a)return a;let o;if(!1!==r.options.animation){const r=this.chart.config,s=r.datasetAnimationScopeKeys(this._type,t),i=r.getOptionScopes(this.getDataset(),s);o=r.createResolver(i,this.getContext(e,n,t))}const l=new fd(r,o&&o.animations);return o&&o._cacheable&&(s[i]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||jd(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),r=this._sharedOptions,s=this.getSharedOptions(n),i=this.includeOptions(t,s)||s!==r;return this.updateSharedOptions(s,t,n),{sharedOptions:s,includeOptions:i}}updateElement(e,t,n,r){jd(r)?Object.assign(e,n):this._resolveAnimations(t,r).update(e,n)}updateSharedOptions(e,t,n){e&&!jd(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,r){e.active=r;const s=this.getStyle(t,r);this._resolveAnimations(t,n,r).update(e,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[a,o,l]of this._syncList)this[a](o,l);this._syncList=[];const r=n.length,s=t.length,i=Math.min(s,r);i&&this.parse(0,i),s>r?this._insertElements(r,s-r,e):s<r&&this._removeElements(s,r-s)}_insertElements(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=this._cachedMeta,s=r.data,i=e+t;let a;const o=e=>{for(e.length+=t,a=e.length-1;a>=i;a--)e[a]=e[a-t]};for(o(s),a=e;a<i;++a)s[a]=new this.dataElementType;this._parsing&&o(r._parsed),this.parse(e,t),n&&this.updateElements(s,e,t,"reset")}updateElements(e,t,n,r){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(e,t);n._stacked&&kd(n,r)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,r]=e;this[t](n,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function Cd(e){const t=e.iScale,n=function(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let r=[];for(let t=0,s=n.length;t<s;t++)r=r.concat(n[t].controller.getAllParsedValues(e));e._cache.$bar=yl(r.sort((e,t)=>e-t))}return e._cache.$bar}(t,e.type);let r,s,i,a,o=t._length;const l=()=>{32767!==i&&-32768!==i&&(Fo(a)&&(o=Math.min(o,Math.abs(i-a)||o)),a=i)};for(r=0,s=n.length;r<s;++r)i=t.getPixelForValue(n[r]),l();for(a=void 0,r=0,s=t.ticks.length;r<s;++r)i=t.getPixelForTick(r),l();return o}function Ed(e,t,n,r){return wo(e)?function(e,t,n,r){const s=n.parse(e[0],r),i=n.parse(e[1],r),a=Math.min(s,i),o=Math.max(s,i);let l=a,c=o;Math.abs(a)>Math.abs(o)&&(l=o,c=a),t[n.axis]=c,t._custom={barStart:l,barEnd:c,start:s,end:i,min:a,max:o}}(e,t,n,r):t[n.axis]=n.parse(e,r),t}function Ad(e,t,n,r){const s=e.iScale,i=e.vScale,a=s.getLabels(),o=s===i,l=[];let c,d,u,h;for(c=n,d=n+r;c<d;++c)h=t[c],u={},u[s.axis]=o||s.parse(a[c],c),l.push(Ed(h,u,i,c));return l}function Pd(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function Td(e,t,n,r){let s=t.borderSkipped;const i={};if(!s)return void(e.borderSkipped=i);if(!0===s)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:a,end:o,reverse:l,top:c,bottom:d}=function(e){let t,n,r,s,i;return e.horizontal?(t=e.base>e.x,n="left",r="right"):(t=e.base<e.y,n="bottom",r="top"),t?(s="end",i="start"):(s="start",i="end"),{start:n,end:r,reverse:t,top:s,bottom:i}}(e);"middle"===s&&n&&(e.enableBorderRadius=!0,(n._top||0)===r?s=c:(n._bottom||0)===r?s=d:(i[Od(d,a,o,l)]=!0,s=c)),i[Od(s,a,o,l)]=!0,e.borderSkipped=i}function Od(e,t,n,r){var s,i,a;return r?(a=n,e=Md(e=(s=e)===(i=t)?a:s===a?i:s,n,t)):e=Md(e,t,n),e}function Md(e,t,n){return"start"===e?t:"end"===e?n:e}function Id(e,t,n){let{inflateAmount:r}=t;e.inflateAmount="auto"===r?1===n?.33:0:r}(0,Da.A)(Nd,"defaults",{}),(0,Da.A)(Nd,"datasetElementType",null),(0,Da.A)(Nd,"dataElementType",null);class Rd extends Nd{parsePrimitiveData(e,t,n,r){return Ad(e,t,n,r)}parseArrayData(e,t,n,r){return Ad(e,t,n,r)}parseObjectData(e,t,n,r){const{iScale:s,vScale:i}=e,{xAxisKey:a="x",yAxisKey:o="y"}=this._parsing,l="x"===s.axis?a:o,c="x"===i.axis?a:o,d=[];let u,h,p,f;for(u=n,h=n+r;u<h;++u)f=t[u],p={},p[s.axis]=s.parse(Do(f,l),u),d.push(Ed(Do(f,c),p,i,u));return d}updateRangeFromParsed(e,t,n,r){super.updateRangeFromParsed(e,t,n,r);const s=n._custom;s&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:n,vScale:r}=t,s=this.getParsed(e),i=s._custom,a=Pd(i)?"["+i.start+", "+i.end+"]":""+r.getLabelForValue(s[r.axis]);return{label:""+n.getLabelForValue(s[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,n,r){const s="reset"===r,{index:i,_cachedMeta:{vScale:a}}=this,o=a.getBasePixel(),l=a.isHorizontal(),c=this._getRuler(),{sharedOptions:d,includeOptions:u}=this._getSharedOptions(t,r);for(let h=t;h<t+n;h++){const t=this.getParsed(h),n=s||vo(t[a.axis])?{base:o,head:o}:this._calculateBarValuePixels(h),p=this._calculateBarIndexPixels(h,c),f=(t._stacks||{})[a.axis],g={horizontal:l,base:n.base,enableBorderRadius:!f||Pd(t._custom)||i===f._top||i===f._bottom,x:l?n.head:p.center,y:l?p.center:n.head,height:l?p.size:Math.abs(n.size),width:l?Math.abs(n.size):p.size};u&&(g.options=d||this.resolveDataElementOptions(h,e[h].active?"active":r));const m=g.options||e[h].options;Td(g,m,f,i),Id(g,m,c.ratio),this.updateElement(e[h],h,g,r)}}_getStacks(e,t){const{iScale:n}=this._cachedMeta,r=n.getMatchingVisibleMetas(this._type).filter(e=>e.controller.options.grouped),s=n.options.stacked,i=[],a=this._cachedMeta.controller.getParsed(t),o=a&&a[n.axis],l=e=>{const t=e._parsed.find(e=>e[n.axis]===o),r=t&&t[e.vScale.axis];if(vo(r)||isNaN(r))return!0};for(const c of r)if((void 0===t||!l(c))&&((!1===s||-1===i.indexOf(c.stack)||void 0===s&&void 0===c.stack)&&i.push(c.stack),c.index===e))break;return i.length||i.push(void 0),i}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(n=>e[n].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)e[So("x"===this.chart.options.indexAxis?n.xAxisID:n.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,n){const r=this._getStacks(e,n),s=void 0!==t?r.indexOf(t):-1;return-1===s?r.length-1:s}_getRuler(){const e=this.options,t=this._cachedMeta,n=t.iScale,r=[];let s,i;for(s=0,i=t.data.length;s<i;++s)r.push(n.getPixelForValue(this.getParsed(s)[n.axis],s));const a=e.barThickness;return{min:a||Cd(t),pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:n,index:r},options:{base:s,minBarLength:i}}=this,a=s||0,o=this.getParsed(e),l=o._custom,c=Pd(l);let d,u,h=o[t.axis],p=0,f=n?this.applyStack(t,o,n):h;f!==h&&(p=f-h,f=h),c&&(h=l.barStart,f=l.barEnd-l.barStart,0!==h&&Qo(h)!==Qo(l.barEnd)&&(p=0),p+=h);const g=vo(s)||c?p:s;let m=t.getPixelForValue(g);if(d=this.chart.getDataVisibility(e)?t.getPixelForValue(p+f):m,u=d-m,Math.abs(u)<i){u=function(e,t,n){return 0!==e?Qo(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}(u,t,a)*i,h===a&&(m-=u/2);const e=t.getPixelForDecimal(0),s=t.getPixelForDecimal(1),l=Math.min(e,s),p=Math.max(e,s);m=Math.max(Math.min(m,p),l),d=m+u,n&&!c&&(o._stacks[t.axis]._visualValues[r]=t.getValueForPixel(d)-t.getValueForPixel(m))}if(m===t.getPixelForValue(a)){const e=Qo(u)*t.getLineWidthForValue(a)/2;m+=e,u-=e}return{size:u,base:m,head:d,center:d+u/2}}_calculateBarIndexPixels(e,t){const n=t.scale,r=this.options,s=r.skipNull,i=So(r.maxBarThickness,1/0);let a,o;const l=this._getAxisCount();if(t.grouped){const n=s?this._getStackCount(e):t.stackCount,c="flex"===r.barThickness?function(e,t,n,r){const s=t.pixels,i=s[e];let a=e>0?s[e-1]:null,o=e<s.length-1?s[e+1]:null;const l=n.categoryPercentage;null===a&&(a=i-(null===o?t.end-t.start:o-i)),null===o&&(o=i+i-a);const c=i-(i-Math.min(a,o))/2*l;return{chunk:Math.abs(o-a)/2*l/r,ratio:n.barPercentage,start:c}}(e,t,r,n*l):function(e,t,n,r){const s=n.barThickness;let i,a;return vo(s)?(i=t.min*n.categoryPercentage,a=n.barPercentage):(i=s*r,a=1),{chunk:i/r,ratio:a,start:t.pixels[e]-i/2}}(e,t,r,n*l),d="x"===this.chart.options.indexAxis?this.getDataset().xAxisID:this.getDataset().yAxisID,u=this._getAxis().indexOf(So(d,this.getFirstScaleIdForIndexAxis())),h=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0)+u;a=c.start+c.chunk*h+c.chunk/2,o=Math.min(i,c.chunk*c.ratio)}else a=n.getPixelForValue(this.getParsed(e)[n.axis],e),o=Math.min(i,t.min*t.ratio);return{base:a-o/2,head:a+o/2,center:a,size:o}}draw(){const e=this._cachedMeta,t=e.vScale,n=e.data,r=n.length;let s=0;for(;s<r;++s)null===this.getParsed(s)[t.axis]||n[s].hidden||n[s].draw(this._ctx)}}(0,Da.A)(Rd,"id","bar"),(0,Da.A)(Rd,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),(0,Da.A)(Rd,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Ld extends Nd{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,n,r){const s=super.parsePrimitiveData(e,t,n,r);for(let i=0;i<s.length;i++)s[i]._custom=this.resolveDataElementOptions(i+n).radius;return s}parseArrayData(e,t,n,r){const s=super.parseArrayData(e,t,n,r);for(let i=0;i<s.length;i++){const e=t[n+i];s[i]._custom=So(e[2],this.resolveDataElementOptions(i+n).radius)}return s}parseObjectData(e,t,n,r){const s=super.parseObjectData(e,t,n,r);for(let i=0;i<s.length;i++){const e=t[n+i];s[i]._custom=So(e&&e.r&&+e.r,this.resolveDataElementOptions(i+n).radius)}return s}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:s}=t,i=this.getParsed(e),a=r.getLabelForValue(i.x),o=s.getLabelForValue(i.y),l=i._custom;return{label:n[e]||"",value:"("+a+", "+o+(l?", "+l:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,n,r){const s="reset"===r,{iScale:i,vScale:a}=this._cachedMeta,{sharedOptions:o,includeOptions:l}=this._getSharedOptions(t,r),c=i.axis,d=a.axis;for(let u=t;u<t+n;u++){const t=e[u],n=!s&&this.getParsed(u),h={},p=h[c]=s?i.getPixelForDecimal(.5):i.getPixelForValue(n[c]),f=h[d]=s?a.getBasePixel():a.getPixelForValue(n[d]);h.skip=isNaN(p)||isNaN(f),l&&(h.options=o||this.resolveDataElementOptions(u,t.active?"active":r),s&&(h.options.radius=0)),this.updateElement(t,u,h,r)}}resolveDataElementOptions(e,t){const n=this.getParsed(e);let r=super.resolveDataElementOptions(e,t);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const s=r.radius;return"active"!==t&&(r.radius=0),r.radius+=So(n&&n._custom,s),r}}(0,Da.A)(Ld,"id","bubble"),(0,Da.A)(Ld,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),(0,Da.A)(Ld,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class Dd extends Nd{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const n=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=n;else{let s,i,a=e=>+n[e];if(_o(n[e])){const{key:e="value"}=this._parsing;a=t=>+Do(n[t],e)}for(s=e,i=e+t;s<i;++s)r._parsed[s]=a(s)}}_getRotation(){return nl(this.options.rotation-90)}_getCircumference(){return nl(this.options.circumference)}_getRotationExtents(){let e=Wo,t=-Wo;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const r=this.chart.getDatasetMeta(n).controller,s=r._getRotation(),i=r._getCircumference();e=Math.min(e,s),t=Math.max(t,s+i)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:n}=t,r=this._cachedMeta,s=r.data,i=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-i)/2,0),o=Math.min((l=this.options.cutout,c=a,"string"===typeof l&&l.endsWith("%")?parseFloat(l)/100:+l/c),1);var l,c;const d=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:p,ratioY:f,offsetX:g,offsetY:m}=function(e,t,n){let r=1,s=1,i=0,a=0;if(t<Wo){const o=e,l=o+t,c=Math.cos(o),d=Math.sin(o),u=Math.cos(l),h=Math.sin(l),p=(e,t,r)=>cl(e,o,l,!0)?1:Math.max(t,t*n,r,r*n),f=(e,t,r)=>cl(e,o,l,!0)?-1:Math.min(t,t*n,r,r*n),g=p(0,c,u),m=p($o,d,h),y=f(Vo,c,u),x=f(Vo+$o,d,h);r=(g-y)/2,s=(m-x)/2,i=-(g+y)/2,a=-(m+x)/2}return{ratioX:r,ratioY:s,offsetX:i,offsetY:a}}(h,u,o),y=(n.width-i)/p,x=(n.height-i)/f,b=Math.max(Math.min(y,x)/2,0),v=No(this.options.radius,b),w=(v-Math.max(v*o,0))/this._getVisibleDatasetWeightTotal();this.offsetX=g*v,this.offsetY=m*v,r.total=this.calculateTotal(),this.outerRadius=v-w*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-w*d,0),this.updateElements(s,0,s.length,e)}_circumference(e,t){const n=this.options,r=this._cachedMeta,s=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===r._parsed[e]||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*s/Wo)}updateElements(e,t,n,r){const s="reset"===r,i=this.chart,a=i.chartArea,o=i.options.animation,l=(a.left+a.right)/2,c=(a.top+a.bottom)/2,d=s&&o.animateScale,u=d?0:this.innerRadius,h=d?0:this.outerRadius,{sharedOptions:p,includeOptions:f}=this._getSharedOptions(t,r);let g,m=this._getRotation();for(g=0;g<t;++g)m+=this._circumference(g,s);for(g=t;g<t+n;++g){const t=this._circumference(g,s),n=e[g],i={x:l+this.offsetX,y:c+this.offsetY,startAngle:m,endAngle:m+t,circumference:t,outerRadius:h,innerRadius:u};f&&(i.options=p||this.resolveDataElementOptions(g,n.active?"active":r)),m+=t,this.updateElement(n,g,i,r)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let n,r=0;for(n=0;n<t.length;n++){const s=e._parsed[n];null===s||isNaN(s)||!this.chart.getDataVisibility(n)||t[n].hidden||(r+=Math.abs(s))}return r}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?Wo*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],s=Il(t._parsed[e],n.options.locale);return{label:r[e]||"",value:s}}getMaxBorderWidth(e){let t=0;const n=this.chart;let r,s,i,a,o;if(!e)for(r=0,s=n.data.datasets.length;r<s;++r)if(n.isDatasetVisible(r)){i=n.getDatasetMeta(r),e=i.data,a=i.controller;break}if(!e)return 0;for(r=0,s=e.length;r<s;++r)o=a.resolveDataElementOptions(r),"inner"!==o.borderAlign&&(t=Math.max(t,o.borderWidth||0,o.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let n=0,r=e.length;n<r;++n){const e=this.resolveDataElementOptions(n);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}_getRingWeight(e){return Math.max(So(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}(0,Da.A)(Dd,"id","doughnut"),(0,Da.A)(Dd,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),(0,Da.A)(Dd,"descriptors",{_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),(0,Da.A)(Dd,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:r}}=e.legend.options;return t.labels.map((t,s)=>{const i=e.getDatasetMeta(0).controller.getStyle(s);return{text:t,fillStyle:i.backgroundColor,strokeStyle:i.borderColor,fontColor:r,lineWidth:i.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(s),index:s}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}}});class zd extends Nd{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:r=[],_dataset:s}=t,i=this.chart._animationsDisabled;let{start:a,count:o}=_l(t,r,i);this._drawStart=a,this._drawCount=o,kl(t)&&(a=0,o=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!s._decimated,n.points=r;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!i,options:l},e),this.updateElements(r,a,o,e)}updateElements(e,t,n,r){const s="reset"===r,{iScale:i,vScale:a,_stacked:o,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:d}=this._getSharedOptions(t,r),u=i.axis,h=a.axis,{spanGaps:p,segment:f}=this.options,g=el(p)?p:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||s||"none"===r,y=t+n,x=e.length;let b=t>0&&this.getParsed(t-1);for(let v=0;v<x;++v){const n=e[v],p=m?n:{};if(v<t||v>=y){p.skip=!0;continue}const x=this.getParsed(v),w=vo(x[h]),_=p[u]=i.getPixelForValue(x[u],v),k=p[h]=s||w?a.getBasePixel():a.getPixelForValue(o?this.applyStack(a,x,o):x[h],v);p.skip=isNaN(_)||isNaN(k)||w,p.stop=v>0&&Math.abs(x[u]-b[u])>g,f&&(p.parsed=x,p.raw=l.data[v]),d&&(p.options=c||this.resolveDataElementOptions(v,n.active?"active":r)),m||this.updateElement(n,v,p,r),b=x}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,r=e.data||[];if(!r.length)return n;const s=r[0].size(this.resolveDataElementOptions(0)),i=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,s,i)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}(0,Da.A)(zd,"id","line"),(0,Da.A)(zd,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),(0,Da.A)(zd,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Fd extends Nd{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],s=Il(t._parsed[e].r,n.options.locale);return{label:r[e]||"",value:s}}parseObjectData(e,t,n,r){return Ec.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((e,n)=>{const r=this.getParsed(n).r;!isNaN(r)&&this.chart.getDataVisibility(n)&&(r<t.min&&(t.min=r),r>t.max&&(t.max=r))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,n=e.options,r=Math.min(t.right-t.left,t.bottom-t.top),s=Math.max(r/2,0),i=(s-Math.max(n.cutoutPercentage?s/100*n.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=s-i*this.index,this.innerRadius=this.outerRadius-i}updateElements(e,t,n,r){const s="reset"===r,i=this.chart,a=i.options.animation,o=this._cachedMeta.rScale,l=o.xCenter,c=o.yCenter,d=o.getIndexAngle(0)-.5*Vo;let u,h=d;const p=360/this.countVisibleElements();for(u=0;u<t;++u)h+=this._computeAngle(u,r,p);for(u=t;u<t+n;u++){const t=e[u];let n=h,f=h+this._computeAngle(u,r,p),g=i.getDataVisibility(u)?o.getDistanceFromCenterForValue(this.getParsed(u).r):0;h=f,s&&(a.animateScale&&(g=0),a.animateRotate&&(n=f=d));const m={x:l,y:c,innerRadius:0,outerRadius:g,startAngle:n,endAngle:f,options:this.resolveDataElementOptions(u,t.active?"active":r)};this.updateElement(t,u,m,r)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((e,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&t++}),t}_computeAngle(e,t,n){return this.chart.getDataVisibility(e)?nl(this.resolveDataElementOptions(e,t).angle||n):0}}(0,Da.A)(Fd,"id","polarArea"),(0,Da.A)(Fd,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),(0,Da.A)(Fd,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:r}}=e.legend.options;return t.labels.map((t,s)=>{const i=e.getDatasetMeta(0).controller.getStyle(s);return{text:t,fillStyle:i.backgroundColor,strokeStyle:i.borderColor,fontColor:r,lineWidth:i.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(s),index:s}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Ud extends Dd{}(0,Da.A)(Ud,"id","pie"),(0,Da.A)(Ud,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Bd extends Nd{getLabelAndValue(e){const t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}parseObjectData(e,t,n,r){return Ec.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta,n=t.dataset,r=t.data||[],s=t.iScale.getLabels();if(n.points=r,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const i={_loop:!0,_fullLoop:s.length===r.length,options:t};this.updateElement(n,void 0,i,e)}this.updateElements(r,0,r.length,e)}updateElements(e,t,n,r){const s=this._cachedMeta.rScale,i="reset"===r;for(let a=t;a<t+n;a++){const t=e[a],n=this.resolveDataElementOptions(a,t.active?"active":r),o=s.getPointPositionForValue(a,this.getParsed(a).r),l=i?s.xCenter:o.x,c=i?s.yCenter:o.y,d={x:l,y:c,angle:o.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(t,a,d,r)}}}(0,Da.A)(Bd,"id","radar"),(0,Da.A)(Bd,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),(0,Da.A)(Bd,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Vd extends Nd{getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:s}=t,i=this.getParsed(e),a=r.getLabelForValue(i.x),o=s.getLabelForValue(i.y);return{label:n[e]||"",value:"("+a+", "+o+")"}}update(e){const t=this._cachedMeta,{data:n=[]}=t,r=this.chart._animationsDisabled;let{start:s,count:i}=_l(t,n,r);if(this._drawStart=s,this._drawCount=i,kl(t)&&(s=0,i=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:s,_dataset:i}=t;s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!i._decimated,s.points=n;const a=this.resolveDatasetElementOptions(e);a.segment=this.options.segment,this.updateElement(s,void 0,{animated:!r,options:a},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(n,s,i,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,n,r){const s="reset"===r,{iScale:i,vScale:a,_stacked:o,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(t,r),d=this.getSharedOptions(c),u=this.includeOptions(r,d),h=i.axis,p=a.axis,{spanGaps:f,segment:g}=this.options,m=el(f)?f:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||s||"none"===r;let x=t>0&&this.getParsed(t-1);for(let b=t;b<t+n;++b){const t=e[b],n=this.getParsed(b),c=y?t:{},f=vo(n[p]),v=c[h]=i.getPixelForValue(n[h],b),w=c[p]=s||f?a.getBasePixel():a.getPixelForValue(o?this.applyStack(a,n,o):n[p],b);c.skip=isNaN(v)||isNaN(w)||f,c.stop=b>0&&Math.abs(n[h]-x[h])>m,g&&(c.parsed=n,c.raw=l.data[b]),u&&(c.options=d||this.resolveDataElementOptions(b,t.active?"active":r)),y||this.updateElement(t,b,c,r),x=n}this.updateSharedOptions(d,r,c)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}const n=e.dataset,r=n.options&&n.options.borderWidth||0;if(!t.length)return r;const s=t[0].size(this.resolveDataElementOptions(0)),i=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(r,s,i)/2}}(0,Da.A)(Vd,"id","scatter"),(0,Da.A)(Vd,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),(0,Da.A)(Vd,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function Wd(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Hd{static override(e){Object.assign(Hd.prototype,e)}constructor(e){(0,Da.A)(this,"options",void 0),this.options=e||{}}init(){}formats(){return Wd()}parse(){return Wd()}format(){return Wd()}add(){return Wd()}diff(){return Wd()}startOf(){return Wd()}endOf(){return Wd()}}var qd=Hd;function Kd(e,t,n,r){const{controller:s,data:i,_sorted:a}=e,o=s._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(o&&t===o.axis&&"r"!==t&&a&&i.length){const a=o._reversePixels?fl:pl;if(!r){const r=a(i,t,n);if(l){const{vScale:t}=s._cachedMeta,{_parsed:n}=e,i=n.slice(0,r.lo+1).reverse().findIndex(e=>!vo(e[t.axis]));r.lo-=Math.max(0,i);const a=n.slice(r.hi).findIndex(e=>!vo(e[t.axis]));r.hi+=Math.max(0,a)}return r}if(s._sharedOptions){const e=i[0],r="function"===typeof e.getRange&&e.getRange(t);if(r){const e=a(i,t,n-r),s=a(i,t,n+r);return{lo:e.lo,hi:s.hi}}}}return{lo:0,hi:i.length-1}}function $d(e,t,n,r,s){const i=e.getSortedVisibleDatasetMetas(),a=n[t];for(let o=0,l=i.length;o<l;++o){const{index:e,data:n}=i[o],{lo:l,hi:c}=Kd(i[o],t,a,s);for(let t=l;t<=c;++t){const s=n[t];s.skip||r(s,e,t)}}}function Gd(e,t,n,r,s){const i=[];if(!s&&!e.isPointInArea(t))return i;return $d(e,n,t,function(n,a,o){(s||Jl(n,e.chartArea,0))&&n.inRange(t.x,t.y,r)&&i.push({element:n,datasetIndex:a,index:o})},!0),i}function Jd(e,t,n,r,s,i){let a=[];const o=function(e){const t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,r){const s=t?Math.abs(e.x-r.x):0,i=n?Math.abs(e.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(i,2))}}(n);let l=Number.POSITIVE_INFINITY;return $d(e,n,t,function(n,c,d){const u=n.inRange(t.x,t.y,s);if(r&&!u)return;const h=n.getCenterPoint(s);if(!(!!i||e.isPointInArea(h))&&!u)return;const p=o(t,h);p<l?(a=[{element:n,datasetIndex:c,index:d}],l=p):p===l&&a.push({element:n,datasetIndex:c,index:d})}),a}function Yd(e,t,n,r,s,i){return i||e.isPointInArea(t)?"r"!==n||r?Jd(e,t,n,r,s,i):function(e,t,n,r){let s=[];return $d(e,n,t,function(e,n,i){const{startAngle:a,endAngle:o}=e.getProps(["startAngle","endAngle"],r),{angle:l}=il(e,{x:t.x,y:t.y});cl(l,a,o)&&s.push({element:e,datasetIndex:n,index:i})}),s}(e,t,n,s):[]}function Qd(e,t,n,r,s){const i=[],a="x"===n?"inXRange":"inYRange";let o=!1;return $d(e,n,t,(e,r,l)=>{e[a]&&e[a](t[n],s)&&(i.push({element:e,datasetIndex:r,index:l}),o=o||e.inRange(t.x,t.y,s))}),r&&!o?[]:i}var Xd={evaluateInteractionItems:$d,modes:{index(e,t,n,r){const s=Vc(t,e),i=n.axis||"x",a=n.includeInvisible||!1,o=n.intersect?Gd(e,s,i,r,a):Yd(e,s,i,!1,r,a),l=[];return o.length?(e.getSortedVisibleDatasetMetas().forEach(e=>{const t=o[0].index,n=e.data[t];n&&!n.skip&&l.push({element:n,datasetIndex:e.index,index:t})}),l):[]},dataset(e,t,n,r){const s=Vc(t,e),i=n.axis||"xy",a=n.includeInvisible||!1;let o=n.intersect?Gd(e,s,i,r,a):Yd(e,s,i,!1,r,a);if(o.length>0){const t=o[0].datasetIndex,n=e.getDatasetMeta(t).data;o=[];for(let e=0;e<n.length;++e)o.push({element:n[e],datasetIndex:t,index:e})}return o},point:(e,t,n,r)=>Gd(e,Vc(t,e),n.axis||"xy",r,n.includeInvisible||!1),nearest(e,t,n,r){const s=Vc(t,e),i=n.axis||"xy",a=n.includeInvisible||!1;return Yd(e,s,i,n.intersect,r,a)},x:(e,t,n,r)=>Qd(e,Vc(t,e),"x",n.intersect,r),y:(e,t,n,r)=>Qd(e,Vc(t,e),"y",n.intersect,r)}};const Zd=["left","top","right","bottom"];function eu(e,t){return e.filter(e=>e.pos===t)}function tu(e,t){return e.filter(e=>-1===Zd.indexOf(e.pos)&&e.box.axis===t)}function nu(e,t){return e.sort((e,n)=>{const r=t?n:e,s=t?e:n;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function ru(e,t){const n=function(e){const t={};for(const n of e){const{stack:e,pos:r,stackWeight:s}=n;if(!e||!Zd.includes(r))continue;const i=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});i.count++,i.weight+=s}return t}(e),{vBoxMaxWidth:r,hBoxMaxHeight:s}=t;let i,a,o;for(i=0,a=e.length;i<a;++i){o=e[i];const{fullSize:a}=o.box,l=n[o.stack],c=l&&o.stackWeight/l.weight;o.horizontal?(o.width=c?c*r:a&&t.availableWidth,o.height=s):(o.width=r,o.height=c?c*s:a&&t.availableHeight)}return n}function su(e,t,n,r){return Math.max(e[n],t[n])+Math.max(e[r],t[r])}function iu(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function au(e,t,n,r){const{pos:s,box:i}=n,a=e.maxPadding;if(!_o(s)){n.size&&(e[s]-=n.size);const t=r[n.stack]||{size:0,count:1};t.size=Math.max(t.size,n.horizontal?i.height:i.width),n.size=t.size/t.count,e[s]+=n.size}i.getPadding&&iu(a,i.getPadding());const o=Math.max(0,t.outerWidth-su(a,e,"left","right")),l=Math.max(0,t.outerHeight-su(a,e,"top","bottom")),c=o!==e.w,d=l!==e.h;return e.w=o,e.h=l,n.horizontal?{same:c,other:d}:{same:d,other:c}}function ou(e,t){const n=t.maxPadding;function r(e){const r={left:0,top:0,right:0,bottom:0};return e.forEach(e=>{r[e]=Math.max(t[e],n[e])}),r}return r(e?["left","right"]:["top","bottom"])}function lu(e,t,n,r){const s=[];let i,a,o,l,c,d;for(i=0,a=e.length,c=0;i<a;++i){o=e[i],l=o.box,l.update(o.width||t.w,o.height||t.h,ou(o.horizontal,t));const{same:a,other:u}=au(t,n,o,r);c|=a&&s.length,d=d||u,l.fullSize||s.push(o)}return c&&lu(s,t,n,r)||d}function cu(e,t,n,r,s){e.top=n,e.left=t,e.right=t+r,e.bottom=n+s,e.width=r,e.height=s}function du(e,t,n,r){const s=n.padding;let{x:i,y:a}=t;for(const o of e){const e=o.box,l=r[o.stack]||{count:1,placed:0,weight:1},c=o.stackWeight/l.weight||1;if(o.horizontal){const r=t.w*c,i=l.size||e.height;Fo(l.start)&&(a=l.start),e.fullSize?cu(e,s.left,a,n.outerWidth-s.right-s.left,i):cu(e,t.left+l.placed,a,r,i),l.start=a,l.placed+=r,a=e.bottom}else{const r=t.h*c,a=l.size||e.width;Fo(l.start)&&(i=l.start),e.fullSize?cu(e,i,s.top,a,n.outerHeight-s.bottom-s.top):cu(e,i,t.top+l.placed,a,r),l.start=i,l.placed+=r,i=e.right}}t.x=i,t.y=a}var uu={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,r){if(!e)return;const s=uc(e.options.layout.padding),i=Math.max(t-s.width,0),a=Math.max(n-s.height,0),o=function(e){const t=function(e){const t=[];let n,r,s,i,a,o;for(n=0,r=(e||[]).length;n<r;++n)s=e[n],({position:i,options:{stack:a,stackWeight:o=1}}=s),t.push({index:n,box:s,pos:i,horizontal:s.isHorizontal(),weight:s.weight,stack:a&&i+a,stackWeight:o});return t}(e),n=nu(t.filter(e=>e.box.fullSize),!0),r=nu(eu(t,"left"),!0),s=nu(eu(t,"right")),i=nu(eu(t,"top"),!0),a=nu(eu(t,"bottom")),o=tu(t,"x"),l=tu(t,"y");return{fullSize:n,leftAndTop:r.concat(i),rightAndBottom:s.concat(l).concat(a).concat(o),chartArea:eu(t,"chartArea"),vertical:r.concat(s).concat(l),horizontal:i.concat(a).concat(o)}}(e.boxes),l=o.vertical,c=o.horizontal;Eo(e.boxes,e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()});const d=l.reduce((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1,0)||1,u=Object.freeze({outerWidth:t,outerHeight:n,padding:s,availableWidth:i,availableHeight:a,vBoxMaxWidth:i/2/d,hBoxMaxHeight:a/2}),h=Object.assign({},s);iu(h,uc(r));const p=Object.assign({maxPadding:h,w:i,h:a,x:s.left,y:s.top},s),f=ru(l.concat(c),u);lu(o.fullSize,p,u,f),lu(l,p,u,f),lu(c,p,u,f)&&lu(l,p,u,f),function(e){const t=e.maxPadding;function n(n){const r=Math.max(t[n]-e[n],0);return e[n]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(p),du(o.leftAndTop,p,u,f),p.x+=p.w,p.y+=p.h,du(o.rightAndBottom,p,u,f),e.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},Eo(o.chartArea,t=>{const n=t.box;Object.assign(n,e.chartArea),n.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class hu{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,r){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):n)}}isAttached(e){return!0}updateConfig(e){}}class pu extends hu{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const fu="$chartjs",gu={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},mu=e=>null===e||""===e;const yu=!!Kc&&{passive:!0};function xu(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,yu)}function bu(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function vu(e,t,n){const r=e.canvas,s=new MutationObserver(e=>{let t=!1;for(const n of e)t=t||bu(n.addedNodes,r),t=t&&!bu(n.removedNodes,r);t&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function wu(e,t,n){const r=e.canvas,s=new MutationObserver(e=>{let t=!1;for(const n of e)t=t||bu(n.removedNodes,r),t=t&&!bu(n.addedNodes,r);t&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const _u=new Map;let ku=0;function ju(){const e=window.devicePixelRatio;e!==ku&&(ku=e,_u.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function Su(e,t,n){const r=e.canvas,s=r&&Dc(r);if(!s)return;const i=bl((e,t)=>{const r=s.clientWidth;n(e,t),r<s.clientWidth&&n()},window),a=new ResizeObserver(e=>{const t=e[0],n=t.contentRect.width,r=t.contentRect.height;0===n&&0===r||i(n,r)});return a.observe(s),function(e,t){_u.size||window.addEventListener("resize",ju),_u.set(e,t)}(e,i),a}function Nu(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){_u.delete(e),_u.size||window.removeEventListener("resize",ju)}(e)}function Cu(e,t,n){const r=e.canvas,s=bl(t=>{null!==e.ctx&&n(function(e,t){const n=gu[e.type]||e.type,{x:r,y:s}=Vc(e,t);return{type:n,chart:t,native:e,x:void 0!==r?r:null,y:void 0!==s?s:null}}(t,e))},e);return function(e,t,n){e&&e.addEventListener(t,n,yu)}(r,t,s),s}class Eu extends hu{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){const n=e.style,r=e.getAttribute("height"),s=e.getAttribute("width");if(e[fu]={initial:{height:r,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",mu(s)){const t=$c(e,"width");void 0!==t&&(e.width=t)}if(mu(r))if(""===e.style.height)e.height=e.width/(t||2);else{const t=$c(e,"height");void 0!==t&&(e.height=t)}}(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[fu])return!1;const n=t[fu].initial;["height","width"].forEach(e=>{const r=n[e];vo(r)?t.removeAttribute(e):t.setAttribute(e,r)});const r=n.style||{};return Object.keys(r).forEach(e=>{t.style[e]=r[e]}),t.width=t.width,delete t[fu],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const r=e.$proxies||(e.$proxies={}),s={attach:vu,detach:wu,resize:Su}[t]||Cu;r[t]=s(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),r=n[t];if(!r)return;({attach:Nu,detach:Nu,resize:Nu}[t]||xu)(e,t,r),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,r){return Hc(e,t,n,r)}isAttached(e){const t=e&&Dc(e);return!(!t||!t.isConnected)}}class Au{constructor(){(0,Da.A)(this,"x",void 0),(0,Da.A)(this,"y",void 0),(0,Da.A)(this,"active",!1),(0,Da.A)(this,"options",void 0),(0,Da.A)(this,"$animations",void 0)}tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return el(this.x)&&el(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const r={};return e.forEach(e=>{r[e]=n[e]&&n[e].active()?n[e]._to:this[e]}),r}}function Pu(e,t){const n=e.options.ticks,r=function(e){const t=e.options.offset,n=e._tickSize(),r=e._length/n+(t?0:1),s=e._maxLength/n;return Math.floor(Math.min(r,s))}(e),s=Math.min(n.maxTicksLimit||r,r),i=n.major.enabled?function(e){const t=[];let n,r;for(n=0,r=e.length;n<r;n++)e[n].major&&t.push(n);return t}(t):[],a=i.length,o=i[0],l=i[a-1],c=[];if(a>s)return function(e,t,n,r){let s,i=0,a=n[0];for(r=Math.ceil(r),s=0;s<e.length;s++)s===a&&(t.push(e[s]),i++,a=n[i*r])}(t,c,i,a/s),c;const d=function(e,t,n){const r=function(e){const t=e.length;let n,r;if(t<2)return!1;for(r=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==r)return!1;return r}(e),s=t.length/n;if(!r)return Math.max(s,1);const i=function(e){const t=[],n=Math.sqrt(e);let r;for(r=1;r<n;r++)e%r===0&&(t.push(r),t.push(e/r));return n===(0|n)&&t.push(n),t.sort((e,t)=>e-t).pop(),t}(r);for(let a=0,o=i.length-1;a<o;a++){const e=i[a];if(e>s)return e}return Math.max(s,1)}(i,t,s);if(a>0){let e,n;const r=a>1?Math.round((l-o)/(a-1)):null;for(Tu(t,c,d,vo(r)?0:o-r,o),e=0,n=a-1;e<n;e++)Tu(t,c,d,i[e],i[e+1]);return Tu(t,c,d,l,vo(r)?t.length:l+r),c}return Tu(t,c,d),c}function Tu(e,t,n,r,s){const i=So(r,0),a=Math.min(So(s,e.length),e.length);let o,l,c,d=0;for(n=Math.ceil(n),s&&(o=s-r,n=o/Math.floor(o/n)),c=i;c<0;)d++,c=Math.round(i+d*n);for(l=Math.max(i,0);l<a;l++)l===c&&(t.push(e[l]),d++,c=Math.round(i+d*n))}(0,Da.A)(Au,"defaults",{}),(0,Da.A)(Au,"defaultRoutes",void 0);const Ou=(e,t,n)=>"top"===t||"left"===t?e[t]+n:e[t]-n,Mu=(e,t)=>Math.min(t||e,e);function Iu(e,t){const n=[],r=e.length/t,s=e.length;let i=0;for(;i<s;i+=r)n.push(e[Math.floor(i)]);return n}function Ru(e,t,n){const r=e.ticks.length,s=Math.min(t,r-1),i=e._startPixel,a=e._endPixel,o=1e-6;let l,c=e.getPixelForTick(s);if(!(n&&(l=1===r?Math.max(c-i,a-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(s-1))/2,c+=s<t?l:-l,c<i-o||c>a+o)))return c}function Lu(e){return e.drawTicks?e.tickLength:0}function Du(e,t){if(!e.display)return 0;const n=hc(e.font,t),r=uc(e.padding);return(wo(e.text)?e.text.length:1)*n.lineHeight+r.height}function zu(e,t,n){let r=vl(e);return(n&&"right"!==t||!n&&"right"===t)&&(r=(e=>"left"===e?"right":"right"===e?"left":e)(r)),r}class Fu extends Au{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:r}=this;return e=jo(e,Number.POSITIVE_INFINITY),t=jo(t,Number.NEGATIVE_INFINITY),n=jo(n,Number.POSITIVE_INFINITY),r=jo(r,Number.NEGATIVE_INFINITY),{min:jo(e,n),max:jo(t,r),minDefined:ko(e),maxDefined:ko(t)}}getMinMax(e){let t,{min:n,max:r,minDefined:s,maxDefined:i}=this.getUserBounds();if(s&&i)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let o=0,l=a.length;o<l;++o)t=a[o].controller.getMinMax(this,e),s||(n=Math.min(n,t.min)),i||(r=Math.max(r,t.max));return n=i&&n>r?r:n,r=s&&n>r?n:r,{min:jo(n,jo(r,n)),max:jo(r,jo(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Co(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:r,grace:s,ticks:i}=this.options,a=i.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){const{min:r,max:s}=e,i=No(t,(s-r)/2),a=(e,t)=>n&&0===e?0:e+t;return{min:a(r,-Math.abs(i)),max:a(s,i)}}(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const o=a<this.ticks.length;this._convertTicksToLabels(o?Iu(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),i.display&&(i.autoSkip||"auto"===i.source)&&(this.ticks=Pu(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),o&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Co(this.options.afterUpdate,[this])}beforeSetDimensions(){Co(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Co(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Co(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Co(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,r,s;for(n=0,r=e.length;n<r;n++)s=e[n],s.label=Co(t.callback,[s.value,n,e],this)}afterTickToLabelConversion(){Co(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Co(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=Mu(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,s=t.maxRotation;let i,a,o,l=r;if(!this._isVisible()||!t.display||r>=s||n<=1||!this.isHorizontal())return void(this.labelRotation=r);const c=this._getLabelSizes(),d=c.widest.width,u=c.highest.height,h=dl(this.chart.width-d,0,this.maxWidth);i=e.offset?this.maxWidth/n:h/(n-1),d+6>i&&(i=h/(n-(e.offset?.5:1)),a=this.maxHeight-Lu(e.grid)-t.padding-Du(e.title,this.chart.options.font),o=Math.sqrt(d*d+u*u),l=rl(Math.min(Math.asin(dl((c.highest.height+6)/i,-1,1)),Math.asin(dl(a/o,-1,1))-Math.asin(dl(u/o,-1,1)))),l=Math.max(r,Math.min(s,l))),this.labelRotation=l}afterCalculateLabelRotation(){Co(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Co(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:r,grid:s}}=this,i=this._isVisible(),a=this.isHorizontal();if(i){const i=Du(r,t.options.font);if(a?(e.width=this.maxWidth,e.height=Lu(s)+i):(e.height=this.maxHeight,e.width=Lu(s)+i),n.display&&this.ticks.length){const{first:t,last:r,widest:s,highest:i}=this._getLabelSizes(),o=2*n.padding,l=nl(this.labelRotation),c=Math.cos(l),d=Math.sin(l);if(a){const t=n.mirror?0:d*s.width+c*i.height;e.height=Math.min(this.maxHeight,e.height+t+o)}else{const t=n.mirror?0:c*s.width+d*i.height;e.width=Math.min(this.maxWidth,e.width+t+o)}this._calculatePadding(t,r,d,c)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,r){const{ticks:{align:s,padding:i},position:a}=this.options,o=0!==this.labelRotation,l="top"!==a&&"x"===this.axis;if(this.isHorizontal()){const a=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,u=0;o?l?(d=r*e.width,u=n*t.height):(d=n*e.height,u=r*t.width):"start"===s?u=t.width:"end"===s?d=e.width:"inner"!==s&&(d=e.width/2,u=t.width/2),this.paddingLeft=Math.max((d-a+i)*this.width/(this.width-a),0),this.paddingRight=Math.max((u-c+i)*this.width/(this.width-c),0)}else{let n=t.height/2,r=e.height/2;"start"===s?(n=0,r=e.height):"end"===s&&(n=t.height,r=0),this.paddingTop=n+i,this.paddingBottom=r+i}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Co(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)vo(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=Iu(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){const{ctx:r,_longestTextCache:s}=this,i=[],a=[],o=Math.floor(t/Mu(t,n));let l,c,d,u,h,p,f,g,m,y,x,b=0,v=0;for(l=0;l<t;l+=o){if(u=e[l].label,h=this._resolveTickFontOptions(l),r.font=p=h.string,f=s[p]=s[p]||{data:{},gc:[]},g=h.lineHeight,m=y=0,vo(u)||wo(u)){if(wo(u))for(c=0,d=u.length;c<d;++c)x=u[c],vo(x)||wo(x)||(m=Wl(r,f.data,f.gc,m,x),y+=g)}else m=Wl(r,f.data,f.gc,m,u),y=g;i.push(m),a.push(y),b=Math.max(m,b),v=Math.max(y,v)}!function(e,t){Eo(e,e=>{const n=e.gc,r=n.length/2;let s;if(r>t){for(s=0;s<r;++s)delete e.data[n[s]];n.splice(0,r)}})}(s,t);const w=i.indexOf(b),_=a.indexOf(v),k=e=>({width:i[e]||0,height:a[e]||0});return{first:k(0),last:k(t-1),widest:k(w),highest:k(_),widths:i,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return dl(this._alignToPixels?ql(this.chart,t,0):t,-32768,32767)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=function(e,t,n){return fc(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=fc(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const e=this.options.ticks,t=nl(this.labelRotation),n=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),s=this._getLabelSizes(),i=e.autoSkipPadding||0,a=s?s.widest.width+i:0,o=s?s.highest.height+i:0;return this.isHorizontal()?o*n>a*r?a/n:o/r:o*r<a*n?o/n:a/r}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,r=this.options,{grid:s,position:i,border:a}=r,o=s.offset,l=this.isHorizontal(),c=this.ticks.length+(o?1:0),d=Lu(s),u=[],h=a.setContext(this.getContext()),p=h.display?h.width:0,f=p/2,g=function(e){return ql(n,e,p)};let m,y,x,b,v,w,_,k,j,S,N,C;if("top"===i)m=g(this.bottom),w=this.bottom-d,k=m-f,S=g(e.top)+f,C=e.bottom;else if("bottom"===i)m=g(this.top),S=e.top,C=g(e.bottom)-f,w=m+f,k=this.top+d;else if("left"===i)m=g(this.right),v=this.right-d,_=m-f,j=g(e.left)+f,N=e.right;else if("right"===i)m=g(this.left),j=e.left,N=g(e.right)-f,v=m+f,_=this.left+d;else if("x"===t){if("center"===i)m=g((e.top+e.bottom)/2+.5);else if(_o(i)){const e=Object.keys(i)[0],t=i[e];m=g(this.chart.scales[e].getPixelForValue(t))}S=e.top,C=e.bottom,w=m+f,k=w+d}else if("y"===t){if("center"===i)m=g((e.left+e.right)/2);else if(_o(i)){const e=Object.keys(i)[0],t=i[e];m=g(this.chart.scales[e].getPixelForValue(t))}v=m-f,_=v-d,j=e.left,N=e.right}const E=So(r.ticks.maxTicksLimit,c),A=Math.max(1,Math.ceil(c/E));for(y=0;y<c;y+=A){const e=this.getContext(y),t=s.setContext(e),r=a.setContext(e),i=t.lineWidth,c=t.color,d=r.dash||[],h=r.dashOffset,p=t.tickWidth,f=t.tickColor,g=t.tickBorderDash||[],m=t.tickBorderDashOffset;x=Ru(this,y,o),void 0!==x&&(b=ql(n,x,i),l?v=_=j=N=b:w=k=S=C=b,u.push({tx1:v,ty1:w,tx2:_,ty2:k,x1:j,y1:S,x2:N,y2:C,width:i,color:c,borderDash:d,borderDashOffset:h,tickWidth:p,tickColor:f,tickBorderDash:g,tickBorderDashOffset:m}))}return this._ticksLength=c,this._borderValue=m,u}_computeLabelItems(e){const t=this.axis,n=this.options,{position:r,ticks:s}=n,i=this.isHorizontal(),a=this.ticks,{align:o,crossAlign:l,padding:c,mirror:d}=s,u=Lu(n.grid),h=u+c,p=d?-c:h,f=-nl(this.labelRotation),g=[];let m,y,x,b,v,w,_,k,j,S,N,C,E="middle";if("top"===r)w=this.bottom-p,_=this._getXAxisLabelAlignment();else if("bottom"===r)w=this.top+p,_=this._getXAxisLabelAlignment();else if("left"===r){const e=this._getYAxisLabelAlignment(u);_=e.textAlign,v=e.x}else if("right"===r){const e=this._getYAxisLabelAlignment(u);_=e.textAlign,v=e.x}else if("x"===t){if("center"===r)w=(e.top+e.bottom)/2+h;else if(_o(r)){const e=Object.keys(r)[0],t=r[e];w=this.chart.scales[e].getPixelForValue(t)+h}_=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===r)v=(e.left+e.right)/2-h;else if(_o(r)){const e=Object.keys(r)[0],t=r[e];v=this.chart.scales[e].getPixelForValue(t)}_=this._getYAxisLabelAlignment(u).textAlign}"y"===t&&("start"===o?E="top":"end"===o&&(E="bottom"));const A=this._getLabelSizes();for(m=0,y=a.length;m<y;++m){x=a[m],b=x.label;const e=s.setContext(this.getContext(m));k=this.getPixelForTick(m)+s.labelOffset,j=this._resolveTickFontOptions(m),S=j.lineHeight,N=wo(b)?b.length:1;const t=N/2,n=e.color,o=e.textStrokeColor,c=e.textStrokeWidth;let u,h=_;if(i?(v=k,"inner"===_&&(h=m===y-1?this.options.reverse?"left":"right":0===m?this.options.reverse?"right":"left":"center"),C="top"===r?"near"===l||0!==f?-N*S+S/2:"center"===l?-A.highest.height/2-t*S+S:-A.highest.height+S/2:"near"===l||0!==f?S/2:"center"===l?A.highest.height/2-t*S:A.highest.height-N*S,d&&(C*=-1),0===f||e.showLabelBackdrop||(v+=S/2*Math.sin(f))):(w=k,C=(1-N)*S/2),e.showLabelBackdrop){const t=uc(e.backdropPadding),n=A.heights[m],r=A.widths[m];let s=C-t.top,i=0-t.left;switch(E){case"middle":s-=n/2;break;case"bottom":s-=n}switch(_){case"center":i-=r/2;break;case"right":i-=r;break;case"inner":m===y-1?i-=r:m>0&&(i-=r/2)}u={left:i,top:s,width:r+t.width,height:n+t.height,color:e.backdropColor}}g.push({label:b,font:j,textOffset:C,options:{rotation:f,color:n,strokeColor:o,strokeWidth:c,textAlign:h,textBaseline:E,translation:[v,w],backdrop:u}})}return g}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-nl(this.labelRotation))return"top"===e?"left":"right";let n="center";return"start"===t.align?n="left":"end"===t.align?n="right":"inner"===t.align&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:r,padding:s}}=this.options,i=e+s,a=this._getLabelSizes().widest.width;let o,l;return"left"===t?r?(l=this.right+s,"near"===n?o="left":"center"===n?(o="center",l+=a/2):(o="right",l+=a)):(l=this.right-i,"near"===n?o="right":"center"===n?(o="center",l-=a/2):(o="left",l=this.left)):"right"===t?r?(l=this.left+s,"near"===n?o="right":"center"===n?(o="center",l-=a/2):(o="left",l-=a)):(l=this.left+i,"near"===n?o="left":"center"===n?(o="center",l+=a/2):(o="right",l=this.right)):o="right",{textAlign:o,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:r,width:s,height:i}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,r,s,i),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex(t=>t.value===e);if(n>=0){return t.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,i;const a=(e,t,r)=>{r.width&&r.color&&(n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.setLineDash(r.borderDash||[]),n.lineDashOffset=r.borderDashOffset,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.stroke(),n.restore())};if(t.display)for(s=0,i=r.length;s<i;++s){const e=r[s];t.drawOnChartArea&&a({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&a({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:n,grid:r}}=this,s=n.setContext(this.getContext()),i=n.display?s.width:0;if(!i)return;const a=r.setContext(this.getContext(0)).lineWidth,o=this._borderValue;let l,c,d,u;this.isHorizontal()?(l=ql(e,this.left,i)-i/2,c=ql(e,this.right,a)+a/2,d=u=o):(d=ql(e,this.top,i)-i/2,u=ql(e,this.bottom,a)+a/2,l=c=o),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(l,d),t.lineTo(c,u),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,n=this._computeLabelArea();n&&Yl(t,n);const r=this.getLabelItems(e);for(const s of r){const e=s.options,n=s.font;nc(t,s.label,0,s.textOffset,n,e)}n&&Ql(t)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:r}}=this;if(!n.display)return;const s=hc(n.font),i=uc(n.padding),a=n.align;let o=s.lineHeight/2;"bottom"===t||"center"===t||_o(t)?(o+=i.bottom,wo(n.text)&&(o+=s.lineHeight*(n.text.length-1))):o+=i.top;const{titleX:l,titleY:c,maxWidth:d,rotation:u}=function(e,t,n,r){const{top:s,left:i,bottom:a,right:o,chart:l}=e,{chartArea:c,scales:d}=l;let u,h,p,f=0;const g=a-s,m=o-i;if(e.isHorizontal()){if(h=wl(r,i,o),_o(n)){const e=Object.keys(n)[0],r=n[e];p=d[e].getPixelForValue(r)+g-t}else p="center"===n?(c.bottom+c.top)/2+g-t:Ou(e,n,t);u=o-i}else{if(_o(n)){const e=Object.keys(n)[0],r=n[e];h=d[e].getPixelForValue(r)-m+t}else h="center"===n?(c.left+c.right)/2-m+t:Ou(e,n,t);p=wl(r,a,s),f="left"===n?-$o:$o}return{titleX:h,titleY:p,maxWidth:u,rotation:f}}(this,o,t,a);nc(e,n.text,0,0,s,{color:n.color,maxWidth:d,rotation:u,textAlign:zu(a,t,r),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=So(e.grid&&e.grid.z,-1),r=So(e.border&&e.border.z,0);return this._isVisible()&&this.draw===Fu.prototype.draw?[{z:n,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let s,i;for(s=0,i=t.length;s<i;++s){const i=t[s];i[n]!==this.id||e&&i.type!==e||r.push(i)}return r}_resolveTickFontOptions(e){return hc(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Uu{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;(function(e){return"id"in e&&"defaults"in e})(t)&&(n=this.register(t));const r=this.items,s=e.id,i=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,function(e,t,n){const r=Mo(Object.create(null),[n?Vl.get(n):{},Vl.get(t),e.defaults]);Vl.set(t,r),e.defaultRoutes&&function(e,t){Object.keys(t).forEach(n=>{const r=n.split("."),s=r.pop(),i=[e].concat(r).join("."),a=t[n].split("."),o=a.pop(),l=a.join(".");Vl.route(i,s,l,o)})}(t,e.defaultRoutes);e.descriptors&&Vl.describe(t,e.descriptors)}(e,i,n),this.override&&Vl.override(e.id,e.overrides)),i}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,r=this.scope;n in t&&delete t[n],r&&n in Vl[r]&&(delete Vl[r][n],this.override&&delete Dl[n])}}class Bu{constructor(){this.controllers=new Uu(Nd,"datasets",!0),this.elements=new Uu(Au,"elements"),this.plugins=new Uu(Object,"plugins"),this.scales=new Uu(Fu,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.scales)}_each(e,t,n){[...t].forEach(t=>{const r=n||this._getRegistryForType(t);n||r.isForType(t)||r===this.plugins&&t.id?this._exec(e,r,t):Eo(t,t=>{const r=n||this._getRegistryForType(t);this._exec(e,r,t)})})}_exec(e,t,n){const r=zo(e);Co(n["before"+r],[],n),t[e](n),Co(n["after"+r],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const r=t.get(e);if(void 0===r)throw new Error('"'+e+'" is not a registered '+n+".");return r}}var Vu=new Bu;class Wu{constructor(){this._init=[]}notify(e,t,n,r){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=r?this._descriptors(e).filter(r):this._descriptors(e),i=this._notify(s,e,t,n);return"afterDestroy"===t&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),i}_notify(e,t,n,r){r=r||{};for(const s of e){const e=s.plugin;if(!1===Co(e[n],[t,r,s.options],e)&&r.cancelable)return!1}return!0}invalidate(){vo(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,r=So(n.options&&n.options.plugins,{}),s=function(e){const t={},n=[],r=Object.keys(Vu.plugins.items);for(let i=0;i<r.length;i++)n.push(Vu.getPlugin(r[i]));const s=e.plugins||[];for(let i=0;i<s.length;i++){const e=s[i];-1===n.indexOf(e)&&(n.push(e),t[e.id]=!0)}return{plugins:n,localIds:t}}(n);return!1!==r||t?function(e,t,n,r){let{plugins:s,localIds:i}=t;const a=[],o=e.getContext();for(const l of s){const t=l.id,s=Hu(n[t],r);null!==s&&a.push({plugin:l,options:qu(e.config,{plugin:l,local:i[t]},s,o)})}return a}(e,s,r,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,r=(e,t)=>e.filter(e=>!t.some(t=>e.plugin.id===t.plugin.id));this._notify(r(t,n),e,"stop"),this._notify(r(n,t),e,"start")}}function Hu(e,t){return t||!1!==e?!0===e?{}:e:null}function qu(e,t,n,r){let{plugin:s,local:i}=t;const a=e.pluginScopeKeys(s),o=e.getOptionScopes(n,a);return i&&s.defaults&&o.push(s.defaults),e.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Ku(e,t){const n=Vl.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function $u(e){if("x"===e||"y"===e||"r"===e)return e}function Gu(e){return"top"===e||"bottom"===e?"x":"left"===e||"right"===e?"y":void 0}function Ju(e){if($u(e))return e;for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const s of n){const t=s.axis||Gu(s.position)||e.length>1&&$u(e[0].toLowerCase());if(t)return t}throw new Error("Cannot determine type of '".concat(e,"' axis. Please provide 'axis' or 'position' option."))}function Yu(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function Qu(e,t){const n=Dl[e.type]||{scales:{}},r=t.scales||{},s=Ku(e.type,t),i=Object.create(null);return Object.keys(r).forEach(t=>{const a=r[t];if(!_o(a))return console.error("Invalid scale configuration for scale: ".concat(t));if(a._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(t));const o=Ju(t,a,function(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(t=>t.xAxisID===e||t.yAxisID===e);if(n.length)return Yu(e,"x",n[0])||Yu(e,"y",n[0])}return{}}(t,e),Vl.scales[a.type]),l=function(e,t){return e===t?"_index_":"_value_"}(o,s),c=n.scales||{};i[t]=Io(Object.create(null),[{axis:o},a,c[o],c[l]])}),e.data.datasets.forEach(n=>{const s=n.type||e.type,a=n.indexAxis||Ku(s,t),o=(Dl[s]||{}).scales||{};Object.keys(o).forEach(e=>{const t=function(e,t){let n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,a),s=n[t+"AxisID"]||t;i[s]=i[s]||Object.create(null),Io(i[s],[{axis:t},r[s],o[e]])})}),Object.keys(i).forEach(e=>{const t=i[e];Io(t,[Vl.scales[t.type],Vl.scale])}),i}function Xu(e){const t=e.options||(e.options={});t.plugins=So(t.plugins,{}),t.scales=Qu(e,t)}function Zu(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const eh=new Map,th=new Set;function nh(e,t){let n=eh.get(e);return n||(n=t(),eh.set(e,n),th.add(n)),n}const rh=(e,t,n)=>{const r=Do(t,n);void 0!==r&&e.add(r)};class sh{constructor(e){this._config=function(e){return(e=e||{}).data=Zu(e.data),Xu(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Zu(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Xu(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return nh(e,()=>[["datasets.".concat(e),""]])}datasetAnimationScopeKeys(e,t){return nh("".concat(e,".transition.").concat(t),()=>[["datasets.".concat(e,".transitions.").concat(t),"transitions.".concat(t)],["datasets.".concat(e),""]])}datasetElementScopeKeys(e,t){return nh("".concat(e,"-").concat(t),()=>[["datasets.".concat(e,".elements.").concat(t),"datasets.".concat(e),"elements.".concat(t),""]])}pluginScopeKeys(e){const t=e.id,n=this.type;return nh("".concat(n,"-plugin-").concat(t),()=>[["plugins.".concat(t),...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const n=this._scopeCache;let r=n.get(e);return r&&!t||(r=new Map,n.set(e,r)),r}getOptionScopes(e,t,n){const{options:r,type:s}=this,i=this._cachedScopes(e,n),a=i.get(t);if(a)return a;const o=new Set;t.forEach(t=>{e&&(o.add(e),t.forEach(t=>rh(o,e,t))),t.forEach(e=>rh(o,r,e)),t.forEach(e=>rh(o,Dl[s]||{},e)),t.forEach(e=>rh(o,Vl,e)),t.forEach(e=>rh(o,zl,e))});const l=Array.from(o);return 0===l.length&&l.push(Object.create(null)),th.has(t)&&i.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,Dl[t]||{},Vl.datasets[t]||{},{type:t},Vl,zl]}resolveNamedOptions(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const s={$shared:!0},{resolver:i,subPrefixes:a}=ih(this._resolverCache,e,r);let o=i;if(function(e,t){const{isScriptable:n,isIndexable:r}=yc(e);for(const s of t){const t=n(s),i=r(s),a=(i||t)&&e[s];if(t&&(Uo(a)||ah(a))||i&&wo(a))return!0}return!1}(i,t)){s.$shared=!1;o=mc(i,n=Uo(n)?n():n,this.createResolver(e,n,a))}for(const l of t)s[l]=o[l];return s}createResolver(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],r=arguments.length>3?arguments[3]:void 0;const{resolver:s}=ih(this._resolverCache,e,n);return _o(t)?mc(s,t,void 0,r):s}}function ih(e,t,n){let r=e.get(t);r||(r=new Map,e.set(t,r));const s=n.join();let i=r.get(s);if(!i){i={resolver:gc(t,n),subPrefixes:n.filter(e=>!e.toLowerCase().includes("hover"))},r.set(s,i)}return i}const ah=e=>_o(e)&&Object.getOwnPropertyNames(e).some(t=>Uo(e[t]));const oh=["top","bottom","left","right","chartArea"];function lh(e,t){return"top"===e||"bottom"===e||-1===oh.indexOf(e)&&"x"===t}function ch(e,t){return function(n,r){return n[e]===r[e]?n[t]-r[t]:n[e]-r[e]}}function dh(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),Co(n&&n.onComplete,[e],t)}function uh(e){const t=e.chart,n=t.options.animation;Co(n&&n.onProgress,[e],t)}function hh(e){return Lc()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const ph={},fh=e=>{const t=hh(e);return Object.values(ph).filter(e=>e.canvas===t).pop()};function gh(e,t,n){const r=Object.keys(e);for(const s of r){const r=+s;if(r>=t){const i=e[s];delete e[s],(n>0||r>t)&&(e[r+n]=i)}}}class mh{static register(){Vu.add(...arguments),yh()}static unregister(){Vu.remove(...arguments),yh()}constructor(e,t){const n=this.config=new sh(t),r=hh(e),s=fh(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const i=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(e){return!Lc()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?pu:Eu}(r)),this.platform.updateConfig(n);const a=this.platform.acquireContext(r,i.aspectRatio),o=a&&a.canvas,l=o&&o.height,c=o&&o.width;this.id=bo(),this.ctx=a,this.canvas=o,this.width=c,this.height=l,this._options=i,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Wu,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let n;return function(){for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return t?(clearTimeout(n),n=setTimeout(e,t,s)):e.apply(this,s),t}}(e=>this.update(e),i.resizeDelay||0),this._dataChanges=[],ph[this.id]=this,a&&o?(dd.listen(this,"complete",dh),dd.listen(this,"progress",uh),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:r,_aspectRatio:s}=this;return vo(e)?t&&s?s:r?n/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Vu}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():qc(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Kl(this.canvas,this.ctx),this}stop(){return dd.stop(this),this}resize(e,t){dd.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,r=this.canvas,s=n.maintainAspectRatio&&this.aspectRatio,i=this.platform.getMaximumSize(r,e,t,s),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),o=this.width?"resize":"attach";this.width=i.width,this.height=i.height,this._aspectRatio=this.aspectRatio,qc(this,a,!0)&&(this.notifyPlugins("resize",{size:i}),Co(n.onResize,[this,i],this),this.attached&&this._doResize(o)&&this.render())}ensureScalesHaveIDs(){Eo(this.options.scales||{},(e,t)=>{e.id=t})}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,r=Object.keys(n).reduce((e,t)=>(e[t]=!1,e),{});let s=[];t&&(s=s.concat(Object.keys(t).map(e=>{const n=t[e],r=Ju(e,n),s="r"===r,i="x"===r;return{options:n,dposition:s?"chartArea":i?"bottom":"left",dtype:s?"radialLinear":i?"category":"linear"}}))),Eo(s,t=>{const s=t.options,i=s.id,a=Ju(i,s),o=So(s.type,t.dtype);void 0!==s.position&&lh(s.position,a)===lh(t.dposition)||(s.position=t.dposition),r[i]=!0;let l=null;if(i in n&&n[i].type===o)l=n[i];else{l=new(Vu.getScale(o))({id:i,type:o,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(s,e)}),Eo(r,(e,t)=>{e||delete n[t]}),Eo(n,e=>{uu.configure(this,e,e.options),uu.addBox(this,e)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort((e,t)=>e.index-t.index),n>t){for(let e=t;e<n;++e)this._destroyDatasetMeta(e);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(ch("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((e,n)=>{0===t.filter(t=>t===e._dataset).length&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=t.length;n<r;n++){const r=t[n];let s=this.getDatasetMeta(n);const i=r.type||this.config.type;if(s.type&&s.type!==i&&(this._destroyDatasetMeta(n),s=this.getDatasetMeta(n)),s.type=i,s.indexAxis=r.indexAxis||Ku(i,this.options),s.order=r.order||0,s.index=n,s.label=""+r.label,s.visible=this.isDatasetVisible(n),s.controller)s.controller.updateIndex(n),s.controller.linkScales();else{const t=Vu.getController(i),{datasetElementType:r,dataElementType:a}=Vl.datasets[i];Object.assign(t,{dataElementType:Vu.getElement(a),datasetElementType:r&&Vu.getElement(r)}),s.controller=new t(this,n),e.push(s.controller)}}return this._updateMetasets(),e}_resetElements(){Eo(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let i=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:e}=this.getDatasetMeta(l),t=!r&&-1===s.indexOf(e);e.buildOrUpdateElements(t),i=Math.max(+e.getMaxOverflow(),i)}i=this._minPadding=n.layout.autoPadding?i:0,this._updateLayout(i),r||Eo(s,e=>{e.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(ch("z","_idx"));const{_active:a,_lastEvent:o}=this;o?this._eventHandler(o,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Eo(this.scales,e=>{uu.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);Bo(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:s}of t){gh(e,r,"_removeElements"===n?-s:s)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=t=>new Set(e.filter(e=>e[0]===t).map((e,t)=>t+","+e.splice(1).join(","))),r=n(0);for(let s=1;s<t;s++)if(!Bo(r,n(s)))return;return Array.from(r).map(e=>e.split(",")).map(e=>({method:e[1],start:+e[2],count:+e[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;uu.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],Eo(this.boxes,e=>{n&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))},this),this._layers.forEach((e,t)=>{e._idx=t}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,Uo(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),r={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(dd.has(this)?this.attached&&!dd.running(this)&&dd.start(this):(this.draw(),dh({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let r,s;for(r=0,s=t.length;r<s;++r){const s=t[r];e&&!s.visible||n.push(s)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n={meta:e,index:e.index,cancelable:!0},r=ld(this,e);!1!==this.notifyPlugins("beforeDatasetDraw",n)&&(r&&Yl(t,r),e.controller.draw(),r&&Ql(t),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return Jl(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,r){const s=Xd.modes[t];return"function"===typeof s?s(this,e,n,r):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let r=n.filter(e=>e&&e._dataset===t).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=fc(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return"boolean"===typeof n.hidden?!n.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const r=n?"show":"hide",s=this.getDatasetMeta(e),i=s.controller._resolveAnimations(void 0,r);Fo(t)?(s.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),i.update(s,{visible:n}),this.update(t=>t.datasetIndex===e?r:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),dd.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Kl(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete ph[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(e,t,n)=>{e.offsetX=t,e.offsetY=n,this._eventHandler(e)};Eo(this.options.events,e=>n(e,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(n,r)=>{e[n]&&(t.removeEventListener(this,n,r),delete e[n])},s=(e,t)=>{this.canvas&&this.resize(e,t)};let i;const a=()=>{r("attach",a),this.attached=!0,this.resize(),n("resize",s),n("detach",i)};i=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),n("attach",a)},t.isAttached(this.canvas)?a():i()}unbindEvents(){Eo(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},Eo(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const r=n?"set":"remove";let s,i,a,o;for("dataset"===t&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),a=0,o=e.length;a<o;++a){i=e[a];const t=i&&this.getDatasetMeta(i.datasetIndex).controller;t&&t[r+"HoverStyle"](i.element,i.datasetIndex,i.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map(e=>{let{datasetIndex:t,index:n}=e;const r=this.getDatasetMeta(t);if(!r)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:r.data[n],index:n}});!Ao(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}isPluginEnabled(e){return 1===this._plugins._cache.filter(t=>t.plugin.id===e).length}_updateHoverStyles(e,t,n){const r=this.options.hover,s=(e,t)=>e.filter(e=>!t.some(t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)),i=s(t,e),a=n?e:s(e,t);i.length&&this.updateHoverStyle(i,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},r=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",n,r))return;const s=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(s||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:r=[],options:s}=this,i=t,a=this._getActiveElements(e,r,n,i),o=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,n,r){return n&&"mouseout"!==e.type?r?t:e:null}(e,this._lastEvent,n,o);n&&(this._lastEvent=null,Co(s.onHover,[e,a,this],this),o&&Co(s.onClick,[e,a,this],this));const c=!Ao(a,r);return(c||t)&&(this._active=a,this._updateHoverStyles(a,r,t)),this._lastEvent=l,c}_getActiveElements(e,t,n,r){if("mouseout"===e.type)return[];if(!n)return t;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,r)}}function yh(){return Eo(mh.instances,e=>e._plugins.invalidate())}function xh(e,t,n,r){const s=lc(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const i=(n-t)/2,a=Math.min(i,r*t/2),o=e=>{const t=(n-Math.min(i,e))*r/2;return dl(e,0,Math.min(i,t))};return{outerStart:o(s.outerStart),outerEnd:o(s.outerEnd),innerStart:dl(s.innerStart,0,a),innerEnd:dl(s.innerEnd,0,a)}}function bh(e,t,n,r){return{x:n+e*Math.cos(t),y:r+e*Math.sin(t)}}function vh(e,t,n,r,s,i){const{x:a,y:o,startAngle:l,pixelMargin:c,innerRadius:d}=t,u=Math.max(t.outerRadius+r+n-c,0),h=d>0?d+r+n+c:0;let p=0;const f=s-l;if(r){const e=((d>0?d-r:0)+(u>0?u-r:0))/2;p=(f-(0!==e?f*e/(e+r):f))/2}const g=(f-Math.max(.001,f*u-n/Vo)/u)/2,m=l+g+p,y=s-g-p,{outerStart:x,outerEnd:b,innerStart:v,innerEnd:w}=xh(t,h,u,y-m),_=u-x,k=u-b,j=m+x/_,S=y-b/k,N=h+v,C=h+w,E=m+v/N,A=y-w/C;if(e.beginPath(),i){const t=(j+S)/2;if(e.arc(a,o,u,j,t),e.arc(a,o,u,t,S),b>0){const t=bh(k,S,a,o);e.arc(t.x,t.y,b,S,y+$o)}const n=bh(C,y,a,o);if(e.lineTo(n.x,n.y),w>0){const t=bh(C,A,a,o);e.arc(t.x,t.y,w,y+$o,A+Math.PI)}const r=(y-w/h+(m+v/h))/2;if(e.arc(a,o,h,y-w/h,r,!0),e.arc(a,o,h,r,m+v/h,!0),v>0){const t=bh(N,E,a,o);e.arc(t.x,t.y,v,E+Math.PI,m-$o)}const s=bh(_,m,a,o);if(e.lineTo(s.x,s.y),x>0){const t=bh(_,j,a,o);e.arc(t.x,t.y,x,m-$o,j)}}else{e.moveTo(a,o);const t=Math.cos(j)*u+a,n=Math.sin(j)*u+o;e.lineTo(t,n);const r=Math.cos(S)*u+a,s=Math.sin(S)*u+o;e.lineTo(r,s)}e.closePath()}function wh(e,t,n,r,s){const{fullCircles:i,startAngle:a,circumference:o,options:l}=t,{borderWidth:c,borderJoinStyle:d,borderDash:u,borderDashOffset:h,borderRadius:p}=l,f="inner"===l.borderAlign;if(!c)return;e.setLineDash(u||[]),e.lineDashOffset=h,f?(e.lineWidth=2*c,e.lineJoin=d||"round"):(e.lineWidth=c,e.lineJoin=d||"bevel");let g=t.endAngle;if(i){vh(e,t,n,r,g,s);for(let t=0;t<i;++t)e.stroke();isNaN(o)||(g=a+(o%Wo||Wo))}f&&function(e,t,n){const{startAngle:r,pixelMargin:s,x:i,y:a,outerRadius:o,innerRadius:l}=t;let c=s/o;e.beginPath(),e.arc(i,a,o,r-c,n+c),l>s?(c=s/l,e.arc(i,a,l,n+c,r-c,!0)):e.arc(i,a,s,n+$o,r-$o),e.closePath(),e.clip()}(e,t,g),l.selfJoin&&g-a>=Vo&&0===p&&"miter"!==d&&function(e,t,n){const{startAngle:r,x:s,y:i,outerRadius:a,innerRadius:o,options:l}=t,{borderWidth:c,borderJoinStyle:d}=l,u=Math.min(c/a,ll(r-n));if(e.beginPath(),e.arc(s,i,a-c/2,r+u/2,n-u/2),o>0){const t=Math.min(c/o,ll(r-n));e.arc(s,i,o+c/2,n-t/2,r+t/2,!0)}else{const t=Math.min(c/2,a*ll(r-n));if("round"===d)e.arc(s,i,t,n-Vo/2,r+Vo/2,!0);else if("bevel"===d){const a=2*t*t,o=-a*Math.cos(n+Vo/2)+s,l=-a*Math.sin(n+Vo/2)+i,c=a*Math.cos(r+Vo/2)+s,d=a*Math.sin(r+Vo/2)+i;e.lineTo(o,l),e.lineTo(c,d)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}(e,t,g),i||(vh(e,t,n,r,g,s),e.stroke())}(0,Da.A)(mh,"defaults",Vl),(0,Da.A)(mh,"instances",ph),(0,Da.A)(mh,"overrides",Dl),(0,Da.A)(mh,"registry",Vu),(0,Da.A)(mh,"version","4.5.0"),(0,Da.A)(mh,"getChart",fh);class _h extends Au{constructor(e){super(),(0,Da.A)(this,"circumference",void 0),(0,Da.A)(this,"endAngle",void 0),(0,Da.A)(this,"fullCircles",void 0),(0,Da.A)(this,"innerRadius",void 0),(0,Da.A)(this,"outerRadius",void 0),(0,Da.A)(this,"pixelMargin",void 0),(0,Da.A)(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.getProps(["x","y"],n),{angle:s,distance:i}=il(r,{x:e,y:t}),{startAngle:a,endAngle:o,innerRadius:l,outerRadius:c,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),u=(this.options.spacing+this.options.borderWidth)/2,h=So(d,o-a),p=cl(s,a,o)&&a!==o,f=h>=Wo||p,g=ul(i,l+u,c+u);return f&&g}getCenterPoint(e){const{x:t,y:n,startAngle:r,endAngle:s,innerRadius:i,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:o,spacing:l}=this.options,c=(r+s)/2,d=(i+a+l+o)/2;return{x:t+Math.cos(c)*d,y:n+Math.sin(c)*d}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:n}=this,r=(t.offset||0)/4,s=(t.spacing||0)/2,i=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>Wo?Math.floor(n/Wo):0,0===n||this.innerRadius<0||this.outerRadius<0)return;e.save();const a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*r,Math.sin(a)*r);const o=r*(1-Math.sin(Math.min(Vo,n||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,n,r,s){const{fullCircles:i,startAngle:a,circumference:o}=t;let l=t.endAngle;if(i){vh(e,t,n,r,l,s);for(let t=0;t<i;++t)e.fill();isNaN(o)||(l=a+(o%Wo||Wo))}vh(e,t,n,r,l,s),e.fill()}(e,this,o,s,i),wh(e,this,o,s,i),e.restore()}}function kh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=So(n.borderCapStyle,t.borderCapStyle),e.setLineDash(So(n.borderDash,t.borderDash)),e.lineDashOffset=So(n.borderDashOffset,t.borderDashOffset),e.lineJoin=So(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=So(n.borderWidth,t.borderWidth),e.strokeStyle=So(n.borderColor,t.borderColor)}function jh(e,t,n){e.lineTo(n.x,n.y)}function Sh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.length,{start:s=0,end:i=r-1}=n,{start:a,end:o}=t,l=Math.max(s,a),c=Math.min(i,o),d=s<a&&i<a||s>o&&i>o;return{count:r,start:l,loop:t.loop,ilen:c<l&&!d?r+c-l:c-l}}function Nh(e,t,n,r){const{points:s,options:i}=t,{count:a,start:o,loop:l,ilen:c}=Sh(s,n,r),d=function(e){return e.stepped?Xl:e.tension||"monotone"===e.cubicInterpolationMode?Zl:jh}(i);let u,h,p,{move:f=!0,reverse:g}=r||{};for(u=0;u<=c;++u)h=s[(o+(g?c-u:u))%a],h.skip||(f?(e.moveTo(h.x,h.y),f=!1):d(e,p,h,g,i.stepped),p=h);return l&&(h=s[(o+(g?c:0))%a],d(e,p,h,g,i.stepped)),!!l}function Ch(e,t,n,r){const s=t.points,{count:i,start:a,ilen:o}=Sh(s,n,r),{move:l=!0,reverse:c}=r||{};let d,u,h,p,f,g,m=0,y=0;const x=e=>(a+(c?o-e:e))%i,b=()=>{p!==f&&(e.lineTo(m,f),e.lineTo(m,p),e.lineTo(m,g))};for(l&&(u=s[x(0)],e.moveTo(u.x,u.y)),d=0;d<=o;++d){if(u=s[x(d)],u.skip)continue;const t=u.x,n=u.y,r=0|t;r===h?(n<p?p=n:n>f&&(f=n),m=(y*m+t)/++y):(b(),e.lineTo(t,n),h=r,y=0,p=f=n),g=n}b()}function Eh(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!n?Ch:Nh}(0,Da.A)(_h,"id","arc"),(0,Da.A)(_h,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),(0,Da.A)(_h,"defaultRoutes",{backgroundColor:"backgroundColor"}),(0,Da.A)(_h,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e});const Ah="function"===typeof Path2D;function Ph(e,t,n,r){Ah&&!t.options.segment?function(e,t,n,r){let s=t._path;s||(s=t._path=new Path2D,t.path(s,n,r)&&s.closePath()),kh(e,t.options),e.stroke(s)}(e,t,n,r):function(e,t,n,r){const{segments:s,options:i}=t,a=Eh(t);for(const o of s)kh(e,i,o.style),e.beginPath(),a(e,t,o,{start:n,end:n+r-1})&&e.closePath(),e.stroke()}(e,t,n,r)}class Th extends Au{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;Rc(this._points,n,e,r,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const n=e.points,r=e.options.spanGaps,s=n.length;if(!s)return[];const i=!!e._loop,{start:a,end:o}=function(e,t,n,r){let s=0,i=t-1;if(n&&!r)for(;s<t&&!e[s].skip;)s++;for(;s<t&&e[s].skip;)s++;for(s%=t,n&&(i+=s);i>s&&e[i%t].skip;)i--;return i%=t,{start:s,end:i}}(n,s,i,r);return sd(e,!0===r?[{start:a,end:o,loop:i}]:function(e,t,n,r){const s=e.length,i=[];let a,o=t,l=e[t];for(a=t+1;a<=n;++a){const n=e[a%s];n.skip||n.stop?l.skip||(r=!1,i.push({start:t%s,end:(a-1)%s,loop:r}),t=o=n.stop?a:null):(o=a,l.skip&&(t=a)),l=n}return null!==o&&i.push({start:t%s,end:o%s,loop:r}),i}(n,a,o<a?o+s:o,!!e._fullLoop&&0===a&&o===s-1),n,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,r=e[t],s=this.points,i=rd(this,{property:t,start:r,end:r});if(!i.length)return;const a=[],o=function(e){return e.stepped?Jc:e.tension||"monotone"===e.cubicInterpolationMode?Yc:Gc}(n);let l,c;for(l=0,c=i.length;l<c;++l){const{start:c,end:d}=i[l],u=s[c],h=s[d];if(u===h){a.push(u);continue}const p=o(u,h,Math.abs((r-u[t])/(h[t]-u[t])),n.stepped);p[t]=e[t],a.push(p)}return 1===a.length?a[0]:a}pathSegment(e,t,n){return Eh(this)(e,this,t,n)}path(e,t,n){const r=this.segments,s=Eh(this);let i=this._loop;t=t||0,n=n||this.points.length-t;for(const a of r)i&=s(e,this,a,{start:t,end:t+n-1});return!!i}draw(e,t,n,r){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),Ph(e,this,n,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Oh(e,t,n,r){const s=e.options,{[n]:i}=e.getProps([n],r);return Math.abs(t-i)<s.radius+s.hitRadius}(0,Da.A)(Th,"id","line"),(0,Da.A)(Th,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),(0,Da.A)(Th,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),(0,Da.A)(Th,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e});class Mh extends Au{constructor(e){super(),(0,Da.A)(this,"parsed",void 0),(0,Da.A)(this,"skip",void 0),(0,Da.A)(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.options,{x:s,y:i}=this.getProps(["x","y"],n);return Math.pow(e-s,2)+Math.pow(t-i,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,t){return Oh(this,e,"x",t)}inYRange(e,t){return Oh(this,e,"y",t)}getCenterPoint(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const n=this.options;this.skip||n.radius<.1||!Jl(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,$l(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function Ih(e,t){const{x:n,y:r,base:s,width:i,height:a}=e.getProps(["x","y","base","width","height"],t);let o,l,c,d,u;return e.horizontal?(u=a/2,o=Math.min(n,s),l=Math.max(n,s),c=r-u,d=r+u):(u=i/2,o=n-u,l=n+u,c=Math.min(r,s),d=Math.max(r,s)),{left:o,top:c,right:l,bottom:d}}function Rh(e,t,n,r){return e?0:dl(t,n,r)}function Lh(e){const t=Ih(e),n=t.right-t.left,r=t.bottom-t.top,s=function(e,t,n){const r=e.options.borderWidth,s=e.borderSkipped,i=cc(r);return{t:Rh(s.top,i.top,0,n),r:Rh(s.right,i.right,0,t),b:Rh(s.bottom,i.bottom,0,n),l:Rh(s.left,i.left,0,t)}}(e,n/2,r/2),i=function(e,t,n){const{enableBorderRadius:r}=e.getProps(["enableBorderRadius"]),s=e.options.borderRadius,i=dc(s),a=Math.min(t,n),o=e.borderSkipped,l=r||_o(s);return{topLeft:Rh(!l||o.top||o.left,i.topLeft,0,a),topRight:Rh(!l||o.top||o.right,i.topRight,0,a),bottomLeft:Rh(!l||o.bottom||o.left,i.bottomLeft,0,a),bottomRight:Rh(!l||o.bottom||o.right,i.bottomRight,0,a)}}(e,n/2,r/2);return{outer:{x:t.left,y:t.top,w:n,h:r,radius:i},inner:{x:t.left+s.l,y:t.top+s.t,w:n-s.l-s.r,h:r-s.t-s.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,i.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(s.b,s.r))}}}}function Dh(e,t,n,r){const s=null===t,i=null===n,a=e&&!(s&&i)&&Ih(e,r);return a&&(s||ul(t,a.left,a.right))&&(i||ul(n,a.top,a.bottom))}function zh(e,t){e.rect(t.x,t.y,t.w,t.h)}function Fh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.x!==n.x?-t:0,s=e.y!==n.y?-t:0,i=(e.x+e.w!==n.x+n.w?t:0)-r,a=(e.y+e.h!==n.y+n.h?t:0)-s;return{x:e.x+r,y:e.y+s,w:e.w+i,h:e.h+a,radius:e.radius}}(0,Da.A)(Mh,"id","point"),(0,Da.A)(Mh,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),(0,Da.A)(Mh,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class Uh extends Au{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:n,backgroundColor:r}}=this,{inner:s,outer:i}=Lh(this),a=(o=i.radius).topLeft||o.topRight||o.bottomLeft||o.bottomRight?rc:zh;var o;e.save(),i.w===s.w&&i.h===s.h||(e.beginPath(),a(e,Fh(i,t,s)),e.clip(),a(e,Fh(s,-t,i)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),a(e,Fh(s,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,n){return Dh(this,e,t,n)}inXRange(e,t){return Dh(this,e,null,t)}inYRange(e,t){return Dh(this,null,e,t)}getCenterPoint(e){const{x:t,y:n,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(t+r)/2:t,y:s?n:(n+r)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}(0,Da.A)(Uh,"id","bar"),(0,Da.A)(Uh,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),(0,Da.A)(Uh,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function Bh(e,t,n,r){if(r)return;let s=t[e],i=n[e];return"angle"===e&&(s=ll(s),i=ll(i)),{property:e,start:s,end:i}}function Vh(e,t,n){for(;t>e;t--){const e=n[t];if(!isNaN(e.x)&&!isNaN(e.y))break}return t}function Wh(e,t,n,r){return e&&t?r(e[n],t[n]):e?e[n]:t?t[n]:0}function Hh(e,t){let n=[],r=!1;return wo(e)?(r=!0,n=e):n=function(e,t){const{x:n=null,y:r=null}=e||{},s=t.points,i=[];return t.segments.forEach(e=>{let{start:t,end:a}=e;a=Vh(t,a,s);const o=s[t],l=s[a];null!==r?(i.push({x:o.x,y:r}),i.push({x:l.x,y:r})):null!==n&&(i.push({x:n,y:o.y}),i.push({x:n,y:l.y}))}),i}(e,t),n.length?new Th({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function qh(e){return e&&!1!==e.fill}function Kh(e,t,n){let r=e[t].fill;const s=[t];let i;if(!n)return r;for(;!1!==r&&-1===s.indexOf(r);){if(!ko(r))return r;if(i=e[r],!i)return!1;if(i.visible)return r;s.push(r),r=i.fill}return!1}function $h(e,t,n){const r=function(e){const t=e.options,n=t.fill;let r=So(n&&n.target,n);void 0===r&&(r=!!t.backgroundColor);if(!1===r||null===r)return!1;if(!0===r)return"origin";return r}(e);if(_o(r))return!isNaN(r.value)&&r;let s=parseFloat(r);return ko(s)&&Math.floor(s)===s?function(e,t,n,r){"-"!==e&&"+"!==e||(n=t+n);if(n===t||n<0||n>=r)return!1;return n}(r[0],t,s,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function Gh(e,t,n){const r=[];for(let s=0;s<n.length;s++){const i=n[s],{first:a,last:o,point:l}=Jh(i,t,"x");if(!(!l||a&&o))if(a)r.unshift(l);else if(e.push(l),!o)break}e.push(...r)}function Jh(e,t,n){const r=e.interpolate(t,n);if(!r)return{};const s=r[n],i=e.segments,a=e.points;let o=!1,l=!1;for(let c=0;c<i.length;c++){const e=i[c],t=a[e.start][n],r=a[e.end][n];if(ul(s,t,r)){o=s===t,l=s===r;break}}return{first:o,last:l,point:r}}class Yh{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,n){const{x:r,y:s,radius:i}=this;return t=t||{start:0,end:Wo},e.arc(r,s,i,t.end,t.start,!0),!n.bounds}interpolate(e){const{x:t,y:n,radius:r}=this,s=e.angle;return{x:t+Math.cos(s)*r,y:n+Math.sin(s)*r,angle:s}}}function Qh(e){const{chart:t,fill:n,line:r}=e;if(ko(n))return function(e,t){const n=e.getDatasetMeta(t),r=n&&e.isDatasetVisible(t);return r?n.dataset:null}(t,n);if("stack"===n)return function(e){const{scale:t,index:n,line:r}=e,s=[],i=r.segments,a=r.points,o=function(e,t){const n=[],r=e.getMatchingVisibleMetas("line");for(let s=0;s<r.length;s++){const e=r[s];if(e.index===t)break;e.hidden||n.unshift(e.dataset)}return n}(t,n);o.push(Hh({x:null,y:t.bottom},r));for(let l=0;l<i.length;l++){const e=i[l];for(let t=e.start;t<=e.end;t++)Gh(s,a[t],o)}return new Th({points:s,options:{}})}(e);if("shape"===n)return!0;const s=function(e){const t=e.scale||{};if(t.getPointPositionForValue)return function(e){const{scale:t,fill:n}=e,r=t.options,s=t.getLabels().length,i=r.reverse?t.max:t.min,a=function(e,t,n){let r;return r="start"===e?n:"end"===e?t.options.reverse?t.min:t.max:_o(e)?e.value:t.getBaseValue(),r}(n,t,i),o=[];if(r.grid.circular){const e=t.getPointPositionForValue(0,i);return new Yh({x:e.x,y:e.y,radius:t.getDistanceFromCenterForValue(a)})}for(let l=0;l<s;++l)o.push(t.getPointPositionForValue(l,a));return o}(e);return function(e){const{scale:t={},fill:n}=e,r=function(e,t){let n=null;return"start"===e?n=t.bottom:"end"===e?n=t.top:_o(e)?n=t.getPixelForValue(e.value):t.getBasePixel&&(n=t.getBasePixel()),n}(n,t);if(ko(r)){const e=t.isHorizontal();return{x:e?r:null,y:e?null:r}}return null}(e)}(e);return s instanceof Yh?s:Hh(s,r)}function Xh(e,t,n){const r=Qh(t),{chart:s,index:i,line:a,scale:o,axis:l}=t,c=a.options,d=c.fill,u=c.backgroundColor,{above:h=u,below:p=u}=d||{},f=s.getDatasetMeta(i),g=ld(s,f);r&&a.points.length&&(Yl(e,n),function(e,t){const{line:n,target:r,above:s,below:i,area:a,scale:o,clip:l}=t,c=n._loop?"angle":t.axis;e.save();let d=i;i!==s&&("x"===c?(Zh(e,r,a.top),tp(e,{line:n,target:r,color:s,scale:o,property:c,clip:l}),e.restore(),e.save(),Zh(e,r,a.bottom)):"y"===c&&(ep(e,r,a.left),tp(e,{line:n,target:r,color:i,scale:o,property:c,clip:l}),e.restore(),e.save(),ep(e,r,a.right),d=s));tp(e,{line:n,target:r,color:d,scale:o,property:c,clip:l}),e.restore()}(e,{line:a,target:r,above:h,below:p,area:n,scale:o,axis:l,clip:g}),Ql(e))}function Zh(e,t,n){const{segments:r,points:s}=t;let i=!0,a=!1;e.beginPath();for(const o of r){const{start:r,end:l}=o,c=s[r],d=s[Vh(r,l,s)];i?(e.moveTo(c.x,c.y),i=!1):(e.lineTo(c.x,n),e.lineTo(c.x,c.y)),a=!!t.pathSegment(e,o,{move:a}),a?e.closePath():e.lineTo(d.x,n)}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function ep(e,t,n){const{segments:r,points:s}=t;let i=!0,a=!1;e.beginPath();for(const o of r){const{start:r,end:l}=o,c=s[r],d=s[Vh(r,l,s)];i?(e.moveTo(c.x,c.y),i=!1):(e.lineTo(n,c.y),e.lineTo(c.x,c.y)),a=!!t.pathSegment(e,o,{move:a}),a?e.closePath():e.lineTo(n,d.y)}e.lineTo(n,t.first().y),e.closePath(),e.clip()}function tp(e,t){const{line:n,target:r,property:s,color:i,scale:a,clip:o}=t,l=function(e,t,n){const r=e.segments,s=e.points,i=t.points,a=[];for(const o of r){let{start:e,end:r}=o;r=Vh(e,r,s);const l=Bh(n,s[e],s[r],o.loop);if(!t.segments){a.push({source:o,target:l,start:s[e],end:s[r]});continue}const c=rd(t,l);for(const t of c){const e=Bh(n,i[t.start],i[t.end],t.loop),r=nd(o,s,e);for(const s of r)a.push({source:s,target:t,start:{[n]:Wh(l,e,"start",Math.max)},end:{[n]:Wh(l,e,"end",Math.min)}})}}return a}(n,r,s);for(const{source:c,target:d,start:u,end:h}of l){const{style:{backgroundColor:t=i}={}}=c,l=!0!==r;e.save(),e.fillStyle=t,np(e,a,o,l&&Bh(s,u,h)),e.beginPath();const p=!!n.pathSegment(e,c);let f;if(l){p?e.closePath():rp(e,r,h,s);const t=!!r.pathSegment(e,d,{move:p,reverse:!0});f=p&&t,f||rp(e,r,u,s)}e.closePath(),e.fill(f?"evenodd":"nonzero"),e.restore()}}function np(e,t,n,r){const s=t.chart.chartArea,{property:i,start:a,end:o}=r||{};if("x"===i||"y"===i){let t,r,l,c;"x"===i?(t=a,r=s.top,l=o,c=s.bottom):(t=s.left,r=a,l=s.right,c=o),e.beginPath(),n&&(t=Math.max(t,n.left),l=Math.min(l,n.right),r=Math.max(r,n.top),c=Math.min(c,n.bottom)),e.rect(t,r,l-t,c-r),e.clip()}}function rp(e,t,n,r){const s=t.interpolate(n,r);s&&e.lineTo(s.x,s.y)}var sp={id:"filler",afterDatasetsUpdate(e,t,n){const r=(e.data.datasets||[]).length,s=[];let i,a,o,l;for(a=0;a<r;++a)i=e.getDatasetMeta(a),o=i.dataset,l=null,o&&o.options&&o instanceof Th&&(l={visible:e.isDatasetVisible(a),index:a,fill:$h(o,a,r),chart:e,axis:i.controller.options.indexAxis,scale:i.vScale,line:o}),i.$filler=l,s.push(l);for(a=0;a<r;++a)l=s[a],l&&!1!==l.fill&&(l.fill=Kh(s,a,n.propagate))},beforeDraw(e,t,n){const r="beforeDraw"===n.drawTime,s=e.getSortedVisibleDatasetMetas(),i=e.chartArea;for(let a=s.length-1;a>=0;--a){const t=s[a].$filler;t&&(t.line.updateControlPoints(i,t.axis),r&&t.fill&&Xh(e.ctx,t,i))}},beforeDatasetsDraw(e,t,n){if("beforeDatasetsDraw"!==n.drawTime)return;const r=e.getSortedVisibleDatasetMetas();for(let s=r.length-1;s>=0;--s){const t=r[s].$filler;qh(t)&&Xh(e.ctx,t,e.chartArea)}},beforeDatasetDraw(e,t,n){const r=t.meta.$filler;qh(r)&&"beforeDatasetDraw"===n.drawTime&&Xh(e.ctx,r,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const ip=(e,t)=>{let{boxHeight:n=t,boxWidth:r=t}=e;return e.usePointStyle&&(n=Math.min(n,t),r=e.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(t,n)}};class ap extends Au{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=Co(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(t=>e.filter(t,this.chart.data))),e.sort&&(t=t.sort((t,n)=>e.sort(t,n,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const n=e.labels,r=hc(n.font),s=r.size,i=this._computeTitleHeight(),{boxWidth:a,itemHeight:o}=ip(n,s);let l,c;t.font=r.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(i,s,a,o)+10):(c=this.maxHeight,l=this._fitCols(i,r,a,o)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,r){const{ctx:s,maxWidth:i,options:{labels:{padding:a}}}=this,o=this.legendHitBoxes=[],l=this.lineWidths=[0],c=r+a;let d=e;s.textAlign="left",s.textBaseline="middle";let u=-1,h=-c;return this.legendItems.forEach((e,p)=>{const f=n+t/2+s.measureText(e.text).width;(0===p||l[l.length-1]+f+2*a>i)&&(d+=c,l[l.length-(p>0?0:1)]=0,h+=c,u++),o[p]={left:0,top:h,row:u,width:f,height:r},l[l.length-1]+=f+a}),d}_fitCols(e,t,n,r){const{ctx:s,maxHeight:i,options:{labels:{padding:a}}}=this,o=this.legendHitBoxes=[],l=this.columnSizes=[],c=i-e;let d=a,u=0,h=0,p=0,f=0;return this.legendItems.forEach((e,i)=>{const{itemWidth:g,itemHeight:m}=function(e,t,n,r,s){const i=function(e,t,n,r){let s=e.text;s&&"string"!==typeof s&&(s=s.reduce((e,t)=>e.length>t.length?e:t));return t+n.size/2+r.measureText(s).width}(r,e,t,n),a=function(e,t,n){let r=e;"string"!==typeof t.text&&(r=op(t,n));return r}(s,r,t.lineHeight);return{itemWidth:i,itemHeight:a}}(n,t,s,e,r);i>0&&h+m+2*a>c&&(d+=u+a,l.push({width:u,height:h}),p+=u+a,f++,u=h=0),o[i]={left:p,top:h,col:f,width:g,height:m},u=Math.max(u,g),h+=m+a}),d+=u,l.push({width:u,height:h}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:r},rtl:s}}=this,i=Qc(s,this.left,this.width);if(this.isHorizontal()){let s=0,a=wl(n,this.left+r,this.right-this.lineWidths[s]);for(const o of t)s!==o.row&&(s=o.row,a=wl(n,this.left+r,this.right-this.lineWidths[s])),o.top+=this.top+e+r,o.left=i.leftForLtr(i.x(a),o.width),a+=o.width+r}else{let s=0,a=wl(n,this.top+e+r,this.bottom-this.columnSizes[s].height);for(const o of t)o.col!==s&&(s=o.col,a=wl(n,this.top+e+r,this.bottom-this.columnSizes[s].height)),o.top=a,o.left+=this.left+r,o.left=i.leftForLtr(i.x(o.left),o.width),a+=o.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;Yl(e,this),this._draw(),Ql(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:r}=this,{align:s,labels:i}=e,a=Vl.color,o=Qc(e.rtl,this.left,this.width),l=hc(i.font),{padding:c}=i,d=l.size,u=d/2;let h;this.drawTitle(),r.textAlign=o.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=l.string;const{boxWidth:p,boxHeight:f,itemHeight:g}=ip(i,d),m=this.isHorizontal(),y=this._computeTitleHeight();h=m?{x:wl(s,this.left+c,this.right-n[0]),y:this.top+c+y,line:0}:{x:this.left+c,y:wl(s,this.top+y+c,this.bottom-t[0].height),line:0},Xc(this.ctx,e.textDirection);const x=g+c;this.legendItems.forEach((b,v)=>{r.strokeStyle=b.fontColor,r.fillStyle=b.fontColor;const w=r.measureText(b.text).width,_=o.textAlign(b.textAlign||(b.textAlign=i.textAlign)),k=p+u+w;let j=h.x,S=h.y;o.setWidth(this.width),m?v>0&&j+k+c>this.right&&(S=h.y+=x,h.line++,j=h.x=wl(s,this.left+c,this.right-n[h.line])):v>0&&S+x>this.bottom&&(j=h.x=j+t[h.line].width+c,h.line++,S=h.y=wl(s,this.top+y+c,this.bottom-t[h.line].height));if(function(e,t,n){if(isNaN(p)||p<=0||isNaN(f)||f<0)return;r.save();const s=So(n.lineWidth,1);if(r.fillStyle=So(n.fillStyle,a),r.lineCap=So(n.lineCap,"butt"),r.lineDashOffset=So(n.lineDashOffset,0),r.lineJoin=So(n.lineJoin,"miter"),r.lineWidth=s,r.strokeStyle=So(n.strokeStyle,a),r.setLineDash(So(n.lineDash,[])),i.usePointStyle){const a={radius:f*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:s},l=o.xPlus(e,p/2);Gl(r,a,l,t+u,i.pointStyleWidth&&p)}else{const i=t+Math.max((d-f)/2,0),a=o.leftForLtr(e,p),l=dc(n.borderRadius);r.beginPath(),Object.values(l).some(e=>0!==e)?rc(r,{x:a,y:i,w:p,h:f,radius:l}):r.rect(a,i,p,f),r.fill(),0!==s&&r.stroke()}r.restore()}(o.x(j),S,b),j=((e,t,n,r)=>e===(r?"left":"right")?n:"center"===e?(t+n)/2:t)(_,j+p+u,m?j+k:this.right,e.rtl),function(e,t,n){nc(r,n.text,e,t+g/2,l,{strikethrough:n.hidden,textAlign:o.textAlign(n.textAlign)})}(o.x(j),S,b),m)h.x+=k+c;else if("string"!==typeof b.text){const e=l.lineHeight;h.y+=op(b,e)+c}else h.y+=x}),Zc(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=hc(t.font),r=uc(t.padding);if(!t.display)return;const s=Qc(e.rtl,this.left,this.width),i=this.ctx,a=t.position,o=n.size/2,l=r.top+o;let c,d=this.left,u=this.width;if(this.isHorizontal())u=Math.max(...this.lineWidths),c=this.top+l,d=wl(e.align,d,this.right-u);else{const t=this.columnSizes.reduce((e,t)=>Math.max(e,t.height),0);c=l+wl(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const h=wl(a,d,d+u);i.textAlign=s.textAlign(vl(a)),i.textBaseline="middle",i.strokeStyle=t.color,i.fillStyle=t.color,i.font=n.string,nc(i,t.text,h,c,n)}_computeTitleHeight(){const e=this.options.title,t=hc(e.font),n=uc(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,r,s;if(ul(e,this.left,this.right)&&ul(t,this.top,this.bottom))for(s=this.legendHitBoxes,n=0;n<s.length;++n)if(r=s[n],ul(e,r.left,r.left+r.width)&&ul(t,r.top,r.top+r.height))return this.legendItems[n];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const i=this._hoveredItem,a=(s=n,null!==(r=i)&&null!==s&&r.datasetIndex===s.datasetIndex&&r.index===s.index);i&&!a&&Co(t.onLeave,[e,i,this],this),this._hoveredItem=n,n&&!a&&Co(t.onHover,[e,n,this],this)}else n&&Co(t.onClick,[e,n,this],this);var r,s}}function op(e,t){return t*(e.text?e.text.length:0)}var lp={id:"legend",_element:ap,start(e,t,n){const r=e.legend=new ap({ctx:e.ctx,options:n,chart:e});uu.configure(e,r,n),uu.addBox(e,r)},stop(e){uu.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const r=e.legend;uu.configure(e,r,n),r.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const r=t.datasetIndex,s=n.chart;s.isDatasetVisible(r)?(s.hide(r),t.hidden=!0):(s.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:s,color:i,useBorderRadius:a,borderRadius:o}}=e.legend.options;return e._getSortedDatasetMetas().map(e=>{const l=e.controller.getStyle(n?0:void 0),c=uc(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:i,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:r||l.pointStyle,rotation:l.rotation,textAlign:s||l.textAlign,borderRadius:a&&(o||l.borderRadius),datasetIndex:e.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class cp extends Au{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const r=wo(n.text)?n.text.length:1;this._padding=uc(n.padding);const s=r*hc(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:n,bottom:r,right:s,options:i}=this,a=i.align;let o,l,c,d=0;return this.isHorizontal()?(l=wl(a,n,s),c=t+e,o=s-n):("left"===i.position?(l=n+e,c=wl(a,r,t),d=-.5*Vo):(l=s-e,c=wl(a,t,r),d=.5*Vo),o=r-t),{titleX:l,titleY:c,maxWidth:o,rotation:d}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const n=hc(t.font),r=n.lineHeight/2+this._padding.top,{titleX:s,titleY:i,maxWidth:a,rotation:o}=this._drawArgs(r);nc(e,t.text,0,0,n,{color:t.color,maxWidth:a,rotation:o,textAlign:vl(t.align),textBaseline:"middle",translation:[s,i]})}}var dp={id:"title",_element:cp,start(e,t,n){!function(e,t){const n=new cp({ctx:e.ctx,options:t,chart:e});uu.configure(e,n,t),uu.addBox(e,n),e.titleBlock=n}(e,n)},stop(e){const t=e.titleBlock;uu.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const r=e.titleBlock;uu.configure(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};new WeakMap;const up={average(e){if(!e.length)return!1;let t,n,r=new Set,s=0,i=0;for(t=0,n=e.length;t<n;++t){const n=e[t].element;if(n&&n.hasValue()){const e=n.tooltipPosition();r.add(e.x),s+=e.y,++i}}if(0===i||0===r.size)return!1;return{x:[...r].reduce((e,t)=>e+t)/r.size,y:s/i}},nearest(e,t){if(!e.length)return!1;let n,r,s,i=t.x,a=t.y,o=Number.POSITIVE_INFINITY;for(n=0,r=e.length;n<r;++n){const r=e[n].element;if(r&&r.hasValue()){const e=al(t,r.getCenterPoint());e<o&&(o=e,s=r)}}if(s){const e=s.tooltipPosition();i=e.x,a=e.y}return{x:i,y:a}}};function hp(e,t){return t&&(wo(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function pp(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function fp(e,t){const{element:n,datasetIndex:r,index:s}=t,i=e.getDatasetMeta(r).controller,{label:a,value:o}=i.getLabelAndValue(s);return{chart:e,label:a,parsed:i.getParsed(s),raw:e.data.datasets[r].data[s],formattedValue:o,dataset:i.getDataset(),dataIndex:s,datasetIndex:r,element:n}}function gp(e,t){const n=e.chart.ctx,{body:r,footer:s,title:i}=e,{boxWidth:a,boxHeight:o}=t,l=hc(t.bodyFont),c=hc(t.titleFont),d=hc(t.footerFont),u=i.length,h=s.length,p=r.length,f=uc(t.padding);let g=f.height,m=0,y=r.reduce((e,t)=>e+t.before.length+t.lines.length+t.after.length,0);if(y+=e.beforeBody.length+e.afterBody.length,u&&(g+=u*c.lineHeight+(u-1)*t.titleSpacing+t.titleMarginBottom),y){g+=p*(t.displayColors?Math.max(o,l.lineHeight):l.lineHeight)+(y-p)*l.lineHeight+(y-1)*t.bodySpacing}h&&(g+=t.footerMarginTop+h*d.lineHeight+(h-1)*t.footerSpacing);let x=0;const b=function(e){m=Math.max(m,n.measureText(e).width+x)};return n.save(),n.font=c.string,Eo(e.title,b),n.font=l.string,Eo(e.beforeBody.concat(e.afterBody),b),x=t.displayColors?a+2+t.boxPadding:0,Eo(r,e=>{Eo(e.before,b),Eo(e.lines,b),Eo(e.after,b)}),x=0,n.font=d.string,Eo(e.footer,b),n.restore(),m+=f.width,{width:m,height:g}}function mp(e,t,n,r){const{x:s,width:i}=n,{width:a,chartArea:{left:o,right:l}}=e;let c="center";return"center"===r?c=s<=(o+l)/2?"left":"right":s<=i/2?c="left":s>=a-i/2&&(c="right"),function(e,t,n,r){const{x:s,width:i}=r,a=n.caretSize+n.caretPadding;return"left"===e&&s+i+a>t.width||"right"===e&&s-i-a<0||void 0}(c,e,t,n)&&(c="center"),c}function yp(e,t,n){const r=n.yAlign||t.yAlign||function(e,t){const{y:n,height:r}=t;return n<r/2?"top":n>e.height-r/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||mp(e,t,n,r),yAlign:r}}function xp(e,t,n,r){const{caretSize:s,caretPadding:i,cornerRadius:a}=e,{xAlign:o,yAlign:l}=n,c=s+i,{topLeft:d,topRight:u,bottomLeft:h,bottomRight:p}=dc(a);let f=function(e,t){let{x:n,width:r}=e;return"right"===t?n-=r:"center"===t&&(n-=r/2),n}(t,o);const g=function(e,t,n){let{y:r,height:s}=e;return"top"===t?r+=n:r-="bottom"===t?s+n:s/2,r}(t,l,c);return"center"===l?"left"===o?f+=c:"right"===o&&(f-=c):"left"===o?f-=Math.max(d,h)+s:"right"===o&&(f+=Math.max(u,p)+s),{x:dl(f,0,r.width-t.width),y:dl(g,0,r.height-t.height)}}function bp(e,t,n){const r=uc(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-r.right:e.x+r.left}function vp(e){return hp([],pp(e))}function wp(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const _p={beforeTitle:xo,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,r=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return n[t.dataIndex]}return""},afterTitle:xo,beforeBody:xo,beforeLabel:xo,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return vo(n)||(t+=n),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:xo,afterBody:xo,beforeFooter:xo,footer:xo,afterFooter:xo};function kp(e,t,n,r){const s=e[t].call(n,r);return"undefined"===typeof s?_p[t].call(n,r):s}class jp extends Au{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&t.options.animation&&n.animations,s=new fd(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,n=this._tooltipItems,fc(e,{tooltip:t,tooltipItems:n,type:"tooltip"})));var e,t,n}getTitle(e,t){const{callbacks:n}=t,r=kp(n,"beforeTitle",this,e),s=kp(n,"title",this,e),i=kp(n,"afterTitle",this,e);let a=[];return a=hp(a,pp(r)),a=hp(a,pp(s)),a=hp(a,pp(i)),a}getBeforeBody(e,t){return vp(kp(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:n}=t,r=[];return Eo(e,e=>{const t={before:[],lines:[],after:[]},s=wp(n,e);hp(t.before,pp(kp(s,"beforeLabel",this,e))),hp(t.lines,kp(s,"label",this,e)),hp(t.after,pp(kp(s,"afterLabel",this,e))),r.push(t)}),r}getAfterBody(e,t){return vp(kp(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:n}=t,r=kp(n,"beforeFooter",this,e),s=kp(n,"footer",this,e),i=kp(n,"afterFooter",this,e);let a=[];return a=hp(a,pp(r)),a=hp(a,pp(s)),a=hp(a,pp(i)),a}_createItems(e){const t=this._active,n=this.chart.data,r=[],s=[],i=[];let a,o,l=[];for(a=0,o=t.length;a<o;++a)l.push(fp(this.chart,t[a]));return e.filter&&(l=l.filter((t,r,s)=>e.filter(t,r,s,n))),e.itemSort&&(l=l.sort((t,r)=>e.itemSort(t,r,n))),Eo(l,t=>{const n=wp(e.callbacks,t);r.push(kp(n,"labelColor",this,t)),s.push(kp(n,"labelPointStyle",this,t)),i.push(kp(n,"labelTextColor",this,t))}),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=i,this.dataPoints=l,l}update(e,t){const n=this.options.setContext(this.getContext()),r=this._active;let s,i=[];if(r.length){const e=up[n.position].call(this,r,this._eventPosition);i=this._createItems(n),this.title=this.getTitle(i,n),this.beforeBody=this.getBeforeBody(i,n),this.body=this.getBody(i,n),this.afterBody=this.getAfterBody(i,n),this.footer=this.getFooter(i,n);const t=this._size=gp(this,n),a=Object.assign({},e,t),o=yp(this.chart,n,a),l=xp(n,a,o,this.chart);this.xAlign=o.xAlign,this.yAlign=o.yAlign,s={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(s={opacity:0});this._tooltipItems=i,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,r){const s=this.getCaretPosition(e,n,r);t.lineTo(s.x1,s.y1),t.lineTo(s.x2,s.y2),t.lineTo(s.x3,s.y3)}getCaretPosition(e,t,n){const{xAlign:r,yAlign:s}=this,{caretSize:i,cornerRadius:a}=n,{topLeft:o,topRight:l,bottomLeft:c,bottomRight:d}=dc(a),{x:u,y:h}=e,{width:p,height:f}=t;let g,m,y,x,b,v;return"center"===s?(b=h+f/2,"left"===r?(g=u,m=g-i,x=b+i,v=b-i):(g=u+p,m=g+i,x=b-i,v=b+i),y=g):(m="left"===r?u+Math.max(o,c)+i:"right"===r?u+p-Math.max(l,d)-i:this.caretX,"top"===s?(x=h,b=x-i,g=m-i,y=m+i):(x=h+f,b=x+i,g=m+i,y=m-i),v=x),{x1:g,x2:m,x3:y,y1:x,y2:b,y3:v}}drawTitle(e,t,n){const r=this.title,s=r.length;let i,a,o;if(s){const l=Qc(n.rtl,this.x,this.width);for(e.x=bp(this,n.titleAlign,n),t.textAlign=l.textAlign(n.titleAlign),t.textBaseline="middle",i=hc(n.titleFont),a=n.titleSpacing,t.fillStyle=n.titleColor,t.font=i.string,o=0;o<s;++o)t.fillText(r[o],l.x(e.x),e.y+i.lineHeight/2),e.y+=i.lineHeight+a,o+1===s&&(e.y+=n.titleMarginBottom-a)}}_drawColorBox(e,t,n,r,s){const i=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:o,boxWidth:l}=s,c=hc(s.bodyFont),d=bp(this,"left",s),u=r.x(d),h=o<c.lineHeight?(c.lineHeight-o)/2:0,p=t.y+h;if(s.usePointStyle){const t={radius:Math.min(l,o)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},n=r.leftForLtr(u,l)+l/2,c=p+o/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,$l(e,t,n,c),e.strokeStyle=i.borderColor,e.fillStyle=i.backgroundColor,$l(e,t,n,c)}else{e.lineWidth=_o(i.borderWidth)?Math.max(...Object.values(i.borderWidth)):i.borderWidth||1,e.strokeStyle=i.borderColor,e.setLineDash(i.borderDash||[]),e.lineDashOffset=i.borderDashOffset||0;const t=r.leftForLtr(u,l),n=r.leftForLtr(r.xPlus(u,1),l-2),a=dc(i.borderRadius);Object.values(a).some(e=>0!==e)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,rc(e,{x:t,y:p,w:l,h:o,radius:a}),e.fill(),e.stroke(),e.fillStyle=i.backgroundColor,e.beginPath(),rc(e,{x:n,y:p+1,w:l-2,h:o-2,radius:a}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(t,p,l,o),e.strokeRect(t,p,l,o),e.fillStyle=i.backgroundColor,e.fillRect(n,p+1,l-2,o-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:r}=this,{bodySpacing:s,bodyAlign:i,displayColors:a,boxHeight:o,boxWidth:l,boxPadding:c}=n,d=hc(n.bodyFont);let u=d.lineHeight,h=0;const p=Qc(n.rtl,this.x,this.width),f=function(n){t.fillText(n,p.x(e.x+h),e.y+u/2),e.y+=u+s},g=p.textAlign(i);let m,y,x,b,v,w,_;for(t.textAlign=i,t.textBaseline="middle",t.font=d.string,e.x=bp(this,g,n),t.fillStyle=n.bodyColor,Eo(this.beforeBody,f),h=a&&"right"!==g?"center"===i?l/2+c:l+2+c:0,b=0,w=r.length;b<w;++b){for(m=r[b],y=this.labelTextColors[b],t.fillStyle=y,Eo(m.before,f),x=m.lines,a&&x.length&&(this._drawColorBox(t,e,b,p,n),u=Math.max(d.lineHeight,o)),v=0,_=x.length;v<_;++v)f(x[v]),u=d.lineHeight;Eo(m.after,f)}h=0,u=d.lineHeight,Eo(this.afterBody,f),e.y-=s}drawFooter(e,t,n){const r=this.footer,s=r.length;let i,a;if(s){const o=Qc(n.rtl,this.x,this.width);for(e.x=bp(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=o.textAlign(n.footerAlign),t.textBaseline="middle",i=hc(n.footerFont),t.fillStyle=n.footerColor,t.font=i.string,a=0;a<s;++a)t.fillText(r[a],o.x(e.x),e.y+i.lineHeight/2),e.y+=i.lineHeight+n.footerSpacing}}drawBackground(e,t,n,r){const{xAlign:s,yAlign:i}=this,{x:a,y:o}=e,{width:l,height:c}=n,{topLeft:d,topRight:u,bottomLeft:h,bottomRight:p}=dc(r.cornerRadius);t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(a+d,o),"top"===i&&this.drawCaret(e,t,n,r),t.lineTo(a+l-u,o),t.quadraticCurveTo(a+l,o,a+l,o+u),"center"===i&&"right"===s&&this.drawCaret(e,t,n,r),t.lineTo(a+l,o+c-p),t.quadraticCurveTo(a+l,o+c,a+l-p,o+c),"bottom"===i&&this.drawCaret(e,t,n,r),t.lineTo(a+h,o+c),t.quadraticCurveTo(a,o+c,a,o+c-h),"center"===i&&"left"===s&&this.drawCaret(e,t,n,r),t.lineTo(a,o+d),t.quadraticCurveTo(a,o,a+d,o),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,r=n&&n.x,s=n&&n.y;if(r||s){const n=up[e.position].call(this,this._active,this._eventPosition);if(!n)return;const i=this._size=gp(this,e),a=Object.assign({},n,this._size),o=yp(t,e,a),l=xp(e,a,o,t);r._to===l.x&&s._to===l.y||(this.xAlign=o.xAlign,this.yAlign=o.yAlign,this.width=i.width,this.height=i.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const i=uc(t.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&a&&(e.save(),e.globalAlpha=n,this.drawBackground(s,e,r,t),Xc(e,t.textDirection),s.y+=i.top,this.drawTitle(s,e,t),this.drawBody(s,e,t),this.drawFooter(s,e,t),Zc(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,r=e.map(e=>{let{datasetIndex:t,index:n}=e;const r=this.chart.getDatasetMeta(t);if(!r)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:r.data[n],index:n}}),s=!Ao(n,r),i=this._positionChanged(r,t);(s||i)&&(this._active=r,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],i=this._getActiveElements(e,s,t,n),a=this._positionChanged(i,e),o=t||!Ao(i,s)||a;return o&&(this._active=i,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),o}_getActiveElements(e,t,n,r){const s=this.options;if("mouseout"===e.type)return[];if(!r)return t.filter(e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index));const i=this.chart.getElementsAtEventForMode(e,s.mode,s,n);return s.reverse&&i.reverse(),i}_positionChanged(e,t){const{caretX:n,caretY:r,options:s}=this,i=up[s.position].call(this,e,t);return!1!==i&&(n!==i.x||r!==i.y)}}(0,Da.A)(jp,"positioners",up);var Sp={id:"tooltip",_element:jp,positioners:up,afterInit(e,t,n){n&&(e.tooltip=new jp({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",(0,s.A)((0,s.A)({},n),{},{cancelable:!0})))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:_p},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function Np(e,t,n,r){const s=e.indexOf(t);if(-1===s)return((e,t,n,r)=>("string"===typeof t?(n=e.push(t)-1,r.unshift({index:n,label:t})):isNaN(t)&&(n=null),n))(e,t,n,r);return s!==e.lastIndexOf(t)?n:s}function Cp(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class Ep extends Fu{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:n,label:r}of t)e[n]===r&&e.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(vo(e))return null;const n=this.getLabels();return((e,t)=>null===e?null:dl(Math.round(e),0,t))(t=isFinite(t)&&n[t]===e?t:Np(n,e,So(t,e),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(n=0),t||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,r=[];let s=this.getLabels();s=0===e&&t===s.length-1?s:s.slice(e,t+1),this._valueRange=Math.max(s.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let i=e;i<=t;i++)r.push({value:i});return r}getLabelForValue(e){return Cp.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function Ap(e,t){const n=[],{bounds:r,step:s,min:i,max:a,precision:o,count:l,maxTicks:c,maxDigits:d,includeBounds:u}=e,h=s||1,p=c-1,{min:f,max:g}=t,m=!vo(i),y=!vo(a),x=!vo(l),b=(g-f)/(d+1);let v,w,_,k,j=Zo((g-f)/p/h)*h;if(j<1e-14&&!m&&!y)return[{value:f},{value:g}];k=Math.ceil(g/j)-Math.floor(f/j),k>p&&(j=Zo(k*j/p/h)*h),vo(o)||(v=Math.pow(10,o),j=Math.ceil(j*v)/v),"ticks"===r?(w=Math.floor(f/j)*j,_=Math.ceil(g/j)*j):(w=f,_=g),m&&y&&s&&function(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}((a-i)/s,j/1e3)?(k=Math.round(Math.min((a-i)/j,c)),j=(a-i)/k,w=i,_=a):x?(w=m?i:w,_=y?a:_,k=l-1,j=(_-w)/k):(k=(_-w)/j,k=Xo(k,Math.round(k),j/1e3)?Math.round(k):Math.ceil(k));const S=Math.max(sl(j),sl(w));v=Math.pow(10,vo(o)?S:o),w=Math.round(w*v)/v,_=Math.round(_*v)/v;let N=0;for(m&&(u&&w!==i?(n.push({value:i}),w<i&&N++,Xo(Math.round((w+N*j)*v)/v,i,Pp(i,b,e))&&N++):w<i&&N++);N<k;++N){const e=Math.round((w+N*j)*v)/v;if(y&&e>a)break;n.push({value:e})}return y&&u&&_!==a?n.length&&Xo(n[n.length-1].value,a,Pp(a,b,e))?n[n.length-1].value=a:n.push({value:a}):y&&_!==a||n.push({value:_}),n}function Pp(e,t,n){let{horizontal:r,minRotation:s}=n;const i=nl(s),a=(r?Math.sin(i):Math.cos(i))||.001,o=.75*t*(""+e).length;return Math.min(t/a,o)}(0,Da.A)(Ep,"id","category"),(0,Da.A)(Ep,"defaults",{ticks:{callback:Cp}});class Tp extends Fu{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return vo(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this;const i=e=>r=t?r:e,a=e=>s=n?s:e;if(e){const e=Qo(r),t=Qo(s);e<0&&t<0?a(0):e>0&&t>0&&i(0)}if(r===s){let t=0===s?1:Math.abs(.05*s);a(s+t),e||i(r-t)}this.min=r,this.max=s}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:n,stepSize:r}=e;return r?(t=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,t>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(r," would result generating up to ").concat(t," ticks. Limiting to 1000.")),t=1e3)):(t=this.computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r=Ap({maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&tl(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const r=(n-t)/Math.max(e.length-1,1)/2;t-=r,n+=r}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return Il(e,this.chart.options.locale,this.options.ticks.format)}}class Op extends Tp{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=ko(e)?e:0,this.max=ko(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=nl(this.options.ticks.minRotation),r=(e?Math.sin(n):Math.cos(n))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}(0,Da.A)(Op,"id","linear"),(0,Da.A)(Op,"defaults",{ticks:{callback:Ll.formatters.numeric}});const Mp=e=>Math.floor(Yo(e)),Ip=(e,t)=>Math.pow(10,Mp(e)+t);function Rp(e){return 1===e/Math.pow(10,Mp(e))}function Lp(e,t,n){const r=Math.pow(10,n),s=Math.floor(e/r);return Math.ceil(t/r)-s}function Dp(e,t){let{min:n,max:r}=t;n=jo(e.min,n);const s=[],i=Mp(n);let a=function(e,t){let n=Mp(t-e);for(;Lp(e,t,n)>10;)n++;for(;Lp(e,t,n)<10;)n--;return Math.min(n,Mp(e))}(n,r),o=a<0?Math.pow(10,Math.abs(a)):1;const l=Math.pow(10,a),c=i>a?Math.pow(10,i):0,d=Math.round((n-c)*o)/o,u=Math.floor((n-c)/l/10)*l*10;let h=Math.floor((d-u)/Math.pow(10,a)),p=jo(e.min,Math.round((c+u+h*Math.pow(10,a))*o)/o);for(;p<r;)s.push({value:p,major:Rp(p),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(a++,h=2,o=a>=0?1:o),p=Math.round((c+u+h*Math.pow(10,a))*o)/o;const f=jo(e.max,p);return s.push({value:f,major:Rp(f),significand:h}),s}class zp extends Fu{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const n=Tp.prototype.parse.apply(this,[e,t]);if(0!==n)return ko(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=ko(e)?Math.max(0,e):null,this.max=ko(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!ko(this._userMin)&&(this.min=e===Ip(this.min,0)?Ip(this.min,-1):Ip(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let n=this.min,r=this.max;const s=t=>n=e?n:t,i=e=>r=t?r:e;n===r&&(n<=0?(s(1),i(10)):(s(Ip(n,-1)),i(Ip(r,1)))),n<=0&&s(Ip(r,-1)),r<=0&&i(Ip(n,1)),this.min=n,this.max=r}buildTicks(){const e=this.options,t=Dp({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&tl(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":Il(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Yo(e),this._valueRange=Yo(this.max)-Yo(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Yo(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function Fp(e){const t=e.ticks;if(t.display&&e.display){const e=uc(t.backdropPadding);return So(t.font&&t.font.size,Vl.font.size)+e.height}return 0}function Up(e,t,n){return n=wo(n)?n:[n],{w:Hl(e,t.string,n),h:n.length*t.lineHeight}}function Bp(e,t,n,r,s){return e===r||e===s?{start:t-n/2,end:t+n/2}:e<r||e>s?{start:t-n,end:t}:{start:t,end:t+n}}function Vp(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),r=[],s=[],i=e._pointLabels.length,a=e.options.pointLabels,o=a.centerPointLabels?Vo/i:0;for(let l=0;l<i;l++){const i=a.setContext(e.getPointLabelContext(l));s[l]=i.padding;const c=e.getPointPosition(l,e.drawingArea+s[l],o),d=hc(i.font),u=Up(e.ctx,d,e._pointLabels[l]);r[l]=u;const h=ll(e.getIndexAngle(l)+o),p=Math.round(rl(h));Wp(n,t,h,Bp(p,c.x,u.w,0,180),Bp(p,c.y,u.h,90,270))}e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=function(e,t,n){const r=[],s=e._pointLabels.length,i=e.options,{centerPointLabels:a,display:o}=i.pointLabels,l={extra:Fp(i)/2,additionalAngle:a?Vo/s:0};let c;for(let d=0;d<s;d++){l.padding=n[d],l.size=t[d];const s=Hp(e,d,l);r.push(s),"auto"===o&&(s.visible=qp(s,c),s.visible&&(c=s))}return r}(e,r,s)}function Wp(e,t,n,r,s){const i=Math.abs(Math.sin(n)),a=Math.abs(Math.cos(n));let o=0,l=0;r.start<t.l?(o=(t.l-r.start)/i,e.l=Math.min(e.l,t.l-o)):r.end>t.r&&(o=(r.end-t.r)/i,e.r=Math.max(e.r,t.r+o)),s.start<t.t?(l=(t.t-s.start)/a,e.t=Math.min(e.t,t.t-l)):s.end>t.b&&(l=(s.end-t.b)/a,e.b=Math.max(e.b,t.b+l))}function Hp(e,t,n){const r=e.drawingArea,{extra:s,additionalAngle:i,padding:a,size:o}=n,l=e.getPointPosition(t,r+s+a,i),c=Math.round(rl(ll(l.angle+$o))),d=function(e,t,n){90===n||270===n?e-=t/2:(n>270||n<90)&&(e-=t);return e}(l.y,o.h,c),u=function(e){if(0===e||180===e)return"center";if(e<180)return"left";return"right"}(c),h=function(e,t,n){"right"===n?e-=t:"center"===n&&(e-=t/2);return e}(l.x,o.w,u);return{visible:!0,x:l.x,y:d,textAlign:u,left:h,top:d,right:h+o.w,bottom:d+o.h}}function qp(e,t){if(!t)return!0;const{left:n,top:r,right:s,bottom:i}=e;return!(Jl({x:n,y:r},t)||Jl({x:n,y:i},t)||Jl({x:s,y:r},t)||Jl({x:s,y:i},t))}function Kp(e,t,n){const{left:r,top:s,right:i,bottom:a}=n,{backdropColor:o}=t;if(!vo(o)){const n=dc(t.borderRadius),l=uc(t.backdropPadding);e.fillStyle=o;const c=r-l.left,d=s-l.top,u=i-r+l.width,h=a-s+l.height;Object.values(n).some(e=>0!==e)?(e.beginPath(),rc(e,{x:c,y:d,w:u,h:h,radius:n}),e.fill()):e.fillRect(c,d,u,h)}}function $p(e,t,n,r){const{ctx:s}=e;if(n)s.arc(e.xCenter,e.yCenter,t,0,Wo);else{let n=e.getPointPosition(0,t);s.moveTo(n.x,n.y);for(let i=1;i<r;i++)n=e.getPointPosition(i,t),s.lineTo(n.x,n.y)}}(0,Da.A)(zp,"id","logarithmic"),(0,Da.A)(zp,"defaults",{ticks:{callback:Ll.formatters.logarithmic,major:{enabled:!0}}});class Gp extends Tp{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=uc(Fp(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=ko(e)&&!isNaN(e)?e:0,this.max=ko(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Fp(this.options))}generateTickLabels(e){Tp.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((e,t)=>{const n=Co(this.options.pointLabels.callback,[e,t],this);return n||0===n?n:""}).filter((e,t)=>this.chart.getDataVisibility(t))}fit(){const e=this.options;e.display&&e.pointLabels.display?Vp(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,n,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,r))}getIndexAngle(e){return ll(e*(Wo/(this._pointLabels.length||1))+nl(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(vo(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(vo(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const n=t[e];return function(e,t,n){return fc(e,{label:n,index:t,type:"pointLabel"})}(this.getContext(),e,n)}}getPointPosition(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=this.getIndexAngle(e)-$o+n;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:n,right:r,bottom:s}=this._pointLabelItems[e];return{left:t,top:n,right:r,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),$p(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:n,grid:r,border:s}=t,i=this._pointLabels.length;let a,o,l;if(t.pointLabels.display&&function(e,t){const{ctx:n,options:{pointLabels:r}}=e;for(let s=t-1;s>=0;s--){const t=e._pointLabelItems[s];if(!t.visible)continue;const i=r.setContext(e.getPointLabelContext(s));Kp(n,i,t);const a=hc(i.font),{x:o,y:l,textAlign:c}=t;nc(n,e._pointLabels[s],o,l+a.lineHeight/2,a,{color:i.color,textAlign:c,textBaseline:"middle"})}}(this,i),r.display&&this.ticks.forEach((e,t)=>{if(0!==t||0===t&&this.min<0){o=this.getDistanceFromCenterForValue(e.value);const n=this.getContext(t),a=r.setContext(n),l=s.setContext(n);!function(e,t,n,r,s){const i=e.ctx,a=t.circular,{color:o,lineWidth:l}=t;!a&&!r||!o||!l||n<0||(i.save(),i.strokeStyle=o,i.lineWidth=l,i.setLineDash(s.dash||[]),i.lineDashOffset=s.dashOffset,i.beginPath(),$p(e,n,a,r),i.closePath(),i.stroke(),i.restore())}(this,a,o,i,l)}}),n.display){for(e.save(),a=i-1;a>=0;a--){const r=n.setContext(this.getPointLabelContext(a)),{color:s,lineWidth:i}=r;i&&s&&(e.lineWidth=i,e.strokeStyle=s,e.setLineDash(r.borderDash),e.lineDashOffset=r.borderDashOffset,o=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),l=this.getPointPosition(a,o),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,n=t.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let s,i;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((r,a)=>{if(0===a&&this.min>=0&&!t.reverse)return;const o=n.setContext(this.getContext(a)),l=hc(o.font);if(s=this.getDistanceFromCenterForValue(this.ticks[a].value),o.showLabelBackdrop){e.font=l.string,i=e.measureText(r.label).width,e.fillStyle=o.backdropColor;const t=uc(o.backdropPadding);e.fillRect(-i/2-t.left,-s-l.size/2-t.top,i+t.width,l.size+t.height)}nc(e,r.label,0,-s,l,{color:o.color,strokeColor:o.textStrokeColor,strokeWidth:o.textStrokeWidth})}),e.restore()}drawTitle(){}}(0,Da.A)(Gp,"id","radialLinear"),(0,Da.A)(Gp,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Ll.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}}),(0,Da.A)(Gp,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),(0,Da.A)(Gp,"descriptors",{angleLines:{_fallback:"grid"}});const Jp={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Yp=Object.keys(Jp);function Qp(e,t){return e-t}function Xp(e,t){if(vo(t))return null;const n=e._adapter,{parser:r,round:s,isoWeekday:i}=e._parseOpts;let a=t;return"function"===typeof r&&(a=r(a)),ko(a)||(a="string"===typeof r?n.parse(a,r):n.parse(a)),null===a?null:(s&&(a="week"!==s||!el(i)&&!0!==i?n.startOf(a,s):n.startOf(a,"isoWeek",i)),+a)}function Zp(e,t,n,r){const s=Yp.length;for(let i=Yp.indexOf(e);i<s-1;++i){const e=Jp[Yp[i]],s=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((n-t)/(s*e.size))<=r)return Yp[i]}return Yp[s-1]}function ef(e,t,n){if(n){if(n.length){const{lo:r,hi:s}=hl(n,t);e[n[r]>=t?n[r]:n[s]]=!0}}else e[t]=!0}function tf(e,t,n){const r=[],s={},i=t.length;let a,o;for(a=0;a<i;++a)o=t[a],s[o]=a,r.push({value:o,major:!1});return 0!==i&&n?function(e,t,n,r){const s=e._adapter,i=+s.startOf(t[0].value,r),a=t[t.length-1].value;let o,l;for(o=i;o<=a;o=+s.add(o,1,r))l=n[o],l>=0&&(t[l].major=!0);return t}(e,r,s,n):r}class nf extends Fu{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.time||(e.time={}),r=this._adapter=new qd(e.adapters.date);r.init(t),Io(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:Xp(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:r,max:s,minDefined:i,maxDefined:a}=this.getUserBounds();function o(e){i||isNaN(e.min)||(r=Math.min(r,e.min)),a||isNaN(e.max)||(s=Math.max(s,e.max))}i&&a||(o(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||o(this.getMinMax(!1))),r=ko(r)&&!isNaN(r)?r:+t.startOf(Date.now(),n),s=ko(s)&&!isNaN(s)?s:+t.endOf(Date.now(),n)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,r="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,i=function(e,t,n){let r=0,s=e.length;for(;r<s&&e[r]<t;)r++;for(;s>r&&e[s-1]>n;)s--;return r>0||s<e.length?e.slice(r,s):e}(r,s,this.max);return this._unit=t.unit||(n.autoSkip?Zp(t.minUnit,this.min,this.max,this._getLabelCapacity(s)):function(e,t,n,r,s){for(let i=Yp.length-1;i>=Yp.indexOf(n);i--){const n=Yp[i];if(Jp[n].common&&e._adapter.diff(s,r,n)>=t-1)return n}return Yp[n?Yp.indexOf(n):0]}(this,i.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(let t=Yp.indexOf(e)+1,n=Yp.length;t<n;++t)if(Jp[Yp[t]].common)return Yp[t]}(this._unit):void 0,this.initOffsets(r),e.reverse&&i.reverse(),tf(this,i,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(){let e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=0,s=0;this.options.offset&&n.length&&(e=this.getDecimalForValue(n[0]),r=1===n.length?1-e:(this.getDecimalForValue(n[1])-e)/2,t=this.getDecimalForValue(n[n.length-1]),s=1===n.length?t:(t-this.getDecimalForValue(n[n.length-2]))/2);const i=n.length<3?.5:.25;r=dl(r,0,i),s=dl(s,0,i),this._offsets={start:r,end:s,factor:1/(r+1+s)}}_generate(){const e=this._adapter,t=this.min,n=this.max,r=this.options,s=r.time,i=s.unit||Zp(s.minUnit,t,n,this._getLabelCapacity(t)),a=So(r.ticks.stepSize,1),o="week"===i&&s.isoWeekday,l=el(o)||!0===o,c={};let d,u,h=t;if(l&&(h=+e.startOf(h,"isoWeek",o)),h=+e.startOf(h,l?"day":i),e.diff(n,t,i)>1e5*a)throw new Error(t+" and "+n+" are too far apart with stepSize of "+a+" "+i);const p="data"===r.ticks.source&&this.getDataTimestamps();for(d=h,u=0;d<n;d=+e.add(d,a,i),u++)ef(c,d,p);return d!==n&&"ticks"!==r.bounds&&1!==u||ef(c,d,p),Object.keys(c).sort(Qp).map(e=>+e)}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}format(e,t){const n=this.options.time.displayFormats,r=this._unit,s=t||n[r];return this._adapter.format(e,s)}_tickFormatFunction(e,t,n,r){const s=this.options,i=s.ticks.callback;if(i)return Co(i,[e,t,n],this);const a=s.time.displayFormats,o=this._unit,l=this._majorUnit,c=o&&a[o],d=l&&a[l],u=n[t],h=l&&d&&u&&u.major;return this._adapter.format(e,r||(h?d:c))}generateTickLabels(e){let t,n,r;for(t=0,n=e.length;t<n;++t)r=e[t],r.label=this._tickFormatFunction(r.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,r=nl(this.isHorizontal()?t.maxRotation:t.minRotation),s=Math.cos(r),i=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:n*s+a*i,h:n*i+a*s}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,r=n[t.unit]||n.millisecond,s=this._tickFormatFunction(e,0,tf(this,[e],this._majorUnit),r),i=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/i.w:this.height/i.h)-1;return a>0?a:1}getDataTimestamps(){let e,t,n=this._cache.data||[];if(n.length)return n;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,t=r.length;e<t;++e)n=n.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const r=this.getLabels();for(t=0,n=r.length;t<n;++t)e.push(Xp(this,r[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return yl(e.sort(Qp))}}function rf(e,t,n){let r,s,i,a,o=0,l=e.length-1;n?(t>=e[o].pos&&t<=e[l].pos&&({lo:o,hi:l}=pl(e,"pos",t)),({pos:r,time:i}=e[o]),({pos:s,time:a}=e[l])):(t>=e[o].time&&t<=e[l].time&&({lo:o,hi:l}=pl(e,"time",t)),({time:r,pos:i}=e[o]),({time:s,pos:a}=e[l]));const c=s-r;return c?i+(a-i)*(t-r)/c:i}(0,Da.A)(nf,"id","time"),(0,Da.A)(nf,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class sf extends nf{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=rf(t,this.min),this._tableRange=rf(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:n}=this,r=[],s=[];let i,a,o,l,c;for(i=0,a=e.length;i<a;++i)l=e[i],l>=t&&l<=n&&r.push(l);if(r.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(i=0,a=r.length;i<a;++i)c=r[i+1],o=r[i-1],l=r[i],Math.round((c+o)/2)!==l&&s.push({time:l,pos:i/(a-1)});return s}_generate(){const e=this.min,t=this.max;let n=super.getDataTimestamps();return n.includes(e)&&n.length||n.splice(0,0,e),n.includes(t)&&1!==n.length||n.push(t),n.sort((e,t)=>e-t)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),n=this.getLabelTimestamps();return e=t.length&&n.length?this.normalize(t.concat(n)):t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return(rf(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return rf(this._table,n*this._tableRange+this._minPos,!0)}}(0,Da.A)(sf,"id","timeseries"),(0,Da.A)(sf,"defaults",nf.defaults);const af=["height","width","redraw","datasetIdKey","type","data","options","plugins","fallbackContent","updateMode"],of="label";function lf(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function cf(e,t){e.labels=t}function df(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:of;const r=[];e.datasets=t.map(t=>{const i=e.datasets.find(e=>e[n]===t[n]);return i&&t.data&&!r.includes(i)?(r.push(i),Object.assign(i,t),i):(0,s.A)({},t)})}function uf(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:of;const n={labels:[],datasets:[]};return cf(n,e.labels),df(n,e.datasets,t),n}function hf(e,n){const{height:r=150,width:a=300,redraw:o=!1,datasetIdKey:l,type:c,data:d,options:u,plugins:h=[],fallbackContent:p,updateMode:f}=e,g=i(e,af),m=(0,t.useRef)(null),y=(0,t.useRef)(null),x=()=>{m.current&&(y.current=new mh(m.current,{type:c,data:uf(d,l),options:u&&(0,s.A)({},u),plugins:h}),lf(n,y.current))},b=()=>{lf(n,null),y.current&&(y.current.destroy(),y.current=null)};return(0,t.useEffect)(()=>{!o&&y.current&&u&&function(e,t){const n=e.options;n&&t&&Object.assign(n,t)}(y.current,u)},[o,u]),(0,t.useEffect)(()=>{!o&&y.current&&cf(y.current.config.data,d.labels)},[o,d.labels]),(0,t.useEffect)(()=>{!o&&y.current&&d.datasets&&df(y.current.config.data,d.datasets,l)},[o,d.datasets]),(0,t.useEffect)(()=>{y.current&&(o?(b(),setTimeout(x)):y.current.update(f))},[o,u,d.labels,d.datasets,f]),(0,t.useEffect)(()=>{y.current&&(b(),setTimeout(x))},[c]),(0,t.useEffect)(()=>(x(),()=>b()),[]),t.createElement("canvas",(0,s.A)({ref:m,role:"img",height:r,width:a},g),p)}const pf=(0,t.forwardRef)(hf);function ff(e,n){return mh.register(n),(0,t.forwardRef)((n,r)=>t.createElement(pf,(0,s.A)((0,s.A)({},n),{},{ref:r,type:e})))}const gf=ff("line",zd);var mf=n(5472),yf=n(7979);const xf=e=>{let{bucketId:t,size:n="md",showLabel:r=!1,showDescription:s=!1,className:i=""}=e;const a=(0,yf.getBucketDefinition)(t);if(!a)return(0,zs.jsxs)("div",{className:"flex items-center space-x-2 ".concat(i),children:[(0,zs.jsx)("span",{className:"text-gray-400",children:"\ud83d\udcca"}),r&&(0,zs.jsx)("span",{className:"text-sm text-gray-500",children:"Unknown Bucket"})]});return(0,zs.jsxs)("div",{className:"flex items-center space-x-2 ".concat(i),children:[(0,zs.jsx)("div",{className:"".concat({sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"}[n]," flex items-center justify-center"),children:(0,zs.jsx)("span",{className:{sm:"text-sm",md:"text-base",lg:"text-lg"}[n],children:a.emoji})}),r&&(0,zs.jsxs)("div",{className:"flex flex-col",children:[(0,zs.jsx)("span",{className:"text-sm font-medium ".concat(a.color.split(" ")[1]),children:a.label}),s&&(0,zs.jsx)("span",{className:"text-xs text-gray-500",children:a.description})]})]})},bf=e=>{let{chartId:t,chartName:r,className:s=""}=e;const{getChartBuckets:i,getPrimaryBucket:a}=n(7979),o=i(t),l=a(t);return(0,zs.jsxs)("div",{className:"flex items-center justify-between mb-4 ".concat(s),children:[(0,zs.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:r}),(0,zs.jsx)("div",{className:"flex items-center space-x-2",children:o.map(e=>(0,zs.jsx)(xf,{bucketId:e,size:"sm",showLabel:!0,className:e===l?"ring-2 ring-blue-500 ring-opacity-50":""},e))})]})};mh.register(Ep,Op,Mh,Th,dp,Sp,lp,sp);const vf=e=>{let{properties:n}=e;const[r,s]=(0,t.useState)([]),[i,a]=(0,t.useState)(!0),[o,l]=(0,t.useState)("all"),[c]=(0,t.useState)("revenue"),d=(0,t.useCallback)(async()=>{try{if(a(!0),console.log("Loading chart data from ACTIVE CSVs only:",n),n.length>0){const t=n[0];console.log("Chico property:",t);let r=null;try{const e=await(0,mf.getCSVData)();if(console.log("\ud83d\udcca Using Supabase data for chart:",e.length,"active CSVs"),console.log("\ud83d\udcca Active CSVs for chart data:",e.length),e.length>0){const t=(e=>{const t=[];return e.forEach(e=>{const n=e.file_name||e.fileName,r=e.file_type||e.fileType,s=e.account_categories||e.accountCategories,i=e.preview_data||e.previewData;console.log("\ud83d\udcca Processing CSV: ".concat(n," (").concat(r,") for chart data")),"cash_flow"===r?(console.log("\ud83d\udcb0 Processing CASH FLOW CSV for key metrics chart..."),[{name:"Total Income",type:"income"},{name:"Total Expense",type:"expense"},{name:"Net Operating Income",type:"net_income"}].forEach(n=>{const r=i.find(e=>{var t;return((null===(t=e.account_name)||void 0===t?void 0:t.trim().toLowerCase())||"").includes(n.name.toLowerCase())});r&&r.time_series&&(console.log("\ud83c\udfaf Found key metric for chart: ".concat(r.account_name)),Object.entries(r.time_series).forEach(r=>{let[s,i]=r;if("total"!==s.toLowerCase()&&"sum"!==s.toLowerCase()&&"grand total"!==s.toLowerCase()&&"number"===typeof i){let r=t.find(e=>e.date===s);r||(r={id:"".concat(e.id,"-").concat(s),date:s,month:s,revenue:"0",occupancy_rate:"0",property_name:"Chico"},t.push(r)),"income"===n.type?r.revenue=i.toString():"expense"===n.type?r.revenue=(-i).toString():"net_income"===n.type&&(r.revenue=i.toString())}}))})):Object.entries(s).forEach(n=>{let[r,s]=n;const a=i.find(e=>{var t;return(null===(t=e.account_name)||void 0===t?void 0:t.trim())===r});a&&a.time_series&&"income"===s&&Object.entries(a.time_series).forEach(n=>{let[r,s]=n;if("total"!==r.toLowerCase()&&"sum"!==r.toLowerCase()&&"grand total"!==r.toLowerCase()&&"number"===typeof s&&s>0){let n=t.find(e=>e.date===r);n||(n={id:"".concat(e.id,"-").concat(r),date:r,month:r,revenue:"0",occupancy_rate:"0",property_name:"Chico"},t.push(n));const i=parseFloat(n.revenue)||0;n.revenue=(i+s).toString()}})})}),t.sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime()),console.log("\ud83d\udcc8 Processed chart data:",t),t})(e);console.log("\ud83d\udcc8 CSV chart data processed:",t),t&&t.length>0&&(r=t)}if(!r||0===r.length)return console.log("\ud83d\udcca No active CSV data found, setting empty chart"),s([]),void a(!1);s(r),a(!1)}catch(e){console.error("Error processing CSV chart data:",e),s([]),a(!1)}}else console.log("\ud83d\udcca No properties available for chart data"),s([]),a(!1)}catch(e){console.error("Error loading chart data:",e),s([]),a(!1)}},[n]);(0,t.useEffect)(()=>{n.length>0&&d()},[n,d]),(0,t.useEffect)(()=>{const e=()=>{console.log("\ud83d\udd04 RevenueChart received data update event"),d()};return window.addEventListener("dataUpdated",e),()=>window.removeEventListener("dataUpdated",e)},[d]);const u="all"===o?r:r.filter(e=>e.property_name===o),h={labels:u.map(e=>e.month||e.date),datasets:[{label:"revenue"===c?"Revenue":"Occupancy Rate",data:u.map(e=>"revenue"===c?parseFloat(e.revenue):parseFloat(e.occupancy_rate)),borderColor:"revenue"===c?"#0EA5E9":"#10B981",backgroundColor:"revenue"===c?"rgba(14, 165, 233, 0.1)":"rgba(16, 185, 129, 0.1)",borderWidth:2,fill:!0,tension:.4,pointBackgroundColor:"revenue"===c?"#0EA5E9":"#10B981",pointBorderColor:"#fff",pointBorderWidth:2,pointRadius:4,pointHoverRadius:6}]},p={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",borderColor:"revenue"===c?"rgba(14, 165, 233, 0.5)":"rgba(16, 185, 129, 0.5)",borderWidth:1,cornerRadius:8,displayColors:!1,callbacks:{label:function(e){return"revenue"===c?"Revenue: $".concat(e.parsed.y.toLocaleString()):"Occupancy: ".concat(e.parsed.y.toFixed(1),"%")}}}},scales:{x:{grid:{display:!1},ticks:{color:"#6B7280",font:{size:12}}},y:{grid:{color:"rgba(107, 114, 128, 0.1)"},ticks:{color:"#6B7280",font:{size:12},callback:function(e){return"revenue"===c?"$"+e/1e3+"k":e.toFixed(1)+"%"}}}},interaction:{intersect:!1,mode:"index"}};return i?(0,zs.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:(0,zs.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,zs.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}):(0,zs.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,zs.jsx)(bf,{chartId:"revenue-chart",chartName:"revenue"===c?"Revenue Trend":"Occupancy Rate",className:"mb-4"}),(0,zs.jsx)("div",{className:"flex items-center justify-end mb-4",children:(0,zs.jsxs)("select",{value:o,onChange:e=>l(e.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,zs.jsx)("option",{value:"all",children:"All Properties"}),n.map(e=>(0,zs.jsx)("option",{value:e.name,children:e.name},e.id))]})}),(0,zs.jsx)("div",{className:"h-64",children:(0,zs.jsx)(gf,{data:h,options:p})})]})};mh.register(Ep,Op,Mh,Th,dp,Sp,lp,sp);const wf=e=>{let{properties:n}=e;const[r,s]=(0,t.useState)([]),[i,a]=(0,t.useState)(!0),[o,l]=(0,t.useState)("all"),c=(0,t.useCallback)(async()=>{try{if(a(!0),console.log("Loading occupancy chart data from ACTIVE CSVs only:",n),n.length>0){const t=n[0];console.log("Chico property:",t);let r=null;try{const e=await(0,mf.getCSVData)();if(console.log("\ud83d\udcca Active CSVs for occupancy chart data:",e.length),e.length>0){const t=(e=>{const t=[];return e.forEach(e=>{console.log("\ud83d\udcca Processing CSV: ".concat(e.fileName," for occupancy chart data")),["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].forEach((n,r)=>{t.push({id:"".concat(e.id,"-").concat(n),date:"2024-".concat(String(r+1).padStart(2,"0"),"-01"),month:"".concat(n," 2024"),revenue:"0",occupancy_rate:95..toString(),property_name:"Chico",total_units:26,occupied_units:Math.round(24.7)})})}),console.log("\ud83d\udcc8 Processed occupancy chart data:",t),t})(e);console.log("\ud83d\udcc8 CSV occupancy chart data processed:",t),t&&t.length>0&&(r=t)}if(!r||0===r.length)return console.log("\ud83d\udcca No active CSV data found, setting empty occupancy chart"),s([]),void a(!1);s(r),a(!1)}catch(e){console.error("Error processing CSV occupancy chart data:",e),s([]),a(!1)}}else console.log("\ud83d\udcca No properties available for occupancy chart data"),s([]),a(!1)}catch(e){console.error("Error loading occupancy chart data:",e),s([]),a(!1)}},[n]);(0,t.useEffect)(()=>{n.length>0&&c()},[n,c]),(0,t.useEffect)(()=>{const e=()=>{console.log("\ud83d\udd04 OccupancyChart received data update event"),c()};return window.addEventListener("dataUpdated",e),()=>window.removeEventListener("dataUpdated",e)},[c]);const d="all"===o?r:r.filter(e=>e.property_name===o),u={labels:d.map(e=>e.month||e.date),datasets:[{label:"Occupancy Rate",data:d.map(e=>parseFloat(e.occupancy_rate)),borderColor:"#10B981",backgroundColor:"rgba(16, 185, 129, 0.1)",borderWidth:2,fill:!0,tension:.4,pointBackgroundColor:"#10B981",pointBorderColor:"#fff",pointBorderWidth:2,pointRadius:4,pointHoverRadius:6}]};return i?(0,zs.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:(0,zs.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,zs.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"})})}):(0,zs.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,zs.jsx)(bf,{chartId:"occupancy-chart",chartName:"Occupancy Rate",className:"mb-4"}),(0,zs.jsx)("div",{className:"flex items-center justify-end mb-4",children:(0,zs.jsxs)("select",{value:o,onChange:e=>l(e.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-green-500",children:[(0,zs.jsx)("option",{value:"all",children:"All Properties"}),n.map(e=>(0,zs.jsx)("option",{value:e.name,children:e.name},e.id))]})}),(0,zs.jsx)("div",{className:"h-64",children:(0,zs.jsx)(gf,{data:u,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",borderColor:"rgba(16, 185, 129, 0.5)",borderWidth:1,cornerRadius:8,displayColors:!1,callbacks:{label:function(e){return"Occupancy: ".concat(e.parsed.y.toFixed(1),"%")}}}},scales:{x:{grid:{display:!1},ticks:{color:"#6B7280",font:{size:12}}},y:{grid:{color:"rgba(107, 114, 128, 0.1)"},ticks:{color:"#6B7280",font:{size:12},callback:function(e){return e.toFixed(1)+"%"}}}},interaction:{intersect:!1,mode:"index"}}})})]})},_f=Ns("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),kf=Ns("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);var jf=n(9079);mh.register(Ep,Op,Mh,Th,dp,Sp,lp,sp);const Sf=e=>{let{properties:n=[]}=e;const[r,s]=(0,t.useState)(["total_income","total_expense","net_operating_income"]),[i,a]=(0,t.useState)(!1),[o,l]=(0,t.useState)([]),[c,d]=(0,t.useState)(!0);(0,t.useEffect)(()=>{(async()=>{try{console.log("\ud83d\udcca Multi-Bucket Chart: Starting data load...");const e=jf.j.getCurrentUser(),t=null===e||void 0===e?void 0:e.id;console.log("\ud83d\udcca Multi-Bucket Chart: Current user:",e);const n=await(0,mf.getCSVData)(t);console.log("\ud83d\udcca Multi-Bucket Chart: Supabase data:",n),console.log("\ud83d\udcca Multi-Bucket Chart: Final data:",n),console.log("\ud83d\udcca Multi-Bucket Chart: Data structure sample:",n[0]),l(n||[])}catch(e){console.error("Error loading CSV data:",e),l([])}finally{d(!1)}})()},[]);const u=(0,t.useMemo)(()=>{if(console.log("\ud83d\udcca Multi-Bucket Chart: Processing chart data with",o.length,"CSV files"),!o.length)return console.log("\ud83d\udcca Multi-Bucket Chart: No CSV data available"),{labels:[],datasets:[]};const e=new Set;o.forEach((t,n)=>{console.log("\ud83d\udcca Multi-Bucket Chart: Processing CSV ".concat(n,":"),t.file_name||t.fileName),t.preview_data?t.preview_data.forEach((t,n)=>{t.time_series?(console.log("\ud83d\udcca Multi-Bucket Chart: Row ".concat(n," has time_series:"),Object.keys(t.time_series)),Object.keys(t.time_series).forEach(t=>{"total"!==t.toLowerCase()&&"sum"!==t.toLowerCase()&&"grand total"!==t.toLowerCase()&&e.add(t)})):console.log("\ud83d\udcca Multi-Bucket Chart: Row ".concat(n," missing time_series:"),t)}):console.log("\ud83d\udcca Multi-Bucket Chart: CSV ".concat(n," missing preview_data:"),t)});const t=Array.from(e).sort();console.log("\ud83d\udcca Multi-Bucket Chart: Found months:",t);const n=r.map(e=>{const n=yf.BUCKET_DEFINITIONS[e];if(!n)return console.log("\ud83d\udcca Multi-Bucket Chart: Bucket ".concat(e," not found in definitions")),null;console.log("\ud83d\udcca Multi-Bucket Chart: Processing bucket ".concat(n.label," (").concat(e,")"));const r=[];return t.forEach(t=>{let s=0;o.forEach(r=>{r.preview_data&&r.preview_data.forEach(r=>{if(r.time_series&&r.time_series[t]){const i=r.account_name||r.accountName||"",a=parseFloat(r.time_series[t])||0;((e,t)=>{const n=e.toLowerCase();switch(t){case"total_income":return n.includes("income")||n.includes("revenue")||n.includes("rent")||n.includes("rental")||n.includes("lease")||n.includes("gross")||n.includes("total operating income")||n.includes("monthly revenue");case"total_expense":return n.includes("expense")||n.includes("cost")||n.includes("maintenance")||n.includes("utilities")||n.includes("insurance")||n.includes("tax")||n.includes("operating expense")||n.includes("total operating expense");case"net_operating_income":return n.includes("net")||n.includes("operating")||n.includes("noi")||n.includes("net operating income");case"maintenance_cost":return n.includes("maintenance")||n.includes("repair")||n.includes("repairs");case"utilities_cost":return n.includes("utilities")||n.includes("electric")||n.includes("water")||n.includes("gas")||n.includes("power")||n.includes("sewer");case"insurance_cost":return n.includes("insurance")||n.includes("liability")||n.includes("property insurance");case"property_tax":return n.includes("tax")||n.includes("property")||n.includes("property tax");default:return!1}})(i,e)&&(console.log("\ud83d\udcca Multi-Bucket Chart: Match found - ".concat(i," (").concat(a,") for ").concat(n.label," in ").concat(t)),s+=a)}})}),r.push(s)}),console.log("\ud83d\udcca Multi-Bucket Chart: ".concat(n.label," data:"),r),{label:n.label,data:r,borderColor:(0,yf.getBucketColor)(e).includes("green")?"#10B981":(0,yf.getBucketColor)(e).includes("red")?"#EF4444":(0,yf.getBucketColor)(e).includes("blue")?"#3B82F6":"#6B7280",backgroundColor:(0,yf.getBucketColor)(e).includes("green")?"#10B98120":(0,yf.getBucketColor)(e).includes("red")?"#EF444420":(0,yf.getBucketColor)(e).includes("blue")?"#3B82F620":"#6B728020",fill:!1,tension:.1,pointRadius:4,pointHoverRadius:6}}).filter(e=>null!==e);return{labels:t,datasets:n}},[o,r]),h=Object.entries(yf.BUCKET_DEFINITIONS).filter(e=>{let[t]=e;return!r.includes(t)}).map(e=>{let[t,n]=e;return{id:t,label:n.label,icon:(0,yf.getBucketIcon)(t),color:(0,yf.getBucketColor)(t)}});return c?(0,zs.jsx)("div",{className:"card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:(0,zs.jsx)("div",{className:"p-6",children:(0,zs.jsxs)("div",{className:"animate-pulse",children:[(0,zs.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),(0,zs.jsx)("div",{className:"h-64 bg-gray-200 rounded"})]})})}):(0,zs.jsx)("div",{className:"card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:(0,zs.jsxs)("div",{className:"p-6",children:[(0,zs.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,zs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Multi-Bucket Analysis"}),(0,zs.jsxs)("div",{className:"relative",children:[(0,zs.jsxs)("button",{onClick:()=>a(!i),className:"flex items-center space-x-2 px-3 py-2 bg-blue-50 hover:bg-blue-100 text-blue-700 rounded-lg border border-blue-200 transition-colors",children:[(0,zs.jsx)(_f,{className:"w-4 h-4"}),(0,zs.jsx)("span",{children:"Add Bucket"}),(0,zs.jsx)(kf,{className:"w-4 h-4"})]}),i&&(0,zs.jsx)("div",{className:"absolute right-0 mt-2 w-64 bg-white dark:bg-gray-700 rounded-lg shadow-lg border border-gray-200 dark:border-gray-600 z-10",children:(0,zs.jsx)("div",{className:"p-2",children:h.length>0?h.map(e=>(0,zs.jsxs)("button",{onClick:()=>{return t=e.id,s(e=>[...e,t]),void a(!1);var t},className:"w-full flex items-center space-x-3 px-3 py-2 text-left hover:bg-gray-100 dark:hover:bg-gray-600 rounded-md transition-colors",children:[(0,zs.jsx)("span",{className:"text-lg",children:e.icon}),(0,zs.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.label})]},e.id)):(0,zs.jsx)("div",{className:"px-3 py-2 text-sm text-gray-500 dark:text-gray-400",children:"All buckets selected"})})})]})]}),(0,zs.jsx)("div",{className:"flex flex-wrap gap-2 mb-6",children:r.map(e=>{const t=yf.BUCKET_DEFINITIONS[e];return t?(0,zs.jsxs)("div",{className:"flex items-center space-x-2 px-3 py-2 bg-gray-100 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[(0,zs.jsx)("span",{className:"text-lg",children:(0,yf.getBucketIcon)(e)}),(0,zs.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.label}),(0,zs.jsx)("button",{onClick:()=>(e=>{s(t=>t.filter(t=>t!==e))})(e),className:"text-gray-400 hover:text-red-500 transition-colors",children:(0,zs.jsx)(Ds,{className:"w-4 h-4"})})]},e):null})}),(0,zs.jsx)("div",{className:"h-96",children:u.datasets.length>0?(0,zs.jsx)(gf,{data:u,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:20}},title:{display:!1},tooltip:{mode:"index",intersect:!1,callbacks:{label:function(e){const t=e.dataset.label||"",n=e.parsed.y;return"".concat(t,": $").concat(n.toLocaleString())}}}},scales:{x:{display:!0,title:{display:!0,text:"Month"}},y:{display:!0,title:{display:!0,text:"Amount ($)"},ticks:{callback:function(e){return"$"+e.toLocaleString()}}}},interaction:{mode:"nearest",axis:"x",intersect:!1}}}):(0,zs.jsx)("div",{className:"h-full flex items-center justify-center text-gray-500 dark:text-gray-400",children:(0,zs.jsxs)("div",{className:"text-center",children:[(0,zs.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\udcca"}),(0,zs.jsx)("p",{children:"No data available for selected buckets"}),(0,zs.jsx)("p",{className:"text-sm mt-1",children:"Upload CSV data to see your financial trends"})]})})})]})})};var Nf=n(6069);const Cf=(0,Nf.UU)("https://iqwhrvtcrseidfyznqaf.supabase.co","sb_publishable_ULLJeduhFHc_KRINLLXxug_zGvRBLPf");const Ef=new class{async getProperties(){try{const{data:e,error:t}=await Cf.from("properties").select("*").order("created_at",{ascending:!1});if(t)throw t;return{success:!0,data:e||[]}}catch(e){return console.error("Supabase getProperties error:",e),{success:!1,error:e.message}}}async getPropertyData(e){try{const{data:t,error:n}=await Cf.from("property_data").select("*").eq("property_id",e).order("Date",{ascending:!0});if(n)throw n;return{success:!0,data:t||[]}}catch(t){return console.error("Supabase getPropertyData error:",t),{success:!1,error:t.message}}}async getPropertiesWithData(){try{const{data:e,error:t}=await Cf.from("properties").select("\n          *,\n          property_data (*)\n        ").order("created_at",{ascending:!1});if(t)throw t;return{success:!0,data:e||[]}}catch(e){return console.error("Supabase getPropertiesWithData error:",e),{success:!1,error:e.message}}}async getFinancialSummary(e,t){try{let n=Cf.from("property_data").select("*");e&&(n=n.gte("Date",e)),t&&(n=n.lte("Date",t));const{data:r,error:s}=await n.order("Date",{ascending:!0});if(s)throw s;return{success:!0,data:{totalRevenue:(null===r||void 0===r?void 0:r.reduce((e,t)=>e+(parseFloat(t["Monthly Revenue"])||0),0))||0,totalExpenses:(null===r||void 0===r?void 0:r.reduce((e,t)=>e+(parseFloat(t["Maintenance Cost"])||0)+(parseFloat(t["Utilities Cost"])||0)+(parseFloat(t["Insurance Cost"])||0)+(parseFloat(t["Property Tax"])||0)+(parseFloat(t["Other Expenses"])||0),0))||0,totalNetIncome:(null===r||void 0===r?void 0:r.reduce((e,t)=>e+(parseFloat(t["Net Income"])||0),0))||0,avgOccupancy:(null===r||void 0===r?void 0:r.reduce((e,t)=>e+(parseFloat(t["Occupancy Rate"])||0),0))/((null===r||void 0===r?void 0:r.length)||1)||0,recordCount:(null===r||void 0===r?void 0:r.length)||0}}}catch(n){return console.error("Supabase getFinancialSummary error:",n),{success:!1,error:n.message}}}},Af={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SUPABASE_URL:"https://iqwhrvtcrseidfyznqaf.supabase.co",REACT_APP_SUPABASE_ANON_KEY:"sb_publishable_ULLJeduhFHc_KRINLLXxug_zGvRBLPf",REACT_APP_CLERK_PUBLISHABLE_KEY:"pk_test_ZmFtb3VzLXRyZWVmcm9nLTU3LmNsZXJrLmFjY291bnRzLmRldiQ",REACT_APP_API_URL:"http://localhost:5000/api",REACT_APP_API_BASE:"http://localhost:5001",REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_live_51QqScaHDhcVKRRbwKUmZ9DGrIAUb7aFxwIm1rS6RFZxOjlm3B9vGkG1CPGUe3J5fMh5VAE9cD7fp40bpZRgAc1Gl00rg9q88z1"}.REACT_APP_SUPABASE_API_URL||"http://localhost:5001/api",Pf={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_SUPABASE_URL:"https://iqwhrvtcrseidfyznqaf.supabase.co",REACT_APP_SUPABASE_ANON_KEY:"sb_publishable_ULLJeduhFHc_KRINLLXxug_zGvRBLPf",REACT_APP_CLERK_PUBLISHABLE_KEY:"pk_test_ZmFtb3VzLXRyZWVmcm9nLTU3LmNsZXJrLmFjY291bnRzLmRldiQ",REACT_APP_API_URL:"http://localhost:5000/api",REACT_APP_API_BASE:"http://localhost:5001",REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_live_51QqScaHDhcVKRRbwKUmZ9DGrIAUb7aFxwIm1rS6RFZxOjlm3B9vGkG1CPGUe3J5fMh5VAE9cD7fp40bpZRgAc1Gl00rg9q88z1"}.REACT_APP_LOCAL_API_URL||"http://localhost:5002/api",Tf="http://localhost:5000/api";const Of=new class{async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n="".concat(Tf).concat(e),r=(0,s.A)({headers:(0,s.A)({"Content-Type":"application/json"},t.headers)},t);try{if(Tf.includes("localhost:5000")||Tf.includes("localhost:5001"))throw console.warn("Backend server not available, skipping API call to:",e),new Error("Backend server not available - using Supabase directly");const t=new AbortController,i=setTimeout(()=>t.abort(),1e4),a=await fetch(n,(0,s.A)((0,s.A)({},r),{},{signal:t.signal}));if(clearTimeout(i),!a.ok){const e=await a.json().catch(()=>({error:"Network error"}));throw new Error(e.error||"HTTP ".concat(a.status))}return await a.json()}catch(i){if(console.error("API request failed:",i),"AbortError"===i.name)throw new Error("Request timeout - server may be unavailable");if(i.message.includes("fetch"))throw new Error("Network error - unable to connect to server");if(i.message.includes("Backend server not available"))throw i;throw i}}async getProperties(){try{return await this.request("/properties")}catch(e){return console.log("\ud83d\udd04 Backend unavailable, using Supabase directly"),await Ef.getProperties()}}async getProperty(e){return this.request("/properties/".concat(e))}async getPropertiesWithData(){try{return await this.request("/properties-with-data")}catch(e){return console.log("\ud83d\udd04 Backend unavailable, using Supabase directly"),await Ef.getPropertiesWithData()}}async getFinancialSummary(e,t){try{const n=new URLSearchParams;e&&n.append("startDate",e),t&&n.append("endDate",t);const r=n.toString();return await this.request("/financial-summary".concat(r?"?".concat(r):""))}catch(n){return console.log("\ud83d\udd04 Backend unavailable, using Supabase directly"),await Ef.getFinancialSummary(e,t)}}async getPropertyData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;try{return await this.request("/properties/".concat(e,"/data?page=").concat(t,"&limit=").concat(n))}catch(r){return console.log("\ud83d\udd04 Backend unavailable, using Supabase directly"),await Ef.getPropertyData(e)}}async getPropertyAggregated(e,t,n){const r=new URLSearchParams;t&&r.append("startDate",t),n&&r.append("endDate",n);const s=r.toString();return this.request("/properties/".concat(e,"/aggregated").concat(s?"?".concat(s):""))}async uploadCSV(e,t){const n=new FormData;n.append("csvFile",e),n.append("propertyId",t);const r="".concat(Tf,"/upload-csv");try{const e=await fetch(r,{method:"POST",body:n});if(!e.ok){const t=await e.json().catch(()=>({error:"Network error"}));throw new Error(t.error||"HTTP ".concat(e.status))}return await e.json()}catch(s){throw console.error("CSV upload failed:",s),s}}async processCSVLocal(e,t){const n=new FormData;n.append("file",e),t&&n.append("propertyName",t);const r="".concat(Pf,"/api/process-csv-local");try{const e=await fetch(r,{method:"POST",body:n});if(!e.ok){const t=await e.json().catch(()=>({error:"Network error"}));throw new Error(t.error||"HTTP ".concat(e.status))}return await e.json()}catch(s){throw console.error("Local CSV processing failed:",s),s}}async saveLocalData(e,t,n){const r="".concat(Pf,"/save-processed-data");try{const s=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:e,propertyName:t,source:n,timestamp:(new Date).toISOString()})});if(!s.ok){const e=await s.json().catch(()=>({error:"Network error"}));throw new Error(e.error||"HTTP ".concat(s.status))}return await s.json()}catch(s){throw console.error("Save data failed:",s),s}}async checkBackendStatus(){const e={supabase:!1,local:!1};try{const t=await fetch("".concat(Af,"/health"),{method:"GET",signal:AbortSignal.timeout(2e3)});e.supabase=t.ok}catch(t){console.log("Supabase backend not available")}try{const t=await fetch("".concat(Pf,"/processed-data"),{method:"GET",signal:AbortSignal.timeout(2e3)});e.local=t.ok}catch(t){console.log("Local backend not available")}return e}async validateCSV(e,t){const n=new FormData;n.append("csvFile",e),t&&n.append("propertyName",t);const r="".concat(Tf,"/validate-csv");try{const e=await fetch(r,{method:"POST",body:n});if(!e.ok){const t=await e.json().catch(()=>({error:"Network error"}));throw new Error(t.error||"HTTP ".concat(e.status))}return await e.json()}catch(s){throw console.error("CSV validation failed:",s),s}}async getChartData(e,t,n){const r=new URLSearchParams;e&&r.append("propertyId",e),t&&r.append("startDate",t),n&&r.append("endDate",n);const s=r.toString();return this.request("/chart-data".concat(s?"?".concat(s):""))}async getMonthlyData(e){const t=new URLSearchParams;e&&t.append("propertyId",e);const n=t.toString();return this.request("/monthly-data".concat(n?"?".concat(n):""))}async getUploadHistory(e){const t=new URLSearchParams;e&&t.append("propertyId",e);const n=t.toString();return this.request("/upload-history".concat(n?"?".concat(n):""))}async addProperty(e){return this.request("/properties",{method:"POST",body:JSON.stringify(e)})}async updateProperty(e,t){return this.request("/properties/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteProperty(e){return this.request("/properties/".concat(e),{method:"DELETE"})}async deleteUpload(e){return this.request("/uploads/".concat(e),{method:"DELETE"})}async deletePropertyDataByUpload(e){return this.request("/uploads/".concat(e,"/data"),{method:"DELETE"})}async reprocessUpload(e){return this.request("/uploads/".concat(e,"/reprocess"),{method:"POST"})}async getHealth(){return this.request("/health")}},Mf=Of;const If=new class{constructor(){this.properties=new Map,this.propertyData=new Map,this.lastSync=null}async initialize(){try{await this.loadFromLocalStorage(),await this.syncWithSupabase(),await this.loadPropertyDataFromSupabase(),console.log("\ud83c\udfe2 Unified Property Service initialized:",{propertiesCount:this.properties.size,lastSync:this.lastSync})}catch(e){console.error("Failed to initialize unified property service:",e)}}getAllProperties(){return Array.from(this.properties.values()).sort((e,t)=>e.name.localeCompare(t.name))}getProperty(e){return this.properties.get(e)}getPropertyByName(e){return Array.from(this.properties.values()).find(t=>t.name.toLowerCase()===e.toLowerCase())}async addProperty(e){const t=this.getPropertyByName(e.name);if(t){const n=(0,s.A)((0,s.A)((0,s.A)({},t),e),{},{updatedAt:(new Date).toISOString(),source:"unified"});return this.properties.set(t.id,n),await this.saveToLocalStorage(),console.log("\ud83d\udd04 Updated existing property:",n.name),n}{const t=(0,s.A)((0,s.A)({id:this.generateId()},e),{},{createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),source:"unified"});return this.properties.set(t.id,t),await this.saveToLocalStorage(),console.log("\u2705 Created new property:",t.name),t}}async addPropertyData(e){const t=e.propertyId;this.propertyData.has(t)||this.propertyData.set(t,[]);const n=(0,s.A)((0,s.A)({},e),{},{id:this.generateId(),timestamp:(new Date).toISOString()}),r=this.propertyData.get(t);r.some(e=>e.date===n.date&&e.accountName===n.accountName&&e.month===n.month)?console.log("\u26a0\ufe0f Duplicate data skipped:",{property:e.propertyName,account:e.accountName,month:e.month}):(r.push(n),await this.saveToLocalStorage(),console.log("\ud83d\udcca Added property data:",{property:e.propertyName,account:e.accountName,month:e.month,amount:e.amount}))}getPropertyData(e){return this.propertyData.get(e)||[]}getAllPropertyData(){const e=[],t=Array.from(this.propertyData.values());for(const n of t)e.push(...n);return e}async syncWithSupabase(){try{const e=await Mf.getProperties();if(e.success&&e.data){for(const t of e.data){if(!this.getPropertyByName(t.name)){const e=(0,s.A)((0,s.A)({},t),{},{source:"supabase"});this.properties.set(t.id,e)}}this.lastSync=new Date,await this.saveToLocalStorage(),console.log("\ud83d\udd04 Synced with Supabase backend")}}catch(e){console.log("\u26a0\ufe0f Supabase sync failed (backend may be unavailable)")}}async loadPropertyDataFromSupabase(){try{const e=this.getAllProperties();for(const t of e)if("supabase"===t.source){const e=await Mf.getPropertyData(t.id);e.success&&e.data&&(this.propertyData.set(t.id,e.data),console.log("\ud83d\udcca Loaded ".concat(e.data.length," data records for ").concat(t.name)))}await this.saveToLocalStorage(),console.log("\ud83d\udcca Property data loaded from Supabase")}catch(e){console.log("\u26a0\ufe0f Failed to load property data from Supabase")}}async saveToLocalStorage(){try{const e={properties:Array.from(this.properties.entries()),propertyData:Array.from(this.propertyData.entries()),lastSync:this.lastSync};localStorage.setItem("unified-properties",JSON.stringify(e))}catch(e){console.error("Failed to save to local storage:",e)}}async loadFromLocalStorage(){try{const e=localStorage.getItem("unified-properties");if(e){const t=JSON.parse(e);t.properties&&(this.properties=new Map(t.properties)),t.propertyData&&(this.propertyData=new Map(t.propertyData)),t.lastSync&&(this.lastSync=new Date(t.lastSync)),console.log("\ud83d\udcc1 Loaded from local storage:",{properties:this.properties.size,propertyData:Array.from(this.propertyData.values()).flat().length})}}catch(e){console.error("Failed to load from local storage:",e)}}generateId(){return"prop-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9))}async clearAllData(){this.properties.clear(),this.propertyData.clear(),this.lastSync=null,localStorage.removeItem("unified-properties"),console.log("\ud83d\uddd1\ufe0f Cleared all unified property data")}getStatistics(){const e={},t=Array.from(this.properties.values());for(const n of t)e[n.source]=(e[n.source]||0)+1;return{totalProperties:this.properties.size,totalDataRecords:Array.from(this.propertyData.values()).flat().length,lastSync:this.lastSync,propertiesBySource:e}}},Rf=()=>{const[e,n]=(0,t.useState)([]),[r,s]=(0,t.useState)(null),[i,a]=(0,t.useState)(!0),[o,l]=(0,t.useState)(null),c=(0,t.useCallback)(async()=>{try{const e=(await(0,mf.getCSVData)()).reduce((e,t)=>(e[t.file_name]||(e[t.file_name]=[]),e[t.file_name].push(t),e),{}),t=Object.entries(e).filter(e=>{let[t,n]=e;return n.length>1});if(t.length>0){console.warn("\u26a0\ufe0f DUPLICATE CSVs detected:",t);const e=t.map(e=>{let[t]=e;return t}).join(", ");window.confirm("\u26a0\ufe0f DUPLICATE DATA DETECTED!\n\nThe following CSV files have been uploaded multiple times:\n"+"\u2022 ".concat(e,"\n\n")+'This is causing inflated dashboard values (e.g., $600k instead of $400k).\n\nWould you like to automatically remove the older duplicates and keep only the most recent uploads?\n\nClick "OK" to clean up duplicates, or "Cancel" to handle manually in CSV Management.')&&await u(t)}}catch(o){console.error("Error checking for duplicate CSVs:",o)}},[]),d=(0,t.useCallback)(async()=>{try{a(!0),l(null),console.log("\ud83d\udd04 Loading dashboard data from unified system...");const e=If.getAllProperties();console.log("\ud83c\udfe2 Unified properties:",e),e&&e.length>0&&(n(e),console.log("\u2705 Properties loaded:",e.length)),console.log("\ud83d\udcca Loading financial data from active CSVs only...");const t=await p();if(console.log("\ud83d\udcc8 CSV Metrics calculated:",t),t.totalIncome>0||t.totalExpense>0){const e=t.totalIncome,n=t.totalExpense,r=e-n,i=t.recordCount;console.log("\ud83d\udcb0 Financial Summary from CSVs:"),console.log("  Total Revenue: $".concat(e.toLocaleString())),console.log("  Total Expenses: $".concat(n.toLocaleString())),console.log("  Net Income: $".concat(r.toLocaleString())),console.log("  Total Records: ".concat(i)),s({totalRevenue:e,totalExpenses:n,totalNetIncome:r,totalRecords:i,dataSource:"csv"})}else console.log("\u26a0\ufe0f No active CSV data found. Dashboard will show empty state."),s({totalRevenue:0,totalExpenses:0,totalNetIncome:0,totalRecords:0,dataSource:"none"})}catch(o){console.error("Dashboard: Failed to load data:",o),l("Failed to load dashboard data")}finally{a(!1)}},[]);(0,t.useEffect)(()=>{h(),d(),c();const e=e=>{var t;console.log("\ud83d\udd04 Dashboard received data update event:",e.detail),"csv_deleted"===(null===(t=e.detail)||void 0===t?void 0:t.action)&&(console.log("\ud83d\uddd1\ufe0f CSV deletion detected, refreshing dashboard data..."),console.log("\ud83d\udccb Deleted CSV:",e.detail.fileName)),d()};return window.addEventListener("dataUpdated",e),()=>{window.removeEventListener("dataUpdated",e)}},[c,d]);const u=async e=>{try{let t=0;for(const[n,r]of e){const e=r.sort((e,t)=>new Date(t.uploaded_at).getTime()-new Date(e.uploaded_at).getTime()).slice(1);for(const n of e){await(0,mf.MC)(n.id)&&(t++,console.log("\ud83d\uddd1\ufe0f Removed duplicate CSV: ".concat(n.file_name," (").concat(n.uploaded_at,")")))}}window.dispatchEvent(new CustomEvent("dataUpdated",{detail:{action:"duplicates_cleaned",removedCount:t}})),alert("\u2705 Cleaned up ".concat(t," duplicate CSV(s). Dashboard values should now be accurate."))}catch(o){console.error("Error cleaning up duplicates:",o),alert("Failed to clean up duplicates. Please handle manually in CSV Management.")}},h=async()=>{try{const e=await(0,mf.h2)();e.success&&e.migrated&&e.migrated>0&&console.log("\ud83d\udd04 Migrated ".concat(e.migrated," CSVs from localStorage to Supabase")),await If.initialize(),console.log("\ud83c\udfe2 Dashboard: Unified service initialized")}catch(o){console.error("Dashboard: Failed to initialize unified service:",o)}},p=async()=>{try{const e=await(0,mf.getCSVData)();console.log("\ud83d\udcca Using Supabase data:",e.length,"active CSVs");let t=0,n=0,r=0;console.log("\ud83d\udccb Active CSVs:",e.map(e=>({fileName:e.file_name,isActive:e.is_active,totalRecords:e.total_records})));const s=e.map(e=>e.file_name),i=s.filter((e,t)=>s.indexOf(e)!==t);i.length>0&&console.warn("\u26a0\ufe0f DUPLICATE CSVs detected:",i),e.forEach(e=>{const s=e.total_records,i=e.account_categories,a=e.preview_data,o=e.file_type;if(console.log("\ud83d\udcc1 Processing CSV: ".concat(e.file_name," (").concat(s," records)")),console.log("\ud83d\udccb CSV Preview Data Sample:",a.slice(0,3)),"cash_flow"===o){console.log("\ud83d\udcb0 Processing CASH FLOW CSV - Looking for KEY METRICS for dashboard...");let e=!1;[{name:"Total Operating Income",type:"income"},{name:"NOI - Net Operating Income",type:"net_income"},{name:"Total Operating Expense",type:"expense"}].forEach(r=>{const s=a.find(e=>{var t;return((null===(t=e.account_name)||void 0===t?void 0:t.trim().toLowerCase())||"").includes(r.name.toLowerCase())});if(s&&s.time_series){e=!0,console.log("\ud83c\udfaf FOUND KEY METRIC: ".concat(s.account_name," (").concat(r.type,")")),console.log("\ud83d\udcca Time Series Data:",s.time_series);const i=Object.entries(s.time_series).filter(e=>{let[t,n]=e;return"total"!==t.toLowerCase()&&"sum"!==t.toLowerCase()&&"grand total"!==t.toLowerCase()&&"number"===typeof n}).map(e=>{let[,t]=e;return t});if(i.length>0){const e=i.reduce((e,t)=>e+t,0);"income"===r.type?(t+=e,console.log("  \ud83d\udcb0 ".concat(s.account_name,": Total Income = $").concat(e.toLocaleString()))):"expense"===r.type?(n+=e,console.log("  \ud83d\udcb8 ".concat(s.account_name,": Total Expense = $").concat(e.toLocaleString()))):"net_income"===r.type&&console.log("  \ud83d\udcca ".concat(s.account_name,": Net Operating Income = $").concat(e.toLocaleString()))}}}),e?(console.log("\u2705 Using KEY METRICS for dashboard population"),console.log("\ud83d\udcb0 Total Income: $".concat(t.toLocaleString())),console.log("\ud83d\udcb8 Total Expense: $".concat(n.toLocaleString())),console.log("\ud83d\udcca Net Operating Income: $".concat((t-n).toLocaleString()))):(console.log("\u26a0\ufe0f Key metrics not found, falling back to individual account categorization..."),Object.entries(i).forEach(e=>{let[r,s]=e;const i=a.find(e=>{var t;return(null===(t=e.account_name)||void 0===t?void 0:t.trim())===r});if(i&&i.time_series){console.log("\ud83d\udd0d Account: ".concat(r," (").concat(s,")"));const e=Object.entries(i.time_series).filter(e=>{let[t,n]=e;return"total"!==t.toLowerCase()&&"sum"!==t.toLowerCase()&&"grand total"!==t.toLowerCase()&&"number"===typeof n}).map(e=>{let[,t]=e;return t});if(e.length>0){const i=e.reduce((e,t)=>e+t,0);"income"===s?(t+=i,console.log("  \ud83d\udcb0 ".concat(r,": Income = $").concat(i.toLocaleString()))):"expense"===s&&(n+=i,console.log("  \ud83d\udcb8 ".concat(r,": Expense = $").concat(i.toLocaleString())))}}}))}else Object.entries(i).forEach(e=>{let[r,s]=e;const i=a.find(e=>{var t;return(null===(t=e.account_name)||void 0===t?void 0:t.trim())===r});if(i&&i.time_series){console.log("\ud83d\udd0d Account: ".concat(r," (").concat(s,")")),console.log("\ud83d\udcca Time Series Data:",i.time_series);const e=Object.entries(i.time_series).filter(e=>{let[t,n]=e;return"total"!==t.toLowerCase()&&"sum"!==t.toLowerCase()&&"grand total"!==t.toLowerCase()&&"number"===typeof n&&0!==n}).map(e=>{let[,t]=e;return t});if(e.length>0){let i=0;"balance_sheet"===o?(i=e[e.length-1],console.log("  \ud83d\udcb0 ".concat(r," (").concat(s,"): Latest value = $").concat(i.toLocaleString()))):(i=e.reduce((e,t)=>e+t,0)/e.length,console.log("  \ud83d\udcb0 ".concat(r," (").concat(s,"): Monthly average = $").concat(i.toLocaleString()))),"income"===s||"revenue"===s?t+=i:"expense"===s?n+=i:"asset"===s?console.log("  \ud83d\udcca Asset account: ".concat(r," = $").concat(i.toLocaleString())):"liability"===s?console.log("  \ud83d\udcca Liability account: ".concat(r," = $").concat(i.toLocaleString())):"equity"===s&&console.log("  \ud83d\udcca Equity account: ".concat(r," = $").concat(i.toLocaleString()))}}});r+=e.totalRecords});const a=e.some(e=>"cash_flow"===(e.file_type||e.fileType));console.log("\ud83d\udd0d Cash Flow Detection Debug:"),console.log("  Active CSVs:",e.length),console.log("  CSV file types:",e.map(e=>e.file_type||e.fileType)),console.log("  Has cash flow:",a);const o={totalIncome:t,totalExpense:n,netOperatingIncome:t-n,recordCount:r};return console.log("\ud83d\udcca Final CSV metrics:",o),console.log("\ud83d\udcb0 Has cash flow data:",a),o}catch(o){return console.error("Error calculating CSV metrics:",o),{totalIncome:0,totalExpense:0,netOperatingIncome:0,recordCount:0}}},f=e.length,g=e.reduce((e,t)=>e+(t.total_units||0),0),m=parseFloat((null===r||void 0===r?void 0:r.avgOccupancy)||(null===r||void 0===r?void 0:r.avg_occupancy_rate)||"0"),y=parseFloat((null===r||void 0===r?void 0:r.totalRevenue)||(null===r||void 0===r?void 0:r.total_revenue)||"0"),x=parseFloat((null===r||void 0===r?void 0:r.totalExpenses)||(null===r||void 0===r?void 0:r.total_expenses)||"0"),b=parseFloat((null===r||void 0===r?void 0:r.totalNetIncome)||(null===r||void 0===r?void 0:r.total_net_income)||"0"),v=parseInt((null===r||void 0===r?void 0:r.recordCount)||(null===r||void 0===r?void 0:r.total_records)||"0");console.log("\ud83d\udd0d Dashboard calculated values:"),console.log("  - totalProperties:",f),console.log("  - totalUnits:",g),console.log("  - avgOccupancy:",m),console.log("  - totalRevenue:",y),console.log("  - totalExpenses:",x),console.log("  - totalNetIncome:",b),console.log("  - totalRecords:",v);const w=v>0?y/v:0,_=y>0?b/y*100:0,k=[{title:"Total Properties",value:f.toString(),change:f>0?"Active":"None",changeType:f>0?"positive":"neutral",icon:Ts,color:"blue"},{title:"Total Revenue",value:"$".concat(y.toLocaleString()),change:"$".concat(w.toLocaleString(),"/month avg"),changeType:"positive",icon:Es,color:"green"},{title:"Net Income",value:"$".concat(b.toLocaleString()),change:"".concat(_.toFixed(1),"% margin"),changeType:"positive",icon:Ra,color:"purple"},{title:"Occupancy Rate",value:"".concat(m.toFixed(1),"%"),change:"".concat(g," total units"),changeType:"positive",icon:Ms,color:"orange"}],j=[{id:1,type:"data",message:"".concat(v," CSV records uploaded for Chico property"),time:"Current",icon:Aa},{id:2,type:"property",message:"".concat(f," active property in system"),time:"Current",icon:Ts},{id:3,type:"revenue",message:"Total revenue: $".concat(y.toLocaleString()),time:"Current",icon:Es},{id:4,type:"income",message:"Net income: $".concat(b.toLocaleString()," (").concat(_.toFixed(1),"% margin)"),time:"Current",icon:Ra},{id:5,type:"occupancy",message:"Average occupancy: ".concat(m.toFixed(1),"%"),time:"Current",icon:Ms}];return i?(0,zs.jsx)("div",{className:"space-y-6",children:(0,zs.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,zs.jsxs)("div",{className:"text-center",children:[(0,zs.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),(0,zs.jsx)("p",{className:"text-gray-600",children:"Loading dashboard data..."})]})})}):(0,zs.jsxs)("div",{className:"space-y-6",children:[(0,zs.jsxs)("div",{className:"flex justify-between items-center",children:[(0,zs.jsxs)("div",{children:[(0,zs.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Dashboard"}),(0,zs.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:"Welcome back! Here's what's happening with your properties."}),o&&(0,zs.jsxs)("div",{className:"mt-2 text-sm text-red-600 dark:text-red-400 flex items-center",children:[(0,zs.jsx)(Ea,{className:"w-4 h-4 mr-1"}),o]})]}),(0,zs.jsxs)("div",{className:"flex space-x-3",children:[(0,zs.jsxs)("button",{onClick:d,disabled:i,className:"btn-secondary flex items-center",children:[(0,zs.jsx)(La,{className:"w-4 h-4 mr-2 ".concat(i?"animate-spin":"")}),"Refresh"]}),(0,zs.jsx)("button",{className:"btn-secondary",children:"Export"}),(0,zs.jsx)("button",{className:"btn-primary",children:"Add Property"})]})]}),(0,zs.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:k.map((e,t)=>{const n=e.icon;return(0,zs.jsx)("div",{className:"metric-card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:(0,zs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zs.jsxs)("div",{children:[(0,zs.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:e.title}),(0,zs.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:e.value}),(0,zs.jsxs)("p",{className:"text-sm mt-1 ".concat("positive"===e.changeType?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:[e.change," from last month"]})]}),(0,zs.jsx)("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center ".concat("blue"===e.color?"bg-blue-100 dark:bg-blue-900/20":"green"===e.color?"bg-green-100 dark:bg-green-900/20":"purple"===e.color?"bg-purple-100 dark:bg-purple-900/20":"bg-orange-100 dark:bg-orange-900/20"),children:(0,zs.jsx)(n,{className:"w-6 h-6 ".concat("blue"===e.color?"text-blue-600 dark:text-blue-400":"green"===e.color?"text-green-600 dark:text-green-400":"purple"===e.color?"text-purple-600 dark:text-purple-400":"text-orange-600 dark:text-orange-400")})})]})},t)})}),(0,zs.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,zs.jsxs)("div",{className:"card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:[(0,zs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Revenue Trend"}),(0,zs.jsx)(vf,{properties:e})]}),(0,zs.jsxs)("div",{className:"card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:[(0,zs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Occupancy Rate"}),(0,zs.jsx)(wf,{properties:e})]})]}),(0,zs.jsx)("div",{className:"mt-6",children:(0,zs.jsx)(Sf,{properties:e})}),(0,zs.jsx)("div",{className:"grid grid-cols-1 gap-6",children:(0,zs.jsxs)("div",{className:"card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:[(0,zs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Recent Activity"}),(0,zs.jsx)("div",{className:"space-y-4",children:j.map(e=>{const t=e.icon;return(0,zs.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,zs.jsx)("div",{className:"w-8 h-8 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center flex-shrink-0",children:(0,zs.jsx)(t,{className:"w-4 h-4 text-gray-600 dark:text-gray-300"})}),(0,zs.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,zs.jsx)("p",{className:"text-sm text-gray-900 dark:text-white",children:e.message}),(0,zs.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e.time})]})]},e.id)})})]})})]})},Lf=Ns("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),Df=Ns("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),zf=Ns("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Ff=Ns("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),Uf=Ns("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Bf=()=>{const[e,n]=(0,t.useState)(""),[r,s]=(0,t.useState)("all"),[i,a]=(0,t.useState)([]),[o,l]=(0,t.useState)(!0),[c,d]=(0,t.useState)(null);(0,t.useEffect)(()=>{u();const e=()=>{u()};return window.addEventListener("dataUpdated",e),()=>{window.removeEventListener("dataUpdated",e)}},[]);const u=async()=>{try{l(!0),d(null);let e=[];try{const t=await fetch("http://localhost:5002/api/processed-data");if(t.ok){const n=await t.json();if(console.log("\ud83c\udfe0 Local properties data loaded:",n),n.success&&n.data){const t=new Set;Object.keys(n.data).forEach(e=>{t.add(e)});const r=Array.from(t).map(e=>({id:"local-".concat(e.toLowerCase()),name:e,address:"Local Data Source",type:"Apartment Complex",total_units:26,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()}));e=[...r],console.log("\ud83c\udfe0 Local properties converted:",r)}}}catch(c){console.log("\u26a0\ufe0f Local properties not available, trying API...")}if(0===e.length){const t=await Mf.getProperties();if(!t.success||!t.data)return d("Failed to load properties"),void a([]);e=t.data,console.log("\u2705 Properties loaded from API:",t.data)}a(e)}catch(c){console.error("Error loading properties:",c),d("Failed to load properties"),a([])}finally{l(!1)}},h=i.filter(t=>{const n=t.name.toLowerCase().includes(e.toLowerCase())||t.address.toLowerCase().includes(e.toLowerCase()),s="all"===r||t.type===r;return n&&s});return(0,zs.jsxs)("div",{className:"space-y-6",children:[(0,zs.jsxs)("div",{className:"flex justify-between items-center",children:[(0,zs.jsxs)("div",{children:[(0,zs.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Properties"}),(0,zs.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:"Manage and monitor all your properties"})]}),(0,zs.jsxs)("button",{className:"btn-primary flex items-center space-x-2 dark:bg-blue-700 dark:hover:bg-blue-600",children:[(0,zs.jsx)(_f,{className:"w-4 h-4"}),(0,zs.jsx)("span",{children:"Add Property"})]})]}),(0,zs.jsx)("div",{className:"card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:(0,zs.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,zs.jsx)("div",{className:"flex-1",children:(0,zs.jsxs)("div",{className:"relative",children:[(0,zs.jsx)(zf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-gray-500 w-4 h-4"}),(0,zs.jsx)("input",{type:"text",placeholder:"Search properties...",value:e,onChange:e=>n(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"})]})}),(0,zs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,zs.jsx)(Ff,{className:"w-4 h-4 text-gray-400 dark:text-gray-500"}),(0,zs.jsxs)("select",{value:r,onChange:e=>s(e.target.value),className:"border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,zs.jsx)("option",{value:"all",children:"All Types"}),(0,zs.jsx)("option",{value:"Apartment Complex",children:"Apartment Complex"}),(0,zs.jsx)("option",{value:"Townhouse Complex",children:"Townhouse Complex"}),(0,zs.jsx)("option",{value:"Single Family",children:"Single Family"}),(0,zs.jsx)("option",{value:"Condo Complex",children:"Condo Complex"})]})]})]})}),o&&(0,zs.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,zs.jsxs)("div",{className:"text-center",children:[(0,zs.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),(0,zs.jsx)("p",{className:"text-gray-600",children:"Loading properties..."})]})}),c&&(0,zs.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-6",children:(0,zs.jsxs)("div",{className:"flex",children:[(0,zs.jsx)("div",{className:"flex-shrink-0",children:(0,zs.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,zs.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,zs.jsxs)("div",{className:"ml-3",children:[(0,zs.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error loading properties"}),(0,zs.jsx)("div",{className:"mt-2 text-sm text-red-700",children:(0,zs.jsx)("p",{children:c})}),(0,zs.jsx)("div",{className:"mt-4",children:(0,zs.jsx)("button",{onClick:u,className:"bg-red-100 px-3 py-2 rounded-md text-sm font-medium text-red-800 hover:bg-red-200",children:"Try again"})})]})]})}),!o&&!c&&(0,zs.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map(e=>(0,zs.jsxs)("div",{className:"card hover:shadow-lg transition-shadow duration-200 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:[(0,zs.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,zs.jsxs)("div",{children:[(0,zs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e.name}),(0,zs.jsxs)("div",{className:"flex items-center text-gray-500 dark:text-gray-400 text-sm mt-1",children:[(0,zs.jsx)(Uf,{className:"w-4 h-4 mr-1"}),e.address]})]}),(0,zs.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/20 text-green-800 dark:text-green-300",children:"Active"})]}),(0,zs.jsxs)("div",{className:"space-y-3",children:[(0,zs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zs.jsxs)("div",{className:"flex items-center text-gray-600 dark:text-gray-400",children:[(0,zs.jsx)(Ts,{className:"w-4 h-4 mr-2"}),(0,zs.jsx)("span",{className:"text-sm",children:e.type})]}),(0,zs.jsxs)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[e.total_units," units"]})]}),(0,zs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zs.jsxs)("div",{className:"flex items-center text-gray-600 dark:text-gray-400",children:[(0,zs.jsx)(Ms,{className:"w-4 h-4 mr-2"}),(0,zs.jsx)("span",{className:"text-sm",children:"Occupied"})]}),(0,zs.jsxs)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[e.total_units," units"]})]}),(0,zs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zs.jsxs)("div",{className:"flex items-center text-gray-600 dark:text-gray-400",children:[(0,zs.jsx)(Es,{className:"w-4 h-4 mr-2"}),(0,zs.jsx)("span",{className:"text-sm",children:"Monthly Revenue"})]}),(0,zs.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"View Data"})]})]}),(0,zs.jsxs)("div",{className:"flex space-x-2 mt-4 pt-4 border-t border-gray-200 dark:border-gray-600",children:[(0,zs.jsxs)("button",{className:"flex-1 btn-secondary flex items-center justify-center space-x-1 dark:bg-gray-700 dark:text-white dark:border-gray-600 dark:hover:bg-gray-600",children:[(0,zs.jsx)(ka,{className:"w-4 h-4"}),(0,zs.jsx)("span",{children:"View"})]}),(0,zs.jsxs)("button",{className:"flex-1 btn-secondary flex items-center justify-center space-x-1 dark:bg-gray-700 dark:text-white dark:border-gray-600 dark:hover:bg-gray-600",children:[(0,zs.jsx)(_a,{className:"w-4 h-4"}),(0,zs.jsx)("span",{children:"Edit"})]}),(0,zs.jsx)("button",{className:"px-3 py-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-md transition-colors duration-200",children:(0,zs.jsx)(Sa,{className:"w-4 h-4"})})]})]},e.id))}),!o&&!c&&0===h.length&&(0,zs.jsxs)("div",{className:"text-center py-12",children:[(0,zs.jsx)(Ts,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,zs.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No properties found"}),(0,zs.jsx)("p",{className:"text-gray-500",children:"Try adjusting your search or filter criteria."})]})]})},Vf=Ns("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Wf=Ns("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),Hf=(0,Nf.UU)("https://iqwhrvtcrseidfyznqaf.supabase.co","sb_publishable_ULLJeduhFHc_KRINLLXxug_zGvRBLPf",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},db:{schema:"public"},global:{headers:{"X-Client-Info":"horton-properties-ai-parser"}}}),qf="csv_files_ai",Kf="parsed_data_ai",$f="header_matches_ai",Gf="properties_ai",Jf="processing_jobs_ai";const Yf=new class{constructor(){this.supabase=Hf}async uploadCSVFile(e,t,n){try{const r="".concat(Date.now(),"-").concat(e.name),{error:s}=await this.supabase.storage.from("csv-files-ai").upload(r,e);if(s)return{success:!1,error:s.message};const i={file_name:e.name,file_size:e.size,property_id:t,property_name:n,upload_status:"uploading",processing_mode:"ai_parser",format_detected:"traditional",ai_confidence:0},{data:a,error:o}=await this.supabase.from(qf).insert(i).select().single();return o?{success:!1,error:o.message}:{success:!0,data:a}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}async getCSVFiles(e){try{let t=this.supabase.from(qf).select("*").order("created_at",{ascending:!1});e&&(t=t.eq("property_id",e));const{data:n,error:r}=await t;return r?{success:!1,error:r.message}:{success:!0,data:n||[]}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}async saveParsedData(e,t){try{const n=t.map(t=>({csv_file_id:e,account_name:t.account_name,period:t.period,amount:t.amount,amount_raw:t.amount_raw,category:t.category,confidence_score:t.confidence_score||.8,bucket_assignment:t.bucket_assignment||"unknown"})),{data:r,error:s}=await this.supabase.from(Kf).insert(n).select();return s?{success:!1,error:s.message}:{success:!0,data:r||[]}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async saveHeaderMatches(e,t){try{const n=t.map(t=>({csv_file_id:e,original_header:t.originalHeader,suggested_bucket:t.suggestedBucket,confidence_score:t.confidenceScore,alternative_buckets:t.alternativeBuckets,user_confirmed:!1})),{data:r,error:s}=await this.supabase.from($f).insert(n).select();return s?{success:!1,error:s.message}:{success:!0,data:r||[]}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async updateHeaderMatchConfirmation(e,t,n){try{const r={user_confirmed:t};n&&(r.user_override=n);const{error:s}=await this.supabase.from($f).update(r).eq("id",e);return s?{success:!1,error:s.message}:{success:!0}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}async createProperty(e){try{const{data:t,error:n}=await this.supabase.from(Gf).insert((0,s.A)((0,s.A)({},e),{},{ai_parser_enabled:!0})).select().single();return n?{success:!1,error:n.message}:{success:!0,data:t}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}async getProperties(){try{const{data:e,error:t}=await this.supabase.from(Gf).select("*").eq("ai_parser_enabled",!0).order("created_at",{ascending:!1});return t?{success:!1,error:t.message}:{success:!0,data:e||[]}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async createProcessingJob(e,t){try{const{data:n,error:r}=await this.supabase.from(Jf).insert({csv_file_id:e,status:"processing",progress:0,ai_analysis:t}).select().single();return r?{success:!1,error:r.message}:{success:!0,data:n}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async updateProcessingJob(e,t){try{const{error:n}=await this.supabase.from(Jf).update(t).eq("id",e);return n?{success:!1,error:n.message}:{success:!0}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async deleteCSVFile(e){try{await this.supabase.from(Kf).delete().eq("csv_file_id",e),await this.supabase.from($f).delete().eq("csv_file_id",e),await this.supabase.from(Jf).delete().eq("csv_file_id",e);const{error:t}=await this.supabase.from(qf).delete().eq("id",e);return t?{success:!1,error:t.message}:{success:!0}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}async updateCSVFile(e,t){try{const{data:n,error:r}=await this.supabase.from(qf).update(t).eq("id",e).select().single();return r?{success:!1,error:r.message}:{success:!0,data:n}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async updateProperty(e,t){try{const{data:n,error:r}=await this.supabase.from(Gf).update(t).eq("id",e).select().single();return r?{success:!1,error:r.message}:{success:!0,data:n}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async deleteProperty(e){try{const t=await this.supabase.from(qf).select("id").eq("property_id",e);if(t.data)for(const e of t.data)await this.deleteCSVFile(e.id);const{error:n}=await this.supabase.from(Gf).delete().eq("id",e);return n?{success:!1,error:n.message}:{success:!0}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}async getHeaderMatches(e){try{const{data:t,error:n}=await this.supabase.from($f).select("*").eq("csv_file_id",e).order("confidence_score",{ascending:!1});return n?{success:!1,error:n.message}:{success:!0,data:t||[]}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}async updateHeaderMatch(e,t){try{const{data:n,error:r}=await this.supabase.from($f).update(t).eq("id",e).select().single();return r?{success:!1,error:r.message}:{success:!0,data:n}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async getParsedData(e){try{const{data:t,error:n}=await this.supabase.from(Kf).select("*").eq("csv_file_id",e).order("created_at",{ascending:!1});return n?{success:!1,error:n.message}:{success:!0,data:t||[]}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}async updateParsedData(e,t){try{const{data:n,error:r}=await this.supabase.from(Kf).update(t).eq("id",e).select().single();return r?{success:!1,error:r.message}:{success:!0,data:n}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async healthCheck(){try{const{error:e}=await this.supabase.from(Gf).select("count").limit(1);return e?{success:!1,error:e.message}:{success:!0,status:"healthy"}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}},Qf=()=>{const[e,n]=(0,t.useState)([]),[r,i]=(0,t.useState)(!1),[a,o]=(0,t.useState)(""),[l,c]=(0,t.useState)(!1),[d,u]=(0,t.useState)(!1),[h,p]=(0,t.useState)(null),[f,g]=(0,t.useState)({name:"",address:"",type:"Apartment",total_units:0}),[m,y]=(0,t.useState)(null),[x,b]=(0,t.useState)(null);(0,t.useEffect)(()=>{v()},[]);const v=async()=>{i(!0);try{const e=await Yf.getProperties();e.success&&e.data?n(e.data):y(e.error||"Failed to load properties")}catch(m){console.error("Failed to load properties:",m),y("Failed to load properties")}finally{i(!1)}},w=e.filter(e=>e.name.toLowerCase().includes(a.toLowerCase())||e.address.toLowerCase().includes(a.toLowerCase())||e.type.toLowerCase().includes(a.toLowerCase())),_=["Apartment","Townhouse","Single Family","Condo","Duplex","Commercial","Mixed Use","Other"];return(0,zs.jsxs)("div",{className:"space-y-6",children:[(0,zs.jsxs)("div",{className:"flex justify-between items-center",children:[(0,zs.jsxs)("div",{children:[(0,zs.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[(0,zs.jsx)(Ts,{className:"w-8 h-8 mr-3 text-blue-600"}),"Property Management"]}),(0,zs.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage your properties for AI parser integration"})]}),(0,zs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,zs.jsxs)("button",{onClick:()=>c(!0),className:"btn-primary flex items-center space-x-2",children:[(0,zs.jsx)(_f,{className:"w-4 h-4"}),(0,zs.jsx)("span",{children:"Add Property"})]}),(0,zs.jsxs)("button",{onClick:v,disabled:r,className:"btn-secondary flex items-center space-x-2",children:[(0,zs.jsx)(La,{className:"w-4 h-4 ".concat(r?"animate-spin":"")}),(0,zs.jsx)("span",{children:"Refresh"})]})]})]}),(0,zs.jsx)("div",{className:"card",children:(0,zs.jsxs)("div",{className:"relative",children:[(0,zs.jsx)(zf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,zs.jsx)("input",{type:"text",placeholder:"Search properties by name, address, or type...",value:a,onChange:e=>o(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),x&&(0,zs.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-md p-3 flex items-center space-x-2",children:[(0,zs.jsx)(Vf,{className:"w-4 h-4 text-green-600"}),(0,zs.jsx)("span",{className:"text-sm text-green-600",children:x})]}),m&&(0,zs.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-md p-3 flex items-center space-x-2",children:[(0,zs.jsx)(Ea,{className:"w-4 h-4 text-red-600"}),(0,zs.jsx)("span",{className:"text-sm text-red-600",children:m})]}),r?(0,zs.jsxs)("div",{className:"card text-center py-12",children:[(0,zs.jsx)(La,{className:"w-8 h-8 animate-spin mx-auto text-blue-600 mb-4"}),(0,zs.jsx)("p",{className:"text-gray-600",children:"Loading properties..."})]}):0===w.length?(0,zs.jsxs)("div",{className:"card text-center py-12",children:[(0,zs.jsx)(Ts,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),(0,zs.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No properties found"}),(0,zs.jsx)("p",{className:"text-gray-600 mb-4",children:a?"No properties match your search criteria.":"Add your first property to get started with AI parser integration."}),(0,zs.jsx)("button",{onClick:()=>c(!0),className:"btn-primary",children:"Add Property"})]}):(0,zs.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:w.map(e=>(0,zs.jsxs)("div",{className:"card hover:shadow-lg transition-shadow",children:[(0,zs.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,zs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,zs.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,zs.jsx)(Wf,{className:"w-5 h-5 text-blue-600"})}),(0,zs.jsxs)("div",{children:[(0,zs.jsx)("h3",{className:"font-medium text-gray-900",children:e.name}),(0,zs.jsx)("p",{className:"text-sm text-gray-500",children:e.type})]})]}),(0,zs.jsx)("div",{className:"flex items-center space-x-1",children:(0,zs.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(e.ai_parser_enabled?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.ai_parser_enabled?"AI Enabled":"Disabled"})})]}),(0,zs.jsxs)("div",{className:"space-y-3",children:[(0,zs.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,zs.jsx)(Uf,{className:"w-4 h-4"}),(0,zs.jsx)("span",{className:"truncate",children:e.address})]}),(0,zs.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,zs.jsx)(Ms,{className:"w-4 h-4"}),(0,zs.jsxs)("span",{children:[e.total_units," units"]})]}),(0,zs.jsxs)("div",{className:"pt-3 border-t",children:[(0,zs.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"Created:"}),(0,zs.jsx)("p",{className:"text-sm font-medium",children:new Date(e.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})})]})]}),(0,zs.jsxs)("div",{className:"flex items-center justify-between pt-4 mt-4 border-t",children:[(0,zs.jsx)("div",{className:"flex items-center space-x-2",children:(0,zs.jsx)("button",{onClick:()=>(e=>{p(e),g({name:e.name,address:e.address,type:e.type,total_units:e.total_units}),u(!0)})(e),className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-md transition-colors",title:"Edit Property",children:(0,zs.jsx)(_a,{className:"w-4 h-4"})})}),(0,zs.jsx)("div",{className:"flex items-center space-x-2",children:(0,zs.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this property? This will also delete all associated CSV files and data."))try{const t=await Yf.deleteProperty(e);t.success?(b("Property deleted successfully!"),await v()):y(t.error||"Failed to delete property")}catch(m){console.error("Failed to delete property:",m),y("Failed to delete property")}})(e.id),className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-md transition-colors",title:"Delete Property",children:(0,zs.jsx)(Sa,{className:"w-4 h-4"})})})]})]},e.id))}),l&&(0,zs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,zs.jsx)("div",{className:"bg-white rounded-lg max-w-md w-full mx-4",children:(0,zs.jsxs)("div",{className:"p-6",children:[(0,zs.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,zs.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Add New Property"}),(0,zs.jsx)("button",{onClick:()=>{c(!1),g({name:"",address:"",type:"Apartment",total_units:0}),y(null)},className:"text-gray-400 hover:text-gray-600",children:(0,zs.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,zs.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),y(null),b(null);try{const e=await Yf.createProperty(f);e.success?(b("Property added successfully!"),g({name:"",address:"",type:"Apartment",total_units:0}),c(!1),await v()):y(e.error||"Failed to add property")}catch(m){console.error("Failed to add property:",m),y("Failed to add property")}},className:"space-y-4",children:[(0,zs.jsxs)("div",{children:[(0,zs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Name *"}),(0,zs.jsx)("input",{type:"text",required:!0,value:f.name,onChange:e=>g((0,s.A)((0,s.A)({},f),{},{name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter property name"})]}),(0,zs.jsxs)("div",{children:[(0,zs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address *"}),(0,zs.jsx)("input",{type:"text",required:!0,value:f.address,onChange:e=>g((0,s.A)((0,s.A)({},f),{},{address:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter property address"})]}),(0,zs.jsxs)("div",{children:[(0,zs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Type *"}),(0,zs.jsx)("select",{required:!0,value:f.type,onChange:e=>g((0,s.A)((0,s.A)({},f),{},{type:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:_.map(e=>(0,zs.jsx)("option",{value:e,children:e},e))})]}),(0,zs.jsxs)("div",{children:[(0,zs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Units *"}),(0,zs.jsx)("input",{type:"number",required:!0,min:"1",value:f.total_units,onChange:e=>g((0,s.A)((0,s.A)({},f),{},{total_units:parseInt(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter total units"})]}),(0,zs.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,zs.jsx)("button",{type:"button",onClick:()=>{c(!1),g({name:"",address:"",type:"Apartment",total_units:0}),y(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),(0,zs.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Add Property"})]})]})]})})}),d&&h&&(0,zs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,zs.jsx)("div",{className:"bg-white rounded-lg max-w-md w-full mx-4",children:(0,zs.jsxs)("div",{className:"p-6",children:[(0,zs.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,zs.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Edit Property"}),(0,zs.jsx)("button",{onClick:()=>{u(!1),p(null),g({name:"",address:"",type:"Apartment",total_units:0}),y(null)},className:"text-gray-400 hover:text-gray-600",children:(0,zs.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,zs.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),h){y(null),b(null);try{const e=await Yf.updateProperty(h.id,f);e.success?(b("Property updated successfully!"),u(!1),p(null),await v()):y(e.error||"Failed to update property")}catch(m){console.error("Failed to update property:",m),y("Failed to update property")}}},className:"space-y-4",children:[(0,zs.jsxs)("div",{children:[(0,zs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Name *"}),(0,zs.jsx)("input",{type:"text",required:!0,value:f.name,onChange:e=>g((0,s.A)((0,s.A)({},f),{},{name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,zs.jsxs)("div",{children:[(0,zs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address *"}),(0,zs.jsx)("input",{type:"text",required:!0,value:f.address,onChange:e=>g((0,s.A)((0,s.A)({},f),{},{address:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,zs.jsxs)("div",{children:[(0,zs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Type *"}),(0,zs.jsx)("select",{required:!0,value:f.type,onChange:e=>g((0,s.A)((0,s.A)({},f),{},{type:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:_.map(e=>(0,zs.jsx)("option",{value:e,children:e},e))})]}),(0,zs.jsxs)("div",{children:[(0,zs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Units *"}),(0,zs.jsx)("input",{type:"number",required:!0,min:"1",value:f.total_units,onChange:e=>g((0,s.A)((0,s.A)({},f),{},{total_units:parseInt(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,zs.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,zs.jsx)("button",{type:"button",onClick:()=>{u(!1),p(null),g({name:"",address:"",type:"Apartment",total_units:0}),y(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),(0,zs.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Update Property"})]})]})]})})})]})},Xf=()=>{var e;const[n,r]=(0,t.useState)("list"),s=[{id:"list",label:"Property List",icon:Lf,description:"View and manage your properties"},{id:"management",label:"Property Management",icon:Df,description:"Advanced property management features"}];return(0,zs.jsx)("div",{className:"space-y-6",children:(0,zs.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,zs.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,zs.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Properties"}),(0,zs.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage your property portfolio and settings"})]}),(0,zs.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,zs.jsx)("nav",{className:"flex space-x-8",children:s.map(e=>(0,zs.jsxs)("button",{onClick:()=>r(e.id),className:"flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium transition-colors ".concat(n===e.id?"bg-blue-100 text-blue-700 border border-blue-200":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:[(0,zs.jsx)(e.icon,{className:"w-4 h-4"}),(0,zs.jsx)("span",{children:e.label})]},e.id))})}),(0,zs.jsx)("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200",children:(0,zs.jsx)("p",{className:"text-sm text-gray-600",children:null===(e=s.find(e=>e.id===n))||void 0===e?void 0:e.description})}),(0,zs.jsx)("div",{className:"p-6",children:(()=>{switch(n){case"list":default:return(0,zs.jsx)(Bf,{});case"management":return(0,zs.jsx)(Qf,{})}})()})]})})},Zf=Ns("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),eg=Ns("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),tg=Ns("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),ng=Ns("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),rg=Ns("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),sg=Ns("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),ig=()=>{const[e,n]=(0,t.useState)("12m"),[r,s]=(0,t.useState)(null),[i,a]=(0,t.useState)(null),[o,l]=(0,t.useState)(!1),c=(0,t.useCallback)(()=>{setTimeout(()=>{s({totalRevenue:125e3,totalExpenses:85e3,netIncome:4e4,revenuePerUnit:4807,totalUnits:26,timeRange:e,occupancyRate:100,averageRent:1850,maintenanceCosts:12e3,propertyTax:15e3,insurance:8e3,utilities:1e4,managementFees:5e3,expenseRatio:.68,avgMaintenance:12e3,avgUtilities:1e4,avgInsurance:8e3,avgPropertyTax:15e3,avgOtherExpenses:4e4,revenueTrend:5e3,monthlyData:[{Date:"2024-01","Monthly Revenue":1e4,"Occupancy Rate":95},{Date:"2024-02","Monthly Revenue":10500,"Occupancy Rate":96},{Date:"2024-03","Monthly Revenue":11e3,"Occupancy Rate":98}],totalMonths:12,avgOccupancy:96,occupancyTrend:2.5,profitMargin:32})},1e3)},[e]);(0,t.useEffect)(()=>{c()},[c]);const d=r?[{title:"Revenue per Unit",value:"$".concat(r.revenuePerUnit.toLocaleString()),change:r.revenuePerUnit>1500?"Above Market":"Below Market",changeType:r.revenuePerUnit>1500?"positive":"negative",period:"".concat("1m"===r.timeRange?"current month":"avg over ".concat(r.timeRange)),icon:Es,color:"green"},{title:"Expense Ratio",value:"".concat((100*r.expenseRatio).toFixed(1),"%"),change:r.expenseRatio<.6?"Efficient":"High Costs",changeType:r.expenseRatio<.6?"positive":"negative",period:"of ".concat("1m"===r.timeRange?"monthly":"total"," revenue"),icon:Zf,color:r.expenseRatio<.6?"green":"red"},{title:"Occupancy Trend",value:"".concat(r.occupancyTrend>0?"+":"").concat(r.occupancyTrend.toFixed(1),"%"),change:r.occupancyTrend>0?"Improving":r.occupancyTrend<0?"Declining":"Stable",changeType:r.occupancyTrend>0?"positive":r.occupancyTrend<0?"negative":"neutral",period:"vs earlier ".concat(r.timeRange),icon:Ra,color:r.occupancyTrend>0?"blue":r.occupancyTrend<0?"red":"gray"},{title:"Revenue Trend",value:"".concat(r.revenueTrend>0?"+":"","$").concat(r.revenueTrend.toLocaleString()),change:r.revenueTrend>0?"Growing":r.revenueTrend<0?"Declining":"Stable",changeType:r.revenueTrend>0?"positive":r.revenueTrend<0?"negative":"neutral",period:"vs start of ".concat(r.timeRange),icon:As,color:r.revenueTrend>0?"green":r.revenueTrend<0?"red":"gray"}]:[],u=r?[{title:"Rent Optimization Opportunity",description:"Revenue per unit is $".concat(r.revenuePerUnit.toLocaleString()," ").concat("1m"===r.timeRange?"this month":"over ".concat(r.timeRange),". ").concat(r.revenuePerUnit>1500?"Above market rate - consider rent increase of 3-5%.":"Below market rate - potential for 8-12% increase."),type:"opportunity",impact:r.revenuePerUnit>1500?"Medium":"High",action:r.revenuePerUnit>1500?"Moderate rent increase":"Significant rent increase",icon:eg},{title:"Expense Management Alert",description:"Expense ratio is ".concat((100*r.expenseRatio).toFixed(1),"% ").concat("1m"===r.timeRange?"this month":"over ".concat(r.timeRange),". Industry benchmark is 60%. ").concat(r.expenseRatio>.6?"Expenses are ".concat((100*(r.expenseRatio-.6)).toFixed(1),"% above benchmark."):"Expenses are ".concat((100*(.6-r.expenseRatio)).toFixed(1),"% below benchmark.")),type:r.expenseRatio>.6?"warning":"positive",impact:r.expenseRatio>.6?"High":"Low",action:r.expenseRatio>.6?"Review expense categories":"Maintain current efficiency",icon:tg},{title:"Revenue Trend Analysis",description:"Revenue ".concat(r.revenueTrend>0?"increased":r.revenueTrend<0?"decreased":"remained stable"," by $").concat(Math.abs(r.revenueTrend).toLocaleString()," ").concat("1m"===r.timeRange?"this month":"over ".concat(r.timeRange),". ").concat(r.revenueTrend>0?"Strong performance trend.":r.revenueTrend<0?"Declining trend needs attention.":"Stable performance."),type:r.revenueTrend>0?"positive":r.revenueTrend<0?"warning":"info",impact:Math.abs(r.revenueTrend)>5e3?"High":"Medium",action:r.revenueTrend>0?"Continue current strategy":r.revenueTrend<0?"Investigate revenue decline":"Monitor performance",icon:As},{title:"Occupancy Performance",description:"Average occupancy is ".concat(r.avgOccupancy.toFixed(1),"% ").concat("1m"===r.timeRange?"this month":"over ".concat(r.timeRange),". ").concat(r.occupancyTrend>0?"Trend improved by ".concat(r.occupancyTrend.toFixed(1),"%."):r.occupancyTrend<0?"Trend declined by ".concat(Math.abs(r.occupancyTrend).toFixed(1),"%."):"Trend is stable."),type:r.occupancyTrend>0?"positive":r.occupancyTrend<0?"warning":"info",impact:Math.abs(r.occupancyTrend)>2?"High":"Medium",action:r.occupancyTrend>0?"Maintain current strategy":r.occupancyTrend<0?"Review marketing & retention":"Monitor occupancy",icon:Ms}]:[],h=r?[{metric:"Revenue per Unit",current:r.revenuePerUnit,benchmark:1500,status:r.revenuePerUnit>=1500?"above":"below",unit:"1m"===r.timeRange?"$/month":"$/month avg",variance:((r.revenuePerUnit-1500)/1500*100).toFixed(1)},{metric:"Expense Ratio",current:100*r.expenseRatio,benchmark:60,status:r.expenseRatio<=.6?"below":"above",unit:"%",variance:((r.expenseRatio-.6)/.6*100).toFixed(1)},{metric:"Occupancy Rate",current:r.avgOccupancy,benchmark:95,status:r.avgOccupancy>=95?"above":"below",unit:"%",variance:((r.avgOccupancy-95)/95*100).toFixed(1)},{metric:"Profit Margin",current:r.profitMargin,benchmark:25,status:r.profitMargin>=25?"above":"below",unit:"%",variance:((r.profitMargin-25)/25*100).toFixed(1)}]:[];return(0,zs.jsxs)("div",{className:"space-y-6",children:[(0,zs.jsxs)("div",{className:"flex justify-between items-center",children:[(0,zs.jsxs)("div",{children:[(0,zs.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Property Management Analytics"}),(0,zs.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:"Actionable insights for informed property management decisions"})]}),(0,zs.jsxs)("div",{className:"flex space-x-3",children:[(0,zs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,zs.jsx)(Aa,{className:"w-4 h-4 text-gray-400 dark:text-gray-500"}),(0,zs.jsxs)("select",{value:e,onChange:e=>n(e.target.value),className:"border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[(0,zs.jsx)("option",{value:"1m",children:"Last 1 month"}),(0,zs.jsx)("option",{value:"3m",children:"Last 3 months"}),(0,zs.jsx)("option",{value:"6m",children:"Last 6 months"}),(0,zs.jsx)("option",{value:"12m",children:"Last 12 months"}),(0,zs.jsx)("option",{value:"24m",children:"Last 24 months"})]})]}),(0,zs.jsxs)("button",{className:"btn-secondary flex items-center space-x-2 dark:bg-gray-700 dark:text-white dark:border-gray-600",children:[(0,zs.jsx)(ng,{className:"w-4 h-4"}),(0,zs.jsx)("span",{children:"Export Report"})]})]})]}),(0,zs.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:d.map((e,t)=>{const n=e.icon;return(0,zs.jsx)("div",{className:"metric-card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:(0,zs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zs.jsxs)("div",{children:[(0,zs.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:e.title}),(0,zs.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:e.value}),(0,zs.jsxs)("div",{className:"flex items-center mt-1",children:[(0,zs.jsx)("span",{className:"text-sm ".concat("positive"===e.changeType?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:e.change}),(0,zs.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400 ml-1",children:e.period})]})]}),(0,zs.jsx)("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center ".concat("green"===e.color?"bg-green-100 dark:bg-green-900/20":"blue"===e.color?"bg-blue-100 dark:bg-blue-900/20":"purple"===e.color?"bg-purple-100 dark:bg-purple-900/20":"bg-orange-100 dark:bg-orange-900/20"),children:(0,zs.jsx)(n,{className:"w-6 h-6 ".concat("green"===e.color?"text-green-600 dark:text-green-400":"blue"===e.color?"text-blue-600 dark:text-blue-400":"purple"===e.color?"text-purple-600 dark:text-purple-400":"text-orange-600 dark:text-orange-400")})})]})},t)})}),(0,zs.jsxs)("div",{className:"card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:[(0,zs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Performance vs Industry Benchmarks"}),(0,zs.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:h.map((e,t)=>(0,zs.jsxs)("div",{className:"p-4 border border-gray-200 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700",children:[(0,zs.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,zs.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white",children:e.metric}),(0,zs.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("above"===e.status?"bg-green-100 dark:bg-green-900/20 text-green-800 dark:text-green-300":"bg-red-100 dark:bg-red-900/20 text-red-800 dark:text-red-300"),children:["above"===e.status?"Above":"Below"," Benchmark"]})]}),(0,zs.jsxs)("div",{className:"space-y-1",children:[(0,zs.jsxs)("div",{className:"flex justify-between",children:[(0,zs.jsx)("span",{className:"text-sm text-gray-600",children:"Current:"}),(0,zs.jsxs)("span",{className:"font-semibold",children:[e.current.toFixed(1),e.unit]})]}),(0,zs.jsxs)("div",{className:"flex justify-between",children:[(0,zs.jsx)("span",{className:"text-sm text-gray-600",children:"Benchmark:"}),(0,zs.jsxs)("span",{className:"text-sm text-gray-500",children:[e.benchmark,e.unit]})]}),(0,zs.jsxs)("div",{className:"flex justify-between",children:[(0,zs.jsx)("span",{className:"text-sm text-gray-600",children:"Variance:"}),(0,zs.jsxs)("span",{className:"text-sm font-medium ".concat("above"===e.status?"text-green-600":"text-red-600"),children:[parseFloat(e.variance)>0?"+":"",e.variance,"%"]})]})]})]},t))})]}),(0,zs.jsxs)("div",{className:"card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:[(0,zs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Management Insights & Recommendations"}),(0,zs.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:u.map((e,t)=>{const n=e.icon;return(0,zs.jsx)("div",{className:"p-4 border border-gray-200 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700",children:(0,zs.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,zs.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center ".concat("opportunity"===e.type?"bg-green-100 dark:bg-green-900/20":"warning"===e.type?"bg-yellow-100 dark:bg-yellow-900/20":"positive"===e.type?"bg-blue-100 dark:bg-blue-900/20":"bg-gray-100 dark:bg-gray-600"),children:(0,zs.jsx)(n,{className:"w-4 h-4 ".concat("opportunity"===e.type?"text-green-600 dark:text-green-400":"warning"===e.type?"text-yellow-600 dark:text-yellow-400":"positive"===e.type?"text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-300")})}),(0,zs.jsxs)("div",{className:"flex-1",children:[(0,zs.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,zs.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white",children:e.title}),(0,zs.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("High"===e.impact?"bg-red-100 dark:bg-red-900/20 text-red-800 dark:text-red-300":"Medium"===e.impact?"bg-yellow-100 dark:bg-yellow-900/20 text-yellow-800 dark:text-yellow-300":"bg-blue-100 dark:bg-blue-900/20 text-blue-800 dark:text-blue-300"),children:[e.impact," Impact"]})]}),(0,zs.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-3",children:e.description}),(0,zs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zs.jsx)("span",{className:"text-sm font-medium text-primary-600 dark:text-primary-400",children:e.action}),(0,zs.jsx)("button",{onClick:()=>(e=>{a(e),l(!0)})(e),className:"text-sm text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 font-medium cursor-pointer transition-colors",children:"Learn More \u2192"})]})]})]})},t)})})]}),r&&(0,zs.jsxs)("div",{className:"card",children:[(0,zs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Cost Analysis Breakdown"}),(0,zs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,zs.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[(0,zs.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,zs.jsx)(rg,{className:"w-6 h-6 text-blue-600"})}),(0,zs.jsx)("h4",{className:"font-semibold text-gray-900 mb-1",children:"Maintenance"}),(0,zs.jsxs)("p",{className:"text-xl font-bold text-gray-900",children:["$",r.avgMaintenance.toLocaleString()]}),(0,zs.jsx)("p",{className:"text-sm text-gray-600",children:"1m"===r.timeRange?"this month":"avg over ".concat(r.timeRange)})]}),(0,zs.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[(0,zs.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,zs.jsx)(As,{className:"w-6 h-6 text-green-600"})}),(0,zs.jsx)("h4",{className:"font-semibold text-gray-900 mb-1",children:"Utilities"}),(0,zs.jsxs)("p",{className:"text-xl font-bold text-gray-900",children:["$",r.avgUtilities.toLocaleString()]}),(0,zs.jsx)("p",{className:"text-sm text-gray-600",children:"1m"===r.timeRange?"this month":"avg over ".concat(r.timeRange)})]}),(0,zs.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[(0,zs.jsx)("div",{className:"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,zs.jsx)(tg,{className:"w-6 h-6 text-yellow-600"})}),(0,zs.jsx)("h4",{className:"font-semibold text-gray-900 mb-1",children:"Insurance"}),(0,zs.jsxs)("p",{className:"text-xl font-bold text-gray-900",children:["$",r.avgInsurance.toLocaleString()]}),(0,zs.jsx)("p",{className:"text-sm text-gray-600",children:"1m"===r.timeRange?"this month":"avg over ".concat(r.timeRange)})]}),(0,zs.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[(0,zs.jsx)("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,zs.jsx)(rg,{className:"w-6 h-6 text-red-600"})}),(0,zs.jsx)("h4",{className:"font-semibold text-gray-900 mb-1",children:"Property Tax"}),(0,zs.jsxs)("p",{className:"text-xl font-bold text-gray-900",children:["$",r.avgPropertyTax.toLocaleString()]}),(0,zs.jsx)("p",{className:"text-sm text-gray-600",children:"1m"===r.timeRange?"this month":"avg over ".concat(r.timeRange)})]}),(0,zs.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[(0,zs.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,zs.jsx)(Es,{className:"w-6 h-6 text-purple-600"})}),(0,zs.jsx)("h4",{className:"font-semibold text-gray-900 mb-1",children:"Total Expenses"}),(0,zs.jsxs)("p",{className:"text-xl font-bold text-gray-900",children:["$",r.totalExpenses.toLocaleString()]}),(0,zs.jsx)("p",{className:"text-sm text-gray-600",children:"1m"===r.timeRange?"this month":"total over ".concat(r.timeRange)})]})]})]}),o&&i&&(0,zs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,zs.jsx)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:(0,zs.jsxs)("div",{className:"p-6",children:[(0,zs.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,zs.jsxs)("h2",{className:"text-2xl font-bold text-gray-900",children:["AI Analysis: ",i.title]}),(0,zs.jsx)("button",{onClick:()=>l(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,zs.jsx)(Ds,{className:"w-6 h-6"})})]}),(()=>{const e=(e=>{var t,n,s,i;if(!r||!e)return null;const a={title:e.title,currentData:{},benchmarks:{},calculations:{},recommendations:[],riskFactors:[],opportunities:[]};switch(e.title){case"Rent Optimization Opportunity":a.currentData={revenuePerUnit:r.revenuePerUnit,totalRevenue:r.totalRevenue,totalUnits:r.totalUnits,timePeriod:r.timeRange,monthlyRevenue:(null===(t=r.monthlyData)||void 0===t?void 0:t.map(e=>parseFloat(e["Monthly Revenue"])||0))||[]};const e=r.totalRevenue/r.totalMonths/r.totalUnits;a.benchmarks={chicoMarketRate:Math.round(.92*e),chicoAverage:Math.round(.96*e),chicoPremium:Math.round(1.08*e),yourCurrent:Math.round(e),location:"Chico, CA - College Town Market"};const o=Math.round(.92*e);a.calculations={currentVsChicoMarket:((r.revenuePerUnit-o)/o*100).toFixed(1),potentialIncrease:r.revenuePerUnit>o?"2-4%":"5-8%",revenueImpact:r.revenuePerUnit>o?"$".concat((.03*r.totalRevenue).toLocaleString()," annually (conservative Chico increase)"):"$".concat((.065*r.totalRevenue).toLocaleString()," annually (Chico market adjustment)"),marketPosition:r.revenuePerUnit>o?"Above Chico Market":"Below Chico Market"},a.recommendations=["Research Chico State University student housing demand patterns","Compare rates with nearby complexes on Nord Ave and Mangrove Ave","Consider seasonal rent adjustments aligned with academic calendar","Leverage proximity to campus and downtown Chico for premium positioning","Monitor Chico rental market trends and new construction impacts"],a.riskFactors=["Student population fluctuations affecting demand in Chico","Competition from new student housing developments near CSU Chico","Seasonal vacancy patterns during summer months","Economic impact on college-age renters and families","Chico housing market sensitivity to university enrollment"],a.opportunities=["Target CSU Chico students and young professionals","Capitalize on Chico's growing tech and healthcare sectors","Offer furnished units for student market premium","Partner with local businesses for tenant perks and retention","Position as premium alternative to on-campus housing"];break;case"Expense Management Alert":a.currentData={expenseRatio:r.expenseRatio,totalExpenses:r.totalExpenses,totalRevenue:r.totalRevenue,avgMaintenance:r.avgMaintenance,avgUtilities:r.avgUtilities,avgInsurance:r.avgInsurance,avgPropertyTax:r.avgPropertyTax,avgOtherExpenses:r.avgOtherExpenses},a.benchmarks={chicoStandard:.55,efficientThreshold:.45,highCostThreshold:.65,californiaAverage:.62,location:"Chico, CA - Moderate Climate Advantage"};const l=.55;a.calculations={currentVsChicoBenchmark:((r.expenseRatio-l)/l*100).toFixed(1),costSavings:r.expenseRatio<l?"$".concat((r.totalRevenue*(l-r.expenseRatio)).toLocaleString()," saved vs Chico benchmark"):"$".concat((r.totalRevenue*(r.expenseRatio-l)).toLocaleString()," over Chico benchmark"),chicoAdvantage:"Chico's mild climate reduces heating/cooling costs vs CA average",expenseBreakdown:{maintenance:"".concat((r.avgMaintenance/r.totalExpenses*100).toFixed(1),"%"),utilities:"".concat((r.avgUtilities/r.totalExpenses*100).toFixed(1),"%"),insurance:"".concat((r.avgInsurance/r.totalExpenses*100).toFixed(1),"%"),propertyTax:"".concat((r.avgPropertyTax/r.totalExpenses*100).toFixed(1),"%"),other:"".concat((r.avgOtherExpenses/r.totalExpenses*100).toFixed(1),"%")}},a.recommendations=r.expenseRatio>l?["Leverage Chico's mild climate for reduced HVAC costs","Partner with local Chico contractors for competitive maintenance rates","Implement water-saving measures (Chico water conservation incentives)","Consider solar installation (Chico solar rebate programs)","Review property tax assessments with Butte County"]:["Excellent cost management for Chico market conditions","Use efficiency as marketing advantage over competitors","Consider reinvesting savings in tenant amenities","Document strategies for potential portfolio expansion in Chico"],a.riskFactors=r.expenseRatio>l?["Chico wildfire risk may increase insurance premiums","California utility rate increases affecting Chico properties","Butte County property tax reassessments","Aging infrastructure in older Chico neighborhoods"]:["Over-optimization may impact tenant satisfaction","Chico market competition may require amenity investments","Climate change impacts on Chico area operating costs"],a.opportunities=["Chico solar incentive programs and net metering","Butte County water conservation rebates","Partner with CSU Chico facilities management for bulk purchasing","Leverage local Chico contractors for competitive rates","Implement smart thermostats for Chico's variable climate"];break;case"Revenue Trend Analysis":a.currentData={revenueTrend:r.revenueTrend,totalRevenue:r.totalRevenue,monthlyRevenue:(null===(n=r.monthlyData)||void 0===n?void 0:n.map(e=>parseFloat(e["Monthly Revenue"])||0))||[],timePeriod:r.timeRange,occupancyRates:(null===(s=r.monthlyData)||void 0===s?void 0:s.map(e=>parseFloat(e["Occupancy Rate"])||0))||[]},a.benchmarks={chicoHealthyGrowth:3e3,chicoStableThreshold:500,chicoDeclineThreshold:-1500,seasonalVariation:8,location:"Chico, CA - University Town Dynamics"},a.calculations={trendPercentage:r.totalRevenue>0?(r.revenueTrend/r.totalRevenue*100).toFixed(1):"0",monthlyAverage:r.monthlyData?(r.totalRevenue/r.monthlyData.length).toLocaleString():"0",occupancyCorrelation:r.monthlyData?r.monthlyData.map(e=>({month:e.Date||e.month,revenue:parseFloat(e["Monthly Revenue"])||0,occupancy:parseFloat(e["Occupancy Rate"])||0})):[]},a.recommendations=r.revenueTrend>0?["Capitalize on Chico's growing job market and CSU enrollment","Market to incoming CSU Chico students and faculty","Consider premium pricing during peak rental season (July-August)","Maintain competitive edge over new Chico developments"]:["Analyze impact of new student housing near CSU Chico campus","Review pricing strategy against Chico market comparables","Consider summer lease incentives for student retention","Evaluate property condition vs. newer Chico complexes"],a.riskFactors=["CSU Chico enrollment fluctuations affecting rental demand","New student housing developments near campus","Seasonal revenue variations during summer months","Chico economic dependence on university and agriculture","Competition from single-family rentals in Chico neighborhoods"],a.opportunities=["Target growing Chico tech sector employees","Develop partnerships with CSU Chico for faculty housing","Offer flexible lease terms for academic calendar alignment","Market to Chico healthcare workers (Enloe Medical Center)","Premium pricing for furnished units targeting students"];break;case"Occupancy Performance":a.currentData={avgOccupancy:r.avgOccupancy,occupancyTrend:r.occupancyTrend,occupancyRates:(null===(i=r.monthlyData)||void 0===i?void 0:i.map(e=>parseFloat(e["Occupancy Rate"])||0))||[],timePeriod:r.timeRange,totalUnits:r.totalUnits},a.benchmarks={chicoStandard:92,chicoExcellent:96,chicoConcern:85,summerVariation:-15,location:"Chico, CA - Student Housing Market"};const c=92;a.calculations={currentVsChicoBenchmark:((r.avgOccupancy-c)/c*100).toFixed(1),trendImpact:r.occupancyTrend>0?"Improving by ".concat(r.occupancyTrend.toFixed(1),"% (excellent for Chico)"):"Declining by ".concat(Math.abs(r.occupancyTrend).toFixed(1),"% (monitor seasonal patterns)"),revenueImpact:r.avgOccupancy<c?"$".concat(((c-r.avgOccupancy)/100*r.totalRevenue).toLocaleString()," potential revenue vs Chico benchmark"):"$".concat(((r.avgOccupancy-c)/100*r.totalRevenue).toLocaleString()," revenue advantage in Chico market"),seasonalNote:"Chico occupancy typically drops 10-20% during summer months"},a.recommendations=r.occupancyTrend>0?["Excellent performance for Chico market - maintain strategies","Market early to incoming CSU Chico students (March-May)","Develop summer retention programs for year-round tenants","Consider premium pricing given strong occupancy"]:["Analyze competition from new Chico student housing","Improve marketing to CSU Chico students and young professionals","Consider amenity upgrades (fitness center, study rooms)","Implement summer lease incentives and flexible terms"],a.riskFactors=["Significant summer occupancy drops in Chico student market","CSU Chico enrollment changes affecting rental demand","New purpose-built student housing near campus","Economic impacts on college-age renters and families","Competition from single-family home rentals in Chico"],a.opportunities=["Target CSU Chico graduate students and faculty (stable tenants)","Offer academic year leases (9-month) with summer options","Create study-friendly amenities for student market","Partner with Chico employers for employee housing programs","Develop community events leveraging Chico's college town culture"]}return a})(i);return e?(0,zs.jsxs)("div",{className:"space-y-6",children:[(0,zs.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,zs.jsxs)("h3",{className:"text-lg font-semibold text-blue-900 mb-3 flex items-center",children:[(0,zs.jsx)(sg,{className:"w-5 h-5 mr-2"}),"Current Performance Data"]}),(0,zs.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(e.currentData).map(e=>{let[t,n]=e;return(0,zs.jsxs)("div",{className:"flex justify-between",children:[(0,zs.jsxs)("span",{className:"text-sm text-blue-700 capitalize",children:[t.replace(/([A-Z])/g," $1").trim(),":"]}),(0,zs.jsx)("span",{className:"text-sm font-medium text-blue-900",children:Array.isArray(n)?"".concat(n.length," data points"):"number"===typeof n?t.includes("Revenue")||t.includes("Expense")||t.includes("Cost")||t.includes("Unit")?"$".concat(n.toLocaleString()):t.includes("Ratio")?"".concat(n.toFixed(1),"%"):"".concat(n.toFixed(1)):String(n)})]},t)})})]}),(0,zs.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,zs.jsxs)("h3",{className:"text-lg font-semibold text-green-900 mb-3 flex items-center",children:[(0,zs.jsx)(Vf,{className:"w-5 h-5 mr-2"}),"Industry Benchmarks"]}),(0,zs.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(e.benchmarks).map(e=>{let[t,n]=e;return(0,zs.jsxs)("div",{className:"flex justify-between",children:[(0,zs.jsxs)("span",{className:"text-sm text-green-700 capitalize",children:[t.replace(/([A-Z])/g," $1").trim(),":"]}),(0,zs.jsx)("span",{className:"text-sm font-medium text-green-900",children:"number"===typeof n?t.includes("Ratio")?"".concat((100*n).toFixed(1),"%"):t.includes("Rate")&&n<=100||t.includes("Threshold")&&n<=100?"".concat(n,"%"):t.includes("Market")||t.includes("Industry")||t.includes("Premium")||t.includes("Revenue")||t.includes("Expense")||t.includes("Cost")?"$".concat(n.toLocaleString()):"".concat(n.toLocaleString()):String(n)})]},t)})})]}),(0,zs.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[(0,zs.jsxs)("h3",{className:"text-lg font-semibold text-yellow-900 mb-3 flex items-center",children:[(0,zs.jsx)(As,{className:"w-5 h-5 mr-2"}),"AI Calculations & Analysis"]}),(0,zs.jsx)("div",{className:"space-y-3",children:Object.entries(e.calculations).map(e=>{let[t,n]=e;return(0,zs.jsxs)("div",{className:"flex justify-between",children:[(0,zs.jsxs)("span",{className:"text-sm text-yellow-700 capitalize",children:[t.replace(/([A-Z])/g," $1").trim(),":"]}),(0,zs.jsx)("span",{className:"text-sm font-medium text-yellow-900",children:"object"===typeof n&&null!==n?Object.entries(n).map(e=>{let[t,n]=e;return(0,zs.jsxs)("div",{className:"text-right",children:[(0,zs.jsxs)("span",{className:"text-xs text-yellow-600",children:[t,": "]}),(0,zs.jsx)("span",{className:"text-xs font-medium",children:String(n)})]},t)}):String(n)})]},t)})})]}),(0,zs.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg",children:[(0,zs.jsxs)("h3",{className:"text-lg font-semibold text-purple-900 mb-3 flex items-center",children:[(0,zs.jsx)(eg,{className:"w-5 h-5 mr-2"}),"AI Recommendations"]}),(0,zs.jsx)("ul",{className:"space-y-2",children:e.recommendations.map((e,t)=>(0,zs.jsxs)("li",{className:"flex items-start",children:[(0,zs.jsx)("span",{className:"text-purple-600 mr-2",children:"\u2022"}),(0,zs.jsx)("span",{className:"text-sm text-purple-700",children:e})]},t))})]}),(0,zs.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg",children:[(0,zs.jsxs)("h3",{className:"text-lg font-semibold text-red-900 mb-3 flex items-center",children:[(0,zs.jsx)(Ea,{className:"w-5 h-5 mr-2"}),"Risk Factors to Monitor"]}),(0,zs.jsx)("ul",{className:"space-y-2",children:e.riskFactors.map((e,t)=>(0,zs.jsxs)("li",{className:"flex items-start",children:[(0,zs.jsx)("span",{className:"text-red-600 mr-2",children:"\u26a0"}),(0,zs.jsx)("span",{className:"text-sm text-red-700",children:e})]},t))})]}),(0,zs.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,zs.jsxs)("h3",{className:"text-lg font-semibold text-green-900 mb-3 flex items-center",children:[(0,zs.jsx)(Ra,{className:"w-5 h-5 mr-2"}),"Growth Opportunities"]}),(0,zs.jsx)("ul",{className:"space-y-2",children:e.opportunities.map((e,t)=>(0,zs.jsxs)("li",{className:"flex items-start",children:[(0,zs.jsx)("span",{className:"text-green-600 mr-2",children:"\ud83d\udca1"}),(0,zs.jsx)("span",{className:"text-sm text-green-700",children:e})]},t))})]})]}):null})()]})})})]})},ag=Ns("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),og=Ns("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const lg=new class{constructor(){this.defaultConfig={percentiles:[20,50,80],sortOrder:"desc",includeZeroAmounts:!1,groupByMonth:!0}}async generateImpactAnalysis(e,t,n,r){const i=(0,s.A)((0,s.A)({},this.defaultConfig),n);try{const e=await(0,mf.getCSVData)(r);if(!e||0===e.length)throw new Error("No CSV data found for property");const n=this.processCSVDataToLineItems(e,t),s=n.filter(e=>"income"===e.category),a=n.filter(e=>"expense"===e.category),o=this.createImpactBuckets(s,i);return{income:o,expenses:this.createImpactBuckets(a,i),generatedAt:(new Date).toISOString(),dateRange:this.calculateDateRange(e)}}catch(a){throw console.error("Error generating impact analysis:",a),a}}processCSVDataToLineItems(e,t){const n=new Map;return e.forEach(e=>{const r=e.account_categories||{},s=e.preview_data||[];Object.entries(r).forEach(r=>{let[i,a]=r;const o=s.find(e=>e.account_name===i);if(!o)return;const l=o.time_series||{},c={};let d=0;if(Object.entries(l).forEach(e=>{let[t,n]=e;const r=this.parseAmount(n);null!==r&&(c[t]=r,d+=Math.abs(r))}),0===d&&!this.defaultConfig.includeZeroAmounts)return;if(t){if(t.minAmount&&d<t.minAmount)return;if(t.maxAmount&&d>t.maxAmount)return;if(t.csvSources&&!t.csvSources.includes(e.file_name))return}const u="".concat(i,"_").concat(e.file_name);if(n.has(u)){const e=n.get(u);e.totalAmount+=d,Object.entries(c).forEach(t=>{let[n,r]=t;e.monthlyBreakdown[n]=(e.monthlyBreakdown[n]||0)+r})}else n.set(u,{accountName:i,totalAmount:d,percentageOfTotal:0,monthlyBreakdown:c,csvSource:e.file_name,category:this.determineCategory(i,a)})})}),Array.from(n.values())}createImpactBuckets(e,t){if(0===e.length)return{top20:[],top50:[],top80:[],bottom20:[],totalAmount:0,itemCount:0};const n=[...e].sort((e,n)=>"desc"===t.sortOrder?n.totalAmount-e.totalAmount:e.totalAmount-n.totalAmount),r=n.reduce((e,t)=>e+t.totalAmount,0),s=n.length;n.forEach(e=>{e.percentageOfTotal=r>0?e.totalAmount/r*100:0});const i=Math.ceil(.2*s),a=Math.ceil(.5*s),o=Math.ceil(.8*s);return{top20:n.slice(0,i),top50:n.slice(0,a),top80:n.slice(0,o),bottom20:n.slice(o),totalAmount:r,itemCount:s}}generateImpactSummaries(e){const t=[];return[e.top20,e.top50,e.top80,e.bottom20].forEach((n,r)=>{const s=["top20","top50","top80","bottom20"][r],i=n.reduce((e,t)=>e+t.totalAmount,0),a=e.totalAmount>0?i/e.totalAmount*100:0;t.push({percentile:s,totalAmount:i,percentageOfTotal:a,itemCount:n.length,averagePerItem:n.length>0?i/n.length:0})}),t}getMonthlyTrends(e){const t=[],n=e.totalAmount;return Object.entries(e.monthlyBreakdown).forEach(e=>{let[r,s]=e;t.push({month:r,amount:s,percentage:n>0?s/n*100:0})}),t.sort((e,t)=>e.month.localeCompare(t.month))}exportToCSV(e){const t=[["Category","Percentile","Account Name","Total Amount","Percentage of Total","CSV Source","Monthly Breakdown"].join(",")];return["top20","top50","top80","bottom20"].forEach(n=>{e.income[n].forEach(e=>{const r=Object.entries(e.monthlyBreakdown).map(e=>{let[t,n]=e;return"".concat(t,":").concat(n)}).join(";");t.push(["Income",n,'"'.concat(e.accountName,'"'),e.totalAmount,e.percentageOfTotal.toFixed(2),'"'.concat(e.csvSource,'"'),'"'.concat(r,'"')].join(","))})}),["top20","top50","top80","bottom20"].forEach(n=>{e.expenses[n].forEach(e=>{const r=Object.entries(e.monthlyBreakdown).map(e=>{let[t,n]=e;return"".concat(t,":").concat(n)}).join(";");t.push(["Expense",n,'"'.concat(e.accountName,'"'),e.totalAmount,e.percentageOfTotal.toFixed(2),'"'.concat(e.csvSource,'"'),'"'.concat(r,'"')].join(","))})}),t.join("\n")}parseAmount(e){if(null===e||void 0===e||""===e)return null;const t=parseFloat(e.toString().replace(/[,$]/g,""));return isNaN(t)?null:t}determineCategory(e,t){const n=e.toLowerCase();return n.includes("rent")||n.includes("revenue")||n.includes("income")||n.includes("tenant")||n.includes("resident")||n.includes("rental")||n.includes("fee")||n.includes("charge")?"income":n.includes("expense")||n.includes("cost")||n.includes("maintenance")||n.includes("repair")||n.includes("utility")||n.includes("insurance")||n.includes("tax")||n.includes("management")?"expense":"string"===typeof t&&t.toLowerCase().includes("income")?"income":"expense"}calculateDateRange(e){let t=new Date,n=new Date(0);return e.forEach(e=>{(e.preview_data||[]).forEach(e=>{const r=e.time_series||{};Object.keys(r).forEach(e=>{const r=new Date(e);r<t&&(t=r),r>n&&(n=r)})})}),{start:t.toISOString().split("T")[0],end:n.toISOString().split("T")[0]}}};mh.register(Ep,Op,Mh,Th,dp,Sp,lp,sp);const cg=e=>{let{items:t,title:n,color:r,maxItems:s=5}=e;const i=t.sort((e,t)=>t.totalAmount-e.totalAmount).slice(0,s);if(0===i.length)return(0,zs.jsx)("div",{className:"card",children:(0,zs.jsx)("div",{className:"text-center py-8",children:(0,zs.jsxs)("div",{className:"text-gray-500",children:["No data available for ",n]})})});const a=new Set;i.forEach(e=>{Object.keys(e.monthlyBreakdown).forEach(e=>{a.add(e)})});const o=Array.from(a).sort(),l=i.map((e,t)=>{const n=o.map(t=>e.monthlyBreakdown[t]||0),s="green"===r?120:0,i=50-8*t;return{label:e.accountName,data:n,borderColor:"hsl(".concat(s,", ").concat(70,"%, ").concat(i,"%)"),backgroundColor:"hsla(".concat(s,", ").concat(70,"%, ").concat(i,"%, 0.1)"),fill:!1,tension:.4,pointRadius:4,pointHoverRadius:6}}),c={labels:o,datasets:l},d={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:20,font:{size:12}}},title:{display:!0,text:n,font:{size:16,weight:"bold"}},tooltip:{mode:"index",intersect:!1,callbacks:{label:function(e){const t=e.dataset.label||"",n=e.parsed.y;return"".concat(t,": $").concat(n.toLocaleString())}}}},scales:{x:{display:!0,title:{display:!0,text:"Month"},grid:{display:!1}},y:{display:!0,title:{display:!0,text:"Amount ($)"},beginAtZero:!0,ticks:{callback:function(e){return"$"+e.toLocaleString()}}}},interaction:{mode:"nearest",axis:"x",intersect:!1}};return(0,zs.jsxs)("div",{className:"card",children:[(0,zs.jsx)(bf,{chartId:"impact-trend-chart",chartName:n,className:"mb-4"}),(0,zs.jsx)("div",{className:"h-80",children:(0,zs.jsx)(gf,{data:c,options:d})}),(0,zs.jsxs)("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,zs.jsxs)("div",{className:"text-center",children:[(0,zs.jsxs)("div",{className:"text-2xl font-bold text-gray-900",children:["$",i.reduce((e,t)=>e+t.totalAmount,0).toLocaleString()]}),(0,zs.jsx)("div",{className:"text-sm text-gray-500",children:"Total Impact"})]}),(0,zs.jsxs)("div",{className:"text-center",children:[(0,zs.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:i.length}),(0,zs.jsx)("div",{className:"text-sm text-gray-500",children:"Top Items"})]}),(0,zs.jsxs)("div",{className:"text-center",children:[(0,zs.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:o.length}),(0,zs.jsx)("div",{className:"text-sm text-gray-500",children:"Months Tracked"})]})]})]})},dg=e=>{let{summary:t,color:n,onClick:r,isExpanded:s}=e;const i="green"===n?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800";return(0,zs.jsxs)("div",{className:"card cursor-pointer transition-all hover:shadow-md ".concat(i),onClick:r,children:[(0,zs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zs.jsxs)("div",{children:[(0,zs.jsxs)("div",{className:"text-sm font-medium",children:[t.percentile.replace("top","Top ").replace("bottom","Bottom "),"%"]}),(0,zs.jsxs)("div",{className:"text-2xl font-bold",children:["$",t.totalAmount.toLocaleString()]}),(0,zs.jsxs)("div",{className:"text-xs opacity-75",children:[t.percentageOfTotal.toFixed(1),"% of total"]})]}),(0,zs.jsx)("div",{className:"flex items-center",children:s?(0,zs.jsx)(kf,{className:"w-5 h-5"}):(0,zs.jsx)(og,{className:"w-5 h-5"})})]}),(0,zs.jsxs)("div",{className:"mt-2 text-xs opacity-75",children:[t.itemCount," items \u2022 Avg: $",t.averagePerItem.toLocaleString()]})]})},ug=e=>{let{title:n,items:r,totalAmount:s,itemCount:i,color:a,icon:o}=e;const[l,c]=(0,t.useState)(!1);if(0===r.length)return null;const d="green"===a?"text-green-600 bg-green-50":"text-red-600 bg-red-50";return(0,zs.jsxs)("div",{className:"border border-gray-200 rounded-lg",children:[(0,zs.jsxs)("div",{className:"flex items-center justify-between p-4 cursor-pointer hover:bg-gray-50",onClick:()=>c(!l),children:[(0,zs.jsxs)("div",{className:"flex items-center space-x-3",children:[o,(0,zs.jsxs)("div",{children:[(0,zs.jsx)("div",{className:"font-medium text-gray-900",children:n}),(0,zs.jsxs)("div",{className:"text-sm text-gray-500",children:[i," items \u2022 $",s.toLocaleString()]})]})]}),(0,zs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,zs.jsxs)("div",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(d),children:[(s/(s+1e3)*100).toFixed(1),"% of total"]}),l?(0,zs.jsx)(kf,{className:"w-4 h-4 text-gray-400"}):(0,zs.jsx)(og,{className:"w-4 h-4 text-gray-400"})]})]}),l&&(0,zs.jsx)("div",{className:"border-t border-gray-200 p-4 bg-gray-50",children:(0,zs.jsx)("div",{className:"space-y-2",children:r.map((e,t)=>(0,zs.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white rounded border hover:shadow-sm cursor-pointer",onClick:()=>(e=>{console.log("Item clicked:",e)})(e),children:[(0,zs.jsxs)("div",{className:"flex-1",children:[(0,zs.jsx)("div",{className:"font-medium text-gray-900",children:e.accountName}),(0,zs.jsx)("div",{className:"text-sm text-gray-500",children:e.csvSource})]}),(0,zs.jsxs)("div",{className:"text-right",children:[(0,zs.jsxs)("div",{className:"font-medium text-gray-900",children:["$",e.totalAmount.toLocaleString()]}),(0,zs.jsxs)("div",{className:"text-sm text-gray-500",children:[e.percentageOfTotal.toFixed(1),"%"]})]})]},t))})})]})},hg=e=>{let{item:t,onClose:n}=e;const r=lg.getMonthlyTrends(t);return(0,zs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,zs.jsx)("div",{className:"bg-white rounded-lg max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto",children:(0,zs.jsxs)("div",{className:"p-6",children:[(0,zs.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,zs.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:t.accountName}),(0,zs.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:"\xd7"})]}),(0,zs.jsxs)("div",{className:"space-y-4",children:[(0,zs.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,zs.jsxs)("div",{children:[(0,zs.jsx)("div",{className:"text-sm text-gray-500",children:"Total Amount"}),(0,zs.jsxs)("div",{className:"text-xl font-semibold",children:["$",t.totalAmount.toLocaleString()]})]}),(0,zs.jsxs)("div",{children:[(0,zs.jsx)("div",{className:"text-sm text-gray-500",children:"Percentage of Total"}),(0,zs.jsxs)("div",{className:"text-xl font-semibold",children:[t.percentageOfTotal.toFixed(1),"%"]})]})]}),(0,zs.jsxs)("div",{children:[(0,zs.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"CSV Source"}),(0,zs.jsx)("div",{className:"text-sm font-medium",children:t.csvSource})]}),(0,zs.jsxs)("div",{children:[(0,zs.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"Monthly Breakdown"}),(0,zs.jsx)("div",{className:"space-y-2",children:r.map((e,t)=>(0,zs.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[(0,zs.jsx)("div",{className:"text-sm font-medium",children:e.month}),(0,zs.jsxs)("div",{className:"text-sm",children:["$",e.amount.toLocaleString()]})]},t))})]})]})]})})})},pg=e=>{let{propertyId:n,dateRange:r}=e;const[s,i]=(0,t.useState)(null),[a,o]=(0,t.useState)(!0),[l,c]=(0,t.useState)(null),[d,u]=(0,t.useState)("income"),[h,p]=(0,t.useState)(new Set(["top20"])),[f,g]=(0,t.useState)(null),[m,y]=(0,t.useState)(!1);(0,t.useEffect)(()=>{x()},[n,r]);const x=async()=>{try{o(!0),c(null);const e=r?{dateRange:r,minAmount:0}:void 0,t=jf.j.getCurrentUser(),s=null===t||void 0===t?void 0:t.id,a=await lg.generateImpactAnalysis(n,e,void 0,s);i(a)}catch(e){console.error("Error loading impact analysis:",e),c("Failed to load impact analysis")}finally{o(!1)}};if(a)return(0,zs.jsx)("div",{className:"card",children:(0,zs.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,zs.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,zs.jsx)("span",{className:"ml-2 text-gray-600",children:"Loading impact analysis..."})]})});if(l)return(0,zs.jsx)("div",{className:"card",children:(0,zs.jsxs)("div",{className:"text-center py-8",children:[(0,zs.jsx)("div",{className:"text-red-600 mb-2",children:"Error loading impact analysis"}),(0,zs.jsx)("div",{className:"text-sm text-gray-500",children:l}),(0,zs.jsx)("button",{onClick:x,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Retry"})]})});if(!s)return(0,zs.jsx)("div",{className:"card",children:(0,zs.jsx)("div",{className:"text-center py-8",children:(0,zs.jsx)("div",{className:"text-gray-600",children:"No impact analysis data available"})})});const b="income"===d?s.income:s.expenses,v=lg.generateImpactSummaries(b);return(0,zs.jsxs)("div",{className:"space-y-6",children:[(0,zs.jsxs)("div",{className:"card",children:[(0,zs.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,zs.jsxs)("div",{children:[(0,zs.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,zs.jsx)(As,{className:"w-5 h-5 mr-2"}),"Line Item Impact Analysis"]}),(0,zs.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Identify the most impactful income and expense items by dollar value"})]}),(0,zs.jsxs)("button",{onClick:()=>{if(!s)return;const e=lg.exportToCSV(s),t=new Blob([e],{type:"text/csv"}),r=window.URL.createObjectURL(t),i=document.createElement("a");i.href=r,i.download="impact-analysis-".concat(n,"-").concat((new Date).toISOString().split("T")[0],".csv"),i.click(),window.URL.revokeObjectURL(r)},className:"flex items-center px-3 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:[(0,zs.jsx)(ng,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]}),(0,zs.jsxs)("div",{className:"flex space-x-1 bg-gray-100 rounded-lg p-1",children:[(0,zs.jsxs)("button",{onClick:()=>u("income"),className:"flex-1 flex items-center justify-center px-4 py-2 rounded-md text-sm font-medium transition-colors ".concat("income"===d?"bg-white text-green-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:[(0,zs.jsx)(Ra,{className:"w-4 h-4 mr-2"}),"Income Impact"]}),(0,zs.jsxs)("button",{onClick:()=>u("expenses"),className:"flex-1 flex items-center justify-center px-4 py-2 rounded-md text-sm font-medium transition-colors ".concat("expenses"===d?"bg-white text-red-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:[(0,zs.jsx)(Zf,{className:"w-4 h-4 mr-2"}),"Expense Impact"]})]})]}),(0,zs.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:v.map(e=>(0,zs.jsx)(dg,{summary:e,color:"income"===d?"green":"red",onClick:()=>(e=>{const t=new Set(h);t.has(e)?t.delete(e):t.add(e),p(t)})(e.percentile),isExpanded:h.has(e.percentile)},e.percentile))}),(0,zs.jsx)(cg,{items:b.top20,title:"Top 20% ".concat("income"===d?"Income":"Expense"," Items Trend"),color:"income"===d?"green":"red",maxItems:5}),(0,zs.jsxs)("div",{className:"card",children:[(0,zs.jsxs)("h4",{className:"text-md font-semibold text-gray-900 mb-4",children:["income"===d?"Income":"Expense"," Line Items by Impact"]}),(0,zs.jsx)("div",{className:"space-y-4",children:v.map(e=>(0,zs.jsx)(ug,{title:"Top ".concat(e.percentile.replace("top","").replace("bottom","Bottom "),"%"),items:b[e.percentile],totalAmount:e.totalAmount,itemCount:e.itemCount,color:"income"===d?"green":"red",icon:"income"===d?(0,zs.jsx)(Ra,{className:"w-4 h-4"}):(0,zs.jsx)(Zf,{className:"w-4 h-4"})},e.percentile))})]}),m&&f&&(0,zs.jsx)(hg,{item:f,onClose:()=>y(!1)})]})},fg=()=>{const[e,r]=(0,t.useState)("2024"),[s,i]=(0,t.useState)([]),[a,o]=(0,t.useState)(""),[l,c]=(0,t.useState)([]),[d,u]=(0,t.useState)(!0),[h,p]=(0,t.useState)(null);(0,t.useEffect)(()=>{f()},[]);const f=async()=>{try{let e=[];try{const t=await fetch("http://localhost:5001/api/processed-data");if(t.ok){const n=await t.json();if(console.log("\ud83c\udfe0 Local financials data loaded:",n),n.success&&n.data){const t=new Set;Object.keys(n.data).forEach(e=>{t.add(e)});const r=Array.from(t).map(e=>({id:"local-".concat(e.toLowerCase()),name:e,address:"Local Data Source",type:"Apartment Complex",total_units:26}));e=[...r],console.log("\ud83c\udfe0 Local financials properties:",r)}}}catch(h){console.log("\u26a0\ufe0f Local financials data not available, trying API...")}if(0===e.length){const t=await Mf.getProperties();t.success&&t.data&&(e=t.data)}i(e),e.length>0&&o(e[0].id)}catch(h){console.error("Error loading properties:",h),p("Failed to load properties")}},g=(0,t.useCallback)(async()=>{try{u(!0),p(null);let e=[];const t=await(0,mf.getCSVData)();console.log("\ud83d\udcca Using Supabase data for financials:",t.length,"active CSVs"),t.length>0?(console.log("\ud83d\udcca Processing CSV data for financials:",t.map(e=>e.file_name)),t.forEach(t=>{const n=t.file_name,r=t.account_categories,s=t.preview_data;console.log("\ud83d\udcc1 Processing CSV: ".concat(n," for financials")),Object.entries(r).forEach(n=>{let[r,i]=n;const o=s.find(e=>{var t;return(null===(t=e.account_name)||void 0===t?void 0:t.trim())===r});if(o&&o.time_series){console.log("\ud83d\udd0d Processing account: ".concat(r," (").concat(i,")"));Object.entries(o.time_series).filter(e=>{let[t,n]=e;return"total"!==t.toLowerCase()&&"sum"!==t.toLowerCase()&&"grand total"!==t.toLowerCase()&&"number"===typeof n&&0!==n}).forEach(n=>{let[s,o]=n,l=e.find(e=>e.date===s);if(l||(l={id:"".concat(t.id,"-").concat(s),property_id:a,date:s,month:s,revenue:"0",occupancy_rate:"95",maintenance_cost:"0",utilities_cost:"0",insurance_cost:"0",property_tax:"0",other_expenses:"0",expenses:"0",netIncome:"0",notes:"",property_name:"Chico"},e.push(l)),"income"===i){const e=parseFloat(l.revenue)||0;l.revenue=(e+o).toString()}else if("expense"===i){const e=parseFloat(l.expenses||"0")||0;l.expenses=(e+o).toString();const t=r.toLowerCase();if(t.includes("maintenance")||t.includes("repair")){const e=parseFloat(l.maintenance_cost)||0;l.maintenance_cost=(e+o).toString()}else if(t.includes("utility")||t.includes("water")||t.includes("garbage")){const e=parseFloat(l.utilities_cost)||0;l.utilities_cost=(e+o).toString()}else if(t.includes("insurance")){const e=parseFloat(l.insurance_cost)||0;l.insurance_cost=(e+o).toString()}else if(t.includes("tax")){const e=parseFloat(l.property_tax)||0;l.property_tax=(e+o).toString()}else{const e=parseFloat(l.other_expenses)||0;l.other_expenses=(e+o).toString()}}})}})}),e.forEach(e=>{const t=parseFloat(e.revenue)||0,n=parseFloat(e.expenses||"0")||0;e.netIncome=(t-n).toString()}),e.sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()),console.log("\ud83d\udcca Processed financial data:",e.length,"months")):console.log("\ud83d\udcca No active CSV data found for financials"),c(e)}catch(h){console.error("Error loading property data:",h),p("Failed to load property data"),c([])}finally{u(!1)}},[a]);(0,t.useEffect)(()=>{a&&g()},[a,g]);const m=(0,t.useCallback)(()=>{if(!l||0===l.length)return[];if(1===l.length&&l[0].revenue.includes("479482")){const e=.6*parseFloat(l[0].revenue);return[{category:"Maintenance & Repairs",amount:.25*e,percentage:25,color:"red"},{category:"Utilities",amount:.2*e,percentage:20,color:"blue"},{category:"Insurance",amount:.15*e,percentage:15,color:"green"},{category:"Property Tax",amount:.25*e,percentage:25,color:"purple"},{category:"Other Expenses",amount:.15*e,percentage:15,color:"orange"}]}const e=l.reduce((e,t)=>e+(parseFloat(t.maintenance_cost)||0),0),t=l.reduce((e,t)=>e+(parseFloat(t.utilities_cost)||0),0),n=l.reduce((e,t)=>e+(parseFloat(t.insurance_cost)||0),0),r=l.reduce((e,t)=>e+(parseFloat(t.property_tax)||0),0),s=l.reduce((e,t)=>e+(parseFloat(t.other_expenses)||0),0),i=e+t+n+r+s;return 0===i?[]:[{category:"Maintenance & Repairs",amount:e,percentage:e/i*100,color:"red"},{category:"Utilities",amount:t,percentage:t/i*100,color:"blue"},{category:"Insurance",amount:n,percentage:n/i*100,color:"green"},{category:"Property Tax",amount:r,percentage:r/i*100,color:"purple"},{category:"Other Expenses",amount:s,percentage:s/i*100,color:"orange"}]},[l]),y=(0,t.useCallback)(()=>{if(!l||0===l.length)return[];if(1===l.length&&l[0].revenue.includes("479482")){const e=parseFloat(l[0].revenue);return[{source:"Rent Payments",amount:.85*e,percentage:85},{source:"Late Fees",amount:.05*e,percentage:5},{source:"Application Fees",amount:.04*e,percentage:4},{source:"Pet Fees",amount:.03*e,percentage:3},{source:"Other Income",amount:.03*e,percentage:3}]}return[{source:"Rent Payments",amount:5e5,percentage:85},{source:"Late Fees",amount:3e4,percentage:5},{source:"Application Fees",amount:24e3,percentage:4},{source:"Pet Fees",amount:18e3,percentage:3},{source:"Other Income",amount:18e3,percentage:3}]},[l]),[x,b]=(0,t.useState)({totalRevenue:0,totalExpenses:0,netIncome:0,profitMargin:0,monthlyAverage:0}),[v,w]=(0,t.useState)([]),[_,k]=(0,t.useState)([]),[j,S]=(0,t.useState)([]),N=(0,t.useCallback)(async()=>{try{console.log("\ud83d\udd04 Loading financial data from CSV...");const e=await(async()=>{try{const{getCSVData:e}=await Promise.resolve().then(n.bind(n,5472)),t=await e();if(!t||0===t.length)return{totalRevenue:0,totalExpenses:0,netIncome:0,profitMargin:0,monthlyAverage:0};const r=t.filter(e=>!1!==e.is_active);let s=0,i=0,a=0;r.forEach(e=>{const t=e.file_name||e.fileName,n=e.total_records||e.totalRecords,r=e.account_categories||e.accountCategories,o=e.preview_data||e.previewData,l=e.file_type||e.fileType;if(console.log("\ud83d\udcc1 Financials processing CSV: ".concat(t," (").concat(n," records)")),"cash_flow"===l){console.log("\ud83d\udcb0 Financials processing CASH FLOW CSV - Looking for KEY METRICS...");let e=!1;[{name:"Total Operating Income",type:"income"},{name:"NOI - Net Operating Income",type:"net_income"},{name:"Total Operating Expense",type:"expense"}].forEach(t=>{const n=o.find(e=>{var n;return((null===(n=e.account_name)||void 0===n?void 0:n.trim().toLowerCase())||"").includes(t.name.toLowerCase())});if(n&&n.time_series){e=!0,console.log("\ud83c\udfaf Financials FOUND KEY METRIC: ".concat(n.account_name," (").concat(t.type,")"));const r=Object.entries(n.time_series).filter(e=>{let[t,n]=e;return"total"!==t.toLowerCase()&&"sum"!==t.toLowerCase()&&"grand total"!==t.toLowerCase()&&"number"===typeof n}).map(e=>{let[,t]=e;return t});if(r.length>0){const e=r.reduce((e,t)=>e+t,0);"income"===t.type?(s+=e,console.log("  \ud83d\udcb0 Financials ".concat(n.account_name,": Total Income = $").concat(e.toLocaleString()))):"expense"===t.type&&(i+=e,console.log("  \ud83d\udcb8 Financials ".concat(n.account_name,": Total Expense = $").concat(e.toLocaleString())))}}}),e?console.log("\u2705 Financials using KEY METRICS for calculation"):(console.log("\u26a0\ufe0f Financials key metrics not found, falling back to individual account categorization..."),Object.entries(r).forEach(e=>{let[t,n]=e;const r=o.find(e=>{var n;return(null===(n=e.account_name)||void 0===n?void 0:n.trim())===t});if(r&&r.time_series){const e=Object.entries(r.time_series).filter(e=>{let[t,n]=e;return"total"!==t.toLowerCase()&&"sum"!==t.toLowerCase()&&"grand total"!==t.toLowerCase()&&"number"===typeof n}).map(e=>{let[,t]=e;return t});if(e.length>0){const t=e.reduce((e,t)=>e+t,0);"income"===n?s+=t:"expense"===n&&(i+=t)}}}))}else Object.entries(r).forEach(e=>{let[t,n]=e;const r=o.find(e=>{var n;return(null===(n=e.account_name)||void 0===n?void 0:n.trim())===t});if(r&&r.time_series){const e=Object.entries(r.time_series).filter(e=>{let[t,n]=e;return"total"!==t.toLowerCase()&&"sum"!==t.toLowerCase()&&"grand total"!==t.toLowerCase()&&"number"===typeof n}).map(e=>{let[,t]=e;return t});if(e.length>0){const t=e.reduce((e,t)=>e+t,0);"income"===n?s+=t:"expense"===n&&(i+=t)}}});a+=n});const o=s,l=i,c=s-i,d=o>0?c/o*100:0,u=a>0?o/a:0;return console.log("\ud83d\udcca Financials calculated metrics:"),console.log("  \ud83d\udcb0 Total Revenue (Total Operating Income): $".concat(o.toLocaleString())),console.log("  \ud83d\udcb8 Total Expenses (Total Operating Expense): $".concat(l.toLocaleString())),console.log("  \ud83d\udcca Net Income (Net Operating Income): $".concat(c.toLocaleString())),console.log("  \ud83d\udcc8 Profit Margin: ".concat(d.toFixed(2),"%")),{totalRevenue:o,totalExpenses:l,netIncome:c,profitMargin:d,monthlyAverage:u}}catch(h){return console.error("Error calculating financial summary from CSV data:",h),{totalRevenue:0,totalExpenses:0,netIncome:0,profitMargin:0,monthlyAverage:0}}})(),t=await(async()=>{try{console.log("\ud83d\udd04 Generating monthly data from CSV...");const{getCSVData:e}=await Promise.resolve().then(n.bind(n,5472)),t=await e();if(console.log("\ud83d\udcca CSV data retrieved:",t.length,"files"),!t||0===t.length)return console.log("\u26a0\ufe0f No CSV data found"),[];const r=t.filter(e=>!1!==e.is_active);console.log("\ud83d\udcca Active CSVs:",r.length);const s=new Map;r.forEach(e=>{const t=e.file_name||e.fileName,n=e.preview_data||e.previewData,r=e.file_type||e.fileType;if(console.log("\ud83d\udcc1 Processing CSV: ".concat(t," (").concat(r,")")),console.log("\ud83d\udccb Preview data sample:",null===n||void 0===n?void 0:n.slice(0,2)),"cash_flow"===r){console.log("\ud83d\udcb0 Processing CASH FLOW CSV for monthly data...");let t=!1;if([{name:"Total Operating Income",type:"income"},{name:"NOI - Net Operating Income",type:"net_income"},{name:"Total Operating Expense",type:"expense"}].forEach(e=>{const r=n.find(t=>{var n;const r=(null===(n=t.account_name)||void 0===n?void 0:n.trim().toLowerCase())||"",s=e.name.toLowerCase();return console.log('\ud83d\udd0d Checking "'.concat(r,'" against "').concat(s,'"')),r.includes(s)});r&&r.time_series?(t=!0,console.log("\ud83c\udfaf FOUND KEY METRIC: ".concat(r.account_name," (").concat(e.type,")")),console.log("\ud83d\udcca Time Series Data:",r.time_series),Object.entries(r.time_series).forEach(t=>{let[n,r]=t;if("total"!==n.toLowerCase()&&"sum"!==n.toLowerCase()&&"grand total"!==n.toLowerCase()&&"number"===typeof r){s.has(n)||s.set(n,{revenue:0,expenses:0,netIncome:0,margin:0});const t=s.get(n);"income"===e.type?(t.revenue+=r,console.log("  \ud83d\udcb0 ".concat(n,": Revenue += ").concat(r))):"expense"===e.type&&(t.expenses+=r,console.log("  \ud83d\udcb8 ".concat(n,": Expenses += ").concat(r)))}})):console.log('\u274c Key metric "'.concat(e.name,'" not found'))}),!t){console.log("\u26a0\ufe0f Key metrics not found, falling back to individual categorization...");const t=e.account_categories||e.accountCategories;Object.entries(t).forEach(e=>{let[t,r]=e;const i=n.find(e=>{var n;return(null===(n=e.account_name)||void 0===n?void 0:n.trim())===t});i&&i.time_series&&Object.entries(i.time_series).forEach(e=>{let[t,n]=e;if("total"!==t.toLowerCase()&&"sum"!==t.toLowerCase()&&"grand total"!==t.toLowerCase()&&"number"===typeof n){s.has(t)||s.set(t,{revenue:0,expenses:0,netIncome:0,margin:0});const e=s.get(t);"income"===r?e.revenue+=n:"expense"===r&&(e.expenses+=n)}})})}}else{const t=e.account_categories||e.accountCategories;Object.entries(t).forEach(e=>{let[t,r]=e;const i=n.find(e=>{var n;return(null===(n=e.account_name)||void 0===n?void 0:n.trim())===t});i&&i.time_series&&Object.entries(i.time_series).forEach(e=>{let[t,n]=e;if("total"!==t.toLowerCase()&&"sum"!==t.toLowerCase()&&"grand total"!==t.toLowerCase()&&"number"===typeof n){s.has(t)||s.set(t,{revenue:0,expenses:0,netIncome:0,margin:0});const e=s.get(t);"income"===r?e.revenue+=n:"expense"===r&&(e.expenses+=n)}})})}});const i=Array.from(s.entries()).map(e=>{let[t,n]=e;const r=n.revenue-n.expenses,s=n.revenue>0?r/n.revenue*100:0;return{month:t,revenue:n.revenue,expenses:n.expenses,netIncome:r,margin:s}});return i.sort((e,t)=>{const n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=e.month.split(" ")[0],s=t.month.split(" ")[0];return n.indexOf(r)-n.indexOf(s)}),console.log("\ud83d\udcca Financials generated monthly data:",i),i}catch(h){return console.error("Error generating monthly data from CSV:",h),[]}})(),r=m(),s=y();console.log("\ud83d\udcca Financial summary loaded:",e),console.log("\ud83d\udcc5 Monthly data loaded:",t),b(e),w(t),k(r),S(s)}catch(h){console.error("Error loading financial data:",h)}},[m,y]);(0,t.useEffect)(()=>{N()},[m,y,N]);const C=e=>({red:"bg-red-500",blue:"bg-blue-500",green:"bg-green-500",purple:"bg-purple-500",orange:"bg-orange-500",yellow:"bg-yellow-500"}[e]||"bg-gray-500");return console.log("\ud83d\udd0d Financials Debug:",{propertyDataLength:l.length,propertyData:l,financialSummary:x,monthlyDataLength:v.length}),(0,zs.jsxs)("div",{className:"space-y-6",children:[(0,zs.jsxs)("div",{className:"flex justify-between items-center",children:[(0,zs.jsxs)("div",{children:[(0,zs.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Financials"}),(0,zs.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:"Real-time financial data from CSV uploads"})]}),(0,zs.jsxs)("div",{className:"flex space-x-3",children:[(0,zs.jsx)("div",{className:"flex items-center space-x-2",children:(0,zs.jsxs)("select",{value:a,onChange:e=>o(e.target.value),className:"border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",disabled:d,children:[(0,zs.jsx)("option",{value:"",children:"Select Property"}),s.map(e=>(0,zs.jsx)("option",{value:e.id,children:e.name},e.id))]})}),(0,zs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,zs.jsx)(Aa,{className:"w-4 h-4 text-gray-400 dark:text-gray-500"}),(0,zs.jsxs)("select",{value:e,onChange:e=>r(e.target.value),className:"border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,zs.jsx)("option",{value:"2024",children:"2024"}),(0,zs.jsx)("option",{value:"2023",children:"2023"}),(0,zs.jsx)("option",{value:"2022",children:"2022"})]})]}),(0,zs.jsxs)("button",{onClick:N,disabled:d,className:"btn-secondary flex items-center space-x-2 dark:bg-gray-700 dark:text-white dark:border-gray-600 dark:hover:bg-gray-600",children:[(0,zs.jsx)(La,{className:"w-4 h-4 ".concat(d?"animate-spin":"")}),(0,zs.jsx)("span",{children:"Refresh"})]}),(0,zs.jsxs)("button",{className:"btn-secondary flex items-center space-x-2 dark:bg-gray-700 dark:text-white dark:border-gray-600 dark:hover:bg-gray-600",children:[(0,zs.jsx)(ng,{className:"w-4 h-4"}),(0,zs.jsx)("span",{children:"Export"})]})]})]}),h&&(0,zs.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-md p-4 flex items-center",children:[(0,zs.jsx)(Ea,{className:"w-5 h-5 text-red-400 dark:text-red-500 mr-3"}),(0,zs.jsx)("p",{className:"text-sm text-red-800 dark:text-red-300",children:h})]}),d&&(0,zs.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,zs.jsxs)("div",{className:"text-center",children:[(0,zs.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),(0,zs.jsx)("p",{className:"text-gray-600",children:"Loading financial data..."})]})}),!d&&!h&&0===l.length&&(0,zs.jsxs)("div",{className:"text-center py-12",children:[(0,zs.jsx)(Es,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,zs.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Financial Data"}),(0,zs.jsx)("p",{className:"text-gray-500 mb-4",children:"Upload CSV files to see financial data for this property."}),(0,zs.jsx)("button",{className:"btn-primary",children:"Upload CSV Data"})]}),!d&&!h&&l.length>0&&(0,zs.jsxs)(zs.Fragment,{children:[(0,zs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[(0,zs.jsx)("div",{className:"metric-card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:(0,zs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zs.jsxs)("div",{children:[(0,zs.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Revenue"}),(0,zs.jsxs)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:["$",x.totalRevenue.toLocaleString()]}),(0,zs.jsx)("p",{className:"text-sm text-green-600 dark:text-green-400 mt-1",children:"+12.5% vs last year"})]}),(0,zs.jsx)("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900/20 rounded-lg flex items-center justify-center",children:(0,zs.jsx)(Es,{className:"w-6 h-6 text-green-600 dark:text-green-400"})})]})}),(0,zs.jsx)("div",{className:"metric-card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:(0,zs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zs.jsxs)("div",{children:[(0,zs.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Expenses"}),(0,zs.jsxs)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:["$",x.totalExpenses.toLocaleString()]}),(0,zs.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400 mt-1",children:"+3.2% vs last year"})]}),(0,zs.jsx)("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900/20 rounded-lg flex items-center justify-center",children:(0,zs.jsx)(Zf,{className:"w-6 h-6 text-red-600 dark:text-red-400"})})]})}),(0,zs.jsx)("div",{className:"metric-card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:(0,zs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zs.jsxs)("div",{children:[(0,zs.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Net Income"}),(0,zs.jsxs)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:["$",x.netIncome.toLocaleString()]}),(0,zs.jsx)("p",{className:"text-sm text-green-600 dark:text-green-400 mt-1",children:"+18.7% vs last year"})]}),(0,zs.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:(0,zs.jsx)(Ra,{className:"w-6 h-6 text-green-600"})})]})}),(0,zs.jsx)("div",{className:"metric-card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:(0,zs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zs.jsxs)("div",{children:[(0,zs.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Profit Margin"}),(0,zs.jsxs)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:[x.profitMargin,"%"]}),(0,zs.jsx)("p",{className:"text-sm text-green-600 dark:text-green-400 mt-1",children:"+2.1% vs last year"})]}),(0,zs.jsx)("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/20 rounded-lg flex items-center justify-center",children:(0,zs.jsx)(ag,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})})]})}),(0,zs.jsx)("div",{className:"metric-card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:(0,zs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zs.jsxs)("div",{children:[(0,zs.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Monthly Average"}),(0,zs.jsxs)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:["$",x.monthlyAverage.toLocaleString()]}),(0,zs.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Revenue per month"})]}),(0,zs.jsx)("div",{className:"w-12 h-12 bg-purple-100 dark:bg-purple-900/20 rounded-lg flex items-center justify-center",children:(0,zs.jsx)(Aa,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})})]})})]}),(0,zs.jsxs)("div",{className:"card",children:[(0,zs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Monthly Financial Breakdown"}),(0,zs.jsx)("div",{className:"overflow-x-auto",children:(0,zs.jsxs)("table",{className:"w-full",children:[(0,zs.jsx)("thead",{children:(0,zs.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,zs.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Month"}),(0,zs.jsx)("th",{className:"text-right py-3 px-4 font-medium text-gray-900",children:"Revenue"}),(0,zs.jsx)("th",{className:"text-right py-3 px-4 font-medium text-gray-900",children:"Expenses"}),(0,zs.jsx)("th",{className:"text-right py-3 px-4 font-medium text-gray-900",children:"Net Income"}),(0,zs.jsx)("th",{className:"text-right py-3 px-4 font-medium text-gray-900",children:"Margin"})]})}),(0,zs.jsx)("tbody",{children:v.map((e,t)=>(0,zs.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[(0,zs.jsx)("td",{className:"py-3 px-4 font-medium text-gray-900",children:e.month}),(0,zs.jsxs)("td",{className:"text-right py-3 px-4 text-gray-900",children:["$",e.revenue.toLocaleString()]}),(0,zs.jsxs)("td",{className:"text-right py-3 px-4 text-gray-900",children:["$",e.expenses.toLocaleString()]}),(0,zs.jsxs)("td",{className:"text-right py-3 px-4 text-gray-900",children:["$",e.netIncome.toLocaleString()]}),(0,zs.jsxs)("td",{className:"text-right py-3 px-4 text-gray-900",children:[e.margin,"%"]})]},t))})]})})]}),(0,zs.jsxs)("div",{className:"card",children:[(0,zs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Expense Breakdown"}),(0,zs.jsx)("div",{className:"space-y-4",children:_.map((e,t)=>(0,zs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,zs.jsx)("div",{className:"w-4 h-4 rounded-full ".concat(C(e.color))}),(0,zs.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.category})]}),(0,zs.jsxs)("div",{className:"text-right",children:[(0,zs.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:["$",e.amount.toLocaleString()]}),(0,zs.jsxs)("p",{className:"text-xs text-gray-500",children:[e.percentage,"%"]})]})]},t))})]}),(0,zs.jsxs)("div",{className:"card",children:[(0,zs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Revenue Sources"}),(0,zs.jsx)("div",{className:"space-y-4",children:j.map((e,t)=>(0,zs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,zs.jsx)("div",{className:"w-4 h-4 bg-green-500 rounded-full"}),(0,zs.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.source})]}),(0,zs.jsxs)("div",{className:"text-right",children:[(0,zs.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:["$",e.amount.toLocaleString()]}),(0,zs.jsxs)("p",{className:"text-xs text-gray-500",children:[e.percentage,"%"]})]})]},t))})]}),(0,zs.jsx)(pg,{propertyId:a,dateRange:{start:"".concat(e,"-01-01"),end:"".concat(e,"-12-31")}})]})]})},gg=()=>{const[e,n]=(0,t.useState)("all"),[r,s]=(0,t.useState)("all"),i=[{name:"Financial Summary",description:"Monthly revenue, expenses, and profit analysis",icon:Es,color:"green"},{name:"Occupancy Report",description:"Property occupancy rates and trends",icon:Ts,color:"blue"},{name:"Maintenance Report",description:"Maintenance costs and work order history",icon:As,color:"orange"},{name:"Tenant Report",description:"Tenant demographics and lease information",icon:Ms,color:"purple"}],a=e=>{switch(e){case"ready":return"bg-green-100 text-green-800";case"generating":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},o=[{id:"1",title:"Monthly Financial Summary",type:"financial",description:"Complete financial overview including revenue, expenses, and profit margins",createdDate:"2024-01-15",status:"ready",size:"2.4 MB",format:"PDF"},{id:"2",title:"Occupancy Rate Analysis",type:"occupancy",description:"Detailed occupancy rates and trends across all properties",createdDate:"2024-01-14",status:"ready",size:"1.8 MB",format:"Excel"},{id:"3",title:"Maintenance Cost Report",type:"maintenance",description:"Breakdown of maintenance costs and repair history",createdDate:"2024-01-13",status:"ready",size:"3.1 MB",format:"PDF"},{id:"4",title:"Tenant Demographics",type:"tenant",description:"Analysis of tenant demographics and lease patterns",createdDate:"2024-01-12",status:"generating",size:"N/A",format:"CSV"},{id:"5",title:"Annual Property Performance",type:"financial",description:"Year-end performance analysis for all properties",createdDate:"2024-01-10",status:"ready",size:"4.2 MB",format:"PDF"},{id:"6",title:"Rent Roll Analysis",type:"tenant",description:"Current rent roll with lease expiration dates",createdDate:"2024-01-08",status:"failed",size:"N/A",format:"Excel"}].filter(t=>{const n="all"===e||t.type===e,s="all"===r||t.format===r;return n&&s});return(0,zs.jsxs)("div",{className:"space-y-6",children:[(0,zs.jsxs)("div",{className:"flex justify-between items-center",children:[(0,zs.jsxs)("div",{children:[(0,zs.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Reports"}),(0,zs.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:"Generate and manage your property reports"})]}),(0,zs.jsxs)("button",{className:"btn-primary flex items-center space-x-2 dark:bg-blue-700 dark:hover:bg-blue-600",children:[(0,zs.jsx)(_f,{className:"w-4 h-4"}),(0,zs.jsx)("span",{children:"New Report"})]})]}),(0,zs.jsxs)("div",{className:"card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:[(0,zs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Quick Report Templates"}),(0,zs.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:i.map((e,t)=>{const n=e.icon;return(0,zs.jsxs)("button",{className:"p-4 border border-gray-200 dark:border-gray-600 rounded-lg hover:border-primary-300 dark:hover:border-primary-600 hover:bg-primary-50 dark:hover:bg-primary-900/20 transition-colors duration-200 text-left bg-gray-50 dark:bg-gray-700",children:[(0,zs.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center mb-3 ".concat("green"===e.color?"bg-green-100 dark:bg-green-900/20":"blue"===e.color?"bg-blue-100 dark:bg-blue-900/20":"orange"===e.color?"bg-orange-100 dark:bg-orange-900/20":"bg-purple-100 dark:bg-purple-900/20"),children:(0,zs.jsx)(n,{className:"w-5 h-5 ".concat("green"===e.color?"text-green-600 dark:text-green-400":"blue"===e.color?"text-blue-600 dark:text-blue-400":"orange"===e.color?"text-orange-600 dark:text-orange-400":"text-purple-600 dark:text-purple-400")})}),(0,zs.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white mb-1",children:e.name}),(0,zs.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.description})]},t)})})]}),(0,zs.jsx)("div",{className:"card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:(0,zs.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,zs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,zs.jsx)(Ff,{className:"w-4 h-4 text-gray-400 dark:text-gray-500"}),(0,zs.jsxs)("select",{value:e,onChange:e=>n(e.target.value),className:"border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,zs.jsx)("option",{value:"all",children:"All Types"}),(0,zs.jsx)("option",{value:"financial",children:"Financial"}),(0,zs.jsx)("option",{value:"occupancy",children:"Occupancy"}),(0,zs.jsx)("option",{value:"maintenance",children:"Maintenance"}),(0,zs.jsx)("option",{value:"tenant",children:"Tenant"})]})]}),(0,zs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,zs.jsx)(Ps,{className:"w-4 h-4 text-gray-400 dark:text-gray-500"}),(0,zs.jsxs)("select",{value:r,onChange:e=>s(e.target.value),className:"border border-gray-300 dark:border-gray-600 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,zs.jsx)("option",{value:"all",children:"All Formats"}),(0,zs.jsx)("option",{value:"PDF",children:"PDF"}),(0,zs.jsx)("option",{value:"Excel",children:"Excel"}),(0,zs.jsx)("option",{value:"CSV",children:"CSV"})]})]})]})}),(0,zs.jsxs)("div",{className:"card bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:[(0,zs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Recent Reports"}),(0,zs.jsx)("div",{className:"space-y-4",children:o.map(e=>{const t=(e=>{switch(e){case"financial":return Es;case"occupancy":return Ts;case"maintenance":return As;case"tenant":return Ms;default:return Ps}})(e.type);return(0,zs.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200 bg-gray-50 dark:bg-gray-700",children:[(0,zs.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,zs.jsx)("div",{className:"w-10 h-10 bg-gray-100 dark:bg-gray-600 rounded-lg flex items-center justify-center",children:(0,zs.jsx)(t,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),(0,zs.jsxs)("div",{children:[(0,zs.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white",children:e.title}),(0,zs.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.description}),(0,zs.jsxs)("div",{className:"flex items-center space-x-4 mt-1",children:[(0,zs.jsxs)("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:["Created: ",new Date(e.createdDate).toLocaleDateString()]}),(0,zs.jsxs)("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:["Size: ",e.size]}),(0,zs.jsxs)("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:["Format: ",e.format]})]})]})]}),(0,zs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,zs.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(a(e.status)),children:e.status}),(0,zs.jsxs)("div",{className:"flex space-x-1",children:[(0,zs.jsx)("button",{className:"p-2 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200",children:(0,zs.jsx)(ka,{className:"w-4 h-4"})}),(0,zs.jsx)("button",{className:"p-2 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200",disabled:"ready"!==e.status,children:(0,zs.jsx)(ng,{className:"w-4 h-4"})})]})]})]},e.id)})})]}),0===o.length&&(0,zs.jsxs)("div",{className:"text-center py-12",children:[(0,zs.jsx)(Ps,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,zs.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No reports found"}),(0,zs.jsx)("p",{className:"text-gray-500",children:"Try adjusting your filter criteria or create a new report."})]})]})},mg=Ns("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),yg=()=>{const[e,n]=(0,t.useState)([]),[r,i]=(0,t.useState)(!1),[a,o]=(0,t.useState)(null),[l,c]=(0,t.useState)(""),[d,u]=(0,t.useState)([]),[h,p]=(0,t.useState)(null),[f,g]=(0,t.useState)("checking"),[m,y]=(0,t.useState)("supabase"),[x,b]=(0,t.useState)([]),[v,w]=(0,t.useState)(null),[_,k]=(0,t.useState)(!1),[j,S]=(0,t.useState)("idle"),N=(0,t.useRef)(null);(0,t.useEffect)(()=>{C(),E(),A(),P()},[]);const C=async()=>{try{await If.initialize();const e=If.getAllProperties();b(e),console.log("\ud83c\udfe2 Unified properties loaded:",e.length)}catch(e){console.error("Failed to initialize unified service:",e)}},E=async()=>{try{const e=await Mf.checkBackendStatus();e.supabase||e.local?g("connected"):g("disconnected")}catch(e){g("disconnected")}},A=async()=>{try{const e=await Mf.getProperties();e.success&&e.data&&u(e.data)}catch(e){console.error("Failed to load properties:",e)}},P=async()=>{try{const e=await Mf.getUploadHistory();e.success&&n(e.data)}catch(e){console.error("Failed to load upload history:",e)}},T=async(e,t)=>{try{console.log("\ud83c\udfe0 Processing CSV locally...");let r=!1;try{await Mf.getHealth(),r=!0}catch(n){console.log("Backend not available, using pure local processing"),r=!1}if(r){const n=await Mf.processCSVLocal(e,t);n.success?(w(n.data),o(null),window.dispatchEvent(new CustomEvent("dataUpdated",{detail:{propertyId:l,uploadResult:n.data,processingMode:"local"}})),console.log("\u2705 Local processing completed:",n.data)):o(n.message||"Local processing failed")}else await O(e,t)}catch(n){console.error("Local processing error:",n),o(n instanceof Error?n.message:"Error processing CSV file locally")}},O=async(e,t)=>{try{console.log("\ud83c\udfe0 Pure local processing (no backend)...");const n=(await e.text()).split("\n").filter(e=>e.trim());if(n.length<2)throw new Error("No data rows found in CSV");const r=n[0].split(",").map(e=>e.trim());console.log("\ud83d\udccb Detected columns:",r);const i=r.filter(e=>{const t=e.toLowerCase().trim();return/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)\s+\d{4}$/i.test(t)}),a=i.length>0;console.log("\ud83d\udcca Format detected:",a?"month-column":"traditional");const c=[],d=new Set;let u=0;for(let e=1;e<n.length;e++){const t=n[e].split(",").map(e=>e.trim());if(t.length!==r.length)continue;const s=t[0];if(s&&!/^(income|expense|totals?)$/i.test(s))if(d.add(s),a)for(const e of i){const n=t[r.indexOf(e)]||"",i=M(n);null!==i&&(c.push({account_name:s,period:e,amount:i,amount_raw:n}),u+=i||0)}else{const e=r.findIndex(e=>e.toLowerCase().includes("revenue")),n=e>=0?M(t[e]):0;c.push({account_name:s,period:"2024-01",amount:n,amount_raw:t[e]||""}),u+=n||0}}const h=c.map(e=>{const t=e.account_name.toLowerCase().trim();let n="other";return t.includes("rent")||t.includes("tenant")||t.includes("resident")||t.includes("rental")||t.includes("short term")||t.includes("application fee")||t.includes("pet fee")||t.includes("lock")||t.includes("key")||t.includes("insurance svcs income")||t.includes("credit reporting services income")?n="income":t.includes("utility")||t.includes("utilities")||t.includes("water")||t.includes("garbage")||t.includes("electric")||t.includes("gas")||t.includes("sewer")||t.includes("refuse disposal")||t.includes("pest control")?n="utilities":t.includes("maintenance")||t.includes("repair")||t.includes("cleaning")||t.includes("damage")||t.includes("carpet")||t.includes("r & m")||t.includes("hvac")||t.includes("plumbing")||t.includes("paint")||t.includes("appliances")||t.includes("fire & alarm")||t.includes("computers")||t.includes("server")||t.includes("phones")||t.includes("it")?n="maintenance":t.includes("insurance")||t.includes("liability")||t.includes("coverage")?n="insurance":(t.includes("property tax")||t.includes("real property tax"))&&(n="property_tax"),(0,s.A)((0,s.A)({},e),{},{category:n})}),p={totalRows:c.length,processedRows:c.length,aiAnalysis:{propertyName:t||"Unknown Property",totalRecords:c.length,totalAmount:u,uniqueAccounts:d.size,categories:{income:h.filter(e=>"income"===e.category).length,utilities:h.filter(e=>"utilities"===e.category).length,maintenance:h.filter(e=>"maintenance"===e.category).length,insurance:h.filter(e=>"insurance"===e.category).length,property_tax:h.filter(e=>"property_tax"===e.category).length,other:h.filter(e=>"other"===e.category).length},confidence:.85},data:c,format:a?"month-column":"traditional",status:"processed"};w(p),o(null),window.dispatchEvent(new CustomEvent("dataUpdated",{detail:{propertyId:l,uploadResult:p,processingMode:"local"}})),console.log("\u2705 Pure local processing completed:",p)}catch(n){throw console.error("Pure local processing error:",n),n}},M=e=>{if(!e||"\u2014"===e||"n/a"===e.toLowerCase())return null;let t=e.replace(/\$/g,"").replace(/,/g,""),n=!1;t.startsWith("(")&&t.endsWith(")")&&(n=!0,t=t.slice(1,-1));const r=Number(t);return Number.isNaN(r)?null:n?-r:r},I=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},R=e=>{switch(e){case"completed":return"bg-green-100 text-green-800";case"processing":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return(0,zs.jsxs)("div",{className:"space-y-6",children:[(0,zs.jsx)("div",{className:"flex justify-between items-center",children:(0,zs.jsxs)("div",{children:[(0,zs.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"CSV Data Upload"}),(0,zs.jsx)("p",{className:"text-gray-600 mt-1",children:"Upload CSV files to populate your dashboard with real property data"}),(0,zs.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,zs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,zs.jsx)("div",{className:"w-2 h-2 rounded-full ".concat("connected"===f?"bg-green-500":"disconnected"===f?"bg-red-500":"bg-yellow-500")}),(0,zs.jsx)("span",{className:"text-sm text-gray-500",children:"connected"===f?"Backend Connected (".concat("supabase"===m?"Supabase":"Local"," Mode)"):"disconnected"===f?"No Backend Available":"Checking Connection..."})]}),"connected"===f&&(0,zs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,zs.jsx)("span",{className:"text-sm text-gray-500",children:"Mode:"}),(0,zs.jsxs)("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[(0,zs.jsx)("button",{onClick:()=>y("supabase"),className:"px-3 py-1 text-xs rounded-md transition-colors ".concat("supabase"===m?"bg-blue-500 text-white":"text-gray-600 hover:text-gray-800"),children:"Supabase"}),(0,zs.jsx)("button",{onClick:()=>y("local"),className:"px-3 py-1 text-xs rounded-md transition-colors ".concat("local"===m?"bg-green-500 text-white":"text-gray-600 hover:text-gray-800"),children:"Local"})]})]})]})]})}),(0,zs.jsxs)("div",{className:"card",children:[(0,zs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Upload Property Data"}),(0,zs.jsxs)("div",{className:"space-y-4",children:[(0,zs.jsxs)("div",{children:[(0,zs.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,zs.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Select Property"}),(0,zs.jsx)("button",{onClick:()=>{const e=new CustomEvent("navigateToPage",{detail:{page:"property-management"}});window.dispatchEvent(e)},className:"text-sm text-primary-600 hover:text-primary-800 font-medium",children:"+ Add Property"})]}),(0,zs.jsxs)("select",{value:l,onChange:e=>c(e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,zs.jsx)("option",{value:"",children:"Choose a property..."}),x.length>0?x.map(e=>(0,zs.jsxs)("option",{value:e.id,children:[e.name," - ",e.address," (",e.source,")"]},e.id)):d.map(e=>(0,zs.jsx)("option",{value:e.id,children:e.name},e.id))]}),x.length>0&&(0,zs.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Showing ",x.length," unified properties"]})]}),(0,zs.jsxs)("div",{children:[(0,zs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload CSV File"}),(0,zs.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-primary-400 transition-colors duration-200",children:[(0,zs.jsx)("input",{ref:N,type:"file",accept:".csv",onChange:async e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(n){i(!0),o(null),p(null);try{if(!l)return o("Please select a property first"),void i(!1);const e=d.find(e=>e.id===l),t=null===e||void 0===e?void 0:e.name;if("local"===m)return console.log("\ud83c\udfe0 Using local processing mode..."),void await T(n,t);console.log("\ud83d\uddc4\ufe0f Using Supabase processing mode...");try{await Mf.getHealth()}catch(r){return o("Supabase backend not available. Please switch to Local mode or start the Supabase backend."),void i(!1)}const s=await Mf.validateCSV(n,t);if(p(s.data),!s.data.isValid)return o("CSV validation failed: ".concat(s.data.errors.length," errors found")),void i(!1);const a=await Mf.uploadCSV(n,l);a.success?(await P(),window.dispatchEvent(new CustomEvent("dataUpdated",{detail:{propertyId:l,uploadResult:a.data}})),o(null)):o(a.message||"Upload failed")}catch(s){console.error("Upload error:",s),s instanceof Error&&(s.message.includes("fetch")||s.message.includes("Network"))?(console.warn("Network error, falling back to local processing"),await T(n)):o(s instanceof Error?s.message:"Error processing CSV file")}finally{i(!1),N.current&&(N.current.value="")}}},className:"hidden",disabled:r}),(0,zs.jsxs)("button",{onClick:()=>{var e;return null===(e=N.current)||void 0===e?void 0:e.click()},disabled:r,className:"btn-primary flex items-center space-x-2 mx-auto disabled:opacity-50 disabled:cursor-not-allowed",children:[r?(0,zs.jsx)(mg,{className:"w-4 h-4 animate-spin"}):(0,zs.jsx)(Os,{className:"w-4 h-4"}),(0,zs.jsx)("span",{children:r?"Processing...":"Choose CSV File"})]}),(0,zs.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Supported format: CSV files only"}),!l&&(0,zs.jsx)("p",{className:"text-sm text-orange-600 mt-1",children:"\u26a0\ufe0f Select a property above for best results"})]})]}),a&&(0,zs.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-md p-3 flex items-center space-x-2",children:[(0,zs.jsx)(Ea,{className:"w-4 h-4 text-red-600"}),(0,zs.jsx)("span",{className:"text-sm text-red-600",children:a})]}),h&&(0,zs.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:[(0,zs.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"Validation Results"}),(0,zs.jsxs)("div",{className:"text-sm text-blue-800 space-y-1",children:[(0,zs.jsxs)("p",{children:[(0,zs.jsx)("strong",{children:"Total Rows:"})," ",h.totalRows]}),(0,zs.jsxs)("p",{children:[(0,zs.jsx)("strong",{children:"Valid Rows:"})," ",h.validRows]}),(0,zs.jsxs)("p",{children:[(0,zs.jsx)("strong",{children:"Invalid Rows:"})," ",h.invalidRows]}),h.errors&&h.errors.length>0&&(0,zs.jsxs)("div",{className:"mt-2",children:[(0,zs.jsx)("p",{children:(0,zs.jsx)("strong",{children:"Errors:"})}),(0,zs.jsxs)("ul",{className:"list-disc list-inside ml-4",children:[h.errors.slice(0,3).map((e,t)=>(0,zs.jsx)("li",{children:e.error},t)),h.errors.length>3&&(0,zs.jsxs)("li",{children:["... and ",h.errors.length-3," more errors"]})]})]})]})]}),v&&(0,zs.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-md p-4",children:[(0,zs.jsx)("h4",{className:"font-medium text-green-900 mb-2",children:"Local Processing Results"}),(0,zs.jsxs)("div",{className:"text-sm text-green-800 space-y-1",children:[(0,zs.jsxs)("p",{children:[(0,zs.jsx)("strong",{children:"Status:"})," ",v.status]}),(0,zs.jsxs)("p",{children:[(0,zs.jsx)("strong",{children:"Format:"})," ",v.format]}),(0,zs.jsxs)("p",{children:[(0,zs.jsx)("strong",{children:"Total Records:"})," ",v.totalRows]}),(0,zs.jsxs)("p",{children:[(0,zs.jsx)("strong",{children:"Processed Records:"})," ",v.processedRows]}),v.aiAnalysis&&(0,zs.jsxs)("div",{className:"mt-3",children:[(0,zs.jsx)("p",{children:(0,zs.jsx)("strong",{children:"AI Analysis:"})}),(0,zs.jsxs)("div",{className:"ml-4 space-y-1",children:[(0,zs.jsxs)("p",{children:["\u2022 Property: ",v.aiAnalysis.propertyName]}),(0,zs.jsxs)("p",{children:["\u2022 Confidence: ",(100*v.aiAnalysis.confidence).toFixed(1),"%"]}),v.aiAnalysis.dateRange&&(0,zs.jsxs)("p",{children:["\u2022 Date Range: ",v.aiAnalysis.dateRange.start," to ",v.aiAnalysis.dateRange.end]}),v.aiAnalysis.revenueAnalysis&&(0,zs.jsxs)("p",{children:["\u2022 Total Revenue: $",v.aiAnalysis.revenueAnalysis.total.toLocaleString()]}),v.aiAnalysis.expenseAnalysis&&(0,zs.jsxs)("p",{children:["\u2022 Total Expenses: $",v.aiAnalysis.expenseAnalysis.total.toLocaleString()]}),v.aiAnalysis.anomalies&&v.aiAnalysis.anomalies.length>0&&(0,zs.jsxs)("div",{children:[(0,zs.jsxs)("p",{children:["\u2022 Anomalies Found: ",v.aiAnalysis.anomalies.length]}),(0,zs.jsx)("ul",{className:"ml-4",children:v.aiAnalysis.anomalies.slice(0,2).map((e,t)=>(0,zs.jsxs)("li",{className:"text-orange-600",children:["\u26a0\ufe0f ",e.message]},t))})]})]})]})]}),(0,zs.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,zs.jsxs)("div",{className:"flex items-center space-x-2",children:["saved"===j&&(0,zs.jsxs)("div",{className:"flex items-center text-green-600",children:[(0,zs.jsx)(Vf,{className:"w-4 h-4 mr-1"}),(0,zs.jsx)("span",{className:"text-sm",children:"Data saved successfully!"})]}),"error"===j&&(0,zs.jsxs)("div",{className:"flex items-center text-red-600",children:[(0,zs.jsx)(Ea,{className:"w-4 h-4 mr-1"}),(0,zs.jsx)("span",{className:"text-sm",children:"Save failed"})]})]}),(0,zs.jsx)("button",{onClick:async()=>{if(v){k(!0),S("saving");try{console.log("\ud83d\udcbe Saving processed data to unified system...");const e=x.find(e=>e.id===l)||d.find(e=>e.id===l);if(!e)return o("Property not found"),void k(!1);const t=await If.addProperty({name:e.name,address:e.address||"",type:e.type||"Unknown",totalUnits:e.totalUnits||0});if(v.data&&Array.isArray(v.data))for(const r of v.data)await If.addPropertyData({propertyId:t.id,propertyName:t.name,date:r.date||(new Date).toISOString(),accountName:r.account_name||r.accountName||"Unknown",amount:r.amount||0,month:r.month||"Unknown",category:r.category||"other",source:m});const n=await Mf.saveLocalData(v,e.name,m);if(n.success){S("saved"),o(null),console.log("\u2705 Data saved successfully to unified system:",n);const e=If.getAllProperties();b(e),window.dispatchEvent(new CustomEvent("dataUpdated",{detail:{propertyId:l,uploadResult:n,processingMode:m,saved:!0,unified:!0,source:"local"}})),window.dispatchEvent(new CustomEvent("chartDataUpdated",{detail:{propertyId:l,data:v,source:"local"}})),setTimeout(()=>{window.location.reload()},1e3)}else S("error"),o(n.message||"Failed to save data")}catch(e){console.error("Save data error:",e),S("error"),o(e instanceof Error?e.message:"Error saving data")}finally{k(!1)}}else o("No data to save")},disabled:_||"saved"===j,className:"px-4 py-2 rounded-md text-sm font-medium transition-colors ".concat(_||"saved"===j?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"),children:_?(0,zs.jsxs)(zs.Fragment,{children:[(0,zs.jsx)(mg,{className:"w-4 h-4 mr-2 animate-spin inline"}),"Saving..."]}):"saved"===j?(0,zs.jsxs)(zs.Fragment,{children:[(0,zs.jsx)(Vf,{className:"w-4 h-4 mr-2 inline"}),"Saved"]}):(0,zs.jsxs)(zs.Fragment,{children:[(0,zs.jsx)(Ps,{className:"w-4 h-4 mr-2 inline"}),"Save Data"]})})]})]}),(0,zs.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:[(0,zs.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"Expected CSV Format:"}),(0,zs.jsxs)("div",{className:"text-sm text-blue-800 space-y-1",children:[(0,zs.jsxs)("p",{children:[(0,zs.jsx)("strong",{children:"Required Headers:"})," Date, Revenue, Occupancy Rate"]}),(0,zs.jsxs)("p",{children:[(0,zs.jsx)("strong",{children:"Optional Headers:"})," Property Name (if not selecting property above), Address, Total Units, Occupied Units, Expenses, Net Income"]}),(0,zs.jsxs)("p",{children:[(0,zs.jsx)("strong",{children:"Example:"})," 2024-01-15, 45600, 95.8, 24, 23, 12000, 33600"]}),(0,zs.jsx)("p",{className:"text-green-700 font-medium",children:"\u2705 Property name is optional when you select a property above!"}),(0,zs.jsx)("div",{className:"mt-3",children:(0,zs.jsxs)("a",{href:"/correct-chico-data.csv",download:"sample-property-data.csv",className:"inline-flex items-center space-x-2 text-blue-600 hover:text-blue-800 font-medium",children:[(0,zs.jsx)(Ps,{className:"w-4 h-4"}),(0,zs.jsx)("span",{children:"Download Sample CSV Template"})]})})]})]})]})]}),e.length>0&&(0,zs.jsxs)("div",{className:"card",children:[(0,zs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Upload History"}),(0,zs.jsx)("div",{className:"space-y-3",children:e.map(e=>(0,zs.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,zs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,zs.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:(0,zs.jsx)(Ps,{className:"w-5 h-5 text-green-600"})}),(0,zs.jsxs)("div",{children:[(0,zs.jsx)("h4",{className:"font-medium text-gray-900",children:e.file_name}),(0,zs.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[(0,zs.jsx)("span",{children:e.property_name}),(0,zs.jsx)("span",{children:I(e.file_size)}),(0,zs.jsx)("span",{children:new Date(e.uploaded_at).toLocaleDateString()}),(0,zs.jsxs)("span",{children:[e.records_processed," processed"]}),e.records_skipped>0&&(0,zs.jsxs)("span",{className:"text-orange-600",children:[e.records_skipped," skipped"]})]}),e.error_message&&(0,zs.jsx)("p",{className:"text-sm text-red-600 mt-1",children:e.error_message})]})]}),(0,zs.jsx)("div",{className:"flex items-center space-x-2",children:(0,zs.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(R(e.upload_status)),children:e.upload_status})})]},e.id))})]})]})};var xg=n(5766),bg=n.n(xg);const vg=Ns("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),wg=Ns("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),_g="http://localhost:5001",kg={income_item:{label:"Income Item",description:"Individual income line items (rent, fees, etc.)",color:"bg-green-100 text-green-800",icon:"\ud83d\udcb0",category:"income"},income_total:{label:"Income Total",description:"Total income calculations and summaries",color:"bg-green-100 text-green-800",icon:"\ud83d\udcc8",category:"income"},expense_item:{label:"Expense Item",description:"Individual expense line items (maintenance, utilities, etc.)",color:"bg-red-100 text-red-800",icon:"\ud83d\udcb8",category:"expense"},expense_total:{label:"Expense Total",description:"Total expense calculations and summaries",color:"bg-red-100 text-red-800",icon:"\ud83d\udcc9",category:"expense"},cash_amount:{label:"Cash Amount",description:"Cash and cash equivalents",color:"bg-purple-100 text-purple-800",icon:"\ud83d\udcb3",category:"cash"},rental_income:{label:"Rental Income",description:"Primary rental revenue from tenants",color:"bg-green-100 text-green-800",icon:"\ud83c\udfe0",category:"income"},other_income:{label:"Other Income",description:"Additional income sources (fees, late charges, etc.)",color:"bg-green-100 text-green-800",icon:"\ud83d\udcb0",category:"income"},total_income:{label:"Total Income",description:"Sum of all income sources",color:"bg-green-100 text-green-800",icon:"\ud83d\udcc8",category:"income"},total_operating_income:{label:"Total Operating Income",description:"Primary income metric for dashboard",color:"bg-green-100 text-green-800",icon:"\ud83d\udcb0",category:"income"},operating_expenses:{label:"Operating Expenses",description:"Day-to-day property operations",color:"bg-red-100 text-red-800",icon:"\u2699\ufe0f",category:"expense"},maintenance_expenses:{label:"Maintenance & Repairs",description:"Property maintenance and repair costs",color:"bg-red-100 text-red-800",icon:"\ud83d\udd27",category:"expense"},management_expenses:{label:"Management Expenses",description:"Property management and administrative costs",color:"bg-red-100 text-red-800",icon:"\ud83d\udc65",category:"expense"},total_expenses:{label:"Total Expenses",description:"Sum of all expense categories",color:"bg-red-100 text-red-800",icon:"\ud83d\udcc9",category:"expense"},total_operating_expense:{label:"Total Operating Expense",description:"Primary expense metric for dashboard",color:"bg-red-100 text-red-800",icon:"\ud83d\udcb8",category:"expense"},net_operating_income:{label:"Net Operating Income",description:"Income minus operating expenses",color:"bg-blue-100 text-blue-800",icon:"\ud83d\udcca",category:"net_income"},net_income:{label:"Net Income",description:"Final profit after all expenses",color:"bg-blue-100 text-blue-800",icon:"\ud83d\udc8e",category:"net_income"},cash_change:{label:"Cash Change",description:"Changes in cash position",color:"bg-purple-100 text-purple-800",icon:"\ud83d\udcb1",category:"cash"},exclude:{label:"Exclude from Dashboard",description:"Do not include in dashboard calculations",color:"bg-gray-100 text-gray-600",icon:"\ud83d\udeab",category:"exclude"}};function jg(){const[e,n]=(0,t.useState)(null),[r,i]=(0,t.useState)("general"),[a,o]=(0,t.useState)([]),[l,c]=(0,t.useState)([]),[d,u]=(0,t.useState)({}),[h,p]=(0,t.useState)([]),[f,g]=(0,t.useState)(!1),[m,y]=(0,t.useState)(null),[x,b]=(0,t.useState)([]),[v,w]=(0,t.useState)({}),[_,k]=(0,t.useState)({}),[j,S]=(0,t.useState)(!1),[N,C]=(0,t.useState)(!1),[E,A]=(0,t.useState)(new Set),[P,T]=(0,t.useState)(!1),[O,M]=(0,t.useState)([]),[I,R]=(0,t.useState)(null),[L,D]=(0,t.useState)(!1),[z,F]=(0,t.useState)(!1),[U,B]=(0,t.useState)({}),[V,W]=(0,t.useState)({}),[H,q]=(0,t.useState)({}),[K,$]=(0,t.useState)({}),[G,J]=(0,t.useState)({}),[Y,Q]=(0,t.useState)({}),[X,Z]=(0,t.useState)(!1),[ee,te]=(0,t.useState)({}),[ne,re]=(0,t.useState)(!0),[se,ie]=(0,t.useState)({}),[ae,oe]=(0,t.useState)(!1),[le,ce]=(0,t.useState)(!1),[de,ue]=(0,t.useState)(""),[he,pe]=(0,t.useState)(""),[fe,ge]=(0,t.useState)("income"),[me,ye]=(0,t.useState)({}),[xe,be]=(0,t.useState)("");(0,t.useEffect)(()=>{(async()=>{if(r&&"general"!==r)try{console.log("\ud83e\udde0 Loading AI learning data for file type:",r);const e=await(0,mf.jo)(r),t=Array.isArray(e)?e:[];b(t),console.log("\ud83e\udde0 AI learning data loaded:",t.length,"entries")}catch(m){console.warn("Failed to load AI learning data in useEffect:",m),b([])}else b([])})()},[r]);const ve=async()=>{try{console.log("\ud83d\udd04 Loading CSVs from backend and localStorage...");const e=await(0,mf.getCSVData)();console.log("\ud83d\udcca Supabase CSVs:",e.length,"files");const t=JSON.parse(localStorage.getItem("savedCSVs")||"[]");console.log("\ud83d\udcbe LocalStorage CSVs:",t.length,"files");const n=e.map(e=>(0,s.A)((0,s.A)({},e),{},{fileName:e.file_name,fileType:e.file_type,uploadedAt:e.uploaded_at,totalRecords:e.total_records,accountCategories:e.account_categories,bucketAssignments:e.bucket_assignments,includedItems:e.included_items,isActive:!1!==e.is_active,previewData:e.preview_data}));t.forEach(t=>{if(!e.some(e=>e.id===t.id||e.file_name===t.fileName&&e.uploaded_at===t.uploadedAt)&&t.isActive){const e={id:t.id,file_name:t.fileName,file_type:t.fileType,uploaded_at:t.uploadedAt,total_records:t.totalRecords,account_categories:t.accountCategories,bucket_assignments:t.bucketAssignments,included_items:t.includedItems,tags:t.tags,is_active:t.isActive,preview_data:t.previewData,fileName:t.fileName,fileType:t.fileType,uploadedAt:t.uploadedAt,totalRecords:t.totalRecords,accountCategories:t.accountCategories,bucketAssignments:t.bucketAssignments,includedItems:t.includedItems,isActive:t.isActive,previewData:t.previewData};n.push(e)}});const r=n.filter(e=>!1!==e.is_active&&!1!==e.isActive);M(r),console.log("\u2705 Total active CSVs loaded:",r.length,"files"),console.log("\ud83d\udccb CSV details:",r.map(e=>{var t,n;return{id:e.id,fileName:e.file_name||e.fileName,fileType:e.file_type||e.fileType,totalRecords:e.total_records||e.totalRecords,isActive:!1!==e.is_active&&!1!==e.isActive,hasPreviewData:!(!e.preview_data&&!e.previewData),previewDataLength:(null===(t=e.preview_data)||void 0===t?void 0:t.length)||(null===(n=e.previewData)||void 0===n?void 0:n.length)||0,bucketAssignmentsCount:Object.keys(e.bucket_assignments||e.bucketAssignments||{}).length}}));const i=[...e,...t].filter(e=>!1===e.is_active||!1===e.isActive);i.length>0&&console.log("\u26a0\ufe0f Found inactive CSVs:",i.length,i.map(e=>({id:e.id,fileName:e.file_name||e.fileName,isActive:!1!==e.is_active&&!1!==e.isActive})))}catch(m){console.error("\u274c Error loading CSVs:",m);try{const e=JSON.parse(localStorage.getItem("savedCSVs")||"[]").filter(e=>e.isActive);M(e),console.log("\ud83d\udd04 Fallback to localStorage:",e.length,"files")}catch(e){console.error("\u274c Error loading from localStorage:",e),M([])}}};(0,t.useEffect)(()=>{p([]),C(!1),R(null),q({}),k({}),w({}),n(null),y(null),S(!1),console.log("\ud83e\uddf9 Cleared preview data on component mount to prevent double-counting"),ve()},[]),(0,t.useEffect)(()=>{const e=e=>{console.log("\ud83d\udce1 Received dataUpdated event:",e.detail),M(e=>[...e])};return window.addEventListener("dataUpdated",e),()=>{window.removeEventListener("dataUpdated",e)}},[]),(0,t.useEffect)(()=>{const e={income_item:["Rent","Rental","Tenant","Lease","Monthly Rent","Rental Income","Fee","Charge","Late Fee","Application Fee","Pet Fee","Parking Fee","Income","Revenue"],income_total:["Total Income","Total Operating Income","Gross Income","Total Revenue","Income Total"],expense_item:["Maintenance","Repair","Fix","Service","Upkeep","Renovation","Utilities","Electric","Water","Gas","Trash","Insurance","Tax","Management","Admin","Administrative","Office","Management Fee","Expense","Cost"],expense_total:["Total Expense","Total Operating Expense","Total Costs","Expense Total"],cash_amount:["Cash","Cash Equivalent","Bank","Checking","Savings","Money Market"],total_operating_income:["Total Operating Income","Total Income","Operating Income","Gross Income"],total_operating_expense:["Total Operating Expense","Total Expense","Operating Expense","Total Costs"],net_operating_income:["NOI","Net Operating Income","Net Income","Operating Profit"],rental_income:["Rent","Rental","Tenant","Lease","Monthly Rent","Rental Income"],other_income:["Fee","Charge","Late Fee","Application Fee","Pet Fee","Parking Fee"],operating_expenses:["Operating","General","Administrative","Office","Utilities"],maintenance_expenses:["Maintenance","Repair","Fix","Service","Upkeep","Renovation"],management_expenses:["Management","Admin","Administrative","Office","Management Fee"],exclude:["Total","Sum","Grand Total","Subtotal","Balance","Equity"]};let t=null;if(r){const e=localStorage.getItem("bucketTerms_".concat(r));if(e)try{t=JSON.parse(e)[r],console.log("\ud83d\udcc2 Loaded bucket terms for CSV type: ".concat(r))}catch(m){console.error("Error loading bucket terms for CSV type ".concat(r,":"),m)}}if(t||(t=localStorage.getItem("bucketTerms")),t)try{const n="string"===typeof t?JSON.parse(t):t;te((0,s.A)((0,s.A)({},e),n))}catch(m){console.error("Error loading saved bucket terms:",m),te(e)}else te(e);const n=localStorage.getItem("customBuckets");if(n)try{const e=JSON.parse(n);ie(e)}catch(m){ie({})}const i=localStorage.getItem("bucketCategories");if(i)try{const e=JSON.parse(i);ye(e)}catch(m){ye({})}},[]);const we=e=>!!e.time_series&&Object.values(e.time_series).some(e=>{const t="number"===typeof e?e:parseFloat(e);return!isNaN(t)&&0!==t}),_e=()=>{A(new Set),T(!1)},ke=(e,t)=>{const n={},r={},s={};return e.forEach(e=>{e.account_name&&(n[e.account_name]=we(e),we(e)||console.log("\ud83d\udeab Auto-deselected ".concat(e.account_name," (no non-zero values) - but keeping visible")))}),e.forEach(e=>{if(e.account_name&&n[e.account_name]){const t=(e=>{if(!e.time_series)return 0;const t=Object.keys(e.time_series).filter(e=>e.toLowerCase().includes("total")||e.toLowerCase().includes("sum")||e.toLowerCase().includes("grand total"));if(t.length>0){const n=e.time_series[t[0]],r="number"===typeof n?n:parseFloat(n);return isNaN(r)?0:r}return Object.values(e.time_series).reduce((e,t)=>{const n="number"===typeof t?t:parseFloat(t);return isNaN(n)?e:e+n},0)})(e);if(0!==t){const n=t.toString();s[n]||(s[n]=[]),s[n].push(e.account_name)}}}),Object.entries(s).forEach(e=>{let[t,r]=e;if(r.length>1){console.log("\ud83d\udd04 Found ".concat(r.length," items with same total value ").concat(t,":"),r);const e=r[0];for(let s=1;s<r.length;s++){const i=r[s];n[i]=!1,console.log("\ud83d\udeab Deselected ".concat(i," (duplicate total value ").concat(t,", keeping ").concat(e,")"))}console.log("\u2705 Kept ".concat(e," for total value ").concat(t))}}),e.forEach(e=>{if(e.account_name&&n[e.account_name]){const s=t[e.account_name]||je(e.account_name,"unknown");s.toLowerCase().includes("total")&&(r[s]?(n[e.account_name]=!1,console.log("\ud83d\udeab Deselected ".concat(e.account_name," to prevent double-counting in total bucket: ").concat(s," (").concat(r[s]," already selected)"))):(r[s]=e.account_name,console.log("\u2705 Selected ".concat(e.account_name," for total bucket: ").concat(s))))}}),n},je=(e,t)=>{const n=e.toLowerCase();if(x&&Array.isArray(x)&&x.length>0){const t=x.find(e=>e.account_name&&e.account_name.toLowerCase()===n);if(t&&t.user_category)return console.log("\ud83e\udde0 Using AI learning for ".concat(e,": ").concat(t.user_category," (learned from previous uploads)")),t.user_category}for(const[r,s]of Object.entries(ee))for(const e of s)if(n.toLowerCase().includes(e.toLowerCase()))return r;if("cash_flow"===r){if("income"===t)return"income_item";if("expense"===t)return"expense_item";if("cash"===t)return"cash_amount"}return"income"===t?"other_income":"expense"===t?"operating_expenses":"exclude"},Se=e=>{w(t=>{const n=(0,s.A)({},t);return Object.entries(H).forEach(t=>{let[r,s]=t;s===e&&(n[r]=!0)}),n})},Ne=async()=>{if(h.length&&e){g(!0),y(null);try{const t=JSON.parse(localStorage.getItem("savedCSVs")||"[]"),i=t.find(t=>t.fileName===e.name&&t.isActive);if(i){if(!window.confirm('A CSV with the same filename "'.concat(e.name,'" already exists.\n\n')+"Existing CSV: ".concat(i.totalRecords," records, uploaded ").concat(new Date(i.uploadedAt).toLocaleDateString(),"\n")+"New CSV: ".concat(h.length," records\n\n")+'Do you want to replace the existing CSV with this new one?\n\nClick "OK" to replace, or "Cancel" to keep both (rename the file to avoid conflicts).'))return void y("Upload cancelled. Please rename the file to avoid conflicts.");const n=t.filter(e=>e.id!==i.id);localStorage.setItem("savedCSVs",JSON.stringify(n)),window.dispatchEvent(new CustomEvent("dataUpdated",{detail:{action:"csv_replaced",oldCsvId:i.id,fileName:e.name}}))}const a=h,o={};let l;Object.entries(H).forEach(e=>{let[t,n]=e;o[t]=n}),l=I?(0,s.A)((0,s.A)({},I),{},{totalRecords:h.length,accountCategories:o,bucketAssignments:De(),includedItems:v,tags:ze(),previewData:a}):{id:Date.now().toString(),fileName:e.name,fileType:r,uploadedAt:(new Date).toISOString(),totalRecords:h.length,accountCategories:o,bucketAssignments:De(),includedItems:v,tags:ze(),isActive:!0,previewData:a},console.log("\ud83d\udcbe Saving CSV record:",{fileName:l.fileName,accountCategoriesCount:Object.keys(l.accountCategories).length,bucketAssignmentsCount:Object.keys(l.bucketAssignments).length,previewDataCount:l.previewData.length,sampleAccountNames:Object.keys(l.accountCategories).slice(0,3),samplePreviewAccountNames:l.previewData.slice(0,3).map(e=>e.account_name)});try{const e=jf.j.getCurrentUser();if(e){await(0,mf.Ck)({id:l.id,file_name:l.fileName,file_type:l.fileType,uploaded_at:l.uploadedAt,total_records:l.totalRecords,account_categories:l.accountCategories,bucket_assignments:l.bucketAssignments,included_items:l.includedItems,tags:l.tags,is_active:l.isActive,preview_data:l.previewData},e.id)&&console.log("\u2705 CSV data saved to Supabase successfully")}}catch(m){console.warn("\u26a0\ufe0f Failed to save to Supabase, using localStorage only:",m)}const c=JSON.parse(localStorage.getItem("savedCSVs")||"[]");if(I){const e=c.findIndex(e=>e.id===I.id);-1!==e&&(c[e]=l)}else c.push(l);localStorage.setItem("savedCSVs",JSON.stringify(c)),S(!0),console.log("Data saved to database:",h.length,"records"),await(async e=>{try{console.log("\ud83e\udde0 Saving bucket assignments to AI learning for file type:",e.fileType);const t=e.bucketAssignments||{},n=e.accountCategories||{};for(const[r,s]of Object.entries(t))if(s&&"exclude"!==s&&r&&"string"===typeof s){const t=n[r]||"unknown";await(0,mf.ai)(e.fileType,r,s),console.log("\ud83e\udde0 Learned: ".concat(r," \u2192 ").concat(s," (").concat(t,")"))}console.log("\u2705 Bucket assignments saved to AI learning")}catch(m){console.error("\u274c Error saving bucket assignments to AI:",m)}})(l),I?(p([]),C(!1),R(null),await ve(),setTimeout(()=>{alert('CSV "'.concat(l.fileName,'" updated successfully!'))},500)):(p([]),C(!1),q({}),k({}),w({}),n(null),await ve(),setTimeout(()=>{alert('CSV saved successfully! Go to "CSV Management" tab to review and adjust categorizations.')},500))}catch(m){console.error("Save error:",m),y("Save failed: ".concat(m.message))}finally{g(!1)}}},Ce=()=>{const e={};return h&&0!==h.length?(console.log("\ud83d\udd0d Calculating current session totals for",h.length,"items"),h.forEach(t=>{const n=t.account_name,r=H[n],s=_[n]||je(n,r),i=!0===v[n];if(!i||!t.time_series)return;let a=0;console.log("\ud83d\udd0d Debug ".concat(n," time_series keys:"),Object.keys(t.time_series)),console.log("\ud83d\udd0d Debug ".concat(n," time_series values:"),t.time_series);const o=Object.keys(t.time_series).find(e=>"total"===e.toLowerCase()||"totals"===e.toLowerCase()||"grand total"===e.toLowerCase()||"sum"===e.toLowerCase());o&&void 0!==t.time_series[o]&&null!==t.time_series[o]?(a="number"===typeof t.time_series[o]?t.time_series[o]:0,console.log("\ud83d\udcca ".concat(n,": Using ").concat(o," column = ").concat(a))):(a=Object.entries(t.time_series).reduce((e,t)=>{let[n,r]=t;return n.toLowerCase().includes("total")||n.toLowerCase().includes("sum")||n.toLowerCase().includes("grand")||"number"!==typeof r?e:e+r},0),console.log("\ud83d\udcca ".concat(n,": Summed monthly values = ").concat(a))),console.log("\ud83d\udcca ".concat(n,": bucket=").concat(s,", total=").concat(a,", included=").concat(i)),s&&"exclude"!==s&&(e[s]=(e[s]||0)+a)}),console.log("\ud83d\udcb0 Current session bucket totals:",e),e):e},Ee=()=>{const e={};console.log("\ud83d\udd0d Calculating combined bucket totals for",O.length,"saved CSVs");const t=I&&h&&h.length>0;if(O.forEach((n,r)=>{var s,i;if(!n.isActive)return void console.log("\u23ed\ufe0f Skipping inactive CSV ".concat(r+1,":"),n.fileName||n.file_name);if(t&&n.id===I.id)return void console.log("\u23ed\ufe0f Skipping CSV being edited to avoid double-counting:",n.fileName||n.file_name);console.log("\ud83d\udcca Processing CSV ".concat(r+1,":"),n.fileName||n.file_name,"with",(null===(s=n.previewData)||void 0===s?void 0:s.length)||(null===(i=n.preview_data)||void 0===i?void 0:i.length)||0,"records");const a=n.previewData||n.preview_data||[],o=(n.accountCategories||n.account_categories,n.bucketAssignments||n.bucket_assignments||{}),l=n.includedItems||n.included_items||{};a.forEach(t=>{const n=t.account_name,r=o[n];if(!(!0===l[n])||!t.time_series)return;let s=0;console.log("\ud83d\udd0d Debug ".concat(n," time_series keys:"),Object.keys(t.time_series)),console.log("\ud83d\udd0d Debug ".concat(n," time_series values:"),t.time_series);const i=Object.keys(t.time_series).find(e=>"total"===e.toLowerCase()||"totals"===e.toLowerCase()||"grand total"===e.toLowerCase()||"sum"===e.toLowerCase());i&&void 0!==t.time_series[i]&&null!==t.time_series[i]?(s="number"===typeof t.time_series[i]?t.time_series[i]:0,console.log("\ud83d\udcca ".concat(n,": Using ").concat(i," column = ").concat(s))):(s=Object.entries(t.time_series).reduce((e,t)=>{let[n,r]=t;return n.toLowerCase().includes("total")||n.toLowerCase().includes("sum")||n.toLowerCase().includes("grand")||"number"!==typeof r?e:e+r},0),console.log("\ud83d\udcca ".concat(n,": Summed monthly values = ").concat(s))),r&&"exclude"!==r&&(e[r]=(e[r]||0)+s,console.log("\ud83d\udcb0 Added ".concat(s," to bucket ").concat(r," from ").concat(n)))})}),h&&h.length>0){console.log("\ud83d\udcca Adding current session totals for",h.length,"preview items");const t=Ce();Object.entries(t).forEach(t=>{let[n,r]=t;e[n]=(e[n]||0)+r,console.log("\ud83d\udcb0 Added ".concat(r," to bucket ").concat(n," from current session"))})}return console.log("\ud83d\udcc8 Final bucket totals:",e),e},Ae=t.useMemo(()=>(console.log("\ud83d\udd04 Recalculating allBucketTotals due to state change"),Ee()),[O,h,I,_,v,Ee]),Pe=t.useMemo(()=>(console.log("\ud83d\udd04 Recalculating currentSessionTotals"),Ce()),[h,_,v,Ce]),Te=()=>{if(localStorage.setItem("bucketTerms",JSON.stringify(ee)),localStorage.setItem("customBuckets",JSON.stringify(se)),r){const e=JSON.parse(localStorage.getItem("bucketTerms_".concat(r))||"{}");e[r]=ee,localStorage.setItem("bucketTerms_".concat(r),JSON.stringify(e)),console.log("\ud83d\udcbe Bucket terms saved for CSV type: ".concat(r))}console.log("\ud83d\udcbe Bucket terms and custom buckets saved:",{bucketTerms:ee,customBuckets:se})},Oe=()=>{const e=(0,s.A)((0,s.A)({},kg),se);return Object.keys(e).forEach(t=>{me[t]&&(e[t]=(0,s.A)((0,s.A)({},e[t]),{},{category:me[t],color:Me(me[t])}))}),e},Me=e=>{switch(e){case"income":return"bg-green-100 text-green-800";case"expense":return"bg-red-100 text-red-800";case"cash":return"bg-purple-100 text-purple-800";case"net_income":return"bg-blue-100 text-blue-800";case"exclude":return"bg-gray-100 text-gray-600";default:return"bg-gray-100 text-gray-800"}},Ie=e=>{switch(e){case"income":return"\ud83d\udcb0";case"expense":return"\ud83d\udcb8";case"cash":return"\ud83d\udcb3";case"net_income":return"\ud83d\udcca";case"exclude":return"\ud83d\udeab";default:return"\ud83d\udccb"}},Re=e=>{switch(e){case"income":return"bg-green-100 text-green-800 border-green-200";case"expense":return"bg-red-100 text-red-800 border-red-200";case"cash":return"bg-purple-100 text-purple-800 border-purple-200";case"net_income":return"bg-blue-100 text-blue-800 border-blue-200";case"exclude":return"bg-gray-100 text-gray-600 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},Le=e=>{let{value:n,onChange:r,options:s,suggestions:i,className:a,isFromAILearning:o,disabled:l}=e;const[c,d]=(0,t.useState)(!1),[u,h]=(0,t.useState)(""),p=(0,t.useRef)(null);(0,t.useEffect)(()=>{const e=e=>{p.current&&!p.current.contains(e.target)&&(d(!1),h(""))};return c&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[c]);const f=s.filter(e=>{let{bucket:t}=e;return t.label.toLowerCase().includes(u.toLowerCase())}),g=s.find(e=>e.key===n);return(0,zs.jsxs)("div",{className:"relative ".concat(a),ref:p,children:[(0,zs.jsxs)("button",{type:"button",onClick:()=>!l&&d(!c),disabled:l,className:"w-full text-left px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-xs focus:outline-none focus:ring-1 focus:ring-blue-500 dark:focus:ring-blue-400 flex items-center justify-between whitespace-nowrap bg-white dark:bg-gray-700 text-gray-900 dark:text-white ".concat(g?Re(g.bucket.category):"bg-white dark:bg-gray-700"," ").concat(o?"ring-2 ring-blue-300 dark:ring-blue-600":""," ").concat(l?"opacity-50 cursor-not-allowed bg-gray-100 dark:bg-gray-800":""),children:[(0,zs.jsxs)("span",{className:"truncate flex items-center",children:[g?"".concat(g.bucket.icon," ").concat(g.bucket.label):"Select bucket...",o&&(0,zs.jsx)("span",{className:"ml-1 text-blue-500 dark:text-blue-400",title:"Auto-categorized from previous uploads",children:"\ud83e\udde0"})]}),(0,zs.jsx)("span",{className:"text-gray-400 dark:text-gray-500 flex-shrink-0 ml-2",children:"\u2304"})]}),c&&(0,zs.jsxs)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:[(0,zs.jsx)("div",{className:"p-2",children:(0,zs.jsx)("input",{type:"text",placeholder:"Search buckets...",value:u,onChange:e=>h(e.target.value),className:"w-full px-2 py-1 text-xs border border-gray-300 dark:border-gray-600 rounded focus:outline-none focus:ring-1 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",onClick:e=>e.stopPropagation()})}),f.map(e=>{let{key:t,bucket:n}=e;const s=i.includes(t),a=n.category||"other";return(0,zs.jsxs)("button",{type:"button",onClick:()=>{r(t),d(!1),h("")},className:"w-full text-left px-3 py-2 text-xs hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center justify-between whitespace-nowrap ".concat(Re(a)),children:[(0,zs.jsxs)("span",{className:"truncate",children:[n.icon," ",n.label]}),s&&(0,zs.jsx)("span",{className:"text-yellow-500 dark:text-yellow-400 flex-shrink-0 ml-2",children:"\u2728"})]},t)})]})]})},De=()=>{const e={};console.log("\ud83d\udd27 Generating bucket assignments for accounts:",Object.keys(H)),console.log("\ud83d\udd27 Current bucket assignments:",_);for(const[t,n]of Object.entries(H)){if(_[t]){e[t]=_[t],console.log("\ud83e\udea3 ".concat(t," \u2192 ").concat(_[t]," (existing assignment)"));continue}const r=je(t,n);e[t]=r,console.log("\ud83e\udd16 ".concat(t," \u2192 ").concat(r," (auto-generated for new account)"))}return console.log("\ud83d\udd27 Final bucket assignments:",e),e},ze=()=>{const e={};for(const t of Object.keys(H)){const n=t.toLowerCase(),r=[];/rent|rental/.test(n)&&r.push("rental"),/short term/.test(n)&&r.push("short-term"),/utility|water|garbage/.test(n)&&r.push("utility"),/management/.test(n)&&r.push("management"),/fee/.test(n)&&r.push("fee"),/income/.test(n)&&r.push("income"),/expense/.test(n)&&r.push("expense"),r.length>0&&(e[t]=r)}return e};return(0,zs.jsx)("div",{className:"space-y-6",children:(0,zs.jsxs)("div",{className:"space-y-4 p-4 border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800",children:[(0,zs.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"CSV Import with AI Parser"}),m&&(0,zs.jsx)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-md p-4",children:(0,zs.jsx)("div",{className:"flex",children:(0,zs.jsxs)("div",{className:"ml-3",children:[(0,zs.jsx)("h3",{className:"text-sm font-medium text-red-800 dark:text-red-300",children:"Error"}),(0,zs.jsx)("div",{className:"mt-2 text-sm text-red-700 dark:text-red-400",children:(0,zs.jsx)("p",{children:m})})]})})}),(0,zs.jsx)("div",{children:(0,zs.jsxs)("div",{className:"space-y-4",children:[(0,zs.jsxs)("div",{children:[(0,zs.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"File Type"}),(0,zs.jsxs)("select",{value:r,onChange:e=>i(e.target.value),className:"block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,zs.jsx)("option",{value:"general",children:"General CSV"}),(0,zs.jsx)("option",{value:"cash_flow",children:"Cash Flow Statement"}),(0,zs.jsx)("option",{value:"balance_sheet",children:"Balance Sheet"}),(0,zs.jsx)("option",{value:"rent_roll",children:"Rent Roll"}),(0,zs.jsx)("option",{value:"income_statement",children:"Income Statement"}),(0,zs.jsx)("option",{value:"pdf",children:"PDF Document"})]}),(0,zs.jsx)("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Select the type of financial document to get better AI mapping suggestions"})]}),(0,zs.jsxs)("div",{children:[(0,zs.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"CSV or PDF File"}),(0,zs.jsx)("input",{type:"file",accept:".csv,.pdf",onChange:e=>{var t;const s=null===(t=e.target.files)||void 0===t?void 0:t[0];s&&(async e=>{if(n(e),y(null),C(!1),S(!1),"application/pdf"===e.type||e.name.toLowerCase().endsWith(".pdf"))return i("pdf"),void y("PDF processing is coming soon! Please upload a CSV file for now.");try{console.log("\ud83e\udde0 Loading AI learning data for file type:",r);const e=await(0,mf.jo)(r),t=Array.isArray(e)?e:[];b(t),console.log("\ud83e\udde0 Loaded AI learning data:",t.length,"entries"),t.length>0&&(console.log("\ud83e\udde0 Available AI learning patterns:"),t.forEach(e=>{console.log("  \u2022 ".concat(e.account_name," \u2192 ").concat(e.user_category))}))}catch(m){console.warn("Failed to load AI learning data:",m),b([])}bg().parse(e,{header:!0,preview:100,complete:t=>{const n=t.meta.fields||[],s=t.data.slice(0,5);o(n),c(s.map(e=>n.map(t=>e[t])));const i={};for(const e of n){const t=e.toLowerCase();/account|name|description|item/.test(t)?i[e]={field:"",score:1}:/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec|q1|q2|q3|q4|total/.test(t)?i[e]={field:"time_series",score:.9}:i[e]={field:"",score:0}}u(i),bg().parse(e,{header:!0,complete:async e=>{const t=e.data.filter(e=>e&&Object.keys(e).length>0);console.log("Processing",t.length,"total rows from CSV"),q({});try{g(!0);const e=t.map((e,t)=>{const n={};Object.entries(i).forEach(t=>{let[r,s]=t;void 0!==e[r]&&(n[s.field]=e[r])});const r=Object.keys(e).find(e=>e.toLowerCase().includes("account")||e.toLowerCase().includes("name")||e.toLowerCase().includes("description")||e.toLowerCase().includes("item"))||Object.keys(e)[0],s=e[r],a={};return Object.keys(e).forEach(t=>{if(t!==r){let n=String(e[t]||"").trim();n=n.replace(/,/g,""),n.startsWith("(")&&n.endsWith(")")&&(n="-"+n.slice(1,-1));const r=parseFloat(n);isNaN(r)||(a[t]=r)}}),n.account_name=s,n.time_series=a,n.ai_category="unknown",n});p(e),C(!0);const s={};e.forEach(e=>{e.account_name&&(s[e.account_name]=we(e),we(e)||console.log("\ud83d\udeab Auto-deselected ".concat(e.account_name," (no non-zero values) - but keeping visible")))}),w(s),g(!1);try{const t=await fetch("".concat(_g,"/api/categorize"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({csv_data:e,file_type:r})});if(t.ok){const e=await t.json();console.log("\ud83e\udd16 AI categorization complete:",e.summary),p(e.categorized_data);const n={};e.categorized_data.forEach(e=>{e.account_name&&(n[e.account_name]=e.ai_category)}),q(n);const r={};e.categorized_data.forEach(e=>{if(e.account_name){const t=je(e.account_name,e.ai_category);r[e.account_name]=t,console.log("\ud83e\udde0 Auto-assigned ".concat(e.account_name," \u2192 ").concat(t," (from AI learning)"))}}),k(r)}}catch(n){console.warn("AI backend error, using manual categorization:",n)}}catch(m){console.error("Data processing error:",m),y("Data processing failed: ".concat(m)),g(!1)}}})}})})(s)},className:"block w-full text-sm text-gray-500 dark:text-gray-400 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 dark:file:bg-blue-900/20 file:text-blue-700 dark:file:text-blue-300 hover:file:bg-blue-100 dark:hover:file:bg-blue-900/30"},e?e.name+e.lastModified:"file-input")]})]})}),!!a.length&&(0,zs.jsx)("div",{className:"flex gap-3",children:(0,zs.jsx)("button",{className:"px-4 py-2 rounded bg-blue-600 dark:bg-blue-700 text-white hover:bg-blue-700 dark:hover:bg-blue-600 disabled:opacity-50",onClick:async()=>{if(e){g(!0),y(null),C(!1),S(!1);try{bg().parse(e,{header:!0,complete:async e=>{const t=e.data;console.log("\ud83d\udcca Processing ".concat(t.length," rows")),t.length>0&&(console.log("\ud83d\udd0d Sample raw CSV row:",t[0]),console.log("\ud83d\udd0d Sample raw CSV row keys:",Object.keys(t[0])));const n=t.filter(e=>Object.keys(e).length>1).map((e,t)=>{const n={};Object.entries(d).forEach(t=>{let[r,s]=t;void 0!==e[r]&&(n[s.field]=e[r])});const s=Object.keys(e).find(e=>e.toLowerCase().includes("account")||e.toLowerCase().includes("name")||e.toLowerCase().includes("description")||e.toLowerCase().includes("item"))||Object.keys(e)[0],i=e[s],a={};return Object.keys(e).forEach(n=>{if(n!==s){let r=String(e[n]||"").trim();if(t<3&&console.log("\ud83d\udd0d Raw value for ".concat(n,': "').concat(r,'"')),!r||""===r||"-"===r)return void(a[n]=0);let s=!1;r.startsWith("(")&&r.endsWith(")")&&(s=!0,r=r.slice(1,-1)),r=r.replace(/,/g,"");const i=parseFloat(r);if(isNaN(i)){const e=r.match(/-?\d+\.?\d*/);if(e){const t=parseFloat(e[0]);isNaN(t)?a[n]=0:a[n]=s?-t:t}else a[n]=0}else{const e=s?-i:i;a[n]=e,t<3&&console.log("\u2705 Parsed ".concat(n,": ").concat(e))}}}),n.account_name=i,n.time_series=a,n.row_index=t,n.file_type=r,n});try{console.log("\ud83e\udd16 Sending data to AI backend for categorization...");const e=await fetch("".concat(_g,"/api/categorize"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({csv_data:n,file_type:r})});if(e.ok){const t=await e.json();console.log("\ud83e\udd16 AI categorization complete:",t.summary),console.log("\ud83e\udd16 Sample categorized row:",t.categorized_data[0]),p(t.categorized_data);const n={};t.categorized_data.forEach(e=>{e.account_name&&(n[e.account_name]=e.ai_category,e.time_series?console.log("\u2705 time_series preserved for ".concat(e.account_name,":"),Object.keys(e.time_series)):console.warn("\u26a0\ufe0f Missing time_series for ".concat(e.account_name)))}),q(n);const r={};t.categorized_data.forEach(e=>{if(e.account_name){const t=je(e.account_name,e.ai_category);r[e.account_name]=t,console.log("\ud83e\udde0 Auto-assigned ".concat(e.account_name," \u2192 ").concat(t," (from AI learning)"))}}),k(r);const s=ke(t.categorized_data,r);w(s)}else{console.warn("AI backend not available, using manual categorization"),p(n),q({});const e={};n.forEach(t=>{if(t.account_name){const n=je(t.account_name,"unknown");e[t.account_name]=n,console.log("\ud83e\udde0 Auto-assigned ".concat(t.account_name," \u2192 ").concat(n," (from AI learning, manual mode)"))}}),k(e);const t=ke(n,e);w(t)}}catch(s){console.warn("AI backend error, using manual categorization:",s),p(n),q({});const e={};n.forEach(t=>{if(t.account_name){const n=je(t.account_name,"unknown");e[t.account_name]=n,console.log("\ud83e\udde0 Auto-assigned ".concat(t.account_name," \u2192 ").concat(n," (from AI learning, AI error fallback)"))}}),k(e);const t=ke(n,e);w(t)}C(!0),g(!1)},error:e=>{console.error("CSV parsing error:",e),y("CSV parsing failed: ".concat(e.message)),g(!1)}})}catch(m){console.error("Preview error:",m),y("Preview failed: ".concat(m.message)),g(!1)}}},disabled:f,children:f?"Processing...":"\ud83d\udd04 Refresh Preview"})}),!!h.length&&(0,zs.jsxs)("div",{children:[(0,zs.jsx)("h4",{className:"text-md font-medium mb-2 text-gray-900 dark:text-white",children:"CSV Data Preview"}),(0,zs.jsx)("div",{className:"mb-3 p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 rounded-md",children:(0,zs.jsxs)("p",{className:"text-sm text-green-800 dark:text-green-300",children:[(0,zs.jsx)("strong",{children:"\u2705 Auto-Processed:"})," ",h.length,' records loaded and analyzed automatically. Review the AI categorization below and click "Save to Database" when ready.']})}),N&&!L&&(0,zs.jsx)("div",{className:"mb-6 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 rounded-lg",children:(0,zs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zs.jsxs)("div",{children:[(0,zs.jsx)("h3",{className:"text-lg font-semibold text-green-800 dark:text-green-300",children:"Ready to Save?"}),(0,zs.jsx)("p",{className:"text-sm text-green-700 dark:text-green-400 mt-1",children:"Review your bucket assignments below and save your CSV data to the database."})]}),(0,zs.jsx)("button",{className:"px-6 py-3 rounded-lg text-white font-semibold transition-colors text-lg ".concat(f?"bg-gray-400 dark:bg-gray-600 cursor-not-allowed":"bg-green-600 dark:bg-green-700 hover:bg-green-700 dark:hover:bg-green-600"),onClick:Ne,disabled:f,children:f?"Saving...":j?"\u2705 Saved!":"\ud83d\udcbe Save to Database"})]})}),(0,zs.jsxs)("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden bg-white dark:bg-gray-800",children:[(0,zs.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 px-4 py-3 border-b border-gray-200 dark:border-gray-700",children:[(0,zs.jsx)("h5",{className:"font-medium text-blue-900 dark:text-blue-300",children:"\ud83d\udcca CSV Data with Categorization v.1 beta"}),(0,zs.jsx)("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:'The AI Parser this tool uses isnt yet perfect. Please help by selecting and categorizing line items as "Income" or "Expense".'}),(0,zs.jsx)("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:"Look for Total Income, Total Expense, and Net Operating Income. Deselect all other Total Items."}),(0,zs.jsx)("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:"Keep adjusting the income/expense column until the summed total of items matches the selected total."}),(0,zs.jsx)("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:"Income/Expense items should match Total Income/Expense by the end to correctly populate the data page."}),(0,zs.jsx)("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:'Income/Expense will indicate a "Match" in the Income/Expense Summary Section once the total line items match the user\'s selected line item nominated as the Total Income/Expense line.'}),(0,zs.jsxs)("div",{className:"mt-3 flex flex-wrap gap-2",children:[(0,zs.jsx)("button",{onClick:()=>{const e={};h.forEach(t=>{t.account_name&&(e[t.account_name]=!0)}),w(e)},className:"px-3 py-1 text-xs bg-green-100 dark:bg-green-900/20 text-green-700 dark:text-green-300 rounded hover:bg-green-200 dark:hover:bg-green-900/30 transition-colors",children:"\u2705 Select All"}),(0,zs.jsx)("button",{onClick:()=>{const e={};h.forEach(t=>{t.account_name&&(e[t.account_name]=!1)}),w(e),console.log("\u274c Deselected all items:",e)},className:"px-3 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"\u274c Deselect All"}),(0,zs.jsx)("div",{className:"px-3 py-1 text-xs bg-blue-100 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 rounded",children:"\ud83d\udca1 Tip: Hold Shift + click to select ranges"}),(0,zs.jsx)("button",{onClick:()=>Se("income"),className:"px-3 py-1 text-xs bg-green-100 dark:bg-green-900/20 text-green-700 dark:text-green-300 rounded hover:bg-green-200 dark:hover:bg-green-900/30 transition-colors",children:"\ud83d\udcb0 Select Income Only"}),(0,zs.jsx)("button",{onClick:()=>Se("expense"),className:"px-3 py-1 text-xs bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-300 rounded hover:bg-red-200 dark:hover:bg-red-900/30 transition-colors",children:"\ud83d\udcb8 Select Expense Only"}),(0,zs.jsxs)("div",{className:"ml-4 pl-4 border-l border-blue-200 dark:border-blue-700",children:[(0,zs.jsx)("button",{onClick:()=>{if(!h||0===h.length)return;const e=h.map(e=>e.account_name).filter(Boolean);A(new Set(e)),T(!0)},className:"px-3 py-1 text-xs bg-blue-100 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 rounded hover:bg-blue-200 dark:hover:bg-blue-900/30 transition-colors",children:"\ud83d\udccb Select All Rows"}),(0,zs.jsx)("button",{onClick:_e,className:"px-3 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors ml-2",children:"\ud83d\udeab Clear Selection"})]})]}),P&&(0,zs.jsx)("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:(0,zs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zs.jsx)("div",{className:"flex items-center gap-2",children:(0,zs.jsxs)("span",{className:"text-sm font-medium text-yellow-800",children:["\ud83d\udce6 Bulk Assignment (",E.size," items selected)"]})}),(0,zs.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries(Oe()).map(e=>{let[t,n]=e;return(0,zs.jsxs)("button",{onClick:()=>(e=>{0!==E.size&&(k(t=>{const n=(0,s.A)({},t);return E.forEach(t=>{n[t]=e}),n}),console.log("\ud83d\udd04 Assigned ".concat(E.size," items to bucket: ").concat(e)),_e())})(t),className:"px-3 py-1 text-xs rounded hover:opacity-80 transition-opacity whitespace-nowrap flex items-center gap-1 ".concat("income"===n.category?"bg-green-100 text-green-700":"expense"===n.category?"bg-red-100 text-red-700":"cash"===n.category?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-700"),children:[(0,zs.jsx)("span",{children:n.icon}),(0,zs.jsx)("span",{className:"truncate",children:n.label})]},t)})})]})})]}),(0,zs.jsx)("div",{className:"overflow-x-auto max-h-[36rem]",children:(0,zs.jsxs)("table",{className:"min-w-full text-sm",children:[(0,zs.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700 sticky top-0",children:(0,zs.jsxs)("tr",{children:[(0,zs.jsx)("th",{className:"px-3 py-2 text-center font-medium text-gray-700 dark:text-gray-300 border-b border-gray-200 dark:border-gray-600 sticky left-0 bg-gray-50 dark:bg-gray-700 z-10",children:"Include"}),(0,zs.jsx)("th",{className:"px-3 py-2 text-center font-medium text-gray-700 dark:text-gray-300 border-b border-gray-200 dark:border-gray-600 sticky left-12 bg-gray-50 dark:bg-gray-700 z-10",children:"Select"}),(0,zs.jsx)("th",{className:"px-3 py-2 text-left font-medium text-gray-700 dark:text-gray-300 border-b border-gray-200 dark:border-gray-600 sticky left-24 bg-gray-50 dark:bg-gray-700 z-10",children:"Account Name"}),(0,zs.jsx)("th",{className:"px-3 py-2 text-center font-medium text-gray-700 dark:text-gray-300 border-b border-gray-200 dark:border-gray-600",children:"Dashboard Bucket"}),(()=>{const e=h.find(e=>e.time_series&&Object.keys(e.time_series).length>0);return null!==e&&void 0!==e&&e.time_series?Object.keys(e.time_series).map(e=>(0,zs.jsx)("th",{className:"px-3 py-2 text-right font-medium text-gray-700 dark:text-gray-300 border-b border-gray-200 dark:border-gray-600",children:e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())},e)):[]})()]})}),(0,zs.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-600",children:h.map((e,t)=>{const n=e.account_name,i=e.time_series||{},a=!0===v[n];return e.time_series||console.warn("\u26a0\ufe0f Row ".concat(t," missing time_series:"),e),(0,zs.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 ".concat(a?"":"opacity-50 bg-gray-100 dark:bg-gray-800"),children:[(0,zs.jsx)("td",{className:"px-3 py-2 text-center border-b border-gray-200 dark:border-gray-600 sticky left-0 bg-white dark:bg-gray-800 z-10",children:(0,zs.jsx)("input",{type:"checkbox",checked:a,disabled:L,onChange:e=>{L||w(t=>(0,s.A)((0,s.A)({},t),{},{[n]:e.target.checked}))},className:"w-4 h-4 text-blue-600 dark:text-blue-400 bg-gray-100 dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500 dark:focus:ring-blue-400 focus:ring-2 ".concat(L?"opacity-50 cursor-not-allowed":"")})}),(0,zs.jsx)("td",{className:"px-3 py-2 text-center border-b border-gray-200 dark:border-gray-600 sticky left-12 bg-white dark:bg-gray-800 z-10",children:(0,zs.jsx)("input",{type:"checkbox",checked:E.has(n),disabled:L,onChange:e=>{L||((e,t)=>{if((null===t||void 0===t?void 0:t.shiftKey)&&E.size>0){const t=h.map(e=>e.account_name).filter(Boolean),n=t.findIndex(e=>E.has(e)),r=t.indexOf(e);if(-1!==n&&-1!==r){const e=Math.min(n,r),s=Math.max(n,r);return void A(n=>{const r=new Set(n);for(let i=e;i<=s;i++)r.add(t[i]);return T(r.size>0),r})}}A(t=>{const n=new Set(t);return n.has(e)?n.delete(e):n.add(e),T(n.size>0),n})})(n,e)},className:"w-4 h-4 text-purple-600 dark:text-purple-400 bg-gray-100 dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-purple-500 dark:focus:ring-purple-400 focus:ring-2 ".concat(L?"opacity-50 cursor-not-allowed":"")})}),(0,zs.jsx)("td",{className:"px-3 py-2 text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-600 sticky left-24 bg-white dark:bg-gray-800 z-10",children:(0,zs.jsx)("div",{className:"max-w-xs truncate font-medium",title:String(n),children:n||"-"})}),(0,zs.jsx)("td",{className:"px-3 py-2 border-b border-gray-200 dark:border-gray-600",children:(0,zs.jsx)("div",{className:"space-y-1",children:(()=>{const t=((e,t)=>{const n=e.toLowerCase(),s=[];if(x&&Array.isArray(x)&&x.length>0){const t=x.find(e=>e.account_name&&e.account_name.toLowerCase()===n);t&&t.user_category&&(s.push(t.user_category),console.log("\ud83e\udde0 AI learning suggestion for ".concat(e,": ").concat(t.user_category," (learned from previous uploads)")))}for(const[r,i]of Object.entries(ee))for(const e of i)if(n.toLowerCase().includes(e.toLowerCase())){s.includes(r)||s.push(r);break}return 0===s.length&&("cash_flow"===r?"income"===t?s.push("income_item","income_total","rental_income","other_income"):"expense"===t?s.push("expense_item","expense_total","operating_expenses","maintenance_expenses"):"cash"===t&&s.push("cash_amount","cash_change"):"income"===t?s.push("other_income","rental_income"):"expense"===t&&s.push("operating_expenses","maintenance_expenses","management_expenses")),s.includes("exclude")||s.push("exclude"),s})(n,H[n]||e.ai_category),i=_[n]||je(n,H[n]||e.ai_category);n&&_[n]&&console.log("\ud83e\udea3 Found bucket assignment for ".concat(n,":"),_[n]);const a=Oe(),o=Object.entries(a).map(e=>{let[t,n]=e;return{key:t,bucket:n}}),l=x&&Array.isArray(x)&&x.length>0&&x.some(e=>e.account_name&&e.account_name.toLowerCase()===n.toLowerCase()&&e.user_category===i);return(0,zs.jsx)(Le,{value:i,onChange:e=>(async(e,t)=>{if(k(n=>(0,s.A)((0,s.A)({},n),{},{[e]:t})),console.log("\ud83e\udea3 Assigned ".concat(e," to bucket: ").concat(t)),"exclude"!==t&&e&&t)try{await(0,mf.ai)(r,e,t),console.log("\ud83e\udde0 Learned bucket assignment: ".concat(e," \u2192 ").concat(t)),b(n=>{const i=Array.isArray(n)?n:[],a=i.findIndex(t=>t.account_name&&t.account_name.toLowerCase()===e.toLowerCase());if(a>=0){const e=[...i];return e[a]=(0,s.A)((0,s.A)({},e[a]),{},{user_category:t}),e}return[...i,{account_name:e,user_category:t,file_type:r}]})}catch(m){console.warn("Failed to save bucket assignment to AI learning:",m)}})(n,e),options:o,suggestions:t,className:"w-full",isFromAILearning:l,disabled:L})})()})}),(()=>{const e=h.find(e=>e.time_series&&Object.keys(e.time_series).length>0);return(null!==e&&void 0!==e&&e.time_series?Object.keys(e.time_series):[]).map((e,t)=>(0,zs.jsx)("td",{className:"px-3 py-2 text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-600 text-right",children:(0,zs.jsx)("div",{className:"max-w-xs truncate font-mono text-xs",title:String(i[e]||0),children:null!==i[e]&&void 0!==i[e]?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(i[e]):"-"})},t))})()]},t)})})]})}),(0,zs.jsxs)("div",{className:"px-3 py-2 bg-gray-50 text-sm text-gray-600 border-t flex items-center justify-between",children:[(0,zs.jsxs)("span",{children:["Showing all ",h.length," records"]}),N&&!L&&(0,zs.jsx)("button",{className:"px-4 py-2 rounded text-white font-semibold transition-colors text-sm ".concat(f?"bg-gray-400 dark:bg-gray-600 cursor-not-allowed":"bg-green-600 dark:bg-green-700 hover:bg-green-700 dark:hover:bg-green-600"),onClick:Ne,disabled:f,children:f?"Saving...":j?"\u2705 Saved!":"\ud83d\udcbe Save to Database"})]})]}),h&&h.length>0&&(0,zs.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-lg shadow-sm border border-green-200",children:[(0,zs.jsxs)("div",{className:"px-4 py-3 border-b border-green-200",children:[(0,zs.jsx)("h3",{className:"text-base font-semibold text-green-900",children:"\ud83d\udcb0 Total Amounts"}),(0,zs.jsxs)("p",{className:"text-green-700 mt-1 text-sm",children:["Live preview of how your current ","cash_flow"===r?"Cash Flow":"balance_sheet"===r?"Balance Sheet":"rent_roll"===r?"Rent Roll":"maintenance_log"===r?"Maintenance Log":"CSV"," will affect dashboard totals"]}),(0,zs.jsxs)("div",{className:"mt-3 flex items-center gap-2 text-xs text-green-600",children:[(0,zs.jsx)("span",{children:"\ud83d\udcdc"}),(0,zs.jsx)("span",{children:"Scroll to browse all sections"})]})]}),(0,zs.jsx)("div",{className:"p-4",style:{height:"300px",overflowY:"auto"},children:(()=>{const e=Ae,t=["income_item","rental_income","other_income"].reduce((e,t)=>e+(Pe[t]||0),0),n=Pe.income_total||Pe.total_income||Pe.total_operating_income||0,s=["expense_item","operating_expenses","maintenance_expenses","management_expenses"].reduce((e,t)=>e+(Pe[t]||0),0),i=Pe.expense_total||Pe.total_expenses||Pe.total_operating_expense||0,a=Math.abs(t-n)>.01,o=Math.abs(s-i)>.01;return console.log("\ud83d\udd0d Real-Time Impact Debug:",{currentSessionTotals:Pe,incomeItems:t,incomeTotal:n,expenseItems:s,expenseTotal:i,incomeMismatch:a,expenseMismatch:o}),(0,zs.jsxs)("div",{className:"space-y-4",children:[(0,zs.jsxs)("div",{className:"space-y-3",children:[(0,zs.jsxs)("h4",{className:"text-sm font-semibold text-green-800 flex items-center gap-2",children:["\ud83d\udcb0 Income Summary",a?(0,zs.jsx)("span",{className:"px-1 py-0.5 bg-amber-100 text-amber-700 rounded-full text-xs font-medium",children:"\u26a0\ufe0f Mismatch"}):(0,zs.jsx)("span",{className:"px-1 py-0.5 bg-green-100 text-green-700 rounded-full text-xs font-medium",children:"\u2705 Match"})]}),(0,zs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,zs.jsxs)("div",{className:"p-3 border-2 border-green-300 bg-green-50 rounded-lg",children:[(0,zs.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,zs.jsxs)("div",{className:"flex items-center gap-1",children:[(0,zs.jsx)("span",{className:"text-green-600 text-sm",children:"\ud83d\udcc8"}),(0,zs.jsx)("span",{className:"font-semibold text-green-800 text-sm",children:"Income Total"})]}),n>0&&(0,zs.jsxs)("span",{className:"text-xs text-green-600 font-medium",children:["+$",n.toLocaleString()]})]}),(0,zs.jsxs)("div",{className:"text-lg font-bold text-green-900",children:["$",(e.income_total||e.total_income||e.total_operating_income||0).toLocaleString()]}),(0,zs.jsx)("div",{className:"text-xs text-green-700 mt-1",children:"Total (all CSVs)"})]}),(0,zs.jsxs)("div",{className:"p-3 border border-green-200 bg-green-25 rounded-lg",children:[(0,zs.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,zs.jsxs)("div",{className:"flex items-center gap-1",children:[(0,zs.jsx)("span",{className:"text-green-600 text-sm",children:"\ud83d\udcb0"}),(0,zs.jsx)("span",{className:"font-semibold text-green-800 text-sm",children:"Income Items"})]}),t>0&&(0,zs.jsxs)("span",{className:"text-xs text-green-600 font-medium",children:["+$",t.toLocaleString()]})]}),(0,zs.jsxs)("div",{className:"text-lg font-bold text-green-900",children:["$",t.toLocaleString()]}),(0,zs.jsxs)("div",{className:"text-xs text-green-700 mt-1",children:["Sum of all income line items (this ","cash_flow"===r?"Cash Flow":"balance_sheet"===r?"Balance Sheet":"rent_roll"===r?"Rent Roll":"maintenance_log"===r?"Maintenance Log":"CSV",")"]})]})]}),a?(0,zs.jsxs)("div",{className:"p-2 bg-amber-50 border border-amber-200 rounded-lg",children:[(0,zs.jsxs)("div",{className:"flex items-center gap-1 text-amber-800",children:[(0,zs.jsx)("span",{className:"text-amber-600 text-xs",children:"\u26a0\ufe0f"}),(0,zs.jsx)("span",{className:"font-medium text-xs",children:"Income Mismatch Detected"})]}),(0,zs.jsxs)("p",{className:"text-xs text-amber-700 mt-1",children:["Income Total ($",n.toLocaleString(),") doesn't match Income Items ($",t.toLocaleString(),"). Please edit your ","cash_flow"===r?"Cash Flow":"balance_sheet"===r?"Balance Sheet":"rent_roll"===r?"Rent Roll":"maintenance_log"===r?"Maintenance Log":"CSV"," data categorization to ensure totals match."]})]}):(0,zs.jsx)("div",{className:"p-2 bg-green-50 border border-green-200 rounded-lg",children:(0,zs.jsxs)("div",{className:"flex items-center gap-1 text-green-800",children:[(0,zs.jsx)("span",{className:"text-green-600 text-xs",children:"\u2705"}),(0,zs.jsx)("span",{className:"font-medium text-xs",children:"Sum of items matches total amount"})]})})]}),(0,zs.jsxs)("div",{className:"space-y-3",children:[(0,zs.jsxs)("h4",{className:"text-sm font-semibold text-red-800 flex items-center gap-2",children:["\ud83d\udcb8 Expense Summary",o?(0,zs.jsx)("span",{className:"px-1 py-0.5 bg-amber-100 text-amber-700 rounded-full text-xs font-medium",children:"\u26a0\ufe0f Mismatch"}):(0,zs.jsx)("span",{className:"px-1 py-0.5 bg-green-100 text-green-700 rounded-full text-xs font-medium",children:"\u2705 Match"})]}),(0,zs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,zs.jsxs)("div",{className:"p-3 border-2 border-red-300 bg-red-50 rounded-lg",children:[(0,zs.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,zs.jsxs)("div",{className:"flex items-center gap-1",children:[(0,zs.jsx)("span",{className:"text-red-600 text-sm",children:"\ud83d\udcc9"}),(0,zs.jsx)("span",{className:"font-semibold text-red-800 text-sm",children:"Expense Total"})]}),i>0&&(0,zs.jsxs)("span",{className:"text-xs text-red-600 font-medium",children:["+$",i.toLocaleString()]})]}),(0,zs.jsxs)("div",{className:"text-lg font-bold text-red-900",children:["$",(e.expense_total||e.total_expenses||e.total_operating_expense||0).toLocaleString()]}),(0,zs.jsx)("div",{className:"text-xs text-red-700 mt-1",children:"Total (all CSVs)"})]}),(0,zs.jsxs)("div",{className:"p-3 border border-red-200 bg-red-25 rounded-lg",children:[(0,zs.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,zs.jsxs)("div",{className:"flex items-center gap-1",children:[(0,zs.jsx)("span",{className:"text-red-600 text-sm",children:"\ud83d\udcb8"}),(0,zs.jsx)("span",{className:"font-semibold text-red-800 text-sm",children:"Expense Items"})]}),s>0&&(0,zs.jsxs)("span",{className:"text-xs text-red-600 font-medium",children:["+$",s.toLocaleString()]})]}),(0,zs.jsxs)("div",{className:"text-lg font-bold text-red-900",children:["$",s.toLocaleString()]}),(0,zs.jsxs)("div",{className:"text-xs text-red-700 mt-1",children:["Sum of all expense line items (this ","cash_flow"===r?"Cash Flow":"balance_sheet"===r?"Balance Sheet":"rent_roll"===r?"Rent Roll":"maintenance_log"===r?"Maintenance Log":"CSV",")"]})]})]}),o?(0,zs.jsxs)("div",{className:"p-2 bg-amber-50 border border-amber-200 rounded-lg",children:[(0,zs.jsxs)("div",{className:"flex items-center gap-1 text-amber-800",children:[(0,zs.jsx)("span",{className:"text-amber-600 text-xs",children:"\u26a0\ufe0f"}),(0,zs.jsx)("span",{className:"font-medium text-xs",children:"Expense Mismatch Detected"})]}),(0,zs.jsxs)("p",{className:"text-xs text-amber-700 mt-1",children:["Expense Total ($",i.toLocaleString(),") doesn't match Expense Items ($",s.toLocaleString(),"). Please edit your ","cash_flow"===r?"Cash Flow":"balance_sheet"===r?"Balance Sheet":"rent_roll"===r?"Rent Roll":"maintenance_log"===r?"Maintenance Log":"CSV"," data categorization to ensure totals match."]})]}):(0,zs.jsx)("div",{className:"p-2 bg-green-50 border border-green-200 rounded-lg",children:(0,zs.jsxs)("div",{className:"flex items-center gap-1 text-green-800",children:[(0,zs.jsx)("span",{className:"text-green-600 text-xs",children:"\u2705"}),(0,zs.jsx)("span",{className:"font-medium text-xs",children:"Sum of items matches total amount"})]})})]}),(0,zs.jsxs)("div",{className:"space-y-3",children:[(0,zs.jsx)("h4",{className:"text-sm font-semibold text-blue-800",children:"\ud83d\udcca Net Income & Cash"}),(0,zs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,zs.jsxs)("div",{className:"p-3 border-2 border-blue-300 bg-blue-50 rounded-lg",children:[(0,zs.jsx)("div",{className:"flex items-center justify-between mb-1",children:(0,zs.jsxs)("div",{className:"flex items-center gap-1",children:[(0,zs.jsx)("span",{className:"text-blue-600 text-sm",children:"\ud83d\udcca"}),(0,zs.jsx)("span",{className:"font-semibold text-blue-800 text-sm",children:"Net Operating Income"})]})}),(0,zs.jsxs)("div",{className:"text-lg font-bold text-blue-900",children:["$",(e.net_operating_income||0).toLocaleString()]}),(0,zs.jsx)("div",{className:"text-xs text-blue-700 mt-1",children:"Income - Expenses"})]}),(0,zs.jsxs)("div",{className:"p-3 border-2 border-purple-300 bg-purple-50 rounded-lg",children:[(0,zs.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,zs.jsxs)("div",{className:"flex items-center gap-1",children:[(0,zs.jsx)("span",{className:"text-purple-600 text-sm",children:"\ud83d\udcb3"}),(0,zs.jsx)("span",{className:"font-semibold text-purple-800 text-sm",children:"Cash Amount"})]}),(Pe.cash_amount||0)>0&&(0,zs.jsxs)("span",{className:"text-xs text-purple-600 font-medium",children:["+$",(Pe.cash_amount||0).toLocaleString()]})]}),(0,zs.jsxs)("div",{className:"text-lg font-bold text-purple-900",children:["$",(e.cash_amount||0).toLocaleString()]}),(0,zs.jsx)("div",{className:"text-xs text-purple-700 mt-1",children:"Cash and cash equivalents"})]})]}),(0,zs.jsxs)("div",{className:"mt-3 p-2 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,zs.jsxs)("div",{className:"flex items-center gap-2 text-blue-800",children:[(0,zs.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),(0,zs.jsx)("span",{className:"text-xs font-medium",children:"Live Updates"})]}),(0,zs.jsxs)("p",{className:"text-xs text-blue-700 mt-1",children:["These totals update automatically as you change bucket assignments or include/exclude items from your ","cash_flow"===r?"Cash Flow":"balance_sheet"===r?"Balance Sheet":"rent_roll"===r?"Rent Roll":"maintenance_log"===r?"Maintenance Log":"CSV","."]})]})]})]})})()})]}),I&&(0,zs.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,zs.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,zs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zs.jsxs)("div",{className:"flex items-center gap-3",children:[(0,zs.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:[L?"\ud83d\udc41\ufe0f Preview Mode":"\u270f\ufe0f Edit Mode",": ",I.fileName]}),(0,zs.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat((e=>{const t={cash_flow:"bg-blue-100 text-blue-800",balance_sheet:"bg-green-100 text-green-800",rent_roll:"bg-purple-100 text-purple-800",income_statement:"bg-orange-100 text-orange-800",general:"bg-gray-100 text-gray-800"};return t[e]||t.general})(I.fileType)),children:I.fileType.replace("_"," ")}),(0,zs.jsxs)("span",{className:"text-sm text-gray-500",children:[I.totalRecords," records"]})]}),(0,zs.jsxs)("div",{className:"flex gap-2",children:[(0,zs.jsx)("button",{onClick:()=>R(null),className:"px-3 py-1.5 bg-gray-600 text-white rounded hover:bg-gray-700 text-xs font-medium",children:"Close"}),!L&&(0,zs.jsx)("button",{onClick:()=>{console.log("\ud83d\udcbe Saving changes for:",I.fileName)},className:"px-3 py-1.5 bg-green-600 text-white rounded hover:bg-green-700 text-xs font-medium",children:"Save Changes"})]})]})}),(0,zs.jsx)("div",{className:"p-6",children:L?(0,zs.jsxs)("div",{className:"mb-6",children:[(0,zs.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"\ud83d\udccb Spreadsheet Preview"}),(0,zs.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[(0,zs.jsx)("div",{className:"overflow-x-auto max-h-96",children:(0,zs.jsxs)("table",{className:"min-w-full text-sm",children:[(0,zs.jsx)("thead",{className:"bg-gray-50 sticky top-0",children:(0,zs.jsxs)("tr",{children:[(0,zs.jsx)("th",{className:"px-3 py-2 text-left font-medium text-gray-700 border-b",children:"Account Name"}),(()=>{const e=I.previewData.find(e=>e.time_series&&Object.keys(e.time_series).length>0);return null!==e&&void 0!==e&&e.time_series?Object.keys(e.time_series).map(e=>(0,zs.jsx)("th",{className:"px-3 py-2 text-right font-medium text-gray-700 border-b",children:e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())},e)):[]})()]})}),(0,zs.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-600",children:I.previewData.slice(0,20).map((e,t)=>{const n=e.time_series||{};return(0,zs.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,zs.jsx)("td",{className:"px-3 py-2 text-gray-900 border-b font-medium",children:e.account_name||"-"}),(()=>{const e=I.previewData.find(e=>e.time_series&&Object.keys(e.time_series).length>0);return(null!==e&&void 0!==e&&e.time_series?Object.keys(e.time_series):[]).map((e,t)=>(0,zs.jsx)("td",{className:"px-3 py-2 text-gray-900 border-b text-right font-mono text-xs",children:null!==n[e]&&void 0!==n[e]?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(n[e]):"-"},t))})()]},t)})})]})}),I.previewData.length>20&&(0,zs.jsxs)("div",{className:"px-3 py-2 bg-gray-50 text-sm text-gray-600 border-t",children:["Showing first 20 rows of ",I.previewData.length," total records"]})]})]}):(0,zs.jsx)("div",{className:"text-center py-8",children:(0,zs.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[(0,zs.jsx)("div",{className:"text-blue-600 mb-4",children:(0,zs.jsx)("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,zs.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,zs.jsx)("h4",{className:"text-lg font-semibold text-blue-900 mb-2",children:"\u270f\ufe0f Editing in Main Interface"}),(0,zs.jsx)("p",{className:"text-blue-700 mb-4",children:"The CSV data with categorization interface is now active above. You can edit bucket assignments, include/exclude items, and make changes directly in the main categorization table."}),(0,zs.jsxs)("div",{className:"text-sm text-blue-600",children:[(0,zs.jsx)("p",{children:"\u2022 Use the categorization table above to edit your data"}),(0,zs.jsx)("p",{children:'\u2022 Changes will be saved when you click "Save to Database"'}),(0,zs.jsx)("p",{children:"\u2022 Close this panel when you're done editing"})]})]})})})]}),(0,zs.jsxs)("div",{className:"mt-4 bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,zs.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,zs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zs.jsxs)("div",{children:[(0,zs.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"\ud83e\udd16 AI Bucket Management"}),(0,zs.jsx)("p",{className:"text-gray-600 mt-1",children:"Customize how the AI parses CSV files and assigns buckets"}),(0,zs.jsxs)("div",{className:"flex items-center gap-1 mt-2 flex-wrap",children:[Object.entries(Oe()).slice(0,5).map(e=>{var t;let[n,r]=e;return(0,zs.jsxs)("div",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ".concat(r.color),title:"".concat(r.label,": ").concat((null===(t=ee[n])||void 0===t?void 0:t.length)||0," terms"),children:[r.icon,(0,zs.jsx)("span",{className:"text-xs",children:r.label})]},n)}),Object.entries(Oe()).length>5&&(0,zs.jsx)("button",{onClick:()=>ce(!le),className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors",title:"Click to view all buckets",children:(0,zs.jsx)("span",{children:"..."})})]}),le&&(0,zs.jsxs)("div",{className:"mt-3 p-3 bg-gray-50 border border-gray-200 rounded-lg",children:[(0,zs.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,zs.jsx)("h5",{className:"text-sm font-medium text-gray-900",children:"All Active Buckets"}),(0,zs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zs.jsx)("button",{onClick:()=>oe(!0),className:"px-2 py-1 bg-purple-600 text-white rounded text-xs hover:bg-purple-700",title:"Add new bucket",children:"+ Add Bucket"}),(0,zs.jsx)("button",{onClick:()=>ce(!1),className:"text-gray-500 hover:text-gray-700 text-xs",children:"\u2715"})]})]}),(0,zs.jsx)("div",{className:"max-h-96 overflow-y-auto space-y-2",children:Object.entries(Oe()).map(e=>{var t,n;let[r,i]=e;return(0,zs.jsxs)("div",{className:"flex items-start gap-3 p-3 rounded-lg border ".concat(i.color," group hover:shadow-sm transition-shadow"),children:[(0,zs.jsxs)("div",{className:"flex items-center gap-2 min-w-0 flex-shrink-0",children:[(0,zs.jsx)("span",{className:"text-lg",children:i.icon}),(0,zs.jsxs)("div",{className:"min-w-0",children:[(0,zs.jsx)("div",{className:"font-medium text-sm truncate",children:i.label}),(0,zs.jsxs)("div",{className:"text-xs opacity-75",children:[(null===(t=ee[r])||void 0===t?void 0:t.length)||0," terms"]})]})]}),(0,zs.jsx)("div",{className:"flex-1 min-w-0",children:(0,zs.jsx)("div",{className:"flex flex-wrap gap-1",children:(null===(n=ee[r])||void 0===n?void 0:n.map((e,t)=>(0,zs.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-white bg-opacity-50 rounded text-xs border group/term hover:bg-opacity-70 transition-colors",children:[e,(0,zs.jsx)("button",{onClick:()=>{window.confirm('Remove "'.concat(e,'" from ').concat(i.label,"?"))&&te(e=>{var n;return(0,s.A)((0,s.A)({},e),{},{[r]:(null===(n=e[r])||void 0===n?void 0:n.filter((e,n)=>n!==t))||[]})})},className:"opacity-0 group-hover/term:opacity-100 hover:bg-red-100 hover:text-red-600 rounded-full p-0.5 transition-all",title:'Remove "'.concat(e,'"'),children:"\xd7"})]},t)))||(0,zs.jsx)("span",{className:"text-xs opacity-50 italic",children:"No terms defined"})})}),(0,zs.jsxs)("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0",children:[(0,zs.jsx)("button",{onClick:()=>{const e=prompt("Add term to ".concat(i.label,":"));e&&e.trim()&&((e,t)=>{if(!t.trim())return;const n=t.trim().toLowerCase().split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ");te(t=>{const r=(0,s.A)({},t);return r[e]||(r[e]=[]),r[e].includes(n)||(r[e]=[...r[e],n]),r}),be("")})(r,e.trim())},className:"p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-100 rounded",title:"Add term",children:"+"}),(0,zs.jsx)("button",{onClick:()=>{var e;window.confirm('Delete "'.concat(i.label,'" bucket? This will remove all ').concat((null===(e=ee[r])||void 0===e?void 0:e.length)||0," terms."))&&(e=>{var t;const n=(null===(t=Oe()[e])||void 0===t?void 0:t.label)||e;if(!window.confirm('Are you sure you want to delete the "'.concat(n,'" bucket? This will also remove all associated terms.')))return;se[e]&&ie(t=>{const n=(0,s.A)({},t);return delete n[e],n}),te(t=>{const n=(0,s.A)({},t);return delete n[e],n}),ye(t=>{const n=(0,s.A)({},t);return delete n[e],n});const r=(0,s.A)({},ee);delete r[e],localStorage.setItem("bucketTerms",JSON.stringify(r));const i=(0,s.A)({},se);delete i[e],localStorage.setItem("customBuckets",JSON.stringify(i));const a=(0,s.A)({},me);delete a[e],localStorage.setItem("bucketCategories",JSON.stringify(a))})(r)},className:"p-1 text-red-600 hover:text-red-800 hover:bg-red-100 rounded",title:"Delete bucket",children:"\ud83d\uddd1\ufe0f"})]})]},r)})}),(0,zs.jsx)("div",{className:"mt-3 pt-2 border-t border-gray-300",children:(0,zs.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[(0,zs.jsx)("span",{children:"Hover over buckets to see quick actions"}),(0,zs.jsx)("button",{onClick:Te,className:"px-2 py-1 bg-green-600 text-white rounded text-xs hover:bg-green-700",children:"Save Changes"})]})})]})]}),(0,zs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zs.jsx)("button",{onClick:()=>re(!ne),className:"px-3 py-1.5 rounded text-xs font-medium ".concat(ne?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-600 text-white hover:bg-gray-700"),children:ne?"Hide":"Show"}),(0,zs.jsx)("button",{onClick:Te,className:"px-3 py-1.5 bg-green-600 text-white rounded hover:bg-green-700 text-xs font-medium",children:"Save"}),(0,zs.jsx)("button",{onClick:()=>oe(!ae),className:"px-3 py-1.5 bg-purple-600 text-white rounded hover:bg-purple-700 text-xs font-medium",children:ae?"Cancel":"Add Bucket"}),(0,zs.jsx)("button",{onClick:()=>{const e={total_operating_income:["Total Operating Income","Total Income","Operating Income","Gross Income"],total_operating_expense:["Total Operating Expense","Total Expense","Operating Expense","Total Costs"],net_operating_income:["NOI","Net Operating Income","Net Income","Operating Profit"],rental_income:["Rent","Rental","Tenant","Lease","Monthly Rent","Rental Income"],other_income:["Fee","Charge","Late Fee","Application Fee","Pet Fee","Parking Fee"],operating_expenses:["Operating","General","Administrative","Office","Utilities"],maintenance_expenses:["Maintenance","Repair","Fix","Service","Upkeep","Renovation"],management_expenses:["Management","Admin","Administrative","Office","Management Fee"],exclude:["Total","Sum","Grand Total","Subtotal","Balance","Equity"]};te(e),localStorage.setItem("bucketTerms",JSON.stringify(e))},className:"px-3 py-1.5 bg-red-600 text-white rounded hover:bg-red-700 text-xs font-medium",children:"Reset"})]})]})}),ne&&(0,zs.jsxs)("div",{className:"p-6",children:[ae&&(0,zs.jsxs)("div",{className:"mb-6 p-4 bg-purple-50 border border-purple-200 rounded-lg",children:[(0,zs.jsx)("h3",{className:"text-lg font-semibold text-purple-900 mb-4",children:"\u2795 Add New Bucket"}),(0,zs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,zs.jsxs)("div",{children:[(0,zs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bucket Name"}),(0,zs.jsx)("input",{type:"text",value:de,onChange:e=>ue(e.target.value),placeholder:"e.g., Marketing Expenses",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),(0,zs.jsxs)("div",{children:[(0,zs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),(0,zs.jsxs)("select",{value:fe,onChange:e=>ge(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-purple-500",children:[(0,zs.jsx)("option",{value:"income",children:"Income"}),(0,zs.jsx)("option",{value:"expense",children:"Expense"}),(0,zs.jsx)("option",{value:"net_income",children:"Net Income"}),(0,zs.jsx)("option",{value:"cash",children:"Cash"}),(0,zs.jsx)("option",{value:"exclude",children:"Exclude"})]})]})]}),(0,zs.jsxs)("div",{className:"mb-4",children:[(0,zs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,zs.jsx)("input",{type:"text",value:he,onChange:e=>pe(e.target.value),placeholder:"Brief description of what this bucket represents",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),(0,zs.jsxs)("div",{className:"flex gap-2",children:[(0,zs.jsx)("button",{onClick:()=>{if(!de.trim()||!he.trim())return;const e=de.toLowerCase().replace(/[^a-z0-9]/g,"_"),t={label:de.trim(),description:he.trim(),color:Me(fe),icon:Ie(fe),category:fe};ie(n=>(0,s.A)((0,s.A)({},n),{},{[e]:t})),te(t=>(0,s.A)((0,s.A)({},t),{},{[e]:[]})),ue(""),pe(""),ge("income"),oe(!1)},className:"px-3 py-1.5 bg-purple-600 text-white rounded hover:bg-purple-700 text-xs font-medium",children:"Add Bucket"}),(0,zs.jsx)("button",{onClick:()=>oe(!1),className:"px-3 py-1.5 bg-gray-600 text-white rounded hover:bg-gray-700 text-xs font-medium",children:"Cancel"})]})]}),(0,zs.jsxs)("div",{className:"mb-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,zs.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"\ud83d\udca1 How It Works"}),(0,zs.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,zs.jsxs)("li",{children:["\u2022 ",(0,zs.jsx)("strong",{children:"Add terms:"}),' Type a term and click "Add" to include it in the bucket']}),(0,zs.jsxs)("li",{children:["\u2022 ",(0,zs.jsx)("strong",{children:"Remove terms:"}),' Click "Remove" to delete unwanted terms']}),(0,zs.jsxs)("li",{children:["\u2022 ",(0,zs.jsx)("strong",{children:"Delete buckets:"})," Click the \ud83d\uddd1\ufe0f trash icon to remove entire buckets"]}),(0,zs.jsxs)("li",{children:["\u2022 ",(0,zs.jsx)("strong",{children:"Adjust categories:"})," Change bucket category to control color coding (Income=Green, Expense=Red, Cash=Purple)"]}),(0,zs.jsxs)("li",{children:["\u2022 ",(0,zs.jsx)("strong",{children:"Case insensitive:"})," Terms are automatically converted to lowercase"]}),(0,zs.jsxs)("li",{children:["\u2022 ",(0,zs.jsx)("strong",{children:"Partial matching:"})," AI looks for terms anywhere in account names"]}),(0,zs.jsxs)("li",{children:["\u2022 ",(0,zs.jsx)("strong",{children:"Priority order:"})," First matching bucket wins (order matters)"]}),(0,zs.jsxs)("li",{children:["\u2022 ",(0,zs.jsx)("strong",{children:"Save changes:"}),' Click "Save Changes" to persist your settings']})]})]})]})]}),(0,zs.jsxs)("details",{className:"mt-3",children:[(0,zs.jsx)("summary",{className:"cursor-pointer text-sm text-gray-600 hover:text-gray-800",children:"\ud83d\udccb View Raw JSON Data"}),(0,zs.jsx)("pre",{className:"text-xs border rounded p-2 max-h-80 overflow-auto bg-gray-50 mt-2",children:JSON.stringify(h,null,2)})]})]}),(0,zs.jsxs)("div",{className:"p-3 border rounded-lg bg-gray-50",children:[(0,zs.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,zs.jsxs)("h3",{className:"text-sm font-semibold text-gray-700",children:["\ud83d\udcc1 CSV Files (",O.length,")"]}),(0,zs.jsx)("div",{className:"flex gap-1",children:(0,zs.jsx)("button",{onClick:ve,disabled:z,className:"px-2 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 text-xs flex items-center gap-1",title:"Refresh CSV list",children:(0,zs.jsx)(La,{className:"w-3 h-3 ".concat(z?"animate-spin":"")})})})]}),0===O.length?(0,zs.jsx)("p",{className:"text-xs text-gray-500",children:"No CSV files found"}):(0,zs.jsxs)("div",{className:"space-y-1",children:[O.slice(0,3).map(e=>(0,zs.jsxs)("div",{className:"flex items-center justify-between p-2 bg-white rounded border text-xs",children:[(0,zs.jsxs)("div",{className:"flex items-center gap-2",children:[(0,zs.jsx)(vg,{className:"w-3 h-3 text-gray-400"}),(0,zs.jsx)("span",{className:"font-medium text-gray-700 truncate max-w-32",children:e.fileName}),(0,zs.jsx)("span",{className:"w-1.5 h-1.5 rounded-full ".concat(e.isActive?"bg-green-500":"bg-gray-400")})]}),(0,zs.jsxs)("div",{className:"flex items-center gap-1",children:[(0,zs.jsx)("button",{onClick:()=>(e=>{const t=(e.previewData||e.preview_data||[]).filter(t=>!0===(e.includedItems||e.included_items||{})[t.account_name]),n={};Object.entries(e.accountCategories||e.account_categories||{}).forEach(t=>{let[r,s]=t;!0===(e.includedItems||e.included_items||{})[r]&&(n[r]=s)});const r={};Object.entries(e.bucketAssignments||e.bucket_assignments||{}).forEach(t=>{let[n,s]=t;!0===(e.includedItems||e.included_items||{})[n]&&(r[n]=s)}),R(e),$(n),J(r),W(r),Q(e.tags||{}),B(e.includedItems||{}),D(!0),Z(!0),p(t),q(n),k(r),w(e.includedItems||{}),C(!0),console.log("\ud83d\udc41\ufe0f Previewing CSV (filtered):",e.fileName,"with",t.length,"included records")})(e),className:"p-1 text-purple-600 hover:bg-purple-100 rounded",title:"Preview CSV (excludes deselected items)",children:(0,zs.jsx)(ka,{className:"w-3 h-3"})}),(0,zs.jsx)("button",{onClick:()=>(async e=>{console.log("\u270f\ufe0f Editing CSV data:",{fileName:e.fileName||e.file_name,accountCategoriesCount:Object.keys(e.accountCategories||e.account_categories||{}).length,bucketAssignmentsCount:Object.keys(e.bucketAssignments||e.bucket_assignments||{}).length,includedItemsCount:Object.keys(e.includedItems||e.included_items||{}).length,previewDataCount:(e.previewData||e.preview_data||[]).length,sampleAccountCategories:Object.keys(e.accountCategories||e.account_categories||{}).slice(0,3),sampleBucketAssignments:Object.keys(e.bucketAssignments||e.bucket_assignments||{}).slice(0,3),sampleIncludedItems:Object.keys(e.includedItems||e.included_items||{}).slice(0,3),bucketAssignmentsData:e.bucketAssignments||e.bucket_assignments||{},bucketAssignmentsKeys:Object.keys(e.bucketAssignments||e.bucket_assignments||{}),bucketAssignmentsValues:Object.values(e.bucketAssignments||e.bucket_assignments||{})});try{console.log("\ud83e\udde0 Loading AI learning data for editing CSV with file type:",e.fileType||e.file_type);const t=await(0,mf.jo)(e.fileType||e.file_type),n=Array.isArray(t)?t:[];b(n),console.log("\ud83e\udde0 Loaded AI learning data for editing:",n.length,"entries")}catch(m){console.warn("Failed to load AI learning data for editing:",m),b([])}R(e),$(e.accountCategories||e.account_categories||{}),J(e.bucketAssignments||e.bucket_assignments||{}),W(e.bucketAssignments||e.bucket_assignments||{}),Q(e.tags||{}),B(e.includedItems||e.included_items||{}),D(!1),Z(!1),p(e.previewData||e.preview_data||[]),q(e.accountCategories||e.account_categories||{});const t=e.bucketAssignments||e.bucket_assignments||{};console.log("\ud83e\udea3 Loading bucket assignments:",{source:e.bucketAssignments?"bucketAssignments":"bucket_assignments",count:Object.keys(t).length,assignments:t}),k(t),w(e.includedItems||e.included_items||{}),C(!0),console.log("\u270f\ufe0f Editing CSV:",e.fileName||e.file_name,"with",(e.previewData||e.preview_data||[]).length,"records")})(e),className:"p-1 text-blue-600 hover:bg-blue-100 rounded",title:"Edit CSV (shows all items)",children:(0,zs.jsx)(wg,{className:"w-3 h-3"})}),(0,zs.jsx)("button",{onClick:()=>(async e=>{const t=O.find(t=>t.id===e);if(!t)return;if(window.confirm('Are you sure you want to delete "'.concat(t.fileName,'"?\n\n')+"This will permanently remove:\n"+"\u2022 ".concat(t.totalRecords," records\n")+"\u2022 All categorizations and bucket assignments\n\u2022 Dashboard data from this CSV\n\nThis action cannot be undone.")){F(!0);try{const n=JSON.parse(localStorage.getItem("savedCSVs")||"[]").filter(t=>t.id!==e);localStorage.setItem("savedCSVs",JSON.stringify(n)),await ve(),(null===I||void 0===I?void 0:I.id)===e&&(R(null),W({}),B({})),window.dispatchEvent(new CustomEvent("dataUpdated",{detail:{action:"csv_deleted",csvId:e,fileName:t.fileName}})),console.log('\u2705 CSV "'.concat(t.fileName,'" deleted successfully'))}catch(m){console.error("Delete failed:",m),alert("Failed to delete CSV. Please try again.")}finally{F(!1)}}})(e.id),className:"p-1 text-red-600 hover:bg-red-100 rounded",title:"Delete CSV",children:(0,zs.jsx)(Sa,{className:"w-3 h-3"})})]})]},e.id)),O.length>3&&(0,zs.jsxs)("p",{className:"text-xs text-gray-500 text-center",children:["+",O.length-3," more files"]})]})]}),!!a.length&&(0,zs.jsxs)("div",{className:"mt-4 p-3 bg-gray-50 border border-gray-200 rounded-lg",children:[(0,zs.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,zs.jsx)("h5",{className:"text-sm font-medium text-gray-700",children:"\ud83d\udd17 Header Mapping"}),(0,zs.jsx)("span",{className:"text-xs text-gray-500 bg-gray-200 px-2 py-1 rounded",children:"auto"})]}),(0,zs.jsxs)("div",{className:"text-xs text-gray-600 mb-2",children:["\ud83e\udd16 AI automatically mapped ",a.length," headers"]}),(0,zs.jsx)("div",{className:"max-h-32 overflow-y-auto",children:(0,zs.jsx)("div",{className:"space-y-1",children:a.map((e,t)=>(0,zs.jsxs)("div",{className:"flex items-center justify-between text-xs py-1 px-2 bg-white rounded border",children:[(0,zs.jsx)("span",{className:"font-medium text-gray-800 truncate max-w-xs",title:e,children:e}),(0,zs.jsxs)("span",{className:"text-green-600 flex items-center gap-1",children:[(0,zs.jsx)("span",{className:"text-green-500",children:"\u2714"}),e.toLowerCase().includes("account")||e.toLowerCase().includes("name")?"Auto-categorized by AI":"Auto-mapped to time-series"]})]},t))})})]}),(0,zs.jsx)("div",{className:"space-y-6"}),(0,zs.jsxs)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,zs.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-200",children:[(0,zs.jsx)("div",{className:"text-sm font-medium text-blue-800",children:"Total Records"}),(0,zs.jsx)("div",{className:"text-lg font-bold text-blue-900",children:h.length})]}),(0,zs.jsxs)("div",{className:"bg-green-50 p-3 rounded-lg border border-green-200",children:[(0,zs.jsx)("div",{className:"text-sm font-medium text-green-800",children:"\u2705 Included"}),(0,zs.jsx)("div",{className:"text-lg font-bold text-green-900",children:Object.values(v).filter(e=>!0===e).length})]}),(0,zs.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-200",children:[(0,zs.jsx)("div",{className:"text-sm font-medium text-gray-800",children:"\u274c Excluded"}),(0,zs.jsx)("div",{className:"text-lg font-bold text-gray-900",children:Object.values(v).filter(e=>!1===e).length})]}),(0,zs.jsxs)("div",{className:"bg-green-50 p-3 rounded-lg border border-green-200",children:[(0,zs.jsx)("div",{className:"text-sm font-medium text-green-800",children:"\ud83d\udcb0 Income"}),(0,zs.jsx)("div",{className:"text-lg font-bold text-green-900",children:Object.entries(H).filter(e=>{let[t,n]=e;return"income"===n&&!0===v[t]}).length})]}),(0,zs.jsxs)("div",{className:"bg-red-50 p-3 rounded-lg border border-red-200",children:[(0,zs.jsx)("div",{className:"text-sm font-medium text-red-800",children:"\ud83d\udcb8 Expense"}),(0,zs.jsx)("div",{className:"text-lg font-bold text-red-900",children:Object.entries(H).filter(e=>{let[t,n]=e;return"expense"===n&&!0===v[t]}).length})]})]})]})})}const Sg=()=>{var e;const[n,r]=(0,t.useState)("import-flow"),s=[{id:"import-flow",label:"Import Flow",icon:Os,description:"AI-powered CSV import with smart mapping"},{id:"upload",label:"Basic Upload",icon:Ps,description:"Traditional CSV upload"}];return(0,zs.jsx)("div",{className:"space-y-6",children:(0,zs.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,zs.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,zs.jsx)("div",{className:"flex items-center justify-between",children:(0,zs.jsxs)("div",{children:[(0,zs.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"CSV Upload & Management"}),(0,zs.jsx)("p",{className:"text-gray-600 mt-1",children:"Upload, parse, and manage your property data files"})]})})}),(0,zs.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,zs.jsx)("nav",{className:"flex space-x-8",children:s.map(e=>(0,zs.jsxs)("button",{onClick:()=>r(e.id),className:"flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium transition-colors ".concat(n===e.id?"bg-blue-100 text-blue-700 border border-blue-200":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:[(0,zs.jsx)(e.icon,{className:"w-4 h-4"}),(0,zs.jsx)("span",{children:e.label})]},e.id))})}),(0,zs.jsx)("div",{className:"px-6 py-3 bg-gray-50 border-b border-gray-200",children:(0,zs.jsx)("p",{className:"text-sm text-gray-600",children:null===(e=s.find(e=>e.id===n))||void 0===e?void 0:e.description})}),(0,zs.jsx)("div",{className:"p-6",children:"upload"===n?(0,zs.jsx)(yg,{}):(0,zs.jsx)(jg,{})})]})})},Ng=Ns("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Cg=Ns("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Eg=e=>{let{onClose:n}=e;const[r,s]=(0,t.useState)(0),i=[{id:"dashboard",title:"Dashboard Overview",description:"Get a comprehensive view of your property portfolio with key metrics and performance indicators.",image:"/demo-screenshots/dashboard.png",features:["Real-time financial metrics","Property performance charts","Quick access to key data","Visual impact analysis"]},{id:"financials",title:"Financial Analysis",description:"Deep dive into your property finances with detailed breakdowns and trend analysis.",image:"/demo-screenshots/financials.png",features:["Monthly financial breakdowns","Expense categorization","Revenue tracking","Impact-based analysis"]},{id:"csv-import",title:"Smart CSV Import",description:"AI-powered data import with automatic categorization and bucket management.",image:"/demo-screenshots/csv-import.png",features:["AI-powered categorization","Automatic bucket assignment","Data validation","Preview before import"]},{id:"analytics",title:"Advanced Analytics",description:"Comprehensive analytics with benchmarking and market comparisons.",image:"/demo-screenshots/analytics.png",features:["Market benchmarking","Performance comparisons","Trend analysis","Custom reports"]},{id:"properties",title:"Property Management",description:"Manage all your properties with detailed information and performance tracking.",image:"/demo-screenshots/properties.png",features:["Property portfolio view","Individual property details","Performance metrics","Maintenance tracking"]}],a=i[r];return(0,zs.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,zs.jsxs)("div",{className:"bg-white rounded-lg max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[(0,zs.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,zs.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,zs.jsxs)(Qi,{variant:"ghost",size:"sm",onClick:n,className:"flex items-center space-x-2",children:[(0,zs.jsx)(Ng,{className:"w-4 h-4"}),(0,zs.jsx)("span",{children:"Back to Landing"})]}),(0,zs.jsx)("div",{className:"h-6 w-px bg-gray-300"}),(0,zs.jsx)("h2",{className:"text-xl font-semibold",children:"PropFi Demo"})]}),(0,zs.jsx)(Qi,{variant:"ghost",size:"sm",onClick:n,children:(0,zs.jsx)(Ds,{className:"w-4 h-4"})})]}),(0,zs.jsxs)("div",{className:"flex h-[calc(90vh-120px)]",children:[(0,zs.jsx)("div",{className:"w-80 bg-gray-50 p-6 overflow-y-auto",children:(0,zs.jsx)("div",{className:"space-y-2",children:i.map((e,t)=>(0,zs.jsxs)("button",{onClick:()=>s(t),className:"w-full text-left p-3 rounded-lg transition-colors ".concat(t===r?"bg-blue-100 text-blue-900 border border-blue-200":"hover:bg-gray-100"),children:[(0,zs.jsx)("div",{className:"font-medium text-sm",children:e.title}),(0,zs.jsx)("div",{className:"text-xs text-gray-600 mt-1",children:e.description})]},e.id))})}),(0,zs.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,zs.jsxs)("div",{className:"p-6 border-b",children:[(0,zs.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:a.title}),(0,zs.jsx)("p",{className:"text-gray-600 mb-4",children:a.description}),(0,zs.jsx)("div",{className:"flex flex-wrap gap-2",children:a.features.map((e,t)=>(0,zs.jsx)("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 text-sm rounded-full",children:e},t))})]}),(0,zs.jsx)("div",{className:"flex-1 p-6 bg-gray-100 flex items-center justify-center",children:(0,zs.jsx)("div",{className:"bg-white rounded-lg shadow-lg max-w-full max-h-full overflow-hidden",children:(0,zs.jsx)("img",{src:a.image,alt:a.title,className:"w-full h-auto",onError:e=>{e.currentTarget.src="data:image/svg+xml,".concat(encodeURIComponent('\n                      <svg width="800" height="600" xmlns="http://www.w3.org/2000/svg">\n                        <rect width="100%" height="100%" fill="#f3f4f6"/>\n                        <text x="50%" y="50%" text-anchor="middle" dy=".3em" font-family="Arial, sans-serif" font-size="24" fill="#6b7280">\n                          '.concat(a.title,' Screenshot\n                        </text>\n                        <text x="50%" y="60%" text-anchor="middle" dy=".3em" font-family="Arial, sans-serif" font-size="16" fill="#9ca3af">\n                          Coming Soon\n                        </text>\n                      </svg>\n                    ')))}})})}),(0,zs.jsxs)("div",{className:"flex items-center justify-between p-6 border-t",children:[(0,zs.jsxs)(Qi,{variant:"outline",onClick:()=>{s(e=>(e-1+i.length)%i.length)},disabled:0===r,children:[(0,zs.jsx)(Cg,{className:"w-4 h-4 mr-2"}),"Previous"]}),(0,zs.jsx)("div",{className:"flex space-x-2",children:i.map((e,t)=>(0,zs.jsx)("button",{onClick:()=>s(t),className:"w-3 h-3 rounded-full transition-colors ".concat(t===r?"bg-blue-600":"bg-gray-300 hover:bg-gray-400")},t))}),(0,zs.jsxs)(Qi,{variant:"outline",onClick:()=>{s(e=>(e+1)%i.length)},disabled:r===i.length-1,children:["Next",(0,zs.jsx)(og,{className:"w-4 h-4 ml-2"})]})]})]})]}),(0,zs.jsx)("div",{className:"p-6 border-t bg-blue-50",children:(0,zs.jsxs)("div",{className:"text-center",children:[(0,zs.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Ready to try PropFi?"}),(0,zs.jsx)("p",{className:"text-gray-600 mb-4",children:"Get started with a free month and see how PropFi can transform your property management."}),(0,zs.jsx)(is,{mode:"modal",children:(0,zs.jsx)(Qi,{size:"lg",className:"px-8",children:"Start Free Trial"})})]})})]})})},Ag=Ns("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]),Pg=Ns("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Tg=()=>{const{isSignedIn:e,user:n}=Tt(),[r,s]=(0,t.useState)(!1),i=[{icon:(0,zs.jsx)(Ps,{className:"h-6 w-6"}),title:"Smart CSV Import",description:"AI-powered categorization and parsing of financial data with intelligent bucket management"},{icon:(0,zs.jsx)(As,{className:"h-6 w-6"}),title:"Real-time Analytics",description:"Live dashboards with interactive charts and comprehensive financial insights"},{icon:(0,zs.jsx)(Uf,{className:"h-6 w-6"}),title:"AI Powered Metric Benchmarking",description:"Compare your property performance against local market averages with AI-driven insights tailored to your specific geographic area and property type"},{icon:(0,zs.jsx)(Ra,{className:"h-6 w-6"}),title:"Performance Tracking",description:"Monitor income, expenses, and net operating income with automated calculations"},{icon:(0,zs.jsx)(Na,{className:"h-6 w-6"}),title:"Secure & Reliable",description:"Enterprise-grade security with data encryption and secure cloud storage"},{icon:(0,zs.jsx)(Ag,{className:"h-6 w-6"}),title:"Generate and Print Reports",description:"Create professional financial reports, cash flow statements, and property performance summaries with customizable templates and one-click printing"}];return(0,zs.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:[(0,zs.jsx)("nav",{className:"border-b bg-white/80 backdrop-blur-sm sticky top-0 z-50",children:(0,zs.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,zs.jsxs)("div",{className:"flex items-center justify-between",children:[(0,zs.jsx)(Fs,{size:"md"}),(0,zs.jsx)("div",{className:"flex items-center space-x-4",children:e?(0,zs.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,zs.jsxs)("span",{className:"text-sm text-gray-600",children:["Welcome, ",null===n||void 0===n?void 0:n.firstName,"!"]}),(0,zs.jsx)(or,{afterSignOutUrl:"/"})]}):(0,zs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,zs.jsx)(ss,{mode:"modal",children:(0,zs.jsx)(Qi,{variant:"ghost",children:"Sign In"})}),(0,zs.jsx)(is,{mode:"modal",children:(0,zs.jsx)(Qi,{children:"Get Started"})}),(0,zs.jsxs)(Qi,{variant:"outline",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:{page:"pricing"}})),title:"1-month free demo, then $29/month for unlimited properties and features",children:[(0,zs.jsx)(Rs,{className:"w-4 h-4 mr-2"}),"Pricing"]})]})})]})})}),(0,zs.jsx)("section",{className:"py-20 px-4",children:(0,zs.jsxs)("div",{className:"container mx-auto text-center",children:[(0,zs.jsx)("div",{className:"flex justify-center mb-6",children:(0,zs.jsx)(Fs,{size:"xl",showText:!1})}),(0,zs.jsxs)("h1",{className:"text-5xl md:text-6xl font-bold text-gray-900 mb-6",children:["Visualize Your Property's",(0,zs.jsx)("span",{className:"text-primary",children:" Financial Data"})]}),(0,zs.jsx)("p",{className:"text-xl text-gray-600 mb-8 max-w-3xl mx-auto",children:"PropFi is a Data Visualization and AI powered market analysis tool for property investors and managers. Import CSV data with AI-powered categorization, track cash flows, and gain real-time insights into your property portfolio."}),(0,zs.jsx)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-12",children:e?(0,zs.jsxs)(Qi,{size:"lg",className:"text-lg px-8 py-6",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:{page:"dashboard"}})),children:["Go to Dashboard",(0,zs.jsx)(Pg,{className:"ml-2 h-5 w-5"})]}):(0,zs.jsxs)(zs.Fragment,{children:[(0,zs.jsx)(is,{mode:"modal",children:(0,zs.jsxs)(Qi,{size:"lg",className:"text-lg px-8 py-6",children:["Get Started",(0,zs.jsx)(Pg,{className:"ml-2 h-5 w-5"})]})}),(0,zs.jsx)(Qi,{variant:"outline",size:"lg",className:"text-lg px-8 py-6",onClick:()=>s(!0),children:"Try Demo"})]})})]})}),(0,zs.jsx)("section",{className:"py-20 px-4 bg-white",children:(0,zs.jsxs)("div",{className:"container mx-auto",children:[(0,zs.jsx)("div",{className:"text-center mb-16",children:(0,zs.jsx)("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"From AI-powered data import to real-time analytics, PropFi provides all the tools you need for successful property management."})}),(0,zs.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:i.map((e,t)=>(0,zs.jsxs)(sa,{className:"border-0 shadow-lg hover:shadow-xl transition-shadow",children:[(0,zs.jsx)(ia,{children:(0,zs.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,zs.jsx)("div",{className:"p-2 bg-primary/10 rounded-lg text-primary",children:e.icon}),(0,zs.jsx)(aa,{className:"text-xl",children:e.title})]})}),(0,zs.jsx)(la,{children:(0,zs.jsx)(oa,{className:"text-base",children:e.description})})]},t))})]})}),(0,zs.jsx)("section",{className:"py-20 px-4 bg-primary",children:(0,zs.jsxs)("div",{className:"container mx-auto text-center",children:[(0,zs.jsx)("h2",{className:"text-4xl font-bold text-white mb-4",children:"Ready to Visualize Your Property's Financial Data?"}),(0,zs.jsx)("p",{className:"text-xl text-primary-foreground mb-8 max-w-2xl mx-auto",children:"Join thousands of property professionals who trust PropFi to manage their portfolios with AI-powered insights and real-time analytics."}),e?(0,zs.jsxs)(Qi,{size:"lg",variant:"secondary",className:"text-lg px-8 py-6",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:{page:"dashboard"}})),children:["Access Dashboard",(0,zs.jsx)(Pg,{className:"ml-2 h-5 w-5"})]}):(0,zs.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,zs.jsx)(is,{mode:"modal",children:(0,zs.jsxs)(Qi,{size:"lg",variant:"secondary",className:"text-lg px-8 py-6",children:["Get Started Free",(0,zs.jsx)(Pg,{className:"ml-2 h-5 w-5"})]})}),(0,zs.jsxs)(Qi,{size:"lg",variant:"outline",className:"text-lg px-8 py-6 bg-white/10 border-white/20 text-white hover:bg-white/20",onClick:()=>window.dispatchEvent(new CustomEvent("navigateToPage",{detail:{page:"pricing"}})),title:"1-month free demo, then $29/month for unlimited properties and features",children:[(0,zs.jsx)(Rs,{className:"mr-2 h-5 w-5"}),"View Pricing"]})]})]})}),(0,zs.jsx)("footer",{className:"py-12 px-4 bg-gray-900 text-white",children:(0,zs.jsxs)("div",{className:"container mx-auto",children:[(0,zs.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[(0,zs.jsxs)("div",{children:[(0,zs.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,zs.jsx)(Ts,{className:"h-6 w-6"}),(0,zs.jsx)("span",{className:"text-xl font-bold",children:"PropFi"})]}),(0,zs.jsx)("p",{className:"text-gray-400",children:"The future of property management is here. AI-powered insights for smarter decisions."})]}),(0,zs.jsxs)("div",{children:[(0,zs.jsx)("h3",{className:"font-semibold mb-4",children:"Product"}),(0,zs.jsxs)("ul",{className:"space-y-2 text-gray-400",children:[(0,zs.jsx)("li",{children:(0,zs.jsx)("button",{className:"hover:text-white transition-colors text-left",children:"Features"})}),(0,zs.jsx)("li",{children:(0,zs.jsx)("button",{className:"hover:text-white transition-colors text-left",children:"Pricing"})}),(0,zs.jsx)("li",{children:(0,zs.jsx)("button",{className:"hover:text-white transition-colors text-left",children:"API"})}),(0,zs.jsx)("li",{children:(0,zs.jsx)("button",{className:"hover:text-white transition-colors text-left",children:"Integrations"})})]})]}),(0,zs.jsxs)("div",{children:[(0,zs.jsx)("h3",{className:"font-semibold mb-4",children:"Company"}),(0,zs.jsxs)("ul",{className:"space-y-2 text-gray-400",children:[(0,zs.jsx)("li",{children:(0,zs.jsx)("button",{className:"hover:text-white transition-colors text-left",children:"About"})}),(0,zs.jsx)("li",{children:(0,zs.jsx)("button",{className:"hover:text-white transition-colors text-left",children:"Blog"})}),(0,zs.jsx)("li",{children:(0,zs.jsx)("button",{className:"hover:text-white transition-colors text-left",children:"Careers"})}),(0,zs.jsx)("li",{children:(0,zs.jsx)("button",{className:"hover:text-white transition-colors text-left",children:"Contact"})})]})]}),(0,zs.jsxs)("div",{children:[(0,zs.jsx)("h3",{className:"font-semibold mb-4",children:"Support"}),(0,zs.jsxs)("ul",{className:"space-y-2 text-gray-400",children:[(0,zs.jsx)("li",{children:(0,zs.jsx)("button",{className:"hover:text-white transition-colors text-left",children:"Help Center"})}),(0,zs.jsx)("li",{children:(0,zs.jsx)("button",{className:"hover:text-white transition-colors text-left",children:"Documentation"})}),(0,zs.jsx)("li",{children:(0,zs.jsx)("button",{className:"hover:text-white transition-colors text-left",children:"Status"})}),(0,zs.jsx)("li",{children:(0,zs.jsx)("button",{className:"hover:text-white transition-colors text-left",children:"Security"})})]})]})]}),(0,zs.jsx)("div",{className:"border-t border-gray-800 mt-8 pt-8 text-center text-gray-400",children:(0,zs.jsx)("p",{children:"\xa9 2024 PropFi. All rights reserved."})})]})}),r&&(0,zs.jsx)(Eg,{onClose:()=>s(!1)})]})},Og=Ns("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),Mg=e=>{let{onSubscribe:n}=e;const{user:r}=Tt(),[s,i]=(0,t.useState)(1);return(0,zs.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 py-12",children:(0,zs.jsxs)("div",{className:"container mx-auto px-4",children:[(0,zs.jsxs)("div",{className:"text-center mb-12",children:[(0,zs.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Simple, Transparent Pricing"}),(0,zs.jsx)("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Start with a free month, then pay only for what you need. No hidden fees, no surprises."})]}),(0,zs.jsx)("div",{className:"max-w-md mx-auto",children:(0,zs.jsxs)(sa,{className:"relative border-2 border-primary shadow-xl",children:[(0,zs.jsxs)(va,{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 bg-primary text-white",children:[(0,zs.jsx)(Og,{className:"w-3 h-3 mr-1"}),"Most Popular"]}),(0,zs.jsxs)(ia,{className:"text-center pb-4",children:[(0,zs.jsx)(aa,{className:"text-2xl font-bold text-gray-900",children:"PropFi Pro"}),(0,zs.jsx)(oa,{className:"text-gray-600",children:"Everything you need to manage your properties"}),(0,zs.jsxs)("div",{className:"mt-6",children:[(0,zs.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"First month free, then:"}),(0,zs.jsxs)("div",{className:"text-4xl font-bold text-primary",children:["$",(a=s,20*a),(0,zs.jsx)("span",{className:"text-lg text-gray-500",children:"/month"})]}),(0,zs.jsx)("div",{className:"text-sm text-gray-500 mt-2",children:"$20 per property per month"})]})]}),(0,zs.jsxs)(la,{className:"space-y-6",children:[(0,zs.jsxs)("div",{children:[(0,zs.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Number of Properties"}),(0,zs.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,zs.jsx)(Qi,{variant:"outline",size:"sm",onClick:()=>i(Math.max(1,s-1)),disabled:s<=1,children:"-"}),(0,zs.jsx)("span",{className:"w-16 text-center font-medium",children:s}),(0,zs.jsx)(Qi,{variant:"outline",size:"sm",onClick:()=>i(s+1),children:"+"})]}),(0,zs.jsx)("div",{className:"text-xs text-gray-500 mt-2",children:"You can change this anytime in your dashboard"})]}),(0,zs.jsxs)("div",{children:[(0,zs.jsx)("h3",{className:"font-medium text-gray-900 mb-3",children:"What's included:"}),(0,zs.jsx)("ul",{className:"space-y-2",children:["Unlimited CSV uploads","AI-powered categorization","Real-time analytics dashboard","Team collaboration","Data export capabilities","Priority support"].map((e,t)=>(0,zs.jsxs)("li",{className:"flex items-center text-sm text-gray-600",children:[(0,zs.jsx)(Pa,{className:"w-4 h-4 text-green-500 mr-2 flex-shrink-0"}),e]},t))})]}),(0,zs.jsx)(Qi,{className:"w-full",size:"lg",onClick:()=>{return e="pro",void(n&&n(e,s));var e},children:r?"Start Free Trial":"Sign Up for Free Trial"}),(0,zs.jsx)("div",{className:"text-center text-xs text-gray-500",children:"No credit card required for the first month"})]})]})}),(0,zs.jsxs)("div",{className:"max-w-4xl mx-auto mt-12 grid md:grid-cols-3 gap-8",children:[(0,zs.jsxs)("div",{className:"text-center",children:[(0,zs.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,zs.jsx)(Pa,{className:"w-6 h-6 text-green-600"})}),(0,zs.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Cancel Anytime"}),(0,zs.jsx)("p",{className:"text-sm text-gray-600",children:"No long-term contracts. Cancel your subscription whenever you want."})]}),(0,zs.jsxs)("div",{className:"text-center",children:[(0,zs.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,zs.jsx)(Pa,{className:"w-6 h-6 text-blue-600"})}),(0,zs.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Scale as You Grow"}),(0,zs.jsx)("p",{className:"text-sm text-gray-600",children:"Add or remove properties anytime. You only pay for what you use."})]}),(0,zs.jsxs)("div",{className:"text-center",children:[(0,zs.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,zs.jsx)(Pa,{className:"w-6 h-6 text-purple-600"})}),(0,zs.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Priority Support"}),(0,zs.jsx)("p",{className:"text-sm text-gray-600",children:"Get help when you need it with our dedicated support team."})]})]}),(0,zs.jsxs)("div",{className:"max-w-3xl mx-auto mt-16",children:[(0,zs.jsx)("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-8",children:"Frequently Asked Questions"}),(0,zs.jsxs)("div",{className:"space-y-6",children:[(0,zs.jsxs)("div",{children:[(0,zs.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"How does the free trial work?"}),(0,zs.jsx)("p",{className:"text-sm text-gray-600",children:"You get full access to all features for the first month at no cost. No credit card required to start."})]}),(0,zs.jsxs)("div",{children:[(0,zs.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Can I change my property count later?"}),(0,zs.jsx)("p",{className:"text-sm text-gray-600",children:"Yes! You can add or remove properties anytime from your dashboard. Billing updates automatically."})]}),(0,zs.jsxs)("div",{children:[(0,zs.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"What happens if I exceed my property limit?"}),(0,zs.jsx)("p",{className:"text-sm text-gray-600",children:"We'll automatically upgrade your plan and charge the difference. You'll receive an email notification."})]}),(0,zs.jsxs)("div",{children:[(0,zs.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Is there a setup fee?"}),(0,zs.jsx)("p",{className:"text-sm text-gray-600",children:"No setup fees, no hidden costs. Just the transparent monthly pricing you see here."})]})]})]})]})});var a},Ig=Ns("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),Rg=Ns("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),Lg=()=>{const[e,n]=(0,t.useState)(!1);(0,t.useEffect)(()=>{const e=localStorage.getItem("theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches;"dark"===e||!e&&t?(n(!0),document.documentElement.classList.add("dark")):(n(!1),document.documentElement.classList.remove("dark"))},[]);return(0,zs.jsx)("div",{className:"fixed bottom-6 right-6 z-50 group",children:(0,zs.jsxs)("button",{onClick:()=>{const t=!e;n(t),t?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},className:"flex items-center space-x-3 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden","aria-label":"Toggle dark mode",children:[(0,zs.jsxs)("div",{className:"flex items-center space-x-2 p-2",children:[(0,zs.jsx)(Ig,{className:"w-4 h-4 transition-colors duration-200 ".concat(e?"text-gray-400":"text-yellow-500")}),(0,zs.jsx)("div",{className:"relative w-10 h-5 rounded-full transition-colors duration-300 ".concat(e?"bg-blue-600":"bg-gray-300"),children:(0,zs.jsx)("div",{className:"absolute top-0.5 left-0.5 w-4 h-4 bg-white rounded-full shadow-md transform transition-transform duration-300 ".concat(e?"translate-x-5":"translate-x-0")})}),(0,zs.jsx)(Rg,{className:"w-4 h-4 transition-colors duration-200 ".concat(e?"text-blue-400":"text-gray-400")})]}),(0,zs.jsx)("div",{className:"hidden group-hover:flex items-center space-x-2 px-3 py-2 border-l border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700",children:(0,zs.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 whitespace-nowrap",children:e?"Dark Mode":"Light Mode"})})]})})},Dg=()=>(0,zs.jsxs)("div",{className:"p-8 space-y-8",children:[(0,zs.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"PropFi Logo Test"}),(0,zs.jsxs)("div",{className:"space-y-6",children:[(0,zs.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,zs.jsx)("span",{className:"w-20 text-sm text-gray-600",children:"48px:"}),(0,zs.jsx)(Fs,{size:"sm",showText:!1})]}),(0,zs.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,zs.jsx)("span",{className:"w-20 text-sm text-gray-600",children:"96px:"}),(0,zs.jsx)(Fs,{size:"lg",showText:!1})]}),(0,zs.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,zs.jsx)("span",{className:"w-20 text-sm text-gray-600",children:"160px:"}),(0,zs.jsx)(Fs,{size:"xl",showText:!1})]}),(0,zs.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,zs.jsx)("span",{className:"w-20 text-sm text-gray-600",children:"With Text:"}),(0,zs.jsx)(Fs,{size:"lg",showText:!0})]})]}),(0,zs.jsxs)("div",{className:"mt-8 p-4 bg-gray-100 rounded-lg",children:[(0,zs.jsx)("h3",{className:"font-semibold mb-2",children:"Test Results:"}),(0,zs.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1",children:[(0,zs.jsx)("li",{children:"\u2713 Logo should render consistently at all sizes"}),(0,zs.jsx)("li",{children:'\u2713 No distortion or "decomposition"'}),(0,zs.jsx)("li",{children:"\u2713 Proper aspect ratio maintained"}),(0,zs.jsx)("li",{children:"\u2713 Clean edges and proper scaling"})]})]})]});function zg(){const[e,r]=(0,t.useState)("dashboard"),[s,i]=(0,t.useState)(null),[a,o]=(0,t.useState)(!1),{isSignedIn:l,isLoaded:c,user:d}=Tt(),{signOut:u}=Ot();(0,t.useEffect)(()=>{if(l&&d){(async()=>{try{await jf.j.setCurrentUser(d);if(jf.j.hasOrganization()){const e=await jf.j.getUserOrganization();e&&(i(e.name),localStorage.setItem("organizationName",e.name))}else{const e=localStorage.getItem("organizationName");e&&i(e)}}catch(e){console.error("Error initializing user:",e);const t=localStorage.getItem("organizationName");t&&i(t)}})()}else l||(jf.j.clearUser(),i(null))},[l,d]),t.useEffect(()=>{const e=e=>{const t=e.detail.page;t&&r(t)};return window.addEventListener("navigateToPage",e),()=>{window.removeEventListener("navigateToPage",e)}},[]);const h=async(e,t)=>{if(d)try{var r;const{createCheckoutSession:i}=await Promise.resolve().then(n.bind(n,5865));await i({plan:e,properties:t,userId:d.id,userEmail:(null===(r=d.primaryEmailAddress)||void 0===r?void 0:r.emailAddress)||"",organizationId:s||void 0})}catch(i){console.error("Error creating checkout session:",i)}};return c?l?(0,zs.jsxs)("div",{className:"flex min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,zs.jsx)(Ia,{currentPage:e,setCurrentPage:r,onLogout:async()=>{try{await u(),jf.j.clearUser(),localStorage.removeItem("organizationName")}catch(e){console.error("Error during logout:",e)}},organizationName:s,isCollapsed:a,onToggleCollapse:()=>o(!a)}),(0,zs.jsx)("main",{className:"flex-1 overflow-y-auto transition-all duration-300 ".concat(a?"lg:ml-0":""),children:(0,zs.jsx)("div",{className:"p-6 pb-12",children:(()=>{switch(e){case"dashboard":default:return(0,zs.jsx)(Rf,{});case"financials":return(0,zs.jsx)(fg,{});case"analytics":return(0,zs.jsx)(ig,{});case"properties":return(0,zs.jsx)(Xf,{});case"csvs":return(0,zs.jsx)(Sg,{});case"reports":return(0,zs.jsx)(gg,{});case"pricing":return(0,zs.jsx)(Mg,{onSubscribe:h});case"logo-test":return(0,zs.jsx)(Dg,{})}})()})}),(0,zs.jsx)(Lg,{})]}):(0,zs.jsx)(Tg,{}):(0,zs.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,zs.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})})}const Fg=function(){const e="pk_test_ZmFtb3VzLXRyZWVmcm9nLTU3LmNsZXJrLmFjY291bnRzLmRldiQ";return(0,zs.jsx)(ks,{publishableKey:e,children:(0,zs.jsx)(zg,{})})};r.createRoot(document.getElementById("root")).render((0,zs.jsx)(t.StrictMode,{children:(0,zs.jsx)(Fg,{})}))})()})();
//# sourceMappingURL=main.ab249af1.js.map